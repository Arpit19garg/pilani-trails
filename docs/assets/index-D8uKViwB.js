function uS(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gw={exports:{}},Bh={},_w={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uu=Symbol.for("react.element"),hS=Symbol.for("react.portal"),dS=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),_S=Symbol.for("react.forward_ref"),vS=Symbol.for("react.suspense"),yS=Symbol.for("react.memo"),wS=Symbol.for("react.lazy"),A_=Symbol.iterator;function ES(t){return t===null||typeof t!="object"?null:(t=A_&&t[A_]||t["@@iterator"],typeof t=="function"?t:null)}var vw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yw=Object.assign,ww={};function sa(t,e,n){this.props=t,this.context=e,this.refs=ww,this.updater=n||vw}sa.prototype.isReactComponent={};sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ew(){}Ew.prototype=sa.prototype;function Xp(t,e,n){this.props=t,this.context=e,this.refs=ww,this.updater=n||vw}var Jp=Xp.prototype=new Ew;Jp.constructor=Xp;yw(Jp,sa.prototype);Jp.isPureReactComponent=!0;var x_=Array.isArray,Tw=Object.prototype.hasOwnProperty,em={current:null},Iw={key:!0,ref:!0,__self:!0,__source:!0};function Pw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Tw.call(e,i)&&!Iw.hasOwnProperty(i)&&(r[i]=e[i]);var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];r.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)r[i]===void 0&&(r[i]=h[i]);return{$$typeof:uu,type:t,key:o,ref:l,props:r,_owner:em.current}}function TS(t,e){return{$$typeof:uu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tm(t){return typeof t=="object"&&t!==null&&t.$$typeof===uu}function IS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k_=/\/+/g;function jd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IS(""+t.key):e.toString(36)}function bc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case uu:case hS:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+jd(l,0):i,x_(r)?(n="",t!=null&&(n=t.replace(k_,"$&/")+"/"),bc(r,e,n,"",function(p){return p})):r!=null&&(tm(r)&&(r=TS(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(k_,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",x_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+jd(o,h);l+=bc(o,e,n,d,r)}else if(d=ES(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+jd(o,h++),l+=bc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function cc(t,e,n){if(t==null)return t;var i=[],r=0;return bc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function PS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Nc={transition:null},SS={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Nc,ReactCurrentOwner:em};function Sw(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:cc,forEach:function(t,e,n){cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cc(t,function(){e++}),e},toArray:function(t){return cc(t,function(e){return e})||[]},only:function(t){if(!tm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=sa;Ie.Fragment=dS;Ie.Profiler=pS;Ie.PureComponent=Xp;Ie.StrictMode=fS;Ie.Suspense=vS;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS;Ie.act=Sw;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=yw({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=em.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)Tw.call(e,d)&&!Iw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:uu,type:t.type,key:r,ref:o,props:i,_owner:l}};Ie.createContext=function(t){return t={$$typeof:gS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mS,_context:t},t.Consumer=t};Ie.createElement=Pw;Ie.createFactory=function(t){var e=Pw.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:_S,render:t}};Ie.isValidElement=tm;Ie.lazy=function(t){return{$$typeof:wS,_payload:{_status:-1,_result:t},_init:PS}};Ie.memo=function(t,e){return{$$typeof:yS,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Nc.transition;Nc.transition={};try{t()}finally{Nc.transition=e}};Ie.unstable_act=Sw;Ie.useCallback=function(t,e){return Gt.current.useCallback(t,e)};Ie.useContext=function(t){return Gt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Gt.current.useEffect(t,e)};Ie.useId=function(){return Gt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Gt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Gt.current.useRef(t)};Ie.useState=function(t){return Gt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Gt.current.useTransition()};Ie.version="18.3.1";_w.exports=Ie;var W=_w.exports;const bl=mw(W),CS=uS({__proto__:null,default:bl},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS=W,xS=Symbol.for("react.element"),kS=Symbol.for("react.fragment"),RS=Object.prototype.hasOwnProperty,LS=AS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bS={key:!0,ref:!0,__self:!0,__source:!0};function Cw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)RS.call(e,i)&&!bS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:xS,type:t,key:o,ref:l,props:r,_owner:LS.current}}Bh.Fragment=kS;Bh.jsx=Cw;Bh.jsxs=Cw;gw.exports=Bh;var E=gw.exports,Aw={exports:{}},pn={},xw={exports:{}},kw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ce){var J=G.length;G.push(ce);e:for(;0<J;){var de=J-1>>>1,ye=G[de];if(0<r(ye,ce))G[de]=ce,G[J]=ye,J=de;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ce=G[0],J=G.pop();if(J!==ce){G[0]=J;e:for(var de=0,ye=G.length,Pe=ye>>>1;de<Pe;){var be=2*(de+1)-1,we=G[be],me=be+1,pt=G[me];if(0>r(we,J))me<ye&&0>r(pt,we)?(G[de]=pt,G[me]=J,de=me):(G[de]=we,G[be]=J,de=be);else if(me<ye&&0>r(pt,J))G[de]=pt,G[me]=J,de=me;else break e}}return ce}function r(G,ce){var J=G.sortIndex-ce.sortIndex;return J!==0?J:G.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],_=1,y=null,T=3,S=!1,D=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(G){for(var ce=n(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=G)i(p),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(p)}}function H(G){if(M=!1,O(G),!D)if(n(d)!==null)D=!0,ft(X);else{var ce=n(p);ce!==null&&zt(H,ce.startTime-G)}}function X(G,ce){D=!1,M&&(M=!1,k(P),P=-1),S=!0;var J=T;try{for(O(ce),y=n(d);y!==null&&(!(y.expirationTime>ce)||G&&!V());){var de=y.callback;if(typeof de=="function"){y.callback=null,T=y.priorityLevel;var ye=de(y.expirationTime<=ce);ce=t.unstable_now(),typeof ye=="function"?y.callback=ye:y===n(d)&&i(d),O(ce)}else i(d);y=n(d)}if(y!==null)var Pe=!0;else{var be=n(p);be!==null&&zt(H,be.startTime-ce),Pe=!1}return Pe}finally{y=null,T=J,S=!1}}var q=!1,C=null,P=-1,x=5,R=-1;function V(){return!(t.unstable_now()-R<x)}function F(){if(C!==null){var G=t.unstable_now();R=G;var ce=!0;try{ce=C(!0,G)}finally{ce?b():(q=!1,C=null)}}else q=!1}var b;if(typeof A=="function")b=function(){A(F)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,dt=ze.port2;ze.port1.onmessage=F,b=function(){dt.postMessage(null)}}else b=function(){U(F,0)};function ft(G){C=G,q||(q=!0,b())}function zt(G,ce){P=U(function(){G(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){D||S||(D=!0,ft(X))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(G){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var J=T;T=ce;try{return G()}finally{T=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=T;T=G;try{return ce()}finally{T=J}},t.unstable_scheduleCallback=function(G,ce,J){var de=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?de+J:de):J=de,G){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=J+ye,G={id:_++,callback:ce,priorityLevel:G,startTime:J,expirationTime:ye,sortIndex:-1},J>de?(G.sortIndex=J,e(p,G),n(d)===null&&G===n(p)&&(M?(k(P),P=-1):M=!0,zt(H,J-de))):(G.sortIndex=ye,e(d,G),D||S||(D=!0,ft(X))),G},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(G){var ce=T;return function(){var J=T;T=ce;try{return G.apply(this,arguments)}finally{T=J}}}})(kw);xw.exports=kw;var NS=xw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS=W,fn=NS;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rw=new Set,Nl={};function ks(t,e){Wo(t,e),Wo(t+"Capture",e)}function Wo(t,e){for(Nl[t]=e,t=0;t<e.length;t++)Rw.add(e[t])}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,DS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R_={},L_={};function MS(t){return kf.call(L_,t)?!0:kf.call(R_,t)?!1:DS.test(t)?L_[t]=!0:(R_[t]=!0,!1)}function VS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FS(t,e,n,i){if(e===null||typeof e>"u"||VS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nm=/[\-:]([a-z])/g;function im(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nm,im);Rt[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nm,im);Rt[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nm,im);Rt[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function rm(t,e,n,i){var r=Rt.hasOwnProperty(e)?Rt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FS(e,n,r,i)&&(n=null),i||r===null?MS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Hi=OS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hc=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),sm=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),Lw=Symbol.for("react.provider"),bw=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),Lf=Symbol.for("react.suspense"),bf=Symbol.for("react.suspense_list"),am=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Nw=Symbol.for("react.offscreen"),b_=Symbol.iterator;function Xa(t){return t===null||typeof t!="object"?null:(t=b_&&t[b_]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,zd;function al(t){if(zd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zd=e&&e[1]||""}return`
`+zd+t}var Ud=!1;function Bd(t,e){if(!t||Ud)return"";Ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,h=o.length-1;1<=l&&0<=h&&r[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(r[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||r[l]!==o[h]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?al(t):""}function jS(t){switch(t.tag){case 5:return al(t.type);case 16:return al("Lazy");case 13:return al("Suspense");case 19:return al("SuspenseList");case 0:case 2:case 15:return t=Bd(t.type,!1),t;case 11:return t=Bd(t.type.render,!1),t;case 1:return t=Bd(t.type,!0),t;default:return""}}function Nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case To:return"Fragment";case Eo:return"Portal";case Rf:return"Profiler";case sm:return"StrictMode";case Lf:return"Suspense";case bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bw:return(t.displayName||"Context")+".Consumer";case Lw:return(t._context.displayName||"Context")+".Provider";case om:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case am:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}function zS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nf(e);case 8:return e===sm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ow(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function US(t){var e=Ow(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dc(t){t._valueTracker||(t._valueTracker=US(t))}function Dw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ow(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Jc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Of(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function N_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mw(t,e){e=e.checked,e!=null&&rm(t,"checked",e,!1)}function Df(t,e){Mw(t,e);var n=Lr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mf(t,e.type,Lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function O_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mf(t,e,n){(e!=="number"||Jc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ll=Array.isArray;function Oo(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Lr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function D_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(ll(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lr(n)}}function Vw(t,e){var n=Lr(e.value),i=Lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function M_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ff(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fc,jw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fc=fc||document.createElement("div"),fc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ol(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BS=["Webkit","ms","Moz","O"];Object.keys(_l).forEach(function(t){BS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_l[e]=_l[t]})});function zw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_l.hasOwnProperty(t)&&_l[t]?(""+e).trim():e+"px"}function Uw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=zw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var $S=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(t,e){if(e){if($S[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function zf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=null;function lm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bf=null,Do=null,Mo=null;function V_(t){if(t=du(t)){if(typeof Bf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Gh(e),Bf(t.stateNode,t.type,e))}}function Bw(t){Do?Mo?Mo.push(t):Mo=[t]:Do=t}function $w(){if(Do){var t=Do,e=Mo;if(Mo=Do=null,V_(t),e)for(t=0;t<e.length;t++)V_(e[t])}}function Ww(t,e){return t(e)}function Hw(){}var $d=!1;function qw(t,e,n){if($d)return t(e,n);$d=!0;try{return Ww(t,e,n)}finally{$d=!1,(Do!==null||Mo!==null)&&(Hw(),$w())}}function Dl(t,e){var n=t.stateNode;if(n===null)return null;var i=Gh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var $f=!1;if(Vi)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){$f=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{$f=!1}function WS(t,e,n,i,r,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var vl=!1,eh=null,th=!1,Wf=null,HS={onError:function(t){vl=!0,eh=t}};function qS(t,e,n,i,r,o,l,h,d){vl=!1,eh=null,WS.apply(HS,arguments)}function GS(t,e,n,i,r,o,l,h,d){if(qS.apply(this,arguments),vl){if(vl){var p=eh;vl=!1,eh=null}else throw Error(Y(198));th||(th=!0,Wf=p)}}function Rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F_(t){if(Rs(t)!==t)throw Error(Y(188))}function KS(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return F_(r),t;if(o===i)return F_(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,h=r.child;h;){if(h===n){l=!0,n=r,i=o;break}if(h===i){l=!0,i=r,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=r;break}if(h===i){l=!0,i=o,n=r;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Kw(t){return t=KS(t),t!==null?Zw(t):null}function Zw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zw(t);if(e!==null)return e;t=t.sibling}return null}var Qw=fn.unstable_scheduleCallback,j_=fn.unstable_cancelCallback,ZS=fn.unstable_shouldYield,QS=fn.unstable_requestPaint,rt=fn.unstable_now,YS=fn.unstable_getCurrentPriorityLevel,um=fn.unstable_ImmediatePriority,Yw=fn.unstable_UserBlockingPriority,nh=fn.unstable_NormalPriority,XS=fn.unstable_LowPriority,Xw=fn.unstable_IdlePriority,$h=null,li=null;function JS(t){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot($h,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:nC,eC=Math.log,tC=Math.LN2;function nC(t){return t>>>=0,t===0?32:31-(eC(t)/tC|0)|0}var pc=64,mc=4194304;function ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~r;h!==0?i=ul(h):(o&=l,o!==0&&(i=ul(o)))}else l=n&~r,l!==0?i=ul(l):o!==0&&(i=ul(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-$n(e),r=1<<n,i|=t[n],e&=~r;return i}function iC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-$n(o),h=1<<l,d=r[l];d===-1?(!(h&n)||h&i)&&(r[l]=iC(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jw(){var t=pc;return pc<<=1,!(pc&4194240)&&(pc=64),t}function Wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=n}function sC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-$n(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-$n(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Oe=0;function e0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var t0,hm,n0,i0,r0,qf=!1,gc=[],yr=null,wr=null,Er=null,Ml=new Map,Vl=new Map,ur=[],oC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z_(t,e){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(e.pointerId)}}function el(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=du(e),e!==null&&hm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function aC(t,e,n,i,r){switch(e){case"focusin":return yr=el(yr,t,e,n,i,r),!0;case"dragenter":return wr=el(wr,t,e,n,i,r),!0;case"mouseover":return Er=el(Er,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ml.set(o,el(Ml.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Vl.set(o,el(Vl.get(o)||null,t,e,n,i,r)),!0}return!1}function s0(t){var e=ls(t.target);if(e!==null){var n=Rs(e);if(n!==null){if(e=n.tag,e===13){if(e=Gw(n),e!==null){t.blockedOn=e,r0(t.priority,function(){n0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Uf=i,n.target.dispatchEvent(i),Uf=null}else return e=du(n),e!==null&&hm(e),t.blockedOn=n,!1;e.shift()}return!0}function U_(t,e,n){Oc(t)&&n.delete(e)}function lC(){qf=!1,yr!==null&&Oc(yr)&&(yr=null),wr!==null&&Oc(wr)&&(wr=null),Er!==null&&Oc(Er)&&(Er=null),Ml.forEach(U_),Vl.forEach(U_)}function tl(t,e){t.blockedOn===e&&(t.blockedOn=null,qf||(qf=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,lC)))}function Fl(t){function e(r){return tl(r,t)}if(0<gc.length){tl(gc[0],t);for(var n=1;n<gc.length;n++){var i=gc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(yr!==null&&tl(yr,t),wr!==null&&tl(wr,t),Er!==null&&tl(Er,t),Ml.forEach(e),Vl.forEach(e),n=0;n<ur.length;n++)i=ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)s0(n),n.blockedOn===null&&ur.shift()}var Vo=Hi.ReactCurrentBatchConfig,rh=!0;function uC(t,e,n,i){var r=Oe,o=Vo.transition;Vo.transition=null;try{Oe=1,dm(t,e,n,i)}finally{Oe=r,Vo.transition=o}}function cC(t,e,n,i){var r=Oe,o=Vo.transition;Vo.transition=null;try{Oe=4,dm(t,e,n,i)}finally{Oe=r,Vo.transition=o}}function dm(t,e,n,i){if(rh){var r=Gf(t,e,n,i);if(r===null)ef(t,e,i,sh,n),z_(t,i);else if(aC(r,t,e,n,i))i.stopPropagation();else if(z_(t,i),e&4&&-1<oC.indexOf(t)){for(;r!==null;){var o=du(r);if(o!==null&&t0(o),o=Gf(t,e,n,i),o===null&&ef(t,e,i,sh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else ef(t,e,i,null,n)}}var sh=null;function Gf(t,e,n,i){if(sh=null,t=lm(i),t=ls(t),t!==null)if(e=Rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sh=t,null}function o0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YS()){case um:return 1;case Yw:return 4;case nh:case XS:return 16;case Xw:return 536870912;default:return 16}default:return 16}}var mr=null,fm=null,Dc=null;function a0(){if(Dc)return Dc;var t,e=fm,n=e.length,i,r="value"in mr?mr.value:mr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return Dc=r.slice(t,1<i?1-i:void 0)}function Mc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _c(){return!0}function B_(){return!1}function mn(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_c:B_,this.isPropagationStopped=B_,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),e}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pm=mn(oa),hu=Ye({},oa,{view:0,detail:0}),hC=mn(hu),Hd,qd,nl,Wh=Ye({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nl&&(nl&&t.type==="mousemove"?(Hd=t.screenX-nl.screenX,qd=t.screenY-nl.screenY):qd=Hd=0,nl=t),Hd)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),$_=mn(Wh),dC=Ye({},Wh,{dataTransfer:0}),fC=mn(dC),pC=Ye({},hu,{relatedTarget:0}),Gd=mn(pC),mC=Ye({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),gC=mn(mC),_C=Ye({},oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vC=mn(_C),yC=Ye({},oa,{data:0}),W_=mn(yC),wC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TC[t])?!!e[t]:!1}function mm(){return IC}var PC=Ye({},hu,{key:function(t){if(t.key){var e=wC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(t){return t.type==="keypress"?Mc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SC=mn(PC),CC=Ye({},Wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H_=mn(CC),AC=Ye({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),xC=mn(AC),kC=Ye({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),RC=mn(kC),LC=Ye({},Wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bC=mn(LC),NC=[9,13,27,32],gm=Vi&&"CompositionEvent"in window,yl=null;Vi&&"documentMode"in document&&(yl=document.documentMode);var OC=Vi&&"TextEvent"in window&&!yl,l0=Vi&&(!gm||yl&&8<yl&&11>=yl),q_=" ",G_=!1;function u0(t,e){switch(t){case"keyup":return NC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Io=!1;function DC(t,e){switch(t){case"compositionend":return c0(e);case"keypress":return e.which!==32?null:(G_=!0,q_);case"textInput":return t=e.data,t===q_&&G_?null:t;default:return null}}function MC(t,e){if(Io)return t==="compositionend"||!gm&&u0(t,e)?(t=a0(),Dc=fm=mr=null,Io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return l0&&e.locale!=="ko"?null:e.data;default:return null}}var VC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VC[t.type]:e==="textarea"}function h0(t,e,n,i){Bw(i),e=oh(e,"onChange"),0<e.length&&(n=new pm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var wl=null,jl=null;function FC(t){T0(t,0)}function Hh(t){var e=Co(t);if(Dw(e))return t}function jC(t,e){if(t==="change")return e}var d0=!1;if(Vi){var Kd;if(Vi){var Zd="oninput"in document;if(!Zd){var Z_=document.createElement("div");Z_.setAttribute("oninput","return;"),Zd=typeof Z_.oninput=="function"}Kd=Zd}else Kd=!1;d0=Kd&&(!document.documentMode||9<document.documentMode)}function Q_(){wl&&(wl.detachEvent("onpropertychange",f0),jl=wl=null)}function f0(t){if(t.propertyName==="value"&&Hh(jl)){var e=[];h0(e,jl,t,lm(t)),qw(FC,e)}}function zC(t,e,n){t==="focusin"?(Q_(),wl=e,jl=n,wl.attachEvent("onpropertychange",f0)):t==="focusout"&&Q_()}function UC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hh(jl)}function BC(t,e){if(t==="click")return Hh(e)}function $C(t,e){if(t==="input"||t==="change")return Hh(e)}function WC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:WC;function zl(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!kf.call(e,r)||!Gn(t[r],e[r]))return!1}return!0}function Y_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X_(t,e){var n=Y_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y_(n)}}function p0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?p0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function m0(){for(var t=window,e=Jc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jc(t.document)}return e}function _m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HC(t){var e=m0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&p0(n.ownerDocument.documentElement,n)){if(i!==null&&_m(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=X_(n,o);var l=X_(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qC=Vi&&"documentMode"in document&&11>=document.documentMode,Po=null,Kf=null,El=null,Zf=!1;function J_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zf||Po==null||Po!==Jc(i)||(i=Po,"selectionStart"in i&&_m(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),El&&zl(El,i)||(El=i,i=oh(Kf,"onSelect"),0<i.length&&(e=new pm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Po)))}function vc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var So={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},Qd={},g0={};Vi&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function qh(t){if(Qd[t])return Qd[t];if(!So[t])return t;var e=So[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in g0)return Qd[t]=e[n];return t}var _0=qh("animationend"),v0=qh("animationiteration"),y0=qh("animationstart"),w0=qh("transitionend"),E0=new Map,ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){E0.set(t,e),ks(e,[t])}for(var Yd=0;Yd<ev.length;Yd++){var Xd=ev[Yd],GC=Xd.toLowerCase(),KC=Xd[0].toUpperCase()+Xd.slice(1);Vr(GC,"on"+KC)}Vr(_0,"onAnimationEnd");Vr(v0,"onAnimationIteration");Vr(y0,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(w0,"onTransitionEnd");Wo("onMouseEnter",["mouseout","mouseover"]);Wo("onMouseLeave",["mouseout","mouseover"]);Wo("onPointerEnter",["pointerout","pointerover"]);Wo("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZC=new Set("cancel close invalid load scroll toggle".split(" ").concat(cl));function tv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,GS(i,e,void 0,t),t.currentTarget=null}function T0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&r.isPropagationStopped())break e;tv(r,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&r.isPropagationStopped())break e;tv(r,h,p),o=d}}}if(th)throw t=Wf,th=!1,Wf=null,t}function Ue(t,e){var n=e[ep];n===void 0&&(n=e[ep]=new Set);var i=t+"__bubble";n.has(i)||(I0(e,t,2,!1),n.add(i))}function Jd(t,e,n){var i=0;e&&(i|=4),I0(n,t,i,e)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Ul(t){if(!t[yc]){t[yc]=!0,Rw.forEach(function(n){n!=="selectionchange"&&(ZC.has(n)||Jd(n,!1,t),Jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yc]||(e[yc]=!0,Jd("selectionchange",!1,e))}}function I0(t,e,n,i){switch(o0(e)){case 1:var r=uC;break;case 4:r=cC;break;default:r=dm}n=r.bind(null,e,n,t),r=void 0,!$f||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ef(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===r||h.nodeType===8&&h.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;h!==null;){if(l=ls(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}qw(function(){var p=o,_=lm(n),y=[];e:{var T=E0.get(t);if(T!==void 0){var S=pm,D=t;switch(t){case"keypress":if(Mc(n)===0)break e;case"keydown":case"keyup":S=SC;break;case"focusin":D="focus",S=Gd;break;case"focusout":D="blur",S=Gd;break;case"beforeblur":case"afterblur":S=Gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=$_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=fC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=xC;break;case _0:case v0:case y0:S=gC;break;case w0:S=RC;break;case"scroll":S=hC;break;case"wheel":S=bC;break;case"copy":case"cut":case"paste":S=vC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=H_}var M=(e&4)!==0,U=!M&&t==="scroll",k=M?T!==null?T+"Capture":null:T;M=[];for(var A=p,O;A!==null;){O=A;var H=O.stateNode;if(O.tag===5&&H!==null&&(O=H,k!==null&&(H=Dl(A,k),H!=null&&M.push(Bl(A,H,O)))),U)break;A=A.return}0<M.length&&(T=new S(T,D,null,n,_),y.push({event:T,listeners:M}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",T&&n!==Uf&&(D=n.relatedTarget||n.fromElement)&&(ls(D)||D[Fi]))break e;if((S||T)&&(T=_.window===_?_:(T=_.ownerDocument)?T.defaultView||T.parentWindow:window,S?(D=n.relatedTarget||n.toElement,S=p,D=D?ls(D):null,D!==null&&(U=Rs(D),D!==U||D.tag!==5&&D.tag!==6)&&(D=null)):(S=null,D=p),S!==D)){if(M=$_,H="onMouseLeave",k="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(M=H_,H="onPointerLeave",k="onPointerEnter",A="pointer"),U=S==null?T:Co(S),O=D==null?T:Co(D),T=new M(H,A+"leave",S,n,_),T.target=U,T.relatedTarget=O,H=null,ls(_)===p&&(M=new M(k,A+"enter",D,n,_),M.target=O,M.relatedTarget=U,H=M),U=H,S&&D)t:{for(M=S,k=D,A=0,O=M;O;O=go(O))A++;for(O=0,H=k;H;H=go(H))O++;for(;0<A-O;)M=go(M),A--;for(;0<O-A;)k=go(k),O--;for(;A--;){if(M===k||k!==null&&M===k.alternate)break t;M=go(M),k=go(k)}M=null}else M=null;S!==null&&nv(y,T,S,M,!1),D!==null&&U!==null&&nv(y,U,D,M,!0)}}e:{if(T=p?Co(p):window,S=T.nodeName&&T.nodeName.toLowerCase(),S==="select"||S==="input"&&T.type==="file")var X=jC;else if(K_(T))if(d0)X=$C;else{X=UC;var q=zC}else(S=T.nodeName)&&S.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=BC);if(X&&(X=X(t,p))){h0(y,X,n,_);break e}q&&q(t,T,p),t==="focusout"&&(q=T._wrapperState)&&q.controlled&&T.type==="number"&&Mf(T,"number",T.value)}switch(q=p?Co(p):window,t){case"focusin":(K_(q)||q.contentEditable==="true")&&(Po=q,Kf=p,El=null);break;case"focusout":El=Kf=Po=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,J_(y,n,_);break;case"selectionchange":if(qC)break;case"keydown":case"keyup":J_(y,n,_)}var C;if(gm)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Io?u0(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(l0&&n.locale!=="ko"&&(Io||P!=="onCompositionStart"?P==="onCompositionEnd"&&Io&&(C=a0()):(mr=_,fm="value"in mr?mr.value:mr.textContent,Io=!0)),q=oh(p,P),0<q.length&&(P=new W_(P,t,null,n,_),y.push({event:P,listeners:q}),C?P.data=C:(C=c0(n),C!==null&&(P.data=C)))),(C=OC?DC(t,n):MC(t,n))&&(p=oh(p,"onBeforeInput"),0<p.length&&(_=new W_("onBeforeInput","beforeinput",null,n,_),y.push({event:_,listeners:p}),_.data=C))}T0(y,e)})}function Bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Dl(t,n),o!=null&&i.unshift(Bl(t,o,r)),o=Dl(t,e),o!=null&&i.push(Bl(t,o,r))),t=t.return}return i}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nv(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,r?(d=Dl(n,o),d!=null&&l.unshift(Bl(n,d,h))):r||(d=Dl(n,o),d!=null&&l.push(Bl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var QC=/\r\n?/g,YC=/\u0000|\uFFFD/g;function iv(t){return(typeof t=="string"?t:""+t).replace(QC,`
`).replace(YC,"")}function wc(t,e,n){if(e=iv(e),iv(t)!==e&&n)throw Error(Y(425))}function ah(){}var Qf=null,Yf=null;function Xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,XC=typeof clearTimeout=="function"?clearTimeout:void 0,rv=typeof Promise=="function"?Promise:void 0,JC=typeof queueMicrotask=="function"?queueMicrotask:typeof rv<"u"?function(t){return rv.resolve(null).then(t).catch(eA)}:Jf;function eA(t){setTimeout(function(){throw t})}function tf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Fl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Fl(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var aa=Math.random().toString(36).slice(2),oi="__reactFiber$"+aa,$l="__reactProps$"+aa,Fi="__reactContainer$"+aa,ep="__reactEvents$"+aa,tA="__reactListeners$"+aa,nA="__reactHandles$"+aa;function ls(t){var e=t[oi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fi]||n[oi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sv(t);t!==null;){if(n=t[oi])return n;t=sv(t)}return e}t=n,n=t.parentNode}return null}function du(t){return t=t[oi]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Gh(t){return t[$l]||null}var tp=[],Ao=-1;function Fr(t){return{current:t}}function $e(t){0>Ao||(t.current=tp[Ao],tp[Ao]=null,Ao--)}function je(t,e){Ao++,tp[Ao]=t.current,t.current=e}var br={},Ft=Fr(br),en=Fr(!1),_s=br;function Ho(t,e){var n=t.type.contextTypes;if(!n)return br;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function tn(t){return t=t.childContextTypes,t!=null}function lh(){$e(en),$e(Ft)}function ov(t,e,n){if(Ft.current!==br)throw Error(Y(168));je(Ft,e),je(en,n)}function P0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,zS(t)||"Unknown",r));return Ye({},n,i)}function uh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,_s=Ft.current,je(Ft,t),je(en,en.current),!0}function av(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=P0(t,e,_s),i.__reactInternalMemoizedMergedChildContext=t,$e(en),$e(Ft),je(Ft,t)):$e(en),je(en,n)}var xi=null,Kh=!1,nf=!1;function S0(t){xi===null?xi=[t]:xi.push(t)}function iA(t){Kh=!0,S0(t)}function jr(){if(!nf&&xi!==null){nf=!0;var t=0,e=Oe;try{var n=xi;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}xi=null,Kh=!1}catch(r){throw xi!==null&&(xi=xi.slice(t+1)),Qw(um,jr),r}finally{Oe=e,nf=!1}}return null}var xo=[],ko=0,ch=null,hh=0,Pn=[],Sn=0,vs=null,ki=1,Ri="";function ss(t,e){xo[ko++]=hh,xo[ko++]=ch,ch=t,hh=e}function C0(t,e,n){Pn[Sn++]=ki,Pn[Sn++]=Ri,Pn[Sn++]=vs,vs=t;var i=ki;t=Ri;var r=32-$n(i)-1;i&=~(1<<r),n+=1;var o=32-$n(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,ki=1<<32-$n(e)+r|n<<r|i,Ri=o+t}else ki=1<<o|n<<r|i,Ri=t}function vm(t){t.return!==null&&(ss(t,1),C0(t,1,0))}function ym(t){for(;t===ch;)ch=xo[--ko],xo[ko]=null,hh=xo[--ko],xo[ko]=null;for(;t===vs;)vs=Pn[--Sn],Pn[Sn]=null,Ri=Pn[--Sn],Pn[Sn]=null,ki=Pn[--Sn],Pn[Sn]=null}var hn=null,un=null,qe=!1,Un=null;function A0(t,e){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vs!==null?{id:ki,overflow:Ri}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function np(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ip(t){if(qe){var e=un;if(e){var n=e;if(!lv(t,e)){if(np(t))throw Error(Y(418));e=Tr(n.nextSibling);var i=hn;e&&lv(t,e)?A0(i,n):(t.flags=t.flags&-4097|2,qe=!1,hn=t)}}else{if(np(t))throw Error(Y(418));t.flags=t.flags&-4097|2,qe=!1,hn=t}}}function uv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Ec(t){if(t!==hn)return!1;if(!qe)return uv(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xf(t.type,t.memoizedProps)),e&&(e=un)){if(np(t))throw x0(),Error(Y(418));for(;e;)A0(t,e),e=Tr(e.nextSibling)}if(uv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?Tr(t.stateNode.nextSibling):null;return!0}function x0(){for(var t=un;t;)t=Tr(t.nextSibling)}function qo(){un=hn=null,qe=!1}function wm(t){Un===null?Un=[t]:Un.push(t)}var rA=Hi.ReactCurrentBatchConfig;function il(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=r.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Tc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cv(t){var e=t._init;return e(t._payload)}function k0(t){function e(k,A){if(t){var O=k.deletions;O===null?(k.deletions=[A],k.flags|=16):O.push(A)}}function n(k,A){if(!t)return null;for(;A!==null;)e(k,A),A=A.sibling;return null}function i(k,A){for(k=new Map;A!==null;)A.key!==null?k.set(A.key,A):k.set(A.index,A),A=A.sibling;return k}function r(k,A){return k=Cr(k,A),k.index=0,k.sibling=null,k}function o(k,A,O){return k.index=O,t?(O=k.alternate,O!==null?(O=O.index,O<A?(k.flags|=2,A):O):(k.flags|=2,A)):(k.flags|=1048576,A)}function l(k){return t&&k.alternate===null&&(k.flags|=2),k}function h(k,A,O,H){return A===null||A.tag!==6?(A=cf(O,k.mode,H),A.return=k,A):(A=r(A,O),A.return=k,A)}function d(k,A,O,H){var X=O.type;return X===To?_(k,A,O.props.children,H,O.key):A!==null&&(A.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ar&&cv(X)===A.type)?(H=r(A,O.props),H.ref=il(k,A,O),H.return=k,H):(H=$c(O.type,O.key,O.props,null,k.mode,H),H.ref=il(k,A,O),H.return=k,H)}function p(k,A,O,H){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=hf(O,k.mode,H),A.return=k,A):(A=r(A,O.children||[]),A.return=k,A)}function _(k,A,O,H,X){return A===null||A.tag!==7?(A=ms(O,k.mode,H,X),A.return=k,A):(A=r(A,O),A.return=k,A)}function y(k,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return A=cf(""+A,k.mode,O),A.return=k,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case hc:return O=$c(A.type,A.key,A.props,null,k.mode,O),O.ref=il(k,null,A),O.return=k,O;case Eo:return A=hf(A,k.mode,O),A.return=k,A;case ar:var H=A._init;return y(k,H(A._payload),O)}if(ll(A)||Xa(A))return A=ms(A,k.mode,O,null),A.return=k,A;Tc(k,A)}return null}function T(k,A,O,H){var X=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return X!==null?null:h(k,A,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case hc:return O.key===X?d(k,A,O,H):null;case Eo:return O.key===X?p(k,A,O,H):null;case ar:return X=O._init,T(k,A,X(O._payload),H)}if(ll(O)||Xa(O))return X!==null?null:_(k,A,O,H,null);Tc(k,O)}return null}function S(k,A,O,H,X){if(typeof H=="string"&&H!==""||typeof H=="number")return k=k.get(O)||null,h(A,k,""+H,X);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case hc:return k=k.get(H.key===null?O:H.key)||null,d(A,k,H,X);case Eo:return k=k.get(H.key===null?O:H.key)||null,p(A,k,H,X);case ar:var q=H._init;return S(k,A,O,q(H._payload),X)}if(ll(H)||Xa(H))return k=k.get(O)||null,_(A,k,H,X,null);Tc(A,H)}return null}function D(k,A,O,H){for(var X=null,q=null,C=A,P=A=0,x=null;C!==null&&P<O.length;P++){C.index>P?(x=C,C=null):x=C.sibling;var R=T(k,C,O[P],H);if(R===null){C===null&&(C=x);break}t&&C&&R.alternate===null&&e(k,C),A=o(R,A,P),q===null?X=R:q.sibling=R,q=R,C=x}if(P===O.length)return n(k,C),qe&&ss(k,P),X;if(C===null){for(;P<O.length;P++)C=y(k,O[P],H),C!==null&&(A=o(C,A,P),q===null?X=C:q.sibling=C,q=C);return qe&&ss(k,P),X}for(C=i(k,C);P<O.length;P++)x=S(C,k,P,O[P],H),x!==null&&(t&&x.alternate!==null&&C.delete(x.key===null?P:x.key),A=o(x,A,P),q===null?X=x:q.sibling=x,q=x);return t&&C.forEach(function(V){return e(k,V)}),qe&&ss(k,P),X}function M(k,A,O,H){var X=Xa(O);if(typeof X!="function")throw Error(Y(150));if(O=X.call(O),O==null)throw Error(Y(151));for(var q=X=null,C=A,P=A=0,x=null,R=O.next();C!==null&&!R.done;P++,R=O.next()){C.index>P?(x=C,C=null):x=C.sibling;var V=T(k,C,R.value,H);if(V===null){C===null&&(C=x);break}t&&C&&V.alternate===null&&e(k,C),A=o(V,A,P),q===null?X=V:q.sibling=V,q=V,C=x}if(R.done)return n(k,C),qe&&ss(k,P),X;if(C===null){for(;!R.done;P++,R=O.next())R=y(k,R.value,H),R!==null&&(A=o(R,A,P),q===null?X=R:q.sibling=R,q=R);return qe&&ss(k,P),X}for(C=i(k,C);!R.done;P++,R=O.next())R=S(C,k,P,R.value,H),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?P:R.key),A=o(R,A,P),q===null?X=R:q.sibling=R,q=R);return t&&C.forEach(function(F){return e(k,F)}),qe&&ss(k,P),X}function U(k,A,O,H){if(typeof O=="object"&&O!==null&&O.type===To&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case hc:e:{for(var X=O.key,q=A;q!==null;){if(q.key===X){if(X=O.type,X===To){if(q.tag===7){n(k,q.sibling),A=r(q,O.props.children),A.return=k,k=A;break e}}else if(q.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ar&&cv(X)===q.type){n(k,q.sibling),A=r(q,O.props),A.ref=il(k,q,O),A.return=k,k=A;break e}n(k,q);break}else e(k,q);q=q.sibling}O.type===To?(A=ms(O.props.children,k.mode,H,O.key),A.return=k,k=A):(H=$c(O.type,O.key,O.props,null,k.mode,H),H.ref=il(k,A,O),H.return=k,k=H)}return l(k);case Eo:e:{for(q=O.key;A!==null;){if(A.key===q)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){n(k,A.sibling),A=r(A,O.children||[]),A.return=k,k=A;break e}else{n(k,A);break}else e(k,A);A=A.sibling}A=hf(O,k.mode,H),A.return=k,k=A}return l(k);case ar:return q=O._init,U(k,A,q(O._payload),H)}if(ll(O))return D(k,A,O,H);if(Xa(O))return M(k,A,O,H);Tc(k,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,A!==null&&A.tag===6?(n(k,A.sibling),A=r(A,O),A.return=k,k=A):(n(k,A),A=cf(O,k.mode,H),A.return=k,k=A),l(k)):n(k,A)}return U}var Go=k0(!0),R0=k0(!1),dh=Fr(null),fh=null,Ro=null,Em=null;function Tm(){Em=Ro=fh=null}function Im(t){var e=dh.current;$e(dh),t._currentValue=e}function rp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Fo(t,e){fh=t,Em=Ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(Em!==t)if(t={context:t,memoizedValue:e,next:null},Ro===null){if(fh===null)throw Error(Y(308));Ro=t,fh.dependencies={lanes:0,firstContext:t}}else Ro=Ro.next=t;return e}var us=null;function Pm(t){us===null?us=[t]:us.push(t)}function L0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Pm(e)):(n.next=r.next,r.next=n),e.interleaved=n,ji(t,i)}function ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ji(t,n)}return r=i.interleaved,r===null?(e.next=e,Pm(i)):(e.next=r.next,r.next=e),i.interleaved=e,ji(t,n)}function Vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cm(t,n)}}function hv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ph(t,e,n,i){var r=t.updateQueue;lr=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,h=r.shared.pending;if(h!==null){r.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==l&&(h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;l=0,_=p=d=null,h=o;do{var T=h.lane,S=h.eventTime;if((i&T)===T){_!==null&&(_=_.next={eventTime:S,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var D=t,M=h;switch(T=e,S=n,M.tag){case 1:if(D=M.payload,typeof D=="function"){y=D.call(S,y,T);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=M.payload,T=typeof D=="function"?D.call(S,y,T):D,T==null)break e;y=Ye({},y,T);break e;case 2:lr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=r.effects,T===null?r.effects=[h]:T.push(h))}else S={eventTime:S,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(p=_=S,d=y):_=_.next=S,l|=T;if(h=h.next,h===null){if(h=r.shared.pending,h===null)break;T=h,h=T.next,T.next=null,r.lastBaseUpdate=T,r.shared.pending=null}}while(!0);if(_===null&&(d=y),r.baseState=d,r.firstBaseUpdate=p,r.lastBaseUpdate=_,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);ws|=l,t.lanes=l,t.memoizedState=y}}function dv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var fu={},ui=Fr(fu),Wl=Fr(fu),Hl=Fr(fu);function cs(t){if(t===fu)throw Error(Y(174));return t}function Cm(t,e){switch(je(Hl,e),je(Wl,t),je(ui,fu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ff(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ff(e,t)}$e(ui),je(ui,e)}function Ko(){$e(ui),$e(Wl),$e(Hl)}function N0(t){cs(Hl.current);var e=cs(ui.current),n=Ff(e,t.type);e!==n&&(je(Wl,t),je(ui,n))}function Am(t){Wl.current===t&&($e(ui),$e(Wl))}var Ze=Fr(0);function mh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rf=[];function xm(){for(var t=0;t<rf.length;t++)rf[t]._workInProgressVersionPrimary=null;rf.length=0}var Fc=Hi.ReactCurrentDispatcher,sf=Hi.ReactCurrentBatchConfig,ys=0,Qe=null,mt=null,Tt=null,gh=!1,Tl=!1,ql=0,sA=0;function bt(){throw Error(Y(321))}function km(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function Rm(t,e,n,i,r,o){if(ys=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fc.current=t===null||t.memoizedState===null?uA:cA,t=n(i,r),Tl){o=0;do{if(Tl=!1,ql=0,25<=o)throw Error(Y(301));o+=1,Tt=mt=null,e.updateQueue=null,Fc.current=hA,t=n(i,r)}while(Tl)}if(Fc.current=_h,e=mt!==null&&mt.next!==null,ys=0,Tt=mt=Qe=null,gh=!1,e)throw Error(Y(300));return t}function Lm(){var t=ql!==0;return ql=0,t}function ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Qe.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Ln(){if(mt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=Tt===null?Qe.memoizedState:Tt.next;if(e!==null)Tt=e,mt=t;else{if(t===null)throw Error(Y(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Tt===null?Qe.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Gl(t,e){return typeof e=="function"?e(t):e}function of(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=mt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var h=l=null,d=null,p=o;do{var _=p.lane;if((ys&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var y={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=y,l=i):d=d.next=y,Qe.lanes|=_,ws|=_}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Gn(i,e.memoizedState)||(Jt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Qe.lanes|=o,ws|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function af(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);Gn(o,e.memoizedState)||(Jt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function O0(){}function D0(t,e){var n=Qe,i=Ln(),r=e(),o=!Gn(i.memoizedState,r);if(o&&(i.memoizedState=r,Jt=!0),i=i.queue,bm(F0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Kl(9,V0.bind(null,n,i,r,e),void 0,null),It===null)throw Error(Y(349));ys&30||M0(n,e,r)}return r}function M0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V0(t,e,n,i){e.value=n,e.getSnapshot=i,j0(e)&&z0(t)}function F0(t,e,n){return n(function(){j0(e)&&z0(t)})}function j0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function z0(t){var e=ji(t,1);e!==null&&Wn(e,t,1,-1)}function fv(t){var e=ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:t},e.queue=t,t=t.dispatch=lA.bind(null,Qe,t),[e.memoizedState,t]}function Kl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function U0(){return Ln().memoizedState}function jc(t,e,n,i){var r=ri();Qe.flags|=t,r.memoizedState=Kl(1|e,n,void 0,i===void 0?null:i)}function Zh(t,e,n,i){var r=Ln();i=i===void 0?null:i;var o=void 0;if(mt!==null){var l=mt.memoizedState;if(o=l.destroy,i!==null&&km(i,l.deps)){r.memoizedState=Kl(e,n,o,i);return}}Qe.flags|=t,r.memoizedState=Kl(1|e,n,o,i)}function pv(t,e){return jc(8390656,8,t,e)}function bm(t,e){return Zh(2048,8,t,e)}function B0(t,e){return Zh(4,2,t,e)}function $0(t,e){return Zh(4,4,t,e)}function W0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function H0(t,e,n){return n=n!=null?n.concat([t]):null,Zh(4,4,W0.bind(null,e,t),n)}function Nm(){}function q0(t,e){var n=Ln();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&km(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function G0(t,e){var n=Ln();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&km(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function K0(t,e,n){return ys&21?(Gn(n,e)||(n=Jw(),Qe.lanes|=n,ws|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function oA(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=sf.transition;sf.transition={};try{t(!1),e()}finally{Oe=n,sf.transition=i}}function Z0(){return Ln().memoizedState}function aA(t,e,n){var i=Sr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Q0(t))Y0(e,n);else if(n=L0(t,e,n,i),n!==null){var r=Ht();Wn(n,t,i,r),X0(n,e,i)}}function lA(t,e,n){var i=Sr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q0(t))Y0(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(r.hasEagerState=!0,r.eagerState=h,Gn(h,l)){var d=e.interleaved;d===null?(r.next=r,Pm(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=L0(t,e,r,i),n!==null&&(r=Ht(),Wn(n,t,i,r),X0(n,e,i))}}function Q0(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function Y0(t,e){Tl=gh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function X0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cm(t,n)}}var _h={readContext:Rn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},uA={readContext:Rn,useCallback:function(t,e){return ri().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:pv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jc(4194308,4,W0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jc(4194308,4,t,e)},useInsertionEffect:function(t,e){return jc(4,2,t,e)},useMemo:function(t,e){var n=ri();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ri();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=aA.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=ri();return t={current:t},e.memoizedState=t},useState:fv,useDebugValue:Nm,useDeferredValue:function(t){return ri().memoizedState=t},useTransition:function(){var t=fv(!1),e=t[0];return t=oA.bind(null,t[1]),ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Qe,r=ri();if(qe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),It===null)throw Error(Y(349));ys&30||M0(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,pv(F0.bind(null,i,o,t),[t]),i.flags|=2048,Kl(9,V0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ri(),e=It.identifierPrefix;if(qe){var n=Ri,i=ki;n=(i&~(1<<32-$n(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ql++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cA={readContext:Rn,useCallback:q0,useContext:Rn,useEffect:bm,useImperativeHandle:H0,useInsertionEffect:B0,useLayoutEffect:$0,useMemo:G0,useReducer:of,useRef:U0,useState:function(){return of(Gl)},useDebugValue:Nm,useDeferredValue:function(t){var e=Ln();return K0(e,mt.memoizedState,t)},useTransition:function(){var t=of(Gl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:O0,useSyncExternalStore:D0,useId:Z0,unstable_isNewReconciler:!1},hA={readContext:Rn,useCallback:q0,useContext:Rn,useEffect:bm,useImperativeHandle:H0,useInsertionEffect:B0,useLayoutEffect:$0,useMemo:G0,useReducer:af,useRef:U0,useState:function(){return af(Gl)},useDebugValue:Nm,useDeferredValue:function(t){var e=Ln();return mt===null?e.memoizedState=t:K0(e,mt.memoizedState,t)},useTransition:function(){var t=af(Gl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:O0,useSyncExternalStore:D0,useId:Z0,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qh={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ht(),r=Sr(t),o=Oi(i,r);o.payload=e,n!=null&&(o.callback=n),e=Ir(t,o,r),e!==null&&(Wn(e,t,r,i),Vc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ht(),r=Sr(t),o=Oi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ir(t,o,r),e!==null&&(Wn(e,t,r,i),Vc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),i=Sr(t),r=Oi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ir(t,r,i),e!==null&&(Wn(e,t,i,n),Vc(e,t,i))}};function mv(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!zl(n,i)||!zl(r,o):!0}function J0(t,e,n){var i=!1,r=br,o=e.contextType;return typeof o=="object"&&o!==null?o=Rn(o):(r=tn(e)?_s:Ft.current,i=e.contextTypes,o=(i=i!=null)?Ho(t,r):br),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function gv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Qh.enqueueReplaceState(e,e.state,null)}function op(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Sm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Rn(o):(o=tn(e)?_s:Ft.current,r.context=Ho(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(sp(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Qh.enqueueReplaceState(r,r.state,null),ph(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",i=e;do n+=jS(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ap(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dA=typeof WeakMap=="function"?WeakMap:Map;function eE(t,e,n){n=Oi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){yh||(yh=!0,_p=i),ap(t,e)},n}function tE(t,e,n){n=Oi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ap(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ap(t,e),typeof i!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function _v(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new dA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=CA.bind(null,t,e,n),e.then(t,t))}function vv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Oi(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var fA=Hi.ReactCurrentOwner,Jt=!1;function $t(t,e,n,i){e.child=t===null?R0(e,null,n,i):Go(e,t.child,n,i)}function wv(t,e,n,i,r){n=n.render;var o=e.ref;return Fo(e,r),i=Rm(t,e,n,i,o,r),n=Lm(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zi(t,e,r)):(qe&&n&&vm(e),e.flags|=1,$t(t,e,i,r),e.child)}function Ev(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Um(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,nE(t,e,o,i,r)):(t=$c(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:zl,n(l,i)&&t.ref===e.ref)return zi(t,e,r)}return e.flags|=1,t=Cr(o,i),t.ref=e.ref,t.return=e,e.child=t}function nE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(zl(o,i)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,zi(t,e,r)}return lp(t,e,n,i,r)}function iE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(bo,ln),ln|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(bo,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,je(bo,ln),ln|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,je(bo,ln),ln|=i;return $t(t,e,r,n),e.child}function rE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lp(t,e,n,i,r){var o=tn(n)?_s:Ft.current;return o=Ho(e,o),Fo(e,r),n=Rm(t,e,n,i,o,r),i=Lm(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zi(t,e,r)):(qe&&i&&vm(e),e.flags|=1,$t(t,e,n,r),e.child)}function Tv(t,e,n,i,r){if(tn(n)){var o=!0;uh(e)}else o=!1;if(Fo(e,r),e.stateNode===null)zc(t,e),J0(e,n,i),op(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=Rn(p):(p=tn(n)?_s:Ft.current,p=Ho(e,p));var _=n.getDerivedStateFromProps,y=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&gv(e,l,i,p),lr=!1;var T=e.memoizedState;l.state=T,ph(e,i,l,r),d=e.memoizedState,h!==i||T!==d||en.current||lr?(typeof _=="function"&&(sp(e,n,_,i),d=e.memoizedState),(h=lr||mv(e,n,h,i,T,d,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,b0(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:jn(e.type,h),l.props=p,y=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Rn(d):(d=tn(n)?_s:Ft.current,d=Ho(e,d));var S=n.getDerivedStateFromProps;(_=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||T!==d)&&gv(e,l,i,d),lr=!1,T=e.memoizedState,l.state=T,ph(e,i,l,r);var D=e.memoizedState;h!==y||T!==D||en.current||lr?(typeof S=="function"&&(sp(e,n,S,i),D=e.memoizedState),(p=lr||mv(e,n,p,i,T,D,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,D,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,D,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),l.props=i,l.state=D,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return up(t,e,n,i,o,r)}function up(t,e,n,i,r,o){rE(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&av(e,n,!1),zi(t,e,o);i=e.stateNode,fA.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Go(e,t.child,null,o),e.child=Go(e,null,h,o)):$t(t,e,h,o),e.memoizedState=i.state,r&&av(e,n,!0),e.child}function sE(t){var e=t.stateNode;e.pendingContext?ov(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ov(t,e.context,!1),Cm(t,e.containerInfo)}function Iv(t,e,n,i,r){return qo(),wm(r),e.flags|=256,$t(t,e,n,i),e.child}var cp={dehydrated:null,treeContext:null,retryLane:0};function hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function oE(t,e,n){var i=e.pendingProps,r=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(r&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),je(Ze,r&1),t===null)return ip(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Jh(l,i,0,null),t=ms(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hp(n),e.memoizedState=cp,t):Om(e,l));if(r=t.memoizedState,r!==null&&(h=r.dehydrated,h!==null))return pA(t,e,l,i,h,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,h=r.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Cr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),h!==null?o=Cr(h,o):(o=ms(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?hp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=cp,i}return o=t.child,t=o.sibling,i=Cr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Om(t,e){return e=Jh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ic(t,e,n,i){return i!==null&&wm(i),Go(e,t.child,null,n),t=Om(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pA(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=lf(Error(Y(422))),Ic(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Jh({mode:"visible",children:i.children},r,0,null),o=ms(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Go(e,t.child,null,l),e.child.memoizedState=hp(l),e.memoizedState=cp,o);if(!(e.mode&1))return Ic(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Y(419)),i=lf(o,i,void 0),Ic(t,e,l,i)}if(h=(l&t.childLanes)!==0,Jt||h){if(i=It,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,ji(t,r),Wn(i,t,r,-1))}return zm(),i=lf(Error(Y(421))),Ic(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=AA.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,un=Tr(r.nextSibling),hn=e,qe=!0,Un=null,t!==null&&(Pn[Sn++]=ki,Pn[Sn++]=Ri,Pn[Sn++]=vs,ki=t.id,Ri=t.overflow,vs=e),e=Om(e,i.children),e.flags|=4096,e)}function Pv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),rp(t.return,e,n)}function uf(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function aE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if($t(t,e,i.children,n),i=Ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pv(t,n,e);else if(t.tag===19)Pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(je(Ze,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&mh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),uf(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&mh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}uf(e,!0,n,null,o);break;case"together":uf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ws|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mA(t,e,n){switch(e.tag){case 3:sE(e),qo();break;case 5:N0(e);break;case 1:tn(e.type)&&uh(e);break;case 4:Cm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;je(dh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?oE(t,e,n):(je(Ze,Ze.current&1),t=zi(t,e,n),t!==null?t.sibling:null);je(Ze,Ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return aE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(Ze,Ze.current),i)break;return null;case 22:case 23:return e.lanes=0,iE(t,e,n)}return zi(t,e,n)}var lE,dp,uE,cE;lE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dp=function(){};uE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,cs(ui.current);var o=null;switch(n){case"input":r=Of(t,r),i=Of(t,i),o=[];break;case"select":r=Ye({},r,{value:void 0}),i=Ye({},i,{value:void 0}),o=[];break;case"textarea":r=Vf(t,r),i=Vf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ah)}jf(n,i);var l;n=null;for(p in r)if(!i.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var h=r[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Nl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=r!=null?r[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Nl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Ue("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};cE=function(t,e,n,i){n!==i&&(e.flags|=4)};function rl(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function gA(t,e,n){var i=e.pendingProps;switch(ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return tn(e.type)&&lh(),Nt(e),null;case 3:return i=e.stateNode,Ko(),$e(en),$e(Ft),xm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(wp(Un),Un=null))),dp(t,e),Nt(e),null;case 5:Am(e);var r=cs(Hl.current);if(n=e.type,t!==null&&e.stateNode!=null)uE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Nt(e),null}if(t=cs(ui.current),Ec(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[oi]=e,i[$l]=o,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(r=0;r<cl.length;r++)Ue(cl[r],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":N_(i,o),Ue("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ue("invalid",i);break;case"textarea":D_(i,o),Ue("invalid",i)}jf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&wc(i.textContent,h,t),r=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&wc(i.textContent,h,t),r=["children",""+h]):Nl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&Ue("scroll",i)}switch(n){case"input":dc(i),O_(i,o,!0);break;case"textarea":dc(i),M_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=ah)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[oi]=e,t[$l]=i,lE(t,e,!1,!1),e.stateNode=t;e:{switch(l=zf(n,i),n){case"dialog":Ue("cancel",t),Ue("close",t),r=i;break;case"iframe":case"object":case"embed":Ue("load",t),r=i;break;case"video":case"audio":for(r=0;r<cl.length;r++)Ue(cl[r],t);r=i;break;case"source":Ue("error",t),r=i;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),r=i;break;case"details":Ue("toggle",t),r=i;break;case"input":N_(t,i),r=Of(t,i),Ue("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ye({},i,{value:void 0}),Ue("invalid",t);break;case"textarea":D_(t,i),r=Vf(t,i),Ue("invalid",t);break;default:r=i}jf(n,r),h=r;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Uw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&jw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ol(t,d):typeof d=="number"&&Ol(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Nl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Ue("scroll",t):d!=null&&rm(t,o,d,l))}switch(n){case"input":dc(t),O_(t,i,!1);break;case"textarea":dc(t),M_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Lr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Oo(t,!!i.multiple,o,!1):i.defaultValue!=null&&Oo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ah)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)cE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=cs(Hl.current),cs(ui.current),Ec(e)){if(i=e.stateNode,n=e.memoizedProps,i[oi]=e,(o=i.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:wc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[oi]=e,e.stateNode=i}return Nt(e),null;case 13:if($e(Ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&un!==null&&e.mode&1&&!(e.flags&128))x0(),qo(),e.flags|=98560,o=!1;else if(o=Ec(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[oi]=e}else qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),o=!1}else Un!==null&&(wp(Un),Un=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?gt===0&&(gt=3):zm())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Ko(),dp(t,e),t===null&&Ul(e.stateNode.containerInfo),Nt(e),null;case 10:return Im(e.type._context),Nt(e),null;case 17:return tn(e.type)&&lh(),Nt(e),null;case 19:if($e(Ze),o=e.memoizedState,o===null)return Nt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)rl(o,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=mh(t),l!==null){for(e.flags|=128,rl(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&rt()>Qo&&(e.flags|=128,i=!0,rl(o,!1),e.lanes=4194304)}else{if(!i)if(t=mh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),rl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!qe)return Nt(e),null}else 2*rt()-o.renderingStartTime>Qo&&n!==1073741824&&(e.flags|=128,i=!0,rl(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=rt(),e.sibling=null,n=Ze.current,je(Ze,i?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return jm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ln&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function _A(t,e){switch(ym(e),e.tag){case 1:return tn(e.type)&&lh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ko(),$e(en),$e(Ft),xm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Am(e),null;case 13:if($e(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ze),null;case 4:return Ko(),null;case 10:return Im(e.type._context),null;case 22:case 23:return jm(),null;case 24:return null;default:return null}}var Pc=!1,Mt=!1,vA=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function fp(t,e,n){try{n()}catch(i){et(t,e,i)}}var Sv=!1;function yA(t,e){if(Qf=rh,t=m0(),_m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,_=0,y=t,T=null;t:for(;;){for(var S;y!==n||r!==0&&y.nodeType!==3||(h=l+r),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(S=y.firstChild)!==null;)T=y,y=S;for(;;){if(y===t)break t;if(T===n&&++p===r&&(h=l),T===o&&++_===i&&(d=l),(S=y.nextSibling)!==null)break;y=T,T=y.parentNode}y=S}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yf={focusedElem:t,selectionRange:n},rh=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var M=D.memoizedProps,U=D.memoizedState,k=e.stateNode,A=k.getSnapshotBeforeUpdate(e.elementType===e.type?M:jn(e.type,M),U);k.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(H){et(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return D=Sv,Sv=!1,D}function Il(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&fp(e,n,o)}r=r.next}while(r!==i)}}function Yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function pp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hE(t){var e=t.alternate;e!==null&&(t.alternate=null,hE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[oi],delete e[$l],delete e[ep],delete e[tA],delete e[nA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dE(t){return t.tag===5||t.tag===3||t.tag===4}function Cv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ah));else if(i!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}function gp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(gp(t,e,n),t=t.sibling;t!==null;)gp(t,e,n),t=t.sibling}var St=null,zn=!1;function rr(t,e,n){for(n=n.child;n!==null;)fE(t,e,n),n=n.sibling}function fE(t,e,n){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount($h,n)}catch{}switch(n.tag){case 5:Mt||Lo(n,e);case 6:var i=St,r=zn;St=null,rr(t,e,n),St=i,zn=r,St!==null&&(zn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(zn?(t=St,n=n.stateNode,t.nodeType===8?tf(t.parentNode,n):t.nodeType===1&&tf(t,n),Fl(t)):tf(St,n.stateNode));break;case 4:i=St,r=zn,St=n.stateNode.containerInfo,zn=!0,rr(t,e,n),St=i,zn=r;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&fp(n,e,l),r=r.next}while(r!==i)}rr(t,e,n);break;case 1:if(!Mt&&(Lo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(Mt=(i=Mt)||n.memoizedState!==null,rr(t,e,n),Mt=i):rr(t,e,n);break;default:rr(t,e,n)}}function Av(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vA),e.forEach(function(i){var r=xA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Fn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:St=h.stateNode,zn=!1;break e;case 3:St=h.stateNode.containerInfo,zn=!0;break e;case 4:St=h.stateNode.containerInfo,zn=!0;break e}h=h.return}if(St===null)throw Error(Y(160));fE(o,l,r),St=null,zn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(p){et(r,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pE(e,t),e=e.sibling}function pE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(e,t),ni(t),i&4){try{Il(3,t,t.return),Yh(3,t)}catch(M){et(t,t.return,M)}try{Il(5,t,t.return)}catch(M){et(t,t.return,M)}}break;case 1:Fn(e,t),ni(t),i&512&&n!==null&&Lo(n,n.return);break;case 5:if(Fn(e,t),ni(t),i&512&&n!==null&&Lo(n,n.return),t.flags&32){var r=t.stateNode;try{Ol(r,"")}catch(M){et(t,t.return,M)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Mw(r,o),zf(h,l);var p=zf(h,o);for(l=0;l<d.length;l+=2){var _=d[l],y=d[l+1];_==="style"?Uw(r,y):_==="dangerouslySetInnerHTML"?jw(r,y):_==="children"?Ol(r,y):rm(r,_,y,p)}switch(h){case"input":Df(r,o);break;case"textarea":Vw(r,o);break;case"select":var T=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Oo(r,!!o.multiple,S,!1):T!==!!o.multiple&&(o.defaultValue!=null?Oo(r,!!o.multiple,o.defaultValue,!0):Oo(r,!!o.multiple,o.multiple?[]:"",!1))}r[$l]=o}catch(M){et(t,t.return,M)}}break;case 6:if(Fn(e,t),ni(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(M){et(t,t.return,M)}}break;case 3:if(Fn(e,t),ni(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Fl(e.containerInfo)}catch(M){et(t,t.return,M)}break;case 4:Fn(e,t),ni(t);break;case 13:Fn(e,t),ni(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Vm=rt())),i&4&&Av(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(p=Mt)||_,Fn(e,t),Mt=p):Fn(e,t),ni(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(ne=t,_=t.child;_!==null;){for(y=ne=_;ne!==null;){switch(T=ne,S=T.child,T.tag){case 0:case 11:case 14:case 15:Il(4,T,T.return);break;case 1:Lo(T,T.return);var D=T.stateNode;if(typeof D.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(M){et(i,n,M)}}break;case 5:Lo(T,T.return);break;case 22:if(T.memoizedState!==null){kv(y);continue}}S!==null?(S.return=T,ne=S):kv(y)}_=_.sibling}e:for(_=null,y=t;;){if(y.tag===5){if(_===null){_=y;try{r=y.stateNode,p?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=zw("display",l))}catch(M){et(t,t.return,M)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(M){et(t,t.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Fn(e,t),ni(t),i&4&&Av(t);break;case 21:break;default:Fn(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ol(r,""),i.flags&=-33);var o=Cv(t);gp(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,h=Cv(t);mp(t,h,l);break;default:throw Error(Y(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wA(t,e,n){ne=t,mE(t)}function mE(t,e,n){for(var i=(t.mode&1)!==0;ne!==null;){var r=ne,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||Pc;if(!l){var h=r.alternate,d=h!==null&&h.memoizedState!==null||Mt;h=Pc;var p=Mt;if(Pc=l,(Mt=d)&&!p)for(ne=r;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?Rv(r):d!==null?(d.return=l,ne=d):Rv(r);for(;o!==null;)ne=o,mE(o),o=o.sibling;ne=r,Pc=h,Mt=p}xv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ne=o):xv(t)}}function xv(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||Yh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&dv(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dv(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&Fl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Mt||e.flags&512&&pp(e)}catch(T){et(e,e.return,T)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function kv(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Rv(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){et(e,r,d)}}var o=e.return;try{pp(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{pp(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){ne=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ne=h;break}ne=e.return}}var EA=Math.ceil,vh=Hi.ReactCurrentDispatcher,Dm=Hi.ReactCurrentOwner,An=Hi.ReactCurrentBatchConfig,Re=0,It=null,ct=null,xt=0,ln=0,bo=Fr(0),gt=0,Zl=null,ws=0,Xh=0,Mm=0,Pl=null,Yt=null,Vm=0,Qo=1/0,Ai=null,yh=!1,_p=null,Pr=null,Sc=!1,gr=null,wh=0,Sl=0,vp=null,Uc=-1,Bc=0;function Ht(){return Re&6?rt():Uc!==-1?Uc:Uc=rt()}function Sr(t){return t.mode&1?Re&2&&xt!==0?xt&-xt:rA.transition!==null?(Bc===0&&(Bc=Jw()),Bc):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:o0(t.type)),t):1}function Wn(t,e,n,i){if(50<Sl)throw Sl=0,vp=null,Error(Y(185));cu(t,n,i),(!(Re&2)||t!==It)&&(t===It&&(!(Re&2)&&(Xh|=n),gt===4&&cr(t,xt)),nn(t,i),n===1&&Re===0&&!(e.mode&1)&&(Qo=rt()+500,Kh&&jr()))}function nn(t,e){var n=t.callbackNode;rC(t,e);var i=ih(t,t===It?xt:0);if(i===0)n!==null&&j_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&j_(n),e===1)t.tag===0?iA(Lv.bind(null,t)):S0(Lv.bind(null,t)),JC(function(){!(Re&6)&&jr()}),n=null;else{switch(e0(i)){case 1:n=um;break;case 4:n=Yw;break;case 16:n=nh;break;case 536870912:n=Xw;break;default:n=nh}n=IE(n,gE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gE(t,e){if(Uc=-1,Bc=0,Re&6)throw Error(Y(327));var n=t.callbackNode;if(jo()&&t.callbackNode!==n)return null;var i=ih(t,t===It?xt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Eh(t,i);else{e=i;var r=Re;Re|=2;var o=vE();(It!==t||xt!==e)&&(Ai=null,Qo=rt()+500,ps(t,e));do try{PA();break}catch(h){_E(t,h)}while(!0);Tm(),vh.current=o,Re=r,ct!==null?e=0:(It=null,xt=0,e=gt)}if(e!==0){if(e===2&&(r=Hf(t),r!==0&&(i=r,e=yp(t,r))),e===1)throw n=Zl,ps(t,0),cr(t,i),nn(t,rt()),n;if(e===6)cr(t,i);else{if(r=t.current.alternate,!(i&30)&&!TA(r)&&(e=Eh(t,i),e===2&&(o=Hf(t),o!==0&&(i=o,e=yp(t,o))),e===1))throw n=Zl,ps(t,0),cr(t,i),nn(t,rt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:os(t,Yt,Ai);break;case 3:if(cr(t,i),(i&130023424)===i&&(e=Vm+500-rt(),10<e)){if(ih(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ht(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Jf(os.bind(null,t,Yt,Ai),e);break}os(t,Yt,Ai);break;case 4:if(cr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-$n(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=rt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*EA(i/1960))-i,10<i){t.timeoutHandle=Jf(os.bind(null,t,Yt,Ai),i);break}os(t,Yt,Ai);break;case 5:os(t,Yt,Ai);break;default:throw Error(Y(329))}}}return nn(t,rt()),t.callbackNode===n?gE.bind(null,t):null}function yp(t,e){var n=Pl;return t.current.memoizedState.isDehydrated&&(ps(t,e).flags|=256),t=Eh(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&wp(e)),t}function wp(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function TA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Gn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~Mm,e&=~Xh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$n(e),i=1<<n;t[n]=-1,e&=~i}}function Lv(t){if(Re&6)throw Error(Y(327));jo();var e=ih(t,0);if(!(e&1))return nn(t,rt()),null;var n=Eh(t,e);if(t.tag!==0&&n===2){var i=Hf(t);i!==0&&(e=i,n=yp(t,i))}if(n===1)throw n=Zl,ps(t,0),cr(t,e),nn(t,rt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,Yt,Ai),nn(t,rt()),null}function Fm(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Qo=rt()+500,Kh&&jr())}}function Es(t){gr!==null&&gr.tag===0&&!(Re&6)&&jo();var e=Re;Re|=1;var n=An.transition,i=Oe;try{if(An.transition=null,Oe=1,t)return t()}finally{Oe=i,An.transition=n,Re=e,!(Re&6)&&jr()}}function jm(){ln=bo.current,$e(bo)}function ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XC(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(ym(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&lh();break;case 3:Ko(),$e(en),$e(Ft),xm();break;case 5:Am(i);break;case 4:Ko();break;case 13:$e(Ze);break;case 19:$e(Ze);break;case 10:Im(i.type._context);break;case 22:case 23:jm()}n=n.return}if(It=t,ct=t=Cr(t.current,null),xt=ln=e,gt=0,Zl=null,Mm=Xh=ws=0,Yt=Pl=null,us!==null){for(e=0;e<us.length;e++)if(n=us[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}us=null}return t}function _E(t,e){do{var n=ct;try{if(Tm(),Fc.current=_h,gh){for(var i=Qe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}gh=!1}if(ys=0,Tt=mt=Qe=null,Tl=!1,ql=0,Dm.current=null,n===null||n.return===null){gt=1,Zl=e,ct=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=xt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=h,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var T=_.alternate;T?(_.updateQueue=T.updateQueue,_.memoizedState=T.memoizedState,_.lanes=T.lanes):(_.updateQueue=null,_.memoizedState=null)}var S=vv(l);if(S!==null){S.flags&=-257,yv(S,l,h,o,e),S.mode&1&&_v(o,p,e),e=S,d=p;var D=e.updateQueue;if(D===null){var M=new Set;M.add(d),e.updateQueue=M}else D.add(d);break e}else{if(!(e&1)){_v(o,p,e),zm();break e}d=Error(Y(426))}}else if(qe&&h.mode&1){var U=vv(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),yv(U,l,h,o,e),wm(Zo(d,h));break e}}o=d=Zo(d,h),gt!==4&&(gt=2),Pl===null?Pl=[o]:Pl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=eE(o,d,e);hv(o,k);break e;case 1:h=d;var A=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof A.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Pr===null||!Pr.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=tE(o,h,e);hv(o,H);break e}}o=o.return}while(o!==null)}wE(n)}catch(X){e=X,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function vE(){var t=vh.current;return vh.current=_h,t===null?_h:t}function zm(){(gt===0||gt===3||gt===2)&&(gt=4),It===null||!(ws&268435455)&&!(Xh&268435455)||cr(It,xt)}function Eh(t,e){var n=Re;Re|=2;var i=vE();(It!==t||xt!==e)&&(Ai=null,ps(t,e));do try{IA();break}catch(r){_E(t,r)}while(!0);if(Tm(),Re=n,vh.current=i,ct!==null)throw Error(Y(261));return It=null,xt=0,gt}function IA(){for(;ct!==null;)yE(ct)}function PA(){for(;ct!==null&&!ZS();)yE(ct)}function yE(t){var e=TE(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?wE(t):ct=e,Dm.current=null}function wE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_A(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ct=null;return}}else if(n=gA(n,e,ln),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);gt===0&&(gt=5)}function os(t,e,n){var i=Oe,r=An.transition;try{An.transition=null,Oe=1,SA(t,e,n,i)}finally{An.transition=r,Oe=i}return null}function SA(t,e,n,i){do jo();while(gr!==null);if(Re&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sC(t,o),t===It&&(ct=It=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sc||(Sc=!0,IE(nh,function(){return jo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=An.transition,An.transition=null;var l=Oe;Oe=1;var h=Re;Re|=4,Dm.current=null,yA(t,n),pE(n,t),HC(Yf),rh=!!Qf,Yf=Qf=null,t.current=n,wA(n),QS(),Re=h,Oe=l,An.transition=o}else t.current=n;if(Sc&&(Sc=!1,gr=t,wh=r),o=t.pendingLanes,o===0&&(Pr=null),JS(n.stateNode),nn(t,rt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(yh)throw yh=!1,t=_p,_p=null,t;return wh&1&&t.tag!==0&&jo(),o=t.pendingLanes,o&1?t===vp?Sl++:(Sl=0,vp=t):Sl=0,jr(),null}function jo(){if(gr!==null){var t=e0(wh),e=An.transition,n=Oe;try{if(An.transition=null,Oe=16>t?16:t,gr===null)var i=!1;else{if(t=gr,gr=null,wh=0,Re&6)throw Error(Y(331));var r=Re;for(Re|=4,ne=t.current;ne!==null;){var o=ne,l=o.child;if(ne.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(ne=p;ne!==null;){var _=ne;switch(_.tag){case 0:case 11:case 15:Il(8,_,o)}var y=_.child;if(y!==null)y.return=_,ne=y;else for(;ne!==null;){_=ne;var T=_.sibling,S=_.return;if(hE(_),_===p){ne=null;break}if(T!==null){T.return=S,ne=T;break}ne=S}}}var D=o.alternate;if(D!==null){var M=D.child;if(M!==null){D.child=null;do{var U=M.sibling;M.sibling=null,M=U}while(M!==null)}}ne=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ne=l;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Il(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,ne=k;break e}ne=o.return}}var A=t.current;for(ne=A;ne!==null;){l=ne;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,ne=O;else e:for(l=A;ne!==null;){if(h=ne,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Yh(9,h)}}catch(X){et(h,h.return,X)}if(h===l){ne=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ne=H;break e}ne=h.return}}if(Re=r,jr(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot($h,t)}catch{}i=!0}return i}finally{Oe=n,An.transition=e}}return!1}function bv(t,e,n){e=Zo(n,e),e=eE(t,e,1),t=Ir(t,e,1),e=Ht(),t!==null&&(cu(t,1,e),nn(t,e))}function et(t,e,n){if(t.tag===3)bv(t,t,n);else for(;e!==null;){if(e.tag===3){bv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pr===null||!Pr.has(i))){t=Zo(n,t),t=tE(e,t,1),e=Ir(e,t,1),t=Ht(),e!==null&&(cu(e,1,t),nn(e,t));break}}e=e.return}}function CA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(xt&n)===n&&(gt===4||gt===3&&(xt&130023424)===xt&&500>rt()-Vm?ps(t,0):Mm|=n),nn(t,e)}function EE(t,e){e===0&&(t.mode&1?(e=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):e=1);var n=Ht();t=ji(t,e),t!==null&&(cu(t,e,n),nn(t,n))}function AA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EE(t,n)}function xA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),EE(t,n)}var TE;TE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,mA(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,qe&&e.flags&1048576&&C0(e,hh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;zc(t,e),t=e.pendingProps;var r=Ho(e,Ft.current);Fo(e,n),r=Rm(null,e,i,t,r,n);var o=Lm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(i)?(o=!0,uh(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Sm(e),r.updater=Qh,e.stateNode=r,r._reactInternals=e,op(e,i,t,n),e=up(null,e,i,!0,o,n)):(e.tag=0,qe&&o&&vm(e),$t(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(zc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=RA(i),t=jn(i,t),r){case 0:e=lp(null,e,i,t,n);break e;case 1:e=Tv(null,e,i,t,n);break e;case 11:e=wv(null,e,i,t,n);break e;case 14:e=Ev(null,e,i,jn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jn(i,r),lp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jn(i,r),Tv(t,e,i,r,n);case 3:e:{if(sE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,b0(t,e),ph(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Zo(Error(Y(423)),e),e=Iv(t,e,i,n,r);break e}else if(i!==r){r=Zo(Error(Y(424)),e),e=Iv(t,e,i,n,r);break e}else for(un=Tr(e.stateNode.containerInfo.firstChild),hn=e,qe=!0,Un=null,n=R0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qo(),i===r){e=zi(t,e,n);break e}$t(t,e,i,n)}e=e.child}return e;case 5:return N0(e),t===null&&ip(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,Xf(i,r)?l=null:o!==null&&Xf(i,o)&&(e.flags|=32),rE(t,e),$t(t,e,l,n),e.child;case 6:return t===null&&ip(e),null;case 13:return oE(t,e,n);case 4:return Cm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Go(e,null,i,n):$t(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jn(i,r),wv(t,e,i,r,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,je(dh,i._currentValue),i._currentValue=l,o!==null)if(Gn(o.value,l)){if(o.children===r.children&&!en.current){e=zi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Oi(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),rp(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),rp(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}$t(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Fo(e,n),r=Rn(r),i=i(r),e.flags|=1,$t(t,e,i,n),e.child;case 14:return i=e.type,r=jn(i,e.pendingProps),r=jn(i.type,r),Ev(t,e,i,r,n);case 15:return nE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jn(i,r),zc(t,e),e.tag=1,tn(i)?(t=!0,uh(e)):t=!1,Fo(e,n),J0(e,i,r),op(e,i,r,n),up(null,e,i,!0,t,n);case 19:return aE(t,e,n);case 22:return iE(t,e,n)}throw Error(Y(156,e.tag))};function IE(t,e){return Qw(t,e)}function kA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,n,i){return new kA(t,e,n,i)}function Um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RA(t){if(typeof t=="function")return Um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===om)return 11;if(t===am)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=Cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $c(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")Um(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case To:return ms(n.children,r,o,e);case sm:l=8,r|=8;break;case Rf:return t=Cn(12,n,e,r|2),t.elementType=Rf,t.lanes=o,t;case Lf:return t=Cn(13,n,e,r),t.elementType=Lf,t.lanes=o,t;case bf:return t=Cn(19,n,e,r),t.elementType=bf,t.lanes=o,t;case Nw:return Jh(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lw:l=10;break e;case bw:l=9;break e;case om:l=11;break e;case am:l=14;break e;case ar:l=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Cn(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function ms(t,e,n,i){return t=Cn(7,t,i,e),t.lanes=n,t}function Jh(t,e,n,i){return t=Cn(22,t,i,e),t.elementType=Nw,t.lanes=n,t.stateNode={isHidden:!1},t}function cf(t,e,n){return t=Cn(6,t,null,e),t.lanes=n,t}function hf(t,e,n){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wd(0),this.expirationTimes=Wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bm(t,e,n,i,r,o,l,h,d){return t=new LA(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Cn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sm(o),t}function bA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function PE(t){if(!t)return br;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(tn(n))return P0(t,n,e)}return e}function SE(t,e,n,i,r,o,l,h,d){return t=Bm(n,i,!0,t,r,o,l,h,d),t.context=PE(null),n=t.current,i=Ht(),r=Sr(n),o=Oi(i,r),o.callback=e??null,Ir(n,o,r),t.current.lanes=r,cu(t,r,i),nn(t,i),t}function ed(t,e,n,i){var r=e.current,o=Ht(),l=Sr(r);return n=PE(n),e.context===null?e.context=n:e.pendingContext=n,e=Oi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ir(r,e,l),t!==null&&(Wn(t,r,l,o),Vc(t,r,l)),l}function Th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $m(t,e){Nv(t,e),(t=t.alternate)&&Nv(t,e)}function NA(){return null}var CE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wm(t){this._internalRoot=t}td.prototype.render=Wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));ed(t,e,null,null)};td.prototype.unmount=Wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Es(function(){ed(null,t,null,null)}),e[Fi]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var e=i0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&s0(t)}};function Hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ov(){}function OA(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var p=Th(l);o.call(p)}}var l=SE(e,i,t,0,null,!1,!1,"",Ov);return t._reactRootContainer=l,t[Fi]=l.current,Ul(t.nodeType===8?t.parentNode:t),Es(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var h=i;i=function(){var p=Th(d);h.call(p)}}var d=Bm(t,0,!1,null,null,!1,!1,"",Ov);return t._reactRootContainer=d,t[Fi]=d.current,Ul(t.nodeType===8?t.parentNode:t),Es(function(){ed(e,d,n,i)}),d}function id(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var h=r;r=function(){var d=Th(l);h.call(d)}}ed(e,l,t,r)}else l=OA(n,e,t,r,i);return Th(l)}t0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ul(e.pendingLanes);n!==0&&(cm(e,n|1),nn(e,rt()),!(Re&6)&&(Qo=rt()+500,jr()))}break;case 13:Es(function(){var i=ji(t,1);if(i!==null){var r=Ht();Wn(i,t,1,r)}}),$m(t,1)}};hm=function(t){if(t.tag===13){var e=ji(t,134217728);if(e!==null){var n=Ht();Wn(e,t,134217728,n)}$m(t,134217728)}};n0=function(t){if(t.tag===13){var e=Sr(t),n=ji(t,e);if(n!==null){var i=Ht();Wn(n,t,e,i)}$m(t,e)}};i0=function(){return Oe};r0=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Bf=function(t,e,n){switch(e){case"input":if(Df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Gh(i);if(!r)throw Error(Y(90));Dw(i),Df(i,r)}}}break;case"textarea":Vw(t,n);break;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}};Ww=Fm;Hw=Es;var DA={usingClientEntryPoint:!1,Events:[du,Co,Gh,Bw,$w,Fm]},sl={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MA={bundleType:sl.bundleType,version:sl.version,rendererPackageName:sl.rendererPackageName,rendererConfig:sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kw(t),t===null?null:t.stateNode},findFiberByHostInstance:sl.findFiberByHostInstance||NA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{$h=Cc.inject(MA),li=Cc}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DA;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hm(e))throw Error(Y(200));return bA(t,e,null,n)};pn.createRoot=function(t,e){if(!Hm(t))throw Error(Y(299));var n=!1,i="",r=CE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Bm(t,1,!1,null,null,n,!1,i,r),t[Fi]=e.current,Ul(t.nodeType===8?t.parentNode:t),new Wm(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Kw(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return Es(t)};pn.hydrate=function(t,e,n){if(!nd(e))throw Error(Y(200));return id(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Hm(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=CE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=SE(e,null,t,1,n??null,r,!1,o,l),t[Fi]=e.current,Ul(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new td(e)};pn.render=function(t,e,n){if(!nd(e))throw Error(Y(200));return id(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!nd(t))throw Error(Y(40));return t._reactRootContainer?(Es(function(){id(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};pn.unstable_batchedUpdates=Fm;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!nd(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return id(t,e,n,!1,i)};pn.version="18.3.1-next-f1338f8080-20240426";function AE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AE)}catch(t){console.error(t)}}AE(),Aw.exports=pn;var xE=Aw.exports,kE,Dv=xE;kE=Dv.createRoot,Dv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ql.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const Mv="popstate";function VA(t){t===void 0&&(t={});function e(r,o){let{pathname:l="/",search:h="",hash:d=""}=Ls(r.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ep("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let l=r.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let d=r.location.href,p=d.indexOf("#");h=p===-1?d:d.slice(0,p)}return h+"#"+(typeof o=="string"?o:Ih(o))}function i(r,o){qm(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return jA(e,n,i,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FA(){return Math.random().toString(36).substr(2,8)}function Vv(t,e){return{usr:t.state,key:t.key,idx:e}}function Ep(t,e,n,i){return n===void 0&&(n=null),Ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ls(e):e,{state:n,key:e&&e.key||i||FA()})}function Ih(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ls(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function jA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,h=_r.Pop,d=null,p=_();p==null&&(p=0,l.replaceState(Ql({},l.state,{idx:p}),""));function _(){return(l.state||{idx:null}).idx}function y(){h=_r.Pop;let U=_(),k=U==null?null:U-p;p=U,d&&d({action:h,location:M.location,delta:k})}function T(U,k){h=_r.Push;let A=Ep(M.location,U,k);n&&n(A,U),p=_()+1;let O=Vv(A,p),H=M.createHref(A);try{l.pushState(O,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;r.location.assign(H)}o&&d&&d({action:h,location:M.location,delta:1})}function S(U,k){h=_r.Replace;let A=Ep(M.location,U,k);n&&n(A,U),p=_();let O=Vv(A,p),H=M.createHref(A);l.replaceState(O,"",H),o&&d&&d({action:h,location:M.location,delta:0})}function D(U){let k=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof U=="string"?U:Ih(U);return A=A.replace(/ $/,"%20"),st(k,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,k)}let M={get action(){return h},get location(){return t(r,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Mv,y),d=U,()=>{r.removeEventListener(Mv,y),d=null}},createHref(U){return e(r,U)},createURL:D,encodeLocation(U){let k=D(U);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:T,replace:S,go(U){return l.go(U)}};return M}var Fv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fv||(Fv={}));function zA(t,e,n){return n===void 0&&(n="/"),UA(t,e,n)}function UA(t,e,n,i){let r=typeof e=="string"?Ls(e):e,o=Gm(r.pathname||"/",n);if(o==null)return null;let l=RE(t);BA(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=ex(o);h=YA(l[d],p)}return h}function RE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(st(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=Ar([i,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(st(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),RE(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:ZA(p,o.index),routesMeta:_})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))r(o,l);else for(let d of LE(o.path))r(o,l,d)}),e}function LE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=LE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function BA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const $A=/^:[\w-]+$/,WA=3,HA=2,qA=1,GA=10,KA=-2,jv=t=>t==="*";function ZA(t,e){let n=t.split("/"),i=n.length;return n.some(jv)&&(i+=KA),e&&(i+=HA),n.filter(r=>!jv(r)).reduce((r,o)=>r+($A.test(o)?WA:o===""?qA:GA),i)}function QA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function YA(t,e,n){let{routesMeta:i}=t,r={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,_=o==="/"?e:e.slice(o.length)||"/",y=XA({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),T=d.route;if(!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:Ar([o,y.pathname]),pathnameBase:rx(Ar([o,y.pathnameBase])),route:T}),y.pathnameBase!=="/"&&(o=Ar([o,y.pathnameBase]))}return l}function XA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=JA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((p,_,y)=>{let{paramName:T,isOptional:S}=_;if(T==="*"){let M=h[y]||"";l=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const D=h[y];return S&&!D?p[T]=void 0:p[T]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function JA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function ex(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function tx(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ls(t):t;return{pathname:n?n.startsWith("/")?n:nx(n,e):e,search:sx(i),hash:ox(r)}}function nx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function df(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ix(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Km(t,e){let n=ix(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Zm(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ls(t):(r=Ql({},t),st(!r.pathname||!r.pathname.includes("?"),df("?","pathname","search",r)),st(!r.pathname||!r.pathname.includes("#"),df("#","pathname","hash",r)),st(!r.search||!r.search.includes("#"),df("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,h;if(l==null)h=n;else{let y=e.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),y-=1;r.pathname=T.join("/")}h=y>=0?e[y]:"/"}let d=tx(r,h),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}const Ar=t=>t.join("/").replace(/\/\/+/g,"/"),rx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ox=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ax(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bE=["post","put","patch","delete"];new Set(bE);const lx=["get",...bE];new Set(lx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yl.apply(this,arguments)}const Qm=W.createContext(null),ux=W.createContext(null),zr=W.createContext(null),rd=W.createContext(null),Ur=W.createContext({outlet:null,matches:[],isDataRoute:!1}),NE=W.createContext(null);function cx(t,e){let{relative:n}=e===void 0?{}:e;la()||st(!1);let{basename:i,navigator:r}=W.useContext(zr),{hash:o,pathname:l,search:h}=DE(t,{relative:n}),d=l;return i!=="/"&&(d=l==="/"?i:Ar([i,l])),r.createHref({pathname:d,search:h,hash:o})}function la(){return W.useContext(rd)!=null}function pu(){return la()||st(!1),W.useContext(rd).location}function OE(t){W.useContext(zr).static||W.useLayoutEffect(t)}function ua(){let{isDataRoute:t}=W.useContext(Ur);return t?Ix():hx()}function hx(){la()||st(!1);let t=W.useContext(Qm),{basename:e,future:n,navigator:i}=W.useContext(zr),{matches:r}=W.useContext(Ur),{pathname:o}=pu(),l=JSON.stringify(Km(r,n.v7_relativeSplatPath)),h=W.useRef(!1);return OE(()=>{h.current=!0}),W.useCallback(function(p,_){if(_===void 0&&(_={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let y=Zm(p,JSON.parse(l),o,_.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ar([e,y.pathname])),(_.replace?i.replace:i.push)(y,_.state,_)},[e,i,l,o,t])}function DE(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=W.useContext(zr),{matches:r}=W.useContext(Ur),{pathname:o}=pu(),l=JSON.stringify(Km(r,i.v7_relativeSplatPath));return W.useMemo(()=>Zm(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function dx(t,e){return fx(t,e)}function fx(t,e,n,i){la()||st(!1);let{navigator:r}=W.useContext(zr),{matches:o}=W.useContext(Ur),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=pu(),_;if(e){var y;let U=typeof e=="string"?Ls(e):e;d==="/"||(y=U.pathname)!=null&&y.startsWith(d)||st(!1),_=U}else _=p;let T=_.pathname||"/",S=T;if(d!=="/"){let U=d.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=zA(t,{pathname:S}),M=vx(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:Ar([d,r.encodeLocation?r.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:Ar([d,r.encodeLocation?r.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&M?W.createElement(rd.Provider,{value:{location:Yl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:_r.Pop}},M):M}function px(){let t=Tx(),e=ax(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:r},n):null,null)}const mx=W.createElement(px,null);class gx extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(Ur.Provider,{value:this.props.routeContext},W.createElement(NE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _x(t){let{routeContext:e,match:n,children:i}=t,r=W.useContext(Qm);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(Ur.Provider,{value:e},i)}function vx(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(r=n)==null?void 0:r.errors;if(h!=null){let _=l.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);_>=0||st(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let _=0;_<l.length;_++){let y=l[_];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=_),y.route.id){let{loaderData:T,errors:S}=n,D=y.route.loader&&T[y.route.id]===void 0&&(!S||S[y.route.id]===void 0);if(y.route.lazy||D){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((_,y,T)=>{let S,D=!1,M=null,U=null;n&&(S=h&&y.route.id?h[y.route.id]:void 0,M=y.route.errorElement||mx,d&&(p<0&&T===0?(Px("route-fallback"),D=!0,U=null):p===T&&(D=!0,U=y.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,T+1)),A=()=>{let O;return S?O=M:D?O=U:y.route.Component?O=W.createElement(y.route.Component,null):y.route.element?O=y.route.element:O=_,W.createElement(_x,{match:y,routeContext:{outlet:_,matches:k,isDataRoute:n!=null},children:O})};return n&&(y.route.ErrorBoundary||y.route.errorElement||T===0)?W.createElement(gx,{location:n.location,revalidation:n.revalidation,component:M,error:S,children:A(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):A()},null)}var ME=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ME||{}),VE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(VE||{});function yx(t){let e=W.useContext(Qm);return e||st(!1),e}function wx(t){let e=W.useContext(ux);return e||st(!1),e}function Ex(t){let e=W.useContext(Ur);return e||st(!1),e}function FE(t){let e=Ex(),n=e.matches[e.matches.length-1];return n.route.id||st(!1),n.route.id}function Tx(){var t;let e=W.useContext(NE),n=wx(),i=FE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function Ix(){let{router:t}=yx(ME.UseNavigateStable),e=FE(VE.UseNavigateStable),n=W.useRef(!1);return OE(()=>{n.current=!0}),W.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Yl({fromRouteId:e},o)))},[t,e])}const zv={};function Px(t,e,n){zv[t]||(zv[t]=!0)}function Sx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function jE(t){let{to:e,replace:n,state:i,relative:r}=t;la()||st(!1);let{future:o,static:l}=W.useContext(zr),{matches:h}=W.useContext(Ur),{pathname:d}=pu(),p=ua(),_=Zm(e,Km(h,o.v7_relativeSplatPath),d,r==="path"),y=JSON.stringify(_);return W.useEffect(()=>p(JSON.parse(y),{replace:n,state:i,relative:r}),[p,y,r,n,i]),null}function or(t){st(!1)}function Cx(t){let{basename:e="/",children:n=null,location:i,navigationType:r=_r.Pop,navigator:o,static:l=!1,future:h}=t;la()&&st(!1);let d=e.replace(/^\/*/,"/"),p=W.useMemo(()=>({basename:d,navigator:o,static:l,future:Yl({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=Ls(i));let{pathname:_="/",search:y="",hash:T="",state:S=null,key:D="default"}=i,M=W.useMemo(()=>{let U=Gm(_,d);return U==null?null:{location:{pathname:U,search:y,hash:T,state:S,key:D},navigationType:r}},[d,_,y,T,S,D,r]);return M==null?null:W.createElement(zr.Provider,{value:p},W.createElement(rd.Provider,{children:n,value:M}))}function Ax(t){let{children:e,location:n}=t;return dx(Tp(e),n)}new Promise(()=>{});function Tp(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(i,r)=>{if(!W.isValidElement(i))return;let o=[...e,r];if(i.type===W.Fragment){n.push.apply(n,Tp(i.props.children,o));return}i.type!==or&&st(!1),!i.props.index||!i.props.children||st(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Tp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ip(){return Ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ip.apply(this,arguments)}function xx(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function kx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Rx(t,e){return t.button===0&&(!e||e==="_self")&&!kx(t)}const Lx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bx="6";try{window.__reactRouterVersion=bx}catch{}const Nx="startTransition",Uv=CS[Nx];function Ox(t){let{basename:e,children:n,future:i,window:r}=t,o=W.useRef();o.current==null&&(o.current=VA({window:r,v5Compat:!0}));let l=o.current,[h,d]=W.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},_=W.useCallback(y=>{p&&Uv?Uv(()=>d(y)):d(y)},[d,p]);return W.useLayoutEffect(()=>l.listen(_),[l,_]),W.useEffect(()=>Sx(i),[i]),W.createElement(Cx,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}const Dx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wt=W.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:_,viewTransition:y}=e,T=xx(e,Lx),{basename:S}=W.useContext(zr),D,M=!1;if(typeof p=="string"&&Mx.test(p)&&(D=p,Dx))try{let O=new URL(window.location.href),H=p.startsWith("//")?new URL(O.protocol+p):new URL(p),X=Gm(H.pathname,S);H.origin===O.origin&&X!=null?p=X+H.search+H.hash:M=!0}catch{}let U=cx(p,{relative:r}),k=Vx(p,{replace:l,state:h,target:d,preventScrollReset:_,relative:r,viewTransition:y});function A(O){i&&i(O),O.defaultPrevented||k(O)}return W.createElement("a",Ip({},T,{href:D||U,onClick:M||o?i:A,ref:n,target:d}))});var Bv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bv||(Bv={}));var $v;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($v||($v={}));function Vx(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,d=ua(),p=pu(),_=DE(t,{relative:l});return W.useCallback(y=>{if(Rx(y,n)){y.preventDefault();let T=i!==void 0?i:Ih(p)===Ih(_);d(t,{replace:T,state:r,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,_,i,r,n,t,o,l,h])}var Wv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Fx=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],h=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},UE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,h=l?t[r+1]:0,d=r+2<t.length,p=d?t[r+2]:0,_=o>>2,y=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,S=p&63;d||(S=64,l||(T=64)),i.push(n[_],n[y],n[T],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||h==null||p==null||y==null)throw new jx;const T=o<<2|h>>4;if(i.push(T),p!==64){const S=h<<4&240|p>>2;if(i.push(S),y!==64){const D=p<<6&192|y;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zx=function(t){const e=zE(t);return UE.encodeByteArray(e,!0)},Ph=function(t){return zx(t).replace(/\./g,"")},BE=function(t){try{return UE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=()=>Ux().__FIREBASE_DEFAULTS__,$x=()=>{if(typeof process>"u"||typeof Wv>"u")return;const t=Wv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BE(t[1]);return e&&JSON.parse(e)},sd=()=>{try{return Bx()||$x()||Wx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$E=t=>{var e,n;return(n=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hx=t=>{const e=$E(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},WE=()=>{var t;return(t=sd())===null||t===void 0?void 0:t.config},HE=t=>{var e;return(e=sd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ph(JSON.stringify(n)),Ph(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function Zx(){var t;const e=(t=sd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Yx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xx(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Jx(){return!Zx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GE(){try{return typeof indexedDB=="object"}catch{return!1}}function KE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function ek(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="FirebaseError";class Qn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tk,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bs.prototype.create)}}class bs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?nk(o,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Qn(r,h,i)}}function nk(t,e){return t.replace(ik,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const ik=/\{\$([^}]+)}/g;function rk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(Hv(o)&&Hv(l)){if(!Xl(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Hv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function hl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function dl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sk(t,e){const n=new ok(t,e);return n.subscribe.bind(n)}class ok{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");ak(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=ff),r.error===void 0&&(r.error=ff),r.complete===void 0&&(r.complete=ff);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ak(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=1e3,uk=2,ck=4*60*60*1e3,hk=.5;function qv(t,e=lk,n=uk){const i=e*Math.pow(n,t),r=Math.round(hk*i*(Math.random()-.5)*2);return Math.min(ck,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Kn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new qx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pk(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fk(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fk(t){return t===as?void 0:t}function pk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const gk={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},_k=Ae.INFO,vk={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},yk=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=vk[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class od{constructor(e){this.name=e,this._logLevel=_k,this._logHandler=yk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const wk=(t,e)=>e.some(n=>t instanceof n);let Gv,Kv;function Ek(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tk(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZE=new WeakMap,Pp=new WeakMap,QE=new WeakMap,pf=new WeakMap,Ym=new WeakMap;function Ik(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(xr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&ZE.set(n,t)}).catch(()=>{}),Ym.set(e,t),e}function Pk(t){if(Pp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Pp.set(t,e)}let Sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sk(t){Sp=t(Sp)}function Ck(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(mf(this),e,...n);return QE.set(i,e.sort?e.sort():[e]),xr(i)}:Tk().includes(t)?function(...e){return t.apply(mf(this),e),xr(ZE.get(this))}:function(...e){return xr(t.apply(mf(this),e))}}function Ak(t){return typeof t=="function"?Ck(t):(t instanceof IDBTransaction&&Pk(t),wk(t,Ek())?new Proxy(t,Sp):t)}function xr(t){if(t instanceof IDBRequest)return Ik(t);if(pf.has(t))return pf.get(t);const e=Ak(t);return e!==t&&(pf.set(t,e),Ym.set(e,t)),e}const mf=t=>Ym.get(t);function YE(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),h=xr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(xr(l.result),d.oldVersion,d.newVersion,xr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const xk=["get","getKey","getAll","getAllKeys","count"],kk=["put","add","delete","clear"],gf=new Map;function Zv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=kk.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||xk.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,r?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&d.done]))[0]};return gf.set(e,o),o}Sk(t=>({...t,get:(e,n,i)=>Zv(e,n)||t.get(e,n,i),has:(e,n)=>!!Zv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lk(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Lk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cp="@firebase/app",Qv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new od("@firebase/app"),bk="@firebase/app-compat",Nk="@firebase/analytics-compat",Ok="@firebase/analytics",Dk="@firebase/app-check-compat",Mk="@firebase/app-check",Vk="@firebase/auth",Fk="@firebase/auth-compat",jk="@firebase/database",zk="@firebase/data-connect",Uk="@firebase/database-compat",Bk="@firebase/functions",$k="@firebase/functions-compat",Wk="@firebase/installations",Hk="@firebase/installations-compat",qk="@firebase/messaging",Gk="@firebase/messaging-compat",Kk="@firebase/performance",Zk="@firebase/performance-compat",Qk="@firebase/remote-config",Yk="@firebase/remote-config-compat",Xk="@firebase/storage",Jk="@firebase/storage-compat",eR="@firebase/firestore",tR="@firebase/vertexai-preview",nR="@firebase/firestore-compat",iR="firebase",rR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="[DEFAULT]",sR={[Cp]:"fire-core",[bk]:"fire-core-compat",[Ok]:"fire-analytics",[Nk]:"fire-analytics-compat",[Mk]:"fire-app-check",[Dk]:"fire-app-check-compat",[Vk]:"fire-auth",[Fk]:"fire-auth-compat",[jk]:"fire-rtdb",[zk]:"fire-data-connect",[Uk]:"fire-rtdb-compat",[Bk]:"fire-fn",[$k]:"fire-fn-compat",[Wk]:"fire-iid",[Hk]:"fire-iid-compat",[qk]:"fire-fcm",[Gk]:"fire-fcm-compat",[Kk]:"fire-perf",[Zk]:"fire-perf-compat",[Qk]:"fire-rc",[Yk]:"fire-rc-compat",[Xk]:"fire-gcs",[Jk]:"fire-gcs-compat",[eR]:"fire-fst",[nR]:"fire-fst-compat",[tR]:"fire-vertex","fire-js":"fire-js",[iR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,oR=new Map,xp=new Map;function Yv(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fi(t){const e=t.name;if(xp.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,t);for(const n of Sh.values())Yv(n,t);for(const n of oR.values())Yv(n,t);return!0}function Ns(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new bs("app","Firebase",aR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=rR;function XE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ap,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw kr.create("bad-app-name",{appName:String(r)});if(n||(n=WE()),!n)throw kr.create("no-options");const o=Sh.get(r);if(o){if(Xl(n,o.options)&&Xl(i,o.config))return o;throw kr.create("duplicate-app",{appName:r})}const l=new mk(r);for(const d of xp.values())l.addComponent(d);const h=new lR(n,i,l);return Sh.set(r,h),h}function Xm(t=Ap){const e=Sh.get(t);if(!e&&t===Ap&&WE())return XE();if(!e)throw kr.create("no-app",{appName:t});return e}function xn(t,e,n){var i;let r=(i=sR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(h.join(" "));return}fi(new Kn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebase-heartbeat-database",cR=1,Jl="firebase-heartbeat-store";let _f=null;function JE(){return _f||(_f=YE(uR,cR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),_f}async function hR(t){try{const n=(await JE()).transaction(Jl),i=await n.objectStore(Jl).get(eT(t));return await n.done,i}catch(e){if(e instanceof Qn)Ui.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function Xv(t,e){try{const i=(await JE()).transaction(Jl,"readwrite");await i.objectStore(Jl).put(e,eT(t)),await i.done}catch(n){if(n instanceof Qn)Ui.warn(n.message);else{const i=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(i.message)}}}function eT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=1024,fR=30*24*60*60*1e3;class pR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Jv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=fR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jv(),{heartbeatsToSend:i,unsentEntries:r}=mR(this._heartbeatsCache.heartbeats),o=Ph(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ui.warn(n),""}}}function Jv(){return new Date().toISOString().substring(0,10)}function mR(t,e=dR){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),ey(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ey(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class gR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GE()?KE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ey(t){return Ph(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){fi(new Kn("platform-logger",e=>new Rk(e),"PRIVATE")),fi(new Kn("heartbeat",e=>new pR(e),"PRIVATE")),xn(Cp,Qv,t),xn(Cp,Qv,"esm2017"),xn("fire-js","")}_R("");function Jm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function tT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vR=tT,nT=new bs("auth","Firebase",tT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new od("@firebase/auth");function yR(t,...e){Ch.logLevel<=Ae.WARN&&Ch.warn(`Auth (${ca}): ${t}`,...e)}function Wc(t,...e){Ch.logLevel<=Ae.ERROR&&Ch.error(`Auth (${ca}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,...e){throw tg(t,...e)}function Hn(t,...e){return tg(t,...e)}function eg(t,e,n){const i=Object.assign(Object.assign({},vR()),{[e]:n});return new bs("auth","Firebase",i).create(e,{appName:t.name})}function Di(t){return eg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wR(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&bn(t,"argument-error"),eg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return nT.create(t,...e)}function he(t,e,...n){if(!t)throw tg(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wc(e),new Error(e)}function Bi(t,e){t||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ER(){return ty()==="http:"||ty()==="https:"}function ty(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ER()||qE()||"connection"in navigator)?navigator.onLine:!0}function IR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=Kx()||Yx()}get(){return TR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new gu(3e4,6e4);function Br(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qi(t,e,n,i,r={}){return rT(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=mu(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},o);return Qx()||(p.referrerPolicy="no-referrer"),iT.fetch()(sT(t,t.config.apiHost,n,h),p)})}async function rT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},PR),e);try{const r=new AR(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Ac(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Ac(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Ac(t,"user-disabled",l);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw eg(t,_,p);bn(t,_)}}catch(r){if(r instanceof Qn)throw r;bn(t,"network-request-failed",{message:String(r)})}}async function _u(t,e,n,i,r={}){const o=await qi(t,e,n,i,r);return"mfaPendingCredential"in o&&bn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function sT(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ng(t.config,r):`${t.config.apiScheme}://${r}`}function CR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),SR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ac(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Hn(t,e,i);return r.customData._tokenResponse=n,r}function ny(t){return t!==void 0&&t.enterprise!==void 0}class xR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function kR(t,e){return qi(t,"GET","/v2/recaptchaConfig",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(t,e){return qi(t,"POST","/v1/accounts:delete",e)}async function oT(t,e){return qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LR(t,e=!1){const n=tt(t),i=await n.getIdToken(e),r=ig(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Cl(vf(r.auth_time)),issuedAtTime:Cl(vf(r.iat)),expirationTime:Cl(vf(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function vf(t){return Number(t)*1e3}function ig(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const r=BE(n);return r?JSON.parse(r):(Wc("Failed to decode base64 JWT payload"),null)}catch(r){return Wc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function iy(t){const e=ig(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Qn&&bR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function bR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Yo(t,oT(n,{idToken:i}));he(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?aT(o.providerUserInfo):[],h=DR(t.providerData,l),d=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),_=d?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(t,y)}async function OR(t){const e=tt(t);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DR(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function aT(t){return t.map(e=>{var{providerId:n}=e,i=Jm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){const n=await rT(t,{},async()=>{const i=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=sT(t,r,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",iT.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VR(t,e){return qi(t,"POST","/v2/accounts:revokeToken",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=iy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await MR(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new zo;return i&&(he(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(he(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bi{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LR(this,e)}reload(){return OR(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ah(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await Yo(this,RR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,h,d,p,_;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,M=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,k=(p=n.createdAt)!==null&&p!==void 0?p:void 0,A=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:O,emailVerified:H,isAnonymous:X,providerData:q,stsTokenManager:C}=n;he(O&&C,e,"internal-error");const P=zo.fromJSON(this.name,C);he(typeof O=="string",e,"internal-error"),sr(y,e.name),sr(T,e.name),he(typeof H=="boolean",e,"internal-error"),he(typeof X=="boolean",e,"internal-error"),sr(S,e.name),sr(D,e.name),sr(M,e.name),sr(U,e.name),sr(k,e.name),sr(A,e.name);const x=new bi({uid:O,auth:e,email:T,emailVerified:H,displayName:y,isAnonymous:X,photoURL:D,phoneNumber:S,tenantId:M,stsTokenManager:P,createdAt:k,lastLoginAt:A});return q&&Array.isArray(q)&&(x.providerData=q.map(R=>Object.assign({},R))),U&&(x._redirectEventId=U),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new zo;r.updateFromServerResponse(n);const o=new bi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ah(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];he(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?aT(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new zo;h.updateFromIdToken(i);const d=new bi({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Rp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;function Ni(t){Bi(t instanceof Function,"Expected a class definition");let e=ry.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ry.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lT.type="NONE";const sy=lT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t,e,n){return`firebase:${t}:${e}:${n}`}class Uo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Hc(this.userKey,r.apiKey,o),this.fullPersistenceKey=Hc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Uo(Ni(sy),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||Ni(sy);const l=Hc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){const y=bi._fromJSON(e,_);p!==o&&(h=y),o=p;break}}catch{}const d=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Uo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Uo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pT(e))return"Blackberry";if(mT(e))return"Webos";if(cT(e))return"Safari";if((e.includes("chrome/")||hT(e))&&!e.includes("edge/"))return"Chrome";if(fT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function uT(t=jt()){return/firefox\//i.test(t)}function cT(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hT(t=jt()){return/crios\//i.test(t)}function dT(t=jt()){return/iemobile/i.test(t)}function fT(t=jt()){return/android/i.test(t)}function pT(t=jt()){return/blackberry/i.test(t)}function mT(t=jt()){return/webos/i.test(t)}function rg(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FR(t=jt()){var e;return rg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jR(){return Xx()&&document.documentMode===10}function gT(t=jt()){return rg(t)||fT(t)||mT(t)||pT(t)||/windows phone/i.test(t)||dT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t,e=[]){let n;switch(t){case"Browser":n=oy(jt());break;case"Worker":n=`${oy(jt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ca}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e={}){return qi(t,"GET","/v2/passwordPolicy",Br(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=6;class $R{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:BR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ay(this),this.idTokenSubscription=new ay(this),this.beforeStateQueue=new zR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oT(this,{idToken:e}),i=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Bn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(Di(this));const n=e?tt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UR(this),n=new $R(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await VR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ni(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_T(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $r(t){return tt(t)}class ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=sk(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HR(t){ad=t}function vT(t){return ad.loadJS(t)}function qR(){return ad.recaptchaEnterpriseScript}function GR(){return ad.gapiScript}function KR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZR="recaptcha-enterprise",QR="NO_RECAPTCHA";class YR{constructor(e){this.type=ZR,this.auth=$r(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{kR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new xR(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function r(o,l,h){const d=window.grecaptcha;ny(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(QR)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&ny(window.grecaptcha))r(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=qR();d.length!==0&&(d+=h),vT(d).then(()=>{r(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function ly(t,e,n,i=!1){const r=new YR(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Lp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ly(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ly(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t,e){const n=Ns(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Xl(o,e??{}))return r;bn(r,"already-initialized")}return n.initialize({options:e})}function JR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function e1(t,e,n){const i=$r(t);he(i._canInitEmulator,i,"emulator-config-failed"),he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=yT(e),{host:l,port:h}=t1(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),n1()}function yT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function t1(t){const e=yT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:uy(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:uy(l)}}}function uy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function n1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}async function i1(t,e){return qi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e){return _u(t,"POST","/v1/accounts:signInWithPassword",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(t,e){return _u(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}async function o1(t,e){return _u(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends sg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new eu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new eu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,n,"signInWithPassword",r1);case"emailLink":return s1(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,i,"signUpPassword",i1);case"emailLink":return o1(e,{idToken:n,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return _u(t,"POST","/v1/accounts:signInWithIdp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="http://localhost";class Ts extends sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Jm(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Ts(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Bo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:a1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u1(t){const e=hl(dl(t)).link,n=e?hl(dl(e)).deep_link_id:null,i=hl(dl(t)).deep_link_id;return(i?hl(dl(i)).link:null)||i||n||e||t}class og{constructor(e){var n,i,r,o,l,h;const d=hl(dl(e)),p=(n=d.apiKey)!==null&&n!==void 0?n:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,y=l1((r=d.mode)!==null&&r!==void 0?r:null);he(p&&_&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=u1(e);try{return new og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,n){return eu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=og.parseLink(n);return he(i,"argument-error"),eu._fromEmailAndCode(e,i.code,i.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends vu{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ts._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ai.credential(n,i)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends vu{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends vu{constructor(){super("twitter.com")}static credential(e,n){return Ts._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return fr.credential(n,i)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(t,e){return _u(t,"POST","/v1/accounts:signUp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await bi._fromIdTokenResponse(e,i,r),l=cy(i);return new Is({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=cy(i);return new Is({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function cy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends Qn{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new xh(e,n,i,r)}}function wT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(t,o,e,i):o})}async function h1(t,e,n=!1){const i=await Yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Is._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(t,e,n=!1){const{auth:i}=t;if(Bn(i.app))return Promise.reject(Di(i));const r="reauthenticate";try{const o=await Yo(t,wT(i,r,e,t),n);he(o.idToken,i,"internal-error");const l=ig(o.idToken);he(l,i,"internal-error");const{sub:h}=l;return he(t.uid===h,i,"user-mismatch"),Is._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&bn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t,e,n=!1){if(Bn(t.app))return Promise.reject(Di(t));const i="signIn",r=await wT(t,i,e),o=await Is._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function f1(t,e){return ET($r(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t){const e=$r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IT(t,e,n){if(Bn(t.app))return Promise.reject(Di(t));const i=$r(t),l=await Lp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c1).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&TT(t),d}),h=await Is._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function p1(t,e,n){return Bn(t.app)?Promise.reject(Di(t)):f1(tt(t),ha.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&TT(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(t,e){return qi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=tt(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Yo(i,m1(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const h=i.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function _1(t,e,n,i){return tt(t).onIdTokenChanged(e,n,i)}function v1(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function y1(t,e,n,i){return tt(t).onAuthStateChanged(e,n,i)}function PT(t){return tt(t).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1e3,E1=10;class CT extends ST{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);jR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,E1):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},w1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CT.type="LOCAL";const T1=CT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends ST{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AT.type="SESSION";const xT=AT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ld(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await I1(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=lg("",20);r.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const T=y;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function S1(t){ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function C1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function x1(){return kT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="firebaseLocalStorageDb",k1=1,Rh="firebaseLocalStorage",LT="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ud(t,e){return t.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function R1(){const t=indexedDB.deleteDatabase(RT);return new yu(t).toPromise()}function bp(){const t=indexedDB.open(RT,k1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Rh,{keyPath:LT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Rh)?e(i):(i.close(),await R1(),e(await bp()))})})}async function hy(t,e,n){const i=ud(t,!0).put({[LT]:e,value:n});return new yu(i).toPromise()}async function L1(t,e){const n=ud(t,!1).get(e),i=await new yu(n).toPromise();return i===void 0?null:i.value}function dy(t,e){const n=ud(t,!0).delete(e);return new yu(n).toPromise()}const b1=800,N1=3;class bT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>N1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(x1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await C1(),!this.activeServiceWorker)return;this.sender=new P1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await hy(e,kh,"1"),await dy(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>hy(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>L1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=ud(r,!1).getAll();return new yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bT.type="LOCAL";const O1=bT;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t,e){return e?Ni(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends sg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D1(t){return ET(t.auth,new ug(t),t.bypassAuthState)}function M1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),d1(n,new ug(t),t.bypassAuthState)}async function V1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),h1(n,new ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D1;case"linkViaPopup":case"linkViaRedirect":return V1;case"reauthViaPopup":case"reauthViaRedirect":return M1;default:bn(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new gu(2e3,1e4);async function DT(t,e,n){if(Bn(t.app))return Promise.reject(Hn(t,"operation-not-supported-in-this-environment"));const i=$r(t);wR(t,e,ag);const r=NT(i,n);return new hs(i,"signInViaPopup",e,r).executeNotNull()}class hs extends OT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,F1.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="pendingRedirect",qc=new Map;class z1 extends OT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=qc.get(this.auth._key());if(!e){try{const i=await U1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}qc.set(this.auth._key(),e)}return this.bypassAuthState||qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U1(t,e){const n=W1(e),i=$1(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function B1(t,e){qc.set(t._key(),e)}function $1(t){return Ni(t._redirectPersistence)}function W1(t){return Hc(j1,t.config.apiKey,t.name)}async function H1(t,e,n=!1){if(Bn(t.app))return Promise.reject(Di(t));const i=$r(t),r=NT(i,e),l=await new z1(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=10*60*1e3;class G1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!MT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q1&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(e))}saveEventToCache(e){this.cachedEventUids.add(fy(e)),this.lastProcessedEventTime=Date.now()}}function fy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(t,e={}){return qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y1=/^https?/;async function X1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Z1(t);for(const n of e)try{if(J1(n))return}catch{}bn(t,"unauthorized-domain")}function J1(t){const e=kp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Y1.test(n))return!1;if(Q1.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new gu(3e4,6e4);function py(){const t=ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tL(t){return new Promise((e,n)=>{var i,r,o;function l(){py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{py(),n(Hn(t,"network-request-failed"))},timeout:eL.get()})}if(!((r=(i=ci().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ci().gapi)===null||o===void 0)&&o.load)l();else{const h=KR("iframefcb");return ci()[h]=()=>{gapi.load?l():n(Hn(t,"network-request-failed"))},vT(`${GR()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function nL(t){return Gc=Gc||tL(t),Gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new gu(5e3,15e3),rL="__/auth/iframe",sL="emulator/auth/iframe",oL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lL(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ng(e,sL):`https://${t.config.authDomain}/${rL}`,i={apiKey:e.apiKey,appName:t.name,v:ca},r=aL.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${mu(i).slice(1)}`}async function uL(t){const e=await nL(t),n=ci().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:lL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oL,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Hn(t,"network-request-failed"),h=ci().setTimeout(()=>{o(l)},iL.get());function d(){ci().clearTimeout(h),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hL=500,dL=600,fL="_blank",pL="http://localhost";class my{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mL(t,e,n,i=hL,r=dL){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},cL),{width:i.toString(),height:r.toString(),top:o,left:l}),p=jt().toLowerCase();n&&(h=hT(p)?fL:n),uT(p)&&(e=e||pL,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[S,D])=>`${T}${S}=${D},`,"");if(FR(p)&&h!=="_self")return gL(e||"",h),new my(null);const y=window.open(e||"",h,_);he(y,t,"popup-blocked");try{y.focus()}catch{}return new my(y)}function gL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="__/auth/handler",vL="emulator/auth/handler",yL=encodeURIComponent("fac");async function gy(t,e,n,i,r,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ca,eventId:r};if(e instanceof ag){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",rk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,y]of Object.entries({}))l[_]=y}if(e instanceof vu){const _=e.getScopes().filter(y=>y!=="");_.length>0&&(l.scopes=_.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await t._getAppCheckToken(),p=d?`#${yL}=${encodeURIComponent(d)}`:"";return`${wL(t)}?${mu(h).slice(1)}${p}`}function wL({config:t}){return t.emulator?ng(t,vL):`https://${t.authDomain}/${_L}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="webStorageSupport";class EL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xT,this._completeRedirectFn=H1,this._overrideRedirectResult=B1}async _openPopup(e,n,i,r){var o;Bi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await gy(e,n,i,kp(),r);return mL(e,l,lg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await gy(e,n,i,kp(),r);return S1(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Bi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await uL(e),i=new G1(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yf,{type:yf},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[yf];l!==void 0&&n(!!l),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gT()||cT()||rg()}}const TL=EL;var _y="@firebase/auth",vy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SL(t){fi(new Kn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;he(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_T(t)},p=new WR(i,r,o,d);return JR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),fi(new Kn("auth-internal",e=>{const n=$r(e.getProvider("auth").getImmediate());return(i=>new IL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(_y,vy,PL(t)),xn(_y,vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=5*60,AL=HE("authIdTokenMaxAge")||CL;let yy=null;const xL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>AL)return;const r=n==null?void 0:n.token;yy!==r&&(yy=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function kL(t=Xm()){const e=Ns(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XR(t,{popupRedirectResolver:TL,persistence:[O1,T1,xT]}),i=HE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=xL(o.toString());v1(n,l,()=>l(n.currentUser)),_1(n,h=>l(h))}}const r=$E("auth");return r&&e1(n,`http://${r}`),n}function RL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}HR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Hn("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",RL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SL("Browser");var LL="firebase",bL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(LL,bL,"app");var wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,VT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,P){function x(){}x.prototype=P.prototype,C.D=P.prototype,C.prototype=new x,C.prototype.constructor=C,C.C=function(R,V,F){for(var b=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)b[ze-2]=arguments[ze];return P.prototype[V].apply(R,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,P,x){x||(x=0);var R=Array(16);if(typeof P=="string")for(var V=0;16>V;++V)R[V]=P.charCodeAt(x++)|P.charCodeAt(x++)<<8|P.charCodeAt(x++)<<16|P.charCodeAt(x++)<<24;else for(V=0;16>V;++V)R[V]=P[x++]|P[x++]<<8|P[x++]<<16|P[x++]<<24;P=C.g[0],x=C.g[1],V=C.g[2];var F=C.g[3],b=P+(F^x&(V^F))+R[0]+3614090360&4294967295;P=x+(b<<7&4294967295|b>>>25),b=F+(V^P&(x^V))+R[1]+3905402710&4294967295,F=P+(b<<12&4294967295|b>>>20),b=V+(x^F&(P^x))+R[2]+606105819&4294967295,V=F+(b<<17&4294967295|b>>>15),b=x+(P^V&(F^P))+R[3]+3250441966&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(F^x&(V^F))+R[4]+4118548399&4294967295,P=x+(b<<7&4294967295|b>>>25),b=F+(V^P&(x^V))+R[5]+1200080426&4294967295,F=P+(b<<12&4294967295|b>>>20),b=V+(x^F&(P^x))+R[6]+2821735955&4294967295,V=F+(b<<17&4294967295|b>>>15),b=x+(P^V&(F^P))+R[7]+4249261313&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(F^x&(V^F))+R[8]+1770035416&4294967295,P=x+(b<<7&4294967295|b>>>25),b=F+(V^P&(x^V))+R[9]+2336552879&4294967295,F=P+(b<<12&4294967295|b>>>20),b=V+(x^F&(P^x))+R[10]+4294925233&4294967295,V=F+(b<<17&4294967295|b>>>15),b=x+(P^V&(F^P))+R[11]+2304563134&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(F^x&(V^F))+R[12]+1804603682&4294967295,P=x+(b<<7&4294967295|b>>>25),b=F+(V^P&(x^V))+R[13]+4254626195&4294967295,F=P+(b<<12&4294967295|b>>>20),b=V+(x^F&(P^x))+R[14]+2792965006&4294967295,V=F+(b<<17&4294967295|b>>>15),b=x+(P^V&(F^P))+R[15]+1236535329&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(V^F&(x^V))+R[1]+4129170786&4294967295,P=x+(b<<5&4294967295|b>>>27),b=F+(x^V&(P^x))+R[6]+3225465664&4294967295,F=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(F^P))+R[11]+643717713&4294967295,V=F+(b<<14&4294967295|b>>>18),b=x+(F^P&(V^F))+R[0]+3921069994&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(V^F&(x^V))+R[5]+3593408605&4294967295,P=x+(b<<5&4294967295|b>>>27),b=F+(x^V&(P^x))+R[10]+38016083&4294967295,F=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(F^P))+R[15]+3634488961&4294967295,V=F+(b<<14&4294967295|b>>>18),b=x+(F^P&(V^F))+R[4]+3889429448&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(V^F&(x^V))+R[9]+568446438&4294967295,P=x+(b<<5&4294967295|b>>>27),b=F+(x^V&(P^x))+R[14]+3275163606&4294967295,F=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(F^P))+R[3]+4107603335&4294967295,V=F+(b<<14&4294967295|b>>>18),b=x+(F^P&(V^F))+R[8]+1163531501&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(V^F&(x^V))+R[13]+2850285829&4294967295,P=x+(b<<5&4294967295|b>>>27),b=F+(x^V&(P^x))+R[2]+4243563512&4294967295,F=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(F^P))+R[7]+1735328473&4294967295,V=F+(b<<14&4294967295|b>>>18),b=x+(F^P&(V^F))+R[12]+2368359562&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(x^V^F)+R[5]+4294588738&4294967295,P=x+(b<<4&4294967295|b>>>28),b=F+(P^x^V)+R[8]+2272392833&4294967295,F=P+(b<<11&4294967295|b>>>21),b=V+(F^P^x)+R[11]+1839030562&4294967295,V=F+(b<<16&4294967295|b>>>16),b=x+(V^F^P)+R[14]+4259657740&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(x^V^F)+R[1]+2763975236&4294967295,P=x+(b<<4&4294967295|b>>>28),b=F+(P^x^V)+R[4]+1272893353&4294967295,F=P+(b<<11&4294967295|b>>>21),b=V+(F^P^x)+R[7]+4139469664&4294967295,V=F+(b<<16&4294967295|b>>>16),b=x+(V^F^P)+R[10]+3200236656&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(x^V^F)+R[13]+681279174&4294967295,P=x+(b<<4&4294967295|b>>>28),b=F+(P^x^V)+R[0]+3936430074&4294967295,F=P+(b<<11&4294967295|b>>>21),b=V+(F^P^x)+R[3]+3572445317&4294967295,V=F+(b<<16&4294967295|b>>>16),b=x+(V^F^P)+R[6]+76029189&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(x^V^F)+R[9]+3654602809&4294967295,P=x+(b<<4&4294967295|b>>>28),b=F+(P^x^V)+R[12]+3873151461&4294967295,F=P+(b<<11&4294967295|b>>>21),b=V+(F^P^x)+R[15]+530742520&4294967295,V=F+(b<<16&4294967295|b>>>16),b=x+(V^F^P)+R[2]+3299628645&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(V^(x|~F))+R[0]+4096336452&4294967295,P=x+(b<<6&4294967295|b>>>26),b=F+(x^(P|~V))+R[7]+1126891415&4294967295,F=P+(b<<10&4294967295|b>>>22),b=V+(P^(F|~x))+R[14]+2878612391&4294967295,V=F+(b<<15&4294967295|b>>>17),b=x+(F^(V|~P))+R[5]+4237533241&4294967295,x=V+(b<<21&4294967295|b>>>11),b=P+(V^(x|~F))+R[12]+1700485571&4294967295,P=x+(b<<6&4294967295|b>>>26),b=F+(x^(P|~V))+R[3]+2399980690&4294967295,F=P+(b<<10&4294967295|b>>>22),b=V+(P^(F|~x))+R[10]+4293915773&4294967295,V=F+(b<<15&4294967295|b>>>17),b=x+(F^(V|~P))+R[1]+2240044497&4294967295,x=V+(b<<21&4294967295|b>>>11),b=P+(V^(x|~F))+R[8]+1873313359&4294967295,P=x+(b<<6&4294967295|b>>>26),b=F+(x^(P|~V))+R[15]+4264355552&4294967295,F=P+(b<<10&4294967295|b>>>22),b=V+(P^(F|~x))+R[6]+2734768916&4294967295,V=F+(b<<15&4294967295|b>>>17),b=x+(F^(V|~P))+R[13]+1309151649&4294967295,x=V+(b<<21&4294967295|b>>>11),b=P+(V^(x|~F))+R[4]+4149444226&4294967295,P=x+(b<<6&4294967295|b>>>26),b=F+(x^(P|~V))+R[11]+3174756917&4294967295,F=P+(b<<10&4294967295|b>>>22),b=V+(P^(F|~x))+R[2]+718787259&4294967295,V=F+(b<<15&4294967295|b>>>17),b=x+(F^(V|~P))+R[9]+3951481745&4294967295,C.g[0]=C.g[0]+P&4294967295,C.g[1]=C.g[1]+(V+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+F&4294967295}i.prototype.u=function(C,P){P===void 0&&(P=C.length);for(var x=P-this.blockSize,R=this.B,V=this.h,F=0;F<P;){if(V==0)for(;F<=x;)r(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<P;)if(R[V++]=C.charCodeAt(F++),V==this.blockSize){r(this,R),V=0;break}}else for(;F<P;)if(R[V++]=C[F++],V==this.blockSize){r(this,R),V=0;break}}this.h=V,this.o+=P},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var P=1;P<C.length-8;++P)C[P]=0;var x=8*this.o;for(P=C.length-8;P<C.length;++P)C[P]=x&255,x/=256;for(this.u(C),C=Array(16),P=x=0;4>P;++P)for(var R=0;32>R;R+=8)C[x++]=this.g[P]>>>R&255;return C};function o(C,P){var x=h;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=P(C)}function l(C,P){this.h=P;for(var x=[],R=!0,V=C.length-1;0<=V;V--){var F=C[V]|0;R&&F==P||(x[V]=F,R=!1)}this.g=x}var h={};function d(C){return-128<=C&&128>C?o(C,function(P){return new l([P|0],0>P?-1:0)}):new l([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return y;if(0>C)return U(p(-C));for(var P=[],x=1,R=0;C>=x;R++)P[R]=C/x|0,x*=4294967296;return new l(P,0)}function _(C,P){if(C.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(C.charAt(0)=="-")return U(_(C.substring(1),P));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(P,8)),R=y,V=0;V<C.length;V+=8){var F=Math.min(8,C.length-V),b=parseInt(C.substring(V,V+F),P);8>F?(F=p(Math.pow(P,F)),R=R.j(F).add(p(b))):(R=R.j(x),R=R.add(p(b)))}return R}var y=d(0),T=d(1),S=d(16777216);t=l.prototype,t.m=function(){if(M(this))return-U(this).m();for(var C=0,P=1,x=0;x<this.g.length;x++){var R=this.i(x);C+=(0<=R?R:4294967296+R)*P,P*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(M(this))return"-"+U(this).toString(C);for(var P=p(Math.pow(C,6)),x=this,R="";;){var V=H(x,P).g;x=k(x,V.j(P));var F=((0<x.g.length?x.g[0]:x.h)>>>0).toString(C);if(x=V,D(x))return F+R;for(;6>F.length;)F="0"+F;R=F+R}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var P=0;P<C.g.length;P++)if(C.g[P]!=0)return!1;return!0}function M(C){return C.h==-1}t.l=function(C){return C=k(this,C),M(C)?-1:D(C)?0:1};function U(C){for(var P=C.g.length,x=[],R=0;R<P;R++)x[R]=~C.g[R];return new l(x,~C.h).add(T)}t.abs=function(){return M(this)?U(this):this},t.add=function(C){for(var P=Math.max(this.g.length,C.g.length),x=[],R=0,V=0;V<=P;V++){var F=R+(this.i(V)&65535)+(C.i(V)&65535),b=(F>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);R=b>>>16,F&=65535,b&=65535,x[V]=b<<16|F}return new l(x,x[x.length-1]&-2147483648?-1:0)};function k(C,P){return C.add(U(P))}t.j=function(C){if(D(this)||D(C))return y;if(M(this))return M(C)?U(this).j(U(C)):U(U(this).j(C));if(M(C))return U(this.j(U(C)));if(0>this.l(S)&&0>C.l(S))return p(this.m()*C.m());for(var P=this.g.length+C.g.length,x=[],R=0;R<2*P;R++)x[R]=0;for(R=0;R<this.g.length;R++)for(var V=0;V<C.g.length;V++){var F=this.i(R)>>>16,b=this.i(R)&65535,ze=C.i(V)>>>16,dt=C.i(V)&65535;x[2*R+2*V]+=b*dt,A(x,2*R+2*V),x[2*R+2*V+1]+=F*dt,A(x,2*R+2*V+1),x[2*R+2*V+1]+=b*ze,A(x,2*R+2*V+1),x[2*R+2*V+2]+=F*ze,A(x,2*R+2*V+2)}for(R=0;R<P;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=P;R<2*P;R++)x[R]=0;return new l(x,0)};function A(C,P){for(;(C[P]&65535)!=C[P];)C[P+1]+=C[P]>>>16,C[P]&=65535,P++}function O(C,P){this.g=C,this.h=P}function H(C,P){if(D(P))throw Error("division by zero");if(D(C))return new O(y,y);if(M(C))return P=H(U(C),P),new O(U(P.g),U(P.h));if(M(P))return P=H(C,U(P)),new O(U(P.g),P.h);if(30<C.g.length){if(M(C)||M(P))throw Error("slowDivide_ only works with positive integers.");for(var x=T,R=P;0>=R.l(C);)x=X(x),R=X(R);var V=q(x,1),F=q(R,1);for(R=q(R,2),x=q(x,2);!D(R);){var b=F.add(R);0>=b.l(C)&&(V=V.add(x),F=b),R=q(R,1),x=q(x,1)}return P=k(C,V.j(P)),new O(V,P)}for(V=y;0<=C.l(P);){for(x=Math.max(1,Math.floor(C.m()/P.m())),R=Math.ceil(Math.log(x)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),F=p(x),b=F.j(P);M(b)||0<b.l(C);)x-=R,F=p(x),b=F.j(P);D(F)&&(F=T),V=V.add(F),C=k(C,b)}return new O(V,C)}t.A=function(C){return H(this,C).h},t.and=function(C){for(var P=Math.max(this.g.length,C.g.length),x=[],R=0;R<P;R++)x[R]=this.i(R)&C.i(R);return new l(x,this.h&C.h)},t.or=function(C){for(var P=Math.max(this.g.length,C.g.length),x=[],R=0;R<P;R++)x[R]=this.i(R)|C.i(R);return new l(x,this.h|C.h)},t.xor=function(C){for(var P=Math.max(this.g.length,C.g.length),x=[],R=0;R<P;R++)x[R]=this.i(R)^C.i(R);return new l(x,this.h^C.h)};function X(C){for(var P=C.g.length+1,x=[],R=0;R<P;R++)x[R]=C.i(R)<<1|C.i(R-1)>>>31;return new l(x,C.h)}function q(C,P){var x=P>>5;P%=32;for(var R=C.g.length-x,V=[],F=0;F<R;F++)V[F]=0<P?C.i(F+x)>>>P|C.i(F+x+1)<<32-P:C.i(F+x);return new l(V,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,VT=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,gs=l}).apply(typeof wy<"u"?wy:typeof self<"u"?self:typeof window<"u"?window:{});var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FT,fl,jT,Kc,Np,zT,UT,BT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof xc=="object"&&xc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in v))break e;v=v[j]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var v=0,I=!1,j={next:function(){if(!I&&v<u.length){var $=v++;return{value:m($,u[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(u){return u||function(){return o(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,I),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:y,T.apply(null,arguments)}function S(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function D(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,j,$){for(var ee=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ee[Ne-2]=arguments[Ne];return m.prototype[j].apply(I,ee)}}function M(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function U(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(d(I)){const j=u.length||0,$=I.length||0;u.length=j+$;for(let ee=0;ee<$;ee++)u[j+ee]=I[ee]}else u.push(I)}}class k{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function A(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var X=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function q(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function C(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function P(u){const m={};for(const v in u)m[v]=u[v];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,m){let v,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(v in I)u[v]=I[v];for(let $=0;$<x.length;$++)v=x[$],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function V(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function F(u){h.setTimeout(()=>{throw u},0)}function b(){var u=ce;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ze{constructor(){this.h=this.g=null}add(m,v){const I=dt.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var dt=new k(()=>new ft,u=>u.reset());class ft{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let zt,G=!1,ce=new ze,J=()=>{const u=h.Promise.resolve(void 0);zt=()=>{u.then(de)}};var de=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(v){F(v)}var m=dt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}G=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u}();function we(u,m){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(X){e:{try{H(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}D(we,Pe);var me={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function xu(u,m,v,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=j,this.key=++Yn,this.da=this.fa=!1}function Gi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ki(u){this.src=u,this.g={},this.h=0}Ki.prototype.add=function(u,m,v,I,j){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ee=Hr(u,m,I,j);return-1<ee?(m=u[ee],v||(m.fa=!1)):(m=new xu(m,this.src,$,!!I,j),m.fa=v,u.push(m)),m};function mi(u,m){var v=m.type;if(v in u.g){var I=u.g[v],j=Array.prototype.indexOf.call(I,m,void 0),$;($=0<=j)&&Array.prototype.splice.call(I,j,1),$&&(Gi(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Hr(u,m,v,I){for(var j=0;j<u.length;++j){var $=u[j];if(!$.da&&$.listener==m&&$.capture==!!v&&$.ha==I)return j}return-1}var ga="closure_lm_"+(1e6*Math.random()|0),Fs={};function _a(u,m,v,I,j){if(Array.isArray(m)){for(var $=0;$<m.length;$++)_a(u,m[$],v,I,j);return null}return v=Lu(v),u&&u[pt]?u.K(m,v,p(I)?!!I.capture:!1,j):va(u,m,v,!1,I,j)}function va(u,m,v,I,j,$){if(!m)throw Error("Invalid event type");var ee=p(j)?!!j.capture:!!j,Ne=Bs(u);if(Ne||(u[ga]=Ne=new Ki(u)),v=Ne.add(m,v,I,ee,$),v.proxy)return v;if(I=js(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)be||(j=ee),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(Us(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function js(){function u(v){return m.call(u.src,u.listener,v)}const m=Ru;return u}function ku(u,m,v,I,j){if(Array.isArray(m))for(var $=0;$<m.length;$++)ku(u,m[$],v,I,j);else I=p(I)?!!I.capture:!!I,v=Lu(v),u&&u[pt]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],v=Hr($,v,I,j),-1<v&&(Gi($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=Bs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Hr(m,v,I,j)),(v=-1<u?m[u]:null)&&zs(v))}function zs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[pt])mi(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(Us(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Bs(m))?(mi(v,u),v.h==0&&(v.src=null,m[ga]=null)):Gi(u)}}}function Us(u){return u in Fs?Fs[u]:Fs[u]="on"+u}function Ru(u,m){if(u.da)u=!0;else{m=new we(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&zs(u),u=v.call(I,m)}return u}function Bs(u){return u=u[ga],u instanceof Ki?u:null}var ya="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lu(u){return typeof u=="function"?u:(u[ya]||(u[ya]=function(m){return u.handleEvent(m)}),u[ya])}function ot(){ye.call(this),this.i=new Ki(this),this.M=this,this.F=null}D(ot,ye),ot.prototype[pt]=!0,ot.prototype.removeEventListener=function(u,m,v,I){ku(this,u,m,v,I)};function vt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Pe(m,u);else if(m instanceof Pe)m.target=m.target||u;else{var j=m;m=new Pe(I,u),R(m,j)}if(j=!0,v)for(var $=v.length-1;0<=$;$--){var ee=m.g=v[$];j=qr(ee,I,!0,m)&&j}if(ee=m.g=u,j=qr(ee,I,!0,m)&&j,j=qr(ee,I,!1,m)&&j,v)for($=0;$<v.length;$++)ee=m.g=v[$],j=qr(ee,I,!1,m)&&j}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)Gi(v[I]);delete u.g[m],u.h--}}this.F=null},ot.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},ot.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function qr(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,$=0;$<m.length;++$){var ee=m[$];if(ee&&!ee.da&&ee.capture==v){var Ne=ee.listener,at=ee.ha||ee.src;ee.fa&&mi(u.i,ee),j=Ne.call(at,I)!==!1&&j}}return j&&!I.defaultPrevented}function bu(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function wa(u){u.g=bu(()=>{u.g=null,u.i&&(u.i=!1,wa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Nu extends ye{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:wa(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(u){ye.call(this),this.h=u,this.g={}}D(Gr,ye);var Ea=[];function $s(u){q(u.g,function(m,v){this.g.hasOwnProperty(v)&&zs(m)},u),u.g={}}Gr.prototype.N=function(){Gr.aa.N.call(this),$s(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ws=h.JSON.stringify,Ld=h.JSON.parse,Kr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Ta(){}Ta.prototype.h=null;function Ou(u){return u.h||(u.h=u.i())}function Ia(){}var Zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hs(){Pe.call(this,"d")}D(Hs,Pe);function Pa(){Pe.call(this,"c")}D(Pa,Pe);var gi={},Du=null;function qs(){return Du=Du||new ot}gi.La="serverreachability";function Mu(u){Pe.call(this,gi.La,u)}D(Mu,Pe);function Zr(u){const m=qs();vt(m,new Mu(m))}gi.STAT_EVENT="statevent";function Gs(u,m){Pe.call(this,gi.STAT_EVENT,u),this.stat=m}D(Gs,Pe);function Pt(u){const m=qs();vt(m,new Gs(m,u))}gi.Ma="timingevent";function Vu(u,m){Pe.call(this,gi.Ma,u),this.size=m}D(Vu,Pe);function Qr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Yr(){this.g=!0}Yr.prototype.xa=function(){this.g=!1};function gn(u,m,v,I,j,$){u.info(function(){if(u.g)if($)for(var ee="",Ne=$.split("&"),at=0;at<Ne.length;at++){var xe=Ne[at].split("=");if(1<xe.length){var Ve=xe[0];xe=xe[1];var Ke=Ve.split("_");ee=2<=Ke.length&&Ke[1]=="type"?ee+(Ve+"="+xe+"&"):ee+(Ve+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+v+`
`+ee})}function se(u,m,v,I,j,$,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+v+`
`+$+" "+ee})}function _i(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ju(u,v)+(I?" "+I:"")})}function Fu(u,m){u.info(function(){return"TIMEOUT: "+m})}Yr.prototype.info=function(){};function ju(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var j=I[1];if(Array.isArray(j)&&!(1>j.length)){var $=j[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<j.length;ee++)j[ee]=""}}}}return Ws(v)}catch{return m}}var Xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ks={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zs;function Nn(){}D(Nn,Ta),Nn.prototype.g=function(){return new XMLHttpRequest},Nn.prototype.i=function(){return{}},Zs=new Nn;function On(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new Gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zu}function zu(){this.i=null,this.g="",this.h=!1}var Uu={},Sa={};function Ca(u,m,v){u.L=1,u.v=vn(Je(m)),u.m=v,u.P=!0,Aa(u,null)}function Aa(u,m){u.F=Date.now(),Ys(u),u.A=Je(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Wu(v.i,"t",I),u.C=0,v=u.j.J,u.h=new zu,u.g=Yu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Nu(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ea[0]=j.toString()),j=Ea);for(var $=0;$<j.length;$++){var ee=_a(v,j[$],I||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?P(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Zr(),gn(u.i,u.u,u.A,u.l,u.R,u.m)}On.prototype.ca=function(u){u=u.target;const m=this.M;m&&Ut(u)==3?m.j():this.Y(u)},On.prototype.Y=function(u){try{if(u==this.g)e:{const Ke=Ut(this.g);var m=this.g.Ba();const nr=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||$a(this.g)))){this.J||Ke!=4||m==7||(m==8||0>=nr?Zr(3):Zr(2)),xa(this);var v=this.g.Z();this.X=v;t:if(Bu(this)){var I=$a(this.g);u="";var j=I.length,$=Ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Jr(this);var ee="";break t}this.h.i=new h.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!($&&m==j-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=v==200,se(this.i,this.u,this.A,this.l,this.R,Ke,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,at=this.g;if((Ne=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Ne)){var xe=Ne;break t}}xe=null}if(v=xe)_i(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,es(this,v);else{this.o=!1,this.s=3,Pt(12),vi(this),Jr(this);break e}}if(this.P){v=!0;let nt;for(;!this.J&&this.C<ee.length;)if(nt=Qs(this,ee),nt==Sa){Ke==4&&(this.s=4,Pt(14),v=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==Uu){this.s=4,Pt(15),_i(this.i,this.l,ee,"[Invalid Chunk]"),v=!1;break}else _i(this.i,this.l,nt,null),es(this,nt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||ee.length!=0||this.h.h||(this.s=1,Pt(16),v=!1),this.o=this.o&&v,!v)_i(this.i,this.l,ee,"[Invalid Chunked Response]"),vi(this),Jr(this);else if(0<ee.length&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.ba&&!Ve.M&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),oo(Ve),Ve.M=!0,Pt(11))}}else _i(this.i,this.l,ee,null),es(this,ee);Ke==4&&vi(this),this.o&&!this.J&&(Ke==4?Ha(this.j,this):(this.o=!1,Ys(this)))}else bd(this.g),v==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),vi(this),Jr(this)}}}catch{}finally{}};function Bu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Qs(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Sa:(v=Number(m.substring(v,I)),isNaN(v)?Uu:(I+=1,I+v>m.length?Sa:(m=m.slice(I,I+v),u.C=I+v,m)))}On.prototype.cancel=function(){this.J=!0,vi(this)};function Ys(u){u.S=Date.now()+u.I,$u(u,u.I)}function $u(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Qr(T(u.ba,u),m)}function xa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}On.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Fu(this.i,this.A),this.L!=2&&(Zr(),Pt(17)),vi(this),this.s=2,Jr(this)):$u(this,this.S-u)};function Jr(u){u.j.G==0||u.J||Ha(u.j,u)}function vi(u){xa(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,$s(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function es(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Se(v.h,u))){if(!u.K&&Se(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)lo(v),ro(v);else break e;so(v),Pt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Qr(T(v.Za,v),6e3));if(1>=Qi(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ii(v,11)}else if((u.K||v.g==u)&&lo(v),!A(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let xe=j[m];if(v.T=xe[0],xe=xe[1],v.G==2)if(xe[0]=="c"){v.K=xe[1],v.ia=xe[2];const Ve=xe[3];Ve!=null&&(v.la=Ve,v.j.info("VER="+v.la));const Ke=xe[4];Ke!=null&&(v.Aa=Ke,v.j.info("SVER="+v.Aa));const nr=xe[5];nr!=null&&typeof nr=="number"&&0<nr&&(I=1.5*nr,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const nt=u.g;if(nt){const co=nt.g?nt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var $=I.h;$.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Fe($,$.h),$.h=null))}if(I.D){const ei=nt.g?nt.g.getResponseHeader("X-HTTP-Session-Id"):null;ei&&(I.ya=ei,fe(I.I,I.D,ei))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ee=u;if(I.qa=uo(I,I.J?I.ia:null,I.W),ee.K){ns(I.h,ee);var Ne=ee,at=I.L;at&&(Ne.I=at),Ne.B&&(xa(Ne),Ys(Ne)),I.g=ee}else Vn(I);0<v.i.length&&tr(v)}else xe[0]!="stop"&&xe[0]!="close"||Ii(v,7);else v.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Ii(v,7):io(v):xe[0]!="noop"&&v.l&&v.l.ta(xe),v.v=0)}}Zr(4)}catch{}}var ts=class{constructor(u,m){this.g=u,this.map=m}};function ka(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ra(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qi(u){return u.h?1:u.g?u.g.size:0}function Se(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Fe(u,m){u.g?u.g.add(m):u.h=m}function ns(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ka.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function yi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return M(u.i)}function Yi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function La(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function ve(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=La(u),I=Yi(u),j=I.length,$=0;$<j;$++)m.call(void 0,I[$],v&&v[$],u)}var We=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),j=null;if(0<=I){var $=u[v].substring(0,I);j=u[v].substring(I+1)}else $=u[v];m($,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function _n(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _n){this.h=u.h,Xs(this,u.j),this.o=u.o,this.g=u.g,wi(this,u.s),this.l=u.l;var m=u.i,v=new Ei;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Xn(this,v),this.m=u.m}else u&&(m=String(u).match(We))?(this.h=!1,Xs(this,m[1]||"",!0),this.o=Dn(m[2]||""),this.g=Dn(m[3]||"",!0),wi(this,m[4]),this.l=Dn(m[5]||"",!0),Xn(this,m[6]||"",!0),this.m=Dn(m[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}_n.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Mn(m,Xi,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Mn(m,Xi,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Mn(v,v.charAt(0)=="/"?Da:Oa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Mn(v,Ma)),u.join("")};function Je(u){return new _n(u)}function Xs(u,m,v){u.j=v?Dn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function wi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xn(u,m,v){m instanceof Ei?(u.i=m,yn(u.i,u.h)):(v||(m=Mn(m,Js)),u.i=new Ei(m,u.h))}function fe(u,m,v){u.i.set(m,v)}function vn(u){return fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Dn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Mn(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Na),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Na(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xi=/[#\/\?@]/g,Oa=/[#\?:]/g,Da=/[#\?]/g,Js=/[#\?@]/g,Ma=/#/g;function Ei(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function sn(u){u.g||(u.g=new Map,u.h=0,u.i&&ba(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=Ei.prototype,t.add=function(u,m){sn(this),this.i=null,u=le(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Va(u,m){sn(u),m=le(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function eo(u,m){return sn(u),m=le(u,m),u.g.has(m)}t.forEach=function(u,m){sn(this),this.g.forEach(function(v,I){v.forEach(function(j){u.call(m,j,I,this)},this)},this)},t.na=function(){sn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const j=u[I];for(let $=0;$<j.length;$++)v.push(m[I])}return v},t.V=function(u){sn(this);let m=[];if(typeof u=="string")eo(this,u)&&(m=m.concat(this.g.get(le(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},t.set=function(u,m){return sn(this),this.i=null,u=le(this,u),eo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Wu(u,m,v){Va(u,m),0<v.length&&(u.i=null,u.g.set(le(u,m),M(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const $=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var j=$;ee[I]!==""&&(j+="="+encodeURIComponent(String(ee[I]))),u.push(j)}}return this.i=u.join("&")};function le(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function yn(u,m){m&&!u.j&&(sn(u),u.i=null,u.g.forEach(function(v,I){var j=I.toLowerCase();I!=j&&(Va(this,I),Wu(this,j,v))},u)),u.j=m}function Me(u,m){const v=new Yr;if(h.Image){const I=new Image;I.onload=S(wn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=S(wn,v,"TestLoadImage: error",!1,m,I),I.onabort=S(wn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=S(wn,v,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Hu(u,m){const v=new Yr,I=new AbortController,j=setTimeout(()=>{I.abort(),wn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then($=>{clearTimeout(j),$.ok?wn(v,"TestPingServer: ok",!0,m):wn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),wn(v,"TestPingServer: error",!1,m)})}function wn(u,m,v,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(v)}catch{}}function Fa(){this.g=new Kr}function ja(u,m,v){const I=v||"";try{ve(u,function(j,$){let ee=j;p(j)&&(ee=Ws(j)),m.push(I+$+"="+encodeURIComponent(ee))})}catch(j){throw m.push(I+"type="+encodeURIComponent("_badmap")),j}}function En(u){this.l=u.Ub||null,this.j=u.eb||!1}D(En,Ta),En.prototype.g=function(){return new Ji(this.l,this.j)},En.prototype.i=function(u){return function(){return u}}({});function Ji(u,m){ot.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ji,ot),t=Ji.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,on(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ge(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,on(this)),this.g&&(this.readyState=3,on(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;er(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function er(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ge(this):on(this),this.readyState==3&&er(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ge(this))},t.Qa=function(u){this.g&&(this.response=u,Ge(this))},t.ga=function(){this.g&&Ge(this)};function Ge(u){u.readyState=4,u.l=null,u.j=null,u.v=null,on(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function on(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function za(u){let m="";return q(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function to(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=za(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):fe(u,m,v))}function He(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(He,ot);var qu=/^https?$/i,Ua=["POST","PUT"];t=He.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zs.g(),this.v=this.o?Ou(this.o):Ou(Zs),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){Gu(this,$);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)v.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())v.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),j=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ua,m,void 0))||I||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of v)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zt(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Gu(this,$)}};function Gu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ba(u),no(u)}function Ba(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,vt(this,"complete"),vt(this,"abort"),no(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),no(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Te(this):this.bb())},t.bb=function(){Te(this)};function Te(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Ut(u)!=4||u.Z()!=2)){if(u.u&&Ut(u)==4)bu(u.Ea,0,u);else if(vt(u,"readystatechange"),Ut(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ee===0){var j=String(u.D).match(We)[1]||null;!j&&h.self&&h.self.location&&(j=h.self.location.protocol.slice(0,-1)),I=!qu.test(j?j.toLowerCase():"")}v=I}if(v)vt(u,"complete"),vt(u,"success");else{u.m=6;try{var $=2<Ut(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Ba(u)}}finally{no(u)}}}}function no(u,m){if(u.g){Zt(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||vt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Zt(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ut(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ut(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ld(m)}};function $a(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bd(u){const m={};u=(u.g&&2<=Ut(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(A(u[I]))continue;var v=V(u[I]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=m[j]||[];m[j]=$,$.push(v)}C(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Ku(u){this.Aa=0,this.i=[],this.j=new Yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ti("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ti("baseRetryDelayMs",5e3,u),this.cb=Ti("retryDelaySeedMs",1e4,u),this.Wa=Ti("forwardChannelMaxRetries",2,u),this.wa=Ti("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ka(u&&u.concurrentRequestLimit),this.Da=new Fa,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ku.prototype,t.la=8,t.G=1,t.connect=function(u,m,v,I){Pt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=uo(this,null,this.W),tr(this)};function io(u){if(Zu(u),u.G==3){var m=u.U++,v=Je(u.I);if(fe(v,"SID",u.K),fe(v,"RID",m),fe(v,"TYPE","terminate"),is(u,v),m=new On(u,u.j,m),m.L=2,m.v=vn(Je(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=Yu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ys(m)}Qu(u)}function ro(u){u.g&&(oo(u),u.g.cancel(),u.g=null)}function Zu(u){ro(u),u.u&&(h.clearTimeout(u.u),u.u=null),lo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function tr(u){if(!Ra(u.h)&&!u.s){u.s=!0;var m=u.Ga;zt||J(),G||(zt(),G=!0),ce.add(m,u),u.B=0}}function Nd(u,m){return Qi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Qr(T(u.Ga,u,m),qa(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new On(this,this.j,u);let $=this.o;if(this.S&&($?($=P($),R($,this.S)):$=this.S),this.m!==null||this.O||(j.H=$,$=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Wa(this,j,m),v=Je(this.I),fe(v,"RID",u),fe(v,"CVER",22),this.D&&fe(v,"X-HTTP-Session-Id",this.D),is(this,v),$&&(this.O?m="headers="+encodeURIComponent(String(za($)))+"&"+m:this.m&&to(v,this.m,$)),Fe(this.h,j),this.Ua&&fe(v,"TYPE","init"),this.P?(fe(v,"$req",m),fe(v,"SID","null"),j.T=!0,Ca(j,v,null)):Ca(j,v,m),this.G=2}}else this.G==3&&(u?an(this,u):this.i.length==0||Ra(this.h)||an(this))};function an(u,m){var v;m?v=m.l:v=u.U++;const I=Je(u.I);fe(I,"SID",u.K),fe(I,"RID",v),fe(I,"AID",u.T),is(u,I),u.m&&u.o&&to(I,u.m,u.o),v=new On(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Wa(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fe(u.h,v),Ca(v,I,m)}function is(u,m){u.H&&q(u.H,function(v,I){fe(m,I,v)}),u.l&&ve({},function(v,I){fe(m,I,v)})}function Wa(u,m,v){v=Math.min(u.i.length,v);var I=u.l?T(u.l.Na,u.l,u):null;e:{var j=u.i;let $=-1;for(;;){const ee=["count="+v];$==-1?0<v?($=j[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let Ne=!0;for(let at=0;at<v;at++){let xe=j[at].g;const Ve=j[at].map;if(xe-=$,0>xe)$=Math.max(0,j[at].g-100),Ne=!1;else try{ja(Ve,ee,"req"+xe+"_")}catch{I&&I(Ve)}}if(Ne){I=ee.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Vn(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;zt||J(),G||(zt(),G=!0),ce.add(m,u),u.v=0}}function so(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Qr(T(u.Fa,u),qa(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ao(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Qr(T(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),ro(this),ao(this))};function oo(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function ao(u){u.g=new On(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Je(u.qa);fe(m,"RID","rpc"),fe(m,"SID",u.K),fe(m,"AID",u.T),fe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&fe(m,"TO",u.ja),fe(m,"TYPE","xmlhttp"),is(u,m),u.m&&u.o&&to(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=vn(Je(m)),v.m=null,v.P=!0,Aa(v,u)}t.Za=function(){this.C!=null&&(this.C=null,ro(this),so(this),Pt(19))};function lo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ha(u,m){var v=null;if(u.g==m){lo(u),oo(u),u.g=null;var I=2}else if(Se(u.h,m))v=m.D,ns(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;I=qs(),vt(I,new Vu(I,v)),tr(u)}else Vn(u);else if(j=m.s,j==3||j==0&&0<m.X||!(I==1&&Nd(u,m)||I==2&&so(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),j){case 1:Ii(u,5);break;case 4:Ii(u,10);break;case 3:Ii(u,6);break;default:Ii(u,2)}}}function qa(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Ii(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),I=u.Xa;const j=!I;I=new _n(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Xs(I,"https"),vn(I),j?Me(I.toString(),v):Hu(I.toString(),v)}else Pt(2);u.G=0,u.l&&u.l.sa(m),Qu(u),Zu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Qu(u){if(u.G=0,u.ka=[],u.l){const m=yi(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function uo(u,m,v){var I=v instanceof _n?Je(v):new _n(v);if(I.g!="")m&&(I.g=m+"."+I.g),wi(I,I.s);else{var j=h.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var $=new _n(null);I&&Xs($,I),m&&($.g=m),j&&wi($,j),v&&($.l=v),I=$}return v=u.D,m=u.ya,v&&m&&fe(I,v,m),fe(I,"VER",u.la),is(u,I),I}function Yu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new He(new En({eb:v})):new He(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ga(){}t=Ga.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function rs(){}rs.prototype.g=function(u,m){return new yt(u,m)};function yt(u,m){ot.call(this),this.g=new Ku(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!A(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Tn(this)}D(yt,ot),yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){io(this.g)},yt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Ws(u),u=v);m.i.push(new ts(m.Ya++,u)),m.G==3&&tr(m)},yt.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,yt.aa.N.call(this)};function Jn(u){Hs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}D(Jn,Hs);function Xu(){Pa.call(this),this.status=1}D(Xu,Pa);function Tn(u){this.g=u}D(Tn,Ga),Tn.prototype.ua=function(){vt(this.g,"a")},Tn.prototype.ta=function(u){vt(this.g,new Jn(u))},Tn.prototype.sa=function(u){vt(this.g,new Xu)},Tn.prototype.ra=function(){vt(this.g,"b")},rs.prototype.createWebChannel=rs.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,BT=function(){return new rs},UT=function(){return qs()},zT=gi,Np={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Kc=Xr,Ks.COMPLETE="complete",jT=Ks,Ia.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,fl=Ia,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,FT=He}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});const Ey="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new od("@firebase/firestore");function ol(){return Ps.logLevel}function re(t,...e){if(Ps.logLevel<=Ae.DEBUG){const n=e.map(cg);Ps.debug(`Firestore (${da}): ${t}`,...n)}}function $i(t,...e){if(Ps.logLevel<=Ae.ERROR){const n=e.map(cg);Ps.error(`Firestore (${da}): ${t}`,...n)}}function Xo(t,...e){if(Ps.logLevel<=Ae.WARN){const n=e.map(cg);Ps.warn(`Firestore (${da}): ${t}`,...n)}}function cg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+t;throw $i(e),new Error(e)}function De(t,e){t||pe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class OL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DL{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mi,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mi)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(De(typeof i.accessToken=="string"),new $T(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Dt(e)}}class ML{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class VL{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new ML(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new FL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=zL(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function Jo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new _t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new _t(0,0))}static max(){return new ge(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,i){n===void 0?n=0:n>e.length&&pe(),i===void 0?i=e.length-n:i>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return tu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),l=n.get(r);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends tu{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const UL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends tu{construct(e,n,i){return new At(e,n,i)}static isValidIdentifier(e){return UL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ie(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ie(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(o(),r++)}if(o(),l)throw new ie(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Be.fromString(e))}static fromName(e){return new oe(Be.fromString(e).popFirst(5))}static empty(){return new oe(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Be(e.slice()))}}function BL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Nr(r,oe.empty(),e)}function $L(t){return new Nr(t.readTime,t.key,-1)}class Nr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Nr(ge.min(),oe.empty(),-1)}static max(){return new Nr(ge.max(),oe.empty(),-1)}}function WL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==HL)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let r=0,o=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++o,l&&o===r&&n()},d=>i(d))}),l=!0,o===r&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(r=>r?Q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,r)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(_=>{l[p]=_,++h,h===o&&i(l)},_=>r(_))}})}static doWhile(e,n){return new Q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function GL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hg.oe=-1;function cd(t){return t==null}function Lh(t){return t===0&&1/t==-1/0}function KL(t){return typeof t=="number"&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kc(this.root,e,this.comparator,!0)}}class kc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=r??Ct.EMPTY,this.right=o??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ct(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ct.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iy(this.data.getIterator())}getIteratorFrom(e){return new Iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class Iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new cn([])}unionWith(e){let n=new kt(At.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qT("Invalid base64 string: "+o):o}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const ZL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(De(!!t),typeof t=="string"){let e=0;const n=ZL.exec(t);if(De(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fg(t){const e=t.mapValue.fields.__previous_value__;return dg(e)?fg(e):e}function nu(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n,i,r,o,l,h,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p}}class iu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc={mapValue:{}};function Cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dg(t)?4:XL(t)?9007199254740991:YL(t)?10:11:pe()}function pi(t,e){if(t===e)return!0;const n=Cs(t);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nu(t).isEqual(nu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Or(r.timestampValue),h=Or(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ss(r.bytesValue).isEqual(Ss(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return it(r.geoPointValue.latitude)===it(o.geoPointValue.latitude)&&it(r.geoPointValue.longitude)===it(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return it(r.integerValue)===it(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=it(r.doubleValue),h=it(o.doubleValue);return l===h?Lh(l)===Lh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Jo(t.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Ty(l)!==Ty(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!pi(l[d],h[d])))return!1;return!0}(t,e);default:return pe()}}function ru(t,e){return(t.values||[]).find(n=>pi(n,e))!==void 0}function ea(t,e){if(t===e)return 0;const n=Cs(t),i=Cs(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=it(o.integerValue||o.doubleValue),d=it(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Py(t.timestampValue,e.timestampValue);case 4:return Py(nu(t),nu(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Ss(o),d=Ss(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=Le(h[p],d[p]);if(_!==0)return _}return Le(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Le(it(o.latitude),it(l.latitude));return h!==0?h:Le(it(o.longitude),it(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,p,_;const y=o.fields||{},T=l.fields||{},S=(h=y.value)===null||h===void 0?void 0:h.arrayValue,D=(d=T.value)===null||d===void 0?void 0:d.arrayValue,M=Le(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((_=D==null?void 0:D.values)===null||_===void 0?void 0:_.length)||0);return M!==0?M:Sy(S,D)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Rc.mapValue&&l===Rc.mapValue)return 0;if(o===Rc.mapValue)return 1;if(l===Rc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let y=0;y<d.length&&y<_.length;++y){const T=Le(d[y],_[y]);if(T!==0)return T;const S=ea(h[d[y]],p[_[y]]);if(S!==0)return S}return Le(d.length,_.length)}(t.mapValue,e.mapValue);default:throw pe()}}function Py(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Or(t),i=Or(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function Sy(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=ea(n[r],i[r]);if(o)return o}return Le(n.length,i.length)}function ta(t){return Op(t)}function Op(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Or(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Op(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Op(n.fields[l])}`;return r+"}"}(t.mapValue):pe()}function Cy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dp(t){return!!t&&"integerValue"in t}function pg(t){return!!t&&"arrayValue"in t}function Ay(t){return!!t&&"nullValue"in t}function xy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zc(t){return!!t&&"mapValue"in t}function YL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Os(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Al(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Zc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Al(n)}setAll(e){let n=At.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=Al(l):r.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Zc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Zc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Os(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Xt(Al(this.value))}}function GT(t){const e=[];return Os(t.fields,(n,i)=>{const r=new At([n]);if(Zc(i)){const o=GT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,i,r,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Vt(e,0,ge.min(),ge.min(),ge.min(),Xt.empty(),0)}static newFoundDocument(e,n,i,r){return new Vt(e,1,n,ge.min(),i,r,0)}static newNoDocument(e,n){return new Vt(e,2,n,ge.min(),ge.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,ge.min(),ge.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.position=e,this.inclusive=n}}function ky(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=ea(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ry(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function JL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{}class ht extends KT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new tb(e,n,i):n==="array-contains"?new rb(e,i):n==="in"?new sb(e,i):n==="not-in"?new ob(e,i):n==="array-contains-any"?new ab(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new nb(e,i):new ib(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ea(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends KT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zn(e,n)}matches(e){return ZT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ZT(t){return t.op==="and"}function QT(t){return eb(t)&&ZT(t)}function eb(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function Mp(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+ta(t.value);if(QT(t))return t.filters.map(e=>Mp(e)).join(",");{const e=t.filters.map(n=>Mp(n)).join(",");return`${t.op}(${e})`}}function YT(t,e){return t instanceof ht?function(i,r){return r instanceof ht&&i.op===r.op&&i.field.isEqual(r.field)&&pi(i.value,r.value)}(t,e):t instanceof Zn?function(i,r){return r instanceof Zn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,h)=>o&&YT(l,r.filters[h]),!0):!1}(t,e):void pe()}function XT(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(XT).join(" ,")+"}"}(t):"Filter"}class tb extends ht{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class nb extends ht{constructor(e,n){super(e,"in",n),this.keys=JT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ib extends ht{constructor(e,n){super(e,"not-in",n),this.keys=JT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class rb extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pg(n)&&ru(n.arrayValue,this.value)}}class sb extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}}class ob extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ru(this.value.arrayValue,n)}}class ab extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n=null,i=[],r=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function Ly(t,e=null,n=[],i=[],r=null,o=null,l=null){return new lb(t,e,n,i,r,o,l)}function mg(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Mp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),cd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ta(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ta(i)).join(",")),e.ue=n}return e.ue}function gg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ry(t.startAt,e.startAt)&&Ry(t.endAt,e.endAt)}function Vp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n=null,i=[],r=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ub(t,e,n,i,r,o,l,h){return new Tu(t,e,n,i,r,o,l,h)}function hd(t){return new Tu(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eI(t){return t.collectionGroup!==null}function xl(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new kt(At.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Nh(o,i))}),n.has(At.keyField().canonicalString())||e.ce.push(new Nh(At.keyField(),i))}return e.ce}function hi(t){const e=_e(t);return e.le||(e.le=cb(e,xl(t))),e.le}function cb(t,e){if(t.limitType==="F")return Ly(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Nh(r.field,o)});const n=t.endAt?new bh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new bh(t.startAt.position,t.startAt.inclusive):null;return Ly(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Fp(t,e){const n=t.filters.concat([e]);return new Tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jp(t,e,n){return new Tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dd(t,e){return gg(hi(t),hi(e))&&t.limitType===e.limitType}function tI(t){return`${mg(hi(t))}|lt:${t.limitType}`}function vo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>XT(r)).join(", ")}]`),cd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ta(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ta(r)).join(",")),`Target(${i})`}(hi(t))}; limitType=${t.limitType})`}function fd(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of xl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(l,h,d){const p=ky(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,xl(i),r)||i.endAt&&!function(l,h,d){const p=ky(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,xl(i),r))}(t,e)}function hb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nI(t){return(e,n)=>{let i=!1;for(const r of xl(t)){const o=db(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function db(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?ea(d,p):pe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return HT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Xe(oe.comparator);function Wi(){return fb}const iI=new Xe(oe.comparator);function pl(...t){let e=iI;for(const n of t)e=e.insert(n.key,n);return e}function rI(t){let e=iI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ds(){return kl()}function sI(){return kl()}function kl(){return new fa(t=>t.toString(),(t,e)=>t.isEqual(e))}const pb=new Xe(oe.comparator),mb=new kt(oe.comparator);function Ce(...t){let e=mb;for(const n of t)e=e.add(n);return e}const gb=new kt(Le);function _b(){return gb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function oI(t){return{integerValue:""+t}}function vb(t,e){return KL(e)?oI(e):_g(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function yb(t,e,n){return t instanceof su?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&dg(o)&&(o=fg(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof ou?lI(t,e):t instanceof au?uI(t,e):function(r,o){const l=aI(r,o),h=Ny(l)+Ny(r.Pe);return Dp(l)&&Dp(r.Pe)?oI(h):_g(r.serializer,h)}(t,e)}function wb(t,e,n){return t instanceof ou?lI(t,e):t instanceof au?uI(t,e):n}function aI(t,e){return t instanceof Oh?function(i){return Dp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class su extends pd{}class ou extends pd{constructor(e){super(),this.elements=e}}function lI(t,e){const n=cI(e);for(const i of t.elements)n.some(r=>pi(r,i))||n.push(i);return{arrayValue:{values:n}}}class au extends pd{constructor(e){super(),this.elements=e}}function uI(t,e){let n=cI(e);for(const i of t.elements)n=n.filter(r=>!pi(r,i));return{arrayValue:{values:n}}}class Oh extends pd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ny(t){return it(t.integerValue||t.doubleValue)}function cI(t){return pg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.field=e,this.transform=n}}function Tb(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ou&&r instanceof ou||i instanceof au&&r instanceof au?Jo(i.elements,r.elements,pi):i instanceof Oh&&r instanceof Oh?pi(i.Pe,r.Pe):i instanceof su&&r instanceof su}(t.transform,e.transform)}class Ib{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class md{}function hI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vg(t.key,qn.none()):new Iu(t.key,t.data,qn.none());{const n=t.data,i=Xt.empty();let r=new kt(At.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new Wr(t.key,i,new cn(r.toArray()),qn.none())}}function Pb(t,e,n){t instanceof Iu?function(r,o,l){const h=r.value.clone(),d=Dy(r.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Wr?function(r,o,l){if(!Qc(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Dy(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(dI(r)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Rl(t,e,n,i){return t instanceof Iu?function(o,l,h,d){if(!Qc(o.precondition,l))return h;const p=o.value.clone(),_=My(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Wr?function(o,l,h,d){if(!Qc(o.precondition,l))return h;const p=My(o.fieldTransforms,d,l),_=l.data;return _.setAll(dI(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,h){return Qc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function Sb(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=aI(i.transform,r||null);o!=null&&(n===null&&(n=Xt.empty()),n.set(i.field,o))}return n||null}function Oy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Jo(i,r,(o,l)=>Tb(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Iu extends md{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wr extends md{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Dy(t,e,n){const i=new Map;De(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,h=e.data.field(o.field);i.set(o.field,wb(l,h,n[r]))}return i}function My(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,yb(o,l,e))}return i}class vg extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cb extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&Pb(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Rl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Rl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=sI();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(r.key)?null:h;const d=hI(l,h);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(n,i)=>Oy(n,i))&&Jo(this.baseMutations,e.baseMutations,(n,i)=>Oy(n,i))}}class yg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){De(e.mutations.length===i.length);let r=function(){return pb}();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new yg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,ke;function Rb(t){switch(t){default:return pe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function fI(t){if(t===void 0)return $i("GRPC error has no .code"),K.UNKNOWN;switch(t){case ut.OK:return K.OK;case ut.CANCELLED:return K.CANCELLED;case ut.UNKNOWN:return K.UNKNOWN;case ut.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ut.INTERNAL:return K.INTERNAL;case ut.UNAVAILABLE:return K.UNAVAILABLE;case ut.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ut.NOT_FOUND:return K.NOT_FOUND;case ut.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ut.ABORTED:return K.ABORTED;case ut.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ut.DATA_LOSS:return K.DATA_LOSS;default:return pe()}}(ke=ut||(ut={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new gs([4294967295,4294967295],0);function Vy(t){const e=Lb().encode(t),n=new VT;return n.update(e),new Uint8Array(n.digest())}function Fy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gs([n,i],0),new gs([r,o],0)]}class wg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(i<0)throw new ml(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=gs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(gs.fromNumber(i)));return r.compare(bb)===1&&(r=new gs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vy(e),[i,r]=Fy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new wg(o,r,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=Vy(e),[i,r]=Fy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new gd(ge.min(),r,new Xe(Le),Wi(),Ce())}}class Pu{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Pu(i,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class pI{constructor(e,n){this.targetId=e,this.me=n}}class mI{constructor(e,n,i=Lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class jy{constructor(){this.fe=0,this.ge=Uy(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),i=Ce();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:pe()}}),new Pu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Uy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Nb{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wi(),this.qe=zy(),this.Qe=new Xe(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(Vp(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,Vt.newNoDocument(l,ge.min()))}else De(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,h;try{l=Ss(i).toUint8Array()}catch(d){if(d instanceof qT)return Xo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new wg(l,r,o)}catch(d){return Xo(d instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&Vp(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Vt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Ce();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const r=new gd(e,n,this.Qe,this.ke,i);return this.ke=Wi(),this.qe=zy(),this.Qe=new Xe(Le),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new kt(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zy(){return new Xe(oe.comparator)}function Uy(){return new Xe(oe.comparator)}const Ob={asc:"ASCENDING",desc:"DESCENDING"},Db={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mb={and:"AND",or:"OR"};class Vb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zp(t,e){return t.useProto3Json||cd(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fb(t,e){return Dh(t,e.toTimestamp())}function di(t){return De(!!t),ge.fromTimestamp(function(n){const i=Or(n);return new _t(i.seconds,i.nanos)}(t))}function Eg(t,e){return Up(t,e).canonicalString()}function Up(t,e){const n=function(r){return new Be(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _I(t){const e=Be.fromString(t);return De(TI(e)),e}function Bp(t,e){return Eg(t.databaseId,e.path)}function wf(t,e){const n=_I(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(yI(n))}function vI(t,e){return Eg(t.databaseId,e)}function jb(t){const e=_I(t);return e.length===4?Be.emptyPath():yI(e)}function $p(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function By(t,e,n){return{name:Bp(t,e),fields:n.value.mapValue.fields}}function zb(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(De(_===void 0||typeof _=="string"),Lt.fromBase64String(_||"")):(De(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Lt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=p.code===void 0?K.UNKNOWN:fI(p.code);return new ie(_,p.message||"")}(l);n=new mI(i,r,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=wf(t,i.document.name),o=di(i.document.updateTime),l=i.document.createTime?di(i.document.createTime):ge.min(),h=new Xt({mapValue:{fields:i.document.fields}}),d=Vt.newFoundDocument(r,o,l,h),p=i.targetIds||[],_=i.removedTargetIds||[];n=new Yc(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=wf(t,i.document),o=i.readTime?di(i.readTime):ge.min(),l=Vt.newNoDocument(r,o),h=i.removedTargetIds||[];n=new Yc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=wf(t,i.document),o=i.removedTargetIds||[];n=new Yc([],o,r,null)}else{if(!("filter"in e))return pe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new kb(r,o),h=i.targetId;n=new pI(h,l)}}return n}function Ub(t,e){let n;if(e instanceof Iu)n={update:By(t,e.key,e.value)};else if(e instanceof vg)n={delete:Bp(t,e.key)};else if(e instanceof Wr)n={update:By(t,e.key,e.data),updateMask:Qb(e.fieldMask)};else{if(!(e instanceof Cb))return pe();n={verify:Bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof su)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ou)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof au)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Oh)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw pe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:Fb(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe()}(t,e.precondition)),n}function Bb(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(r,o){let l=r.updateTime?di(r.updateTime):di(o);return l.isEqual(ge.min())&&(l=di(o)),new Ib(l,r.transformResults||[])}(n,e))):[]}function $b(t,e){return{documents:[vI(t,e.path)]}}function Wb(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=vI(t,r);const o=function(p){if(p.length!==0)return EI(Zn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(T){return{field:yo(T.field),direction:Gb(T.dir)}}(_))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=zp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function Hb(t){let e=jb(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){De(i===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(y){const T=wI(y);return T instanceof Zn&&QT(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(T=>function(D){return new Nh(wo(D.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(y){let T;return T=typeof y=="object"?y.value:y,cd(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(y){const T=!!y.before,S=y.values||[];return new bh(S,T)}(n.startAt));let p=null;return n.endAt&&(p=function(y){const T=!y.before,S=y.values||[];return new bh(S,T)}(n.endAt)),ub(e,r,l,o,h,"F",d,p)}function qb(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=wo(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=wo(n.unaryFilter.field);return ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wo(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=wo(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(wo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(i=>wI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function Gb(t){return Ob[t]}function Kb(t){return Db[t]}function Zb(t){return Mb[t]}function yo(t){return{fieldPath:t.canonicalString()}}function wo(t){return At.fromServerFormat(t.fieldPath)}function EI(t){return t instanceof ht?function(n){if(n.op==="=="){if(xy(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NAN"}};if(Ay(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xy(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NAN"}};if(Ay(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(n.field),op:Kb(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const i=n.getFilters().map(r=>EI(r));return i.length===1?i[0]:{compositeFilter:{op:Zb(n.op),filters:i}}}(t):pe()}function Qb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,i,r,o=ge.min(),l=ge.min(),h=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.ct=e}}function Xb(t){const e=Hb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.un=new eN}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Nr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class eN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new kt(Be.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new kt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new na(0)}static kn(){return new na(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.changes=new fa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Rl(i.mutation,r,cn.empty(),_t.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ce()){const r=ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=pl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ds();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,r){let o=Wi();const l=kl(),h=function(){return kl()}();return n.forEach((d,p)=>{const _=i.get(p.key);r.has(p.key)&&(_===void 0||_.mutation instanceof Wr)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Rl(_.mutation,p,_.mutation.getFieldMask(),_t.now())):l.set(p.key,cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),n.forEach((p,_)=>{var y;return h.set(p,new nN(_,(y=l.get(p))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const i=kl();let r=new Xe((l,h)=>l-h),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let _=i.get(d)||cn.empty();_=h.applyToLocalView(p,_),i.set(d,_);const y=(r.get(h.batchId)||Ce()).add(d);r=r.insert(h.batchId,y)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,y=sI();_.forEach(T=>{if(!o.has(T)){const S=hI(n.get(T),i.get(T));S!==null&&y.set(T,S),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return Q.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Q.resolve(ds());let h=-1,d=o;return l.next(p=>Q.forEach(p,(_,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(_)?Q.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ce())).next(_=>({batchId:h,changes:rI(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=pl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=pl();return this.indexManager.getCollectionParents(e,o).next(h=>Q.forEach(h,d=>{const p=function(y,T){return new Tu(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(_=>{_.forEach((y,T)=>{l=l.insert(y,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,Vt.newInvalidDocument(_)))});let h=pl();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Rl(_.mutation,p,cn.empty(),_t.now()),fd(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:di(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Xb(r.bundledQuery),readTime:di(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.overlays=new Xe(oe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ds();return Q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const r=ds(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Xe((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=o.get(p.largestBatchId);_===null&&(_=ds(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=ds(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=r)););return Q.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new xb(n,i));let o=this.Ir.get(n);o===void 0&&(o=Ce(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(){this.Tr=new kt(Et.Er),this.dr=new kt(Et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Et(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Et(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new Be([])),i=new Et(n,e),r=new Et(n,e+1),o=[];return this.dr.forEachInRange([i,r],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Be([])),i=new Et(n,e),r=new Et(n,e+1);let o=Ce();return this.dr.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Et(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new kt(Et.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Ab(o,n,i,r);this.mutationQueue.push(l);for(const h of r)this.br=this.br.add(new Et(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Et(n,0),r=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],l=>{const h=this.Dr(l.wr);o.push(h)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new kt(Le);return n.forEach(r=>{const o=new Et(r,0),l=new Et(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new Et(new oe(o),0);let h=new kt(Le);return this.br.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(d.wr)),!0)},l),Q.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(n.mutations,r=>{const o=new Et(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Et(n,0),r=this.br.firstAfterOrEqual(i);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.Mr=e,this.docs=function(){return new Xe(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let i=Wi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Vt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Wi();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||WL($L(_),i)<=0||(r.has(_.key)||fd(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){pe()}Or(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new uN(this)}getSize(e){return Q.resolve(this.size)}}class uN extends tN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.persistence=e,this.Nr=new fa(n=>mg(n),gg),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tg,this.targetCount=0,this.kr=na.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new na(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),Q.waitFor(o).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hg(0),this.Kr=!1,this.Kr=!0,this.$r=new oN,this.referenceDelegate=e(this),this.Ur=new cN(this),this.indexManager=new Jb,this.remoteDocumentCache=function(r){return new lN(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Yb(n),this.Gr=new rN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new aN(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new dN(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Q.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class dN extends qL{constructor(e){super(),this.currentSequenceNumber=e}}class Ig{constructor(e){this.persistence=e,this.Jr=new Tg,this.Yr=null}static Zr(e){return new Ig(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,i=>{const r=oe.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Ce(),r=Ce();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Pg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Jx()?8:GL(jt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new fN;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(ol()<=Ae.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",vo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(ol()<=Ae.DEBUG&&re("QueryEngine","Query:",vo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ol()<=Ae.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",vo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):Q.resolve())}Yi(e,n){if(by(n))return Q.resolve(null);let i=hi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=jp(n,null,"F"),i=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ce(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.ts(n,h);return this.ns(n,p,l,d.readTime)?this.Yi(e,jp(n,null,"F")):this.rs(e,p,n,d)}))})))}Zi(e,n,i,r){return by(n)||r.isEqual(ge.min())?Q.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,r)?Q.resolve(null):(ol()<=Ae.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vo(n)),this.rs(e,l,n,BL(r,-1)).next(h=>h))})}ts(e,n){let i=new kt(nI(e));return n.forEach((r,o)=>{fd(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return ol()<=Ae.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",vo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Nr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Xe(Le),this._s=new fa(o=>mg(o),gg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gN(t,e,n,i){return new mN(t,e,n,i)}async function II(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ce();for(const p of r){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:h}))})})}function _N(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,p,_){const y=p.batch,T=y.keys();let S=Q.resolve();return T.forEach(D=>{S=S.next(()=>_.getEntry(d,D)).next(M=>{const U=p.docVersions.get(D);De(U!==null),M.version.compareTo(U)<0&&(y.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),_.addEntry(M)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ce();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function PI(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vN(t,e){const n=_e(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((_,y)=>{const T=r.get(y);if(!T)return;h.push(n.Ur.removeMatchingKeys(o,_.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,_.addedDocuments,y)));let S=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Lt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,i)),r=r.insert(y,S),function(M,U,k){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(T,S,_)&&h.push(n.Ur.updateTargetData(o,S))});let d=Wi(),p=Ce();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(yN(o,l,e.documentUpdates).next(_=>{d=_.Ps,p=_.Is})),!i.isEqual(ge.min())){const _=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return Q.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.os=r,o))}function yN(t,e,n){let i=Ce(),r=Ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Wi();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),d.isNoDocument()&&d.version.isEqual(ge.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):re("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Ps:l,Is:r}})}function wN(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function EN(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Q.resolve(r)):n.Ur.allocateTargetId(i).next(l=>(r=new vr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Wp(t,e,n){const i=_e(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!Eu(l))throw l;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function $y(t,e,n){const i=_e(t);let r=ge.min(),o=Ce();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const y=_e(d),T=y._s.get(_);return T!==void 0?Q.resolve(y.os.get(T)):y.Ur.getTargetData(p,_)}(i,l,hi(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?r:ge.min(),n?o:Ce())).next(h=>(TN(i,hb(e),h),{documents:h,Ts:o})))}function TN(t,e,n){let i=t.us.get(e)||ge.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Wy{constructor(){this.activeTargetIds=_b()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IN{constructor(){this.so=new Wy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function Ef(){return Lc===null?Lc=function(){return 268435456+Math.round(2147483648*Math.random())}():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class AN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,l){const h=Ef(),d=this.xo(n,i.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${h}:`,d,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(n,d,p,r).then(_=>(re("RestConnection",`Received RPC '${n}' ${h}: `,_),_),_=>{throw Xo("RestConnection",`RPC '${n}' ${h} failed with error: `,_,"url: ",d,"request:",r),_})}Lo(n,i,r,o,l,h){return this.Mo(n,i,r,o,l)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),r&&r.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const r=SN[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=Ef();return new Promise((l,h)=>{const d=new FT;d.setWithCredentials(!0),d.listenOnce(jT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Kc.NO_ERROR:const _=d.getResponseJson();re(Ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),l(_);break;case Kc.TIMEOUT:re(Ot,`RPC '${e}' ${o} timed out`),h(new ie(K.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const y=d.getStatus();if(re(Ot,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const D=function(U){const k=U.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(k)>=0?k:K.UNKNOWN}(S.status);h(new ie(D,S.message))}else h(new ie(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ie(K.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(Ot,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(r);re(Ot,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=Ef(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=BT(),h=UT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=o.join("");re(Ot,`Creating RPC '${e}' stream ${r}: ${_}`,d);const y=l.createWebChannel(_,d);let T=!1,S=!1;const D=new CN({Io:U=>{S?re(Ot,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(T||(re(Ot,`Opening RPC '${e}' stream ${r} transport.`),y.open(),T=!0),re(Ot,`RPC '${e}' stream ${r} sending:`,U),y.send(U))},To:()=>y.close()}),M=(U,k,A)=>{U.listen(k,O=>{try{A(O)}catch(H){setTimeout(()=>{throw H},0)}})};return M(y,fl.EventType.OPEN,()=>{S||(re(Ot,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),M(y,fl.EventType.CLOSE,()=>{S||(S=!0,re(Ot,`RPC '${e}' stream ${r} transport closed`),D.So())}),M(y,fl.EventType.ERROR,U=>{S||(S=!0,Xo(Ot,`RPC '${e}' stream ${r} transport errored:`,U),D.So(new ie(K.UNAVAILABLE,"The operation could not be completed")))}),M(y,fl.EventType.MESSAGE,U=>{var k;if(!S){const A=U.data[0];De(!!A);const O=A,H=O.error||((k=O[0])===null||k===void 0?void 0:k.error);if(H){re(Ot,`RPC '${e}' stream ${r} received error:`,H);const X=H.status;let q=function(x){const R=ut[x];if(R!==void 0)return fI(R)}(X),C=H.message;q===void 0&&(q=K.INTERNAL,C="Unknown error status: "+X+" with message "+H.message),S=!0,D.So(new ie(q,C)),y.close()}else re(Ot,`RPC '${e}' stream ${r} received:`,A),D.bo(A)}}),M(h,zT.STAT_EVENT,U=>{U.stat===Np.PROXY?re(Ot,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===Np.NOPROXY&&re(Ot,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function Tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){return new Vb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,i,r,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new SI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?($i(n.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ie(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xN extends CI{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zb(this.serializer,e),i=function(o){if(!("targetChange"in o))return ge.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ge.min():l.readTime?di(l.readTime):ge.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=$p(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Vp(d)?{documents:$b(o,d)}:{query:Wb(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=gI(o,l.resumeToken);const p=zp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ge.min())>0){h.readTime=Dh(o,l.snapshotVersion.toTimestamp());const p=zp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=qb(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=$p(this.serializer),n.removeTarget=e,this.a_(n)}}class kN extends CI{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Bb(e.writeResults,e.commitTime),i=di(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=$p(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Ub(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ie(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Up(n,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(K.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Up(n,i),r,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(K.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class LN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($i(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{Ds(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=_e(d);p.L_.add(4),await Su(p),p.q_.set("Unknown"),p.L_.delete(4),await vd(p)}(this))})}),this.q_=new LN(i,r)}}async function vd(t){if(Ds(t))for(const e of t.B_)await e(!0)}async function Su(t){for(const e of t.B_)await e(!1)}function AI(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xg(n)?Ag(n):pa(n).r_()&&Cg(n,e))}function Sg(t,e){const n=_e(t),i=pa(n);n.N_.delete(e),i.r_()&&xI(n,e),n.N_.size===0&&(i.r_()?i.o_():Ds(n)&&n.q_.set("Unknown"))}function Cg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).A_(e)}function xI(t,e){t.Q_.xe(e),pa(t).R_(e)}function Ag(t){t.Q_=new Nb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.q_.v_()}function xg(t){return Ds(t)&&!pa(t).n_()&&t.N_.size>0}function Ds(t){return _e(t).L_.size===0}function kI(t){t.Q_=void 0}async function NN(t){t.q_.set("Online")}async function ON(t){t.N_.forEach((e,n)=>{Cg(t,e)})}async function DN(t,e){kI(t),xg(t)?(t.q_.M_(e),Ag(t)):t.q_.set("Unknown")}async function MN(t,e,n){if(t.q_.set("Online"),e instanceof mI&&e.state===2&&e.cause)try{await async function(r,o){const l=o.cause;for(const h of o.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mh(t,i)}else if(e instanceof Yc?t.Q_.Ke(e):e instanceof pI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const i=await PI(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.N_.get(p);_&&o.N_.set(p,_.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const _=o.N_.get(d);if(!_)return;o.N_.set(d,_.withResumeToken(Lt.EMPTY_BYTE_STRING,_.snapshotVersion)),xI(o,d);const y=new vr(_.target,d,p,_.sequenceNumber);Cg(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await Mh(t,i)}}async function Mh(t,e,n){if(!Eu(e))throw e;t.L_.add(1),await Su(t),t.q_.set("Offline"),n||(n=()=>PI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vd(t)})}function RI(t,e){return e().catch(n=>Mh(t,n,e))}async function yd(t){const e=_e(t),n=Dr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;VN(e);)try{const r=await wN(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,FN(e,r)}catch(r){await Mh(e,r)}LI(e)&&bI(e)}function VN(t){return Ds(t)&&t.O_.length<10}function FN(t,e){t.O_.push(e);const n=Dr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LI(t){return Ds(t)&&!Dr(t).n_()&&t.O_.length>0}function bI(t){Dr(t).start()}async function jN(t){Dr(t).p_()}async function zN(t){const e=Dr(t);for(const n of t.O_)e.m_(n.mutations)}async function UN(t,e,n){const i=t.O_.shift(),r=yg.from(i,e,n);await RI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await yd(t)}async function BN(t,e){e&&Dr(t).V_&&await async function(i,r){if(function(l){return Rb(l)&&l!==K.ABORTED}(r.code)){const o=i.O_.shift();Dr(i).s_(),await RI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await yd(i)}}(t,e),LI(t)&&bI(t)}async function qy(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=Ds(n);n.L_.add(3),await Su(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vd(n)}async function $N(t,e){const n=_e(t);e?(n.L_.delete(2),await vd(n)):e||(n.L_.add(2),await Su(n),n.q_.set("Unknown"))}function pa(t){return t.K_||(t.K_=function(n,i,r){const o=_e(n);return o.w_(),new xN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:NN.bind(null,t),Ro:ON.bind(null,t),mo:DN.bind(null,t),d_:MN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xg(t)?Ag(t):t.q_.set("Unknown")):(await t.K_.stop(),kI(t))})),t.K_}function Dr(t){return t.U_||(t.U_=function(n,i,r){const o=_e(n);return o.w_(),new kN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jN.bind(null,t),mo:BN.bind(null,t),f_:zN.bind(null,t),g_:UN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await yd(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,h=new kg(e,n,l,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(t,e){if($i("AsyncQueue",`${e}: ${t}`),Eu(t))return new ie(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=pl(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new $o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new $o;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.W_=new Xe(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ia{constructor(e,n,i,r,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ia(e,n,$o.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HN{constructor(){this.queries=Ky(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=_e(n),o=r.queries;r.queries=Ky(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new ie(K.ABORTED,"Firestore shutting down"))}}function Ky(){return new fa(t=>tI(t),dd)}async function Lg(t,e){const n=_e(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new WN,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=Rg(l,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Ng(n)}async function bg(t,e){const n=_e(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qN(t,e){const n=_e(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(r)&&(i=!0);l.z_=r}}i&&Ng(n)}function GN(t,e,n){const i=_e(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Ng(t){t.Y_.forEach(e=>{e.next()})}var Hp,Zy;(Zy=Hp||(Hp={})).ea="default",Zy.Cache="cache";class Og{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ia(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.key=e}}class OI{constructor(e){this.key=e}}class KN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=nI(e),this.Ra=new $o(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Gy,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((_,y)=>{const T=r.get(_),S=fd(this.query,y)?y:null,D=!!T&&this.mutatedKeys.has(T.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let U=!1;T&&S?T.data.isEqual(S.data)?D!==M&&(i.track({type:3,doc:S}),U=!0):this.ga(T,S)||(i.track({type:2,doc:S}),U=!0,(d&&this.Aa(S,d)>0||p&&this.Aa(S,p)<0)&&(h=!0)):!T&&S?(i.track({type:0,doc:S}),U=!0):T&&!S&&(i.track({type:1,doc:T}),U=!0,(d||p)&&(h=!0)),U&&(S?(l=l.add(S),o=M?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((_,y)=>function(S,D){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return M(S)-M(D)}(_.type,y.type)||this.Aa(_.doc,y.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,p=d!==this.Ea;return this.Ea=d,l.length!==0||p?{snapshot:new ia(this.query,e.Ra,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new OI(i))}),this.da.forEach(i=>{e.has(i)||n.push(new NI(i))}),n}ba(e){this.Ta=e.Ts,this.da=Ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class QN{constructor(e){this.key=e,this.va=!1}}class YN{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new fa(h=>tI(h),dd),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(oe.comparator),this.Na=new Map,this.La=new Tg,this.Ba={},this.ka=new Map,this.qa=na.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function XN(t,e,n=!0){const i=zI(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await DI(i,e,n,!0),r}async function JN(t,e){const n=zI(t);await DI(n,e,!0,!1)}async function DI(t,e,n,i){const r=await EN(t.localStore,hi(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await eO(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&AI(t.remoteStore,r),h}async function eO(t,e,n,i,r){t.Ka=(y,T,S)=>async function(M,U,k,A){let O=U.view.ma(k);O.ns&&(O=await $y(M.localStore,U.query,!1).then(({documents:C})=>U.view.ma(C,O)));const H=A&&A.targetChanges.get(U.targetId),X=A&&A.targetMismatches.get(U.targetId)!=null,q=U.view.applyChanges(O,M.isPrimaryClient,H,X);return Yy(M,U.targetId,q.wa),q.snapshot}(t,y,T,S);const o=await $y(t.localStore,e,!0),l=new KN(e,o.Ts),h=l.ma(o.documents),d=Pu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=l.applyChanges(h,t.isPrimaryClient,d);Yy(t,n,p.wa);const _=new ZN(e,n,l);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function tO(t,e,n){const i=_e(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(l=>!dd(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Wp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Sg(i.remoteStore,r.targetId),qp(i,r.targetId)}).catch(wu)):(qp(i,r.targetId),await Wp(i.localStore,r.targetId,!0))}async function nO(t,e){const n=_e(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Sg(n.remoteStore,i.targetId))}async function iO(t,e,n){const i=cO(t);try{const r=await function(l,h){const d=_e(l),p=_t.now(),_=h.reduce((S,D)=>S.add(D.key),Ce());let y,T;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=Wi(),M=Ce();return d.cs.getEntries(S,_).next(U=>{D=U,D.forEach((k,A)=>{A.isValidDocument()||(M=M.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,D)).next(U=>{y=U;const k=[];for(const A of h){const O=Sb(A,y.get(A.key).overlayedDocument);O!=null&&k.push(new Wr(A.key,O,GT(O.value.mapValue),qn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,k,h)}).next(U=>{T=U;const k=U.applyToLocalDocumentSet(y,M);return d.documentOverlayCache.saveOverlays(S,U.batchId,k)})}).then(()=>({batchId:T.batchId,changes:rI(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,h,d){let p=l.Ba[l.currentUser.toKey()];p||(p=new Xe(Le)),p=p.insert(h,d),l.Ba[l.currentUser.toKey()]=p}(i,r.batchId,n),await Cu(i,r.changes),await yd(i.remoteStore)}catch(r){const o=Rg(r,"Failed to persist write");n.reject(o)}}async function MI(t,e){const n=_e(t);try{const i=await vN(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.Na.get(o);l&&(De(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.va=!0:r.modifiedDocuments.size>0?De(l.va):r.removedDocuments.size>0&&(De(l.va),l.va=!1))}),await Cu(n,i,e)}catch(i){await wu(i)}}function Qy(t,e,n){const i=_e(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(l,h){const d=_e(l);d.onlineState=h;let p=!1;d.queries.forEach((_,y)=>{for(const T of y.j_)T.Z_(h)&&(p=!0)}),p&&Ng(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rO(t,e,n){const i=_e(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let l=new Xe(oe.comparator);l=l.insert(o,Vt.newNoDocument(o,ge.min()));const h=Ce().add(o),d=new gd(ge.min(),new Map,new Xe(Le),l,h);await MI(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Dg(i)}else await Wp(i.localStore,e,!1).then(()=>qp(i,e,n)).catch(wu)}async function sO(t,e){const n=_e(t),i=e.batch.batchId;try{const r=await _N(n.localStore,e);FI(n,i,null),VI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Cu(n,r)}catch(r){await wu(r)}}async function oO(t,e,n){const i=_e(t);try{const r=await function(l,h){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next(y=>(De(y!==null),_=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,e);FI(i,e,n),VI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Cu(i,r)}catch(r){await wu(r)}}function VI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function FI(t,e,n){const i=_e(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||jI(t,i)})}function jI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Dg(t))}function Yy(t,e,n){for(const i of n)i instanceof NI?(t.La.addReference(i.key,e),aO(t,i)):i instanceof OI?(re("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||jI(t,i.key)):pe()}function aO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(i),Dg(t))}function Dg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Be.fromString(e)),i=t.qa.next();t.Na.set(i,new QN(n)),t.Oa=t.Oa.insert(n,i),AI(t.remoteStore,new vr(hi(hd(n.path)),i,"TargetPurposeLimboResolution",hg.oe))}}async function Cu(t,e,n){const i=_e(t),r=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(p=>{var _;if((p||n)&&i.isPrimaryClient){const y=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){r.push(p);const y=Pg.Wi(d.targetId,p);o.push(y)}}))}),await Promise.all(l),i.Ca.d_(r),await async function(d,p){const _=_e(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(p,T=>Q.forEach(T.$i,S=>_.persistence.referenceDelegate.addReference(y,T.targetId,S)).next(()=>Q.forEach(T.Ui,S=>_.persistence.referenceDelegate.removeReference(y,T.targetId,S)))))}catch(y){if(!Eu(y))throw y;re("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const T=y.targetId;if(!y.fromCache){const S=_.os.get(T),D=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(D);_.os=_.os.insert(T,M)}}}(i.localStore,o))}async function lO(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await II(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new ie(K.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cu(n,i.hs)}}function uO(t,e){const n=_e(t),i=n.Na.get(e);if(i&&i.va)return Ce().add(i.key);{let r=Ce();const o=n.Ma.get(e);if(!o)return r;for(const l of o){const h=n.Fa.get(l);r=r.unionWith(h.view.Va)}return r}}function zI(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rO.bind(null,e),e.Ca.d_=qN.bind(null,e.eventManager),e.Ca.$a=GN.bind(null,e.eventManager),e}function cO(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oO.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return gN(this.persistence,new pN,e.initialUser,this.serializer)}Ga(e){return new hN(Ig.Zr,this.serializer)}Wa(e){return new IN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class Gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lO.bind(null,this.syncEngine),await $N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HN}()}createDatastore(e){const n=_d(e.databaseInfo.databaseId),i=function(o){return new AN(o)}(e.databaseInfo);return function(o,l,h,d){return new RN(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,l,h){return new bN(i,r,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Qy(this.syncEngine,n,0),function(){return Hy.D()?new Hy:new PN}())}createSyncEngine(e,n){return function(r,o,l,h,d,p,_){const y=new YN(r,o,l,h,d,p);return _&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=_e(r);re("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Su(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$i("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Dt.UNAUTHENTICATED,this.clientId=WT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{re("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Rg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function If(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await II(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dO(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>qy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>qy(e.remoteStore,r)),t._onlineComponents=e}async function dO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await If(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),await If(t,new Vh)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await If(t,new Vh);return t._offlineComponents}async function UI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await Xy(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await Xy(t,new Gp))),t._onlineComponents}function fO(t){return UI(t).then(e=>e.syncEngine)}async function Fh(t){const e=await UI(t),n=e.eventManager;return n.onListen=XN.bind(null,e.syncEngine),n.onUnlisten=tO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nO.bind(null,e.syncEngine),n}function pO(t,e,n={}){const i=new Mi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new Mg({next:T=>{_.Za(),l.enqueueAndForget(()=>bg(o,y));const S=T.docs.has(h);!S&&T.fromCache?p.reject(new ie(K.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&d&&d.source==="server"?p.reject(new ie(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),y=new Og(hd(h.path),_,{includeMetadataChanges:!0,_a:!0});return Lg(o,y)}(await Fh(t),t.asyncQueue,e,n,i)),i.promise}function mO(t,e,n={}){const i=new Mi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new Mg({next:T=>{_.Za(),l.enqueueAndForget(()=>bg(o,y)),T.fromCache&&d.source==="server"?p.reject(new ie(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),y=new Og(h,_,{includeMetadataChanges:!0,_a:!0});return Lg(o,y)}(await Fh(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t,e,n){if(!n)throw new ie(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gO(t,e,n,i){if(e===!0&&i===!0)throw new ie(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ew(t){if(!oe.isDocumentKey(t))throw new ie(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tw(t){if(oe.isDocumentKey(t))throw new ie(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wd(t);throw new ie(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nw(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new NL;switch(i.type){case"firstParty":return new VL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Jy.get(n);i&&(re("ComponentProvider","Removing Datastore"),Jy.delete(n),i.terminate())}(this),Promise.resolve()}}function _O(t,e,n,i={}){var r;const o=(t=kn(t,Ed))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Dt.MOCK_USER;else{h=Gx(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ie(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Dt(p)}t._authCredentials=new OL(new $T(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class qt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}}class Rr extends Ms{constructor(e,n,i){super(e,n,hd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new oe(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function lu(t,e,...n){if(t=tt(t),$I("collection","path",e),t instanceof Ed){const i=Be.fromString(e,...n);return tw(i),new Rr(t,null,i)}{if(!(t instanceof qt||t instanceof Rr))throw new ie(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return tw(i),new Rr(t.firestore,null,i)}}function No(t,e,...n){if(t=tt(t),arguments.length===1&&(e=WT.newId()),$I("doc","path",e),t instanceof Ed){const i=Be.fromString(e,...n);return ew(i),new qt(t,null,new oe(i))}{if(!(t instanceof qt||t instanceof Rr))throw new ie(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return ew(i),new qt(t.firestore,t instanceof Rr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new SI(this,"async_queue_retry"),this.Vu=()=>{const i=Tf();i&&re("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Eu(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw $i("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=kg.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function rw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Mr extends Ed{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new iw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iw(e),this._firestoreClient=void 0,await e}}}function vO(t,e){const n=typeof t=="object"?t:Xm(),i=typeof t=="string"?t:"(default)",r=Ns(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Hx("firestore");o&&_O(r,...o)}return r}function Td(t){if(t._terminated)throw new ie(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yO(t),t._firestoreClient}function yO(t){var e,n,i;const r=t._freezeSettings(),o=function(h,d,p,_){return new QL(h,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,BI(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new hO(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(Lt.fromBase64String(e))}catch(n){throw new ie(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ra(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=/^__.*__$/;class EO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Iu(e,this.data,n,this.fieldTransforms)}}class WI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class jg{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HI(this.Cu)&&wO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class TO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||_d(e)}Qu(e,n,i,r=!1){return new jg({Cu:e,methodName:n,qu:i,path:At.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zg(t){const e=t._freezeSettings(),n=_d(t._databaseId);return new TO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IO(t,e,n,i,r,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);Bg("Data must be an object, but it was:",l,i);const h=qI(i,l);let d,p;if(o.merge)d=new cn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const y of o.mergeFields){const T=Kp(e,y,n);if(!l.contains(T))throw new ie(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);KI(_,T)||_.push(T)}d=new cn(_),p=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,p=l.fieldTransforms;return new EO(new Xt(h),d,p)}class Sd extends Pd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}class Ug extends Pd{_toFieldTransform(e){return new Eb(e.path,new su)}isEqual(e){return e instanceof Ug}}function PO(t,e,n,i){const r=t.Qu(1,e,n);Bg("Data must be an object, but it was:",r,i);const o=[],l=Xt.empty();Os(i,(d,p)=>{const _=$g(e,d,n);p=tt(p);const y=r.Nu(_);if(p instanceof Sd)o.push(_);else{const T=Au(p,y);T!=null&&(o.push(_),l.set(_,T))}});const h=new cn(o);return new WI(l,h,r.fieldTransforms)}function SO(t,e,n,i,r,o){const l=t.Qu(1,e,n),h=[Kp(e,i,n)],d=[r];if(o.length%2!=0)throw new ie(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(Kp(e,o[T])),d.push(o[T+1]);const p=[],_=Xt.empty();for(let T=h.length-1;T>=0;--T)if(!KI(p,h[T])){const S=h[T];let D=d[T];D=tt(D);const M=l.Nu(S);if(D instanceof Sd)p.push(S);else{const U=Au(D,M);U!=null&&(p.push(S),_.set(S,U))}}const y=new cn(p);return new WI(_,y,l.fieldTransforms)}function CO(t,e,n,i=!1){return Au(n,t.Qu(i?4:3,e))}function Au(t,e){if(GI(t=tt(t)))return Bg("Unsupported field value:",e,t),qI(t,e);if(t instanceof Pd)return function(i,r){if(!HI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const h of i){let d=Au(h,r.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vb(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=_t.fromDate(i);return{timestampValue:Dh(r.serializer,o)}}if(i instanceof _t){const o=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dh(r.serializer,o)}}if(i instanceof Vg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ra)return{bytesValue:gI(r.serializer,i._byteString)};if(i instanceof qt){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Eg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Fg)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return _g(h.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${wd(i)}`)}(t,e)}function qI(t,e){const n={};return HT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(t,(i,r)=>{const o=Au(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function GI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Vg||t instanceof ra||t instanceof qt||t instanceof Pd||t instanceof Fg)}function Bg(t,e,n){if(!GI(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=wd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Kp(t,e,n){if((e=tt(e))instanceof Id)return e._internalPath;if(typeof e=="string")return $g(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const AO=new RegExp("[~\\*/\\[\\]]");function $g(t,e,n){if(e.search(AO)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Id(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jh(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new ie(K.INVALID_ARGUMENT,h+t+d)}function KI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xO extends ZI{data(){return super.data()}}function Wg(t,e){return typeof e=="string"?$g(t,e):e instanceof Id?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class kO extends Hg{}function RO(t,e,...n){let i=[];e instanceof Hg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof qg).length,h=o.filter(d=>d instanceof Cd).length;if(l>1||l>0&&h>0)throw new ie(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Cd extends kO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Cd(e,n,i)}_apply(e){const n=this._parse(e);return YI(e._query,n),new Ms(e.firestore,e.converter,Fp(e._query,n))}_parse(e){const n=zg(e.firestore);return function(o,l,h,d,p,_,y){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ow(y,_);const S=[];for(const D of y)S.push(sw(d,o,D));T={arrayValue:{values:S}}}else T=sw(d,o,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ow(y,_),T=CO(h,l,y,_==="in"||_==="not-in");return ht.create(p,_,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function LO(t,e,n){const i=e,r=Wg("where",t);return Cd._create(r,i,n)}class qg extends Hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let l=r;const h=o.getFlattenedFilters();for(const d of h)YI(l,d),l=Fp(l,d)}(e._query,n),new Ms(e.firestore,e.converter,Fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sw(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new ie(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eI(e)&&n.indexOf("/")!==-1)throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!oe.isDocumentKey(i))throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Cy(t,new oe(i))}if(n instanceof qt)return Cy(t,n._key);throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(n)}.`)}function ow(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YI(t,e){const n=function(r,o){for(const l of r)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bO{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Os(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>it(l.doubleValue));return new Fg(o)}convertGeoPoint(e){return new Vg(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=fg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){const n=Or(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);De(TI(i));const r=new iu(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return r.isEqual(n)||$i(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XI extends ZI{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Wg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Xc extends XI{data(e={}){return super.data(e)}}class JI{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new gl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Xc(this._firestore,this._userDataWriter,i.key,i,new gl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const d=new Xc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new gl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Xc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new gl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:OO(h.type),doc:d,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){t=kn(t,qt);const e=kn(t.firestore,Mr);return pO(Td(e),t._key).then(n=>iP(e,t,n))}class Gg extends bO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function DO(t){t=kn(t,Ms);const e=kn(t.firestore,Mr),n=Td(e),i=new Gg(e);return QI(t._query),mO(n,t._query).then(r=>new JI(e,i,t,r))}function Pf(t,e,n,...i){t=kn(t,qt);const r=kn(t.firestore,Mr),o=zg(r);let l;return l=typeof(e=tt(e))=="string"||e instanceof Id?SO(o,"updateDoc",t._key,e,n,i):PO(o,"updateDoc",t._key,e),Kg(r,[l.toMutation(t._key,qn.exists(!0))])}function MO(t){return Kg(kn(t.firestore,Mr),[new vg(t._key,qn.none())])}function tP(t,e){const n=kn(t.firestore,Mr),i=No(t),r=NO(t.converter,e);return Kg(n,[IO(zg(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,qn.exists(!1))]).then(()=>i)}function nP(t,...e){var n,i,r;t=tt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||rw(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(rw(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let d,p,_;if(t instanceof qt)p=kn(t.firestore,Mr),_=hd(t._key.path),d={next:y=>{e[l]&&e[l](iP(p,t,y))},error:e[l+1],complete:e[l+2]};else{const y=kn(t,Ms);p=kn(y.firestore,Mr),_=y._query;const T=new Gg(p);d={next:S=>{e[l]&&e[l](new JI(p,T,y,S))},error:e[l+1],complete:e[l+2]},QI(t._query)}return function(T,S,D,M){const U=new Mg(M),k=new Og(S,U,D);return T.asyncQueue.enqueueAndForget(async()=>Lg(await Fh(T),k)),()=>{U.Za(),T.asyncQueue.enqueueAndForget(async()=>bg(await Fh(T),k))}}(Td(p),_,h,d)}function Kg(t,e){return function(i,r){const o=new Mi;return i.asyncQueue.enqueueAndForget(async()=>iO(await fO(i),r,o)),o.promise}(Td(t),e)}function iP(t,e,n){const i=n.docs.get(e._key),r=new Gg(t);return new XI(t,r,e._key,i,new gl(n.hasPendingWrites,n.fromCache),e.converter)}function VO(){return new Ug("serverTimestamp")}(function(e,n=!0){(function(r){da=r})(ca),fi(new Kn("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Mr(new DL(i.getProvider("auth-internal")),new jL(i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(p.options.projectId,_)}(l,r),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),xn(Ey,"4.7.3",e),xn(Ey,"4.7.3","esm2017")})();const rP="@firebase/installations",Zg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=1e4,oP=`w:${Zg}`,aP="FIS_v2",FO="https://firebaseinstallations.googleapis.com/v1",jO=60*60*1e3,zO="installations",UO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},As=new bs(zO,UO,BO);function lP(t){return t instanceof Qn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP({projectId:t}){return`${FO}/projects/${t}/installations`}function cP(t){return{token:t.token,requestStatus:2,expiresIn:WO(t.expiresIn),creationTime:Date.now()}}async function hP(t,e){const i=(await e.json()).error;return As.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function dP({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $O(t,{refreshToken:e}){const n=dP(t);return n.append("Authorization",HO(e)),n}async function fP(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WO(t){return Number(t.replace("s","000"))}function HO(t){return`${aP} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=uP(t),r=dP(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={fid:n,authVersion:aP,appId:t.appId,sdkVersion:oP},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await fP(()=>fetch(i,h));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:cP(p.authToken)}}else throw await hP("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=/^[cdef][\w-]{21}$/,Zp="";function ZO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=QO(t);return KO.test(n)?n:Zp}catch{return Zp}}function QO(t){return GO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=new Map;function gP(t,e){const n=Ad(t);_P(n,e),YO(n,e)}function _P(t,e){const n=mP.get(t);if(n)for(const i of n)i(e)}function YO(t,e){const n=XO();n&&n.postMessage({key:t,fid:e}),JO()}let fs=null;function XO(){return!fs&&"BroadcastChannel"in self&&(fs=new BroadcastChannel("[Firebase] FID Change"),fs.onmessage=t=>{_P(t.data.key,t.data.fid)}),fs}function JO(){mP.size===0&&fs&&(fs.close(),fs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebase-installations-database",tD=1,xs="firebase-installations-store";let Sf=null;function Qg(){return Sf||(Sf=YE(eD,tD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xs)}}})),Sf}async function zh(t,e){const n=Ad(t),r=(await Qg()).transaction(xs,"readwrite"),o=r.objectStore(xs),l=await o.get(n);return await o.put(e,n),await r.done,(!l||l.fid!==e.fid)&&gP(t,e.fid),e}async function vP(t){const e=Ad(t),i=(await Qg()).transaction(xs,"readwrite");await i.objectStore(xs).delete(e),await i.done}async function xd(t,e){const n=Ad(t),r=(await Qg()).transaction(xs,"readwrite"),o=r.objectStore(xs),l=await o.get(n),h=e(l);return h===void 0?await o.delete(n):await o.put(h,n),await r.done,h&&(!l||l.fid!==h.fid)&&gP(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yg(t){let e;const n=await xd(t.appConfig,i=>{const r=nD(i),o=iD(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Zp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nD(t){const e=t||{fid:ZO(),registrationStatus:0};return yP(e)}function iD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(As.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=rD(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sD(t)}:{installationEntry:e}}async function rD(t,e){try{const n=await qO(t,e);return zh(t.appConfig,n)}catch(n){throw lP(n)&&n.customData.serverCode===409?await vP(t.appConfig):await zh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function sD(t){let e=await aw(t.appConfig);for(;e.registrationStatus===1;)await pP(100),e=await aw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Yg(t);return i||n}return e}function aw(t){return xd(t,e=>{if(!e)throw As.create("installation-not-found");return yP(e)})}function yP(t){return oD(t)?{fid:t.fid,registrationStatus:0}:t}function oD(t){return t.registrationStatus===1&&t.registrationTime+sP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD({appConfig:t,heartbeatServiceProvider:e},n){const i=lD(t,n),r=$O(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={installation:{sdkVersion:oP,appId:t.appId}},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await fP(()=>fetch(i,h));if(d.ok){const p=await d.json();return cP(p)}else throw await hP("Generate Auth Token",d)}function lD(t,{fid:e}){return`${uP(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xg(t,e=!1){let n;const i=await xd(t.appConfig,o=>{if(!wP(o))throw As.create("not-registered");const l=o.authToken;if(!e&&hD(l))return o;if(l.requestStatus===1)return n=uD(t,e),o;{if(!navigator.onLine)throw As.create("app-offline");const h=fD(o);return n=cD(t,h),h}});return n?await n:i.authToken}async function uD(t,e){let n=await lw(t.appConfig);for(;n.authToken.requestStatus===1;)await pP(100),n=await lw(t.appConfig);const i=n.authToken;return i.requestStatus===0?Xg(t,e):i}function lw(t){return xd(t,e=>{if(!wP(e))throw As.create("not-registered");const n=e.authToken;return pD(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function cD(t,e){try{const n=await aD(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await zh(t.appConfig,i),n}catch(n){if(lP(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await vP(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await zh(t.appConfig,i)}throw n}}function wP(t){return t!==void 0&&t.registrationStatus===2}function hD(t){return t.requestStatus===2&&!dD(t)}function dD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+jO}function fD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function pD(t){return t.requestStatus===1&&t.requestTime+sP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(t){const e=t,{installationEntry:n,registrationPromise:i}=await Yg(e);return i?i.catch(console.error):Xg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e=!1){const n=t;return await _D(n),(await Xg(n,e)).token}async function _D(t){const{registrationPromise:e}=await Yg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){if(!t||!t.options)throw Cf("App Configuration");if(!t.name)throw Cf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Cf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Cf(t){return As.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="installations",yD="installations-internal",wD=t=>{const e=t.getProvider("app").getImmediate(),n=vD(e),i=Ns(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},ED=t=>{const e=t.getProvider("app").getImmediate(),n=Ns(e,EP).getImmediate();return{getId:()=>mD(n),getToken:r=>gD(n,r)}};function TD(){fi(new Kn(EP,wD,"PUBLIC")),fi(new Kn(yD,ED,"PRIVATE"))}TD();xn(rP,Zg);xn(rP,Zg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="analytics",ID="firebase_id",PD="origin",SD=60*1e3,CD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn=new od("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},dn=new bs("analytics","Analytics",AD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){if(!t.startsWith(Jg)){const e=dn.create("invalid-gtag-resource",{gtagURL:t});return rn.warn(e.message),""}return t}function TP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kD(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function RD(t,e){const n=kD("firebase-js-sdk-policy",{createScriptURL:xD}),i=document.createElement("script"),r=`${Jg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function LD(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function bD(t,e,n,i,r,o){const l=i[r];try{if(l)await e[l];else{const d=(await TP(n)).find(p=>p.measurementId===r);d&&await e[d.appId]}}catch(h){rn.error(h)}t("config",r,o)}async function ND(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const h=await TP(n);for(const d of l){const p=h.find(y=>y.measurementId===d),_=p&&e[p.appId];if(_)o.push(_);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){rn.error(o)}}function OD(t,e,n,i){async function r(o,...l){try{if(o==="event"){const[h,d]=l;await ND(t,e,n,h,d)}else if(o==="config"){const[h,d]=l;await bD(t,e,n,i,h,d)}else if(o==="consent"){const[h,d]=l;t("consent",h,d)}else if(o==="get"){const[h,d,p]=l;t("get",h,d,p)}else if(o==="set"){const[h]=l;t("set",h)}else t(o,...l)}catch(h){rn.error(h)}}return r}function DD(t,e,n,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=OD(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function MD(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Jg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=30,FD=1e3;class jD{constructor(e={},n=FD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const IP=new jD;function zD(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function UD(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:zD(i)},o=CD.replace("{app-id}",n),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let h="";try{const d=await l.json();!((e=d.error)===null||e===void 0)&&e.message&&(h=d.error.message)}catch{}throw dn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function BD(t,e=IP,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw dn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw dn.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new HD;return setTimeout(async()=>{h.abort()},SD),PP({appId:i,apiKey:r,measurementId:o},l,h,e)}async function PP(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=IP){var o;const{appId:l,measurementId:h}=t;try{await $D(i,e)}catch(d){if(h)return rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:h};throw d}try{const d=await UD(t);return r.deleteThrottleMetadata(l),d}catch(d){const p=d;if(!WD(p)){if(r.deleteThrottleMetadata(l),h)return rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:h};throw d}const _=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?qv(n,r.intervalMillis,VD):qv(n,r.intervalMillis),y={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return r.setThrottleMetadata(l,y),rn.debug(`Calling attemptFetch again in ${_} millis`),PP(t,y,i,r)}}function $D(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function WD(t){if(!(t instanceof Qn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class HD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qD(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,l=Object.assign(Object.assign({},i),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(){if(GE())try{await KE()}catch(t){return rn.warn(dn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return rn.warn(dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function KD(t,e,n,i,r,o,l){var h;const d=BD(t);d.then(S=>{n[S.measurementId]=S.appId,t.options.measurementId&&S.measurementId!==t.options.measurementId&&rn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>rn.error(S)),e.push(d);const p=GD().then(S=>{if(S)return i.getId()}),[_,y]=await Promise.all([d,p]);MD(o)||RD(o,_.measurementId),r("js",new Date);const T=(h=l==null?void 0:l.config)!==null&&h!==void 0?h:{};return T[PD]="firebase",T.update=!0,y!=null&&(T[ID]=y),r("config",_.measurementId,T),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.app=e}_delete(){return delete Ll[this.app.options.appId],Promise.resolve()}}let Ll={},uw=[];const cw={};let Af="dataLayer",QD="gtag",hw,SP,dw=!1;function YD(){const t=[];if(qE()&&t.push("This is a browser extension environment."),ek()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=dn.create("invalid-analytics-context",{errorInfo:e});rn.warn(n.message)}}function XD(t,e,n){YD();const i=t.options.appId;if(!i)throw dn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw dn.create("no-api-key");if(Ll[i]!=null)throw dn.create("already-exists",{id:i});if(!dw){LD(Af);const{wrappedGtag:o,gtagCore:l}=DD(Ll,uw,cw,Af,QD);SP=o,hw=l,dw=!0}return Ll[i]=KD(t,uw,cw,e,hw,Af,n),new ZD(t)}function JD(t=Xm()){t=tt(t);const e=Ns(t,Uh);return e.isInitialized()?e.getImmediate():eM(t)}function eM(t,e={}){const n=Ns(t,Uh);if(n.isInitialized()){const r=n.getImmediate();if(Xl(e,n.getOptions()))return r;throw dn.create("already-initialized")}return n.initialize({options:e})}function tM(t,e,n,i){t=tt(t),qD(SP,Ll[t.app.options.appId],e,n,i).catch(r=>rn.error(r))}const fw="@firebase/analytics",pw="0.10.8";function nM(){fi(new Kn(Uh,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return XD(i,r,n)},"PUBLIC")),fi(new Kn("analytics-internal",t,"PRIVATE")),xn(fw,pw),xn(fw,pw,"esm2017");function t(e){try{const n=e.getProvider(Uh).getImmediate();return{logEvent:(i,r,o)=>tM(n,i,r,o)}}catch(n){throw dn.create("interop-component-reg-failed",{reason:n})}}}nM();const iM={apiKey:"AIzaSyA-ZR_VWGeaRLHT-NX-ly4L95GiGrIMCqY",authDomain:"pilani-trails-84cef.firebaseapp.com",projectId:"pilani-trails-84cef",storageBucket:"pilani-trails-84cef.firebasestorage.app",messagingSenderId:"110096860877",appId:"1:110096860877:web:b23c4b91a6f05cf0ac0b84",measurementId:"G-CG49XPR3LQ"},e_=XE(iM),pr=kL(e_),si=vO(e_);let rM=null;try{rM=JD(e_)}catch(t){console.warn("Firebase Analytics initialization failed:",t)}const t_=W.createContext({}),Vs=()=>W.useContext(t_),sM=({children:t})=>{const[e,n]=W.useState(null),[i,r]=W.useState(!0),o=async(_,y,T)=>{const S=await IT(pr,_,y);return T&&await g1(S.user,{displayName:T}),S},l=(_,y)=>p1(pr,_,y),h=()=>{const _=new ai;return DT(pr,_)},d=()=>PT(pr);W.useEffect(()=>y1(pr,async y=>{if(y)try{console.log("[AuthContext] user signed in:",y.email,"uid:",y.uid);const T=No(si,"users",y.uid),S=await eP(T),D=S&&S.exists()?S.data():{};typeof D.isAdmin=="string"&&(D.isAdmin=D.isAdmin.toLowerCase()==="true"),n({...y,...D}),console.log("[AuthContext] userData from Firestore:",D)}catch(T){console.error("[AuthContext] Error loading user data from Firestore:",T),n(y)}else console.log("[AuthContext] no user logged in"),n(null);r(!1)}),[]);const p={currentUser:e,signup:o,login:l,signInWithGoogle:h,logout:d,loading:i};return E.jsx(t_.Provider,{value:p,children:!i&&t})},xf=({children:t})=>{const{currentUser:e,loading:n}=Vs();return n?E.jsx("div",{children:"Loading..."}):e?t:E.jsx(jE,{to:"/login",replace:!0})};function oM(t){return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true":!1}const aM=({children:t})=>{const{currentUser:e,loading:n}=Vs();return n?E.jsx("div",{style:{padding:20},children:"Checking admin permissions..."}):e?oM(e)?t:E.jsxs("div",{style:{padding:24,textAlign:"center"},children:[E.jsx("h2",{children:"Access Denied"}),E.jsx("p",{children:"You must be an admin to access this page."})]}):E.jsx(jE,{to:"/login",replace:!0})},lM="/pilani-trails/assets/logo-ByW2n5sB.jpg",uM=()=>{const{currentUser:t}=Vs(),e=ua(),[n,i]=W.useState(!1);console.log("[Header] currentUser:",t);const r=async()=>{try{await PT(pr),e("/login")}catch(h){console.error("Logout failed:",h)}},o=()=>i(h=>!h),l=t&&(t.role==="admin"||t.isAdmin===!0||t.email==="admin@pilanitrails.com");return E.jsx("header",{className:"app-header",children:E.jsx("nav",{className:"header-nav",children:E.jsxs("div",{className:"header-inner",children:[E.jsx("div",{className:"nav-brand",children:E.jsx(Wt,{to:"/",className:"brand-link",onClick:()=>i(!1),children:E.jsx("img",{src:lM,alt:"Pilani Trails Logo",className:"brand-logo"})})}),E.jsx("button",{className:"menu-toggle",onClick:o,"aria-label":"Toggle menu",children:n?E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[E.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),E.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),E.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),E.jsxs("ul",{className:`nav-links ${n?"open":""}`,children:[E.jsx("li",{children:E.jsx(Wt,{to:"/",onClick:()=>i(!1),children:"Home"})}),t?E.jsxs(E.Fragment,{children:[E.jsx("li",{children:E.jsx(Wt,{to:"/dashboard",onClick:()=>i(!1),children:"Dashboard"})}),E.jsx("li",{children:E.jsx(Wt,{to:"/propose",onClick:()=>i(!1),children:"Propose Location"})}),l&&E.jsx("li",{children:E.jsx(Wt,{to:"/admin-review",onClick:()=>i(!1),children:"Admin Review"})}),E.jsx("li",{children:E.jsx("button",{onClick:r,className:"logout-btn",children:"Logout"})})]}):E.jsxs(E.Fragment,{children:[E.jsx("li",{children:E.jsx(Wt,{to:"/login",onClick:()=>i(!1),children:"Login"})}),E.jsx("li",{children:E.jsx(Wt,{to:"/signup",onClick:()=>i(!1),children:"Signup"})})]})]})]})})})};function CP(t,e){const n=W.useRef(e);W.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const cM=1;function hM(t){return Object.freeze({__version:cM,map:t})}function dM(t,e){return Object.freeze({...t,...e})}const AP=W.createContext(null),xP=AP.Provider;function n_(){const t=W.useContext(AP);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function fM(t){function e(n,i){const{instance:r,context:o}=t(n).current;return W.useImperativeHandle(i,()=>r),n.children==null?null:bl.createElement(xP,{value:o},n.children)}return W.forwardRef(e)}function pM(t){function e(n,i){const[r,o]=W.useState(!1),{instance:l}=t(n,o).current;W.useImperativeHandle(i,()=>l),W.useEffect(function(){r&&l.update()},[l,r,n.children]);const h=l._contentNode;return h?xE.createPortal(n.children,h):null}return W.forwardRef(e)}function mM(t){function e(n,i){const{instance:r}=t(n).current;return W.useImperativeHandle(i,()=>r),null}return W.forwardRef(e)}function kP(t,e){const n=W.useRef();W.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function i_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function gM(t,e){return function(i,r){const o=n_(),l=t(i_(i,o),o);return CP(o.map,i.attribution),kP(l.current,i.eventHandlers),e(l.current,o,i,r),l}}var Qp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(cS,function(n){var i="1.9.4";function r(s){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)s[a]=g[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var f=c.call(arguments,2);return function(){return s.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function p(s,a,c){var f,g,w,N;return N=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(s.apply(c,arguments),setTimeout(N,a),f=!0)},w}function _(s,a,c){var f=a[1],g=a[0],w=f-g;return s===f&&c?s:((s-g)%w+w)%w+g}function y(){return!1}function T(s,a){if(a===!1)return s;var c=Math.pow(10,a===void 0?6:a);return Math.round(s*c)/c}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function D(s){return S(s).split(/\s+/)}function M(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var c in a)s.options[c]=a[c];return s.options}function U(s,a,c){var f=[];for(var g in s)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function A(s,a){return s.replace(k,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var O=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function H(s,a){for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var C=0;function P(s){var a=+new Date,c=Math.max(0,16-(a-C));return C=a+c,window.setTimeout(s,c)}var x=window.requestAnimationFrame||q("RequestAnimationFrame")||P,R=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,a,c){if(c&&x===P)s.call(a);else return x.call(window,l(s,a))}function F(s){s&&R.call(window,s)}var b={__proto__:null,extend:r,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:_,falseFn:y,formatNum:T,trim:S,splitWords:D,setOptions:M,getParamString:U,template:A,isArray:O,indexOf:H,emptyImageUrl:X,requestFn:x,cancelFn:R,requestAnimFrame:V,cancelAnimFrame:F};function ze(){}ze.extend=function(s){var a=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return s.statics&&r(a,s.statics),s.includes&&(dt(s.includes),r.apply(null,[f].concat(s.includes))),r(f,s),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},r(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,N=f._initHooks.length;w<N;w++)f._initHooks[w].call(this)}},a},ze.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},ze.mergeOptions=function(s){return r(this.prototype.options,s),this},ze.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function dt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=O(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ft={on:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a);else{s=D(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],a,c)}return this},off:function(s,a,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],a);else{s=D(s);for(var g=arguments.length===1,w=0,N=s.length;w<N;w++)g?this._off(s[w]):this._off(s[w],a,c)}return this},_on:function(s,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,a,c){var f,g,w;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=y;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var N=this._listens(s,a,c);if(N!==!1){var z=f[N];this._firingCount&&(z.fn=y,this._events[s]=f=f.slice()),f.splice(N,1)}}},fire:function(s,a,c){if(!this.listens(s,c))return this;var f=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,N=g.length;w<N;w++){var z=g[w],B=z.fn;z.once&&this.off(s,B,z.ctx),B.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(s,a,c,f){typeof s!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,g,c)!==!1)return!0;if(f){for(var N in this._eventParents)if(this._eventParents[N].listens(s,a,c,f))return!0}return!1},_listens:function(s,a,c){if(!this._events)return!1;var f=this._events[s]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a,!0);else{s=D(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],a,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};ft.addEventListener=ft.on,ft.removeEventListener=ft.clearAllEventListeners=ft.off,ft.addOneTimeEventListener=ft.once,ft.fireEvent=ft.fire,ft.hasEventListeners=ft.listens;var zt=ze.extend(ft);function G(s,a,c){this.x=c?Math.round(s):s,this.y=c?Math.round(a):a}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=J(s);var a=s.x-this.x,c=s.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function J(s,a,c){return s instanceof G?s:O(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,a,c)}function de(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}de.prototype={extend:function(s){var a,c;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)a=c=J(s);else if(s=ye(s),a=s.min,c=s.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,c;return typeof s[0]=="number"||s instanceof G?s=J(s):s=ye(s),s instanceof de?(a=s.min,c=s.max):a=c=s,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,w=g.x>=a.x&&f.x<=c.x,N=g.y>=a.y&&f.y<=c.y;return w&&N},overlaps:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,w=g.x>a.x&&f.x<c.x,N=g.y>a.y&&f.y<c.y;return w&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*s,g=Math.abs(a.y-c.y)*s;return ye(J(a.x-f,a.y-g),J(c.x+f,c.y+g))},equals:function(s){return s?(s=ye(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ye(s,a){return!s||s instanceof de?s:new de(s,a)}function Pe(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}Pe.prototype={extend:function(s){var a=this._southWest,c=this._northEast,f,g;if(s instanceof we)f=s,g=s;else if(s instanceof Pe){if(f=s._southWest,g=s._northEast,!f||!g)return this}else return s?this.extend(me(s)||be(s)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(s){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*s,g=Math.abs(a.lng-c.lng)*s;return new Pe(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=me(s):s=be(s);var a=this._southWest,c=this._northEast,f,g;return s instanceof Pe?(f=s.getSouthWest(),g=s.getNorthEast()):f=g=s,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(s){s=be(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,N=g.lng>=a.lng&&f.lng<=c.lng;return w&&N},overlaps:function(s){s=be(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,N=g.lng>a.lng&&f.lng<c.lng;return w&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=be(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(s,a){return s instanceof Pe?s:new Pe(s,a)}function we(s,a,c){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(s,a){if(!s)return!1;s=me(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+T(this.lat,s)+", "+T(this.lng,s)+")"},distanceTo:function(s){return Yn.distance(this,me(s))},wrap:function(){return Yn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,c=a/Math.cos(Math.PI/180*this.lat);return be([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function me(s,a,c){return s instanceof we?s:O(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new we(s,a,c)}var pt={latLngToPoint:function(s,a){var c=this.projection.project(s),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(s,a){var c=this.scale(a),f=this.transformation.untransform(s,c);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(s),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new de(f,g)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new we(c,a,f)},wrapLatLngBounds:function(s){var a=s.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return s;var w=s.getSouthWest(),N=s.getNorthEast(),z=new we(w.lat-f,w.lng-g),B=new we(N.lat-f,N.lng-g);return new Pe(z,B)}},Yn=r({},pt,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var c=Math.PI/180,f=s.lat*c,g=a.lat*c,w=Math.sin((a.lat-s.lat)*c/2),N=Math.sin((a.lng-s.lng)*c/2),z=w*w+Math.cos(f)*Math.cos(g)*N*N,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),xu=6378137,Gi={R:xu,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,s.lat),-c),g=Math.sin(f*a);return new G(this.R*s.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=xu*Math.PI;return new de([-s,-s],[s,s])}()};function Ki(s,a,c,f){if(O(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=c,this._d=f}Ki.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new G((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function mi(s,a,c,f){return new Ki(s,a,c,f)}var Hr=r({},Yn,{code:"EPSG:3857",projection:Gi,transformation:function(){var s=.5/(Math.PI*Gi.R);return mi(s,.5,-s,.5)}()}),ga=r({},Hr,{code:"EPSG:900913"});function Fs(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function _a(s,a){var c="",f,g,w,N,z,B;for(f=0,w=s.length;f<w;f++){for(z=s[f],g=0,N=z.length;g<N;g++)B=z[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var va=document.documentElement.style,js="ActiveXObject"in window,ku=js&&!document.addEventListener,zs="msLaunchUri"in navigator&&!("documentMode"in document),Us=gn("webkit"),Ru=gn("android"),Bs=gn("android 2")||gn("android 3"),ya=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Lu=Ru&&gn("Google")&&ya<537&&!("AudioNode"in window),ot=!!window.opera,vt=!zs&&gn("chrome"),qr=gn("gecko")&&!Us&&!ot&&!js,bu=!vt&&gn("safari"),wa=gn("phantom"),Nu="OTransition"in va,Gr=navigator.platform.indexOf("Win")===0,Ea=js&&"transition"in va,$s="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Bs,Ws="MozPerspective"in va,Ld=!window.L_DISABLE_3D&&(Ea||$s||Ws)&&!Nu&&!wa,Kr=typeof orientation<"u"||gn("mobile"),Ta=Kr&&Us,Ou=Kr&&$s,Ia=!window.PointerEvent&&window.MSPointerEvent,Zi=!!(window.PointerEvent||Ia),Hs="ontouchstart"in window||!!window.TouchEvent,Pa=!window.L_NO_TOUCH&&(Hs||Zi),gi=Kr&&ot,Du=Kr&&qr,qs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mu=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return s}(),Zr=function(){return!!document.createElement("canvas").getContext}(),Gs=!!(document.createElementNS&&Fs("svg").createSVGRect),Pt=!!Gs&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Vu=!Gs&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Qr=navigator.platform.indexOf("Mac")===0,Yr=navigator.platform.indexOf("Linux")===0;function gn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:js,ielt9:ku,edge:zs,webkit:Us,android:Ru,android23:Bs,androidStock:Lu,opera:ot,chrome:vt,gecko:qr,safari:bu,phantom:wa,opera12:Nu,win:Gr,ie3d:Ea,webkit3d:$s,gecko3d:Ws,any3d:Ld,mobile:Kr,mobileWebkit:Ta,mobileWebkit3d:Ou,msPointer:Ia,pointer:Zi,touch:Pa,touchNative:Hs,mobileOpera:gi,mobileGecko:Du,retina:qs,passiveEvents:Mu,canvas:Zr,svg:Gs,vml:Vu,inlineSvg:Pt,mac:Qr,linux:Yr},_i=se.msPointer?"MSPointerDown":"pointerdown",Fu=se.msPointer?"MSPointerMove":"pointermove",ju=se.msPointer?"MSPointerUp":"pointerup",Xr=se.msPointer?"MSPointerCancel":"pointercancel",Ks={touchstart:_i,touchmove:Fu,touchend:ju,touchcancel:Xr},Zs={touchstart:Ys,touchmove:Qs,touchend:Qs,touchcancel:Qs},Nn={},On=!1;function zu(s,a,c){return a==="touchstart"&&Bu(),Zs[a]?(c=Zs[a].bind(this,c),s.addEventListener(Ks[a],c,!1),c):(console.warn("wrong event specified:",a),y)}function Uu(s,a,c){if(!Ks[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(Ks[a],c,!1)}function Sa(s){Nn[s.pointerId]=s}function Ca(s){Nn[s.pointerId]&&(Nn[s.pointerId]=s)}function Aa(s){delete Nn[s.pointerId]}function Bu(){On||(document.addEventListener(_i,Sa,!0),document.addEventListener(Fu,Ca,!0),document.addEventListener(ju,Aa,!0),document.addEventListener(Xr,Aa,!0),On=!0)}function Qs(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Nn)a.touches.push(Nn[c]);a.changedTouches=[a],s(a)}}function Ys(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&Ge(a),Qs(s,a)}function $u(s){var a={},c,f;for(f in s)c=s[f],a[f]=c&&c.bind?c.bind(s):c;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var xa=200;function Jr(s,a){s.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var N=za(w);if(!(N.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!N.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=xa?(f++,f===2&&a($u(w))):f=1,c=z}}}return s.addEventListener("click",g),{dblclick:a,simDblclick:g}}function vi(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var es=wi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ts=wi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ka=ts==="webkitTransition"||ts==="OTransition"?ts+"End":"transitionend";function Ra(s){return typeof s=="string"?document.getElementById(s):s}function Qi(s,a){var c=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);c=f?f[a]:null}return c==="auto"?null:c}function Se(s,a,c){var f=document.createElement(s);return f.className=a||"",c&&c.appendChild(f),f}function Fe(s){var a=s.parentNode;a&&a.removeChild(s)}function ns(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function yi(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function Yi(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function La(s,a){if(s.classList!==void 0)return s.classList.contains(a);var c=_n(s);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ve(s,a){if(s.classList!==void 0)for(var c=D(a),f=0,g=c.length;f<g;f++)s.classList.add(c[f]);else if(!La(s,a)){var w=_n(s);ba(s,(w?w+" ":"")+a)}}function We(s,a){s.classList!==void 0?s.classList.remove(a):ba(s,S((" "+_n(s)+" ").replace(" "+a+" "," ")))}function ba(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function _n(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Je(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&Xs(s,a)}function Xs(s,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):s.style.filter+=" progid:"+f+"(opacity="+a+")"}function wi(s){for(var a=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in a)return s[c];return!1}function Xn(s,a,c){var f=a||new G(0,0);s.style[es]=(se.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function fe(s,a){s._leaflet_pos=a,se.any3d?Xn(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function vn(s){return s._leaflet_pos||new G(0,0)}var Dn,Mn,Na;if("onselectstart"in document)Dn=function(){le(window,"selectstart",Ge)},Mn=function(){Me(window,"selectstart",Ge)};else{var Xi=wi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Dn=function(){if(Xi){var s=document.documentElement.style;Na=s[Xi],s[Xi]="none"}},Mn=function(){Xi&&(document.documentElement.style[Xi]=Na,Na=void 0)}}function Oa(){le(window,"dragstart",Ge)}function Da(){Me(window,"dragstart",Ge)}var Js,Ma;function Ei(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(sn(),Js=s,Ma=s.style.outlineStyle,s.style.outlineStyle="none",le(window,"keydown",sn))}function sn(){Js&&(Js.style.outlineStyle=Ma,Js=void 0,Ma=void 0,Me(window,"keydown",sn))}function Va(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function eo(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var Wu={__proto__:null,TRANSFORM:es,TRANSITION:ts,TRANSITION_END:ka,get:Ra,getStyle:Qi,create:Se,remove:Fe,empty:ns,toFront:yi,toBack:Yi,hasClass:La,addClass:ve,removeClass:We,setClass:ba,getClass:_n,setOpacity:Je,testProp:wi,setTransform:Xn,setPosition:fe,getPosition:vn,get disableTextSelection(){return Dn},get enableTextSelection(){return Mn},disableImageDrag:Oa,enableImageDrag:Da,preventOutline:Ei,restoreOutline:sn,getSizedParentNode:Va,getScale:eo};function le(s,a,c,f){if(a&&typeof a=="object")for(var g in a)Fa(s,g,a[g],c);else{a=D(a);for(var w=0,N=a.length;w<N;w++)Fa(s,a[w],c,f)}return this}var yn="_leaflet_events";function Me(s,a,c,f){if(arguments.length===1)Hu(s),delete s[yn];else if(a&&typeof a=="object")for(var g in a)ja(s,g,a[g],c);else if(a=D(a),arguments.length===2)Hu(s,function(z){return H(a,z)!==-1});else for(var w=0,N=a.length;w<N;w++)ja(s,a[w],c,f);return this}function Hu(s,a){for(var c in s[yn]){var f=c.split(/\d/)[0];(!a||a(f))&&ja(s,f,null,null,c)}}var wn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fa(s,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(s[yn]&&s[yn][g])return this;var w=function(z){return c.call(f||s,z||window.event)},N=w;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?w=zu(s,a,w):se.touch&&a==="dblclick"?w=Jr(s,w):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(wn[a]||a,w,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(z){z=z||window.event,Ua(s,z)&&N(z)},s.addEventListener(wn[a],w,!1)):s.addEventListener(a,N,!1):s.attachEvent("on"+a,w),s[yn]=s[yn]||{},s[yn][g]=w}function ja(s,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=s[yn]&&s[yn][g];if(!w)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?Uu(s,a,w):se.touch&&a==="dblclick"?vi(s,w):"removeEventListener"in s?s.removeEventListener(wn[a]||a,w,!1):s.detachEvent("on"+a,w),s[yn][g]=null}function En(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Ji(s){return Fa(s,"wheel",En),this}function er(s){return le(s,"mousedown touchstart dblclick contextmenu",En),s._leaflet_disable_click=!0,this}function Ge(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function on(s){return Ge(s),En(s),this}function za(s){if(s.composedPath)return s.composedPath();for(var a=[],c=s.target;c;)a.push(c),c=c.parentNode;return a}function to(s,a){if(!a)return new G(s.clientX,s.clientY);var c=eo(a),f=c.boundingClientRect;return new G((s.clientX-f.left)/c.x-a.clientLeft,(s.clientY-f.top)/c.y-a.clientTop)}var He=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qu(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/He:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ua(s,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var Gu={__proto__:null,on:le,off:Me,stopPropagation:En,disableScrollPropagation:Ji,disableClickPropagation:er,preventDefault:Ge,stop:on,getPropagationPath:za,getMousePosition:to,getWheelDelta:qu,isExternalTarget:Ua,addListener:le,removeListener:Me},Ba=zt.extend({run:function(s,a,c,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=vn(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var c=this._startPos.add(this._offset.multiplyBy(s));a&&c._round(),fe(this._el,c),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Te=zt.extend({options:{crs:Hr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=M(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(me(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ts&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,ka,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(me(s),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=r({animate:c.animate},c.zoom),c.pan=r({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,c.zoom):this._tryAnimatedPan(s,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=s instanceof G?s:this.latLngToContainerPoint(s),N=w.subtract(g).multiplyBy(1-1/f),z=this.containerPointToLatLng(g.add(N));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():be(s);var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(s,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),N=this.project(s.getSouthWest(),g),z=this.project(s.getNorthEast(),g),B=this.unproject(N.add(z).divideBy(2).add(w),g);return{center:B,zoom:g}},fitBounds:function(s,a){if(s=be(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=J(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ba,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(s,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(s),w=this.getSize(),N=this._zoom;s=me(s),a=a===void 0?N:a;var z=Math.max(w.x,w.y),B=z*this.getZoomScale(N,a),Z=g.distanceTo(f)||1,te=1.42,ue=te*te;function Ee(lt){var uc=lt?-1:1,sS=lt?B:z,oS=B*B-z*z+uc*ue*ue*Z*Z,aS=2*sS*ue*Z,Fd=oS/aS,C_=Math.sqrt(Fd*Fd+1)-Fd,lS=C_<1e-9?-18:Math.log(C_);return lS}function Bt(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function wt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function In(lt){return Bt(lt)/wt(lt)}var Qt=Ee(0);function mo(lt){return z*(wt(Qt)/wt(Qt+te*lt))}function tS(lt){return z*(wt(Qt)*In(Qt+te*lt)-Bt(Qt))/ue}function nS(lt){return 1-Math.pow(1-lt,1.5)}var iS=Date.now(),P_=(Ee(1)-Qt)/te,rS=c.duration?1e3*c.duration:1e3*P_*.8;function S_(){var lt=(Date.now()-iS)/rS,uc=nS(lt)*P_;lt<=1?(this._flyToFrame=V(S_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(tS(uc)/Z)),N),this.getScaleZoom(z/mo(uc),N),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),S_.call(this),this},flyToBounds:function(s,a){var c=this._getBoundsCenterZoom(s,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(s){return s=be(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,be(s));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(s),N=this.getPixelBounds(),z=ye([N.min.add(c),N.max.subtract(f)]),B=z.getSize();if(!z.contains(w)){this._enforcingBounds=!0;var Z=w.subtract(z.getCenter()),te=z.extend(w).getSize().subtract(B);g.x+=Z.x<0?-te.x:te.x,g.y+=Z.y<0?-te.y:te.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,s):navigator.geolocation.getCurrentPosition(a,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,c=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,c=s.coords.longitude,f=new we(a,c),g=f.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var N=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(N,w.maxZoom):N)}var z={latlng:f,bounds:g,timestamp:s.timestamp};for(var B in s.coords)typeof s.coords[B]=="number"&&(z[B]=s.coords[B]);this.fire("locationfound",z)}},addHandler:function(s,a){if(!a)return this;var c=this[s]=new a(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Fe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Fe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=Se("div",c,a||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new Pe(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,c){s=be(s),c=J(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),N=s.getNorthWest(),z=s.getSouthEast(),B=this.getSize().subtract(c),Z=ye(this.project(z,f),this.project(N,f)).getSize(),te=se.any3d?this.options.zoomSnap:1,ue=B.x/Z.x,Ee=B.y/Z.y,Bt=a?Math.max(ue,Ee):Math.min(ue,Ee);return f=this.getScaleZoom(Bt,f),te&&(f=Math.round(f/(te/100))*(te/100),f=a?Math.ceil(f/te)*te:Math.floor(f/te)*te),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var c=this._getTopLeftPoint(s,a);return new de(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(s)/c.scale(a)},getScaleZoom:function(s,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(s*c.scale(a));return isNaN(f)?1/0:f},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(me(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(J(s),a)},layerPointToLatLng:function(s){var a=J(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(me(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(me(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(be(s))},distance:function(s,a){return this.options.crs.distance(me(s),me(a))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(s)))},mouseEventToContainerPoint:function(s){return to(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Ra(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ve(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Qi(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(s.markerPane,"leaflet-zoom-hide"),ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,c){fe(this._mapPane,new G(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(s,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){fe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var a=s?Me:le;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=s.target||s.srcElement,N=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){N=!0;break}if(f&&f.listens(a,!0)&&(g&&!Ua(w,s)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!N&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var c=s.type;c==="mousedown"&&Ei(a),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,c){if(s.type==="click"){var f=r({},s);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(s,a);if(c){for(var w=[],N=0;N<c.length;N++)c[N].listens(a,!0)&&w.push(c[N]);g=w.concat(g)}if(g.length){a==="contextmenu"&&Ge(s);var z=g[0],B={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Z=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=Z?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(s),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=Z?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(N=0;N<g.length;N++)if(g[N].fire(a,B,!0),B.originalEvent._stopped||g[N].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return vn(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var c=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var c=this.getSize()._divideBy(2);return this.project(s,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(s,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return ye([this.project(s.getSouthWest(),a)._subtract(f),this.project(s.getNorthWest(),a)._subtract(f),this.project(s.getSouthEast(),a)._subtract(f),this.project(s.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,c){if(!c)return s;var f=this.project(s,a),g=this.getSize().divideBy(2),w=new de(f.subtract(g),f.add(g)),N=this._getBoundsOffset(w,c,a);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?s:this.unproject(f.add(N),a)},_limitOffset:function(s,a){if(!a)return s;var c=this.getPixelBounds(),f=new de(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(s,a,c){var f=ye(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(s.min),w=f.max.subtract(s.max),N=this._rebound(g.x,-w.x),z=this._rebound(g.y,-w.y);return new G(N,z)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),c=this.getMaxZoom(),f=se.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(a,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var c=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var s=this._proxy=Se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var c=es,f=this._proxy.style[c];Xn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Fe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();Xn(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(s)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(V(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function no(s,a){return new Te(s,a)}var Zt=ze.extend({options:{position:"topright"},initialize:function(s){M(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),c=this.getPosition(),f=s._controlCorners[c];return ve(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Fe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ut=function(s){return new Zt(s)};Te.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",c=this._controlContainer=Se("div",a+"control-container",this._container);function f(g,w){var N=a+g+" "+a+w;s[g+w]=Se("div",N,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Fe(this._controlCorners[s]);Fe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $a=Zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(s,a,c){M(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Zt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Se("div",s),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),er(a),Ji(a);var f=this._section=Se("section",s+"-list");c&&(this._map.on("click",this.collapse,this),le(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Se("a",s+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),le(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Ge(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Se("div",s+"-base",f),this._separator=Se("div",s+"-separator",f),this._overlaysList=Se("div",s+"-overlays",f),a.appendChild(f)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ns(this._baseLayersList),ns(this._overlaysList),this._layerControlInputs=[];var s,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,s=s||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(d(s.target)),c=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(s,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(s){var a=document.createElement("label"),c=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(s.layer),le(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var N=s.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)a=s[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,c,f=this._map.getZoom(),g=s.length-1;g>=0;g--)a=s[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,le(s,"click",Ge),this.expand();var a=this;setTimeout(function(){Me(s,"click",Ge),a._preventClick=!1})}}),bd=function(s,a,c){return new $a(s,a,c)},Ti=Zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",c=Se("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,c,f,g){var w=Se("a",c,f);return w.innerHTML=s,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),er(w),le(w,"click",on),le(w,"click",g,this),le(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";We(this._zoomInButton,a),We(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ve(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ve(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ti,this.addControl(this.zoomControl))});var Ku=function(s){return new Ti(s)},io=Zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",c=Se("div",a),f=this.options;return this._addScales(f,a+"-line",c),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,c){s.metric&&(this._mScale=Se("div",a,c)),s.imperial&&(this._iScale=Se("div",a,c))},_update:function(){var s=this._map,a=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/s)},_updateImperial:function(s){var a=s*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(s,a,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),c=s/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),ro=function(s){return new io(s)},Zu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tr=Zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Zu+" ":"")+"Leaflet</a>"},initialize:function(s){M(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Se("div","leaflet-control-attribution"),er(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new tr().addTo(this)});var Nd=function(s){return new tr(s)};Zt.Layers=$a,Zt.Zoom=Ti,Zt.Scale=io,Zt.Attribution=tr,Ut.layers=bd,Ut.zoom=Ku,Ut.scale=ro,Ut.attribution=Nd;var an=ze.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});an.addTo=function(s,a){return s.addHandler(a,this),this};var is={Events:ft},Wa=se.touch?"touchstart mousedown":"mousedown",Vn=zt.extend({options:{clickTolerance:3},initialize:function(s,a,c,f){M(this,f),this._element=s,this._dragStartTarget=a||s,this._preventOutline=c},enable:function(){this._enabled||(le(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vn._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!La(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Vn._dragging===this&&this.finishDrag();return}if(!(Vn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Vn._dragging=this,this._preventOutline&&Ei(this._element),Oa(),Dn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,c=Va(this._element);this._startPoint=new G(a.clientX,a.clientY),this._startPos=vn(this._element),this._parentScale=eo(c);var f=s.type==="mousedown";le(document,f?"mousemove":"touchmove",this._onMove,this),le(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,c=new G(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Ge(s),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),fe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),Da(),Mn();var a=this._moved&&this._moving;this._moving=!1,Vn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function so(s,a,c){var f,g=[1,4,2,8],w,N,z,B,Z,te,ue,Ee;for(w=0,te=s.length;w<te;w++)s[w]._code=Jn(s[w],a);for(z=0;z<4;z++){for(ue=g[z],f=[],w=0,te=s.length,N=te-1;w<te;N=w++)B=s[w],Z=s[N],B._code&ue?Z._code&ue||(Ee=yt(Z,B,ue,a,c),Ee._code=Jn(Ee,a),f.push(Ee)):(Z._code&ue&&(Ee=yt(Z,B,ue,a,c),Ee._code=Jn(Ee,a),f.push(Ee)),f.push(B));s=f}return s}function oo(s,a){var c,f,g,w,N,z,B,Z,te;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ue=me([0,0]),Ee=be(s),Bt=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Bt<1700&&(ue=ao(s));var wt=s.length,In=[];for(c=0;c<wt;c++){var Qt=me(s[c]);In.push(a.project(me([Qt.lat-ue.lat,Qt.lng-ue.lng])))}for(z=B=Z=0,c=0,f=wt-1;c<wt;f=c++)g=In[c],w=In[f],N=g.y*w.x-w.y*g.x,B+=(g.x+w.x)*N,Z+=(g.y+w.y)*N,z+=N*3;z===0?te=In[0]:te=[B/z,Z/z];var mo=a.unproject(J(te));return me([mo.lat+ue.lat,mo.lng+ue.lng])}function ao(s){for(var a=0,c=0,f=0,g=0;g<s.length;g++){var w=me(s[g]);a+=w.lat,c+=w.lng,f++}return me([a/f,c/f])}var lo={__proto__:null,clipPolygon:so,polygonCenter:oo,centroid:ao};function Ha(s,a){if(!a||!s.length)return s.slice();var c=a*a;return s=Yu(s,c),s=Qu(s,c),s}function qa(s,a,c){return Math.sqrt(Tn(s,a,c,!0))}function Ii(s,a,c){return Tn(s,a,c)}function Qu(s,a){var c=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,uo(s,g,a,0,c-1);var w,N=[];for(w=0;w<c;w++)g[w]&&N.push(s[w]);return N}function uo(s,a,c,f,g){var w=0,N,z,B;for(z=f+1;z<=g-1;z++)B=Tn(s[z],s[f],s[g],!0),B>w&&(N=z,w=B);w>c&&(a[N]=1,uo(s,a,c,f,N),uo(s,a,c,N,g))}function Yu(s,a){for(var c=[s[0]],f=1,g=0,w=s.length;f<w;f++)Xu(s[f],s[g])>a&&(c.push(s[f]),g=f);return g<w-1&&c.push(s[w-1]),c}var Ga;function rs(s,a,c,f,g){var w=f?Ga:Jn(s,c),N=Jn(a,c),z,B,Z;for(Ga=N;;){if(!(w|N))return[s,a];if(w&N)return!1;z=w||N,B=yt(s,a,z,c,g),Z=Jn(B,c),z===w?(s=B,w=Z):(a=B,N=Z)}}function yt(s,a,c,f,g){var w=a.x-s.x,N=a.y-s.y,z=f.min,B=f.max,Z,te;return c&8?(Z=s.x+w*(B.y-s.y)/N,te=B.y):c&4?(Z=s.x+w*(z.y-s.y)/N,te=z.y):c&2?(Z=B.x,te=s.y+N*(B.x-s.x)/w):c&1&&(Z=z.x,te=s.y+N*(z.x-s.x)/w),new G(Z,te,g)}function Jn(s,a){var c=0;return s.x<a.min.x?c|=1:s.x>a.max.x&&(c|=2),s.y<a.min.y?c|=4:s.y>a.max.y&&(c|=8),c}function Xu(s,a){var c=a.x-s.x,f=a.y-s.y;return c*c+f*f}function Tn(s,a,c,f){var g=a.x,w=a.y,N=c.x-g,z=c.y-w,B=N*N+z*z,Z;return B>0&&(Z=((s.x-g)*N+(s.y-w)*z)/B,Z>1?(g=c.x,w=c.y):Z>0&&(g+=N*Z,w+=z*Z)),N=s.x-g,z=s.y-w,f?N*N+z*z:new G(g,w)}function u(s){return!O(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function v(s,a){var c,f,g,w,N,z,B,Z;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=me([0,0]),ue=be(s),Ee=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());Ee<1700&&(te=ao(s));var Bt=s.length,wt=[];for(c=0;c<Bt;c++){var In=me(s[c]);wt.push(a.project(me([In.lat-te.lat,In.lng-te.lng])))}for(c=0,f=0;c<Bt-1;c++)f+=wt[c].distanceTo(wt[c+1])/2;if(f===0)Z=wt[0];else for(c=0,w=0;c<Bt-1;c++)if(N=wt[c],z=wt[c+1],g=N.distanceTo(z),w+=g,w>f){B=(w-f)/g,Z=[z.x-B*(z.x-N.x),z.y-B*(z.y-N.y)];break}var Qt=a.unproject(J(Z));return me([Qt.lat+te.lat,Qt.lng+te.lng])}var I={__proto__:null,simplify:Ha,pointToSegmentDistance:qa,closestPointOnSegment:Ii,clipSegment:rs,_getEdgeIntersection:yt,_getBitCode:Jn,_sqClosestPointOnSegment:Tn,isFlat:u,_flat:m,polylineCenter:v},j={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new de([-180,-90],[180,90])},$={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,c=this.R,f=s.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),N=w*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-N)/(1+N),w/2);return f=-c*Math.log(Math.max(z,1e-10)),new G(s.lng*a*c,f)},unproject:function(s){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-s.y/c),N=Math.PI/2-2*Math.atan(w),z=0,B=.1,Z;z<15&&Math.abs(B)>1e-7;z++)Z=g*Math.sin(N),Z=Math.pow((1-Z)/(1+Z),g/2),B=Math.PI/2-2*Math.atan(w*Z)-N,N+=B;return new we(N*a,s.x*a/c)}},ee={__proto__:null,LonLat:j,Mercator:$,SphericalMercator:Gi},Ne=r({},Yn,{code:"EPSG:3395",projection:$,transformation:function(){var s=.5/(Math.PI*$.R);return mi(s,.5,-s,.5)}()}),at=r({},Yn,{code:"EPSG:4326",projection:j,transformation:mi(1/180,1,-1/180,.5)}),xe=r({},pt,{projection:j,transformation:mi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var c=a.lng-s.lng,f=a.lat-s.lat;return Math.sqrt(c*c+f*f)},infinite:!0});pt.Earth=Yn,pt.EPSG3395=Ne,pt.EPSG3857=Hr,pt.EPSG900913=ga,pt.EPSG4326=at,pt.Simple=xe;var Ve=zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=d(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},_addLayers:function(s){s=s?O(s)?s:[s]:[];for(var a=0,c=s.length;a<c;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=d(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ke=Ve.extend({initialize:function(s,a){M(this,a),this._layers={};var c,f;if(s)for(c=0,f=s.length;c<f;c++)this.addLayer(s[c])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[s]&&f[s].apply(f,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),nr=function(s,a){return new Ke(s,a)},nt=Ke.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ke.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ke.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var a in this._layers){var c=this._layers[a];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),co=function(s,a){return new nt(s,a)},ei=ze.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){M(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=J(f),w=J(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(c.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function MP(s){return new ei(s)}var Ka=ei.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ka.imagePath!="string"&&(Ka.imagePath=this._detectIconPath()),(this.options.imagePath||Ka.imagePath)+ei.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Se("div","leaflet-default-icon-path",document.body),a=Qi(s,"background-image")||Qi(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),s_=an.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Vn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=vn(a._icon),N=c.getPixelBounds(),z=c.getPixelOrigin(),B=ye(N.min._subtract(z).add(g),N.max._subtract(z).subtract(g));if(!B.contains(w)){var Z=J((Math.max(B.max.x,w.x)-B.max.x)/(N.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(N.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(N.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(N.min.y-B.min.y)).multiplyBy(f);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),fe(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,c=a._shadow,f=vn(a._icon),g=a._map.layerPointToLatLng(f);c&&fe(c,f),a._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ju=Ve.extend({options:{icon:new Ka,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){M(this,a),this._latlng=me(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),ve(c,a),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(c,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(ve(g,a),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),Fe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Fe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&fe(this._icon,s),this._shadow&&fe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),s_)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new s_(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Je(this._icon,s),this._shadow&&Je(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,c=a.iconSize?J(a.iconSize):J(0,0),f=a.iconAnchor?J(a.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function VP(s,a){return new Ju(s,a)}var ir=Ve.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return M(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ec=ir.extend({options:{fill:!0,radius:10},initialize:function(s,a){M(this,a),this._latlng=me(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return ir.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,c=this._clickTolerance(),f=[s+c,a+c];this._pxBounds=new de(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function FP(s,a){return new ec(s,a)}var Od=ec.extend({initialize:function(s,a,c){if(typeof a=="number"&&(a=r({},c,{radius:a})),M(this,a),this._latlng=me(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ir.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Yn.distance){var g=Math.PI/180,w=this._mRadius/Yn.R/g,N=c.project([a+w,s]),z=c.project([a-w,s]),B=N.add(z).divideBy(2),Z=c.unproject(B).lat,te=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(Z*g))/(Math.cos(a*g)*Math.cos(Z*g)))/g;(isNaN(te)||te===0)&&(te=w/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:B.x-c.project([Z,s-te]).x,this._radiusY=B.y-N.y}else{var ue=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ue).x}this._updateBounds()}});function jP(s,a,c){return new Od(s,a,c)}var Pi=ir.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){M(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,c=null,f=Tn,g,w,N=0,z=this._parts.length;N<z;N++)for(var B=this._parts[N],Z=1,te=B.length;Z<te;Z++){g=B[Z-1],w=B[Z];var ue=f(s,g,w,!0);ue<a&&(a=ue,c=f(s,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return v(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=me(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],c=u(s),f=0,g=s.length;f<g;f++)c?(a[f]=me(s[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(s[f]);return a},_project:function(){var s=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new G(s,s);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,c){var f=s[0]instanceof we,g=s.length,w,N;if(f){for(N=[],w=0;w<g;w++)N[w]=this._map.latLngToLayerPoint(s[w]),c.extend(N[w]);a.push(N)}else for(w=0;w<g;w++)this._projectLatlngs(s[w],a,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,N,z,B;for(c=0,g=0,w=this._rings.length;c<w;c++)for(B=this._rings[c],f=0,N=B.length;f<N-1;f++)z=rs(B[f],B[f+1],s,f,!0),z&&(a[g]=a[g]||[],a[g].push(z[0]),(z[1]!==B[f+1]||f===N-2)&&(a[g].push(z[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,c=0,f=s.length;c<f;c++)s[c]=Ha(s[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var c,f,g,w,N,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,w=this._parts.length;c<w;c++)for(z=this._parts[c],f=0,N=z.length,g=N-1;f<N;g=f++)if(!(!a&&f===0)&&qa(s,z[g],z[f])<=B)return!0;return!1}});function zP(s,a){return new Pi(s,a)}Pi._flat=m;var ho=Pi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Pi.prototype._convertLatLngs.call(this,s),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(s){Pi.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,c=new G(a,a);if(s=new de(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=so(this._rings[f],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,c,f,g,w,N,z,B,Z;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,B=this._parts.length;w<B;w++)for(c=this._parts[w],N=0,Z=c.length,z=Z-1;N<Z;z=N++)f=c[N],g=c[z],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Pi.prototype._containsPoint.call(this,s,!0)}});function UP(s,a){return new ho(s,a)}var Si=nt.extend({initialize:function(s,a){M(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=O(s)?s:s.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var N=tc(s,w);return N?(N.feature=rc(s),N.defaultOptions=N.options,this.resetStyle(N),w.onEachFeature&&w.onEachFeature(s,N),this.addLayer(N)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function tc(s,a){var c=s.type==="Feature"?s.geometry:s,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,N=a&&a.coordsToLatLng||Dd,z,B,Z,te;if(!f&&!c)return null;switch(c.type){case"Point":return z=N(f),o_(w,s,z,a);case"MultiPoint":for(Z=0,te=f.length;Z<te;Z++)z=N(f[Z]),g.push(o_(w,s,z,a));return new nt(g);case"LineString":case"MultiLineString":return B=nc(f,c.type==="LineString"?0:1,N),new Pi(B,a);case"Polygon":case"MultiPolygon":return B=nc(f,c.type==="Polygon"?1:2,N),new ho(B,a);case"GeometryCollection":for(Z=0,te=c.geometries.length;Z<te;Z++){var ue=tc({geometry:c.geometries[Z],type:"Feature",properties:s.properties},a);ue&&g.push(ue)}return new nt(g);case"FeatureCollection":for(Z=0,te=c.features.length;Z<te;Z++){var Ee=tc(c.features[Z],a);Ee&&g.push(Ee)}return new nt(g);default:throw new Error("Invalid GeoJSON object.")}}function o_(s,a,c,f){return s?s(a,c):new Ju(c,f&&f.markersInheritOptions&&f)}function Dd(s){return new we(s[1],s[0],s[2])}function nc(s,a,c){for(var f=[],g=0,w=s.length,N;g<w;g++)N=a?nc(s[g],a-1,c):(c||Dd)(s[g]),f.push(N);return f}function Md(s,a){return s=me(s),s.alt!==void 0?[T(s.lng,a),T(s.lat,a),T(s.alt,a)]:[T(s.lng,a),T(s.lat,a)]}function ic(s,a,c,f){for(var g=[],w=0,N=s.length;w<N;w++)g.push(a?ic(s[w],u(s[w])?0:a-1,c,f):Md(s[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function fo(s,a){return s.feature?r({},s.feature,{geometry:a}):rc(a)}function rc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Vd={toGeoJSON:function(s){return fo(this,{type:"Point",coordinates:Md(this.getLatLng(),s)})}};Ju.include(Vd),Od.include(Vd),ec.include(Vd),Pi.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=ic(this._latlngs,a?1:0,!1,s);return fo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),ho.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=ic(this._latlngs,c?2:a?1:0,!0,s);return a||(f=[f]),fo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Ke.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(s).geometry.coordinates)}),fo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(s);if(c)f.push(w.geometry);else{var N=rc(w);N.type==="FeatureCollection"?f.push.apply(f,N.features):f.push(N)}}}),c?fo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function a_(s,a){return new Si(s,a)}var BP=a_,sc=Ve.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,c){this._url=s,this._bounds=be(a),M(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Fe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&yi(this._image),this},bringToBack:function(){return this._map&&Yi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=be(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Se("img");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Xn(this._image,c,a)},_reset:function(){var s=this._image,a=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();fe(s,a.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){Je(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),$P=function(s,a,c){return new sc(s,a,c)},l_=sc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Se("video");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),s){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var N=Se("source");N.src=this._url[w],a.appendChild(N)}}});function WP(s,a,c){return new l_(s,a,c)}var u_=sc.extend({_initImage:function(){var s=this._image=this._url;ve(s,"leaflet-image-layer"),this._zoomAnimated&&ve(s,"leaflet-zoom-animated"),this.options.className&&ve(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function HP(s,a,c){return new u_(s,a,c)}var ti=Ve.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof we||O(s))?(this._latlng=me(s),M(this,a)):(M(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Je(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Je(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Je(this._container,0),this._removeTimeout=setTimeout(l(Fe,void 0,this._container),200)):Fe(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=me(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&yi(this._container),this},bringToBack:function(){return this._map&&Yi(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof nt){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=J(this.options.offset),c=this._getAnchor();this._zoomAnimated?fe(this._container,s.add(c)):a=a.add(s).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(s,a,c,f){var g=a;return g instanceof s||(g=new s(f).setContent(a)),c&&g.setLatLng(c),g}}),Ve.include({_initOverlay:function(s,a,c,f){var g=c;return g instanceof s?(M(g,f),g._source=this):(g=a&&!f?a:new s(f,this),g.setContent(c)),g}});var oc=ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,ti.prototype.openOn.call(this,s)},onAdd:function(s){ti.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ir||this._source.on("preclick",En))},onRemove:function(s){ti.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ir||this._source.off("preclick",En))},getEvents:function(){var s=ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Se("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Se("div",s+"-content-wrapper",a);if(this._contentNode=Se("div",s+"-content",c),er(a),Ji(this._contentNode),le(a,"contextmenu",En),this._tipContainer=Se("div",s+"-tip-container",a),this._tip=Se("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Se("a",s+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',le(f,"click",function(g){Ge(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=s.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ve(s,w)):We(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();fe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(Qi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new G(this._containerLeft,-c-this._containerBottom);g._add(vn(this._container));var w=s.layerPointToContainerPoint(g),N=J(this.options.autoPanPadding),z=J(this.options.autoPanPaddingTopLeft||N),B=J(this.options.autoPanPaddingBottomRight||N),Z=s.getSize(),te=0,ue=0;w.x+f+B.x>Z.x&&(te=w.x+f-Z.x+B.x),w.x-te-z.x<0&&(te=w.x-z.x),w.y+c+B.y>Z.y&&(ue=w.y+c-Z.y+B.y),w.y-ue-z.y<0&&(ue=w.y-z.y),(te||ue)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,ue]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qP=function(s,a){return new oc(s,a)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(s,a,c){return this._initOverlay(oc,s,a,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ve.include({bindPopup:function(s,a){return this._popup=this._initOverlay(oc,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof nt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){on(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof ir)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var ac=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){ti.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){ti.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=ti.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Se("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),N=f.layerPointToContainerPoint(s),z=this.options.direction,B=g.offsetWidth,Z=g.offsetHeight,te=J(this.options.offset),ue=this._getAnchor();z==="top"?(a=B/2,c=Z):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=Z/2):z==="right"?(a=0,c=Z/2):z==="left"?(a=B,c=Z/2):N.x<w.x?(z="right",a=0,c=Z/2):(z="left",a=B+(te.x+ue.x)*2,c=Z/2),s=s.subtract(J(a,c,!0)).add(te).add(ue),We(g,"leaflet-tooltip-right"),We(g,"leaflet-tooltip-left"),We(g,"leaflet-tooltip-top"),We(g,"leaflet-tooltip-bottom"),ve(g,"leaflet-tooltip-"+z),fe(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Je(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),GP=function(s,a){return new ac(s,a)};Te.include({openTooltip:function(s,a,c){return this._initOverlay(ac,s,a,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ve.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ac,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof nt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(le(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),le(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,c,f;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var c_=ei.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(ns(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=J(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function KP(s){return new c_(s)}ei.Default=Ka;var Za=Ve.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){M(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Fe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(yi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,c=-s(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=s(c,+w));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Je(this._container,this.options.opacity);var s=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(s-g.loaded)/200);Je(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=a-Math.abs(s-c),this._onUpdateLevel(c)):(Fe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[s],g=this._map;return f||(f=this._levels[s]={},f.el=Se("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,g.getCenter(),g.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Fe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,c,f){var g=Math.floor(s/2),w=Math.floor(a/2),N=c-1,z=new G(+g,+w);z.z=+N;var B=this._tileCoordsToKey(z),Z=this._tiles[B];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),N>f?this._retainParent(g,w,N,f):!1)},_retainChildren:function(s,a,c,f){for(var g=2*s;g<2*s+2;g++)for(var w=2*a;w<2*a+2;w++){var N=new G(g,w);N.z=c+1;var z=this._tileCoordsToKey(N),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,a)},_setZoomTransform:function(s,a,c){var f=this._map.getZoomScale(c,s.zoom),g=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?Xn(s.el,g,f):fe(s.el,g)},_resetGrid:function(){var s=this._map,a=s.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(s.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(s.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(s,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new de(g.subtract(w),g.add(w))},_update:function(s){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(f),w=g.getCenter(),N=[],z=this.options.keepBuffer,B=new de(g.getBottomLeft().subtract([z,-z]),g.getTopRight().add([z,-z]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var te=this._tiles[Z].coords;(te.z!==this._tileZoom||!B.contains(new G(te.x,te.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var ue=g.min.y;ue<=g.max.y;ue++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var Bt=new G(Ee,ue);if(Bt.z=this._tileZoom,!!this._isValidTile(Bt)){var wt=this._tiles[this._tileCoordsToKey(Bt)];wt?wt.current=!0:N.push(Bt)}}if(N.sort(function(Qt,mo){return Qt.distanceTo(w)-mo.distanceTo(w)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var In=document.createDocumentFragment();for(Ee=0;Ee<N.length;Ee++)this._addTile(N[Ee],In);this._level.el.appendChild(In)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!a.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return be(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,c=this.getTileSize(),f=s.scaleBy(c),g=f.add(c),w=a.unproject(f,s.z),N=a.unproject(g,s.z);return[w,N]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),c=new Pe(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),c=new G(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(s){var a=this._tiles[s];a&&(Fe(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ve(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=y,s.onmousemove=y,se.ielt9&&this.options.opacity<1&&Je(s,this.options.opacity)},_addTile:function(s,a){var c=this._getTilePos(s),f=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&V(l(this._tileReady,this,s,null,g)),fe(g,c),this._tiles[f]={el:g,coords:s,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:s});var f=this._tileCoordsToKey(s);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Je(c.el,0),F(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ve(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new G(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new de(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function ZP(s){return new Za(s)}var po=Za.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=M(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var c=document.createElement("img");return le(c,"load",l(this._tileOnLoad,this,a,c)),le(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var a={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=c),a["-y"]=c}return A(this._url,r(a,this.options))},_tileOnLoad:function(s,a){se.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),s(c,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(s=a-s),s+f},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=y,a.onerror=y,!a.complete)){a.src=X;var c=this._tiles[s].coords;Fe(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",X),Za.prototype._removeTile.call(this,s)},_tileReady:function(s,a,c){if(!(!this._map||c&&c.getAttribute("src")===X))return Za.prototype._tileReady.call(this,s,a,c)}});function h_(s,a){return new po(s,a)}var d_=po.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var c=r({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=M(this,a);var g=a.detectRetina&&se.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,po.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),c=this._crs,f=ye(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,N=(this._wmsVersion>=1.3&&this._crs===at?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),z=po.prototype.getTileUrl.call(this,s);return z+U(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function QP(s,a){return new d_(s,a)}po.WMS=d_,h_.wms=QP;var Ci=Ve.extend({options:{padding:.1},initialize:function(s){M(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(s,a));se.any3d?Xn(this._container,w,c):fe(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new de(c,c.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),f_=Ci.extend({options:{tolerance:0},getEvents:function(){var s=Ci.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");le(s,"mousemove",this._onMouseMove,this),le(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,Fe(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var s=this._bounds,a=this._container,c=s.getSize(),f=se.retina?2:1;fe(a,s.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var c,f,g,w,N=s._parts,z=N.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(f=0,g=N[c].length;f<g;f++)w=N[c][f],B[f?"lineTo":"moveTo"](w.x,w.y);a&&B.closePath()}this._fillStroke(B,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,c=this._ctx,f=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,a){var c=a.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(We(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(ve(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,c){this._map._fireDOMEvent(a,c||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function p_(s){return se.canvas?new f_(s):null}var Qa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),YP={_initContainer:function(){this._container=Se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ci.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Qa("shape");ve(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Qa("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Fe(a),s.removeInteractiveTarget(a),delete this._layers[d(s)]},_updateStyle:function(s){var a=s._stroke,c=s._fill,f=s.options,g=s._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=s._stroke=Qa("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),s._stroke=null),f.fill?(c||(c=s._fill=Qa("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),c=Math.round(s._radius),f=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){yi(s._container)},_bringToBack:function(s){Yi(s._container)}},lc=se.vml?Qa:Fs,Ya=Ci.extend({_initContainer:function(){this._container=lc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=lc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Fe(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var s=this._bounds,a=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),fe(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=lc("path");s.options.className&&ve(a,s.options.className),s.options.interactive&&ve(a,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Fe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,c=s.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,_a(s._parts,a))},_updateCircle:function(s){var a=s._point,c=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(s,w)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){yi(s._path)},_bringToBack:function(s){Yi(s._path)}});se.vml&&Ya.include(YP);function m_(s){return se.svg||se.vml?new Ya(s):null}Te.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&p_(s)||m_(s)}});var g_=ho.extend({initialize:function(s,a){ho.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=be(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function XP(s,a){return new g_(s,a)}Ya.create=lc,Ya.pointsToPath=_a,Si.geometryToLayer=tc,Si.coordsToLatLng=Dd,Si.coordsToLatLngs=nc,Si.latLngToCoords=Md,Si.latLngsToCoords=ic,Si.getFeature=fo,Si.asFeature=rc,Te.mergeOptions({boxZoom:!0});var __=an.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Fe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Dn(),Oa(),this._startPoint=this._map.mouseEventToContainerPoint(s),le(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Se("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new de(this._point,this._startPoint),c=a.getSize();fe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Fe(this._box),We(this._container,"leaflet-crosshair")),Mn(),Da(),Me(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",__),Te.mergeOptions({doubleClickZoom:!0});var v_=an.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=s.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(s.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",v_),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var y_=an.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Vn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=be(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%s+a-c,w=(f+a+c)%s-a-c,N=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(s){var a=this._map,c=a.options,f=!c.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,N=c.easeLinearity,z=g.multiplyBy(N/w),B=z.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,B),te=z.multiplyBy(Z/B),ue=Z/(c.inertiaDeceleration*N),Ee=te.multiplyBy(-ue/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),V(function(){a.panBy(Ee,{duration:ue,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",y_),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var w_=an.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),le(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,c=s.scrollTop||a.scrollTop,f=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*s,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[s,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,s];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=s;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-s},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],s.shiftKey&&(f=J(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(J(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;on(s)}}});Te.addInitHook("addHandler","keyboard",w_),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var E_=an.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=qu(s),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),on(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,N=s._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,N&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+N):s.setZoomAround(this._lastMousePos,a+N))}});Te.addInitHook("addHandler","scrollWheelZoom",E_);var JP=600;Te.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var T_=an.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new G(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",Ge),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),JP),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Me(document,"touchend",Ge),Me(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new G(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Te.addInitHook("addHandler","tapHold",T_),Te.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var I_=an.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),Ge(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var N=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(N,this,!0),Ge(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",I_),Te.BoxZoom=__,Te.DoubleClickZoom=v_,Te.Drag=y_,Te.Keyboard=w_,Te.ScrollWheelZoom=E_,Te.TapHold=T_,Te.TouchZoom=I_,n.Bounds=de,n.Browser=se,n.CRS=pt,n.Canvas=f_,n.Circle=Od,n.CircleMarker=ec,n.Class=ze,n.Control=Zt,n.DivIcon=c_,n.DivOverlay=ti,n.DomEvent=Gu,n.DomUtil=Wu,n.Draggable=Vn,n.Evented=zt,n.FeatureGroup=nt,n.GeoJSON=Si,n.GridLayer=Za,n.Handler=an,n.Icon=ei,n.ImageOverlay=sc,n.LatLng=we,n.LatLngBounds=Pe,n.Layer=Ve,n.LayerGroup=Ke,n.LineUtil=I,n.Map=Te,n.Marker=Ju,n.Mixin=is,n.Path=ir,n.Point=G,n.PolyUtil=lo,n.Polygon=ho,n.Polyline=Pi,n.Popup=oc,n.PosAnimation=Ba,n.Projection=ee,n.Rectangle=g_,n.Renderer=Ci,n.SVG=Ya,n.SVGOverlay=u_,n.TileLayer=po,n.Tooltip=ac,n.Transformation=Ki,n.Util=b,n.VideoOverlay=l_,n.bind=l,n.bounds=ye,n.canvas=p_,n.circle=jP,n.circleMarker=FP,n.control=Ut,n.divIcon=KP,n.extend=r,n.featureGroup=co,n.geoJSON=a_,n.geoJson=BP,n.gridLayer=ZP,n.icon=MP,n.imageOverlay=$P,n.latLng=me,n.latLngBounds=be,n.layerGroup=nr,n.map=no,n.marker=VP,n.point=J,n.polygon=UP,n.polyline=zP,n.popup=qP,n.rectangle=XP,n.setOptions=M,n.stamp=d,n.svg=m_,n.svgOverlay=HP,n.tileLayer=h_,n.tooltip=GP,n.transformation=mi,n.version=i,n.videoOverlay=WP;var eS=window.L;n.noConflict=function(){return window.L=eS,this},window.L=n})})(Qp,Qp.exports);var ma=Qp.exports;const kd=mw(ma);function Rd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function r_(t,e){return e==null?function(i,r){const o=W.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=W.useRef();o.current||(o.current=t(i,r));const l=W.useRef(i),{instance:h}=o.current;return W.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,r]),o}}function _M(t,e){W.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function RP(t){return function(n){const i=n_(),r=t(i_(n,i),i);return CP(i.map,n.attribution),kP(r.current,n.eventHandlers),_M(r.current,i),r}}function vM(t,e){const n=r_(t,e),i=RP(n);return fM(i)}function LP(t,e){const n=r_(t),i=gM(n,e);return pM(i)}function yM(t,e){const n=r_(t,e),i=RP(n);return mM(i)}function wM(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function EM(){return n_().map}function TM(t){const e=EM();return W.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Yp(){return Yp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yp.apply(this,arguments)}function IM({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:h,whenReady:d,zoom:p,..._},y){const[T]=W.useState({className:r,id:o,style:h}),[S,D]=W.useState(null);W.useImperativeHandle(y,()=>(S==null?void 0:S.map)??null,[S]);const M=W.useCallback(k=>{if(k!==null&&S===null){const A=new ma.Map(k,_);n!=null&&p!=null?A.setView(n,p):t!=null&&A.fitBounds(t,e),d!=null&&A.whenReady(d),D(hM(A))}},[]);W.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const U=S?bl.createElement(xP,{value:S},i):l??null;return bl.createElement("div",Yp({},T,{ref:M}),U)}const bP=W.forwardRef(IM),NP=vM(function({position:e,...n},i){const r=new ma.Marker(e,n);return Rd(r,dM(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),PM=LP(function(e,n){const i=new ma.Popup(e,n.overlayContainer);return Rd(i,n)},function(e,n,{position:i},r){W.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),r(!0))}function d(p){p.popup===l&&r(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var _;n.map.off({popupopen:h,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,i])}),OP=yM(function({url:e,...n},i){const r=new ma.TileLayer(e,i_(n,i));return Rd(r,i)},function(e,n,i){wM(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),SM=LP(function(e,n){const i=new ma.Tooltip(e,n.overlayContainer);return Rd(i,n)},function(e,n,{position:i},r){W.useEffect(function(){const l=n.overlayContainer;if(l==null)return;const{instance:h}=e,d=_=>{_.tooltip===h&&(i!=null&&h.setLatLng(i),h.update(),r(!0))},p=_=>{_.tooltip===h&&r(!1)};return l.on({tooltipopen:d,tooltipclose:p}),l.bindTooltip(h),function(){l.off({tooltipopen:d,tooltipclose:p}),l._map!=null&&l.unbindTooltip()}},[e,n,r,i])});delete kd.Icon.Default.prototype._getIconUrl;kd.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function CM({places:t,selected:e,setSelected:n,allPlaces:i,allPlacesSetter:r}){const[o,l]=W.useState([]);W.useEffect(()=>{const d=nP(lu(si,"approvedLocations"),p=>{const _=p.docs.map(y=>{const T=y.data();return{id:y.id,...T,location:T.location||null}});l(_)});return()=>d()},[]);const h=o.filter(d=>d.location&&typeof d.location.lat=="number"&&typeof d.location.lng=="number");return E.jsx("div",{style:{height:"calc(100vh - 70px)",width:"100%"},children:E.jsxs(bP,{center:[28.36,75.59],zoom:15,style:{height:"100%",width:"100%"},children:[E.jsx(OP,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/">OpenStreetMap</a>'}),h.map(d=>E.jsxs(NP,{position:[d.location.lat,d.location.lng],children:[E.jsx(SM,{direction:"top",offset:[0,-8],children:E.jsxs("div",{children:[E.jsx("strong",{children:d.name}),E.jsx("div",{children:d.category||""})]})}),E.jsx(PM,{children:E.jsxs("div",{className:"popup-card-inner",children:[E.jsx("h4",{children:d.name}),E.jsx("p",{children:d.description}),d.imageUrl&&E.jsx("img",{src:d.imageUrl,alt:d.name,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}}),E.jsx("p",{style:{marginTop:8},children:E.jsx("small",{children:d.category})})]})})]},d.id))]})})}function AM({places:t=[],categories:e=["All"],onFilter:n=()=>{},onSelect:i=()=>{},filter:r={q:"",category:"All"}}){const o=Array.isArray(e)?e:["All"];return E.jsxs("aside",{className:"sidebar",children:[E.jsxs("div",{className:"side-top",children:[E.jsx("h2",{children:"Pilani Trails"}),E.jsx("p",{className:"muted",children:"Explore the town  filter, search & bookmark your faves."}),E.jsx("div",{className:"search-row",children:E.jsx("input",{placeholder:"Search spots, e.g., 'printing' or 'momo'",value:r.q||"",onChange:l=>n(h=>({...h,q:l.target.value}))})}),E.jsx("div",{className:"chips",children:o.map(l=>E.jsx("button",{className:"chip",onClick:()=>n(h=>({...h,category:l})),children:l},l))})]}),E.jsx("div",{className:"side-list",children:!Array.isArray(t)||t.length===0?E.jsx("div",{className:"empty",children:"No matches  try fresh filters"}):t.map(l=>E.jsxs("div",{className:"place-card",onClick:()=>i(l),children:[E.jsxs("div",{className:"place-header",children:[E.jsx("strong",{children:l.name}),E.jsx("span",{className:"cat",children:l.category})]}),E.jsx("div",{className:"desc",children:l.desc}),E.jsxs("div",{className:"meta",children:[E.jsxs("span",{children:[" ",l.votes??0]}),E.jsx("span",{children:l.source==="seed"?"OG":"User"})]})]},l.id))}),E.jsx("div",{className:"side-bottom",children:E.jsx("a",{className:"btn",href:"/contribute",children:"Drop a pin"})})]})}function xM(){const[t,e]=W.useState([]),[n,i]=W.useState({q:"",category:"All"}),[r,o]=W.useState(null),[l,h]=W.useState(!0);W.useEffect(()=>{const _=nP(lu(si,"approvedLocations"),y=>{const T=y.docs.map(S=>({id:S.id,...S.data()}));e(T),h(!1)});return()=>_()},[]);const d=t.filter(_=>{var D,M;const y=n.q.toLowerCase(),T=!y||((D=_.name)==null?void 0:D.toLowerCase().includes(y))||((M=_.description)==null?void 0:M.toLowerCase().includes(y)),S=n.category==="All"||_.category&&_.category===n.category;return T&&S}),p=["All",...Array.from(new Set((Array.isArray(t)?t:[]).map(_=>_.category||"Other")))];return l?E.jsx("div",{className:"loading-screen",children:"Loading map..."}):E.jsxs("div",{className:"home-grid",children:[E.jsx(AM,{filter:n,setFilter:i,places:t,setPlaces:e,selected:r,setSelected:o,categories:p,onFilter:i,onSelect:o}),E.jsx(CM,{places:d,selected:r,setSelected:o,allPlaces:t,allPlacesSetter:e})]})}const kM=()=>{const[t,e]=W.useState(""),[n,i]=W.useState(""),[r,o]=W.useState(""),[l,h]=W.useState(!1),{login:d,signInWithGoogle:p}=Vs(),_=ua(),y=async S=>{S.preventDefault();try{o(""),h(!0),await d(t,n),_("/")}catch(D){o("Failed to sign in: "+D.message)}h(!1)},T=async()=>{try{o(""),h(!0),await p(),_("/")}catch(S){o("Failed to sign in with Google: "+S.message)}h(!1)};return E.jsx("div",{className:"auth-container",children:E.jsxs("div",{className:"auth-card",children:[E.jsx("h2",{children:"Login to Pilani Trails"}),r&&E.jsx("div",{className:"error-message",children:r}),E.jsxs("form",{onSubmit:y,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"email",children:"Email"}),E.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),required:!0,placeholder:"your.email@example.com"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"password",children:"Password"}),E.jsx("input",{id:"password",type:"password",value:n,onChange:S=>i(S.target.value),required:!0,placeholder:""})]}),E.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Signing in...":"Sign In"})]}),E.jsx("div",{className:"divider",children:E.jsx("span",{children:"OR"})}),E.jsxs("button",{onClick:T,disabled:l,className:"btn-google",children:[E.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[E.jsx("path",{fill:"#4285F4",d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z"}),E.jsx("path",{fill:"#34A853",d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z"}),E.jsx("path",{fill:"#FBBC05",d:"M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z"}),E.jsx("path",{fill:"#EA4335",d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z"})]}),"Sign in with Google"]}),E.jsxs("p",{className:"auth-switch",children:["Don't have an account? ",E.jsx(Wt,{to:"/signup",children:"Sign up"})]})]})})},RM=()=>{const[t,e]=W.useState(""),[n,i]=W.useState(""),[r,o]=W.useState(""),[l,h]=W.useState(""),[d,p]=W.useState(!1),{currentUser:_}=Vs(),y=ua();if(_)return y("/"),null;const T=async D=>{if(D.preventDefault(),n!==r){h("Passwords do not match");return}if(n.length<6){h("Password must be at least 6 characters");return}h(""),p(!0);try{await IT(pr,t,n),y("/")}catch(M){h(M.message)}finally{p(!1)}},S=async()=>{h(""),p(!0);try{const D=new ai;await DT(pr,D),y("/")}catch(D){h(D.message)}finally{p(!1)}};return E.jsx("div",{className:"auth-container",children:E.jsxs("div",{className:"auth-card",children:[E.jsx("h2",{children:"Create Account"}),E.jsx("p",{children:"Sign up for Pilani Trails"}),l&&E.jsx("div",{className:"error-message",children:l}),E.jsxs("form",{onSubmit:T,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"email",children:"Email"}),E.jsx("input",{type:"email",id:"email",value:t,onChange:D=>e(D.target.value),placeholder:"Enter your email",required:!0,disabled:d})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"password",children:"Password"}),E.jsx("input",{type:"password",id:"password",value:n,onChange:D=>i(D.target.value),placeholder:"Create a password (min 6 characters)",required:!0,disabled:d})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),E.jsx("input",{type:"password",id:"confirmPassword",value:r,onChange:D=>o(D.target.value),placeholder:"Confirm your password",required:!0,disabled:d})]}),E.jsx("button",{type:"submit",className:"btn-primary",disabled:d,children:d?"Creating Account...":"Sign Up"})]}),E.jsx("div",{className:"divider",children:"OR"}),E.jsxs("button",{onClick:S,className:"btn-google",disabled:d,children:[E.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[E.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),E.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),E.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),E.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign up with Google"]}),E.jsxs("div",{className:"auth-switch",children:["Already have an account? ",E.jsx(Wt,{to:"/login",children:"Sign In"})]})]})})};function LM(){var T;const{currentUser:t,logout:e}=Vs(),n=ua(),[i,r]=W.useState([]),[o,l]=W.useState(!0),[h,d]=W.useState({totalProposals:0,pendingProposals:0,approvedProposals:0,rejectedProposals:0});W.useEffect(()=>{p()},[t]);const p=async()=>{l(!0);try{const D=JSON.parse(localStorage.getItem("proposals")||"[]").filter(M=>M.userId===(t==null?void 0:t.uid));r(D),d({totalProposals:D.length,pendingProposals:D.filter(M=>M.status==="pending").length,approvedProposals:D.filter(M=>M.status==="approved").length,rejectedProposals:D.filter(M=>M.status==="rejected").length})}catch(S){console.error("Error loading user data:",S)}finally{l(!1)}},_=async()=>{try{await e(),n("/login")}catch(S){console.error("Logout error:",S)}},y=S=>{switch(S){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}};return o?E.jsx("div",{className:"dashboard-container",style:ae.container,children:E.jsx("div",{style:ae.loading,children:"Loading your dashboard..."})}):E.jsxs("div",{className:"dashboard-container",style:ae.container,children:[E.jsxs("div",{style:ae.header,children:[E.jsx("h1",{style:ae.title,children:"My Dashboard"}),E.jsxs("p",{style:ae.subtitle,children:["Welcome back, ",(t==null?void 0:t.email)||"User","!"]})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"Account Information"}),E.jsxs("div",{style:ae.infoGrid,children:[E.jsxs("div",{style:ae.infoItem,children:[E.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]}),E.jsxs("div",{style:ae.infoItem,children:[E.jsx("strong",{children:"User ID:"})," ",t==null?void 0:t.uid]}),E.jsxs("div",{style:ae.infoItem,children:[E.jsx("strong",{children:"Member Since:"})," ",new Date(((T=t==null?void 0:t.metadata)==null?void 0:T.creationTime)||Date.now()).toLocaleDateString()]})]})]}),E.jsxs("div",{style:ae.statsGrid,children:[E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#007bff"},children:[E.jsx("div",{style:ae.statNumber,children:h.totalProposals}),E.jsx("div",{style:ae.statLabel,children:"Total Proposals"})]}),E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#ffc107"},children:[E.jsx("div",{style:ae.statNumber,children:h.pendingProposals}),E.jsx("div",{style:ae.statLabel,children:"Pending Review"})]}),E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#28a745"},children:[E.jsx("div",{style:ae.statNumber,children:h.approvedProposals}),E.jsx("div",{style:ae.statLabel,children:"Approved"})]}),E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#dc3545"},children:[E.jsx("div",{style:ae.statNumber,children:h.rejectedProposals}),E.jsx("div",{style:ae.statLabel,children:"Rejected"})]})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"Quick Actions"}),E.jsxs("div",{style:ae.actionsGrid,children:[E.jsxs(Wt,{to:"/propose",style:ae.actionButton,children:[E.jsx("span",{style:ae.actionIcon,children:""}),E.jsx("span",{children:"Propose New Location"})]}),E.jsxs(Wt,{to:"/",style:ae.actionButton,children:[E.jsx("span",{style:ae.actionIcon,children:""}),E.jsx("span",{children:"View Map"})]}),E.jsxs(Wt,{to:"/contribute",style:ae.actionButton,children:[E.jsx("span",{style:ae.actionIcon,children:""}),E.jsx("span",{children:"Contribute"})]}),E.jsxs("button",{onClick:_,style:{...ae.actionButton,cursor:"pointer",border:"none"},children:[E.jsx("span",{style:ae.actionIcon,children:""}),E.jsx("span",{children:"Logout"})]})]})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"My Proposals"}),i.length===0?E.jsxs("div",{style:ae.emptyState,children:[E.jsx("p",{children:"You haven't submitted any proposals yet."}),E.jsx(Wt,{to:"/propose",style:ae.primaryButton,children:"Submit Your First Proposal"})]}):E.jsx("div",{style:ae.proposalsList,children:i.map(S=>{var D,M,U;return E.jsxs("div",{style:ae.proposalCard,children:[E.jsxs("div",{style:ae.proposalHeader,children:[E.jsx("h3",{style:ae.proposalTitle,children:S.name}),E.jsx("span",{style:{...ae.statusBadge,backgroundColor:y(S.status)},children:((D=S.status)==null?void 0:D.toUpperCase())||"PENDING"})]}),E.jsxs("div",{style:ae.proposalDetails,children:[E.jsxs("div",{children:[E.jsx("strong",{children:"Category:"})," ",S.category]}),E.jsxs("div",{children:[E.jsx("strong",{children:"Location:"})," [",(M=S.lat)==null?void 0:M.toFixed(4),", ",(U=S.lng)==null?void 0:U.toFixed(4),"]"]}),E.jsxs("div",{children:[E.jsx("strong",{children:"Submitted:"})," ",new Date(S.timestamp).toLocaleDateString()]})]}),S.description&&E.jsx("p",{style:ae.proposalDescription,children:S.description}),S.adminFeedback&&E.jsxs("div",{style:ae.feedback,children:[E.jsx("strong",{children:"Admin Feedback:"})," ",S.adminFeedback]})]},S.id)})})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"Need Help?"}),E.jsxs("p",{children:["Check out our ",E.jsx(Wt,{to:"/about",style:ae.link,children:"About page"})," for more information about Pilani Trails."]}),E.jsxs("p",{children:["Questions? Contact us or visit the ",E.jsx(Wt,{to:"/contribute",style:ae.link,children:"Contribute page"})," to learn more."]})]})]})}const ae={container:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},subtitle:{fontSize:"1.1rem",color:"#666"},loading:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#666"},card:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#333"},infoGrid:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},infoItem:{padding:"0.5rem",fontSize:"1rem"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},statCard:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid",textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},statLabel:{fontSize:"0.9rem",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},actionsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},actionButton:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f8f9fa",borderRadius:"8px",textDecoration:"none",color:"#333",transition:"all 0.2s",fontWeight:"500"},actionIcon:{fontSize:"2rem",marginBottom:"0.5rem"},emptyState:{textAlign:"center",padding:"2rem",color:"#666"},primaryButton:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"#fff",textDecoration:"none",borderRadius:"4px",marginTop:"1rem",fontWeight:"500"},proposalsList:{display:"flex",flexDirection:"column",gap:"1rem"},proposalCard:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},proposalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},proposalTitle:{fontSize:"1.2rem",fontWeight:"bold",margin:0},statusBadge:{padding:"0.25rem 0.75rem",borderRadius:"12px",color:"#fff",fontSize:"0.8rem",fontWeight:"bold"},proposalDetails:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},proposalDescription:{marginTop:"0.5rem",color:"#555",lineHeight:"1.5"},feedback:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",borderLeft:"3px solid #007bff"},link:{color:"#007bff",textDecoration:"none",fontWeight:"500"}};delete kd.Icon.Default.prototype._getIconUrl;kd.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function bM({onSelect:t}){return TM({click(e){t(e.latlng)}}),null}function NM({value:t,onChange:e}){const[n,i]=W.useState(t||null),r=o=>{i(o),e&&e(o)};return E.jsxs("div",{style:{height:"300px",width:"100%",marginBottom:"1rem"},children:[E.jsxs(bP,{center:n?[n.lat,n.lng]:[28.36,75.59],zoom:15,style:{height:"100%",width:"100%"},children:[E.jsx(OP,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),E.jsx(bM,{onSelect:r}),n&&E.jsx(NP,{position:[n.lat,n.lng]})]}),E.jsx("p",{style:{marginTop:"6px",fontSize:"0.9rem",color:"#333"},children:n?`Selected: ${n.lat.toFixed(5)}, ${n.lng.toFixed(5)}`:"Click on the map to drop a pin for this location"})]})}const OM=()=>{const{currentUser:t}=W.useContext(t_),[e,n]=W.useState({name:"",description:"",category:"",tags:"",imageUrl:"",location:null}),[i,r]=W.useState(!1),[o,l]=W.useState({type:"",text:""}),h=p=>{const{name:_,value:y}=p.target;n(T=>({...T,[_]:y}))},d=async p=>{if(p.preventDefault(),!t)return l({type:"error",text:"You must be logged in to propose a location."});if(!e.name||!e.description||!e.category)return l({type:"error",text:"Please provide name, description, and category."});if(!e.location)return l({type:"error",text:"Please drop a pin on the map to select location."});r(!0);try{await tP(lu(si,"locationProposals"),{...e,status:"pending",proposedBy:t.displayName||t.email||t.uid,userId:t.uid,userEmail:t.email||"",createdAt:VO()}),l({type:"success",text:"Location proposal submitted successfully!"}),n({name:"",description:"",category:"",tags:"",imageUrl:"",location:null})}catch(_){console.error("Error submitting proposal:",_),l({type:"error",text:"Failed to submit proposal. Please try again."})}finally{r(!1)}};return E.jsx("div",{className:"propose-location-container",children:E.jsxs("div",{className:"propose-location-card",children:[E.jsx("h2",{children:"Propose a New Location"}),E.jsx("p",{className:"subtitle",children:"Share a new trail or location with the community"}),o.text&&E.jsx("div",{className:`message ${o.type}`,children:o.text}),E.jsxs("form",{onSubmit:d,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Location Name *"}),E.jsx("input",{type:"text",name:"name",value:e.name,onChange:h,placeholder:"Enter location name"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Description *"}),E.jsx("textarea",{name:"description",value:e.description,onChange:h,placeholder:"Describe the location"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Category *"}),E.jsxs("select",{name:"category",value:e.category,onChange:h,children:[E.jsx("option",{value:"",children:"Select a category"}),E.jsx("option",{value:"trail",children:"Trail"}),E.jsx("option",{value:"viewpoint",children:"Viewpoint"}),E.jsx("option",{value:"landmark",children:"Landmark"}),E.jsx("option",{value:"park",children:"Park"}),E.jsx("option",{value:"food",children:"Food"}),E.jsx("option",{value:"stationery",children:"Stationery"}),E.jsx("option",{value:"other",children:"Other"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Pin Location *"}),E.jsx(NM,{value:e.location,onChange:p=>n(_=>({..._,location:p}))})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Tags"}),E.jsx("input",{name:"tags",value:e.tags,onChange:h,placeholder:"comma separated"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Image URL"}),E.jsx("input",{name:"imageUrl",value:e.imageUrl,onChange:h,placeholder:"https://..."})]}),E.jsx("button",{type:"submit",className:"submit-button",disabled:i,children:i?"Submitting...":"Submit Proposal"})]})]})})};function DM(t){return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true":!1}function MM(t){if(!t)return"";if(t.seconds)return new Date(t.seconds*1e3).toLocaleString();try{return new Date(t).toLocaleString()}catch{return String(t)}}function ii(t={},e=[]){const n=Object.keys(t).reduce((i,r)=>(i[r.toLowerCase().replace(/\s+/g,"")]=r,i),{});for(const i of e){const r=i.toLowerCase().replace(/\s+/g,"");if(n[r])return t[n[r]]}}const _o="Admin (gargarpit2002@gmail.com)",VM=()=>{const{currentUser:t,loading:e}=Vs(),[n,i]=W.useState([]),[r,o]=W.useState(!0),[l,h]=W.useState("all"),[d,p]=W.useState(null),[_,y]=W.useState({}),[T,S]=W.useState(null),D=DM(t);W.useEffect(()=>{if(!e){if(!D){o(!1);return}M()}},[l,e,t]);const M=async()=>{S(null);try{o(!0);const q=lu(si,"locationProposals"),C=l==="all"?q:RO(q,LO("status","==",l)),x=(await DO(C)).docs.map(R=>({id:R.id,...R.data()}));i(x)}catch(q){console.error("[AdminReview] fetchProposals error:",q),S((q==null?void 0:q.message)||String(q)),i([])}finally{o(!1)}},U=async q=>{if(!D)return alert("Admin only");try{const C=No(si,"locationProposals",q),P=await eP(C);if(!P.exists()){alert("Proposal not found!");return}const x=P.data();await Pf(C,{status:"approved",reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||_o,reviewedAt:new Date().toISOString()}),await tP(lu(si,"approvedLocations"),{...x,approvedBy:(t==null?void 0:t.email)||_o,approvedAt:new Date().toISOString()}),alert("Proposal approved and moved to approved locations!"),M()}catch(C){console.error("Approve error:",C),alert("Approve failed: "+((C==null?void 0:C.message)||C))}},k=async q=>{if(!D)return alert("Admin only");const C=prompt("Reason for rejection?");if(C)try{await Pf(No(si,"locationProposals",q),{status:"rejected",rejectionReason:C,reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||_o,reviewedAt:new Date().toISOString()}),alert("Proposal rejected!"),M()}catch(P){console.error("Reject error:",P),alert("Reject failed: "+((P==null?void 0:P.message)||P))}},A=async q=>{if(!D)return alert("Admin only");if(window.confirm("Delete this location permanently?"))try{await MO(No(si,"locationProposals",q)),alert("Location deleted!"),M()}catch(C){console.error("Delete error:",C),alert("Delete failed: "+((C==null?void 0:C.message)||C))}},O=q=>{p(q.id),y({name:ii(q,["name","Name"])||"",description:ii(q,["description","Description"])||"",category:ii(q,["category","Category"])||"",tags:ii(q,["tags","Tags"])||"",imageUrl:ii(q,["imageUrl","image","Image URL"])||""})},H=(q,C)=>{y(P=>({...P,[q]:C}))},X=async q=>{if(!D)return alert("Admin only");try{const C={..._,editedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||_o,editedAt:new Date().toISOString()};await Pf(No(si,"locationProposals",q),C),alert("Changes saved successfully!"),p(null),M()}catch(C){console.error("Update error:",C),alert("Update failed: "+((C==null?void 0:C.message)||C))}};return e?E.jsx("div",{className:"admin-review-loading",children:"Checking authentication..."}):D?r?E.jsx("div",{className:"admin-review-loading",children:"Loading proposals..."}):E.jsxs("div",{className:"admin-review-container",children:[E.jsxs("div",{className:"admin-review-header",children:[E.jsx("h1",{children:"Admin Control Panel"}),E.jsx("p",{children:"Approve, edit, or delete any proposed location"})]}),E.jsxs("div",{className:"filter-section",style:{marginBottom:12},children:[E.jsx("label",{style:{marginRight:8},children:"Filter:"}),E.jsxs("select",{value:l,onChange:q=>h(q.target.value),children:[E.jsx("option",{value:"all",children:"All"}),E.jsx("option",{value:"pending",children:"Pending"}),E.jsx("option",{value:"approved",children:"Approved"}),E.jsx("option",{value:"rejected",children:"Rejected"})]})]}),T&&E.jsxs("div",{style:{color:"crimson",marginBottom:12},children:["Error fetching proposals: ",T]}),n.length===0?E.jsx("div",{className:"no-proposals",children:"No proposals found."}):E.jsx("div",{className:"proposals-grid",children:n.map(q=>{const C=ii(q,["name","Name"])||"",P=ii(q,["description","Description"])||"",x=ii(q,["category","Category"])||"",R=ii(q,["tags","Tags"])||"",V=ii(q,["proposedBy","Proposed by","userEmail","userEmail"])||q.userEmail||q.userId||"",F=q.createdAt?MM(q.createdAt):"",b=q.status||"pending",ze=q.rejectionReason||"";return E.jsxs("div",{className:"proposal-card",children:[E.jsxs("div",{className:"proposal-header",children:[d===q.id?E.jsx("input",{value:_.name,onChange:dt=>H("name",dt.target.value),className:"edit-input",placeholder:"Name"}):E.jsx("h3",{style:{margin:0},children:C}),E.jsx("span",{className:`status-badge ${b}`,children:b})]}),E.jsx("div",{className:"proposal-details",style:{marginTop:8},children:d===q.id?E.jsxs(E.Fragment,{children:[E.jsx("label",{children:"Description:"}),E.jsx("textarea",{value:_.description,onChange:dt=>H("description",dt.target.value)}),E.jsx("label",{children:"Category:"}),E.jsx("input",{value:_.category,onChange:dt=>H("category",dt.target.value)}),E.jsx("label",{children:"Tags:"}),E.jsx("input",{value:_.tags,onChange:dt=>H("tags",dt.target.value)}),E.jsx("label",{children:"Image URL:"}),E.jsx("input",{value:_.imageUrl,onChange:dt=>H("imageUrl",dt.target.value)})]}):E.jsxs(E.Fragment,{children:[E.jsxs("p",{children:[E.jsx("strong",{children:"Description:"})," ",P]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Category:"})," ",x]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Tags:"})," ",R]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Proposed by:"})," ",V]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Created At:"})," ",F]}),b==="approved"&&E.jsxs("p",{children:[E.jsx("strong",{children:"Approved by:"})," ",(t==null?void 0:t.email)||_o]}),b==="rejected"&&E.jsxs(E.Fragment,{children:[E.jsxs("p",{children:[E.jsx("strong",{children:"Rejected by:"})," ",(t==null?void 0:t.email)||_o]}),ze&&E.jsxs("p",{children:[E.jsx("strong",{children:"Rejection reason:"})," ",ze]})]}),q.imageUrl&&E.jsx("img",{src:q.imageUrl,alt:C,style:{width:"100%",borderRadius:8,marginTop:8}})]})}),E.jsx("div",{className:"proposal-actions",style:{marginTop:10},children:d===q.id?E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>X(q.id),className:"btn btn-save",children:"Save"}),E.jsx("button",{onClick:()=>p(null),className:"btn btn-cancel",children:"Cancel"})]}):E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>U(q.id),className:"btn btn-approve",children:"Approve"}),E.jsx("button",{onClick:()=>k(q.id),className:"btn btn-reject",children:"Reject"}),E.jsx("button",{onClick:()=>O(q),className:"btn btn-edit",children:"Edit"}),E.jsx("button",{onClick:()=>A(q.id),className:"btn btn-delete",children:"Delete"})]})})]},q.id)})})]}):E.jsx("div",{className:"admin-review-container",children:E.jsxs("div",{className:"admin-review-header",children:[E.jsx("h1",{children:"Admin Control Panel"}),E.jsx("p",{children:"Only admins can view this page."})]})})};function FM(){const t="pilani_trails_places_v1",[e,n]=W.useState(""),[i,r]=W.useState(!1),[o,l]=W.useState([]);W.useEffect(()=>{const p=localStorage.getItem(t)||"[]";l(JSON.parse(p))},[]);function h(p){p.preventDefault();const _=e==="pilaniadmin123";r(_),_||alert("Nah fam, wrong pass.")}function d(p){if(!confirm("Delete for real?"))return;const _=o.filter(y=>y.id!==p);l(_),localStorage.setItem(t,JSON.stringify(_))}return i?E.jsxs("div",{className:"admin-page",children:[E.jsx("h2",{children:"Admin Panel"}),E.jsxs("p",{children:[o.length," place(s) in local DB"]}),E.jsx("p",{className:"muted",children:"Delete any place. For mass edits, export localStorage key manually."}),E.jsxs("div",{className:"admin-list",children:[o.length===0&&E.jsx("p",{children:"No places yet."}),o.map(p=>E.jsxs("div",{className:"place-card",children:[E.jsx("h3",{children:p.name}),E.jsx("div",{className:"desc",children:p.desc||"(no desc)"}),E.jsxs("div",{className:"meta",children:["Category: ",p.category]}),E.jsxs("div",{className:"meta",children:["ID: ",p.id]}),E.jsx("button",{className:"btn ghost",onClick:()=>d(p.id),children:"Delete"})]},p.id))]})]}):E.jsxs("div",{className:"admin-page",children:[E.jsx("h2",{children:"Admin"}),E.jsxs("p",{children:["Enter the admin pass (set in ",E.jsx("code",{children:".env.local"}),")"]}),E.jsxs("form",{onSubmit:h,children:[E.jsx("input",{value:e,onChange:p=>n(p.target.value),placeholder:"admin pass"}),E.jsx("button",{className:"btn",type:"submit",children:"Unlock"})]})]})}function jM(){return E.jsxs(E.Fragment,{children:[E.jsx(uM,{}),E.jsxs(Ax,{children:[E.jsx(or,{path:"/",element:E.jsx(xM,{})}),E.jsx(or,{path:"/login",element:E.jsx(kM,{})}),E.jsx(or,{path:"/signup",element:E.jsx(RM,{})}),E.jsx(or,{path:"/dashboard",element:E.jsx(xf,{children:E.jsx(LM,{})})}),E.jsx(or,{path:"/propose",element:E.jsx(xf,{children:E.jsx(OM,{})})}),E.jsx(or,{path:"/admin-review",element:E.jsx(aM,{children:E.jsx(VM,{})})}),E.jsx(or,{path:"/admin",element:E.jsx(xf,{children:E.jsx(FM,{})})})]})]})}const DP=document.getElementById("root");if(!DP){const t=document.createElement("div");t.id="root",document.body.appendChild(t),console.error("Root element was missing - created new one")}window.addEventListener("error",t=>{console.error("Global error caught:",t.error)});window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)});try{kE(DP||document.getElementById("root")).render(E.jsx(bl.StrictMode,{children:E.jsx(Ox,{children:E.jsx(sM,{children:E.jsx(jM,{})})})}))}catch(t){console.error("Error rendering app:",t),document.body.innerHTML=`<div style="padding: 20px; color: red;">Error loading app: ${t.message}</div>`}
