function HP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var qP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sw={exports:{}},jh={},ow={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),GP=Symbol.for("react.portal"),KP=Symbol.for("react.fragment"),ZP=Symbol.for("react.strict_mode"),QP=Symbol.for("react.profiler"),YP=Symbol.for("react.provider"),XP=Symbol.for("react.context"),JP=Symbol.for("react.forward_ref"),eS=Symbol.for("react.suspense"),tS=Symbol.for("react.memo"),nS=Symbol.for("react.lazy"),m_=Symbol.iterator;function iS(t){return t===null||typeof t!="object"?null:(t=m_&&t[m_]||t["@@iterator"],typeof t=="function"?t:null)}var aw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lw=Object.assign,uw={};function Jo(t,e,n){this.props=t,this.context=e,this.refs=uw,this.updater=n||aw}Jo.prototype.isReactComponent={};Jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cw(){}cw.prototype=Jo.prototype;function Wp(t,e,n){this.props=t,this.context=e,this.refs=uw,this.updater=n||aw}var Hp=Wp.prototype=new cw;Hp.constructor=Wp;lw(Hp,Jo.prototype);Hp.isPureReactComponent=!0;var g_=Array.isArray,hw=Object.prototype.hasOwnProperty,qp={current:null},dw={key:!0,ref:!0,__self:!0,__source:!0};function fw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)hw.call(e,i)&&!dw.hasOwnProperty(i)&&(r[i]=e[i]);var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];r.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)r[i]===void 0&&(r[i]=h[i]);return{$$typeof:tu,type:t,key:o,ref:l,props:r,_owner:qp.current}}function rS(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gp(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function sS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var __=/\/+/g;function Nd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sS(""+t.key):e.toString(36)}function Ac(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case tu:case GP:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+Nd(l,0):i,g_(r)?(n="",t!=null&&(n=t.replace(__,"$&/")+"/"),Ac(r,e,n,"",function(p){return p})):r!=null&&(Gp(r)&&(r=rS(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(__,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",g_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Nd(o,h);l+=Ac(o,e,n,d,r)}else if(d=iS(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Nd(o,h++),l+=Ac(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function rc(t,e,n){if(t==null)return t;var i=[],r=0;return Ac(t,i,"","",function(o){return e.call(n,o,r++)}),i}function oS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},kc={transition:null},aS={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:kc,ReactCurrentOwner:qp};function pw(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:rc,forEach:function(t,e,n){rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rc(t,function(){e++}),e},toArray:function(t){return rc(t,function(e){return e})||[]},only:function(t){if(!Gp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Jo;Ie.Fragment=KP;Ie.Profiler=QP;Ie.PureComponent=Wp;Ie.StrictMode=ZP;Ie.Suspense=eS;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aS;Ie.act=pw;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=lw({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=qp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)hw.call(e,d)&&!dw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:tu,type:t.type,key:r,ref:o,props:i,_owner:l}};Ie.createContext=function(t){return t={$$typeof:XP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YP,_context:t},t.Consumer=t};Ie.createElement=fw;Ie.createFactory=function(t){var e=fw.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:JP,render:t}};Ie.isValidElement=Gp;Ie.lazy=function(t){return{$$typeof:nS,_payload:{_status:-1,_result:t},_init:oS}};Ie.memo=function(t,e){return{$$typeof:tS,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=kc.transition;kc.transition={};try{t()}finally{kc.transition=e}};Ie.unstable_act=pw;Ie.useCallback=function(t,e){return Ht.current.useCallback(t,e)};Ie.useContext=function(t){return Ht.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Ht.current.useEffect(t,e)};Ie.useId=function(){return Ht.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Ht.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};Ie.useRef=function(t){return Ht.current.useRef(t)};Ie.useState=function(t){return Ht.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Ht.current.useTransition()};Ie.version="18.3.1";ow.exports=Ie;var W=ow.exports;const fs=rw(W),lS=HP({__proto__:null,default:fs},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS=W,cS=Symbol.for("react.element"),hS=Symbol.for("react.fragment"),dS=Object.prototype.hasOwnProperty,fS=uS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pS={key:!0,ref:!0,__self:!0,__source:!0};function mw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)dS.call(e,i)&&!pS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:cS,type:t,key:o,ref:l,props:r,_owner:fS.current}}jh.Fragment=hS;jh.jsx=mw;jh.jsxs=mw;sw.exports=jh;var w=sw.exports,gw={exports:{}},fn={},_w={exports:{}},vw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ce){var X=q.length;q.push(ce);e:for(;0<X;){var de=X-1>>>1,ye=q[de];if(0<r(ye,ce))q[de]=ce,q[X]=ye,X=de;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ce=q[0],X=q.pop();if(X!==ce){q[0]=X;e:for(var de=0,ye=q.length,Pe=ye>>>1;de<Pe;){var be=2*(de+1)-1,we=q[be],me=be+1,ft=q[me];if(0>r(we,X))me<ye&&0>r(ft,we)?(q[de]=ft,q[me]=X,de=me):(q[de]=we,q[be]=X,de=be);else if(me<ye&&0>r(ft,X))q[de]=ft,q[me]=X,de=me;else break e}}return ce}function r(q,ce){var X=q.sortIndex-ce.sortIndex;return X!==0?X:q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],v=1,y=null,T=3,S=!1,M=!1,V=!1,U=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var ce=n(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=q)i(p),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(p)}}function H(q){if(V=!1,N(q),!M)if(n(d)!==null)M=!0,dt(Y);else{var ce=n(p);ce!==null&&jt(H,ce.startTime-q)}}function Y(q,ce){M=!1,V&&(V=!1,R(P),P=-1),S=!0;var X=T;try{for(N(ce),y=n(d);y!==null&&(!(y.expirationTime>ce)||q&&!D());){var de=y.callback;if(typeof de=="function"){y.callback=null,T=y.priorityLevel;var ye=de(y.expirationTime<=ce);ce=t.unstable_now(),typeof ye=="function"?y.callback=ye:y===n(d)&&i(d),N(ce)}else i(d);y=n(d)}if(y!==null)var Pe=!0;else{var be=n(p);be!==null&&jt(H,be.startTime-ce),Pe=!1}return Pe}finally{y=null,T=X,S=!1}}var J=!1,A=null,P=-1,x=5,b=-1;function D(){return!(t.unstable_now()-b<x)}function F(){if(A!==null){var q=t.unstable_now();b=q;var ce=!0;try{ce=A(!0,q)}finally{ce?O():(J=!1,A=null)}}else J=!1}var O;if(typeof C=="function")O=function(){C(F)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,di=Xe.port2;Xe.port1.onmessage=F,O=function(){di.postMessage(null)}}else O=function(){U(F,0)};function dt(q){A=q,J||(J=!0,O())}function jt(q,ce){P=U(function(){q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){M||S||(M=!0,dt(Y))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var X=T;T=ce;try{return q()}finally{T=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ce){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=T;T=q;try{return ce()}finally{T=X}},t.unstable_scheduleCallback=function(q,ce,X){var de=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?de+X:de):X=de,q){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=X+ye,q={id:v++,callback:ce,priorityLevel:q,startTime:X,expirationTime:ye,sortIndex:-1},X>de?(q.sortIndex=X,e(p,q),n(d)===null&&q===n(p)&&(V?(R(P),P=-1):V=!0,jt(H,X-de))):(q.sortIndex=ye,e(d,q),M||S||(M=!0,dt(Y))),q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(q){var ce=T;return function(){var X=T;T=ce;try{return q.apply(this,arguments)}finally{T=X}}}})(vw);_w.exports=vw;var mS=_w.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS=W,dn=mS;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yw=new Set,Cl={};function xs(t,e){Fo(t,e),Fo(t+"Capture",e)}function Fo(t,e){for(Cl[t]=e,t=0;t<e.length;t++)yw.add(e[t])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=Object.prototype.hasOwnProperty,_S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v_={},y_={};function vS(t){return Ef.call(y_,t)?!0:Ef.call(v_,t)?!1:_S.test(t)?y_[t]=!0:(v_[t]=!0,!1)}function yS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wS(t,e,n,i){if(e===null||typeof e>"u"||yS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kp=/[\-:]([a-z])/g;function Zp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kp,Zp);kt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kp,Zp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kp,Zp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qp(t,e,n,i){var r=kt.hasOwnProperty(e)?kt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wS(e,n,r,i)&&(n=null),i||r===null?vS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Bi=gS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sc=Symbol.for("react.element"),go=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),ww=Symbol.for("react.provider"),Ew=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Pf=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),Tw=Symbol.for("react.offscreen"),w_=Symbol.iterator;function qa(t){return t===null||typeof t!="object"?null:(t=w_&&t[w_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Od;function tl(t){if(Od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Od=e&&e[1]||""}return`
`+Od+t}var Md=!1;function Dd(t,e){if(!t||Md)return"";Md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,h=o.length-1;1<=l&&0<=h&&r[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(r[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||r[l]!==o[h]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tl(t):""}function ES(t){switch(t.tag){case 5:return tl(t.type);case 16:return tl("Lazy");case 13:return tl("Suspense");case 19:return tl("SuspenseList");case 0:case 2:case 15:return t=Dd(t.type,!1),t;case 11:return t=Dd(t.type.render,!1),t;case 1:return t=Dd(t.type,!0),t;default:return""}}function Sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _o:return"Fragment";case go:return"Portal";case Tf:return"Profiler";case Yp:return"StrictMode";case If:return"Suspense";case Pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ew:return(t.displayName||"Context")+".Consumer";case ww:return(t._context.displayName||"Context")+".Provider";case Xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jp:return e=t.displayName||null,e!==null?e:Sf(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return Sf(t(e))}catch{}}return null}function TS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sf(e);case 8:return e===Yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Iw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IS(t){var e=Iw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oc(t){t._valueTracker||(t._valueTracker=IS(t))}function Pw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Iw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function E_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sw(t,e){e=e.checked,e!=null&&Qp(t,"checked",e,!1)}function xf(t,e){Sw(t,e);var n=Ar(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Af(t,e.type,n):e.hasOwnProperty("defaultValue")&&Af(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function T_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Af(t,e,n){(e!=="number"||Qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nl=Array.isArray;function Ao(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function kf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(nl(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function Cw(t,e){var n=Ar(e.value),i=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function P_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ac,Aw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ac=ac||document.createElement("div"),ac.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ac.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PS=["Webkit","ms","Moz","O"];Object.keys(hl).forEach(function(t){PS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hl[e]=hl[t]})});function kw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hl.hasOwnProperty(t)&&hl[t]?(""+e).trim():e+"px"}function Rw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=kw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var SS=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lf(t,e){if(e){if(SS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function bf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=null;function em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Of=null,ko=null,Ro=null;function S_(t){if(t=ru(t)){if(typeof Of!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Wh(e),Of(t.stateNode,t.type,e))}}function Lw(t){ko?Ro?Ro.push(t):Ro=[t]:ko=t}function bw(){if(ko){var t=ko,e=Ro;if(Ro=ko=null,S_(t),e)for(t=0;t<e.length;t++)S_(e[t])}}function Nw(t,e){return t(e)}function Ow(){}var Vd=!1;function Mw(t,e,n){if(Vd)return t(e,n);Vd=!0;try{return Nw(t,e,n)}finally{Vd=!1,(ko!==null||Ro!==null)&&(Ow(),bw())}}function Al(t,e){var n=t.stateNode;if(n===null)return null;var i=Wh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Mf=!1;if(Oi)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){Mf=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{Mf=!1}function CS(t,e,n,i,r,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var dl=!1,Yc=null,Xc=!1,Df=null,xS={onError:function(t){dl=!0,Yc=t}};function AS(t,e,n,i,r,o,l,h,d){dl=!1,Yc=null,CS.apply(xS,arguments)}function kS(t,e,n,i,r,o,l,h,d){if(AS.apply(this,arguments),dl){if(dl){var p=Yc;dl=!1,Yc=null}else throw Error(Q(198));Xc||(Xc=!0,Df=p)}}function As(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function C_(t){if(As(t)!==t)throw Error(Q(188))}function RS(t){var e=t.alternate;if(!e){if(e=As(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return C_(r),t;if(o===i)return C_(r),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,h=r.child;h;){if(h===n){l=!0,n=r,i=o;break}if(h===i){l=!0,i=r,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=r;break}if(h===i){l=!0,i=o,n=r;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Vw(t){return t=RS(t),t!==null?Fw(t):null}function Fw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fw(t);if(e!==null)return e;t=t.sibling}return null}var jw=dn.unstable_scheduleCallback,x_=dn.unstable_cancelCallback,LS=dn.unstable_shouldYield,bS=dn.unstable_requestPaint,it=dn.unstable_now,NS=dn.unstable_getCurrentPriorityLevel,tm=dn.unstable_ImmediatePriority,zw=dn.unstable_UserBlockingPriority,Jc=dn.unstable_NormalPriority,OS=dn.unstable_LowPriority,Uw=dn.unstable_IdlePriority,zh=null,si=null;function MS(t){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:FS,DS=Math.log,VS=Math.LN2;function FS(t){return t>>>=0,t===0?32:31-(DS(t)/VS|0)|0}var lc=64,uc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~r;h!==0?i=il(h):(o&=l,o!==0&&(i=il(o)))}else l=n&~r,l!==0?i=il(l):o!==0&&(i=il(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Un(e),r=1<<n,i|=t[n],e&=~r;return i}function jS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Un(o),h=1<<l,d=r[l];d===-1?(!(h&n)||h&i)&&(r[l]=jS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bw(){var t=lc;return lc<<=1,!(lc&4194240)&&(lc=64),t}function Fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function US(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Un(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function nm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Un(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Oe=0;function $w(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ww,im,Hw,qw,Gw,Ff=!1,cc=[],mr=null,gr=null,_r=null,kl=new Map,Rl=new Map,sr=[],BS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A_(t,e){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(e.pointerId)}}function Ka(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ru(e),e!==null&&im(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function $S(t,e,n,i,r){switch(e){case"focusin":return mr=Ka(mr,t,e,n,i,r),!0;case"dragenter":return gr=Ka(gr,t,e,n,i,r),!0;case"mouseover":return _r=Ka(_r,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return kl.set(o,Ka(kl.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Rl.set(o,Ka(Rl.get(o)||null,t,e,n,i,r)),!0}return!1}function Kw(t){var e=rs(t.target);if(e!==null){var n=As(e);if(n!==null){if(e=n.tag,e===13){if(e=Dw(n),e!==null){t.blockedOn=e,Gw(t.priority,function(){Hw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Nf=i,n.target.dispatchEvent(i),Nf=null}else return e=ru(n),e!==null&&im(e),t.blockedOn=n,!1;e.shift()}return!0}function k_(t,e,n){Rc(t)&&n.delete(e)}function WS(){Ff=!1,mr!==null&&Rc(mr)&&(mr=null),gr!==null&&Rc(gr)&&(gr=null),_r!==null&&Rc(_r)&&(_r=null),kl.forEach(k_),Rl.forEach(k_)}function Za(t,e){t.blockedOn===e&&(t.blockedOn=null,Ff||(Ff=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,WS)))}function Ll(t){function e(r){return Za(r,t)}if(0<cc.length){Za(cc[0],t);for(var n=1;n<cc.length;n++){var i=cc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(mr!==null&&Za(mr,t),gr!==null&&Za(gr,t),_r!==null&&Za(_r,t),kl.forEach(e),Rl.forEach(e),n=0;n<sr.length;n++)i=sr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)Kw(n),n.blockedOn===null&&sr.shift()}var Lo=Bi.ReactCurrentBatchConfig,th=!0;function HS(t,e,n,i){var r=Oe,o=Lo.transition;Lo.transition=null;try{Oe=1,rm(t,e,n,i)}finally{Oe=r,Lo.transition=o}}function qS(t,e,n,i){var r=Oe,o=Lo.transition;Lo.transition=null;try{Oe=4,rm(t,e,n,i)}finally{Oe=r,Lo.transition=o}}function rm(t,e,n,i){if(th){var r=jf(t,e,n,i);if(r===null)Kd(t,e,i,nh,n),A_(t,i);else if($S(r,t,e,n,i))i.stopPropagation();else if(A_(t,i),e&4&&-1<BS.indexOf(t)){for(;r!==null;){var o=ru(r);if(o!==null&&Ww(o),o=jf(t,e,n,i),o===null&&Kd(t,e,i,nh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Kd(t,e,i,null,n)}}var nh=null;function jf(t,e,n,i){if(nh=null,t=em(i),t=rs(t),t!==null)if(e=As(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nh=t,null}function Zw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NS()){case tm:return 1;case zw:return 4;case Jc:case OS:return 16;case Uw:return 536870912;default:return 16}default:return 16}}var hr=null,sm=null,Lc=null;function Qw(){if(Lc)return Lc;var t,e=sm,n=e.length,i,r="value"in hr?hr.value:hr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return Lc=r.slice(t,1<i?1-i:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hc(){return!0}function R_(){return!1}function pn(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hc:R_,this.isPropagationStopped=R_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),e}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=pn(ea),iu=Qe({},ea,{view:0,detail:0}),GS=pn(iu),jd,zd,Qa,Uh=Qe({},iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:am,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qa&&(Qa&&t.type==="mousemove"?(jd=t.screenX-Qa.screenX,zd=t.screenY-Qa.screenY):zd=jd=0,Qa=t),jd)},movementY:function(t){return"movementY"in t?t.movementY:zd}}),L_=pn(Uh),KS=Qe({},Uh,{dataTransfer:0}),ZS=pn(KS),QS=Qe({},iu,{relatedTarget:0}),Ud=pn(QS),YS=Qe({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),XS=pn(YS),JS=Qe({},ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eC=pn(JS),tC=Qe({},ea,{data:0}),b_=pn(tC),nC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rC[t])?!!e[t]:!1}function am(){return sC}var oC=Qe({},iu,{key:function(t){if(t.key){var e=nC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:am,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aC=pn(oC),lC=Qe({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N_=pn(lC),uC=Qe({},iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:am}),cC=pn(uC),hC=Qe({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),dC=pn(hC),fC=Qe({},Uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pC=pn(fC),mC=[9,13,27,32],lm=Oi&&"CompositionEvent"in window,fl=null;Oi&&"documentMode"in document&&(fl=document.documentMode);var gC=Oi&&"TextEvent"in window&&!fl,Yw=Oi&&(!lm||fl&&8<fl&&11>=fl),O_=" ",M_=!1;function Xw(t,e){switch(t){case"keyup":return mC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vo=!1;function _C(t,e){switch(t){case"compositionend":return Jw(e);case"keypress":return e.which!==32?null:(M_=!0,O_);case"textInput":return t=e.data,t===O_&&M_?null:t;default:return null}}function vC(t,e){if(vo)return t==="compositionend"||!lm&&Xw(t,e)?(t=Qw(),Lc=sm=hr=null,vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yw&&e.locale!=="ko"?null:e.data;default:return null}}var yC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yC[t.type]:e==="textarea"}function e0(t,e,n,i){Lw(i),e=ih(e,"onChange"),0<e.length&&(n=new om("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var pl=null,bl=null;function wC(t){h0(t,0)}function Bh(t){var e=Eo(t);if(Pw(e))return t}function EC(t,e){if(t==="change")return e}var t0=!1;if(Oi){var Bd;if(Oi){var $d="oninput"in document;if(!$d){var V_=document.createElement("div");V_.setAttribute("oninput","return;"),$d=typeof V_.oninput=="function"}Bd=$d}else Bd=!1;t0=Bd&&(!document.documentMode||9<document.documentMode)}function F_(){pl&&(pl.detachEvent("onpropertychange",n0),bl=pl=null)}function n0(t){if(t.propertyName==="value"&&Bh(bl)){var e=[];e0(e,bl,t,em(t)),Mw(wC,e)}}function TC(t,e,n){t==="focusin"?(F_(),pl=e,bl=n,pl.attachEvent("onpropertychange",n0)):t==="focusout"&&F_()}function IC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bh(bl)}function PC(t,e){if(t==="click")return Bh(e)}function SC(t,e){if(t==="input"||t==="change")return Bh(e)}function CC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:CC;function Nl(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ef.call(e,r)||!Hn(t[r],e[r]))return!1}return!0}function j_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z_(t,e){var n=j_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=j_(n)}}function i0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?i0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function r0(){for(var t=window,e=Qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qc(t.document)}return e}function um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xC(t){var e=r0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&i0(n.ownerDocument.documentElement,n)){if(i!==null&&um(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=z_(n,o);var l=z_(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AC=Oi&&"documentMode"in document&&11>=document.documentMode,yo=null,zf=null,ml=null,Uf=!1;function U_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||yo==null||yo!==Qc(i)||(i=yo,"selectionStart"in i&&um(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ml&&Nl(ml,i)||(ml=i,i=ih(zf,"onSelect"),0<i.length&&(e=new om("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=yo)))}function dc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wo={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionend:dc("Transition","TransitionEnd")},Wd={},s0={};Oi&&(s0=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function $h(t){if(Wd[t])return Wd[t];if(!wo[t])return t;var e=wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in s0)return Wd[t]=e[n];return t}var o0=$h("animationend"),a0=$h("animationiteration"),l0=$h("animationstart"),u0=$h("transitionend"),c0=new Map,B_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){c0.set(t,e),xs(e,[t])}for(var Hd=0;Hd<B_.length;Hd++){var qd=B_[Hd],kC=qd.toLowerCase(),RC=qd[0].toUpperCase()+qd.slice(1);Nr(kC,"on"+RC)}Nr(o0,"onAnimationEnd");Nr(a0,"onAnimationIteration");Nr(l0,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(u0,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LC=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function $_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,kS(i,e,void 0,t),t.currentTarget=null}function h0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&r.isPropagationStopped())break e;$_(r,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&r.isPropagationStopped())break e;$_(r,h,p),o=d}}}if(Xc)throw t=Df,Xc=!1,Df=null,t}function ze(t,e){var n=e[qf];n===void 0&&(n=e[qf]=new Set);var i=t+"__bubble";n.has(i)||(d0(e,t,2,!1),n.add(i))}function Gd(t,e,n){var i=0;e&&(i|=4),d0(n,t,i,e)}var fc="_reactListening"+Math.random().toString(36).slice(2);function Ol(t){if(!t[fc]){t[fc]=!0,yw.forEach(function(n){n!=="selectionchange"&&(LC.has(n)||Gd(n,!1,t),Gd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fc]||(e[fc]=!0,Gd("selectionchange",!1,e))}}function d0(t,e,n,i){switch(Zw(e)){case 1:var r=HS;break;case 4:r=qS;break;default:r=rm}n=r.bind(null,e,n,t),r=void 0,!Mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Kd(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===r||h.nodeType===8&&h.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;h!==null;){if(l=rs(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Mw(function(){var p=o,v=em(n),y=[];e:{var T=c0.get(t);if(T!==void 0){var S=om,M=t;switch(t){case"keypress":if(bc(n)===0)break e;case"keydown":case"keyup":S=aC;break;case"focusin":M="focus",S=Ud;break;case"focusout":M="blur",S=Ud;break;case"beforeblur":case"afterblur":S=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=L_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=ZS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=cC;break;case o0:case a0:case l0:S=XS;break;case u0:S=dC;break;case"scroll":S=GS;break;case"wheel":S=pC;break;case"copy":case"cut":case"paste":S=eC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=N_}var V=(e&4)!==0,U=!V&&t==="scroll",R=V?T!==null?T+"Capture":null:T;V=[];for(var C=p,N;C!==null;){N=C;var H=N.stateNode;if(N.tag===5&&H!==null&&(N=H,R!==null&&(H=Al(C,R),H!=null&&V.push(Ml(C,H,N)))),U)break;C=C.return}0<V.length&&(T=new S(T,M,null,n,v),y.push({event:T,listeners:V}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",T&&n!==Nf&&(M=n.relatedTarget||n.fromElement)&&(rs(M)||M[Mi]))break e;if((S||T)&&(T=v.window===v?v:(T=v.ownerDocument)?T.defaultView||T.parentWindow:window,S?(M=n.relatedTarget||n.toElement,S=p,M=M?rs(M):null,M!==null&&(U=As(M),M!==U||M.tag!==5&&M.tag!==6)&&(M=null)):(S=null,M=p),S!==M)){if(V=L_,H="onMouseLeave",R="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(V=N_,H="onPointerLeave",R="onPointerEnter",C="pointer"),U=S==null?T:Eo(S),N=M==null?T:Eo(M),T=new V(H,C+"leave",S,n,v),T.target=U,T.relatedTarget=N,H=null,rs(v)===p&&(V=new V(R,C+"enter",M,n,v),V.target=N,V.relatedTarget=U,H=V),U=H,S&&M)t:{for(V=S,R=M,C=0,N=V;N;N=ho(N))C++;for(N=0,H=R;H;H=ho(H))N++;for(;0<C-N;)V=ho(V),C--;for(;0<N-C;)R=ho(R),N--;for(;C--;){if(V===R||R!==null&&V===R.alternate)break t;V=ho(V),R=ho(R)}V=null}else V=null;S!==null&&W_(y,T,S,V,!1),M!==null&&U!==null&&W_(y,U,M,V,!0)}}e:{if(T=p?Eo(p):window,S=T.nodeName&&T.nodeName.toLowerCase(),S==="select"||S==="input"&&T.type==="file")var Y=EC;else if(D_(T))if(t0)Y=SC;else{Y=IC;var J=TC}else(S=T.nodeName)&&S.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(Y=PC);if(Y&&(Y=Y(t,p))){e0(y,Y,n,v);break e}J&&J(t,T,p),t==="focusout"&&(J=T._wrapperState)&&J.controlled&&T.type==="number"&&Af(T,"number",T.value)}switch(J=p?Eo(p):window,t){case"focusin":(D_(J)||J.contentEditable==="true")&&(yo=J,zf=p,ml=null);break;case"focusout":ml=zf=yo=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,U_(y,n,v);break;case"selectionchange":if(AC)break;case"keydown":case"keyup":U_(y,n,v)}var A;if(lm)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else vo?Xw(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Yw&&n.locale!=="ko"&&(vo||P!=="onCompositionStart"?P==="onCompositionEnd"&&vo&&(A=Qw()):(hr=v,sm="value"in hr?hr.value:hr.textContent,vo=!0)),J=ih(p,P),0<J.length&&(P=new b_(P,t,null,n,v),y.push({event:P,listeners:J}),A?P.data=A:(A=Jw(n),A!==null&&(P.data=A)))),(A=gC?_C(t,n):vC(t,n))&&(p=ih(p,"onBeforeInput"),0<p.length&&(v=new b_("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=A))}h0(y,e)})}function Ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ih(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Al(t,n),o!=null&&i.unshift(Ml(t,o,r)),o=Al(t,e),o!=null&&i.push(Ml(t,o,r))),t=t.return}return i}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function W_(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,r?(d=Al(n,o),d!=null&&l.unshift(Ml(n,d,h))):r||(d=Al(n,o),d!=null&&l.push(Ml(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var bC=/\r\n?/g,NC=/\u0000|\uFFFD/g;function H_(t){return(typeof t=="string"?t:""+t).replace(bC,`
`).replace(NC,"")}function pc(t,e,n){if(e=H_(e),H_(t)!==e&&n)throw Error(Q(425))}function rh(){}var Bf=null,$f=null;function Wf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,OC=typeof clearTimeout=="function"?clearTimeout:void 0,q_=typeof Promise=="function"?Promise:void 0,MC=typeof queueMicrotask=="function"?queueMicrotask:typeof q_<"u"?function(t){return q_.resolve(null).then(t).catch(DC)}:Hf;function DC(t){setTimeout(function(){throw t})}function Zd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ll(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ll(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function G_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ta=Math.random().toString(36).slice(2),ii="__reactFiber$"+ta,Dl="__reactProps$"+ta,Mi="__reactContainer$"+ta,qf="__reactEvents$"+ta,VC="__reactListeners$"+ta,FC="__reactHandles$"+ta;function rs(t){var e=t[ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mi]||n[ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=G_(t);t!==null;){if(n=t[ii])return n;t=G_(t)}return e}t=n,n=t.parentNode}return null}function ru(t){return t=t[ii]||t[Mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Wh(t){return t[Dl]||null}var Gf=[],To=-1;function Or(t){return{current:t}}function Be(t){0>To||(t.current=Gf[To],Gf[To]=null,To--)}function je(t,e){To++,Gf[To]=t.current,t.current=e}var kr={},Vt=Or(kr),Xt=Or(!1),ps=kr;function jo(t,e){var n=t.type.contextTypes;if(!n)return kr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Jt(t){return t=t.childContextTypes,t!=null}function sh(){Be(Xt),Be(Vt)}function K_(t,e,n){if(Vt.current!==kr)throw Error(Q(168));je(Vt,e),je(Xt,n)}function f0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Q(108,TS(t)||"Unknown",r));return Qe({},n,i)}function oh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,ps=Vt.current,je(Vt,t),je(Xt,Xt.current),!0}function Z_(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=f0(t,e,ps),i.__reactInternalMemoizedMergedChildContext=t,Be(Xt),Be(Vt),je(Vt,t)):Be(Xt),je(Xt,n)}var Ci=null,Hh=!1,Qd=!1;function p0(t){Ci===null?Ci=[t]:Ci.push(t)}function jC(t){Hh=!0,p0(t)}function Mr(){if(!Qd&&Ci!==null){Qd=!0;var t=0,e=Oe;try{var n=Ci;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ci=null,Hh=!1}catch(r){throw Ci!==null&&(Ci=Ci.slice(t+1)),jw(tm,Mr),r}finally{Oe=e,Qd=!1}}return null}var Io=[],Po=0,ah=null,lh=0,In=[],Pn=0,ms=null,xi=1,Ai="";function ts(t,e){Io[Po++]=lh,Io[Po++]=ah,ah=t,lh=e}function m0(t,e,n){In[Pn++]=xi,In[Pn++]=Ai,In[Pn++]=ms,ms=t;var i=xi;t=Ai;var r=32-Un(i)-1;i&=~(1<<r),n+=1;var o=32-Un(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,xi=1<<32-Un(e)+r|n<<r|i,Ai=o+t}else xi=1<<o|n<<r|i,Ai=t}function cm(t){t.return!==null&&(ts(t,1),m0(t,1,0))}function hm(t){for(;t===ah;)ah=Io[--Po],Io[Po]=null,lh=Io[--Po],Io[Po]=null;for(;t===ms;)ms=In[--Pn],In[Pn]=null,Ai=In[--Pn],In[Pn]=null,xi=In[--Pn],In[Pn]=null}var un=null,an=null,He=!1,jn=null;function g0(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Q_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:xi,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function Kf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zf(t){if(He){var e=an;if(e){var n=e;if(!Q_(t,e)){if(Kf(t))throw Error(Q(418));e=vr(n.nextSibling);var i=un;e&&Q_(t,e)?g0(i,n):(t.flags=t.flags&-4097|2,He=!1,un=t)}}else{if(Kf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,He=!1,un=t}}}function Y_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function mc(t){if(t!==un)return!1;if(!He)return Y_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wf(t.type,t.memoizedProps)),e&&(e=an)){if(Kf(t))throw _0(),Error(Q(418));for(;e;)g0(t,e),e=vr(e.nextSibling)}if(Y_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?vr(t.stateNode.nextSibling):null;return!0}function _0(){for(var t=an;t;)t=vr(t.nextSibling)}function zo(){an=un=null,He=!1}function dm(t){jn===null?jn=[t]:jn.push(t)}var zC=Bi.ReactCurrentBatchConfig;function Ya(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=r.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function gc(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X_(t){var e=t._init;return e(t._payload)}function v0(t){function e(R,C){if(t){var N=R.deletions;N===null?(R.deletions=[C],R.flags|=16):N.push(C)}}function n(R,C){if(!t)return null;for(;C!==null;)e(R,C),C=C.sibling;return null}function i(R,C){for(R=new Map;C!==null;)C.key!==null?R.set(C.key,C):R.set(C.index,C),C=C.sibling;return R}function r(R,C){return R=Tr(R,C),R.index=0,R.sibling=null,R}function o(R,C,N){return R.index=N,t?(N=R.alternate,N!==null?(N=N.index,N<C?(R.flags|=2,C):N):(R.flags|=2,C)):(R.flags|=1048576,C)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function h(R,C,N,H){return C===null||C.tag!==6?(C=rf(N,R.mode,H),C.return=R,C):(C=r(C,N),C.return=R,C)}function d(R,C,N,H){var Y=N.type;return Y===_o?v(R,C,N.props.children,H,N.key):C!==null&&(C.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===ir&&X_(Y)===C.type)?(H=r(C,N.props),H.ref=Ya(R,C,N),H.return=R,H):(H=jc(N.type,N.key,N.props,null,R.mode,H),H.ref=Ya(R,C,N),H.return=R,H)}function p(R,C,N,H){return C===null||C.tag!==4||C.stateNode.containerInfo!==N.containerInfo||C.stateNode.implementation!==N.implementation?(C=sf(N,R.mode,H),C.return=R,C):(C=r(C,N.children||[]),C.return=R,C)}function v(R,C,N,H,Y){return C===null||C.tag!==7?(C=hs(N,R.mode,H,Y),C.return=R,C):(C=r(C,N),C.return=R,C)}function y(R,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return C=rf(""+C,R.mode,N),C.return=R,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case sc:return N=jc(C.type,C.key,C.props,null,R.mode,N),N.ref=Ya(R,null,C),N.return=R,N;case go:return C=sf(C,R.mode,N),C.return=R,C;case ir:var H=C._init;return y(R,H(C._payload),N)}if(nl(C)||qa(C))return C=hs(C,R.mode,N,null),C.return=R,C;gc(R,C)}return null}function T(R,C,N,H){var Y=C!==null?C.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return Y!==null?null:h(R,C,""+N,H);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case sc:return N.key===Y?d(R,C,N,H):null;case go:return N.key===Y?p(R,C,N,H):null;case ir:return Y=N._init,T(R,C,Y(N._payload),H)}if(nl(N)||qa(N))return Y!==null?null:v(R,C,N,H,null);gc(R,N)}return null}function S(R,C,N,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return R=R.get(N)||null,h(C,R,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case sc:return R=R.get(H.key===null?N:H.key)||null,d(C,R,H,Y);case go:return R=R.get(H.key===null?N:H.key)||null,p(C,R,H,Y);case ir:var J=H._init;return S(R,C,N,J(H._payload),Y)}if(nl(H)||qa(H))return R=R.get(N)||null,v(C,R,H,Y,null);gc(C,H)}return null}function M(R,C,N,H){for(var Y=null,J=null,A=C,P=C=0,x=null;A!==null&&P<N.length;P++){A.index>P?(x=A,A=null):x=A.sibling;var b=T(R,A,N[P],H);if(b===null){A===null&&(A=x);break}t&&A&&b.alternate===null&&e(R,A),C=o(b,C,P),J===null?Y=b:J.sibling=b,J=b,A=x}if(P===N.length)return n(R,A),He&&ts(R,P),Y;if(A===null){for(;P<N.length;P++)A=y(R,N[P],H),A!==null&&(C=o(A,C,P),J===null?Y=A:J.sibling=A,J=A);return He&&ts(R,P),Y}for(A=i(R,A);P<N.length;P++)x=S(A,R,P,N[P],H),x!==null&&(t&&x.alternate!==null&&A.delete(x.key===null?P:x.key),C=o(x,C,P),J===null?Y=x:J.sibling=x,J=x);return t&&A.forEach(function(D){return e(R,D)}),He&&ts(R,P),Y}function V(R,C,N,H){var Y=qa(N);if(typeof Y!="function")throw Error(Q(150));if(N=Y.call(N),N==null)throw Error(Q(151));for(var J=Y=null,A=C,P=C=0,x=null,b=N.next();A!==null&&!b.done;P++,b=N.next()){A.index>P?(x=A,A=null):x=A.sibling;var D=T(R,A,b.value,H);if(D===null){A===null&&(A=x);break}t&&A&&D.alternate===null&&e(R,A),C=o(D,C,P),J===null?Y=D:J.sibling=D,J=D,A=x}if(b.done)return n(R,A),He&&ts(R,P),Y;if(A===null){for(;!b.done;P++,b=N.next())b=y(R,b.value,H),b!==null&&(C=o(b,C,P),J===null?Y=b:J.sibling=b,J=b);return He&&ts(R,P),Y}for(A=i(R,A);!b.done;P++,b=N.next())b=S(A,R,P,b.value,H),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?P:b.key),C=o(b,C,P),J===null?Y=b:J.sibling=b,J=b);return t&&A.forEach(function(F){return e(R,F)}),He&&ts(R,P),Y}function U(R,C,N,H){if(typeof N=="object"&&N!==null&&N.type===_o&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case sc:e:{for(var Y=N.key,J=C;J!==null;){if(J.key===Y){if(Y=N.type,Y===_o){if(J.tag===7){n(R,J.sibling),C=r(J,N.props.children),C.return=R,R=C;break e}}else if(J.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===ir&&X_(Y)===J.type){n(R,J.sibling),C=r(J,N.props),C.ref=Ya(R,J,N),C.return=R,R=C;break e}n(R,J);break}else e(R,J);J=J.sibling}N.type===_o?(C=hs(N.props.children,R.mode,H,N.key),C.return=R,R=C):(H=jc(N.type,N.key,N.props,null,R.mode,H),H.ref=Ya(R,C,N),H.return=R,R=H)}return l(R);case go:e:{for(J=N.key;C!==null;){if(C.key===J)if(C.tag===4&&C.stateNode.containerInfo===N.containerInfo&&C.stateNode.implementation===N.implementation){n(R,C.sibling),C=r(C,N.children||[]),C.return=R,R=C;break e}else{n(R,C);break}else e(R,C);C=C.sibling}C=sf(N,R.mode,H),C.return=R,R=C}return l(R);case ir:return J=N._init,U(R,C,J(N._payload),H)}if(nl(N))return M(R,C,N,H);if(qa(N))return V(R,C,N,H);gc(R,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,C!==null&&C.tag===6?(n(R,C.sibling),C=r(C,N),C.return=R,R=C):(n(R,C),C=rf(N,R.mode,H),C.return=R,R=C),l(R)):n(R,C)}return U}var Uo=v0(!0),y0=v0(!1),uh=Or(null),ch=null,So=null,fm=null;function pm(){fm=So=ch=null}function mm(t){var e=uh.current;Be(uh),t._currentValue=e}function Qf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function bo(t,e){ch=t,fm=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(fm!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(ch===null)throw Error(Q(308));So=t,ch.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var ss=null;function gm(t){ss===null?ss=[t]:ss.push(t)}function w0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,gm(e)):(n.next=r.next,r.next=n),e.interleaved=n,Di(t,i)}function Di(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rr=!1;function _m(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Di(t,n)}return r=i.interleaved,r===null?(e.next=e,gm(i)):(e.next=r.next,r.next=e),i.interleaved=e,Di(t,n)}function Nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nm(t,n)}}function J_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hh(t,e,n,i){var r=t.updateQueue;rr=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,h=r.shared.pending;if(h!==null){r.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;l=0,v=p=d=null,h=o;do{var T=h.lane,S=h.eventTime;if((i&T)===T){v!==null&&(v=v.next={eventTime:S,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var M=t,V=h;switch(T=e,S=n,V.tag){case 1:if(M=V.payload,typeof M=="function"){y=M.call(S,y,T);break e}y=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=V.payload,T=typeof M=="function"?M.call(S,y,T):M,T==null)break e;y=Qe({},y,T);break e;case 2:rr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=r.effects,T===null?r.effects=[h]:T.push(h))}else S={eventTime:S,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(p=v=S,d=y):v=v.next=S,l|=T;if(h=h.next,h===null){if(h=r.shared.pending,h===null)break;T=h,h=T.next,T.next=null,r.lastBaseUpdate=T,r.shared.pending=null}}while(!0);if(v===null&&(d=y),r.baseState=d,r.firstBaseUpdate=p,r.lastBaseUpdate=v,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);_s|=l,t.lanes=l,t.memoizedState=y}}function ev(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Q(191,r));r.call(i)}}}var su={},oi=Or(su),Vl=Or(su),Fl=Or(su);function os(t){if(t===su)throw Error(Q(174));return t}function vm(t,e){switch(je(Fl,e),je(Vl,t),je(oi,su),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rf(e,t)}Be(oi),je(oi,e)}function Bo(){Be(oi),Be(Vl),Be(Fl)}function T0(t){os(Fl.current);var e=os(oi.current),n=Rf(e,t.type);e!==n&&(je(Vl,t),je(oi,n))}function ym(t){Vl.current===t&&(Be(oi),Be(Vl))}var Ke=Or(0);function dh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yd=[];function wm(){for(var t=0;t<Yd.length;t++)Yd[t]._workInProgressVersionPrimary=null;Yd.length=0}var Oc=Bi.ReactCurrentDispatcher,Xd=Bi.ReactCurrentBatchConfig,gs=0,Ze=null,pt=null,Et=null,fh=!1,gl=!1,jl=0,UC=0;function Lt(){throw Error(Q(321))}function Em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Tm(t,e,n,i,r,o){if(gs=o,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oc.current=t===null||t.memoizedState===null?HC:qC,t=n(i,r),gl){o=0;do{if(gl=!1,jl=0,25<=o)throw Error(Q(301));o+=1,Et=pt=null,e.updateQueue=null,Oc.current=GC,t=n(i,r)}while(gl)}if(Oc.current=ph,e=pt!==null&&pt.next!==null,gs=0,Et=pt=Ze=null,fh=!1,e)throw Error(Q(300));return t}function Im(){var t=jl!==0;return jl=0,t}function ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ze.memoizedState=Et=t:Et=Et.next=t,Et}function kn(){if(pt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Et===null?Ze.memoizedState:Et.next;if(e!==null)Et=e,pt=t;else{if(t===null)throw Error(Q(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Et===null?Ze.memoizedState=Et=t:Et=Et.next=t}return Et}function zl(t,e){return typeof e=="function"?e(t):e}function Jd(t){var e=kn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=pt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var h=l=null,d=null,p=o;do{var v=p.lane;if((gs&v)===v)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=y,l=i):d=d.next=y,Ze.lanes|=v,_s|=v}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Hn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Ze.lanes|=o,_s|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ef(t){var e=kn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);Hn(o,e.memoizedState)||(Yt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function I0(){}function P0(t,e){var n=Ze,i=kn(),r=e(),o=!Hn(i.memoizedState,r);if(o&&(i.memoizedState=r,Yt=!0),i=i.queue,Pm(x0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Ul(9,C0.bind(null,n,i,r,e),void 0,null),Tt===null)throw Error(Q(349));gs&30||S0(n,e,r)}return r}function S0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function C0(t,e,n,i){e.value=n,e.getSnapshot=i,A0(e)&&k0(t)}function x0(t,e,n){return n(function(){A0(e)&&k0(t)})}function A0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function k0(t){var e=Di(t,1);e!==null&&Bn(e,t,1,-1)}function tv(t){var e=ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:t},e.queue=t,t=t.dispatch=WC.bind(null,Ze,t),[e.memoizedState,t]}function Ul(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function R0(){return kn().memoizedState}function Mc(t,e,n,i){var r=ni();Ze.flags|=t,r.memoizedState=Ul(1|e,n,void 0,i===void 0?null:i)}function qh(t,e,n,i){var r=kn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,i!==null&&Em(i,l.deps)){r.memoizedState=Ul(e,n,o,i);return}}Ze.flags|=t,r.memoizedState=Ul(1|e,n,o,i)}function nv(t,e){return Mc(8390656,8,t,e)}function Pm(t,e){return qh(2048,8,t,e)}function L0(t,e){return qh(4,2,t,e)}function b0(t,e){return qh(4,4,t,e)}function N0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function O0(t,e,n){return n=n!=null?n.concat([t]):null,qh(4,4,N0.bind(null,e,t),n)}function Sm(){}function M0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function D0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function V0(t,e,n){return gs&21?(Hn(n,e)||(n=Bw(),Ze.lanes|=n,_s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function BC(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=Xd.transition;Xd.transition={};try{t(!1),e()}finally{Oe=n,Xd.transition=i}}function F0(){return kn().memoizedState}function $C(t,e,n){var i=Er(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},j0(t))z0(e,n);else if(n=w0(t,e,n,i),n!==null){var r=Wt();Bn(n,t,i,r),U0(n,e,i)}}function WC(t,e,n){var i=Er(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(j0(t))z0(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(r.hasEagerState=!0,r.eagerState=h,Hn(h,l)){var d=e.interleaved;d===null?(r.next=r,gm(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=w0(t,e,r,i),n!==null&&(r=Wt(),Bn(n,t,i,r),U0(n,e,i))}}function j0(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function z0(t,e){gl=fh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nm(t,n)}}var ph={readContext:An,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},HC={readContext:An,useCallback:function(t,e){return ni().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:nv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mc(4194308,4,N0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mc(4,2,t,e)},useMemo:function(t,e){var n=ni();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ni();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=$C.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=ni();return t={current:t},e.memoizedState=t},useState:tv,useDebugValue:Sm,useDeferredValue:function(t){return ni().memoizedState=t},useTransition:function(){var t=tv(!1),e=t[0];return t=BC.bind(null,t[1]),ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,r=ni();if(He){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Tt===null)throw Error(Q(349));gs&30||S0(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,nv(x0.bind(null,i,o,t),[t]),i.flags|=2048,Ul(9,C0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ni(),e=Tt.identifierPrefix;if(He){var n=Ai,i=xi;n=(i&~(1<<32-Un(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qC={readContext:An,useCallback:M0,useContext:An,useEffect:Pm,useImperativeHandle:O0,useInsertionEffect:L0,useLayoutEffect:b0,useMemo:D0,useReducer:Jd,useRef:R0,useState:function(){return Jd(zl)},useDebugValue:Sm,useDeferredValue:function(t){var e=kn();return V0(e,pt.memoizedState,t)},useTransition:function(){var t=Jd(zl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:I0,useSyncExternalStore:P0,useId:F0,unstable_isNewReconciler:!1},GC={readContext:An,useCallback:M0,useContext:An,useEffect:Pm,useImperativeHandle:O0,useInsertionEffect:L0,useLayoutEffect:b0,useMemo:D0,useReducer:ef,useRef:R0,useState:function(){return ef(zl)},useDebugValue:Sm,useDeferredValue:function(t){var e=kn();return pt===null?e.memoizedState=t:V0(e,pt.memoizedState,t)},useTransition:function(){var t=ef(zl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:I0,useSyncExternalStore:P0,useId:F0,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gh={isMounted:function(t){return(t=t._reactInternals)?As(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=Er(t),o=bi(i,r);o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,r),e!==null&&(Bn(e,t,r,i),Nc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=Er(t),o=bi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,r),e!==null&&(Bn(e,t,r,i),Nc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),i=Er(t),r=bi(n,i);r.tag=2,e!=null&&(r.callback=e),e=yr(t,r,i),e!==null&&(Bn(e,t,i,n),Nc(e,t,i))}};function iv(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,i)||!Nl(r,o):!0}function B0(t,e,n){var i=!1,r=kr,o=e.contextType;return typeof o=="object"&&o!==null?o=An(o):(r=Jt(e)?ps:Vt.current,i=e.contextTypes,o=(i=i!=null)?jo(t,r):kr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function rv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Gh.enqueueReplaceState(e,e.state,null)}function Xf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},_m(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=An(o):(o=Jt(e)?ps:Vt.current,r.context=jo(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Yf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Gh.enqueueReplaceState(r,r.state,null),hh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function $o(t,e){try{var n="",i=e;do n+=ES(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KC=typeof WeakMap=="function"?WeakMap:Map;function $0(t,e,n){n=bi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){gh||(gh=!0,up=i),Jf(t,e)},n}function W0(t,e,n){n=bi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Jf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Jf(t,e),typeof i!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function sv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new KC;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=lx.bind(null,t,e,n),e.then(t,t))}function ov(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function av(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bi(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var ZC=Bi.ReactCurrentOwner,Yt=!1;function Bt(t,e,n,i){e.child=t===null?y0(e,null,n,i):Uo(e,t.child,n,i)}function lv(t,e,n,i,r){n=n.render;var o=e.ref;return bo(e,r),i=Tm(t,e,n,i,o,r),n=Im(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vi(t,e,r)):(He&&n&&cm(e),e.flags|=1,Bt(t,e,i,r),e.child)}function uv(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,H0(t,e,o,i,r)):(t=jc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(l,i)&&t.ref===e.ref)return Vi(t,e,r)}return e.flags|=1,t=Tr(o,i),t.ref=e.ref,t.return=e,e.child=t}function H0(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Nl(o,i)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Vi(t,e,r)}return ep(t,e,n,i,r)}function q0(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(xo,on),on|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(xo,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,je(xo,on),on|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,je(xo,on),on|=i;return Bt(t,e,r,n),e.child}function G0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ep(t,e,n,i,r){var o=Jt(n)?ps:Vt.current;return o=jo(e,o),bo(e,r),n=Tm(t,e,n,i,o,r),i=Im(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vi(t,e,r)):(He&&i&&cm(e),e.flags|=1,Bt(t,e,n,r),e.child)}function cv(t,e,n,i,r){if(Jt(n)){var o=!0;oh(e)}else o=!1;if(bo(e,r),e.stateNode===null)Dc(t,e),B0(e,n,i),Xf(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=An(p):(p=Jt(n)?ps:Vt.current,p=jo(e,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&rv(e,l,i,p),rr=!1;var T=e.memoizedState;l.state=T,hh(e,i,l,r),d=e.memoizedState,h!==i||T!==d||Xt.current||rr?(typeof v=="function"&&(Yf(e,n,v,i),d=e.memoizedState),(h=rr||iv(e,n,h,i,T,d,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,E0(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Vn(e.type,h),l.props=p,y=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=An(d):(d=Jt(n)?ps:Vt.current,d=jo(e,d));var S=n.getDerivedStateFromProps;(v=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||T!==d)&&rv(e,l,i,d),rr=!1,T=e.memoizedState,l.state=T,hh(e,i,l,r);var M=e.memoizedState;h!==y||T!==M||Xt.current||rr?(typeof S=="function"&&(Yf(e,n,S,i),M=e.memoizedState),(p=rr||iv(e,n,p,i,T,M,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,M,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,M,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=M),l.props=i,l.state=M,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return tp(t,e,n,i,o,r)}function tp(t,e,n,i,r,o){G0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&Z_(e,n,!1),Vi(t,e,o);i=e.stateNode,ZC.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Uo(e,t.child,null,o),e.child=Uo(e,null,h,o)):Bt(t,e,h,o),e.memoizedState=i.state,r&&Z_(e,n,!0),e.child}function K0(t){var e=t.stateNode;e.pendingContext?K_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&K_(t,e.context,!1),vm(t,e.containerInfo)}function hv(t,e,n,i,r){return zo(),dm(r),e.flags|=256,Bt(t,e,n,i),e.child}var np={dehydrated:null,treeContext:null,retryLane:0};function ip(t){return{baseLanes:t,cachePool:null,transitions:null}}function Z0(t,e,n){var i=e.pendingProps,r=Ke.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(r&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),je(Ke,r&1),t===null)return Zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Qh(l,i,0,null),t=hs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ip(n),e.memoizedState=np,t):Cm(e,l));if(r=t.memoizedState,r!==null&&(h=r.dehydrated,h!==null))return QC(t,e,l,i,h,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,h=r.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Tr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),h!==null?o=Tr(h,o):(o=hs(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?ip(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=np,i}return o=t.child,t=o.sibling,i=Tr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Cm(t,e){return e=Qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _c(t,e,n,i){return i!==null&&dm(i),Uo(e,t.child,null,n),t=Cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QC(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=tf(Error(Q(422))),_c(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Qh({mode:"visible",children:i.children},r,0,null),o=hs(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Uo(e,t.child,null,l),e.child.memoizedState=ip(l),e.memoizedState=np,o);if(!(e.mode&1))return _c(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=tf(o,i,void 0),_c(t,e,l,i)}if(h=(l&t.childLanes)!==0,Yt||h){if(i=Tt,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Di(t,r),Bn(i,t,r,-1))}return bm(),i=tf(Error(Q(421))),_c(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=ux.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,an=vr(r.nextSibling),un=e,He=!0,jn=null,t!==null&&(In[Pn++]=xi,In[Pn++]=Ai,In[Pn++]=ms,xi=t.id,Ai=t.overflow,ms=e),e=Cm(e,i.children),e.flags|=4096,e)}function dv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Qf(t.return,e,n)}function nf(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Q0(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Bt(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dv(t,n,e);else if(t.tag===19)dv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(je(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&dh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),nf(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&dh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}nf(e,!0,n,null,o);break;case"together":nf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YC(t,e,n){switch(e.tag){case 3:K0(e),zo();break;case 5:T0(e);break;case 1:Jt(e.type)&&oh(e);break;case 4:vm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;je(uh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?Z0(t,e,n):(je(Ke,Ke.current&1),t=Vi(t,e,n),t!==null?t.sibling:null);je(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Q0(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,q0(t,e,n)}return Vi(t,e,n)}var Y0,rp,X0,J0;Y0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rp=function(){};X0=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,os(oi.current);var o=null;switch(n){case"input":r=Cf(t,r),i=Cf(t,i),o=[];break;case"select":r=Qe({},r,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":r=kf(t,r),i=kf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=rh)}Lf(n,i);var l;n=null;for(p in r)if(!i.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var h=r[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Cl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=r!=null?r[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Cl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&ze("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};J0=function(t,e,n,i){n!==i&&(e.flags|=4)};function Xa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function XC(t,e,n){var i=e.pendingProps;switch(hm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Jt(e.type)&&sh(),bt(e),null;case 3:return i=e.stateNode,Bo(),Be(Xt),Be(Vt),wm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(mc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(dp(jn),jn=null))),rp(t,e),bt(e),null;case 5:ym(e);var r=os(Fl.current);if(n=e.type,t!==null&&e.stateNode!=null)X0(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return bt(e),null}if(t=os(oi.current),mc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ii]=e,i[Dl]=o,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(r=0;r<rl.length;r++)ze(rl[r],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":E_(i,o),ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ze("invalid",i);break;case"textarea":I_(i,o),ze("invalid",i)}Lf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&pc(i.textContent,h,t),r=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&pc(i.textContent,h,t),r=["children",""+h]):Cl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ze("scroll",i)}switch(n){case"input":oc(i),T_(i,o,!0);break;case"textarea":oc(i),P_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=rh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ii]=e,t[Dl]=i,Y0(t,e,!1,!1),e.stateNode=t;e:{switch(l=bf(n,i),n){case"dialog":ze("cancel",t),ze("close",t),r=i;break;case"iframe":case"object":case"embed":ze("load",t),r=i;break;case"video":case"audio":for(r=0;r<rl.length;r++)ze(rl[r],t);r=i;break;case"source":ze("error",t),r=i;break;case"img":case"image":case"link":ze("error",t),ze("load",t),r=i;break;case"details":ze("toggle",t),r=i;break;case"input":E_(t,i),r=Cf(t,i),ze("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Qe({},i,{value:void 0}),ze("invalid",t);break;case"textarea":I_(t,i),r=kf(t,i),ze("invalid",t);break;default:r=i}Lf(n,r),h=r;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Rw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Aw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&xl(t,d):typeof d=="number"&&xl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ze("scroll",t):d!=null&&Qp(t,o,d,l))}switch(n){case"input":oc(t),T_(t,i,!1);break;case"textarea":oc(t),P_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ar(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ao(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ao(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=rh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)J0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=os(Fl.current),os(oi.current),mc(e)){if(i=e.stateNode,n=e.memoizedProps,i[ii]=e,(o=i.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:pc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ii]=e,e.stateNode=i}return bt(e),null;case 13:if(Be(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&an!==null&&e.mode&1&&!(e.flags&128))_0(),zo(),e.flags|=98560,o=!1;else if(o=mc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[ii]=e}else zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),o=!1}else jn!==null&&(dp(jn),jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?mt===0&&(mt=3):bm())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return Bo(),rp(t,e),t===null&&Ol(e.stateNode.containerInfo),bt(e),null;case 10:return mm(e.type._context),bt(e),null;case 17:return Jt(e.type)&&sh(),bt(e),null;case 19:if(Be(Ke),o=e.memoizedState,o===null)return bt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Xa(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=dh(t),l!==null){for(e.flags|=128,Xa(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>Wo&&(e.flags|=128,i=!0,Xa(o,!1),e.lanes=4194304)}else{if(!i)if(t=dh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return bt(e),null}else 2*it()-o.renderingStartTime>Wo&&n!==1073741824&&(e.flags|=128,i=!0,Xa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ke.current,je(Ke,i?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return Lm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?on&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function JC(t,e){switch(hm(e),e.tag){case 1:return Jt(e.type)&&sh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bo(),Be(Xt),Be(Vt),wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ym(e),null;case 13:if(Be(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ke),null;case 4:return Bo(),null;case 10:return mm(e.type._context),null;case 22:case 23:return Lm(),null;case 24:return null;default:return null}}var vc=!1,Mt=!1,ex=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function sp(t,e,n){try{n()}catch(i){et(t,e,i)}}var fv=!1;function tx(t,e){if(Bf=th,t=r0(),um(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,v=0,y=t,T=null;t:for(;;){for(var S;y!==n||r!==0&&y.nodeType!==3||(h=l+r),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(S=y.firstChild)!==null;)T=y,y=S;for(;;){if(y===t)break t;if(T===n&&++p===r&&(h=l),T===o&&++v===i&&(d=l),(S=y.nextSibling)!==null)break;y=T,T=y.parentNode}y=S}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for($f={focusedElem:t,selectionRange:n},th=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var V=M.memoizedProps,U=M.memoizedState,R=e.stateNode,C=R.getSnapshotBeforeUpdate(e.elementType===e.type?V:Vn(e.type,V),U);R.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(H){et(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return M=fv,fv=!1,M}function _l(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&sp(e,n,o)}r=r.next}while(r!==i)}}function Kh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function op(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eE(t){var e=t.alternate;e!==null&&(t.alternate=null,eE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ii],delete e[Dl],delete e[qf],delete e[VC],delete e[FC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tE(t){return t.tag===5||t.tag===3||t.tag===4}function pv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ap(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rh));else if(i!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}function lp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}var Pt=null,Fn=!1;function tr(t,e,n){for(n=n.child;n!==null;)nE(t,e,n),n=n.sibling}function nE(t,e,n){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(zh,n)}catch{}switch(n.tag){case 5:Mt||Co(n,e);case 6:var i=Pt,r=Fn;Pt=null,tr(t,e,n),Pt=i,Fn=r,Pt!==null&&(Fn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Fn?(t=Pt,n=n.stateNode,t.nodeType===8?Zd(t.parentNode,n):t.nodeType===1&&Zd(t,n),Ll(t)):Zd(Pt,n.stateNode));break;case 4:i=Pt,r=Fn,Pt=n.stateNode.containerInfo,Fn=!0,tr(t,e,n),Pt=i,Fn=r;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&sp(n,e,l),r=r.next}while(r!==i)}tr(t,e,n);break;case 1:if(!Mt&&(Co(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:n.mode&1?(Mt=(i=Mt)||n.memoizedState!==null,tr(t,e,n),Mt=i):tr(t,e,n);break;default:tr(t,e,n)}}function mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ex),e.forEach(function(i){var r=cx.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Pt=h.stateNode,Fn=!1;break e;case 3:Pt=h.stateNode.containerInfo,Fn=!0;break e;case 4:Pt=h.stateNode.containerInfo,Fn=!0;break e}h=h.return}if(Pt===null)throw Error(Q(160));nE(o,l,r),Pt=null,Fn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(p){et(r,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iE(e,t),e=e.sibling}function iE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),ei(t),i&4){try{_l(3,t,t.return),Kh(3,t)}catch(V){et(t,t.return,V)}try{_l(5,t,t.return)}catch(V){et(t,t.return,V)}}break;case 1:Dn(e,t),ei(t),i&512&&n!==null&&Co(n,n.return);break;case 5:if(Dn(e,t),ei(t),i&512&&n!==null&&Co(n,n.return),t.flags&32){var r=t.stateNode;try{xl(r,"")}catch(V){et(t,t.return,V)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Sw(r,o),bf(h,l);var p=bf(h,o);for(l=0;l<d.length;l+=2){var v=d[l],y=d[l+1];v==="style"?Rw(r,y):v==="dangerouslySetInnerHTML"?Aw(r,y):v==="children"?xl(r,y):Qp(r,v,y,p)}switch(h){case"input":xf(r,o);break;case"textarea":Cw(r,o);break;case"select":var T=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Ao(r,!!o.multiple,S,!1):T!==!!o.multiple&&(o.defaultValue!=null?Ao(r,!!o.multiple,o.defaultValue,!0):Ao(r,!!o.multiple,o.multiple?[]:"",!1))}r[Dl]=o}catch(V){et(t,t.return,V)}}break;case 6:if(Dn(e,t),ei(t),i&4){if(t.stateNode===null)throw Error(Q(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(V){et(t,t.return,V)}}break;case 3:if(Dn(e,t),ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(e.containerInfo)}catch(V){et(t,t.return,V)}break;case 4:Dn(e,t),ei(t);break;case 13:Dn(e,t),ei(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(km=it())),i&4&&mv(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(p=Mt)||v,Dn(e,t),Mt=p):Dn(e,t),ei(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(ne=t,v=t.child;v!==null;){for(y=ne=v;ne!==null;){switch(T=ne,S=T.child,T.tag){case 0:case 11:case 14:case 15:_l(4,T,T.return);break;case 1:Co(T,T.return);var M=T.stateNode;if(typeof M.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(V){et(i,n,V)}}break;case 5:Co(T,T.return);break;case 22:if(T.memoizedState!==null){_v(y);continue}}S!==null?(S.return=T,ne=S):_v(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{r=y.stateNode,p?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=kw("display",l))}catch(V){et(t,t.return,V)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(V){et(t,t.return,V)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Dn(e,t),ei(t),i&4&&mv(t);break;case 21:break;default:Dn(e,t),ei(t)}}function ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tE(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(xl(r,""),i.flags&=-33);var o=pv(t);lp(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,h=pv(t);ap(t,h,l);break;default:throw Error(Q(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nx(t,e,n){ne=t,rE(t)}function rE(t,e,n){for(var i=(t.mode&1)!==0;ne!==null;){var r=ne,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||vc;if(!l){var h=r.alternate,d=h!==null&&h.memoizedState!==null||Mt;h=vc;var p=Mt;if(vc=l,(Mt=d)&&!p)for(ne=r;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?vv(r):d!==null?(d.return=l,ne=d):vv(r);for(;o!==null;)ne=o,rE(o),o=o.sibling;ne=r,vc=h,Mt=p}gv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ne=o):gv(t)}}function gv(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||Kh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ev(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ev(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&Ll(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Mt||e.flags&512&&op(e)}catch(T){et(e,e.return,T)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function _v(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function vv(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){et(e,r,d)}}var o=e.return;try{op(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{op(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){ne=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ne=h;break}ne=e.return}}var ix=Math.ceil,mh=Bi.ReactCurrentDispatcher,xm=Bi.ReactCurrentOwner,Cn=Bi.ReactCurrentBatchConfig,Re=0,Tt=null,ct=null,xt=0,on=0,xo=Or(0),mt=0,Bl=null,_s=0,Zh=0,Am=0,vl=null,Zt=null,km=0,Wo=1/0,Si=null,gh=!1,up=null,wr=null,yc=!1,dr=null,_h=0,yl=0,cp=null,Vc=-1,Fc=0;function Wt(){return Re&6?it():Vc!==-1?Vc:Vc=it()}function Er(t){return t.mode&1?Re&2&&xt!==0?xt&-xt:zC.transition!==null?(Fc===0&&(Fc=Bw()),Fc):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Zw(t.type)),t):1}function Bn(t,e,n,i){if(50<yl)throw yl=0,cp=null,Error(Q(185));nu(t,n,i),(!(Re&2)||t!==Tt)&&(t===Tt&&(!(Re&2)&&(Zh|=n),mt===4&&or(t,xt)),en(t,i),n===1&&Re===0&&!(e.mode&1)&&(Wo=it()+500,Hh&&Mr()))}function en(t,e){var n=t.callbackNode;zS(t,e);var i=eh(t,t===Tt?xt:0);if(i===0)n!==null&&x_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&x_(n),e===1)t.tag===0?jC(yv.bind(null,t)):p0(yv.bind(null,t)),MC(function(){!(Re&6)&&Mr()}),n=null;else{switch($w(i)){case 1:n=tm;break;case 4:n=zw;break;case 16:n=Jc;break;case 536870912:n=Uw;break;default:n=Jc}n=dE(n,sE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sE(t,e){if(Vc=-1,Fc=0,Re&6)throw Error(Q(327));var n=t.callbackNode;if(No()&&t.callbackNode!==n)return null;var i=eh(t,t===Tt?xt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=vh(t,i);else{e=i;var r=Re;Re|=2;var o=aE();(Tt!==t||xt!==e)&&(Si=null,Wo=it()+500,cs(t,e));do try{ox();break}catch(h){oE(t,h)}while(!0);pm(),mh.current=o,Re=r,ct!==null?e=0:(Tt=null,xt=0,e=mt)}if(e!==0){if(e===2&&(r=Vf(t),r!==0&&(i=r,e=hp(t,r))),e===1)throw n=Bl,cs(t,0),or(t,i),en(t,it()),n;if(e===6)or(t,i);else{if(r=t.current.alternate,!(i&30)&&!rx(r)&&(e=vh(t,i),e===2&&(o=Vf(t),o!==0&&(i=o,e=hp(t,o))),e===1))throw n=Bl,cs(t,0),or(t,i),en(t,it()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:ns(t,Zt,Si);break;case 3:if(or(t,i),(i&130023424)===i&&(e=km+500-it(),10<e)){if(eh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Wt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Hf(ns.bind(null,t,Zt,Si),e);break}ns(t,Zt,Si);break;case 4:if(or(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-Un(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ix(i/1960))-i,10<i){t.timeoutHandle=Hf(ns.bind(null,t,Zt,Si),i);break}ns(t,Zt,Si);break;case 5:ns(t,Zt,Si);break;default:throw Error(Q(329))}}}return en(t,it()),t.callbackNode===n?sE.bind(null,t):null}function hp(t,e){var n=vl;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=vh(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&dp(e)),t}function dp(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function rx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Hn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function or(t,e){for(e&=~Am,e&=~Zh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),i=1<<n;t[n]=-1,e&=~i}}function yv(t){if(Re&6)throw Error(Q(327));No();var e=eh(t,0);if(!(e&1))return en(t,it()),null;var n=vh(t,e);if(t.tag!==0&&n===2){var i=Vf(t);i!==0&&(e=i,n=hp(t,i))}if(n===1)throw n=Bl,cs(t,0),or(t,e),en(t,it()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ns(t,Zt,Si),en(t,it()),null}function Rm(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Wo=it()+500,Hh&&Mr())}}function vs(t){dr!==null&&dr.tag===0&&!(Re&6)&&No();var e=Re;Re|=1;var n=Cn.transition,i=Oe;try{if(Cn.transition=null,Oe=1,t)return t()}finally{Oe=i,Cn.transition=n,Re=e,!(Re&6)&&Mr()}}function Lm(){on=xo.current,Be(xo)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OC(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(hm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&sh();break;case 3:Bo(),Be(Xt),Be(Vt),wm();break;case 5:ym(i);break;case 4:Bo();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:mm(i.type._context);break;case 22:case 23:Lm()}n=n.return}if(Tt=t,ct=t=Tr(t.current,null),xt=on=e,mt=0,Bl=null,Am=Zh=_s=0,Zt=vl=null,ss!==null){for(e=0;e<ss.length;e++)if(n=ss[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}ss=null}return t}function oE(t,e){do{var n=ct;try{if(pm(),Oc.current=ph,fh){for(var i=Ze.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}fh=!1}if(gs=0,Et=pt=Ze=null,gl=!1,jl=0,xm.current=null,n===null||n.return===null){mt=1,Bl=e,ct=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=xt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var T=v.alternate;T?(v.updateQueue=T.updateQueue,v.memoizedState=T.memoizedState,v.lanes=T.lanes):(v.updateQueue=null,v.memoizedState=null)}var S=ov(l);if(S!==null){S.flags&=-257,av(S,l,h,o,e),S.mode&1&&sv(o,p,e),e=S,d=p;var M=e.updateQueue;if(M===null){var V=new Set;V.add(d),e.updateQueue=V}else M.add(d);break e}else{if(!(e&1)){sv(o,p,e),bm();break e}d=Error(Q(426))}}else if(He&&h.mode&1){var U=ov(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),av(U,l,h,o,e),dm($o(d,h));break e}}o=d=$o(d,h),mt!==4&&(mt=2),vl===null?vl=[o]:vl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=$0(o,d,e);J_(o,R);break e;case 1:h=d;var C=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(wr===null||!wr.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=W0(o,h,e);J_(o,H);break e}}o=o.return}while(o!==null)}uE(n)}catch(Y){e=Y,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function aE(){var t=mh.current;return mh.current=ph,t===null?ph:t}function bm(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(_s&268435455)&&!(Zh&268435455)||or(Tt,xt)}function vh(t,e){var n=Re;Re|=2;var i=aE();(Tt!==t||xt!==e)&&(Si=null,cs(t,e));do try{sx();break}catch(r){oE(t,r)}while(!0);if(pm(),Re=n,mh.current=i,ct!==null)throw Error(Q(261));return Tt=null,xt=0,mt}function sx(){for(;ct!==null;)lE(ct)}function ox(){for(;ct!==null&&!LS();)lE(ct)}function lE(t){var e=hE(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?uE(t):ct=e,xm.current=null}function uE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JC(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ct=null;return}}else if(n=XC(n,e,on),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);mt===0&&(mt=5)}function ns(t,e,n){var i=Oe,r=Cn.transition;try{Cn.transition=null,Oe=1,ax(t,e,n,i)}finally{Cn.transition=r,Oe=i}return null}function ax(t,e,n,i){do No();while(dr!==null);if(Re&6)throw Error(Q(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(US(t,o),t===Tt&&(ct=Tt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,dE(Jc,function(){return No(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Cn.transition,Cn.transition=null;var l=Oe;Oe=1;var h=Re;Re|=4,xm.current=null,tx(t,n),iE(n,t),xC($f),th=!!Bf,$f=Bf=null,t.current=n,nx(n),bS(),Re=h,Oe=l,Cn.transition=o}else t.current=n;if(yc&&(yc=!1,dr=t,_h=r),o=t.pendingLanes,o===0&&(wr=null),MS(n.stateNode),en(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(gh)throw gh=!1,t=up,up=null,t;return _h&1&&t.tag!==0&&No(),o=t.pendingLanes,o&1?t===cp?yl++:(yl=0,cp=t):yl=0,Mr(),null}function No(){if(dr!==null){var t=$w(_h),e=Cn.transition,n=Oe;try{if(Cn.transition=null,Oe=16>t?16:t,dr===null)var i=!1;else{if(t=dr,dr=null,_h=0,Re&6)throw Error(Q(331));var r=Re;for(Re|=4,ne=t.current;ne!==null;){var o=ne,l=o.child;if(ne.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(ne=p;ne!==null;){var v=ne;switch(v.tag){case 0:case 11:case 15:_l(8,v,o)}var y=v.child;if(y!==null)y.return=v,ne=y;else for(;ne!==null;){v=ne;var T=v.sibling,S=v.return;if(eE(v),v===p){ne=null;break}if(T!==null){T.return=S,ne=T;break}ne=S}}}var M=o.alternate;if(M!==null){var V=M.child;if(V!==null){M.child=null;do{var U=V.sibling;V.sibling=null,V=U}while(V!==null)}}ne=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ne=l;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:_l(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,ne=R;break e}ne=o.return}}var C=t.current;for(ne=C;ne!==null;){l=ne;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,ne=N;else e:for(l=C;ne!==null;){if(h=ne,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Kh(9,h)}}catch(Y){et(h,h.return,Y)}if(h===l){ne=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ne=H;break e}ne=h.return}}if(Re=r,Mr(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(zh,t)}catch{}i=!0}return i}finally{Oe=n,Cn.transition=e}}return!1}function wv(t,e,n){e=$o(n,e),e=$0(t,e,1),t=yr(t,e,1),e=Wt(),t!==null&&(nu(t,1,e),en(t,e))}function et(t,e,n){if(t.tag===3)wv(t,t,n);else for(;e!==null;){if(e.tag===3){wv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wr===null||!wr.has(i))){t=$o(n,t),t=W0(e,t,1),e=yr(e,t,1),t=Wt(),e!==null&&(nu(e,1,t),en(e,t));break}}e=e.return}}function lx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(xt&n)===n&&(mt===4||mt===3&&(xt&130023424)===xt&&500>it()-km?cs(t,0):Am|=n),en(t,e)}function cE(t,e){e===0&&(t.mode&1?(e=uc,uc<<=1,!(uc&130023424)&&(uc=4194304)):e=1);var n=Wt();t=Di(t,e),t!==null&&(nu(t,e,n),en(t,n))}function ux(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cE(t,n)}function cx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),cE(t,n)}var hE;hE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,YC(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,He&&e.flags&1048576&&m0(e,lh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Dc(t,e),t=e.pendingProps;var r=jo(e,Vt.current);bo(e,n),r=Tm(null,e,i,t,r,n);var o=Im();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(o=!0,oh(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,_m(e),r.updater=Gh,e.stateNode=r,r._reactInternals=e,Xf(e,i,t,n),e=tp(null,e,i,!0,o,n)):(e.tag=0,He&&o&&cm(e),Bt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Dc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=dx(i),t=Vn(i,t),r){case 0:e=ep(null,e,i,t,n);break e;case 1:e=cv(null,e,i,t,n);break e;case 11:e=lv(null,e,i,t,n);break e;case 14:e=uv(null,e,i,Vn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),ep(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),cv(t,e,i,r,n);case 3:e:{if(K0(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,r=o.element,E0(t,e),hh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=$o(Error(Q(423)),e),e=hv(t,e,i,n,r);break e}else if(i!==r){r=$o(Error(Q(424)),e),e=hv(t,e,i,n,r);break e}else for(an=vr(e.stateNode.containerInfo.firstChild),un=e,He=!0,jn=null,n=y0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zo(),i===r){e=Vi(t,e,n);break e}Bt(t,e,i,n)}e=e.child}return e;case 5:return T0(e),t===null&&Zf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,Wf(i,r)?l=null:o!==null&&Wf(i,o)&&(e.flags|=32),G0(t,e),Bt(t,e,l,n),e.child;case 6:return t===null&&Zf(e),null;case 13:return Z0(t,e,n);case 4:return vm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Uo(e,null,i,n):Bt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),lv(t,e,i,r,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,je(uh,i._currentValue),i._currentValue=l,o!==null)if(Hn(o.value,l)){if(o.children===r.children&&!Xt.current){e=Vi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=bi(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?d.next=d:(d.next=v.next,v.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Qf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Qf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Bt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,bo(e,n),r=An(r),i=i(r),e.flags|=1,Bt(t,e,i,n),e.child;case 14:return i=e.type,r=Vn(i,e.pendingProps),r=Vn(i.type,r),uv(t,e,i,r,n);case 15:return H0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),Dc(t,e),e.tag=1,Jt(i)?(t=!0,oh(e)):t=!1,bo(e,n),B0(e,i,r),Xf(e,i,r,n),tp(null,e,i,!0,t,n);case 19:return Q0(t,e,n);case 22:return q0(t,e,n)}throw Error(Q(156,e.tag))};function dE(t,e){return jw(t,e)}function hx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,i){return new hx(t,e,n,i)}function Nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dx(t){if(typeof t=="function")return Nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xp)return 11;if(t===Jp)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jc(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")Nm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case _o:return hs(n.children,r,o,e);case Yp:l=8,r|=8;break;case Tf:return t=Sn(12,n,e,r|2),t.elementType=Tf,t.lanes=o,t;case If:return t=Sn(13,n,e,r),t.elementType=If,t.lanes=o,t;case Pf:return t=Sn(19,n,e,r),t.elementType=Pf,t.lanes=o,t;case Tw:return Qh(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ww:l=10;break e;case Ew:l=9;break e;case Xp:l=11;break e;case Jp:l=14;break e;case ir:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Sn(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function hs(t,e,n,i){return t=Sn(7,t,i,e),t.lanes=n,t}function Qh(t,e,n,i){return t=Sn(22,t,i,e),t.elementType=Tw,t.lanes=n,t.stateNode={isHidden:!1},t}function rf(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function sf(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fx(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fd(0),this.expirationTimes=Fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Om(t,e,n,i,r,o,l,h,d){return t=new fx(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Sn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_m(o),t}function px(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:go,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function fE(t){if(!t)return kr;t=t._reactInternals;e:{if(As(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Jt(n))return f0(t,n,e)}return e}function pE(t,e,n,i,r,o,l,h,d){return t=Om(n,i,!0,t,r,o,l,h,d),t.context=fE(null),n=t.current,i=Wt(),r=Er(n),o=bi(i,r),o.callback=e??null,yr(n,o,r),t.current.lanes=r,nu(t,r,i),en(t,i),t}function Yh(t,e,n,i){var r=e.current,o=Wt(),l=Er(r);return n=fE(n),e.context===null?e.context=n:e.pendingContext=n,e=bi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=yr(r,e,l),t!==null&&(Bn(t,r,l,o),Nc(t,r,l)),l}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ev(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mm(t,e){Ev(t,e),(t=t.alternate)&&Ev(t,e)}function mx(){return null}var mE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dm(t){this._internalRoot=t}Xh.prototype.render=Dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Yh(t,e,null,null)};Xh.prototype.unmount=Dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){Yh(null,t,null,null)}),e[Mi]=null}};function Xh(t){this._internalRoot=t}Xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=qw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&Kw(t)}};function Vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tv(){}function gx(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var p=yh(l);o.call(p)}}var l=pE(e,i,t,0,null,!1,!1,"",Tv);return t._reactRootContainer=l,t[Mi]=l.current,Ol(t.nodeType===8?t.parentNode:t),vs(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var h=i;i=function(){var p=yh(d);h.call(p)}}var d=Om(t,0,!1,null,null,!1,!1,"",Tv);return t._reactRootContainer=d,t[Mi]=d.current,Ol(t.nodeType===8?t.parentNode:t),vs(function(){Yh(e,d,n,i)}),d}function ed(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var h=r;r=function(){var d=yh(l);h.call(d)}}Yh(e,l,t,r)}else l=gx(n,e,t,r,i);return yh(l)}Ww=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(nm(e,n|1),en(e,it()),!(Re&6)&&(Wo=it()+500,Mr()))}break;case 13:vs(function(){var i=Di(t,1);if(i!==null){var r=Wt();Bn(i,t,1,r)}}),Mm(t,1)}};im=function(t){if(t.tag===13){var e=Di(t,134217728);if(e!==null){var n=Wt();Bn(e,t,134217728,n)}Mm(t,134217728)}};Hw=function(t){if(t.tag===13){var e=Er(t),n=Di(t,e);if(n!==null){var i=Wt();Bn(n,t,e,i)}Mm(t,e)}};qw=function(){return Oe};Gw=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Of=function(t,e,n){switch(e){case"input":if(xf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Wh(i);if(!r)throw Error(Q(90));Pw(i),xf(i,r)}}}break;case"textarea":Cw(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};Nw=Rm;Ow=vs;var _x={usingClientEntryPoint:!1,Events:[ru,Eo,Wh,Lw,bw,Rm]},Ja={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vx={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||mx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{zh=wc.inject(vx),si=wc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_x;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(e))throw Error(Q(200));return px(t,e,null,n)};fn.createRoot=function(t,e){if(!Vm(t))throw Error(Q(299));var n=!1,i="",r=mE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Om(t,1,!1,null,null,n,!1,i,r),t[Mi]=e.current,Ol(t.nodeType===8?t.parentNode:t),new Dm(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Vw(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return vs(t)};fn.hydrate=function(t,e,n){if(!Jh(e))throw Error(Q(200));return ed(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Vm(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=mE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=pE(e,null,t,1,n??null,r,!1,o,l),t[Mi]=e.current,Ol(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Xh(e)};fn.render=function(t,e,n){if(!Jh(e))throw Error(Q(200));return ed(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Jh(t))throw Error(Q(40));return t._reactRootContainer?(vs(function(){ed(null,null,t,!1,function(){t._reactRootContainer=null,t[Mi]=null})}),!0):!1};fn.unstable_batchedUpdates=Rm;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return ed(t,e,n,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function gE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gE)}catch(t){console.error(t)}}gE(),gw.exports=fn;var _E=gw.exports,vE,Iv=_E;vE=Iv.createRoot,Iv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$l.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const Pv="popstate";function yx(t){t===void 0&&(t={});function e(r,o){let{pathname:l="/",search:h="",hash:d=""}=ks(r.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),fp("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let l=r.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let d=r.location.href,p=d.indexOf("#");h=p===-1?d:d.slice(0,p)}return h+"#"+(typeof o=="string"?o:wh(o))}function i(r,o){Fm(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Ex(e,n,i,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wx(){return Math.random().toString(36).substr(2,8)}function Sv(t,e){return{usr:t.state,key:t.key,idx:e}}function fp(t,e,n,i){return n===void 0&&(n=null),$l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ks(e):e,{state:n,key:e&&e.key||i||wx()})}function wh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ks(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function Ex(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,h=fr.Pop,d=null,p=v();p==null&&(p=0,l.replaceState($l({},l.state,{idx:p}),""));function v(){return(l.state||{idx:null}).idx}function y(){h=fr.Pop;let U=v(),R=U==null?null:U-p;p=U,d&&d({action:h,location:V.location,delta:R})}function T(U,R){h=fr.Push;let C=fp(V.location,U,R);n&&n(C,U),p=v()+1;let N=Sv(C,p),H=V.createHref(C);try{l.pushState(N,"",H)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;r.location.assign(H)}o&&d&&d({action:h,location:V.location,delta:1})}function S(U,R){h=fr.Replace;let C=fp(V.location,U,R);n&&n(C,U),p=v();let N=Sv(C,p),H=V.createHref(C);l.replaceState(N,"",H),o&&d&&d({action:h,location:V.location,delta:0})}function M(U){let R=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof U=="string"?U:wh(U);return C=C.replace(/ $/,"%20"),rt(R,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,R)}let V={get action(){return h},get location(){return t(r,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Pv,y),d=U,()=>{r.removeEventListener(Pv,y),d=null}},createHref(U){return e(r,U)},createURL:M,encodeLocation(U){let R=M(U);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:S,go(U){return l.go(U)}};return V}var Cv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cv||(Cv={}));function Tx(t,e,n){return n===void 0&&(n="/"),Ix(t,e,n)}function Ix(t,e,n,i){let r=typeof e=="string"?ks(e):e,o=jm(r.pathname||"/",n);if(o==null)return null;let l=yE(t);Px(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=Dx(o);h=Nx(l[d],p)}return h}function yE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(rt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=Ir([i,d.relativePath]),v=n.concat(d);o.children&&o.children.length>0&&(rt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),yE(o.children,e,v,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:Lx(p,o.index),routesMeta:v})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))r(o,l);else for(let d of wE(o.path))r(o,l,d)}),e}function wE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=wE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function Px(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bx(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Sx=/^:[\w-]+$/,Cx=3,xx=2,Ax=1,kx=10,Rx=-2,xv=t=>t==="*";function Lx(t,e){let n=t.split("/"),i=n.length;return n.some(xv)&&(i+=Rx),e&&(i+=xx),n.filter(r=>!xv(r)).reduce((r,o)=>r+(Sx.test(o)?Cx:o===""?Ax:kx),i)}function bx(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Nx(t,e,n){let{routesMeta:i}=t,r={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,v=o==="/"?e:e.slice(o.length)||"/",y=Ox({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},v),T=d.route;if(!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:Ir([o,y.pathname]),pathnameBase:zx(Ir([o,y.pathnameBase])),route:T}),y.pathnameBase!=="/"&&(o=Ir([o,y.pathnameBase]))}return l}function Ox(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Mx(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((p,v,y)=>{let{paramName:T,isOptional:S}=v;if(T==="*"){let V=h[y]||"";l=o.slice(0,o.length-V.length).replace(/(.)\/+$/,"$1")}const M=h[y];return S&&!M?p[T]=void 0:p[T]=(M||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function Mx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Dx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Vx(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ks(t):t;return{pathname:n?n.startsWith("/")?n:Fx(n,e):e,search:Ux(i),hash:Bx(r)}}function Fx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function of(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zm(t,e){let n=jx(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Um(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ks(t):(r=$l({},t),rt(!r.pathname||!r.pathname.includes("?"),of("?","pathname","search",r)),rt(!r.pathname||!r.pathname.includes("#"),of("#","pathname","hash",r)),rt(!r.search||!r.search.includes("#"),of("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,h;if(l==null)h=n;else{let y=e.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),y-=1;r.pathname=T.join("/")}h=y>=0?e[y]:"/"}let d=Vx(r,h),p=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||v)&&(d.pathname+="/"),d}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),zx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ux=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Bx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $x(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EE=["post","put","patch","delete"];new Set(EE);const Wx=["get",...EE];new Set(Wx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wl.apply(this,arguments)}const Bm=W.createContext(null),Hx=W.createContext(null),Dr=W.createContext(null),td=W.createContext(null),Vr=W.createContext({outlet:null,matches:[],isDataRoute:!1}),TE=W.createContext(null);function qx(t,e){let{relative:n}=e===void 0?{}:e;na()||rt(!1);let{basename:i,navigator:r}=W.useContext(Dr),{hash:o,pathname:l,search:h}=PE(t,{relative:n}),d=l;return i!=="/"&&(d=l==="/"?i:Ir([i,l])),r.createHref({pathname:d,search:h,hash:o})}function na(){return W.useContext(td)!=null}function ou(){return na()||rt(!1),W.useContext(td).location}function IE(t){W.useContext(Dr).static||W.useLayoutEffect(t)}function ia(){let{isDataRoute:t}=W.useContext(Vr);return t?sA():Gx()}function Gx(){na()||rt(!1);let t=W.useContext(Bm),{basename:e,future:n,navigator:i}=W.useContext(Dr),{matches:r}=W.useContext(Vr),{pathname:o}=ou(),l=JSON.stringify(zm(r,n.v7_relativeSplatPath)),h=W.useRef(!1);return IE(()=>{h.current=!0}),W.useCallback(function(p,v){if(v===void 0&&(v={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let y=Um(p,JSON.parse(l),o,v.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ir([e,y.pathname])),(v.replace?i.replace:i.push)(y,v.state,v)},[e,i,l,o,t])}function PE(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=W.useContext(Dr),{matches:r}=W.useContext(Vr),{pathname:o}=ou(),l=JSON.stringify(zm(r,i.v7_relativeSplatPath));return W.useMemo(()=>Um(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function Kx(t,e){return Zx(t,e)}function Zx(t,e,n,i){na()||rt(!1);let{navigator:r}=W.useContext(Dr),{matches:o}=W.useContext(Vr),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=ou(),v;if(e){var y;let U=typeof e=="string"?ks(e):e;d==="/"||(y=U.pathname)!=null&&y.startsWith(d)||rt(!1),v=U}else v=p;let T=v.pathname||"/",S=T;if(d!=="/"){let U=d.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(U.length).join("/")}let M=Tx(t,{pathname:S}),V=eA(M&&M.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:Ir([d,r.encodeLocation?r.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:Ir([d,r.encodeLocation?r.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&V?W.createElement(td.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:fr.Pop}},V):V}function Qx(){let t=rA(),e=$x(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:r},n):null,null)}const Yx=W.createElement(Qx,null);class Xx extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(Vr.Provider,{value:this.props.routeContext},W.createElement(TE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jx(t){let{routeContext:e,match:n,children:i}=t,r=W.useContext(Bm);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(Vr.Provider,{value:e},i)}function eA(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(r=n)==null?void 0:r.errors;if(h!=null){let v=l.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||rt(!1),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<l.length;v++){let y=l[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=v),y.route.id){let{loaderData:T,errors:S}=n,M=y.route.loader&&T[y.route.id]===void 0&&(!S||S[y.route.id]===void 0);if(y.route.lazy||M){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((v,y,T)=>{let S,M=!1,V=null,U=null;n&&(S=h&&y.route.id?h[y.route.id]:void 0,V=y.route.errorElement||Yx,d&&(p<0&&T===0?(oA("route-fallback"),M=!0,U=null):p===T&&(M=!0,U=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,T+1)),C=()=>{let N;return S?N=V:M?N=U:y.route.Component?N=W.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=v,W.createElement(Jx,{match:y,routeContext:{outlet:v,matches:R,isDataRoute:n!=null},children:N})};return n&&(y.route.ErrorBoundary||y.route.errorElement||T===0)?W.createElement(Xx,{location:n.location,revalidation:n.revalidation,component:V,error:S,children:C(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):C()},null)}var SE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(SE||{}),CE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(CE||{});function tA(t){let e=W.useContext(Bm);return e||rt(!1),e}function nA(t){let e=W.useContext(Hx);return e||rt(!1),e}function iA(t){let e=W.useContext(Vr);return e||rt(!1),e}function xE(t){let e=iA(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function rA(){var t;let e=W.useContext(TE),n=nA(),i=xE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function sA(){let{router:t}=tA(SE.UseNavigateStable),e=xE(CE.UseNavigateStable),n=W.useRef(!1);return IE(()=>{n.current=!0}),W.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Wl({fromRouteId:e},o)))},[t,e])}const Av={};function oA(t,e,n){Av[t]||(Av[t]=!0)}function aA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lA(t){let{to:e,replace:n,state:i,relative:r}=t;na()||rt(!1);let{future:o,static:l}=W.useContext(Dr),{matches:h}=W.useContext(Vr),{pathname:d}=ou(),p=ia(),v=Um(e,zm(h,o.v7_relativeSplatPath),d,r==="path"),y=JSON.stringify(v);return W.useEffect(()=>p(JSON.parse(y),{replace:n,state:i,relative:r}),[p,y,r,n,i]),null}function ti(t){rt(!1)}function uA(t){let{basename:e="/",children:n=null,location:i,navigationType:r=fr.Pop,navigator:o,static:l=!1,future:h}=t;na()&&rt(!1);let d=e.replace(/^\/*/,"/"),p=W.useMemo(()=>({basename:d,navigator:o,static:l,future:Wl({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=ks(i));let{pathname:v="/",search:y="",hash:T="",state:S=null,key:M="default"}=i,V=W.useMemo(()=>{let U=jm(v,d);return U==null?null:{location:{pathname:U,search:y,hash:T,state:S,key:M},navigationType:r}},[d,v,y,T,S,M,r]);return V==null?null:W.createElement(Dr.Provider,{value:p},W.createElement(td.Provider,{children:n,value:V}))}function cA(t){let{children:e,location:n}=t;return Kx(pp(e),n)}new Promise(()=>{});function pp(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(i,r)=>{if(!W.isValidElement(i))return;let o=[...e,r];if(i.type===W.Fragment){n.push.apply(n,pp(i.props.children,o));return}i.type!==ti&&rt(!1),!i.props.index||!i.props.children||rt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=pp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mp.apply(this,arguments)}function hA(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function dA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fA(t,e){return t.button===0&&(!e||e==="_self")&&!dA(t)}const pA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mA="6";try{window.__reactRouterVersion=mA}catch{}const gA="startTransition",kv=lS[gA];function _A(t){let{basename:e,children:n,future:i,window:r}=t,o=W.useRef();o.current==null&&(o.current=yx({window:r,v5Compat:!0}));let l=o.current,[h,d]=W.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},v=W.useCallback(y=>{p&&kv?kv(()=>d(y)):d(y)},[d,p]);return W.useLayoutEffect(()=>l.listen(v),[l,v]),W.useEffect(()=>aA(i),[i]),W.createElement(uA,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}const vA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=W.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:v,viewTransition:y}=e,T=hA(e,pA),{basename:S}=W.useContext(Dr),M,V=!1;if(typeof p=="string"&&yA.test(p)&&(M=p,vA))try{let N=new URL(window.location.href),H=p.startsWith("//")?new URL(N.protocol+p):new URL(p),Y=jm(H.pathname,S);H.origin===N.origin&&Y!=null?p=Y+H.search+H.hash:V=!0}catch{}let U=qx(p,{relative:r}),R=wA(p,{replace:l,state:h,target:d,preventScrollReset:v,relative:r,viewTransition:y});function C(N){i&&i(N),N.defaultPrevented||R(N)}return W.createElement("a",mp({},T,{href:M||U,onClick:V||o?i:C,ref:n,target:d}))});var Rv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rv||(Rv={}));var Lv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lv||(Lv={}));function wA(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,d=ia(),p=ou(),v=PE(t,{relative:l});return W.useCallback(y=>{if(fA(y,n)){y.preventDefault();let T=i!==void 0?i:wh(p)===wh(v);d(t,{replace:T,state:r,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,v,i,r,n,t,o,l,h])}var bv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},EA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],h=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},kE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,h=l?t[r+1]:0,d=r+2<t.length,p=d?t[r+2]:0,v=o>>2,y=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,S=p&63;d||(S=64,l||(T=64)),i.push(n[v],n[y],n[T],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||h==null||p==null||y==null)throw new TA;const T=o<<2|h>>4;if(i.push(T),p!==64){const S=h<<4&240|p>>2;if(i.push(S),y!==64){const M=p<<6&192|y;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IA=function(t){const e=AE(t);return kE.encodeByteArray(e,!0)},Eh=function(t){return IA(t).replace(/\./g,"")},RE=function(t){try{return kE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=()=>PA().__FIREBASE_DEFAULTS__,CA=()=>{if(typeof process>"u"||typeof bv>"u")return;const t=bv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RE(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return SA()||CA()||xA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LE=t=>{var e,n;return(n=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AA=t=>{const e=LE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},bE=()=>{var t;return(t=nd())===null||t===void 0?void 0:t.config},NE=t=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Eh(JSON.stringify(n)),Eh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function bA(){var t;const e=(t=nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MA(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DA(){return!bA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ME(){try{return typeof indexedDB=="object"}catch{return!1}}function DE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function VA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="FirebaseError";class Kn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=FA,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rs.prototype.create)}}class Rs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?jA(o,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Kn(r,h,i)}}function jA(t,e){return t.replace(zA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const zA=/\{\$([^}]+)}/g;function UA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(Nv(o)&&Nv(l)){if(!Hl(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function ol(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BA(t,e){const n=new $A(t,e);return n.subscribe.bind(n)}class $A{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");WA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=af),r.error===void 0&&(r.error=af),r.complete===void 0&&(r.complete=af);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function af(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1e3,qA=2,GA=4*60*60*1e3,KA=.5;function Ov(t,e=HA,n=qA){const i=e*Math.pow(n,t),r=Math.round(KA*i*(Math.random()-.5)*2);return Math.min(GA,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class qn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new kA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YA(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QA(t){return t===is?void 0:t}function YA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const JA={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},ek=xe.INFO,tk={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},nk=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=tk[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class id{constructor(e){this.name=e,this._logLevel=ek,this._logHandler=nk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const ik=(t,e)=>e.some(n=>t instanceof n);let Mv,Dv;function rk(){return Mv||(Mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sk(){return Dv||(Dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,gp=new WeakMap,FE=new WeakMap,lf=new WeakMap,$m=new WeakMap;function ok(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Pr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,t)}).catch(()=>{}),$m.set(e,t),e}function ak(t){if(gp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});gp.set(t,e)}let _p={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lk(t){_p=t(_p)}function uk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(uf(this),e,...n);return FE.set(i,e.sort?e.sort():[e]),Pr(i)}:sk().includes(t)?function(...e){return t.apply(uf(this),e),Pr(VE.get(this))}:function(...e){return Pr(t.apply(uf(this),e))}}function ck(t){return typeof t=="function"?uk(t):(t instanceof IDBTransaction&&ak(t),ik(t,rk())?new Proxy(t,_p):t)}function Pr(t){if(t instanceof IDBRequest)return ok(t);if(lf.has(t))return lf.get(t);const e=ck(t);return e!==t&&(lf.set(t,e),$m.set(e,t)),e}const uf=t=>$m.get(t);function jE(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),h=Pr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Pr(l.result),d.oldVersion,d.newVersion,Pr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const hk=["get","getKey","getAll","getAllKeys","count"],dk=["put","add","delete","clear"],cf=new Map;function Vv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cf.get(e))return cf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=dk.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hk.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,r?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&d.done]))[0]};return cf.set(e,o),o}lk(t=>({...t,get:(e,n,i)=>Vv(e,n)||t.get(e,n,i),has:(e,n)=>!!Vv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pk(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function pk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vp="@firebase/app",Fv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new id("@firebase/app"),mk="@firebase/app-compat",gk="@firebase/analytics-compat",_k="@firebase/analytics",vk="@firebase/app-check-compat",yk="@firebase/app-check",wk="@firebase/auth",Ek="@firebase/auth-compat",Tk="@firebase/database",Ik="@firebase/data-connect",Pk="@firebase/database-compat",Sk="@firebase/functions",Ck="@firebase/functions-compat",xk="@firebase/installations",Ak="@firebase/installations-compat",kk="@firebase/messaging",Rk="@firebase/messaging-compat",Lk="@firebase/performance",bk="@firebase/performance-compat",Nk="@firebase/remote-config",Ok="@firebase/remote-config-compat",Mk="@firebase/storage",Dk="@firebase/storage-compat",Vk="@firebase/firestore",Fk="@firebase/vertexai-preview",jk="@firebase/firestore-compat",zk="firebase",Uk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",Bk={[vp]:"fire-core",[mk]:"fire-core-compat",[_k]:"fire-analytics",[gk]:"fire-analytics-compat",[yk]:"fire-app-check",[vk]:"fire-app-check-compat",[wk]:"fire-auth",[Ek]:"fire-auth-compat",[Tk]:"fire-rtdb",[Ik]:"fire-data-connect",[Pk]:"fire-rtdb-compat",[Sk]:"fire-fn",[Ck]:"fire-fn-compat",[xk]:"fire-iid",[Ak]:"fire-iid-compat",[kk]:"fire-fcm",[Rk]:"fire-fcm-compat",[Lk]:"fire-perf",[bk]:"fire-perf-compat",[Nk]:"fire-rc",[Ok]:"fire-rc-compat",[Mk]:"fire-gcs",[Dk]:"fire-gcs-compat",[Vk]:"fire-fst",[jk]:"fire-fst-compat",[Fk]:"fire-vertex","fire-js":"fire-js",[zk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,$k=new Map,wp=new Map;function jv(t,e){try{t.container.addComponent(e)}catch(n){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(wp.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,t);for(const n of Th.values())jv(n,t);for(const n of $k.values())jv(n,t);return!0}function Ls(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Rs("app","Firebase",Wk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=Uk;function zE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Sr.create("bad-app-name",{appName:String(r)});if(n||(n=bE()),!n)throw Sr.create("no-options");const o=Th.get(r);if(o){if(Hl(n,o.options)&&Hl(i,o.config))return o;throw Sr.create("duplicate-app",{appName:r})}const l=new XA(r);for(const d of wp.values())l.addComponent(d);const h=new Hk(n,i,l);return Th.set(r,h),h}function Wm(t=yp){const e=Th.get(t);if(!e&&t===yp&&bE())return zE();if(!e)throw Sr.create("no-app",{appName:t});return e}function xn(t,e,n){var i;let r=(i=Bk[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(h.join(" "));return}ci(new qn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="firebase-heartbeat-database",Gk=1,ql="firebase-heartbeat-store";let hf=null;function UE(){return hf||(hf=jE(qk,Gk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),hf}async function Kk(t){try{const n=(await UE()).transaction(ql),i=await n.objectStore(ql).get(BE(t));return await n.done,i}catch(e){if(e instanceof Kn)Fi.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(n.message)}}}async function zv(t,e){try{const i=(await UE()).transaction(ql,"readwrite");await i.objectStore(ql).put(e,BE(t)),await i.done}catch(n){if(n instanceof Kn)Fi.warn(n.message);else{const i=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fi.warn(i.message)}}}function BE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=1024,Qk=30*24*60*60*1e3;class Yk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Uv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=Qk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Fi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uv(),{heartbeatsToSend:i,unsentEntries:r}=Xk(this._heartbeatsCache.heartbeats),o=Eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fi.warn(n),""}}}function Uv(){return new Date().toISOString().substring(0,10)}function Xk(t,e=Zk){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),Bv(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Bv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Jk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ME()?DE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Kk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Bv(t){return Eh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){ci(new qn("platform-logger",e=>new fk(e),"PRIVATE")),ci(new qn("heartbeat",e=>new Yk(e),"PRIVATE")),xn(vp,Fv,t),xn(vp,Fv,"esm2017"),xn("fire-js","")}e1("");function Hm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function $E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t1=$E,WE=new Rs("auth","Firebase",$E());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new id("@firebase/auth");function n1(t,...e){Ih.logLevel<=xe.WARN&&Ih.warn(`Auth (${ra}): ${t}`,...e)}function zc(t,...e){Ih.logLevel<=xe.ERROR&&Ih.error(`Auth (${ra}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw Gm(t,...e)}function $n(t,...e){return Gm(t,...e)}function qm(t,e,n){const i=Object.assign(Object.assign({},t1()),{[e]:n});return new Rs("auth","Firebase",i).create(e,{appName:t.name})}function Ni(t){return qm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function i1(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Rn(t,"argument-error"),qm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return WE.create(t,...e)}function he(t,e,...n){if(!t)throw Gm(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zc(e),new Error(e)}function ji(t,e){t||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function r1(){return $v()==="http:"||$v()==="https:"}function $v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r1()||OE()||"connection"in navigator)?navigator.onLine:!0}function o1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=LA()||OA()}get(){return s1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e){ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new lu(3e4,6e4);function Fr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $i(t,e,n,i,r={}){return qE(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=au(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},o);return NA()||(p.referrerPolicy="no-referrer"),HE.fetch()(GE(t,t.config.apiHost,n,h),p)})}async function qE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},a1),e);try{const r=new c1(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Ec(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Ec(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Ec(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qm(t,v,p);Rn(t,v)}}catch(r){if(r instanceof Kn)throw r;Rn(t,"network-request-failed",{message:String(r)})}}async function uu(t,e,n,i,r={}){const o=await $i(t,e,n,i,r);return"mfaPendingCredential"in o&&Rn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function GE(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Km(t.config,r):`${t.config.apiScheme}://${r}`}function u1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i($n(this.auth,"network-request-failed")),l1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ec(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=$n(t,e,i);return r.customData._tokenResponse=n,r}function Wv(t){return t!==void 0&&t.enterprise!==void 0}class h1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return u1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function d1(t,e){return $i(t,"GET","/v2/recaptchaConfig",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t,e){return $i(t,"POST","/v1/accounts:delete",e)}async function KE(t,e){return $i(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p1(t,e=!1){const n=st(t),i=await n.getIdToken(e),r=Zm(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:wl(df(r.auth_time)),issuedAtTime:wl(df(r.iat)),expirationTime:wl(df(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function df(t){return Number(t)*1e3}function Zm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return zc("JWT malformed, contained fewer than 3 sections"),null;try{const r=RE(n);return r?JSON.parse(r):(zc("Failed to decode base64 JWT payload"),null)}catch(r){return zc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Hv(t){const e=Zm(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kn&&m1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function m1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ho(t,KE(n,{idToken:i}));he(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ZE(o.providerUserInfo):[],h=v1(t.providerData,l),d=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,y)}async function _1(t){const e=st(t);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v1(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ZE(t){return t.map(e=>{var{providerId:n}=e,i=Hm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(t,e){const n=await qE(t,{},async()=>{const i=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=GE(t,r,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",HE.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function w1(t,e){return $i(t,"POST","/v2/accounts:revokeToken",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Hv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await y1(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new Oo;return i&&(he(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(he(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ri{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new g1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ho(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return p1(this,e)}reload(){return _1(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await Ho(this,f1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,h,d,p,v;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,M=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,R=(p=n.createdAt)!==null&&p!==void 0?p:void 0,C=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:N,emailVerified:H,isAnonymous:Y,providerData:J,stsTokenManager:A}=n;he(N&&A,e,"internal-error");const P=Oo.fromJSON(this.name,A);he(typeof N=="string",e,"internal-error"),nr(y,e.name),nr(T,e.name),he(typeof H=="boolean",e,"internal-error"),he(typeof Y=="boolean",e,"internal-error"),nr(S,e.name),nr(M,e.name),nr(V,e.name),nr(U,e.name),nr(R,e.name),nr(C,e.name);const x=new Ri({uid:N,auth:e,email:T,emailVerified:H,displayName:y,isAnonymous:Y,photoURL:M,phoneNumber:S,tenantId:V,stsTokenManager:P,createdAt:R,lastLoginAt:C});return J&&Array.isArray(J)&&(x.providerData=J.map(b=>Object.assign({},b))),U&&(x._redirectEventId=U),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new Oo;r.updateFromServerResponse(n);const o=new Ri({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ph(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];he(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?ZE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new Oo;h.updateFromIdToken(i);const d=new Ri({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Tp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function Li(t){ji(t instanceof Function,"Expected a class definition");let e=qv.get(t);return e?(ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QE.type="NONE";const Gv=QE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t,e,n){return`firebase:${t}:${e}:${n}`}class Mo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Uc(this.userKey,r.apiKey,o),this.fullPersistenceKey=Uc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Mo(Li(Gv),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||Li(Gv);const l=Uc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const v=await p._get(l);if(v){const y=Ri._fromJSON(e,v);p!==o&&(h=y),o=p;break}}catch{}const d=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Mo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Mo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nT(e))return"Blackberry";if(iT(e))return"Webos";if(XE(e))return"Safari";if((e.includes("chrome/")||JE(e))&&!e.includes("edge/"))return"Chrome";if(tT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function YE(t=Ft()){return/firefox\//i.test(t)}function XE(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JE(t=Ft()){return/crios\//i.test(t)}function eT(t=Ft()){return/iemobile/i.test(t)}function tT(t=Ft()){return/android/i.test(t)}function nT(t=Ft()){return/blackberry/i.test(t)}function iT(t=Ft()){return/webos/i.test(t)}function Qm(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function E1(t=Ft()){var e;return Qm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function T1(){return MA()&&document.documentMode===10}function rT(t=Ft()){return Qm(t)||tT(t)||iT(t)||nT(t)||/windows phone/i.test(t)||eT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t,e=[]){let n;switch(t){case"Browser":n=Kv(Ft());break;case"Worker":n=`${Kv(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ra}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(t,e={}){return $i(t,"GET","/v2/passwordPolicy",Fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=6;class C1{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:S1,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zv(this),this.idTokenSubscription=new Zv(this),this.beforeStateQueue=new I1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Li(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await KE(this,{idToken:e}),i=await Ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Ni(this));const n=e?st(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P1(this),n=new C1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await w1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Li(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[Li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&n1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jr(t){return st(t)}class Zv{constructor(e){this.auth=e,this.observer=null,this.addObserver=BA(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A1(t){rd=t}function oT(t){return rd.loadJS(t)}function k1(){return rd.recaptchaEnterpriseScript}function R1(){return rd.gapiScript}function L1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const b1="recaptcha-enterprise",N1="NO_RECAPTCHA";class O1{constructor(e){this.type=b1,this.auth=jr(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{d1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new h1(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function r(o,l,h){const d=window.grecaptcha;Wv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(N1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&Wv(window.grecaptcha))r(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=k1();d.length!==0&&(d+=h),oT(d).then(()=>{r(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Qv(t,e,n,i=!1){const r=new O1(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ip(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Qv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t,e){const n=Ls(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Hl(o,e??{}))return r;Rn(r,"already-initialized")}return n.initialize({options:e})}function D1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function V1(t,e,n){const i=jr(t);he(i._canInitEmulator,i,"emulator-config-failed"),he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=aT(e),{host:l,port:h}=F1(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),j1()}function aT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function F1(t){const e=aT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Yv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Yv(l)}}}function Yv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function j1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function z1(t,e){return $i(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(t,e){return uu(t,"POST","/v1/accounts:signInWithPassword",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}async function $1(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends Ym{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Gl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Gl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,n,"signInWithPassword",U1);case"emailLink":return B1(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,i,"signUpPassword",z1);case"emailLink":return $1(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e){return uu(t,"POST","/v1/accounts:signInWithIdp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="http://localhost";class ys extends Ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Hm(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new ys(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Do(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Do(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Do(e,n)}buildRequest(){const e={requestUri:W1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function q1(t){const e=sl(ol(t)).link,n=e?sl(ol(e)).deep_link_id:null,i=sl(ol(t)).deep_link_id;return(i?sl(ol(i)).link:null)||i||n||e||t}class Xm{constructor(e){var n,i,r,o,l,h;const d=sl(ol(e)),p=(n=d.apiKey)!==null&&n!==void 0?n:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,y=H1((r=d.mode)!==null&&r!==void 0?r:null);he(p&&v&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=q1(e);try{return new Xm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,n){return Gl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xm.parseLink(n);return he(i,"argument-error"),Gl._fromEmailAndCode(e,i.code,i.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends cu{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ys._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ri.credential(n,i)}catch{return null}}}ri.GOOGLE_SIGN_IN_METHOD="google.com";ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends cu{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends cu{constructor(){super("twitter.com")}static credential(e,n){return ys._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ur.credential(n,i)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(t,e){return uu(t,"POST","/v1/accounts:signUp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Ri._fromIdTokenResponse(e,i,r),l=Xv(i);return new ws({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Xv(i);return new ws({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Xv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Kn{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Sh(e,n,i,r)}}function lT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(t,o,e,i):o})}async function K1(t,e,n=!1){const i=await Ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ws._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(t,e,n=!1){const{auth:i}=t;if(zn(i.app))return Promise.reject(Ni(i));const r="reauthenticate";try{const o=await Ho(t,lT(i,r,e,t),n);he(o.idToken,i,"internal-error");const l=Zm(o.idToken);he(l,i,"internal-error");const{sub:h}=l;return he(t.uid===h,i,"user-mismatch"),ws._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Rn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(t,e,n=!1){if(zn(t.app))return Promise.reject(Ni(t));const i="signIn",r=await lT(t,i,e),o=await ws._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function Q1(t,e){return uT(jr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t){const e=jr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hT(t,e,n){if(zn(t.app))return Promise.reject(Ni(t));const i=jr(t),l=await Ip(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G1).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&cT(t),d}),h=await ws._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function Y1(t,e,n){return zn(t.app)?Promise.reject(Ni(t)):Q1(st(t),sa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cT(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t,e){return $i(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=st(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Ho(i,X1(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const h=i.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function eR(t,e,n,i){return st(t).onIdTokenChanged(e,n,i)}function tR(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function nR(t,e,n,i){return st(t).onAuthStateChanged(e,n,i)}function dT(t){return st(t).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=1e3,rR=10;class pT extends fT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);T1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,rR):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},iR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pT.type="LOCAL";const sR=pT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT extends fT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mT.type="SESSION";const gT=mT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await oR(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=eg("",20);r.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const T=y;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function lR(t){ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function uR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hR(){return _T()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="firebaseLocalStorageDb",dR=1,xh="firebaseLocalStorage",yT="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function od(t,e){return t.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function fR(){const t=indexedDB.deleteDatabase(vT);return new hu(t).toPromise()}function Pp(){const t=indexedDB.open(vT,dR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xh,{keyPath:yT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xh)?e(i):(i.close(),await fR(),e(await Pp()))})})}async function Jv(t,e,n){const i=od(t,!0).put({[yT]:e,value:n});return new hu(i).toPromise()}async function pR(t,e){const n=od(t,!1).get(e),i=await new hu(n).toPromise();return i===void 0?null:i.value}function ey(t,e){const n=od(t,!0).delete(e);return new hu(n).toPromise()}const mR=800,gR=3;class wT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>gR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _T()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sd._getInstance(hR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await uR(),!this.activeServiceWorker)return;this.sender=new aR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await Jv(e,Ch,"1"),await ey(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Jv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>pR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ey(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=od(r,!1).getAll();return new hu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wT.type="LOCAL";const _R=wT;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t,e){return e?Li(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Do(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vR(t){return uT(t.auth,new tg(t),t.bypassAuthState)}function yR(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),Z1(n,new tg(t),t.bypassAuthState)}async function wR(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),K1(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vR;case"linkViaPopup":case"linkViaRedirect":return wR;case"reauthViaPopup":case"reauthViaRedirect":return yR;default:Rn(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new lu(2e3,1e4);async function IT(t,e,n){if(zn(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const i=jr(t);i1(t,e,Jm);const r=ET(i,n);return new as(i,"signInViaPopup",e,r).executeNotNull()}class as extends TT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ER.get())};e()}}as.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="pendingRedirect",Bc=new Map;class IR extends TT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Bc.get(this.auth._key());if(!e){try{const i=await PR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PR(t,e){const n=xR(e),i=CR(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function SR(t,e){Bc.set(t._key(),e)}function CR(t){return Li(t._redirectPersistence)}function xR(t){return Uc(TR,t.config.apiKey,t.name)}async function AR(t,e,n=!1){if(zn(t.app))return Promise.reject(Ni(t));const i=jr(t),r=ET(i,e),l=await new IR(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=10*60*1e3;class RR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!PT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError($n(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ty(e))}saveEventToCache(e){this.cachedEventUids.add(ty(e)),this.lastProcessedEventTime=Date.now()}}function ty(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(t,e={}){return $i(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OR=/^https?/;async function MR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bR(t);for(const n of e)try{if(DR(n))return}catch{}Rn(t,"unauthorized-domain")}function DR(t){const e=Ep(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!OR.test(n))return!1;if(NR.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new lu(3e4,6e4);function ny(){const t=ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FR(t){return new Promise((e,n)=>{var i,r,o;function l(){ny(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ny(),n($n(t,"network-request-failed"))},timeout:VR.get()})}if(!((r=(i=ai().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ai().gapi)===null||o===void 0)&&o.load)l();else{const h=L1("iframefcb");return ai()[h]=()=>{gapi.load?l():n($n(t,"network-request-failed"))},oT(`${R1()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw $c=null,e})}let $c=null;function jR(t){return $c=$c||FR(t),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new lu(5e3,15e3),UR="__/auth/iframe",BR="emulator/auth/iframe",$R={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HR(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Km(e,BR):`https://${t.config.authDomain}/${UR}`,i={apiKey:e.apiKey,appName:t.name,v:ra},r=WR.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${au(i).slice(1)}`}async function qR(t){const e=await jR(t),n=ai().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:HR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$R,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=$n(t,"network-request-failed"),h=ai().setTimeout(()=>{o(l)},zR.get());function d(){ai().clearTimeout(h),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KR=500,ZR=600,QR="_blank",YR="http://localhost";class iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XR(t,e,n,i=KR,r=ZR){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},GR),{width:i.toString(),height:r.toString(),top:o,left:l}),p=Ft().toLowerCase();n&&(h=JE(p)?QR:n),YE(p)&&(e=e||YR,d.scrollbars="yes");const v=Object.entries(d).reduce((T,[S,M])=>`${T}${S}=${M},`,"");if(E1(p)&&h!=="_self")return JR(e||"",h),new iy(null);const y=window.open(e||"",h,v);he(y,t,"popup-blocked");try{y.focus()}catch{}return new iy(y)}function JR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="__/auth/handler",tL="emulator/auth/handler",nL=encodeURIComponent("fac");async function ry(t,e,n,i,r,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ra,eventId:r};if(e instanceof Jm){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",UA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,y]of Object.entries({}))l[v]=y}if(e instanceof cu){const v=e.getScopes().filter(y=>y!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),p=d?`#${nL}=${encodeURIComponent(d)}`:"";return`${iL(t)}?${au(h).slice(1)}${p}`}function iL({config:t}){return t.emulator?Km(t,tL):`https://${t.authDomain}/${eL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="webStorageSupport";class rL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gT,this._completeRedirectFn=AR,this._overrideRedirectResult=SR}async _openPopup(e,n,i,r){var o;ji((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await ry(e,n,i,Ep(),r);return XR(e,l,eg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await ry(e,n,i,Ep(),r);return lR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ji(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await qR(e),i=new RR(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ff,{type:ff},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[ff];l!==void 0&&n(!!l),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rT()||XE()||Qm()}}const sL=rL;var sy="@firebase/auth",oy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lL(t){ci(new qn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;he(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sT(t)},p=new x1(i,r,o,d);return D1(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ci(new qn("auth-internal",e=>{const n=jr(e.getProvider("auth").getImmediate());return(i=>new oL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(sy,oy,aL(t)),xn(sy,oy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=5*60,cL=NE("authIdTokenMaxAge")||uL;let ay=null;const hL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>cL)return;const r=n==null?void 0:n.token;ay!==r&&(ay=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function dL(t=Wm()){const e=Ls(t,"auth");if(e.isInitialized())return e.getImmediate();const n=M1(t,{popupRedirectResolver:sL,persistence:[_R,sR,gT]}),i=NE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=hL(o.toString());tR(n,l,()=>l(n.currentUser)),eR(n,h=>l(h))}}const r=LE("auth");return r&&V1(n,`http://${r}`),n}function fL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}A1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=$n("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",fL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lL("Browser");var pL="firebase",mL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(pL,mL,"app");var ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,ST;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,P){function x(){}x.prototype=P.prototype,A.D=P.prototype,A.prototype=new x,A.prototype.constructor=A,A.C=function(b,D,F){for(var O=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)O[Xe-2]=arguments[Xe];return P.prototype[D].apply(b,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,P,x){x||(x=0);var b=Array(16);if(typeof P=="string")for(var D=0;16>D;++D)b[D]=P.charCodeAt(x++)|P.charCodeAt(x++)<<8|P.charCodeAt(x++)<<16|P.charCodeAt(x++)<<24;else for(D=0;16>D;++D)b[D]=P[x++]|P[x++]<<8|P[x++]<<16|P[x++]<<24;P=A.g[0],x=A.g[1],D=A.g[2];var F=A.g[3],O=P+(F^x&(D^F))+b[0]+3614090360&4294967295;P=x+(O<<7&4294967295|O>>>25),O=F+(D^P&(x^D))+b[1]+3905402710&4294967295,F=P+(O<<12&4294967295|O>>>20),O=D+(x^F&(P^x))+b[2]+606105819&4294967295,D=F+(O<<17&4294967295|O>>>15),O=x+(P^D&(F^P))+b[3]+3250441966&4294967295,x=D+(O<<22&4294967295|O>>>10),O=P+(F^x&(D^F))+b[4]+4118548399&4294967295,P=x+(O<<7&4294967295|O>>>25),O=F+(D^P&(x^D))+b[5]+1200080426&4294967295,F=P+(O<<12&4294967295|O>>>20),O=D+(x^F&(P^x))+b[6]+2821735955&4294967295,D=F+(O<<17&4294967295|O>>>15),O=x+(P^D&(F^P))+b[7]+4249261313&4294967295,x=D+(O<<22&4294967295|O>>>10),O=P+(F^x&(D^F))+b[8]+1770035416&4294967295,P=x+(O<<7&4294967295|O>>>25),O=F+(D^P&(x^D))+b[9]+2336552879&4294967295,F=P+(O<<12&4294967295|O>>>20),O=D+(x^F&(P^x))+b[10]+4294925233&4294967295,D=F+(O<<17&4294967295|O>>>15),O=x+(P^D&(F^P))+b[11]+2304563134&4294967295,x=D+(O<<22&4294967295|O>>>10),O=P+(F^x&(D^F))+b[12]+1804603682&4294967295,P=x+(O<<7&4294967295|O>>>25),O=F+(D^P&(x^D))+b[13]+4254626195&4294967295,F=P+(O<<12&4294967295|O>>>20),O=D+(x^F&(P^x))+b[14]+2792965006&4294967295,D=F+(O<<17&4294967295|O>>>15),O=x+(P^D&(F^P))+b[15]+1236535329&4294967295,x=D+(O<<22&4294967295|O>>>10),O=P+(D^F&(x^D))+b[1]+4129170786&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^D&(P^x))+b[6]+3225465664&4294967295,F=P+(O<<9&4294967295|O>>>23),O=D+(P^x&(F^P))+b[11]+643717713&4294967295,D=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(D^F))+b[0]+3921069994&4294967295,x=D+(O<<20&4294967295|O>>>12),O=P+(D^F&(x^D))+b[5]+3593408605&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^D&(P^x))+b[10]+38016083&4294967295,F=P+(O<<9&4294967295|O>>>23),O=D+(P^x&(F^P))+b[15]+3634488961&4294967295,D=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(D^F))+b[4]+3889429448&4294967295,x=D+(O<<20&4294967295|O>>>12),O=P+(D^F&(x^D))+b[9]+568446438&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^D&(P^x))+b[14]+3275163606&4294967295,F=P+(O<<9&4294967295|O>>>23),O=D+(P^x&(F^P))+b[3]+4107603335&4294967295,D=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(D^F))+b[8]+1163531501&4294967295,x=D+(O<<20&4294967295|O>>>12),O=P+(D^F&(x^D))+b[13]+2850285829&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^D&(P^x))+b[2]+4243563512&4294967295,F=P+(O<<9&4294967295|O>>>23),O=D+(P^x&(F^P))+b[7]+1735328473&4294967295,D=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(D^F))+b[12]+2368359562&4294967295,x=D+(O<<20&4294967295|O>>>12),O=P+(x^D^F)+b[5]+4294588738&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^D)+b[8]+2272392833&4294967295,F=P+(O<<11&4294967295|O>>>21),O=D+(F^P^x)+b[11]+1839030562&4294967295,D=F+(O<<16&4294967295|O>>>16),O=x+(D^F^P)+b[14]+4259657740&4294967295,x=D+(O<<23&4294967295|O>>>9),O=P+(x^D^F)+b[1]+2763975236&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^D)+b[4]+1272893353&4294967295,F=P+(O<<11&4294967295|O>>>21),O=D+(F^P^x)+b[7]+4139469664&4294967295,D=F+(O<<16&4294967295|O>>>16),O=x+(D^F^P)+b[10]+3200236656&4294967295,x=D+(O<<23&4294967295|O>>>9),O=P+(x^D^F)+b[13]+681279174&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^D)+b[0]+3936430074&4294967295,F=P+(O<<11&4294967295|O>>>21),O=D+(F^P^x)+b[3]+3572445317&4294967295,D=F+(O<<16&4294967295|O>>>16),O=x+(D^F^P)+b[6]+76029189&4294967295,x=D+(O<<23&4294967295|O>>>9),O=P+(x^D^F)+b[9]+3654602809&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^D)+b[12]+3873151461&4294967295,F=P+(O<<11&4294967295|O>>>21),O=D+(F^P^x)+b[15]+530742520&4294967295,D=F+(O<<16&4294967295|O>>>16),O=x+(D^F^P)+b[2]+3299628645&4294967295,x=D+(O<<23&4294967295|O>>>9),O=P+(D^(x|~F))+b[0]+4096336452&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~D))+b[7]+1126891415&4294967295,F=P+(O<<10&4294967295|O>>>22),O=D+(P^(F|~x))+b[14]+2878612391&4294967295,D=F+(O<<15&4294967295|O>>>17),O=x+(F^(D|~P))+b[5]+4237533241&4294967295,x=D+(O<<21&4294967295|O>>>11),O=P+(D^(x|~F))+b[12]+1700485571&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~D))+b[3]+2399980690&4294967295,F=P+(O<<10&4294967295|O>>>22),O=D+(P^(F|~x))+b[10]+4293915773&4294967295,D=F+(O<<15&4294967295|O>>>17),O=x+(F^(D|~P))+b[1]+2240044497&4294967295,x=D+(O<<21&4294967295|O>>>11),O=P+(D^(x|~F))+b[8]+1873313359&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~D))+b[15]+4264355552&4294967295,F=P+(O<<10&4294967295|O>>>22),O=D+(P^(F|~x))+b[6]+2734768916&4294967295,D=F+(O<<15&4294967295|O>>>17),O=x+(F^(D|~P))+b[13]+1309151649&4294967295,x=D+(O<<21&4294967295|O>>>11),O=P+(D^(x|~F))+b[4]+4149444226&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~D))+b[11]+3174756917&4294967295,F=P+(O<<10&4294967295|O>>>22),O=D+(P^(F|~x))+b[2]+718787259&4294967295,D=F+(O<<15&4294967295|O>>>17),O=x+(F^(D|~P))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+P&4294967295,A.g[1]=A.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+F&4294967295}i.prototype.u=function(A,P){P===void 0&&(P=A.length);for(var x=P-this.blockSize,b=this.B,D=this.h,F=0;F<P;){if(D==0)for(;F<=x;)r(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<P;)if(b[D++]=A.charCodeAt(F++),D==this.blockSize){r(this,b),D=0;break}}else for(;F<P;)if(b[D++]=A[F++],D==this.blockSize){r(this,b),D=0;break}}this.h=D,this.o+=P},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var P=1;P<A.length-8;++P)A[P]=0;var x=8*this.o;for(P=A.length-8;P<A.length;++P)A[P]=x&255,x/=256;for(this.u(A),A=Array(16),P=x=0;4>P;++P)for(var b=0;32>b;b+=8)A[x++]=this.g[P]>>>b&255;return A};function o(A,P){var x=h;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=P(A)}function l(A,P){this.h=P;for(var x=[],b=!0,D=A.length-1;0<=D;D--){var F=A[D]|0;b&&F==P||(x[D]=F,b=!1)}this.g=x}var h={};function d(A){return-128<=A&&128>A?o(A,function(P){return new l([P|0],0>P?-1:0)}):new l([A|0],0>A?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return y;if(0>A)return U(p(-A));for(var P=[],x=1,b=0;A>=x;b++)P[b]=A/x|0,x*=4294967296;return new l(P,0)}function v(A,P){if(A.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(A.charAt(0)=="-")return U(v(A.substring(1),P));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(P,8)),b=y,D=0;D<A.length;D+=8){var F=Math.min(8,A.length-D),O=parseInt(A.substring(D,D+F),P);8>F?(F=p(Math.pow(P,F)),b=b.j(F).add(p(O))):(b=b.j(x),b=b.add(p(O)))}return b}var y=d(0),T=d(1),S=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-U(this).m();for(var A=0,P=1,x=0;x<this.g.length;x++){var b=this.i(x);A+=(0<=b?b:4294967296+b)*P,P*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(M(this))return"0";if(V(this))return"-"+U(this).toString(A);for(var P=p(Math.pow(A,6)),x=this,b="";;){var D=H(x,P).g;x=R(x,D.j(P));var F=((0<x.g.length?x.g[0]:x.h)>>>0).toString(A);if(x=D,M(x))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function M(A){if(A.h!=0)return!1;for(var P=0;P<A.g.length;P++)if(A.g[P]!=0)return!1;return!0}function V(A){return A.h==-1}t.l=function(A){return A=R(this,A),V(A)?-1:M(A)?0:1};function U(A){for(var P=A.g.length,x=[],b=0;b<P;b++)x[b]=~A.g[b];return new l(x,~A.h).add(T)}t.abs=function(){return V(this)?U(this):this},t.add=function(A){for(var P=Math.max(this.g.length,A.g.length),x=[],b=0,D=0;D<=P;D++){var F=b+(this.i(D)&65535)+(A.i(D)&65535),O=(F>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);b=O>>>16,F&=65535,O&=65535,x[D]=O<<16|F}return new l(x,x[x.length-1]&-2147483648?-1:0)};function R(A,P){return A.add(U(P))}t.j=function(A){if(M(this)||M(A))return y;if(V(this))return V(A)?U(this).j(U(A)):U(U(this).j(A));if(V(A))return U(this.j(U(A)));if(0>this.l(S)&&0>A.l(S))return p(this.m()*A.m());for(var P=this.g.length+A.g.length,x=[],b=0;b<2*P;b++)x[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<A.g.length;D++){var F=this.i(b)>>>16,O=this.i(b)&65535,Xe=A.i(D)>>>16,di=A.i(D)&65535;x[2*b+2*D]+=O*di,C(x,2*b+2*D),x[2*b+2*D+1]+=F*di,C(x,2*b+2*D+1),x[2*b+2*D+1]+=O*Xe,C(x,2*b+2*D+1),x[2*b+2*D+2]+=F*Xe,C(x,2*b+2*D+2)}for(b=0;b<P;b++)x[b]=x[2*b+1]<<16|x[2*b];for(b=P;b<2*P;b++)x[b]=0;return new l(x,0)};function C(A,P){for(;(A[P]&65535)!=A[P];)A[P+1]+=A[P]>>>16,A[P]&=65535,P++}function N(A,P){this.g=A,this.h=P}function H(A,P){if(M(P))throw Error("division by zero");if(M(A))return new N(y,y);if(V(A))return P=H(U(A),P),new N(U(P.g),U(P.h));if(V(P))return P=H(A,U(P)),new N(U(P.g),P.h);if(30<A.g.length){if(V(A)||V(P))throw Error("slowDivide_ only works with positive integers.");for(var x=T,b=P;0>=b.l(A);)x=Y(x),b=Y(b);var D=J(x,1),F=J(b,1);for(b=J(b,2),x=J(x,2);!M(b);){var O=F.add(b);0>=O.l(A)&&(D=D.add(x),F=O),b=J(b,1),x=J(x,1)}return P=R(A,D.j(P)),new N(D,P)}for(D=y;0<=A.l(P);){for(x=Math.max(1,Math.floor(A.m()/P.m())),b=Math.ceil(Math.log(x)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=p(x),O=F.j(P);V(O)||0<O.l(A);)x-=b,F=p(x),O=F.j(P);M(F)&&(F=T),D=D.add(F),A=R(A,O)}return new N(D,A)}t.A=function(A){return H(this,A).h},t.and=function(A){for(var P=Math.max(this.g.length,A.g.length),x=[],b=0;b<P;b++)x[b]=this.i(b)&A.i(b);return new l(x,this.h&A.h)},t.or=function(A){for(var P=Math.max(this.g.length,A.g.length),x=[],b=0;b<P;b++)x[b]=this.i(b)|A.i(b);return new l(x,this.h|A.h)},t.xor=function(A){for(var P=Math.max(this.g.length,A.g.length),x=[],b=0;b<P;b++)x[b]=this.i(b)^A.i(b);return new l(x,this.h^A.h)};function Y(A){for(var P=A.g.length+1,x=[],b=0;b<P;b++)x[b]=A.i(b)<<1|A.i(b-1)>>>31;return new l(x,A.h)}function J(A,P){var x=P>>5;P%=32;for(var b=A.g.length-x,D=[],F=0;F<b;F++)D[F]=0<P?A.i(F+x)>>>P|A.i(F+x+1)<<32-P:A.i(F+x);return new l(D,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ST=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,ds=l}).apply(typeof ly<"u"?ly:typeof self<"u"?self:typeof window<"u"?window:{});var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CT,al,xT,Wc,Sp,AT,kT,RT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tc=="object"&&Tc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in _))break e;_=_[j]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var _=0,I=!1,j={next:function(){if(!I&&_<u.length){var $=_++;return{value:m($,u[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(u){return u||function(){return o(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,I),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function T(u,m,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:y,T.apply(null,arguments)}function S(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function M(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,j,$){for(var ee=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ee[Ne-2]=arguments[Ne];return m.prototype[j].apply(I,ee)}}function V(u){const m=u.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function U(u,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(d(I)){const j=u.length||0,$=I.length||0;u.length=j+$;for(let ee=0;ee<$;ee++)u[j+ee]=I[ee]}else u.push(I)}}class R{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function C(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var Y=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function J(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function A(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function P(u){const m={};for(const _ in u)m[_]=u[_];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,m){let _,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(_ in I)u[_]=I[_];for(let $=0;$<x.length;$++)_=x[$],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function D(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function F(u){h.setTimeout(()=>{throw u},0)}function O(){var u=ce;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Xe{constructor(){this.h=this.g=null}add(m,_){const I=di.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var di=new R(()=>new dt,u=>u.reset());class dt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,q=!1,ce=new Xe,X=()=>{const u=h.Promise.resolve(void 0);jt=()=>{u.then(de)}};var de=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(_){F(_)}var m=di;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}q=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u}();function we(u,m){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Y){e:{try{H(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}M(we,Pe);var me={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function Tu(u,m,_,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=j,this.key=++Zn,this.da=this.fa=!1}function Wi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Hi(u){this.src=u,this.g={},this.h=0}Hi.prototype.add=function(u,m,_,I,j){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ee=Ur(u,m,I,j);return-1<ee?(m=u[ee],_||(m.fa=!1)):(m=new Tu(m,this.src,$,!!I,j),m.fa=_,u.push(m)),m};function fi(u,m){var _=m.type;if(_ in u.g){var I=u.g[_],j=Array.prototype.indexOf.call(I,m,void 0),$;($=0<=j)&&Array.prototype.splice.call(I,j,1),$&&(Wi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ur(u,m,_,I){for(var j=0;j<u.length;++j){var $=u[j];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==I)return j}return-1}var ca="closure_lm_"+(1e6*Math.random()|0),Os={};function ha(u,m,_,I,j){if(Array.isArray(m)){for(var $=0;$<m.length;$++)ha(u,m[$],_,I,j);return null}return _=Su(_),u&&u[ft]?u.K(m,_,p(I)?!!I.capture:!1,j):da(u,m,_,!1,I,j)}function da(u,m,_,I,j,$){if(!m)throw Error("Invalid event type");var ee=p(j)?!!j.capture:!!j,Ne=Fs(u);if(Ne||(u[ca]=Ne=new Hi(u)),_=Ne.add(m,_,I,ee,$),_.proxy)return _;if(I=Ms(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)be||(j=ee),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(Vs(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ms(){function u(_){return m.call(u.src,u.listener,_)}const m=Pu;return u}function Iu(u,m,_,I,j){if(Array.isArray(m))for(var $=0;$<m.length;$++)Iu(u,m[$],_,I,j);else I=p(I)?!!I.capture:!!I,_=Su(_),u&&u[ft]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],_=Ur($,_,I,j),-1<_&&(Wi($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=Fs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ur(m,_,I,j)),(_=-1<u?m[u]:null)&&Ds(_))}function Ds(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ft])fi(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(Vs(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=Fs(m))?(fi(_,u),_.h==0&&(_.src=null,m[ca]=null)):Wi(u)}}}function Vs(u){return u in Os?Os[u]:Os[u]="on"+u}function Pu(u,m){if(u.da)u=!0;else{m=new we(m,this);var _=u.listener,I=u.ha||u.src;u.fa&&Ds(u),u=_.call(I,m)}return u}function Fs(u){return u=u[ca],u instanceof Hi?u:null}var fa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Su(u){return typeof u=="function"?u:(u[fa]||(u[fa]=function(m){return u.handleEvent(m)}),u[fa])}function ot(){ye.call(this),this.i=new Hi(this),this.M=this,this.F=null}M(ot,ye),ot.prototype[ft]=!0,ot.prototype.removeEventListener=function(u,m,_,I){Iu(this,u,m,_,I)};function _t(u,m){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Pe(m,u);else if(m instanceof Pe)m.target=m.target||u;else{var j=m;m=new Pe(I,u),b(m,j)}if(j=!0,_)for(var $=_.length-1;0<=$;$--){var ee=m.g=_[$];j=Br(ee,I,!0,m)&&j}if(ee=m.g=u,j=Br(ee,I,!0,m)&&j,j=Br(ee,I,!1,m)&&j,_)for($=0;$<_.length;$++)ee=m.g=_[$],j=Br(ee,I,!1,m)&&j}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],I=0;I<_.length;I++)Wi(_[I]);delete u.g[m],u.h--}}this.F=null},ot.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},ot.prototype.L=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function Br(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,$=0;$<m.length;++$){var ee=m[$];if(ee&&!ee.da&&ee.capture==_){var Ne=ee.listener,at=ee.ha||ee.src;ee.fa&&fi(u.i,ee),j=Ne.call(at,I)!==!1&&j}}return j&&!I.defaultPrevented}function Cu(u,m,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function pa(u){u.g=Cu(()=>{u.g=null,u.i&&(u.i=!1,pa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class xu extends ye{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:pa(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){ye.call(this),this.h=u,this.g={}}M($r,ye);var ma=[];function js(u){J(u.g,function(m,_){this.g.hasOwnProperty(_)&&Ds(m)},u),u.g={}}$r.prototype.N=function(){$r.aa.N.call(this),js(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zs=h.JSON.stringify,Sd=h.JSON.parse,Wr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ga(){}ga.prototype.h=null;function Au(u){return u.h||(u.h=u.i())}function _a(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Us(){Pe.call(this,"d")}M(Us,Pe);function va(){Pe.call(this,"c")}M(va,Pe);var pi={},ku=null;function Bs(){return ku=ku||new ot}pi.La="serverreachability";function Ru(u){Pe.call(this,pi.La,u)}M(Ru,Pe);function Hr(u){const m=Bs();_t(m,new Ru(m))}pi.STAT_EVENT="statevent";function $s(u,m){Pe.call(this,pi.STAT_EVENT,u),this.stat=m}M($s,Pe);function It(u){const m=Bs();_t(m,new $s(m,u))}pi.Ma="timingevent";function Lu(u,m){Pe.call(this,pi.Ma,u),this.size=m}M(Lu,Pe);function qr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function mn(u,m,_,I,j,$){u.info(function(){if(u.g)if($)for(var ee="",Ne=$.split("&"),at=0;at<Ne.length;at++){var Ae=Ne[at].split("=");if(1<Ae.length){var Ve=Ae[0];Ae=Ae[1];var Ge=Ve.split("_");ee=2<=Ge.length&&Ge[1]=="type"?ee+(Ve+"="+Ae+"&"):ee+(Ve+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+_+`
`+ee})}function se(u,m,_,I,j,$,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+_+`
`+$+" "+ee})}function mi(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Nu(u,_)+(I?" "+I:"")})}function bu(u,m){u.info(function(){return"TIMEOUT: "+m})}Gr.prototype.info=function(){};function Nu(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var j=I[1];if(Array.isArray(j)&&!(1>j.length)){var $=j[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<j.length;ee++)j[ee]=""}}}}return zs(_)}catch{return m}}var Kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hs;function Ln(){}M(Ln,ga),Ln.prototype.g=function(){return new XMLHttpRequest},Ln.prototype.i=function(){return{}},Hs=new Ln;function bn(u,m,_,I){this.j=u,this.i=m,this.l=_,this.R=I||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ou}function Ou(){this.i=null,this.g="",this.h=!1}var Mu={},ya={};function wa(u,m,_){u.L=1,u.v=_n(Je(m)),u.m=_,u.P=!0,Ea(u,null)}function Ea(u,m){u.F=Date.now(),Gs(u),u.A=Je(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Fu(_.i,"t",I),u.C=0,_=u.j.J,u.h=new Ou,u.g=Hu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new xu(T(u.Y,u,u.g),u.O)),m=u.U,_=u.g,I=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(ma[0]=j.toString()),j=ma);for(var $=0;$<j.length;$++){var ee=ha(_,j[$],I||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?P(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Hr(),mn(u.i,u.u,u.A,u.l,u.R,u.m)}bn.prototype.ca=function(u){u=u.target;const m=this.M;m&&zt(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const Ge=zt(this.g);var m=this.g.Ba();const Ji=this.g.Z();if(!(3>Ge)&&(Ge!=3||this.g&&(this.h.h||this.g.oa()||Va(this.g)))){this.J||Ge!=4||m==7||(m==8||0>=Ji?Hr(3):Hr(2)),Ta(this);var _=this.g.Z();this.X=_;t:if(Du(this)){var I=Va(this.g);u="";var j=I.length,$=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),Zr(this);var ee="";break t}this.h.i=new h.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!($&&m==j-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=_==200,se(this.i,this.u,this.A,this.l,this.R,Ge,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,at=this.g;if((Ne=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Ne)){var Ae=Ne;break t}}Ae=null}if(_=Ae)mi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qr(this,_);else{this.o=!1,this.s=3,It(12),gi(this),Zr(this);break e}}if(this.P){_=!0;let tt;for(;!this.J&&this.C<ee.length;)if(tt=qs(this,ee),tt==ya){Ge==4&&(this.s=4,It(14),_=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Mu){this.s=4,It(15),mi(this.i,this.l,ee,"[Invalid Chunk]"),_=!1;break}else mi(this.i,this.l,tt,null),Qr(this,tt);if(Du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||ee.length!=0||this.h.h||(this.s=1,It(16),_=!1),this.o=this.o&&_,!_)mi(this.i,this.l,ee,"[Invalid Chunked Response]"),gi(this),Zr(this);else if(0<ee.length&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.ba&&!Ve.M&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),no(Ve),Ve.M=!0,It(11))}}else mi(this.i,this.l,ee,null),Qr(this,ee);Ge==4&&gi(this),this.o&&!this.J&&(Ge==4?ja(this.j,this):(this.o=!1,Gs(this)))}else Cd(this.g),_==400&&0<ee.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),gi(this),Zr(this)}}}catch{}finally{}};function Du(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function qs(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?ya:(_=Number(m.substring(_,I)),isNaN(_)?Mu:(I+=1,I+_>m.length?ya:(m=m.slice(I,I+_),u.C=I+_,m)))}bn.prototype.cancel=function(){this.J=!0,gi(this)};function Gs(u){u.S=Date.now()+u.I,Vu(u,u.I)}function Vu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qr(T(u.ba,u),m)}function Ta(u){u.B&&(h.clearTimeout(u.B),u.B=null)}bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(bu(this.i,this.A),this.L!=2&&(Hr(),It(17)),gi(this),this.s=2,Zr(this)):Vu(this,this.S-u)};function Zr(u){u.j.G==0||u.J||ja(u.j,u)}function gi(u){Ta(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,js(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Qr(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Se(_.h,u))){if(!u.K&&Se(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ro(_),eo(_);else break e;to(_),It(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=qr(T(_.Za,_),6e3));if(1>=Gi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ei(_,11)}else if((u.K||_.g==u)&&ro(_),!C(m))for(j=_.Da.g.parse(m),m=0;m<j.length;m++){let Ae=j[m];if(_.T=Ae[0],Ae=Ae[1],_.G==2)if(Ae[0]=="c"){_.K=Ae[1],_.ia=Ae[2];const Ve=Ae[3];Ve!=null&&(_.la=Ve,_.j.info("VER="+_.la));const Ge=Ae[4];Ge!=null&&(_.Aa=Ge,_.j.info("SVER="+_.Aa));const Ji=Ae[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(I=1.5*Ji,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const tt=u.g;if(tt){const oo=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var $=I.h;$.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Fe($,$.h),$.h=null))}if(I.D){const Xn=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xn&&(I.ya=Xn,fe(I.I,I.D,Xn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var ee=u;if(I.qa=so(I,I.J?I.ia:null,I.W),ee.K){Xr(I.h,ee);var Ne=ee,at=I.L;at&&(Ne.I=at),Ne.B&&(Ta(Ne),Gs(Ne)),I.g=ee}else Mn(I);0<_.i.length&&Xi(_)}else Ae[0]!="stop"&&Ae[0]!="close"||Ei(_,7);else _.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Ei(_,7):Js(_):Ae[0]!="noop"&&_.l&&_.l.ta(Ae),_.v=0)}}Hr(4)}catch{}}var Yr=class{constructor(u,m){this.g=u,this.map=m}};function Ia(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gi(u){return u.h?1:u.g?u.g.size:0}function Se(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Fe(u,m){u.g?u.g.add(m):u.h=m}function Xr(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ia.prototype.cancel=function(){if(this.i=_i(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _i(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return V(u.i)}function Ki(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var m=[],_=u.length,I=0;I<_;I++)m.push(u[I]);return m}m=[],_=0;for(I in u)m[_++]=u[I];return m}function Sa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const I in u)m[_++]=I;return m}}}function ve(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Sa(u),I=Ki(u),j=I.length,$=0;$<j;$++)m.call(void 0,I[$],_&&_[$],u)}var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ca(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),j=null;if(0<=I){var $=u[_].substring(0,I);j=u[_].substring(I+1)}else $=u[_];m($,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function gn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gn){this.h=u.h,Ks(this,u.j),this.o=u.o,this.g=u.g,vi(this,u.s),this.l=u.l;var m=u.i,_=new yi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Qn(this,_),this.m=u.m}else u&&(m=String(u).match($e))?(this.h=!1,Ks(this,m[1]||"",!0),this.o=Nn(m[2]||""),this.g=Nn(m[3]||"",!0),vi(this,m[4]),this.l=Nn(m[5]||"",!0),Qn(this,m[6]||"",!0),this.m=Nn(m[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}gn.prototype.toString=function(){var u=[],m=this.j;m&&u.push(On(m,Zi,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(On(m,Zi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(On(_,_.charAt(0)=="/"?ka:Aa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",On(_,Ra)),u.join("")};function Je(u){return new gn(u)}function Ks(u,m,_){u.j=_?Nn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function vi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Qn(u,m,_){m instanceof yi?(u.i=m,vn(u.i,u.h)):(_||(m=On(m,Zs)),u.i=new yi(m,u.h))}function fe(u,m,_){u.i.set(m,_)}function _n(u){return fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Nn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function On(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,xa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zi=/[#\/\?@]/g,Aa=/[#\?:]/g,ka=/[#\?]/g,Zs=/[#\?@]/g,Ra=/#/g;function yi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function nn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ca(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=yi.prototype,t.add=function(u,m){nn(this),this.i=null,u=le(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function La(u,m){nn(u),m=le(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Qs(u,m){return nn(u),m=le(u,m),u.g.has(m)}t.forEach=function(u,m){nn(this),this.g.forEach(function(_,I){_.forEach(function(j){u.call(m,j,I,this)},this)},this)},t.na=function(){nn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const j=u[I];for(let $=0;$<j.length;$++)_.push(m[I])}return _},t.V=function(u){nn(this);let m=[];if(typeof u=="string")Qs(this,u)&&(m=m.concat(this.g.get(le(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},t.set=function(u,m){return nn(this),this.i=null,u=le(this,u),Qs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Fu(u,m,_){La(u,m),0<_.length&&(u.i=null,u.g.set(le(u,m),V(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const $=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var j=$;ee[I]!==""&&(j+="="+encodeURIComponent(String(ee[I]))),u.push(j)}}return this.i=u.join("&")};function le(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function vn(u,m){m&&!u.j&&(nn(u),u.i=null,u.g.forEach(function(_,I){var j=I.toLowerCase();I!=j&&(La(this,I),Fu(this,j,_))},u)),u.j=m}function De(u,m){const _=new Gr;if(h.Image){const I=new Image;I.onload=S(yn,_,"TestLoadImage: loaded",!0,m,I),I.onerror=S(yn,_,"TestLoadImage: error",!1,m,I),I.onabort=S(yn,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=S(yn,_,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function ju(u,m){const _=new Gr,I=new AbortController,j=setTimeout(()=>{I.abort(),yn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then($=>{clearTimeout(j),$.ok?yn(_,"TestPingServer: ok",!0,m):yn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),yn(_,"TestPingServer: error",!1,m)})}function yn(u,m,_,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(_)}catch{}}function ba(){this.g=new Wr}function Na(u,m,_){const I=_||"";try{ve(u,function(j,$){let ee=j;p(j)&&(ee=zs(j)),m.push(I+$+"="+encodeURIComponent(ee))})}catch(j){throw m.push(I+"type="+encodeURIComponent("_badmap")),j}}function wn(u){this.l=u.Ub||null,this.j=u.eb||!1}M(wn,ga),wn.prototype.g=function(){return new Qi(this.l,this.j)},wn.prototype.i=function(u){return function(){return u}}({});function Qi(u,m){ot.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Qi,ot),t=Qi.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,rn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qe(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?qe(this):rn(this),this.readyState==3&&Yi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qe(this))},t.Qa=function(u){this.g&&(this.response=u,qe(this))},t.ga=function(){this.g&&qe(this)};function qe(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rn(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function rn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Oa(u){let m="";return J(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function Ys(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Oa(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):fe(u,m,_))}function We(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(We,ot);var zu=/^https?$/i,Ma=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hs.g(),this.v=this.o?Au(this.o):Au(Hs),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){Uu(this,$);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)_.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())_.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),j=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ma,m,void 0))||I||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of _)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Uu(this,$)}};function Uu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Da(u),Xs(u)}function Da(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),Xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Te(this):this.bb())},t.bb=function(){Te(this)};function Te(u){if(u.h&&typeof l<"u"&&(!u.v[1]||zt(u)!=4||u.Z()!=2)){if(u.u&&zt(u)==4)Cu(u.Ea,0,u);else if(_t(u,"readystatechange"),zt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=ee===0){var j=String(u.D).match($e)[1]||null;!j&&h.self&&h.self.location&&(j=h.self.location.protocol.slice(0,-1)),I=!zu.test(j?j.toLowerCase():"")}_=I}if(_)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var $=2<zt(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Da(u)}}finally{Xs(u)}}}}function Xs(u,m){if(u.g){Gt(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||_t(u,"ready");try{_.onreadystatechange=I}catch{}}}function Gt(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function zt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Sd(m)}};function Va(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Cd(u){const m={};u=(u.g&&2<=zt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(C(u[I]))continue;var _=D(u[I]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[j]||[];m[j]=$,$.push(_)}A(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Bu(u){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wi("baseRetryDelayMs",5e3,u),this.cb=wi("retryDelaySeedMs",1e4,u),this.Wa=wi("forwardChannelMaxRetries",2,u),this.wa=wi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ia(u&&u.concurrentRequestLimit),this.Da=new ba,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bu.prototype,t.la=8,t.G=1,t.connect=function(u,m,_,I){It(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=so(this,null,this.W),Xi(this)};function Js(u){if($u(u),u.G==3){var m=u.U++,_=Je(u.I);if(fe(_,"SID",u.K),fe(_,"RID",m),fe(_,"TYPE","terminate"),Jr(u,_),m=new bn(u,u.j,m),m.L=2,m.v=_n(Je(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.v,_=!0),_||(m.g=Hu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Gs(m)}Wu(u)}function eo(u){u.g&&(no(u),u.g.cancel(),u.g=null)}function $u(u){eo(u),u.u&&(h.clearTimeout(u.u),u.u=null),ro(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Xi(u){if(!Pa(u.h)&&!u.s){u.s=!0;var m=u.Ga;jt||X(),q||(jt(),q=!0),ce.add(m,u),u.B=0}}function xd(u,m){return Gi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qr(T(u.Ga,u,m),za(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new bn(this,this.j,u);let $=this.o;if(this.S&&($?($=P($),b($,this.S)):$=this.S),this.m!==null||this.O||(j.H=$,$=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Fa(this,j,m),_=Je(this.I),fe(_,"RID",u),fe(_,"CVER",22),this.D&&fe(_,"X-HTTP-Session-Id",this.D),Jr(this,_),$&&(this.O?m="headers="+encodeURIComponent(String(Oa($)))+"&"+m:this.m&&Ys(_,this.m,$)),Fe(this.h,j),this.Ua&&fe(_,"TYPE","init"),this.P?(fe(_,"$req",m),fe(_,"SID","null"),j.T=!0,wa(j,_,null)):wa(j,_,m),this.G=2}}else this.G==3&&(u?sn(this,u):this.i.length==0||Pa(this.h)||sn(this))};function sn(u,m){var _;m?_=m.l:_=u.U++;const I=Je(u.I);fe(I,"SID",u.K),fe(I,"RID",_),fe(I,"AID",u.T),Jr(u,I),u.m&&u.o&&Ys(I,u.m,u.o),_=new bn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Fa(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fe(u.h,_),wa(_,I,m)}function Jr(u,m){u.H&&J(u.H,function(_,I){fe(m,I,_)}),u.l&&ve({},function(_,I){fe(m,I,_)})}function Fa(u,m,_){_=Math.min(u.i.length,_);var I=u.l?T(u.l.Na,u.l,u):null;e:{var j=u.i;let $=-1;for(;;){const ee=["count="+_];$==-1?0<_?($=j[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let Ne=!0;for(let at=0;at<_;at++){let Ae=j[at].g;const Ve=j[at].map;if(Ae-=$,0>Ae)$=Math.max(0,j[at].g-100),Ne=!1;else try{Na(Ve,ee,"req"+Ae+"_")}catch{I&&I(Ve)}}if(Ne){I=ee.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,I}function Mn(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;jt||X(),q||(jt(),q=!0),ce.add(m,u),u.v=0}}function to(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qr(T(u.Fa,u),za(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,io(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qr(T(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),eo(this),io(this))};function no(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function io(u){u.g=new bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Je(u.qa);fe(m,"RID","rpc"),fe(m,"SID",u.K),fe(m,"AID",u.T),fe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&fe(m,"TO",u.ja),fe(m,"TYPE","xmlhttp"),Jr(u,m),u.m&&u.o&&Ys(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=_n(Je(m)),_.m=null,_.P=!0,Ea(_,u)}t.Za=function(){this.C!=null&&(this.C=null,eo(this),to(this),It(19))};function ro(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function ja(u,m){var _=null;if(u.g==m){ro(u),no(u),u.g=null;var I=2}else if(Se(u.h,m))_=m.D,Xr(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;I=Bs(),_t(I,new Lu(I,_)),Xi(u)}else Mn(u);else if(j=m.s,j==3||j==0&&0<m.X||!(I==1&&xd(u,m)||I==2&&to(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),j){case 1:Ei(u,5);break;case 4:Ei(u,10);break;case 3:Ei(u,6);break;default:Ei(u,2)}}}function za(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ei(u,m){if(u.j.info("Error code "+m),m==2){var _=T(u.fb,u),I=u.Xa;const j=!I;I=new gn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ks(I,"https"),_n(I),j?De(I.toString(),_):ju(I.toString(),_)}else It(2);u.G=0,u.l&&u.l.sa(m),Wu(u),$u(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Wu(u){if(u.G=0,u.ka=[],u.l){const m=_i(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function so(u,m,_){var I=_ instanceof gn?Je(_):new gn(_);if(I.g!="")m&&(I.g=m+"."+I.g),vi(I,I.s);else{var j=h.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var $=new gn(null);I&&Ks($,I),m&&($.g=m),j&&vi($,j),_&&($.l=_),I=$}return _=u.D,m=u.ya,_&&m&&fe(I,_,m),fe(I,"VER",u.la),Jr(u,I),I}function Hu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new We(new wn({eb:_})):new We(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ua(){}t=Ua.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function es(){}es.prototype.g=function(u,m){return new vt(u,m)};function vt(u,m){ot.call(this),this.g=new Bu(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!C(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new En(this)}M(vt,ot),vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){Js(this.g)},vt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=zs(u),u=_);m.i.push(new Yr(m.Ya++,u)),m.G==3&&Xi(m)},vt.prototype.N=function(){this.g.l=null,delete this.j,Js(this.g),delete this.g,vt.aa.N.call(this)};function Yn(u){Us.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}M(Yn,Us);function qu(){va.call(this),this.status=1}M(qu,va);function En(u){this.g=u}M(En,Ua),En.prototype.ua=function(){_t(this.g,"a")},En.prototype.ta=function(u){_t(this.g,new Yn(u))},En.prototype.sa=function(u){_t(this.g,new qu)},En.prototype.ra=function(){_t(this.g,"b")},es.prototype.createWebChannel=es.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,RT=function(){return new es},kT=function(){return Bs()},AT=pi,Sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,Wc=Kr,Ws.COMPLETE="complete",xT=Ws,_a.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,al=_a,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,CT=We}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});const uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new id("@firebase/firestore");function el(){return Es.logLevel}function re(t,...e){if(Es.logLevel<=xe.DEBUG){const n=e.map(ng);Es.debug(`Firestore (${oa}): ${t}`,...n)}}function zi(t,...e){if(Es.logLevel<=xe.ERROR){const n=e.map(ng);Es.error(`Firestore (${oa}): ${t}`,...n)}}function qo(t,...e){if(Es.logLevel<=xe.WARN){const n=e.map(ng);Es.warn(`Firestore (${oa}): ${t}`,...n)}}function ng(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: `+t;throw zi(e),new Error(e)}function Me(t,e){t||pe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class _L{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vL{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cr,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string"),new LT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new Ot(e)}}class yL{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wL{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new yL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Me(this.o===void 0);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new EL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=IL(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function Go(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new gt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new gt(0,0))}static max(){return new ge(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,i){n===void 0?n=0:n>e.length&&pe(),i===void 0?i=e.length-n:i>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Kl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),l=n.get(r);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Kl{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const PL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Kl{construct(e,n,i){return new Ct(e,n,i)}static isValidIdentifier(e){return PL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(o(),r++)}if(o(),l)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ue.fromString(e))}static fromName(e){return new oe(Ue.fromString(e).popFirst(5))}static empty(){return new oe(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ue(e.slice()))}}function SL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(i===1e9?new gt(n+1,0):new gt(n,i));return new Rr(r,oe.empty(),e)}function CL(t){return new Rr(t.readTime,t.key,-1)}class Rr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Rr(ge.min(),oe.empty(),-1)}static max(){return new Rr(ge.max(),oe.empty(),-1)}}function xL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==AL)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++o,l&&o===r&&n()},d=>i(d))}),l=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(v=>{l[p]=v,++h,h===o&&i(l)},v=>r(v))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function RL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ig.oe=-1;function ad(t){return t==null}function Ah(t){return t===0&&1/t==-1/0}function LL(t){return typeof t=="number"&&Number.isInteger(t)&&!Ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}}class Ic{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??St.RED,this.left=r??St.EMPTY,this.right=o??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new St(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return St.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hy(this.data.getIterator())}getIteratorFrom(e){return new hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new ln([])}unionWith(e){let n=new At(Ct.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new OT("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const bL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(Me(!!t),typeof t=="string"){let e=0;const n=bL.exec(t);if(Me(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sg(t){const e=t.mapValue.fields.__previous_value__;return rg(e)?sg(e):e}function Zl(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,i,r,o,l,h,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p}}class Ql{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc={mapValue:{}};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rg(t)?4:ML(t)?9007199254740991:OL(t)?10:11:pe()}function hi(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Lr(r.timestampValue),h=Lr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ts(r.bytesValue).isEqual(Ts(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return nt(r.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(r.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return nt(r.integerValue)===nt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=nt(r.doubleValue),h=nt(o.doubleValue);return l===h?Ah(l)===Ah(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(cy(l)!==cy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!hi(l[d],h[d])))return!1;return!0}(t,e);default:return pe()}}function Yl(t,e){return(t.values||[]).find(n=>hi(n,e))!==void 0}function Ko(t,e){if(t===e)return 0;const n=Is(t),i=Is(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),d=nt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return dy(t.timestampValue,e.timestampValue);case 4:return dy(Zl(t),Zl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Ts(o),d=Ts(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const v=Le(h[p],d[p]);if(v!==0)return v}return Le(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Le(nt(o.latitude),nt(l.latitude));return h!==0?h:Le(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,p,v;const y=o.fields||{},T=l.fields||{},S=(h=y.value)===null||h===void 0?void 0:h.arrayValue,M=(d=T.value)===null||d===void 0?void 0:d.arrayValue,V=Le(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:fy(S,M)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Pc.mapValue&&l===Pc.mapValue)return 0;if(o===Pc.mapValue)return 1;if(l===Pc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},v=Object.keys(p);d.sort(),v.sort();for(let y=0;y<d.length&&y<v.length;++y){const T=Le(d[y],v[y]);if(T!==0)return T;const S=Ko(h[d[y]],p[v[y]]);if(S!==0)return S}return Le(d.length,v.length)}(t.mapValue,e.mapValue);default:throw pe()}}function dy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Lr(t),i=Lr(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function fy(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ko(n[r],i[r]);if(o)return o}return Le(n.length,i.length)}function Zo(t){return Cp(t)}function Cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Lr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Cp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Cp(n.fields[l])}`;return r+"}"}(t.mapValue):pe()}function py(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xp(t){return!!t&&"integerValue"in t}function og(t){return!!t&&"arrayValue"in t}function my(t){return!!t&&"nullValue"in t}function gy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hc(t){return!!t&&"mapValue"in t}function OL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function El(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=El(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=El(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ML(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(n)}setAll(e){let n=Ct.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=El(l):r.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Hc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){bs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Qt(El(this.value))}}function MT(t){const e=[];return bs(t.fields,(n,i)=>{const r=new Ct([n]);if(Hc(i)){const o=MT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,i,r,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Dt(e,0,ge.min(),ge.min(),ge.min(),Qt.empty(),0)}static newFoundDocument(e,n,i,r){return new Dt(e,1,n,ge.min(),i,r,0)}static newNoDocument(e,n){return new Dt(e,2,n,ge.min(),ge.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ge.min(),ge.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.position=e,this.inclusive=n}}function _y(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=Ko(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function vy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n="asc"){this.field=e,this.dir=n}}function DL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class ht extends DT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new FL(e,n,i):n==="array-contains"?new UL(e,i):n==="in"?new BL(e,i):n==="not-in"?new $L(e,i):n==="array-contains-any"?new WL(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new jL(e,i):new zL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ko(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends DT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gn(e,n)}matches(e){return VT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function VT(t){return t.op==="and"}function FT(t){return VL(t)&&VT(t)}function VL(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function Ap(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(FT(t))return t.filters.map(e=>Ap(e)).join(",");{const e=t.filters.map(n=>Ap(n)).join(",");return`${t.op}(${e})`}}function jT(t,e){return t instanceof ht?function(i,r){return r instanceof ht&&i.op===r.op&&i.field.isEqual(r.field)&&hi(i.value,r.value)}(t,e):t instanceof Gn?function(i,r){return r instanceof Gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,h)=>o&&jT(l,r.filters[h]),!0):!1}(t,e):void pe()}function zT(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(zT).join(" ,")+"}"}(t):"Filter"}class FL extends ht{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class jL extends ht{constructor(e,n){super(e,"in",n),this.keys=UT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zL extends ht{constructor(e,n){super(e,"not-in",n),this.keys=UT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class UL extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return og(n)&&Yl(n.arrayValue,this.value)}}class BL extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yl(this.value.arrayValue,n)}}class $L extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yl(this.value.arrayValue,n)}}class WL extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Yl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,n=null,i=[],r=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function yy(t,e=null,n=[],i=[],r=null,o=null,l=null){return new HL(t,e,n,i,r,o,l)}function ag(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ap(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Zo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Zo(i)).join(",")),e.ue=n}return e.ue}function lg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vy(t.startAt,e.startAt)&&vy(t.endAt,e.endAt)}function kp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n=null,i=[],r=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qL(t,e,n,i,r,o,l,h){return new pu(t,e,n,i,r,o,l,h)}function BT(t){return new pu(t)}function wy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $T(t){return t.collectionGroup!==null}function Tl(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new At(Ct.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Rh(o,i))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new Rh(Ct.keyField(),i))}return e.ce}function li(t){const e=_e(t);return e.le||(e.le=GL(e,Tl(t))),e.le}function GL(t,e){if(t.limitType==="F")return yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Rh(r.field,o)});const n=t.endAt?new kh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new kh(t.startAt.position,t.startAt.inclusive):null;return yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Rp(t,e){const n=t.filters.concat([e]);return new pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lp(t,e,n){return new pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ld(t,e){return lg(li(t),li(e))&&t.limitType===e.limitType}function WT(t){return`${ag(li(t))}|lt:${t.limitType}`}function fo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>zT(r)).join(", ")}]`),ad(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Zo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Zo(r)).join(",")),`Target(${i})`}(li(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Tl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(l,h,d){const p=_y(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,Tl(i),r)||i.endAt&&!function(l,h,d){const p=_y(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,Tl(i),r))}(t,e)}function KL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HT(t){return(e,n)=>{let i=!1;for(const r of Tl(t)){const o=ZL(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function ZL(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Ko(d,p):pe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return NT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=new Ye(oe.comparator);function Ui(){return QL}const qT=new Ye(oe.comparator);function ll(...t){let e=qT;for(const n of t)e=e.insert(n.key,n);return e}function GT(t){let e=qT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ls(){return Il()}function KT(){return Il()}function Il(){return new aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const YL=new Ye(oe.comparator),XL=new At(oe.comparator);function Ce(...t){let e=XL;for(const n of t)e=e.add(n);return e}const JL=new At(Le);function eb(){return JL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function ZT(t){return{integerValue:""+t}}function tb(t,e){return LL(e)?ZT(e):ug(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function nb(t,e,n){return t instanceof Xl?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&rg(o)&&(o=sg(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Jl?YT(t,e):t instanceof eu?XT(t,e):function(r,o){const l=QT(r,o),h=Ey(l)+Ey(r.Pe);return xp(l)&&xp(r.Pe)?ZT(h):ug(r.serializer,h)}(t,e)}function ib(t,e,n){return t instanceof Jl?YT(t,e):t instanceof eu?XT(t,e):n}function QT(t,e){return t instanceof Lh?function(i){return xp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Xl extends cd{}class Jl extends cd{constructor(e){super(),this.elements=e}}function YT(t,e){const n=JT(e);for(const i of t.elements)n.some(r=>hi(r,i))||n.push(i);return{arrayValue:{values:n}}}class eu extends cd{constructor(e){super(),this.elements=e}}function XT(t,e){let n=JT(e);for(const i of t.elements)n=n.filter(r=>!hi(r,i));return{arrayValue:{values:n}}}class Lh extends cd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ey(t){return nt(t.integerValue||t.doubleValue)}function JT(t){return og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n){this.field=e,this.transform=n}}function sb(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Jl&&r instanceof Jl||i instanceof eu&&r instanceof eu?Go(i.elements,r.elements,hi):i instanceof Lh&&r instanceof Lh?hi(i.Pe,r.Pe):i instanceof Xl&&r instanceof Xl}(t.transform,e.transform)}class ob{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hd{}function eI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cg(t.key,Wn.none()):new mu(t.key,t.data,Wn.none());{const n=t.data,i=Qt.empty();let r=new At(Ct.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new zr(t.key,i,new ln(r.toArray()),Wn.none())}}function ab(t,e,n){t instanceof mu?function(r,o,l){const h=r.value.clone(),d=Iy(r.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(r,o,l){if(!qc(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Iy(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(tI(r)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Pl(t,e,n,i){return t instanceof mu?function(o,l,h,d){if(!qc(o.precondition,l))return h;const p=o.value.clone(),v=Py(o.fieldTransforms,d,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof zr?function(o,l,h,d){if(!qc(o.precondition,l))return h;const p=Py(o.fieldTransforms,d,l),v=l.data;return v.setAll(tI(o)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,h){return qc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function lb(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=QT(i.transform,r||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(i.field,o))}return n||null}function Ty(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Go(i,r,(o,l)=>sb(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mu extends hd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zr extends hd{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Iy(t,e,n){const i=new Map;Me(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,h=e.data.field(o.field);i.set(o.field,ib(l,h,n[r]))}return i}function Py(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,nb(o,l,e))}return i}class cg extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ub extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&ab(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Pl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Pl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=KT();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(r.key)?null:h;const d=eI(l,h);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,i)=>Ty(n,i))&&Go(this.baseMutations,e.baseMutations,(n,i)=>Ty(n,i))}}class hg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Me(e.mutations.length===i.length);let r=function(){return YL}();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new hg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,ke;function fb(t){switch(t){default:return pe();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function nI(t){if(t===void 0)return zi("GRPC error has no .code"),G.UNKNOWN;switch(t){case ut.OK:return G.OK;case ut.CANCELLED:return G.CANCELLED;case ut.UNKNOWN:return G.UNKNOWN;case ut.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ut.INTERNAL:return G.INTERNAL;case ut.UNAVAILABLE:return G.UNAVAILABLE;case ut.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ut.NOT_FOUND:return G.NOT_FOUND;case ut.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ut.ABORTED:return G.ABORTED;case ut.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ut.DATA_LOSS:return G.DATA_LOSS;default:return pe()}}(ke=ut||(ut={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new ds([4294967295,4294967295],0);function Sy(t){const e=pb().encode(t),n=new ST;return n.update(e),new Uint8Array(n.digest())}function Cy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ds([n,i],0),new ds([r,o],0)]}class dg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ul(`Invalid padding: ${n}`);if(i<0)throw new ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ul(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(ds.fromNumber(i)));return r.compare(mb)===1&&(r=new ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Sy(e),[i,r]=Cy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new dg(o,r,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=Sy(e),[i,r]=Cy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new dd(ge.min(),r,new Ye(Le),Ui(),Ce())}}class gu{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new gu(i,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class iI{constructor(e,n){this.targetId=e,this.me=n}}class rI{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class xy{constructor(){this.fe=0,this.ge=ky(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),i=Ce();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:pe()}}),new gu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=ky()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gb{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ui(),this.qe=Ay(),this.Qe=new Ye(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(kp(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,Dt.newNoDocument(l,ge.min()))}else Me(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,h;try{l=Ts(i).toUint8Array()}catch(d){if(d instanceof OT)return qo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new dg(l,r,o)}catch(d){return qo(d instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&kp(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Dt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Ce();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const r=new dd(e,n,this.Qe,this.ke,i);return this.ke=Ui(),this.qe=Ay(),this.Qe=new Ye(Le),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new xy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new At(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ay(){return new Ye(oe.comparator)}function ky(){return new Ye(oe.comparator)}const _b={asc:"ASCENDING",desc:"DESCENDING"},vb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yb={and:"AND",or:"OR"};class wb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bp(t,e){return t.useProto3Json||ad(e)?e:{value:e}}function bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Eb(t,e){return bh(t,e.toTimestamp())}function ui(t){return Me(!!t),ge.fromTimestamp(function(n){const i=Lr(n);return new gt(i.seconds,i.nanos)}(t))}function fg(t,e){return Np(t,e).canonicalString()}function Np(t,e){const n=function(r){return new Ue(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oI(t){const e=Ue.fromString(t);return Me(hI(e)),e}function Op(t,e){return fg(t.databaseId,e.path)}function pf(t,e){const n=oI(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(lI(n))}function aI(t,e){return fg(t.databaseId,e)}function Tb(t){const e=oI(t);return e.length===4?Ue.emptyPath():lI(e)}function Mp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lI(t){return Me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ry(t,e,n){return{name:Op(t,e),fields:n.value.mapValue.fields}}function Ib(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(p,v){return p.useProto3Json?(Me(v===void 0||typeof v=="string"),Rt.fromBase64String(v||"")):(Me(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Rt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const v=p.code===void 0?G.UNKNOWN:nI(p.code);return new ie(v,p.message||"")}(l);n=new rI(i,r,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=pf(t,i.document.name),o=ui(i.document.updateTime),l=i.document.createTime?ui(i.document.createTime):ge.min(),h=new Qt({mapValue:{fields:i.document.fields}}),d=Dt.newFoundDocument(r,o,l,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new Gc(p,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=pf(t,i.document),o=i.readTime?ui(i.readTime):ge.min(),l=Dt.newNoDocument(r,o),h=i.removedTargetIds||[];n=new Gc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=pf(t,i.document),o=i.removedTargetIds||[];n=new Gc([],o,r,null)}else{if(!("filter"in e))return pe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new db(r,o),h=i.targetId;n=new iI(h,l)}}return n}function Pb(t,e){let n;if(e instanceof mu)n={update:Ry(t,e.key,e.value)};else if(e instanceof cg)n={delete:Op(t,e.key)};else if(e instanceof zr)n={update:Ry(t,e.key,e.data),updateMask:Nb(e.fieldMask)};else{if(!(e instanceof ub))return pe();n={verify:Op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Xl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof eu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Lh)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw pe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:Eb(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe()}(t,e.precondition)),n}function Sb(t,e){return t&&t.length>0?(Me(e!==void 0),t.map(n=>function(r,o){let l=r.updateTime?ui(r.updateTime):ui(o);return l.isEqual(ge.min())&&(l=ui(o)),new ob(l,r.transformResults||[])}(n,e))):[]}function Cb(t,e){return{documents:[aI(t,e.path)]}}function xb(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aI(t,r);const o=function(p){if(p.length!==0)return cI(Gn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(v=>function(T){return{field:po(T.field),direction:Rb(T.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=bp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function Ab(t){let e=Tb(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Me(i===1);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(y){const T=uI(y);return T instanceof Gn&&FT(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(T=>function(M){return new Rh(mo(M.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(y){let T;return T=typeof y=="object"?y.value:y,ad(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(y){const T=!!y.before,S=y.values||[];return new kh(S,T)}(n.startAt));let p=null;return n.endAt&&(p=function(y){const T=!y.before,S=y.values||[];return new kh(S,T)}(n.endAt)),qL(e,r,l,o,h,"F",d,p)}function kb(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=mo(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=mo(n.unaryFilter.field);return ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=mo(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=mo(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(mo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(i=>uI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function Rb(t){return _b[t]}function Lb(t){return vb[t]}function bb(t){return yb[t]}function po(t){return{fieldPath:t.canonicalString()}}function mo(t){return Ct.fromServerFormat(t.fieldPath)}function cI(t){return t instanceof ht?function(n){if(n.op==="=="){if(gy(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(my(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gy(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(my(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:Lb(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const i=n.getFilters().map(r=>cI(r));return i.length===1?i[0]:{compositeFilter:{op:bb(n.op),filters:i}}}(t):pe()}function Nb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,i,r,o=ge.min(),l=ge.min(),h=Rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.ct=e}}function Mb(t){const e=Ab({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.un=new Vb}addToCollectionParentIndex(e,n){return this.un.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Rr.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class Vb{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new At(Ue.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new At(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qo(0)}static kn(){return new Qo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.changes=new aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Pl(i.mutation,r,ln.empty(),gt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ce()){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=ll();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ls();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,r){let o=Ui();const l=Il(),h=function(){return Il()}();return n.forEach((d,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof zr)?o=o.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),Pl(v.mutation,p,v.mutation.getFieldMask(),gt.now())):l.set(p.key,ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,v)=>l.set(p,v)),n.forEach((p,v)=>{var y;return h.set(p,new jb(v,(y=l.get(p))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const i=Il();let r=new Ye((l,h)=>l-h),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let v=i.get(d)||ln.empty();v=h.applyToLocalView(p,v),i.set(d,v);const y=(r.get(h.batchId)||Ce()).add(d);r=r.insert(h.batchId,y)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,v=d.value,y=KT();v.forEach(T=>{if(!o.has(T)){const S=eI(n.get(T),i.get(T));S!==null&&y.set(T,S),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return Z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$T(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve(ls());let h=-1,d=o;return l.next(p=>Z.forEach(p,(v,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(v)?Z.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{d=d.insert(v,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ce())).next(v=>({batchId:h,changes:GT(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=ll();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=ll();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,d=>{const p=function(y,T){return new pu(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(v=>{v.forEach((y,T)=>{l=l.insert(y,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(l=>{o.forEach((d,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,Dt.newInvalidDocument(v)))});let h=ll();return l.forEach((d,p)=>{const v=o.get(d);v!==void 0&&Pl(v.mutation,p,ln.empty(),gt.now()),ud(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ui(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Mb(r.bundledQuery),readTime:ui(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.overlays=new Ye(oe.comparator),this.Ir=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ls();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=ls(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ye((p,v)=>p-v);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=o.get(p.largestBatchId);v===null&&(v=ls(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=ls(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=r)););return Z.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new hb(n,i));let o=this.Ir.get(n);o===void 0&&(o=Ce(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.Tr=new At(wt.Er),this.dr=new At(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new wt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new Ue([])),i=new wt(n,e),r=new wt(n,e+1),o=[];return this.dr.forEachInRange([i,r],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Ue([])),i=new wt(n,e),r=new wt(n,e+1);let o=Ce();return this.dr.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new wt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class wt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new At(wt.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new cb(o,n,i,r);this.mutationQueue.push(l);for(const h of r)this.br=this.br.add(new wt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new wt(n,0),r=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],l=>{const h=this.Dr(l.wr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new At(Le);return n.forEach(r=>{const o=new wt(r,0),l=new wt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new wt(new oe(o),0);let h=new At(Le);return this.br.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(d.wr)),!0)},l),Z.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Z.forEach(n.mutations,r=>{const o=new wt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new wt(n,0),r=this.br.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.Mr=e,this.docs=function(){return new Ye(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let i=Ui();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Dt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ui();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:v}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||xL(CL(v),i)<=0||(r.has(v.key)||ud(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){pe()}Or(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new qb(this)}getSize(e){return Z.resolve(this.size)}}class qb extends Fb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.persistence=e,this.Nr=new aa(n=>ag(n),lg),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pg,this.targetCount=0,this.kr=Qo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Qo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Kn(n),Z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ig(0),this.Kr=!1,this.Kr=!0,this.$r=new $b,this.referenceDelegate=e(this),this.Ur=new Gb(this),this.indexManager=new Db,this.remoteDocumentCache=function(r){return new Hb(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Ob(n),this.Gr=new Ub(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new Wb(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new Zb(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Zb extends kL{constructor(e){super(),this.currentSequenceNumber=e}}class mg{constructor(e){this.persistence=e,this.Jr=new pg,this.Yr=null}static Zr(e){return new mg(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,i=>{const r=oe.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Z.or([()=>Z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Ce(),r=Ce();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new gg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DA()?8:RL(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new Qb;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(el()<=xe.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(el()<=xe.DEBUG&&re("QueryEngine","Query:",fo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(el()<=xe.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(n))):Z.resolve())}Yi(e,n){if(wy(n))return Z.resolve(null);let i=li(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Lp(n,null,"F"),i=li(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ce(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.ts(n,h);return this.ns(n,p,l,d.readTime)?this.Yi(e,Lp(n,null,"F")):this.rs(e,p,n,d)}))})))}Zi(e,n,i,r){return wy(n)||r.isEqual(ge.min())?Z.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,r)?Z.resolve(null):(el()<=xe.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fo(n)),this.rs(e,l,n,SL(r,-1)).next(h=>h))})}ts(e,n){let i=new At(HT(e));return n.forEach((r,o)=>{ud(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return el()<=xe.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",fo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Rr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ye(Le),this._s=new aa(o=>ag(o),lg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Jb(t,e,n,i){return new Xb(t,e,n,i)}async function dI(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ce();for(const p of r){l.push(p.batchId);for(const v of p.mutations)d=d.add(v.key)}for(const p of o){h.push(p.batchId);for(const v of p.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:h}))})})}function eN(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,p,v){const y=p.batch,T=y.keys();let S=Z.resolve();return T.forEach(M=>{S=S.next(()=>v.getEntry(d,M)).next(V=>{const U=p.docVersions.get(M);Me(U!==null),V.version.compareTo(U)<0&&(y.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),v.addEntry(V)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ce();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function fI(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function tN(t,e){const n=_e(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((v,y)=>{const T=r.get(y);if(!T)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,y)));let S=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Rt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,i)),r=r.insert(y,S),function(V,U,R){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(T,S,v)&&h.push(n.Ur.updateTargetData(o,S))});let d=Ui(),p=Ce();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(nN(o,l,e.documentUpdates).next(v=>{d=v.Ps,p=v.Is})),!i.isEqual(ge.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.os=r,o))}function nN(t,e,n){let i=Ce(),r=Ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Ui();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),d.isNoDocument()&&d.version.isEqual(ge.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):re("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Ps:l,Is:r}})}function iN(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function rN(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.Ur.allocateTargetId(i).next(l=>(r=new pr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Dp(t,e,n){const i=_e(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!fu(l))throw l;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Ly(t,e,n){const i=_e(t);let r=ge.min(),o=Ce();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,v){const y=_e(d),T=y._s.get(v);return T!==void 0?Z.resolve(y.os.get(T)):y.Ur.getTargetData(p,v)}(i,l,li(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?r:ge.min(),n?o:Ce())).next(h=>(sN(i,KL(e),h),{documents:h,Ts:o})))}function sN(t,e,n){let i=t.us.get(e)||ge.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class by{constructor(){this.activeTargetIds=eb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oN{constructor(){this.so=new by,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new by,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc=null;function mf(){return Sc===null?Sc=function(){return 268435456+Math.round(2147483648*Math.random())}():Sc++,"0x"+Sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class cN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,l){const h=mf(),d=this.xo(n,i.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${h}:`,d,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(n,d,p,r).then(v=>(re("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw qo("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",d,"request:",r),v})}Lo(n,i,r,o,l,h){return this.Mo(n,i,r,o,l)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),r&&r.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const r=lN[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=mf();return new Promise((l,h)=>{const d=new CT;d.setWithCredentials(!0),d.listenOnce(xT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Wc.NO_ERROR:const v=d.getResponseJson();re(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case Wc.TIMEOUT:re(Nt,`RPC '${e}' ${o} timed out`),h(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const y=d.getStatus();if(re(Nt,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const M=function(U){const R=U.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(R)>=0?R:G.UNKNOWN}(S.status);h(new ie(M,S.message))}else h(new ie(G.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ie(G.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(Nt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(r);re(Nt,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=mf(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=RT(),h=kT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");re(Nt,`Creating RPC '${e}' stream ${r}: ${v}`,d);const y=l.createWebChannel(v,d);let T=!1,S=!1;const M=new uN({Io:U=>{S?re(Nt,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(T||(re(Nt,`Opening RPC '${e}' stream ${r} transport.`),y.open(),T=!0),re(Nt,`RPC '${e}' stream ${r} sending:`,U),y.send(U))},To:()=>y.close()}),V=(U,R,C)=>{U.listen(R,N=>{try{C(N)}catch(H){setTimeout(()=>{throw H},0)}})};return V(y,al.EventType.OPEN,()=>{S||(re(Nt,`RPC '${e}' stream ${r} transport opened.`),M.yo())}),V(y,al.EventType.CLOSE,()=>{S||(S=!0,re(Nt,`RPC '${e}' stream ${r} transport closed`),M.So())}),V(y,al.EventType.ERROR,U=>{S||(S=!0,qo(Nt,`RPC '${e}' stream ${r} transport errored:`,U),M.So(new ie(G.UNAVAILABLE,"The operation could not be completed")))}),V(y,al.EventType.MESSAGE,U=>{var R;if(!S){const C=U.data[0];Me(!!C);const N=C,H=N.error||((R=N[0])===null||R===void 0?void 0:R.error);if(H){re(Nt,`RPC '${e}' stream ${r} received error:`,H);const Y=H.status;let J=function(x){const b=ut[x];if(b!==void 0)return nI(b)}(Y),A=H.message;J===void 0&&(J=G.INTERNAL,A="Unknown error status: "+Y+" with message "+H.message),S=!0,M.So(new ie(J,A)),y.close()}else re(Nt,`RPC '${e}' stream ${r} received:`,C),M.bo(C)}}),V(h,AT.STAT_EVENT,U=>{U.stat===Sp.PROXY?re(Nt,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===Sp.NOPROXY&&re(Nt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}}function gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){return new wb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,i,r,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ie(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hN extends mI{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Ib(this.serializer,e),i=function(o){if(!("targetChange"in o))return ge.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ge.min():l.readTime?ui(l.readTime):ge.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Mp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=kp(d)?{documents:Cb(o,d)}:{query:xb(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=sI(o,l.resumeToken);const p=bp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ge.min())>0){h.readTime=bh(o,l.snapshotVersion.toTimestamp());const p=bp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=kb(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Mp(this.serializer),n.removeTarget=e,this.a_(n)}}class dN extends mI{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Me(!!e.streamToken),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Sb(e.writeResults,e.commitTime),i=ui(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Mp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Pb(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Np(n,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(G.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Np(n,i),r,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(G.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zi(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{Ns(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=_e(d);p.L_.add(4),await _u(p),p.q_.set("Unknown"),p.L_.delete(4),await pd(p)}(this))})}),this.q_=new pN(i,r)}}async function pd(t){if(Ns(t))for(const e of t.B_)await e(!0)}async function _u(t){for(const e of t.B_)await e(!1)}function gI(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wg(n)?yg(n):la(n).r_()&&vg(n,e))}function _g(t,e){const n=_e(t),i=la(n);n.N_.delete(e),i.r_()&&_I(n,e),n.N_.size===0&&(i.r_()?i.o_():Ns(n)&&n.q_.set("Unknown"))}function vg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}la(t).A_(e)}function _I(t,e){t.Q_.xe(e),la(t).R_(e)}function yg(t){t.Q_=new gb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),la(t).start(),t.q_.v_()}function wg(t){return Ns(t)&&!la(t).n_()&&t.N_.size>0}function Ns(t){return _e(t).L_.size===0}function vI(t){t.Q_=void 0}async function gN(t){t.q_.set("Online")}async function _N(t){t.N_.forEach((e,n)=>{vg(t,e)})}async function vN(t,e){vI(t),wg(t)?(t.q_.M_(e),yg(t)):t.q_.set("Unknown")}async function yN(t,e,n){if(t.q_.set("Online"),e instanceof rI&&e.state===2&&e.cause)try{await async function(r,o){const l=o.cause;for(const h of o.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nh(t,i)}else if(e instanceof Gc?t.Q_.Ke(e):e instanceof iI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const i=await fI(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.N_.get(p);v&&o.N_.set(p,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const v=o.N_.get(d);if(!v)return;o.N_.set(d,v.withResumeToken(Rt.EMPTY_BYTE_STRING,v.snapshotVersion)),_I(o,d);const y=new pr(v.target,d,p,v.sequenceNumber);vg(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await Nh(t,i)}}async function Nh(t,e,n){if(!fu(e))throw e;t.L_.add(1),await _u(t),t.q_.set("Offline"),n||(n=()=>fI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pd(t)})}function yI(t,e){return e().catch(n=>Nh(t,n,e))}async function md(t){const e=_e(t),n=br(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wN(e);)try{const r=await iN(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,EN(e,r)}catch(r){await Nh(e,r)}wI(e)&&EI(e)}function wN(t){return Ns(t)&&t.O_.length<10}function EN(t,e){t.O_.push(e);const n=br(t);n.r_()&&n.V_&&n.m_(e.mutations)}function wI(t){return Ns(t)&&!br(t).n_()&&t.O_.length>0}function EI(t){br(t).start()}async function TN(t){br(t).p_()}async function IN(t){const e=br(t);for(const n of t.O_)e.m_(n.mutations)}async function PN(t,e,n){const i=t.O_.shift(),r=hg.from(i,e,n);await yI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await md(t)}async function SN(t,e){e&&br(t).V_&&await async function(i,r){if(function(l){return fb(l)&&l!==G.ABORTED}(r.code)){const o=i.O_.shift();br(i).s_(),await yI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await md(i)}}(t,e),wI(t)&&EI(t)}async function Oy(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=Ns(n);n.L_.add(3),await _u(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pd(n)}async function CN(t,e){const n=_e(t);e?(n.L_.delete(2),await pd(n)):e||(n.L_.add(2),await _u(n),n.q_.set("Unknown"))}function la(t){return t.K_||(t.K_=function(n,i,r){const o=_e(n);return o.w_(),new hN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:gN.bind(null,t),Ro:_N.bind(null,t),mo:vN.bind(null,t),d_:yN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wg(t)?yg(t):t.q_.set("Unknown")):(await t.K_.stop(),vI(t))})),t.K_}function br(t){return t.U_||(t.U_=function(n,i,r){const o=_e(n);return o.w_(),new dN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TN.bind(null,t),mo:SN.bind(null,t),f_:IN.bind(null,t),g_:PN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await md(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,h=new Eg(e,n,l,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(t,e){if(zi("AsyncQueue",`${e}: ${t}`),fu(t))return new ie(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=ll(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Vo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.W_=new Ye(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Yo{constructor(e,n,i,r,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Yo(e,n,Vo.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class AN{constructor(){this.queries=Dy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=_e(n),o=r.queries;r.queries=Dy(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function Dy(){return new aa(t=>WT(t),ld)}async function kN(t,e){const n=_e(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new xN,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=Tg(l,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Ig(n)}async function RN(t,e){const n=_e(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function LN(t,e){const n=_e(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(r)&&(i=!0);l.z_=r}}i&&Ig(n)}function bN(t,e,n){const i=_e(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Ig(t){t.Y_.forEach(e=>{e.next()})}var Vp,Vy;(Vy=Vp||(Vp={})).ea="default",Vy.Cache="cache";class NN{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Yo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.key=e}}class II{constructor(e){this.key=e}}class ON{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=HT(e),this.Ra=new Vo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new My,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,y)=>{const T=r.get(v),S=ud(this.query,y)?y:null,M=!!T&&this.mutatedKeys.has(T.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let U=!1;T&&S?T.data.isEqual(S.data)?M!==V&&(i.track({type:3,doc:S}),U=!0):this.ga(T,S)||(i.track({type:2,doc:S}),U=!0,(d&&this.Aa(S,d)>0||p&&this.Aa(S,p)<0)&&(h=!0)):!T&&S?(i.track({type:0,doc:S}),U=!0):T&&!S&&(i.track({type:1,doc:T}),U=!0,(d||p)&&(h=!0)),U&&(S?(l=l.add(S),o=V?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,y)=>function(S,M){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return V(S)-V(M)}(v.type,y.type)||this.Aa(v.doc,y.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,p=d!==this.Ea;return this.Ea=d,l.length!==0||p?{snapshot:new Yo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new My,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new II(i))}),this.da.forEach(i=>{e.has(i)||n.push(new TI(i))}),n}ba(e){this.Ta=e.Ts,this.da=Ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class MN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class DN{constructor(e){this.key=e,this.va=!1}}class VN{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new aa(h=>WT(h),ld),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(oe.comparator),this.Na=new Map,this.La=new pg,this.Ba={},this.ka=new Map,this.qa=Qo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function FN(t,e,n=!0){const i=kI(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await PI(i,e,n,!0),r}async function jN(t,e){const n=kI(t);await PI(n,e,!0,!1)}async function PI(t,e,n,i){const r=await rN(t.localStore,li(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await zN(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&gI(t.remoteStore,r),h}async function zN(t,e,n,i,r){t.Ka=(y,T,S)=>async function(V,U,R,C){let N=U.view.ma(R);N.ns&&(N=await Ly(V.localStore,U.query,!1).then(({documents:A})=>U.view.ma(A,N)));const H=C&&C.targetChanges.get(U.targetId),Y=C&&C.targetMismatches.get(U.targetId)!=null,J=U.view.applyChanges(N,V.isPrimaryClient,H,Y);return jy(V,U.targetId,J.wa),J.snapshot}(t,y,T,S);const o=await Ly(t.localStore,e,!0),l=new ON(e,o.Ts),h=l.ma(o.documents),d=gu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=l.applyChanges(h,t.isPrimaryClient,d);jy(t,n,p.wa);const v=new MN(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function UN(t,e,n){const i=_e(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(l=>!ld(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Dp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&_g(i.remoteStore,r.targetId),Fp(i,r.targetId)}).catch(du)):(Fp(i,r.targetId),await Dp(i.localStore,r.targetId,!0))}async function BN(t,e){const n=_e(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),_g(n.remoteStore,i.targetId))}async function $N(t,e,n){const i=QN(t);try{const r=await function(l,h){const d=_e(l),p=gt.now(),v=h.reduce((S,M)=>S.add(M.key),Ce());let y,T;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let M=Ui(),V=Ce();return d.cs.getEntries(S,v).next(U=>{M=U,M.forEach((R,C)=>{C.isValidDocument()||(V=V.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,M)).next(U=>{y=U;const R=[];for(const C of h){const N=lb(C,y.get(C.key).overlayedDocument);N!=null&&R.push(new zr(C.key,N,MT(N.value.mapValue),Wn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,R,h)}).next(U=>{T=U;const R=U.applyToLocalDocumentSet(y,V);return d.documentOverlayCache.saveOverlays(S,U.batchId,R)})}).then(()=>({batchId:T.batchId,changes:GT(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,h,d){let p=l.Ba[l.currentUser.toKey()];p||(p=new Ye(Le)),p=p.insert(h,d),l.Ba[l.currentUser.toKey()]=p}(i,r.batchId,n),await vu(i,r.changes),await md(i.remoteStore)}catch(r){const o=Tg(r,"Failed to persist write");n.reject(o)}}async function SI(t,e){const n=_e(t);try{const i=await tN(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.Na.get(o);l&&(Me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.va=!0:r.modifiedDocuments.size>0?Me(l.va):r.removedDocuments.size>0&&(Me(l.va),l.va=!1))}),await vu(n,i,e)}catch(i){await du(i)}}function Fy(t,e,n){const i=_e(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(l,h){const d=_e(l);d.onlineState=h;let p=!1;d.queries.forEach((v,y)=>{for(const T of y.j_)T.Z_(h)&&(p=!0)}),p&&Ig(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function WN(t,e,n){const i=_e(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let l=new Ye(oe.comparator);l=l.insert(o,Dt.newNoDocument(o,ge.min()));const h=Ce().add(o),d=new dd(ge.min(),new Map,new Ye(Le),l,h);await SI(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Pg(i)}else await Dp(i.localStore,e,!1).then(()=>Fp(i,e,n)).catch(du)}async function HN(t,e){const n=_e(t),i=e.batch.batchId;try{const r=await eN(n.localStore,e);xI(n,i,null),CI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await vu(n,r)}catch(r){await du(r)}}async function qN(t,e,n){const i=_e(t);try{const r=await function(l,h){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return d.mutationQueue.lookupMutationBatch(p,h).next(y=>(Me(y!==null),v=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>d.localDocuments.getDocuments(p,v))})}(i.localStore,e);xI(i,e,n),CI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await vu(i,r)}catch(r){await du(r)}}function CI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xI(t,e,n){const i=_e(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Fp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||AI(t,i)})}function AI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_g(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Pg(t))}function jy(t,e,n){for(const i of n)i instanceof TI?(t.La.addReference(i.key,e),GN(t,i)):i instanceof II?(re("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||AI(t,i.key)):pe()}function GN(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(i),Pg(t))}function Pg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Ue.fromString(e)),i=t.qa.next();t.Na.set(i,new DN(n)),t.Oa=t.Oa.insert(n,i),gI(t.remoteStore,new pr(li(BT(n.path)),i,"TargetPurposeLimboResolution",ig.oe))}}async function vu(t,e,n){const i=_e(t),r=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(p=>{var v;if((p||n)&&i.isPrimaryClient){const y=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){r.push(p);const y=gg.Wi(d.targetId,p);o.push(y)}}))}),await Promise.all(l),i.Ca.d_(r),await async function(d,p){const v=_e(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Z.forEach(p,T=>Z.forEach(T.$i,S=>v.persistence.referenceDelegate.addReference(y,T.targetId,S)).next(()=>Z.forEach(T.Ui,S=>v.persistence.referenceDelegate.removeReference(y,T.targetId,S)))))}catch(y){if(!fu(y))throw y;re("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const T=y.targetId;if(!y.fromCache){const S=v.os.get(T),M=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(M);v.os=v.os.insert(T,V)}}}(i.localStore,o))}async function KN(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await dI(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new ie(G.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vu(n,i.hs)}}function ZN(t,e){const n=_e(t),i=n.Na.get(e);if(i&&i.va)return Ce().add(i.key);{let r=Ce();const o=n.Ma.get(e);if(!o)return r;for(const l of o){const h=n.Fa.get(l);r=r.unionWith(h.view.Va)}return r}}function kI(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WN.bind(null,e),e.Ca.d_=LN.bind(null,e.eventManager),e.Ca.$a=bN.bind(null,e.eventManager),e}function QN(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qN.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Jb(this.persistence,new Yb,e.initialUser,this.serializer)}Ga(e){return new Kb(mg.Zr,this.serializer)}Wa(e){return new oN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KN.bind(null,this.syncEngine),await CN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AN}()}createDatastore(e){const n=fd(e.databaseInfo.databaseId),i=function(o){return new cN(o)}(e.databaseInfo);return function(o,l,h,d){return new fN(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,l,h){return new mN(i,r,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Fy(this.syncEngine,n,0),function(){return Ny.D()?new Ny:new aN}())}createSyncEngine(e,n){return function(r,o,l,h,d,p,v){const y=new VN(r,o,l,h,d,p);return v&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=_e(r);re("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await _u(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=bT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{re("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Tg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function _f(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await dI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JN(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Oy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Oy(e.remoteStore,r)),t._onlineComponents=e}async function JN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await _f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await _f(t,new Oh)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await _f(t,new Oh);return t._offlineComponents}async function RI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await zy(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await zy(t,new jp))),t._onlineComponents}function eO(t){return RI(t).then(e=>e.syncEngine)}async function tO(t){const e=await RI(t),n=e.eventManager;return n.onListen=FN.bind(null,e.syncEngine),n.onUnlisten=UN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BN.bind(null,e.syncEngine),n}function nO(t,e,n={}){const i=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const v=new YN({next:T=>{v.Za(),l.enqueueAndForget(()=>RN(o,y)),T.fromCache&&d.source==="server"?p.reject(new ie(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),y=new NN(h,v,{includeMetadataChanges:!0,_a:!0});return kN(o,y)}(await tO(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e,n){if(!n)throw new ie(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iO(t,e,n,i){if(e===!0&&i===!0)throw new ie(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function By(t){if(!oe.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $y(t){if(oe.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function Ps(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gd(t);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new gL;switch(i.type){case"firstParty":return new wL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Uy.get(n);i&&(re("ComponentProvider","Removing Datastore"),Uy.delete(n),i.terminate())}(this),Promise.resolve()}}function rO(t,e,n,i={}){var r;const o=(t=Ps(t,_d))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Ot.MOCK_USER;else{h=RA(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ie(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(p)}t._authCredentials=new _L(new LT(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class cn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class xr extends ua{constructor(e,n,i){super(e,n,BT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new oe(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function NI(t,e,...n){if(t=st(t),bI("collection","path",e),t instanceof _d){const i=Ue.fromString(e,...n);return $y(i),new xr(t,null,i)}{if(!(t instanceof cn||t instanceof xr))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return $y(i),new xr(t.firestore,null,i)}}function Kc(t,e,...n){if(t=st(t),arguments.length===1&&(e=bT.newId()),bI("doc","path",e),t instanceof _d){const i=Ue.fromString(e,...n);return By(i),new cn(t,null,new oe(i))}{if(!(t instanceof cn||t instanceof xr))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return By(i),new cn(t.firestore,t instanceof xr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pI(this,"async_queue_retry"),this.Vu=()=>{const i=gf();i&&re("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=gf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fu(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw zi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Eg.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class yu extends _d{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Hy,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hy(e),this._firestoreClient=void 0,await e}}}function sO(t,e){const n=typeof t=="object"?t:Wm(),i=typeof t=="string"?t:"(default)",r=Ls(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=AA("firestore");o&&rO(r,...o)}return r}function OI(t){if(t._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oO(t),t._firestoreClient}function oO(t){var e,n,i;const r=t._freezeSettings(),o=function(h,d,p,v){return new NL(h,d,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,LI(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new XN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xo(Rt.fromBase64String(e))}catch(n){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xo(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=/^__.*__$/;class lO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class MI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class xg{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DI(this.Cu)&&aO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||fd(e)}Qu(e,n,i,r=!1){return new xg({Cu:e,methodName:n,qu:i,path:Ct.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ag(t){const e=t._freezeSettings(),n=fd(t._databaseId);return new uO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cO(t,e,n,i,r,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);Rg("Data must be an object, but it was:",l,i);const h=VI(i,l);let d,p;if(o.merge)d=new ln(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const y of o.mergeFields){const T=zp(e,y,n);if(!l.contains(T))throw new ie(G.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);jI(v,T)||v.push(T)}d=new ln(v),p=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,p=l.fieldTransforms;return new lO(new Qt(h),d,p)}class wd extends yd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}class kg extends yd{_toFieldTransform(e){return new rb(e.path,new Xl)}isEqual(e){return e instanceof kg}}function hO(t,e,n,i){const r=t.Qu(1,e,n);Rg("Data must be an object, but it was:",r,i);const o=[],l=Qt.empty();bs(i,(d,p)=>{const v=Lg(e,d,n);p=st(p);const y=r.Nu(v);if(p instanceof wd)o.push(v);else{const T=wu(p,y);T!=null&&(o.push(v),l.set(v,T))}});const h=new ln(o);return new MI(l,h,r.fieldTransforms)}function dO(t,e,n,i,r,o){const l=t.Qu(1,e,n),h=[zp(e,i,n)],d=[r];if(o.length%2!=0)throw new ie(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(zp(e,o[T])),d.push(o[T+1]);const p=[],v=Qt.empty();for(let T=h.length-1;T>=0;--T)if(!jI(p,h[T])){const S=h[T];let M=d[T];M=st(M);const V=l.Nu(S);if(M instanceof wd)p.push(S);else{const U=wu(M,V);U!=null&&(p.push(S),v.set(S,U))}}const y=new ln(p);return new MI(v,y,l.fieldTransforms)}function fO(t,e,n,i=!1){return wu(n,t.Qu(i?4:3,e))}function wu(t,e){if(FI(t=st(t)))return Rg("Unsupported field value:",e,t),VI(t,e);if(t instanceof yd)return function(i,r){if(!DI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const h of i){let d=wu(h,r.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=st(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tb(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=gt.fromDate(i);return{timestampValue:bh(r.serializer,o)}}if(i instanceof gt){const o=new gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bh(r.serializer,o)}}if(i instanceof Sg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xo)return{bytesValue:sI(r.serializer,i._byteString)};if(i instanceof cn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Cg)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return ug(h.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${gd(i)}`)}(t,e)}function VI(t,e){const n={};return NT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,(i,r)=>{const o=wu(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function FI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Sg||t instanceof Xo||t instanceof cn||t instanceof yd||t instanceof Cg)}function Rg(t,e,n){if(!FI(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=gd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function zp(t,e,n){if((e=st(e))instanceof vd)return e._internalPath;if(typeof e=="string")return Lg(t,e);throw Mh("Field path arguments must be of type string or ",t,!1,void 0,n)}const pO=new RegExp("[~\\*/\\[\\]]");function Lg(t,e,n){if(e.search(pO)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vd(...e.split("."))._internalPath}catch{throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mh(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new ie(G.INVALID_ARGUMENT,h+t+d)}function jI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mO extends zI{data(){return super.data()}}function bg(t,e){return typeof e=="string"?Lg(t,e):e instanceof vd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ng{}class _O extends Ng{}function vO(t,e,...n){let i=[];e instanceof Ng&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Og).length,h=o.filter(d=>d instanceof Ed).length;if(l>1||l>0&&h>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Ed extends _O{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ed(e,n,i)}_apply(e){const n=this._parse(e);return UI(e._query,n),new ua(e.firestore,e.converter,Rp(e._query,n))}_parse(e){const n=Ag(e.firestore);return function(o,l,h,d,p,v,y){let T;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Gy(y,v);const S=[];for(const M of y)S.push(qy(d,o,M));T={arrayValue:{values:S}}}else T=qy(d,o,y)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Gy(y,v),T=fO(h,l,y,v==="in"||v==="not-in");return ht.create(p,v,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yO(t,e,n){const i=e,r=bg("where",t);return Ed._create(r,i,n)}class Og extends Ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Og(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let l=r;const h=o.getFlattenedFilters();for(const d of h)UI(l,d),l=Rp(l,d)}(e._query,n),new ua(e.firestore,e.converter,Rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qy(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$T(e)&&n.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!oe.isDocumentKey(i))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return py(t,new oe(i))}if(n instanceof cn)return py(t,n._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(n)}.`)}function Gy(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UI(t,e){const n=function(r,o){for(const l of r)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wO{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return bs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>nt(l.doubleValue));return new Cg(o)}convertGeoPoint(e){return new Sg(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);Me(hI(i));const r=new Ql(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return r.isEqual(n)||zi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TO extends zI{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(bg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Zc extends TO{data(e={}){return super.data(e)}}class IO{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Cc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Zc(this._firestore,this._userDataWriter,i.key,i,new Cc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const d=new Zc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Cc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Zc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Cc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:PO(h.type),doc:d,oldIndex:p,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}class SO extends wO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function CO(t){t=Ps(t,ua);const e=Ps(t.firestore,yu),n=OI(e),i=new SO(e);return gO(t._query),nO(n,t._query).then(r=>new IO(e,i,t,r))}function Ky(t,e,n,...i){t=Ps(t,cn);const r=Ps(t.firestore,yu),o=Ag(r);let l;return l=typeof(e=st(e))=="string"||e instanceof vd?dO(o,"updateDoc",t._key,e,n,i):hO(o,"updateDoc",t._key,e),Mg(r,[l.toMutation(t._key,Wn.exists(!0))])}function xO(t){return Mg(Ps(t.firestore,yu),[new cg(t._key,Wn.none())])}function AO(t,e){const n=Ps(t.firestore,yu),i=Kc(t),r=EO(t.converter,e);return Mg(n,[cO(Ag(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then(()=>i)}function Mg(t,e){return function(i,r){const o=new Cr;return i.asyncQueue.enqueueAndForget(async()=>$N(await eO(i),r,o)),o.promise}(OI(t),e)}function kO(){return new kg("serverTimestamp")}(function(e,n=!0){(function(r){oa=r})(ra),ci(new qn("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new yu(new vL(i.getProvider("auth-internal")),new TL(i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(p.options.projectId,v)}(l,r),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),xn(uy,"4.7.3",e),xn(uy,"4.7.3","esm2017")})();const BI="@firebase/installations",Dg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=1e4,WI=`w:${Dg}`,HI="FIS_v2",RO="https://firebaseinstallations.googleapis.com/v1",LO=60*60*1e3,bO="installations",NO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ss=new Rs(bO,NO,OO);function qI(t){return t instanceof Kn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI({projectId:t}){return`${RO}/projects/${t}/installations`}function KI(t){return{token:t.token,requestStatus:2,expiresIn:DO(t.expiresIn),creationTime:Date.now()}}async function ZI(t,e){const i=(await e.json()).error;return Ss.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function QI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MO(t,{refreshToken:e}){const n=QI(t);return n.append("Authorization",VO(e)),n}async function YI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function DO(t){return Number(t.replace("s","000"))}function VO(t){return`${HI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=GI(t),r=QI(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={fid:n,authVersion:HI,appId:t.appId,sdkVersion:WI},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await YI(()=>fetch(i,h));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:KI(p.authToken)}}else throw await ZI("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^[cdef][\w-]{21}$/,Up="";function UO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=BO(t);return zO.test(n)?n:Up}catch{return Up}}function BO(t){return jO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new Map;function eP(t,e){const n=Td(t);tP(n,e),$O(n,e)}function tP(t,e){const n=JI.get(t);if(n)for(const i of n)i(e)}function $O(t,e){const n=WO();n&&n.postMessage({key:t,fid:e}),HO()}let us=null;function WO(){return!us&&"BroadcastChannel"in self&&(us=new BroadcastChannel("[Firebase] FID Change"),us.onmessage=t=>{tP(t.data.key,t.data.fid)}),us}function HO(){JI.size===0&&us&&(us.close(),us=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="firebase-installations-database",GO=1,Cs="firebase-installations-store";let vf=null;function Vg(){return vf||(vf=jE(qO,GO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Cs)}}})),vf}async function Dh(t,e){const n=Td(t),r=(await Vg()).transaction(Cs,"readwrite"),o=r.objectStore(Cs),l=await o.get(n);return await o.put(e,n),await r.done,(!l||l.fid!==e.fid)&&eP(t,e.fid),e}async function nP(t){const e=Td(t),i=(await Vg()).transaction(Cs,"readwrite");await i.objectStore(Cs).delete(e),await i.done}async function Id(t,e){const n=Td(t),r=(await Vg()).transaction(Cs,"readwrite"),o=r.objectStore(Cs),l=await o.get(n),h=e(l);return h===void 0?await o.delete(n):await o.put(h,n),await r.done,h&&(!l||l.fid!==h.fid)&&eP(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fg(t){let e;const n=await Id(t.appConfig,i=>{const r=KO(i),o=ZO(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Up?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function KO(t){const e=t||{fid:UO(),registrationStatus:0};return iP(e)}function ZO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ss.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=QO(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:YO(t)}:{installationEntry:e}}async function QO(t,e){try{const n=await FO(t,e);return Dh(t.appConfig,n)}catch(n){throw qI(n)&&n.customData.serverCode===409?await nP(t.appConfig):await Dh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function YO(t){let e=await Zy(t.appConfig);for(;e.registrationStatus===1;)await XI(100),e=await Zy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Fg(t);return i||n}return e}function Zy(t){return Id(t,e=>{if(!e)throw Ss.create("installation-not-found");return iP(e)})}function iP(t){return XO(t)?{fid:t.fid,registrationStatus:0}:t}function XO(t){return t.registrationStatus===1&&t.registrationTime+$I<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO({appConfig:t,heartbeatServiceProvider:e},n){const i=eM(t,n),r=MO(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={installation:{sdkVersion:WI,appId:t.appId}},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await YI(()=>fetch(i,h));if(d.ok){const p=await d.json();return KI(p)}else throw await ZI("Generate Auth Token",d)}function eM(t,{fid:e}){return`${GI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jg(t,e=!1){let n;const i=await Id(t.appConfig,o=>{if(!rP(o))throw Ss.create("not-registered");const l=o.authToken;if(!e&&iM(l))return o;if(l.requestStatus===1)return n=tM(t,e),o;{if(!navigator.onLine)throw Ss.create("app-offline");const h=sM(o);return n=nM(t,h),h}});return n?await n:i.authToken}async function tM(t,e){let n=await Qy(t.appConfig);for(;n.authToken.requestStatus===1;)await XI(100),n=await Qy(t.appConfig);const i=n.authToken;return i.requestStatus===0?jg(t,e):i}function Qy(t){return Id(t,e=>{if(!rP(e))throw Ss.create("not-registered");const n=e.authToken;return oM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function nM(t,e){try{const n=await JO(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Dh(t.appConfig,i),n}catch(n){if(qI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await nP(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dh(t.appConfig,i)}throw n}}function rP(t){return t!==void 0&&t.registrationStatus===2}function iM(t){return t.requestStatus===2&&!rM(t)}function rM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+LO}function sM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function oM(t){return t.requestStatus===1&&t.requestTime+$I<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(t){const e=t,{installationEntry:n,registrationPromise:i}=await Fg(e);return i?i.catch(console.error):jg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e=!1){const n=t;return await uM(n),(await jg(n,e)).token}async function uM(t){const{registrationPromise:e}=await Fg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){if(!t||!t.options)throw yf("App Configuration");if(!t.name)throw yf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw yf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yf(t){return Ss.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="installations",hM="installations-internal",dM=t=>{const e=t.getProvider("app").getImmediate(),n=cM(e),i=Ls(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},fM=t=>{const e=t.getProvider("app").getImmediate(),n=Ls(e,sP).getImmediate();return{getId:()=>aM(n),getToken:r=>lM(n,r)}};function pM(){ci(new qn(sP,dM,"PUBLIC")),ci(new qn(hM,fM,"PRIVATE"))}pM();xn(BI,Dg);xn(BI,Dg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="analytics",mM="firebase_id",gM="origin",_M=60*1e3,vM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new id("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hn=new Rs("analytics","Analytics",yM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){if(!t.startsWith(zg)){const e=hn.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function oP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function EM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function TM(t,e){const n=EM("firebase-js-sdk-policy",{createScriptURL:wM}),i=document.createElement("script"),r=`${zg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function IM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function PM(t,e,n,i,r,o){const l=i[r];try{if(l)await e[l];else{const d=(await oP(n)).find(p=>p.measurementId===r);d&&await e[d.appId]}}catch(h){tn.error(h)}t("config",r,o)}async function SM(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const h=await oP(n);for(const d of l){const p=h.find(y=>y.measurementId===d),v=p&&e[p.appId];if(v)o.push(v);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){tn.error(o)}}function CM(t,e,n,i){async function r(o,...l){try{if(o==="event"){const[h,d]=l;await SM(t,e,n,h,d)}else if(o==="config"){const[h,d]=l;await PM(t,e,n,i,h,d)}else if(o==="consent"){const[h,d]=l;t("consent",h,d)}else if(o==="get"){const[h,d,p]=l;t("get",h,d,p)}else if(o==="set"){const[h]=l;t("set",h)}else t(o,...l)}catch(h){tn.error(h)}}return r}function xM(t,e,n,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=CM(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function AM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(zg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=30,RM=1e3;class LM{constructor(e={},n=RM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const aP=new LM;function bM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function NM(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:bM(i)},o=vM.replace("{app-id}",n),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let h="";try{const d=await l.json();!((e=d.error)===null||e===void 0)&&e.message&&(h=d.error.message)}catch{}throw hn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function OM(t,e=aP,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw hn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw hn.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new VM;return setTimeout(async()=>{h.abort()},_M),lP({appId:i,apiKey:r,measurementId:o},l,h,e)}async function lP(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=aP){var o;const{appId:l,measurementId:h}=t;try{await MM(i,e)}catch(d){if(h)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:h};throw d}try{const d=await NM(t);return r.deleteThrottleMetadata(l),d}catch(d){const p=d;if(!DM(p)){if(r.deleteThrottleMetadata(l),h)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:h};throw d}const v=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?Ov(n,r.intervalMillis,kM):Ov(n,r.intervalMillis),y={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return r.setThrottleMetadata(l,y),tn.debug(`Calling attemptFetch again in ${v} millis`),lP(t,y,i,r)}}function MM(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function DM(t){if(!(t instanceof Kn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class VM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function FM(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,l=Object.assign(Object.assign({},i),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(){if(ME())try{await DE()}catch(t){return tn.warn(hn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return tn.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zM(t,e,n,i,r,o,l){var h;const d=OM(t);d.then(S=>{n[S.measurementId]=S.appId,t.options.measurementId&&S.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>tn.error(S)),e.push(d);const p=jM().then(S=>{if(S)return i.getId()}),[v,y]=await Promise.all([d,p]);AM(o)||TM(o,v.measurementId),r("js",new Date);const T=(h=l==null?void 0:l.config)!==null&&h!==void 0?h:{};return T[gM]="firebase",T.update=!0,y!=null&&(T[mM]=y),r("config",v.measurementId,T),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this.app=e}_delete(){return delete Sl[this.app.options.appId],Promise.resolve()}}let Sl={},Yy=[];const Xy={};let wf="dataLayer",BM="gtag",Jy,uP,ew=!1;function $M(){const t=[];if(OE()&&t.push("This is a browser extension environment."),VA()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=hn.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}function WM(t,e,n){$M();const i=t.options.appId;if(!i)throw hn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hn.create("no-api-key");if(Sl[i]!=null)throw hn.create("already-exists",{id:i});if(!ew){IM(wf);const{wrappedGtag:o,gtagCore:l}=xM(Sl,Yy,Xy,wf,BM);uP=o,Jy=l,ew=!0}return Sl[i]=zM(t,Yy,Xy,e,Jy,wf,n),new UM(t)}function HM(t=Wm()){t=st(t);const e=Ls(t,Vh);return e.isInitialized()?e.getImmediate():qM(t)}function qM(t,e={}){const n=Ls(t,Vh);if(n.isInitialized()){const r=n.getImmediate();if(Hl(e,n.getOptions()))return r;throw hn.create("already-initialized")}return n.initialize({options:e})}function GM(t,e,n,i){t=st(t),FM(uP,Sl[t.app.options.appId],e,n,i).catch(r=>tn.error(r))}const tw="@firebase/analytics",nw="0.10.8";function KM(){ci(new qn(Vh,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return WM(i,r,n)},"PUBLIC")),ci(new qn("analytics-internal",t,"PRIVATE")),xn(tw,nw),xn(tw,nw,"esm2017");function t(e){try{const n=e.getProvider(Vh).getImmediate();return{logEvent:(i,r,o)=>GM(n,i,r,o)}}catch(n){throw hn.create("interop-component-reg-failed",{reason:n})}}}KM();const ZM={apiKey:"AIzaSyA-ZR_VWGeaRLHT-NX-ly4L95GiGrIMCqY",authDomain:"pilani-trails-84cef.firebaseapp.com",projectId:"pilani-trails-84cef",storageBucket:"pilani-trails-84cef.firebasestorage.app",messagingSenderId:"110096860877",appId:"1:110096860877:web:b23c4b91a6f05cf0ac0b84",measurementId:"G-CG49XPR3LQ"},Ug=zE(ZM),cr=dL(Ug),cl=sO(Ug);HM(Ug);const Bg=W.createContext({}),cP=()=>W.useContext(Bg),QM=({children:t})=>{const[e,n]=W.useState(null),[i,r]=W.useState(!0),o=async(v,y,T)=>{const S=await hT(cr,v,y);return T&&await J1(S.user,{displayName:T}),S},l=(v,y)=>Y1(cr,v,y),h=()=>{const v=new ri;return IT(cr,v)},d=()=>dT(cr);W.useEffect(()=>nR(cr,y=>{n(y),r(!1)}),[]);const p={currentUser:e,signup:o,login:l,signInWithGoogle:h,logout:d,loading:i};return w.jsx(Bg.Provider,{value:p,children:!i&&t})},YM=W.createContext(),Pd=()=>{const t=W.useContext(YM);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},XM=()=>{const{currentUser:t}=Pd(),e=ia(),n=async()=>{try{await dT(cr),e("/login")}catch(i){console.error("Logout failed:",i)}};return w.jsx("header",{className:"app-header",children:w.jsxs("nav",{className:"header-nav",children:[w.jsx("div",{className:"nav-brand",children:w.jsx($t,{to:"/",children:"Pilani Trails"})}),w.jsxs("ul",{className:"nav-links",children:[w.jsx("li",{children:w.jsx($t,{to:"/",children:"Home"})}),t?w.jsxs(w.Fragment,{children:[w.jsx("li",{children:w.jsx($t,{to:"/dashboard",children:"Dashboard"})}),w.jsx("li",{children:w.jsx($t,{to:"/propose-location",children:"Propose Location"})}),t.isAdmin&&w.jsx("li",{children:w.jsx($t,{to:"/admin-review",children:"Admin Review"})}),w.jsx("li",{children:w.jsx("button",{onClick:n,className:"logout-btn",children:"Logout"})})]}):w.jsxs(w.Fragment,{children:[w.jsx("li",{children:w.jsx($t,{to:"/login",children:"Login"})}),w.jsx("li",{children:w.jsx($t,{to:"/signup",children:"Signup"})})]})]})]})})};function hP(t,e){const n=W.useRef(e);W.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const JM=1;function eD(t){return Object.freeze({__version:JM,map:t})}function tD(t,e){return Object.freeze({...t,...e})}const dP=W.createContext(null),fP=dP.Provider;function $g(){const t=W.useContext(dP);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function nD(t){function e(n,i){const{instance:r,context:o}=t(n).current;return W.useImperativeHandle(i,()=>r),n.children==null?null:fs.createElement(fP,{value:o},n.children)}return W.forwardRef(e)}function iD(t){function e(n,i){const[r,o]=W.useState(!1),{instance:l}=t(n,o).current;W.useImperativeHandle(i,()=>l),W.useEffect(function(){r&&l.update()},[l,r,n.children]);const h=l._contentNode;return h?_E.createPortal(n.children,h):null}return W.forwardRef(e)}function rD(t){function e(n,i){const{instance:r}=t(n).current;return W.useImperativeHandle(i,()=>r),null}return W.forwardRef(e)}function pP(t,e){const n=W.useRef();W.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Wg(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function sD(t,e){return function(i,r){const o=$g(),l=t(Wg(i,o),o);return hP(o.map,i.attribution),pP(l.current,i.eventHandlers),e(l.current,o,i,r),l}}var Bp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(qP,function(n){var i="1.9.4";function r(s){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)s[a]=g[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var f=c.call(arguments,2);return function(){return s.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function p(s,a,c){var f,g,E,k;return k=function(){f=!1,g&&(E.apply(c,g),g=!1)},E=function(){f?g=arguments:(s.apply(c,arguments),setTimeout(k,a),f=!0)},E}function v(s,a,c){var f=a[1],g=a[0],E=f-g;return s===f&&c?s:((s-g)%E+E)%E+g}function y(){return!1}function T(s,a){if(a===!1)return s;var c=Math.pow(10,a===void 0?6:a);return Math.round(s*c)/c}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function M(s){return S(s).split(/\s+/)}function V(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var c in a)s.options[c]=a[c];return s.options}function U(s,a,c){var f=[];for(var g in s)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function C(s,a){return s.replace(R,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var N=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function H(s,a){for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var A=0;function P(s){var a=+new Date,c=Math.max(0,16-(a-A));return A=a+c,window.setTimeout(s,c)}var x=window.requestAnimationFrame||J("RequestAnimationFrame")||P,b=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,a,c){if(c&&x===P)s.call(a);else return x.call(window,l(s,a))}function F(s){s&&b.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:v,falseFn:y,formatNum:T,trim:S,splitWords:M,setOptions:V,getParamString:U,template:C,isArray:N,indexOf:H,emptyImageUrl:Y,requestFn:x,cancelFn:b,requestAnimFrame:D,cancelAnimFrame:F};function Xe(){}Xe.extend=function(s){var a=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return s.statics&&r(a,s.statics),s.includes&&(di(s.includes),r.apply(null,[f].concat(s.includes))),r(f,s),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},r(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,k=f._initHooks.length;E<k;E++)f._initHooks[E].call(this)}},a},Xe.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Xe.mergeOptions=function(s){return r(this.prototype.options,s),this},Xe.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function di(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=N(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dt={on:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a);else{s=M(s);for(var g=0,E=s.length;g<E;g++)this._on(s[g],a,c)}return this},off:function(s,a,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],a);else{s=M(s);for(var g=arguments.length===1,E=0,k=s.length;E<k;E++)g?this._off(s[E]):this._off(s[E],a,c)}return this},_on:function(s,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,a,c){var f,g,E;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,E=f.length;g<E;g++)f[g].fn=y;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(s,a,c);if(k!==!1){var z=f[k];this._firingCount&&(z.fn=y,this._events[s]=f=f.slice()),f.splice(k,1)}}},fire:function(s,a,c){if(!this.listens(s,c))return this;var f=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var E=0,k=g.length;E<k;E++){var z=g[E],B=z.fn;z.once&&this.off(s,B,z.ctx),B.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(s,a,c,f){typeof s!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,g,c)!==!1)return!0;if(f){for(var k in this._eventParents)if(this._eventParents[k].listens(s,a,c,f))return!0}return!1},_listens:function(s,a,c){if(!this._events)return!1;var f=this._events[s]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,E=f.length;g<E;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a,!0);else{s=M(s);for(var g=0,E=s.length;g<E;g++)this._on(s[g],a,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var jt=Xe.extend(dt);function q(s,a,c){this.x=c?Math.round(s):s,this.y=c?Math.round(a):a}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new q(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new q(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=X(s);var a=s.x-this.x,c=s.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function X(s,a,c){return s instanceof q?s:N(s)?new q(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new q(s.x,s.y):new q(s,a,c)}function de(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}de.prototype={extend:function(s){var a,c;if(!s)return this;if(s instanceof q||typeof s[0]=="number"||"x"in s)a=c=X(s);else if(s=ye(s),a=s.min,c=s.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,c;return typeof s[0]=="number"||s instanceof q?s=X(s):s=ye(s),s instanceof de?(a=s.min,c=s.max):a=c=s,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,E=g.x>=a.x&&f.x<=c.x,k=g.y>=a.y&&f.y<=c.y;return E&&k},overlaps:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,E=g.x>a.x&&f.x<c.x,k=g.y>a.y&&f.y<c.y;return E&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*s,g=Math.abs(a.y-c.y)*s;return ye(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(s){return s?(s=ye(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ye(s,a){return!s||s instanceof de?s:new de(s,a)}function Pe(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}Pe.prototype={extend:function(s){var a=this._southWest,c=this._northEast,f,g;if(s instanceof we)f=s,g=s;else if(s instanceof Pe){if(f=s._southWest,g=s._northEast,!f||!g)return this}else return s?this.extend(me(s)||be(s)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(s){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*s,g=Math.abs(a.lng-c.lng)*s;return new Pe(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=me(s):s=be(s);var a=this._southWest,c=this._northEast,f,g;return s instanceof Pe?(f=s.getSouthWest(),g=s.getNorthEast()):f=g=s,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(s){s=be(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),E=g.lat>=a.lat&&f.lat<=c.lat,k=g.lng>=a.lng&&f.lng<=c.lng;return E&&k},overlaps:function(s){s=be(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),E=g.lat>a.lat&&f.lat<c.lat,k=g.lng>a.lng&&f.lng<c.lng;return E&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=be(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(s,a){return s instanceof Pe?s:new Pe(s,a)}function we(s,a,c){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(s,a){if(!s)return!1;s=me(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+T(this.lat,s)+", "+T(this.lng,s)+")"},distanceTo:function(s){return Zn.distance(this,me(s))},wrap:function(){return Zn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,c=a/Math.cos(Math.PI/180*this.lat);return be([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function me(s,a,c){return s instanceof we?s:N(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new we(s,a,c)}var ft={latLngToPoint:function(s,a){var c=this.projection.project(s),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(s,a){var c=this.scale(a),f=this.transformation.untransform(s,c);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(s),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new de(f,g)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?v(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?v(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new we(c,a,f)},wrapLatLngBounds:function(s){var a=s.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return s;var E=s.getSouthWest(),k=s.getNorthEast(),z=new we(E.lat-f,E.lng-g),B=new we(k.lat-f,k.lng-g);return new Pe(z,B)}},Zn=r({},ft,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var c=Math.PI/180,f=s.lat*c,g=a.lat*c,E=Math.sin((a.lat-s.lat)*c/2),k=Math.sin((a.lng-s.lng)*c/2),z=E*E+Math.cos(f)*Math.cos(g)*k*k,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),Tu=6378137,Wi={R:Tu,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,s.lat),-c),g=Math.sin(f*a);return new q(this.R*s.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=Tu*Math.PI;return new de([-s,-s],[s,s])}()};function Hi(s,a,c,f){if(N(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=c,this._d=f}Hi.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new q((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function fi(s,a,c,f){return new Hi(s,a,c,f)}var Ur=r({},Zn,{code:"EPSG:3857",projection:Wi,transformation:function(){var s=.5/(Math.PI*Wi.R);return fi(s,.5,-s,.5)}()}),ca=r({},Ur,{code:"EPSG:900913"});function Os(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ha(s,a){var c="",f,g,E,k,z,B;for(f=0,E=s.length;f<E;f++){for(z=s[f],g=0,k=z.length;g<k;g++)B=z[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var da=document.documentElement.style,Ms="ActiveXObject"in window,Iu=Ms&&!document.addEventListener,Ds="msLaunchUri"in navigator&&!("documentMode"in document),Vs=mn("webkit"),Pu=mn("android"),Fs=mn("android 2")||mn("android 3"),fa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Su=Pu&&mn("Google")&&fa<537&&!("AudioNode"in window),ot=!!window.opera,_t=!Ds&&mn("chrome"),Br=mn("gecko")&&!Vs&&!ot&&!Ms,Cu=!_t&&mn("safari"),pa=mn("phantom"),xu="OTransition"in da,$r=navigator.platform.indexOf("Win")===0,ma=Ms&&"transition"in da,js="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fs,zs="MozPerspective"in da,Sd=!window.L_DISABLE_3D&&(ma||js||zs)&&!xu&&!pa,Wr=typeof orientation<"u"||mn("mobile"),ga=Wr&&Vs,Au=Wr&&js,_a=!window.PointerEvent&&window.MSPointerEvent,qi=!!(window.PointerEvent||_a),Us="ontouchstart"in window||!!window.TouchEvent,va=!window.L_NO_TOUCH&&(Us||qi),pi=Wr&&ot,ku=Wr&&Br,Bs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ru=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return s}(),Hr=function(){return!!document.createElement("canvas").getContext}(),$s=!!(document.createElementNS&&Os("svg").createSVGRect),It=!!$s&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Lu=!$s&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),qr=navigator.platform.indexOf("Mac")===0,Gr=navigator.platform.indexOf("Linux")===0;function mn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:Ms,ielt9:Iu,edge:Ds,webkit:Vs,android:Pu,android23:Fs,androidStock:Su,opera:ot,chrome:_t,gecko:Br,safari:Cu,phantom:pa,opera12:xu,win:$r,ie3d:ma,webkit3d:js,gecko3d:zs,any3d:Sd,mobile:Wr,mobileWebkit:ga,mobileWebkit3d:Au,msPointer:_a,pointer:qi,touch:va,touchNative:Us,mobileOpera:pi,mobileGecko:ku,retina:Bs,passiveEvents:Ru,canvas:Hr,svg:$s,vml:Lu,inlineSvg:It,mac:qr,linux:Gr},mi=se.msPointer?"MSPointerDown":"pointerdown",bu=se.msPointer?"MSPointerMove":"pointermove",Nu=se.msPointer?"MSPointerUp":"pointerup",Kr=se.msPointer?"MSPointerCancel":"pointercancel",Ws={touchstart:mi,touchmove:bu,touchend:Nu,touchcancel:Kr},Hs={touchstart:Gs,touchmove:qs,touchend:qs,touchcancel:qs},Ln={},bn=!1;function Ou(s,a,c){return a==="touchstart"&&Du(),Hs[a]?(c=Hs[a].bind(this,c),s.addEventListener(Ws[a],c,!1),c):(console.warn("wrong event specified:",a),y)}function Mu(s,a,c){if(!Ws[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(Ws[a],c,!1)}function ya(s){Ln[s.pointerId]=s}function wa(s){Ln[s.pointerId]&&(Ln[s.pointerId]=s)}function Ea(s){delete Ln[s.pointerId]}function Du(){bn||(document.addEventListener(mi,ya,!0),document.addEventListener(bu,wa,!0),document.addEventListener(Nu,Ea,!0),document.addEventListener(Kr,Ea,!0),bn=!0)}function qs(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Ln)a.touches.push(Ln[c]);a.changedTouches=[a],s(a)}}function Gs(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&qe(a),qs(s,a)}function Vu(s){var a={},c,f;for(f in s)c=s[f],a[f]=c&&c.bind?c.bind(s):c;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ta=200;function Zr(s,a){s.addEventListener("dblclick",a);var c=0,f;function g(E){if(E.detail!==1){f=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var k=Oa(E);if(!(k.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!k.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=Ta?(f++,f===2&&a(Vu(E))):f=1,c=z}}}return s.addEventListener("click",g),{dblclick:a,simDblclick:g}}function gi(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var Qr=vi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Yr=vi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ia=Yr==="webkitTransition"||Yr==="OTransition"?Yr+"End":"transitionend";function Pa(s){return typeof s=="string"?document.getElementById(s):s}function Gi(s,a){var c=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);c=f?f[a]:null}return c==="auto"?null:c}function Se(s,a,c){var f=document.createElement(s);return f.className=a||"",c&&c.appendChild(f),f}function Fe(s){var a=s.parentNode;a&&a.removeChild(s)}function Xr(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function _i(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function Ki(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function Sa(s,a){if(s.classList!==void 0)return s.classList.contains(a);var c=gn(s);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ve(s,a){if(s.classList!==void 0)for(var c=M(a),f=0,g=c.length;f<g;f++)s.classList.add(c[f]);else if(!Sa(s,a)){var E=gn(s);Ca(s,(E?E+" ":"")+a)}}function $e(s,a){s.classList!==void 0?s.classList.remove(a):Ca(s,S((" "+gn(s)+" ").replace(" "+a+" "," ")))}function Ca(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function gn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Je(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&Ks(s,a)}function Ks(s,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):s.style.filter+=" progid:"+f+"(opacity="+a+")"}function vi(s){for(var a=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in a)return s[c];return!1}function Qn(s,a,c){var f=a||new q(0,0);s.style[Qr]=(se.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function fe(s,a){s._leaflet_pos=a,se.any3d?Qn(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function _n(s){return s._leaflet_pos||new q(0,0)}var Nn,On,xa;if("onselectstart"in document)Nn=function(){le(window,"selectstart",qe)},On=function(){De(window,"selectstart",qe)};else{var Zi=vi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Nn=function(){if(Zi){var s=document.documentElement.style;xa=s[Zi],s[Zi]="none"}},On=function(){Zi&&(document.documentElement.style[Zi]=xa,xa=void 0)}}function Aa(){le(window,"dragstart",qe)}function ka(){De(window,"dragstart",qe)}var Zs,Ra;function yi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(nn(),Zs=s,Ra=s.style.outlineStyle,s.style.outlineStyle="none",le(window,"keydown",nn))}function nn(){Zs&&(Zs.style.outlineStyle=Ra,Zs=void 0,Ra=void 0,De(window,"keydown",nn))}function La(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Qs(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var Fu={__proto__:null,TRANSFORM:Qr,TRANSITION:Yr,TRANSITION_END:Ia,get:Pa,getStyle:Gi,create:Se,remove:Fe,empty:Xr,toFront:_i,toBack:Ki,hasClass:Sa,addClass:ve,removeClass:$e,setClass:Ca,getClass:gn,setOpacity:Je,testProp:vi,setTransform:Qn,setPosition:fe,getPosition:_n,get disableTextSelection(){return Nn},get enableTextSelection(){return On},disableImageDrag:Aa,enableImageDrag:ka,preventOutline:yi,restoreOutline:nn,getSizedParentNode:La,getScale:Qs};function le(s,a,c,f){if(a&&typeof a=="object")for(var g in a)ba(s,g,a[g],c);else{a=M(a);for(var E=0,k=a.length;E<k;E++)ba(s,a[E],c,f)}return this}var vn="_leaflet_events";function De(s,a,c,f){if(arguments.length===1)ju(s),delete s[vn];else if(a&&typeof a=="object")for(var g in a)Na(s,g,a[g],c);else if(a=M(a),arguments.length===2)ju(s,function(z){return H(a,z)!==-1});else for(var E=0,k=a.length;E<k;E++)Na(s,a[E],c,f);return this}function ju(s,a){for(var c in s[vn]){var f=c.split(/\d/)[0];(!a||a(f))&&Na(s,f,null,null,c)}}var yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ba(s,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(s[vn]&&s[vn][g])return this;var E=function(z){return c.call(f||s,z||window.event)},k=E;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?E=Ou(s,a,E):se.touch&&a==="dblclick"?E=Zr(s,E):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(yn[a]||a,E,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(E=function(z){z=z||window.event,Ma(s,z)&&k(z)},s.addEventListener(yn[a],E,!1)):s.addEventListener(a,k,!1):s.attachEvent("on"+a,E),s[vn]=s[vn]||{},s[vn][g]=E}function Na(s,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var E=s[vn]&&s[vn][g];if(!E)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?Mu(s,a,E):se.touch&&a==="dblclick"?gi(s,E):"removeEventListener"in s?s.removeEventListener(yn[a]||a,E,!1):s.detachEvent("on"+a,E),s[vn][g]=null}function wn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Qi(s){return ba(s,"wheel",wn),this}function Yi(s){return le(s,"mousedown touchstart dblclick contextmenu",wn),s._leaflet_disable_click=!0,this}function qe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function rn(s){return qe(s),wn(s),this}function Oa(s){if(s.composedPath)return s.composedPath();for(var a=[],c=s.target;c;)a.push(c),c=c.parentNode;return a}function Ys(s,a){if(!a)return new q(s.clientX,s.clientY);var c=Qs(a),f=c.boundingClientRect;return new q((s.clientX-f.left)/c.x-a.clientLeft,(s.clientY-f.top)/c.y-a.clientTop)}var We=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zu(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/We:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ma(s,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var Uu={__proto__:null,on:le,off:De,stopPropagation:wn,disableScrollPropagation:Qi,disableClickPropagation:Yi,preventDefault:qe,stop:rn,getPropagationPath:Oa,getMousePosition:Ys,getWheelDelta:zu,isExternalTarget:Ma,addListener:le,removeListener:De},Da=jt.extend({run:function(s,a,c,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=_n(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var c=this._startPos.add(this._offset.multiplyBy(s));a&&c._round(),fe(this._el,c),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Te=jt.extend({options:{crs:Ur,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=V(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(me(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Yr&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,Ia,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(me(s),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=r({animate:c.animate},c.zoom),c.pan=r({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,c.zoom):this._tryAnimatedPan(s,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),E=s instanceof q?s:this.latLngToContainerPoint(s),k=E.subtract(g).multiplyBy(1-1/f),z=this.containerPointToLatLng(g.add(k));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():be(s);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(s,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var E=f.subtract(c).divideBy(2),k=this.project(s.getSouthWest(),g),z=this.project(s.getNorthEast(),g),B=this.unproject(k.add(z).divideBy(2).add(E),g);return{center:B,zoom:g}},fitBounds:function(s,a){if(s=be(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=X(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Da,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(s,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(s),E=this.getSize(),k=this._zoom;s=me(s),a=a===void 0?k:a;var z=Math.max(E.x,E.y),B=z*this.getZoomScale(k,a),K=g.distanceTo(f)||1,te=1.42,ue=te*te;function Ee(lt){var ic=lt?-1:1,UP=lt?B:z,BP=B*B-z*z+ic*ue*ue*K*K,$P=2*UP*ue*K,bd=BP/$P,p_=Math.sqrt(bd*bd+1)-bd,WP=p_<1e-9?-18:Math.log(p_);return WP}function Ut(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function yt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Tn(lt){return Ut(lt)/yt(lt)}var Kt=Ee(0);function co(lt){return z*(yt(Kt)/yt(Kt+te*lt))}function VP(lt){return z*(yt(Kt)*Tn(Kt+te*lt)-Ut(Kt))/ue}function FP(lt){return 1-Math.pow(1-lt,1.5)}var jP=Date.now(),d_=(Ee(1)-Kt)/te,zP=c.duration?1e3*c.duration:1e3*d_*.8;function f_(){var lt=(Date.now()-jP)/zP,ic=FP(lt)*d_;lt<=1?(this._flyToFrame=D(f_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(VP(ic)/K)),k),this.getScaleZoom(z/co(ic),k),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),f_.call(this),this},flyToBounds:function(s,a){var c=this._getBoundsCenterZoom(s,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(s){return s=be(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,be(s));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),E=this.project(s),k=this.getPixelBounds(),z=ye([k.min.add(c),k.max.subtract(f)]),B=z.getSize();if(!z.contains(E)){this._enforcingBounds=!0;var K=E.subtract(z.getCenter()),te=z.extend(E).getSize().subtract(B);g.x+=K.x<0?-te.x:te.x,g.y+=K.y<0?-te.y:te.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),E=f.subtract(g);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,s):navigator.geolocation.getCurrentPosition(a,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,c=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,c=s.coords.longitude,f=new we(a,c),g=f.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var k=this.getBoundsZoom(g);this.setView(f,E.maxZoom?Math.min(k,E.maxZoom):k)}var z={latlng:f,bounds:g,timestamp:s.timestamp};for(var B in s.coords)typeof s.coords[B]=="number"&&(z[B]=s.coords[B]);this.fire("locationfound",z)}},addHandler:function(s,a){if(!a)return this;var c=this[s]=new a(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Fe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Fe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=Se("div",c,a||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new Pe(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,c){s=be(s),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),E=this.getMaxZoom(),k=s.getNorthWest(),z=s.getSouthEast(),B=this.getSize().subtract(c),K=ye(this.project(z,f),this.project(k,f)).getSize(),te=se.any3d?this.options.zoomSnap:1,ue=B.x/K.x,Ee=B.y/K.y,Ut=a?Math.max(ue,Ee):Math.min(ue,Ee);return f=this.getScaleZoom(Ut,f),te&&(f=Math.round(f/(te/100))*(te/100),f=a?Math.ceil(f/te)*te:Math.floor(f/te)*te),Math.max(g,Math.min(E,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var c=this._getTopLeftPoint(s,a);return new de(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(s)/c.scale(a)},getScaleZoom:function(s,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(s*c.scale(a));return isNaN(f)?1/0:f},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(me(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(s),a)},layerPointToLatLng:function(s){var a=X(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(me(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(me(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(be(s))},distance:function(s,a){return this.options.crs.distance(me(s),me(a))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(s)))},mouseEventToContainerPoint:function(s){return Ys(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Pa(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ve(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Gi(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(s.markerPane,"leaflet-zoom-hide"),ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,c){fe(this._mapPane,new q(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(s,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){fe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var a=s?De:le;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",E=s.target||s.srcElement,k=!1;E;){if(f=this._targets[d(E)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){k=!0;break}if(f&&f.listens(a,!0)&&(g&&!Ma(E,s)||(c.push(f),g))||E===this._container)break;E=E.parentNode}return!c.length&&!k&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var c=s.type;c==="mousedown"&&yi(a),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,c){if(s.type==="click"){var f=r({},s);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(s,a);if(c){for(var E=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&E.push(c[k]);g=E.concat(g)}if(g.length){a==="contextmenu"&&qe(s);var z=g[0],B={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var K=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=K?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(s),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=K?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(k=0;k<g.length;k++)if(g[k].fire(a,B,!0),B.originalEvent._stopped||g[k].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return _n(this._mapPane)||new q(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var c=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var c=this.getSize()._divideBy(2);return this.project(s,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(s,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return ye([this.project(s.getSouthWest(),a)._subtract(f),this.project(s.getNorthWest(),a)._subtract(f),this.project(s.getSouthEast(),a)._subtract(f),this.project(s.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,c){if(!c)return s;var f=this.project(s,a),g=this.getSize().divideBy(2),E=new de(f.subtract(g),f.add(g)),k=this._getBoundsOffset(E,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?s:this.unproject(f.add(k),a)},_limitOffset:function(s,a){if(!a)return s;var c=this.getPixelBounds(),f=new de(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(s,a,c){var f=ye(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(s.min),E=f.max.subtract(s.max),k=this._rebound(g.x,-E.x),z=this._rebound(g.y,-E.y);return new q(k,z)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),c=this.getMaxZoom(),f=se.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(a,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var c=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var s=this._proxy=Se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var c=Qr,f=this._proxy.style[c];Qn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Fe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();Qn(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(s)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(D(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xs(s,a){return new Te(s,a)}var Gt=Xe.extend({options:{position:"topright"},initialize:function(s){V(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),c=this.getPosition(),f=s._controlCorners[c];return ve(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Fe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),zt=function(s){return new Gt(s)};Te.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",c=this._controlContainer=Se("div",a+"control-container",this._container);function f(g,E){var k=a+g+" "+a+E;s[g+E]=Se("div",k,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Fe(this._controlCorners[s]);Fe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Va=Gt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(s,a,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Gt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Se("div",s),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Yi(a),Qi(a);var f=this._section=Se("section",s+"-list");c&&(this._map.on("click",this.collapse,this),le(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Se("a",s+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),le(g,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){qe(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Se("div",s+"-base",f),this._separator=Se("div",s+"-separator",f),this._overlaysList=Se("div",s+"-overlays",f),a.appendChild(f)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xr(this._baseLayersList),Xr(this._overlaysList),this._layerControlInputs=[];var s,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,s=s||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(d(s.target)),c=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(s,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(s){var a=document.createElement("label"),c=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(s.layer),le(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var E=document.createElement("span");a.appendChild(E),E.appendChild(f),E.appendChild(g);var k=s.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)a=s[E],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])&&this._map.removeLayer(g[E]);for(E=0;E<f.length;E++)this._map.hasLayer(f[E])||this._map.addLayer(f[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,c,f=this._map.getZoom(),g=s.length-1;g>=0;g--)a=s[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,le(s,"click",qe),this.expand();var a=this;setTimeout(function(){De(s,"click",qe),a._preventClick=!1})}}),Cd=function(s,a,c){return new Va(s,a,c)},wi=Gt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",c=Se("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,c,f,g){var E=Se("a",c,f);return E.innerHTML=s,E.href="#",E.title=a,E.setAttribute("role","button"),E.setAttribute("aria-label",a),Yi(E),le(E,"click",rn),le(E,"click",g,this),le(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";$e(this._zoomInButton,a),$e(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ve(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ve(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wi,this.addControl(this.zoomControl))});var Bu=function(s){return new wi(s)},Js=Gt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",c=Se("div",a),f=this.options;return this._addScales(f,a+"-line",c),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,c){s.metric&&(this._mScale=Se("div",a,c)),s.imperial&&(this._iScale=Se("div",a,c))},_update:function(){var s=this._map,a=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/s)},_updateImperial:function(s){var a=s*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(s,a,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),c=s/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),eo=function(s){return new Js(s)},$u='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xi=Gt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?$u+" ":"")+"Leaflet</a>"},initialize:function(s){V(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Se("div","leaflet-control-attribution"),Yi(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new Xi().addTo(this)});var xd=function(s){return new Xi(s)};Gt.Layers=Va,Gt.Zoom=wi,Gt.Scale=Js,Gt.Attribution=Xi,zt.layers=Cd,zt.zoom=Bu,zt.scale=eo,zt.attribution=xd;var sn=Xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sn.addTo=function(s,a){return s.addHandler(a,this),this};var Jr={Events:dt},Fa=se.touch?"touchstart mousedown":"mousedown",Mn=jt.extend({options:{clickTolerance:3},initialize:function(s,a,c,f){V(this,f),this._element=s,this._dragStartTarget=a||s,this._preventOutline=c},enable:function(){this._enabled||(le(this._dragStartTarget,Fa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Fa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Sa(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Mn._dragging===this&&this.finishDrag();return}if(!(Mn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Mn._dragging=this,this._preventOutline&&yi(this._element),Aa(),Nn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,c=La(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=_n(this._element),this._parentScale=Qs(c);var f=s.type==="mousedown";le(document,f?"mousemove":"touchmove",this._onMove,this),le(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,qe(s),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),fe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),ka(),On();var a=this._moved&&this._moving;this._moving=!1,Mn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function to(s,a,c){var f,g=[1,4,2,8],E,k,z,B,K,te,ue,Ee;for(E=0,te=s.length;E<te;E++)s[E]._code=Yn(s[E],a);for(z=0;z<4;z++){for(ue=g[z],f=[],E=0,te=s.length,k=te-1;E<te;k=E++)B=s[E],K=s[k],B._code&ue?K._code&ue||(Ee=vt(K,B,ue,a,c),Ee._code=Yn(Ee,a),f.push(Ee)):(K._code&ue&&(Ee=vt(K,B,ue,a,c),Ee._code=Yn(Ee,a),f.push(Ee)),f.push(B));s=f}return s}function no(s,a){var c,f,g,E,k,z,B,K,te;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ue=me([0,0]),Ee=be(s),Ut=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Ut<1700&&(ue=io(s));var yt=s.length,Tn=[];for(c=0;c<yt;c++){var Kt=me(s[c]);Tn.push(a.project(me([Kt.lat-ue.lat,Kt.lng-ue.lng])))}for(z=B=K=0,c=0,f=yt-1;c<yt;f=c++)g=Tn[c],E=Tn[f],k=g.y*E.x-E.y*g.x,B+=(g.x+E.x)*k,K+=(g.y+E.y)*k,z+=k*3;z===0?te=Tn[0]:te=[B/z,K/z];var co=a.unproject(X(te));return me([co.lat+ue.lat,co.lng+ue.lng])}function io(s){for(var a=0,c=0,f=0,g=0;g<s.length;g++){var E=me(s[g]);a+=E.lat,c+=E.lng,f++}return me([a/f,c/f])}var ro={__proto__:null,clipPolygon:to,polygonCenter:no,centroid:io};function ja(s,a){if(!a||!s.length)return s.slice();var c=a*a;return s=Hu(s,c),s=Wu(s,c),s}function za(s,a,c){return Math.sqrt(En(s,a,c,!0))}function Ei(s,a,c){return En(s,a,c)}function Wu(s,a){var c=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,so(s,g,a,0,c-1);var E,k=[];for(E=0;E<c;E++)g[E]&&k.push(s[E]);return k}function so(s,a,c,f,g){var E=0,k,z,B;for(z=f+1;z<=g-1;z++)B=En(s[z],s[f],s[g],!0),B>E&&(k=z,E=B);E>c&&(a[k]=1,so(s,a,c,f,k),so(s,a,c,k,g))}function Hu(s,a){for(var c=[s[0]],f=1,g=0,E=s.length;f<E;f++)qu(s[f],s[g])>a&&(c.push(s[f]),g=f);return g<E-1&&c.push(s[E-1]),c}var Ua;function es(s,a,c,f,g){var E=f?Ua:Yn(s,c),k=Yn(a,c),z,B,K;for(Ua=k;;){if(!(E|k))return[s,a];if(E&k)return!1;z=E||k,B=vt(s,a,z,c,g),K=Yn(B,c),z===E?(s=B,E=K):(a=B,k=K)}}function vt(s,a,c,f,g){var E=a.x-s.x,k=a.y-s.y,z=f.min,B=f.max,K,te;return c&8?(K=s.x+E*(B.y-s.y)/k,te=B.y):c&4?(K=s.x+E*(z.y-s.y)/k,te=z.y):c&2?(K=B.x,te=s.y+k*(B.x-s.x)/E):c&1&&(K=z.x,te=s.y+k*(z.x-s.x)/E),new q(K,te,g)}function Yn(s,a){var c=0;return s.x<a.min.x?c|=1:s.x>a.max.x&&(c|=2),s.y<a.min.y?c|=4:s.y>a.max.y&&(c|=8),c}function qu(s,a){var c=a.x-s.x,f=a.y-s.y;return c*c+f*f}function En(s,a,c,f){var g=a.x,E=a.y,k=c.x-g,z=c.y-E,B=k*k+z*z,K;return B>0&&(K=((s.x-g)*k+(s.y-E)*z)/B,K>1?(g=c.x,E=c.y):K>0&&(g+=k*K,E+=z*K)),k=s.x-g,z=s.y-E,f?k*k+z*z:new q(g,E)}function u(s){return!N(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function _(s,a){var c,f,g,E,k,z,B,K;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=me([0,0]),ue=be(s),Ee=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());Ee<1700&&(te=io(s));var Ut=s.length,yt=[];for(c=0;c<Ut;c++){var Tn=me(s[c]);yt.push(a.project(me([Tn.lat-te.lat,Tn.lng-te.lng])))}for(c=0,f=0;c<Ut-1;c++)f+=yt[c].distanceTo(yt[c+1])/2;if(f===0)K=yt[0];else for(c=0,E=0;c<Ut-1;c++)if(k=yt[c],z=yt[c+1],g=k.distanceTo(z),E+=g,E>f){B=(E-f)/g,K=[z.x-B*(z.x-k.x),z.y-B*(z.y-k.y)];break}var Kt=a.unproject(X(K));return me([Kt.lat+te.lat,Kt.lng+te.lng])}var I={__proto__:null,simplify:ja,pointToSegmentDistance:za,closestPointOnSegment:Ei,clipSegment:es,_getEdgeIntersection:vt,_getBitCode:Yn,_sqClosestPointOnSegment:En,isFlat:u,_flat:m,polylineCenter:_},j={project:function(s){return new q(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new de([-180,-90],[180,90])},$={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,c=this.R,f=s.lat*a,g=this.R_MINOR/c,E=Math.sqrt(1-g*g),k=E*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-k)/(1+k),E/2);return f=-c*Math.log(Math.max(z,1e-10)),new q(s.lng*a*c,f)},unproject:function(s){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),E=Math.exp(-s.y/c),k=Math.PI/2-2*Math.atan(E),z=0,B=.1,K;z<15&&Math.abs(B)>1e-7;z++)K=g*Math.sin(k),K=Math.pow((1-K)/(1+K),g/2),B=Math.PI/2-2*Math.atan(E*K)-k,k+=B;return new we(k*a,s.x*a/c)}},ee={__proto__:null,LonLat:j,Mercator:$,SphericalMercator:Wi},Ne=r({},Zn,{code:"EPSG:3395",projection:$,transformation:function(){var s=.5/(Math.PI*$.R);return fi(s,.5,-s,.5)}()}),at=r({},Zn,{code:"EPSG:4326",projection:j,transformation:fi(1/180,1,-1/180,.5)}),Ae=r({},ft,{projection:j,transformation:fi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var c=a.lng-s.lng,f=a.lat-s.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ft.Earth=Zn,ft.EPSG3395=Ne,ft.EPSG3857=Ur,ft.EPSG900913=ca,ft.EPSG4326=at,ft.Simple=Ae;var Ve=jt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=d(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},_addLayers:function(s){s=s?N(s)?s:[s]:[];for(var a=0,c=s.length;a<c;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=d(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ge=Ve.extend({initialize:function(s,a){V(this,a),this._layers={};var c,f;if(s)for(c=0,f=s.length;c<f;c++)this.addLayer(s[c])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[s]&&f[s].apply(f,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Ji=function(s,a){return new Ge(s,a)},tt=Ge.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ge.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ge.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var a in this._layers){var c=this._layers[a];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),oo=function(s,a){return new tt(s,a)},Xn=Xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){V(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),E=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(c.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function vP(s){return new Xn(s)}var Ba=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ba.imagePath!="string"&&(Ba.imagePath=this._detectIconPath()),(this.options.imagePath||Ba.imagePath)+Xn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(c,f,g){var E=f.exec(c);return E&&E[g]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Se("div","leaflet-default-icon-path",document.body),a=Gi(s,"background-image")||Gi(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Gg=sn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Mn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,E=_n(a._icon),k=c.getPixelBounds(),z=c.getPixelOrigin(),B=ye(k.min._subtract(z).add(g),k.max._subtract(z).subtract(g));if(!B.contains(E)){var K=X((Math.max(B.max.x,E.x)-B.max.x)/(k.max.x-B.max.x)-(Math.min(B.min.x,E.x)-B.min.x)/(k.min.x-B.min.x),(Math.max(B.max.y,E.y)-B.max.y)/(k.max.y-B.max.y)-(Math.min(B.min.y,E.y)-B.min.y)/(k.min.y-B.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),fe(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,c=a._shadow,f=_n(a._icon),g=a._map.layerPointToLatLng(f);c&&fe(c,f),a._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Gu=Ve.extend({options:{icon:new Ba,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){V(this,a),this._latlng=me(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),ve(c,a),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(c,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),E=!1;g!==this._shadow&&(this._removeShadow(),E=!0),g&&(ve(g,a),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Fe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Fe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&fe(this._icon,s),this._shadow&&fe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Je(this._icon,s),this._shadow&&Je(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yP(s,a){return new Gu(s,a)}var er=Ve.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return V(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ku=er.extend({options:{fill:!0,radius:10},initialize:function(s,a){V(this,a),this._latlng=me(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return er.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,c=this._clickTolerance(),f=[s+c,a+c];this._pxBounds=new de(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wP(s,a){return new Ku(s,a)}var Ad=Ku.extend({initialize:function(s,a,c){if(typeof a=="number"&&(a=r({},c,{radius:a})),V(this,a),this._latlng=me(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:er.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Zn.distance){var g=Math.PI/180,E=this._mRadius/Zn.R/g,k=c.project([a+E,s]),z=c.project([a-E,s]),B=k.add(z).divideBy(2),K=c.unproject(B).lat,te=Math.acos((Math.cos(E*g)-Math.sin(a*g)*Math.sin(K*g))/(Math.cos(a*g)*Math.cos(K*g)))/g;(isNaN(te)||te===0)&&(te=E/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:B.x-c.project([K,s-te]).x,this._radiusY=B.y-k.y}else{var ue=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ue).x}this._updateBounds()}});function EP(s,a,c){return new Ad(s,a,c)}var Ti=er.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){V(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,c=null,f=En,g,E,k=0,z=this._parts.length;k<z;k++)for(var B=this._parts[k],K=1,te=B.length;K<te;K++){g=B[K-1],E=B[K];var ue=f(s,g,E,!0);ue<a&&(a=ue,c=f(s,g,E))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=me(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],c=u(s),f=0,g=s.length;f<g;f++)c?(a[f]=me(s[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(s[f]);return a},_project:function(){var s=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new q(s,s);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,c){var f=s[0]instanceof we,g=s.length,E,k;if(f){for(k=[],E=0;E<g;E++)k[E]=this._map.latLngToLayerPoint(s[E]),c.extend(k[E]);a.push(k)}else for(E=0;E<g;E++)this._projectLatlngs(s[E],a,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,E,k,z,B;for(c=0,g=0,E=this._rings.length;c<E;c++)for(B=this._rings[c],f=0,k=B.length;f<k-1;f++)z=es(B[f],B[f+1],s,f,!0),z&&(a[g]=a[g]||[],a[g].push(z[0]),(z[1]!==B[f+1]||f===k-2)&&(a[g].push(z[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,c=0,f=s.length;c<f;c++)s[c]=ja(s[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var c,f,g,E,k,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,E=this._parts.length;c<E;c++)for(z=this._parts[c],f=0,k=z.length,g=k-1;f<k;g=f++)if(!(!a&&f===0)&&za(s,z[g],z[f])<=B)return!0;return!1}});function TP(s,a){return new Ti(s,a)}Ti._flat=m;var ao=Ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return no(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Ti.prototype._convertLatLngs.call(this,s),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(s){Ti.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(s=new de(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,E;f<g;f++)E=to(this._rings[f],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,c,f,g,E,k,z,B,K;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,B=this._parts.length;E<B;E++)for(c=this._parts[E],k=0,K=c.length,z=K-1;k<K;z=k++)f=c[k],g=c[z],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Ti.prototype._containsPoint.call(this,s,!0)}});function IP(s,a){return new ao(s,a)}var Ii=tt.extend({initialize:function(s,a){V(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=N(s)?s:s.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var k=Zu(s,E);return k?(k.feature=Xu(s),k.defaultOptions=k.options,this.resetStyle(k),E.onEachFeature&&E.onEachFeature(s,k),this.addLayer(k)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function Zu(s,a){var c=s.type==="Feature"?s.geometry:s,f=c?c.coordinates:null,g=[],E=a&&a.pointToLayer,k=a&&a.coordsToLatLng||kd,z,B,K,te;if(!f&&!c)return null;switch(c.type){case"Point":return z=k(f),Kg(E,s,z,a);case"MultiPoint":for(K=0,te=f.length;K<te;K++)z=k(f[K]),g.push(Kg(E,s,z,a));return new tt(g);case"LineString":case"MultiLineString":return B=Qu(f,c.type==="LineString"?0:1,k),new Ti(B,a);case"Polygon":case"MultiPolygon":return B=Qu(f,c.type==="Polygon"?1:2,k),new ao(B,a);case"GeometryCollection":for(K=0,te=c.geometries.length;K<te;K++){var ue=Zu({geometry:c.geometries[K],type:"Feature",properties:s.properties},a);ue&&g.push(ue)}return new tt(g);case"FeatureCollection":for(K=0,te=c.features.length;K<te;K++){var Ee=Zu(c.features[K],a);Ee&&g.push(Ee)}return new tt(g);default:throw new Error("Invalid GeoJSON object.")}}function Kg(s,a,c,f){return s?s(a,c):new Gu(c,f&&f.markersInheritOptions&&f)}function kd(s){return new we(s[1],s[0],s[2])}function Qu(s,a,c){for(var f=[],g=0,E=s.length,k;g<E;g++)k=a?Qu(s[g],a-1,c):(c||kd)(s[g]),f.push(k);return f}function Rd(s,a){return s=me(s),s.alt!==void 0?[T(s.lng,a),T(s.lat,a),T(s.alt,a)]:[T(s.lng,a),T(s.lat,a)]}function Yu(s,a,c,f){for(var g=[],E=0,k=s.length;E<k;E++)g.push(a?Yu(s[E],u(s[E])?0:a-1,c,f):Rd(s[E],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function lo(s,a){return s.feature?r({},s.feature,{geometry:a}):Xu(a)}function Xu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ld={toGeoJSON:function(s){return lo(this,{type:"Point",coordinates:Rd(this.getLatLng(),s)})}};Gu.include(Ld),Ad.include(Ld),Ku.include(Ld),Ti.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=Yu(this._latlngs,a?1:0,!1,s);return lo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),ao.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=Yu(this._latlngs,c?2:a?1:0,!0,s);return a||(f=[f]),lo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Ge.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(s).geometry.coordinates)}),lo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var E=g.toGeoJSON(s);if(c)f.push(E.geometry);else{var k=Xu(E);k.type==="FeatureCollection"?f.push.apply(f,k.features):f.push(k)}}}),c?lo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Zg(s,a){return new Ii(s,a)}var PP=Zg,Ju=Ve.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,c){this._url=s,this._bounds=be(a),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Fe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&_i(this._image),this},bringToBack:function(){return this._map&&Ki(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=be(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Se("img");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Qn(this._image,c,a)},_reset:function(){var s=this._image,a=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();fe(s,a.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){Je(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),SP=function(s,a,c){return new Ju(s,a,c)},Qg=Ju.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Se("video");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),s){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var k=Se("source");k.src=this._url[E],a.appendChild(k)}}});function CP(s,a,c){return new Qg(s,a,c)}var Yg=Ju.extend({_initImage:function(){var s=this._image=this._url;ve(s,"leaflet-image-layer"),this._zoomAnimated&&ve(s,"leaflet-zoom-animated"),this.options.className&&ve(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function xP(s,a,c){return new Yg(s,a,c)}var Jn=Ve.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof we||N(s))?(this._latlng=me(s),V(this,a)):(V(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Je(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Je(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Je(this._container,0),this._removeTimeout=setTimeout(l(Fe,void 0,this._container),200)):Fe(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=me(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_i(this._container),this},bringToBack:function(){return this._map&&Ki(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof tt){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?fe(this._container,s.add(c)):a=a.add(s).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(s,a,c,f){var g=a;return g instanceof s||(g=new s(f).setContent(a)),c&&g.setLatLng(c),g}}),Ve.include({_initOverlay:function(s,a,c,f){var g=c;return g instanceof s?(V(g,f),g._source=this):(g=a&&!f?a:new s(f,this),g.setContent(c)),g}});var ec=Jn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Jn.prototype.openOn.call(this,s)},onAdd:function(s){Jn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof er||this._source.on("preclick",wn))},onRemove:function(s){Jn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof er||this._source.off("preclick",wn))},getEvents:function(){var s=Jn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Se("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Se("div",s+"-content-wrapper",a);if(this._contentNode=Se("div",s+"-content",c),Yi(a),Qi(this._contentNode),le(a,"contextmenu",wn),this._tipContainer=Se("div",s+"-tip-container",a),this._tip=Se("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Se("a",s+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',le(f,"click",function(g){qe(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=s.offsetHeight,g=this.options.maxHeight,E="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ve(s,E)):$e(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();fe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(Gi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new q(this._containerLeft,-c-this._containerBottom);g._add(_n(this._container));var E=s.layerPointToContainerPoint(g),k=X(this.options.autoPanPadding),z=X(this.options.autoPanPaddingTopLeft||k),B=X(this.options.autoPanPaddingBottomRight||k),K=s.getSize(),te=0,ue=0;E.x+f+B.x>K.x&&(te=E.x+f-K.x+B.x),E.x-te-z.x<0&&(te=E.x-z.x),E.y+c+B.y>K.y&&(ue=E.y+c-K.y+B.y),E.y-ue-z.y<0&&(ue=E.y-z.y),(te||ue)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,ue]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),AP=function(s,a){return new ec(s,a)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(s,a,c){return this._initOverlay(ec,s,a,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ve.include({bindPopup:function(s,a){return this._popup=this._initOverlay(ec,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof tt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){rn(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof er)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var tc=Jn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Jn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Jn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Jn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Se("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,c,f=this._map,g=this._container,E=f.latLngToContainerPoint(f.getCenter()),k=f.layerPointToContainerPoint(s),z=this.options.direction,B=g.offsetWidth,K=g.offsetHeight,te=X(this.options.offset),ue=this._getAnchor();z==="top"?(a=B/2,c=K):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=K/2):z==="right"?(a=0,c=K/2):z==="left"?(a=B,c=K/2):k.x<E.x?(z="right",a=0,c=K/2):(z="left",a=B+(te.x+ue.x)*2,c=K/2),s=s.subtract(X(a,c,!0)).add(te).add(ue),$e(g,"leaflet-tooltip-right"),$e(g,"leaflet-tooltip-left"),$e(g,"leaflet-tooltip-top"),$e(g,"leaflet-tooltip-bottom"),ve(g,"leaflet-tooltip-"+z),fe(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Je(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kP=function(s,a){return new tc(s,a)};Te.include({openTooltip:function(s,a,c){return this._initOverlay(tc,s,a,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ve.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tc,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof tt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(le(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),le(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,c,f;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Xg=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Xr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function RP(s){return new Xg(s)}Xn.Default=Ba;var $a=Ve.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){V(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Fe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_i(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ki(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof q?s:new q(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,c=-s(-1/0,1/0),f=0,g=a.length,E;f<g;f++)E=a[f].style.zIndex,a[f]!==this._container&&E&&(c=s(c,+E));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Je(this._container,this.options.opacity);var s=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var E=Math.min(1,(s-g.loaded)/200);Je(g.el,E),E<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=a-Math.abs(s-c),this._onUpdateLevel(c)):(Fe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[s],g=this._map;return f||(f=this._levels[s]={},f.el=Se("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,g.getCenter(),g.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Fe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,c,f){var g=Math.floor(s/2),E=Math.floor(a/2),k=c-1,z=new q(+g,+E);z.z=+k;var B=this._tileCoordsToKey(z),K=this._tiles[B];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),k>f?this._retainParent(g,E,k,f):!1)},_retainChildren:function(s,a,c,f){for(var g=2*s;g<2*s+2;g++)for(var E=2*a;E<2*a+2;E++){var k=new q(g,E);k.z=c+1;var z=this._tileCoordsToKey(k),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,E,c+1,f)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var E=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||E)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,a)},_setZoomTransform:function(s,a,c){var f=this._map.getZoomScale(c,s.zoom),g=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?Qn(s.el,g,f):fe(s.el,g)},_resetGrid:function(){var s=this._map,a=s.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(s.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(s.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(s,this._tileZoom).floor(),E=a.getSize().divideBy(f*2);return new de(g.subtract(E),g.add(E))},_update:function(s){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(f),E=g.getCenter(),k=[],z=this.options.keepBuffer,B=new de(g.getBottomLeft().subtract([z,-z]),g.getTopRight().add([z,-z]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var te=this._tiles[K].coords;(te.z!==this._tileZoom||!B.contains(new q(te.x,te.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var ue=g.min.y;ue<=g.max.y;ue++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var Ut=new q(Ee,ue);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var yt=this._tiles[this._tileCoordsToKey(Ut)];yt?yt.current=!0:k.push(Ut)}}if(k.sort(function(Kt,co){return Kt.distanceTo(E)-co.distanceTo(E)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(Ee=0;Ee<k.length;Ee++)this._addTile(k[Ee],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!a.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return be(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,c=this.getTileSize(),f=s.scaleBy(c),g=f.add(c),E=a.unproject(f,s.z),k=a.unproject(g,s.z);return[E,k]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),c=new Pe(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(s){var a=this._tiles[s];a&&(Fe(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ve(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=y,s.onmousemove=y,se.ielt9&&this.options.opacity<1&&Je(s,this.options.opacity)},_addTile:function(s,a){var c=this._getTilePos(s),f=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&D(l(this._tileReady,this,s,null,g)),fe(g,c),this._tiles[f]={el:g,coords:s,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:s});var f=this._tileCoordsToKey(s);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Je(c.el,0),F(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ve(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new q(this._wrapX?v(s.x,this._wrapX):s.x,this._wrapY?v(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new de(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function LP(s){return new $a(s)}var uo=$a.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=V(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var c=document.createElement("img");return le(c,"load",l(this._tileOnLoad,this,a,c)),le(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var a={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=c),a["-y"]=c}return C(this._url,r(a,this.options))},_tileOnLoad:function(s,a){se.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),s(c,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(s=a-s),s+f},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=y,a.onerror=y,!a.complete)){a.src=Y;var c=this._tiles[s].coords;Fe(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",Y),$a.prototype._removeTile.call(this,s)},_tileReady:function(s,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return $a.prototype._tileReady.call(this,s,a,c)}});function Jg(s,a){return new uo(s,a)}var e_=uo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var c=r({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=V(this,a);var g=a.detectRetina&&se.retina?2:1,E=this.getTileSize();c.width=E.x*g,c.height=E.y*g,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,uo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),c=this._crs,f=ye(c.project(a[0]),c.project(a[1])),g=f.min,E=f.max,k=(this._wmsVersion>=1.3&&this._crs===at?[g.y,g.x,E.y,E.x]:[g.x,g.y,E.x,E.y]).join(","),z=uo.prototype.getTileUrl.call(this,s);return z+U(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function bP(s,a){return new e_(s,a)}uo.WMS=e_,Jg.wms=bP;var Pi=Ve.extend({options:{padding:.1},initialize:function(s){V(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),E=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(s,a));se.any3d?Qn(this._container,E,c):fe(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new de(c,c.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),t_=Pi.extend({options:{tolerance:0},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");le(s,"mousemove",this._onMouseMove,this),le(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,Fe(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pi.prototype._update.call(this);var s=this._bounds,a=this._container,c=s.getSize(),f=se.retina?2:1;fe(a,s.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var c,f,g,E,k=s._parts,z=k.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(f=0,g=k[c].length;f<g;f++)E=k[c][f],B[f?"lineTo":"moveTo"](E.x,E.y);a&&B.closePath()}this._fillStroke(B,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,c=this._ctx,f=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,a){var c=a.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&($e(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(ve(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,c){this._map._fireDOMEvent(a,c||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function n_(s){return se.canvas?new t_(s):null}var Wa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),NP={_initContainer:function(){this._container=Se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Wa("shape");ve(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Wa("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Fe(a),s.removeInteractiveTarget(a),delete this._layers[d(s)]},_updateStyle:function(s){var a=s._stroke,c=s._fill,f=s.options,g=s._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=s._stroke=Wa("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),s._stroke=null),f.fill?(c||(c=s._fill=Wa("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),c=Math.round(s._radius),f=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){_i(s._container)},_bringToBack:function(s){Ki(s._container)}},nc=se.vml?Wa:Os,Ha=Pi.extend({_initContainer:function(){this._container=nc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Fe(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pi.prototype._update.call(this);var s=this._bounds,a=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),fe(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=nc("path");s.options.className&&ve(a,s.options.className),s.options.interactive&&ve(a,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Fe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,c=s.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,ha(s._parts,a))},_updateCircle:function(s){var a=s._point,c=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(s,E)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){_i(s._path)},_bringToBack:function(s){Ki(s._path)}});se.vml&&Ha.include(NP);function i_(s){return se.svg||se.vml?new Ha(s):null}Te.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&n_(s)||i_(s)}});var r_=ao.extend({initialize:function(s,a){ao.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=be(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function OP(s,a){return new r_(s,a)}Ha.create=nc,Ha.pointsToPath=ha,Ii.geometryToLayer=Zu,Ii.coordsToLatLng=kd,Ii.coordsToLatLngs=Qu,Ii.latLngToCoords=Rd,Ii.latLngsToCoords=Yu,Ii.getFeature=lo,Ii.asFeature=Xu,Te.mergeOptions({boxZoom:!0});var s_=sn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Fe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Nn(),Aa(),this._startPoint=this._map.mouseEventToContainerPoint(s),le(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Se("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new de(this._point,this._startPoint),c=a.getSize();fe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Fe(this._box),$e(this._container,"leaflet-crosshair")),On(),ka(),De(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",s_),Te.mergeOptions({doubleClickZoom:!0});var o_=sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=s.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(s.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",o_),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var a_=sn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Mn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=be(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%s+a-c,E=(f+a+c)%s-a-c,k=Math.abs(g+c)<Math.abs(E+c)?g:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(s){var a=this._map,c=a.options,f=!c.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,z=g.multiplyBy(k/E),B=z.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,B),te=z.multiplyBy(K/B),ue=K/(c.inertiaDeceleration*k),Ee=te.multiplyBy(-ue/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),D(function(){a.panBy(Ee,{duration:ue,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",a_),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var l_=sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),le(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,c=s.scrollTop||a.scrollTop,f=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*s,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[s,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,s];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=s;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-s},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],s.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;rn(s)}}});Te.addInitHook("addHandler","keyboard",l_),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var u_=sn.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=zu(s),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),rn(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,E=c?Math.ceil(g/c)*c:g,k=s._limitZoom(a+(this._delta>0?E:-E))-a;this._delta=0,this._startTime=null,k&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+k):s.setZoomAround(this._lastMousePos,a+k))}});Te.addInitHook("addHandler","scrollWheelZoom",u_);var MP=600;Te.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var c_=sn.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",qe),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),MP),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){De(document,"touchend",qe),De(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Te.addInitHook("addHandler","tapHold",c_),Te.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var h_=sn.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),qe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var E=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&E.x===0&&E.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(k,this,!0),qe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",h_),Te.BoxZoom=s_,Te.DoubleClickZoom=o_,Te.Drag=a_,Te.Keyboard=l_,Te.ScrollWheelZoom=u_,Te.TapHold=c_,Te.TouchZoom=h_,n.Bounds=de,n.Browser=se,n.CRS=ft,n.Canvas=t_,n.Circle=Ad,n.CircleMarker=Ku,n.Class=Xe,n.Control=Gt,n.DivIcon=Xg,n.DivOverlay=Jn,n.DomEvent=Uu,n.DomUtil=Fu,n.Draggable=Mn,n.Evented=jt,n.FeatureGroup=tt,n.GeoJSON=Ii,n.GridLayer=$a,n.Handler=sn,n.Icon=Xn,n.ImageOverlay=Ju,n.LatLng=we,n.LatLngBounds=Pe,n.Layer=Ve,n.LayerGroup=Ge,n.LineUtil=I,n.Map=Te,n.Marker=Gu,n.Mixin=Jr,n.Path=er,n.Point=q,n.PolyUtil=ro,n.Polygon=ao,n.Polyline=Ti,n.Popup=ec,n.PosAnimation=Da,n.Projection=ee,n.Rectangle=r_,n.Renderer=Pi,n.SVG=Ha,n.SVGOverlay=Yg,n.TileLayer=uo,n.Tooltip=tc,n.Transformation=Hi,n.Util=O,n.VideoOverlay=Qg,n.bind=l,n.bounds=ye,n.canvas=n_,n.circle=EP,n.circleMarker=wP,n.control=zt,n.divIcon=RP,n.extend=r,n.featureGroup=oo,n.geoJSON=Zg,n.geoJson=PP,n.gridLayer=LP,n.icon=vP,n.imageOverlay=SP,n.latLng=me,n.latLngBounds=be,n.layerGroup=Ji,n.map=Xs,n.marker=yP,n.point=X,n.polygon=IP,n.polyline=TP,n.popup=AP,n.rectangle=OP,n.setOptions=V,n.stamp=d,n.svg=i_,n.svgOverlay=xP,n.tileLayer=Jg,n.tooltip=kP,n.transformation=fi,n.version=i,n.videoOverlay=CP;var DP=window.L;n.noConflict=function(){return window.L=DP,this},window.L=n})})(Bp,Bp.exports);var Eu=Bp.exports;const mP=rw(Eu);function Hg(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function qg(t,e){return e==null?function(i,r){const o=W.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=W.useRef();o.current||(o.current=t(i,r));const l=W.useRef(i),{instance:h}=o.current;return W.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,r]),o}}function oD(t,e){W.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function gP(t){return function(n){const i=$g(),r=t(Wg(n,i),i);return hP(i.map,n.attribution),pP(r.current,n.eventHandlers),oD(r.current,i),r}}function aD(t,e){const n=qg(t,e),i=gP(n);return nD(i)}function lD(t,e){const n=qg(t),i=sD(n,e);return iD(i)}function uD(t,e){const n=qg(t,e),i=gP(n);return rD(i)}function cD(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function hD(){return $g().map}function dD(t){const e=hD();return W.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function $p(){return $p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$p.apply(this,arguments)}function fD({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:h,whenReady:d,zoom:p,...v},y){const[T]=W.useState({className:r,id:o,style:h}),[S,M]=W.useState(null);W.useImperativeHandle(y,()=>(S==null?void 0:S.map)??null,[S]);const V=W.useCallback(R=>{if(R!==null&&S===null){const C=new Eu.Map(R,v);n!=null&&p!=null?C.setView(n,p):t!=null&&C.fitBounds(t,e),d!=null&&C.whenReady(d),M(eD(C))}},[]);W.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const U=S?fs.createElement(fP,{value:S},i):l??null;return fs.createElement("div",$p({},T,{ref:V}),U)}const pD=W.forwardRef(fD),mD=aD(function({position:e,...n},i){const r=new Eu.Marker(e,n);return Hg(r,tD(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),gD=lD(function(e,n){const i=new Eu.Popup(e,n.overlayContainer);return Hg(i,n)},function(e,n,{position:i},r){W.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),r(!0))}function d(p){p.popup===l&&r(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,i])}),_D=uD(function({url:e,...n},i){const r=new Eu.TileLayer(e,Wg(n,i));return Hg(r,i)},function(e,n,i){cD(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete mP.Icon.Default.prototype._getIconUrl;mP.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function vD({allPlaces:t,allPlacesSetter:e}){return dD({click(n){const i=n.latlng.lat,r=n.latlng.lng,o=prompt("Add spot name (short):");if(o){const h={id:"u"+Date.now(),name:o,category:"Food",desc:"User-submitted spot",lat:i,lng:r,votes:0,source:"user"},d=[...t,h];e(d),alert("Yo! Your pin is added locally. Go to Contribute page to add details & pics.")}}}),null}function yD({places:t,onMarkerClick:e,allPlaces:n,allPlacesSetter:i}){const r=[28.3581,75.601];return w.jsxs("div",{className:"map-container",style:{height:"100%",width:"100%"},children:[w.jsxs(pD,{center:r,zoom:15,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[w.jsx(_D,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),w.jsx(vD,{allPlaces:n,allPlacesSetter:i}),t.map(o=>w.jsx(mD,{position:[o.lat,o.lng],eventHandlers:{click:()=>{e&&e(o)}},children:w.jsxs(gD,{children:[w.jsx("strong",{children:o.name}),w.jsx("br",{}),o.category&&w.jsxs("span",{children:["Category: ",o.category]}),w.jsx("br",{}),o.desc&&w.jsx("span",{children:o.desc})]})},o.id))]}),w.jsx("div",{className:"map-hint",style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"10px 20px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1e3,fontSize:"14px",textAlign:"center"},children:"Click anywhere on the map to add a quick pin (you can edit later on Contribute page)"})]})}function wD({places:t,categories:e,onFilter:n,onSelect:i}){return w.jsxs("aside",{className:"sidebar",children:[w.jsxs("div",{className:"side-top",children:[w.jsx("h2",{children:"Pilani Trails"}),w.jsx("p",{className:"muted",children:"Explore the town  filter, search & bookmark your faves."}),w.jsx("div",{className:"search-row",children:w.jsx("input",{placeholder:"Search spots, e.g., 'printing' or 'momo'",onChange:r=>n(o=>({...o,q:r.target.value}))})}),w.jsx("div",{className:"chips",children:e.map(r=>w.jsx("button",{className:"chip",onClick:()=>n(o=>({...o,category:r})),children:r},r))})]}),w.jsx("div",{className:"side-list",children:t.length===0?w.jsx("div",{className:"empty",children:"No matches  try fresh filters"}):t.map(r=>w.jsxs("div",{className:"place-card",onClick:()=>i(r),children:[w.jsxs("div",{className:"place-header",children:[w.jsx("strong",{children:r.name}),w.jsx("span",{className:"cat",children:r.category})]}),w.jsx("div",{className:"desc",children:r.desc}),w.jsxs("div",{className:"meta",children:[w.jsxs("span",{children:[" ",r.votes??0]}),w.jsx("span",{children:r.source==="seed"?"OG":"User"})]})]},r.id))}),w.jsx("div",{className:"side-bottom",children:w.jsx("a",{className:"btn",href:"/contribute",children:"Drop a pin"})})]})}const Fh=[{id:"p1",name:"The Sardar Dhaba",category:"Food",desc:"Legendary dhaba vibes  butter chicken that hits different after a long lab sesh.",lat:28.3578,lng:75.6005,img:"",votes:32,bookmarked:!1,source:"seed"},{id:"p2",name:"Neelam Books & Stationery",category:"Stationery",desc:"OG spot for project printing, thick bond paper, and mad exam-specific notes.",lat:28.3589,lng:75.6002,img:"",votes:21,bookmarked:!1,source:"seed"},{id:"p3",name:"Payal Cafe",category:"Cafe",desc:"Chill cafe, good for group meetups and chai. Great momo on rainy days.",lat:28.3584,lng:75.602,img:"",votes:44,bookmarked:!0,source:"seed"},{id:"p4",name:"Campus Printing Hub",category:"Services",desc:"Fast printing, lamination & binding  usually crowded at midnight before submissions.",lat:28.3593,lng:75.6016,img:"",votes:12,bookmarked:!1,source:"seed"},{id:"p5",name:"Baker's Corner",category:"Food",desc:"Fresh bread & quirky cakes. Perfect for midnight cravings.",lat:28.3572,lng:75.6027,img:"",votes:9,bookmarked:!1,source:"seed"},{id:"p6",name:"BITS Medical Store",category:"Services",desc:"Medical & first-aid essentials. Helpful during chaotic project weeks.",lat:28.3579,lng:75.6009,img:"",votes:6,bookmarked:!1,source:"seed"},{id:"p7",name:"Neha's Samosa Stall",category:"Food",desc:"Cheap samosas, extra spicy chutney  campus fave for breakfast.",lat:28.3586,lng:75.5998,img:"",votes:15,bookmarked:!1,source:"seed"},{id:"p8",name:"Pilani Park",category:"Outdoors",desc:"Relax under trees, group picnic spot. Insta-friendly sunsets.",lat:28.3598,lng:75.6031,img:"",votes:26,bookmarked:!0,source:"seed"},{id:"p9",name:"SIM Printing (24x7)",category:"Services",desc:"24-hour print joint. Lifesaver during midnight panic.",lat:28.3569,lng:75.6011,img:"",votes:18,bookmarked:!1,source:"seed"},{id:"p10",name:"Gurdwara Lane",category:"Spiritual",desc:"Peaceful spot, langar on weekends sometimes.",lat:28.358,lng:75.6038,img:"",votes:8,bookmarked:!1,source:"seed"},{id:"p11",name:"The Chill Zone (Gaming)",category:"Entertainment",desc:"Console gaming, cheap snacks  perfect to unwind.",lat:28.3587,lng:75.6024,img:"",votes:11,bookmarked:!1,source:"seed"},{id:"p12",name:"Mom's Dosa",category:"Food",desc:"South-Indian breakfast stall that slaps. Dosa + filter coffee = peak energy.",lat:28.3576,lng:75.6018,img:"",votes:29,bookmarked:!0,source:"seed"}];function ED(){const t="pilani_trails_places_v1",[e,n]=W.useState(()=>{try{const i=localStorage.getItem(t);return i?JSON.parse(i):(localStorage.setItem(t,JSON.stringify(Fh)),Fh)}catch{return[]}});return W.useEffect(()=>{localStorage.setItem(t,JSON.stringify(e))},[e]),[e,n]}function TD(){const[t,e]=ED(),[n,i]=W.useState({q:"",category:"All"}),[r,o]=W.useState(null),l=t.filter(h=>{const d=n.q.toLowerCase(),p=!d||h.name.toLowerCase().includes(d)||(h.desc||"").toLowerCase().includes(d),v=n.category==="All"||h.category===n.category;return p&&v});return w.jsxs("div",{className:"home-grid",children:[w.jsx(wD,{places:l,categories:["All","Food","Cafe","Stationery","Services","Outdoors","Spiritual","Entertainment"],onFilter:i,onSelect:o}),w.jsx(yD,{places:l,onMarkerClick:o,allPlacesSetter:e,allPlaces:t})]})}function ID(){const t="pilani_trails_places_v1",[e,n]=W.useState(()=>JSON.parse(localStorage.getItem(t)||"[]"));W.useEffect(()=>localStorage.setItem(t,JSON.stringify(e)),[e]);const[i,r]=W.useState({name:"",category:"Food",desc:"",img:"",lat:"",lng:""});function o(h){h.preventDefault();const p={id:"u"+Date.now(),...i,lat:parseFloat(i.lat),lng:parseFloat(i.lng),votes:0,source:"user"};n(v=>[p,...v]),alert("Nice! Your spot is added locally. It shows on the map for you. Share to get others to upvote!"),r({name:"",category:"Food",desc:"",img:"",lat:"",lng:""})}function l(){alert("Tip: To capture coords, open the map and click a location to create a quick pin  then edit its coordinates here.")}return w.jsxs("div",{className:"contribute-page",children:[w.jsx("h2",{children:"Contribute a spot  be the plug "}),w.jsx("p",{className:"muted",children:"Add details, drop an image link, and tell folks why this place slaps."}),w.jsxs("form",{className:"contrib-form",onSubmit:o,children:[w.jsxs("label",{children:["Name",w.jsx("input",{value:i.name,onChange:h=>r({...i,name:h.target.value}),required:!0})]}),w.jsxs("label",{children:["Category",w.jsxs("select",{value:i.category,onChange:h=>r({...i,category:h.target.value}),children:[w.jsx("option",{children:"Food"}),w.jsx("option",{children:"Cafe"}),w.jsx("option",{children:"Stationery"}),w.jsx("option",{children:"Services"}),w.jsx("option",{children:"Outdoors"}),w.jsx("option",{children:"Entertainment"}),w.jsx("option",{children:"Spiritual"})]})]}),w.jsxs("label",{children:["Description",w.jsx("textarea",{value:i.desc,onChange:h=>r({...i,desc:h.target.value}),placeholder:"Why should peeps visit?"})]}),w.jsxs("label",{children:["Image URL (optional)",w.jsx("input",{value:i.img,onChange:h=>r({...i,img:h.target.value})})]}),w.jsxs("div",{className:"coords",children:[w.jsxs("label",{children:["Latitude",w.jsx("input",{value:i.lat,onChange:h=>r({...i,lat:h.target.value})})]}),w.jsxs("label",{children:["Longitude",w.jsx("input",{value:i.lng,onChange:h=>r({...i,lng:h.target.value})})]}),w.jsx("button",{type:"button",className:"btn ghost",onClick:l,children:"How to get coords?"})]}),w.jsxs("div",{className:"form-row",children:[w.jsx("button",{className:"btn",type:"submit",children:"Submit Pin"}),w.jsx("button",{type:"button",className:"btn ghost",onClick:()=>{n(Fh),localStorage.setItem(t,JSON.stringify(Fh)),alert("Reset to seeded spots!")},children:"Reset to seeded"})]})]}),w.jsxs("div",{className:"contrib-list",children:[w.jsx("h3",{children:"Your local pins"}),e.map(h=>w.jsxs("div",{className:"place-card",children:[w.jsx("strong",{children:h.name})," ",w.jsxs("span",{className:"muted",children:["(",h.category,")"]}),w.jsx("div",{className:"desc",children:h.desc})]},h.id))]})]})}function PD(){return w.jsxs("div",{className:"about-page",children:[w.jsx("h2",{children:"About PilaniTrails"}),w.jsx("p",{children:"This is a student-made, community-driven map for Pilani town. We wanted a playful, chill place where freshers and OGs can share recs  from the best samosa stall to the 24x7 print joint."}),w.jsx("h3",{children:"Why this exists"}),w.jsxs("ul",{children:[w.jsx("li",{children:"College doesn't publish a neat guide; we do."}),w.jsx("li",{children:"Helps new students save time and avoid getting lost."}),w.jsx("li",{children:"Community-owned: you add, vote, and curate."})]}),w.jsx("h3",{children:"How to contribute"}),w.jsxs("ol",{children:[w.jsx("li",{children:"Click on the map to drop a quick pin, then refine it on Contribute page."}),w.jsx("li",{children:"Share the app with your batch  upvotes = cred."}),w.jsx("li",{children:"If you want the data public/publicly hosted, we can later add a backend."})]}),w.jsx("p",{className:"muted",children:"Made with  by students. Not affiliated with BITS Pilani."})]})}function SD(){const t="pilani_trails_places_v1",[e,n]=W.useState(""),[i,r]=W.useState(!1),[o,l]=W.useState([]);W.useEffect(()=>{const p=localStorage.getItem(t)||"[]";l(JSON.parse(p))},[]);function h(p){p.preventDefault();const v=e==="pilaniadmin123";r(v),v||alert("Nah fam, wrong pass.")}function d(p){if(!confirm("Delete for real?"))return;const v=o.filter(y=>y.id!==p);l(v),localStorage.setItem(t,JSON.stringify(v))}return i?w.jsxs("div",{className:"admin-page",children:[w.jsx("h2",{children:"Admin Dashboard"}),w.jsx("p",{className:"muted",children:"Manage local pins"}),w.jsx("div",{className:"admin-list",children:o.map(p=>w.jsxs("div",{className:"place-card",children:[w.jsx("strong",{children:p.name})," ",w.jsx("small",{children:p.category}),w.jsx("div",{className:"desc",children:p.desc}),w.jsxs("div",{className:"meta",children:[w.jsxs("span",{children:["Votes: ",p.votes??0]}),w.jsx("button",{className:"btn ghost",onClick:()=>d(p.id),children:"Delete"})]})]},p.id))})]}):w.jsxs("div",{className:"admin-page",children:[w.jsx("h2",{children:"Admin"}),w.jsxs("p",{children:["Enter the admin pass (set in ",w.jsx("code",{children:".env.local"}),")"]}),w.jsxs("form",{onSubmit:h,children:[w.jsx("input",{value:e,onChange:p=>n(p.target.value),placeholder:"admin pass"}),w.jsx("button",{className:"btn",type:"submit",children:"Unlock"})]})]})}const CD=()=>{const[t,e]=W.useState(""),[n,i]=W.useState(""),[r,o]=W.useState(""),[l,h]=W.useState(!1),{login:d,signInWithGoogle:p}=cP(),v=ia(),y=async S=>{S.preventDefault();try{o(""),h(!0),await d(t,n),v("/")}catch(M){o("Failed to sign in: "+M.message)}h(!1)},T=async()=>{try{o(""),h(!0),await p(),v("/")}catch(S){o("Failed to sign in with Google: "+S.message)}h(!1)};return w.jsx("div",{className:"auth-container",children:w.jsxs("div",{className:"auth-card",children:[w.jsx("h2",{children:"Login to Pilani Trails"}),r&&w.jsx("div",{className:"error-message",children:r}),w.jsxs("form",{onSubmit:y,children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"email",children:"Email"}),w.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),required:!0,placeholder:"your.email@example.com"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"password",children:"Password"}),w.jsx("input",{id:"password",type:"password",value:n,onChange:S=>i(S.target.value),required:!0,placeholder:""})]}),w.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Signing in...":"Sign In"})]}),w.jsx("div",{className:"divider",children:w.jsx("span",{children:"OR"})}),w.jsxs("button",{onClick:T,disabled:l,className:"btn-google",children:[w.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[w.jsx("path",{fill:"#4285F4",d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z"}),w.jsx("path",{fill:"#34A853",d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z"}),w.jsx("path",{fill:"#FBBC05",d:"M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z"}),w.jsx("path",{fill:"#EA4335",d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z"})]}),"Sign in with Google"]}),w.jsxs("p",{className:"auth-switch",children:["Don't have an account? ",w.jsx($t,{to:"/signup",children:"Sign up"})]})]})})},xD=()=>{const[t,e]=W.useState(""),[n,i]=W.useState(""),[r,o]=W.useState(""),[l,h]=W.useState(""),[d,p]=W.useState(!1),{user:v}=Pd(),y=ia();if(v)return y("/"),null;const T=async M=>{if(M.preventDefault(),n!==r){h("Passwords do not match");return}if(n.length<6){h("Password must be at least 6 characters");return}h(""),p(!0);try{await hT(cr,t,n),y("/")}catch(V){h(V.message)}finally{p(!1)}},S=async()=>{h(""),p(!0);try{const M=new ri;await IT(cr,M),y("/")}catch(M){h(M.message)}finally{p(!1)}};return w.jsx("div",{className:"auth-container",children:w.jsxs("div",{className:"auth-card",children:[w.jsx("h2",{children:"Create Account"}),w.jsx("p",{children:"Sign up for Pilani Trails"}),l&&w.jsx("div",{className:"error-message",children:l}),w.jsxs("form",{onSubmit:T,children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"email",children:"Email"}),w.jsx("input",{type:"email",id:"email",value:t,onChange:M=>e(M.target.value),placeholder:"Enter your email",required:!0,disabled:d})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"password",children:"Password"}),w.jsx("input",{type:"password",id:"password",value:n,onChange:M=>i(M.target.value),placeholder:"Create a password (min 6 characters)",required:!0,disabled:d})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),w.jsx("input",{type:"password",id:"confirmPassword",value:r,onChange:M=>o(M.target.value),placeholder:"Confirm your password",required:!0,disabled:d})]}),w.jsx("button",{type:"submit",className:"btn-primary",disabled:d,children:d?"Creating Account...":"Sign Up"})]}),w.jsx("div",{className:"divider",children:"OR"}),w.jsxs("button",{onClick:S,className:"btn-google",disabled:d,children:[w.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[w.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),w.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),w.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),w.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign up with Google"]}),w.jsxs("div",{className:"auth-switch",children:["Already have an account? ",w.jsx($t,{to:"/login",children:"Sign In"})]})]})})};function AD(){var T;const{currentUser:t,logout:e}=Pd(),n=ia(),[i,r]=W.useState([]),[o,l]=W.useState(!0),[h,d]=W.useState({totalProposals:0,pendingProposals:0,approvedProposals:0,rejectedProposals:0});W.useEffect(()=>{p()},[t]);const p=async()=>{l(!0);try{const M=JSON.parse(localStorage.getItem("proposals")||"[]").filter(V=>V.userId===(t==null?void 0:t.uid));r(M),d({totalProposals:M.length,pendingProposals:M.filter(V=>V.status==="pending").length,approvedProposals:M.filter(V=>V.status==="approved").length,rejectedProposals:M.filter(V=>V.status==="rejected").length})}catch(S){console.error("Error loading user data:",S)}finally{l(!1)}},v=async()=>{try{await e(),n("/login")}catch(S){console.error("Logout error:",S)}},y=S=>{switch(S){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}};return o?w.jsx("div",{className:"dashboard-container",style:ae.container,children:w.jsx("div",{style:ae.loading,children:"Loading your dashboard..."})}):w.jsxs("div",{className:"dashboard-container",style:ae.container,children:[w.jsxs("div",{style:ae.header,children:[w.jsx("h1",{style:ae.title,children:"My Dashboard"}),w.jsxs("p",{style:ae.subtitle,children:["Welcome back, ",(t==null?void 0:t.email)||"User","!"]})]}),w.jsxs("div",{style:ae.card,children:[w.jsx("h2",{style:ae.cardTitle,children:"Account Information"}),w.jsxs("div",{style:ae.infoGrid,children:[w.jsxs("div",{style:ae.infoItem,children:[w.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]}),w.jsxs("div",{style:ae.infoItem,children:[w.jsx("strong",{children:"User ID:"})," ",t==null?void 0:t.uid]}),w.jsxs("div",{style:ae.infoItem,children:[w.jsx("strong",{children:"Member Since:"})," ",new Date(((T=t==null?void 0:t.metadata)==null?void 0:T.creationTime)||Date.now()).toLocaleDateString()]})]})]}),w.jsxs("div",{style:ae.statsGrid,children:[w.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#007bff"},children:[w.jsx("div",{style:ae.statNumber,children:h.totalProposals}),w.jsx("div",{style:ae.statLabel,children:"Total Proposals"})]}),w.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#ffc107"},children:[w.jsx("div",{style:ae.statNumber,children:h.pendingProposals}),w.jsx("div",{style:ae.statLabel,children:"Pending Review"})]}),w.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#28a745"},children:[w.jsx("div",{style:ae.statNumber,children:h.approvedProposals}),w.jsx("div",{style:ae.statLabel,children:"Approved"})]}),w.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#dc3545"},children:[w.jsx("div",{style:ae.statNumber,children:h.rejectedProposals}),w.jsx("div",{style:ae.statLabel,children:"Rejected"})]})]}),w.jsxs("div",{style:ae.card,children:[w.jsx("h2",{style:ae.cardTitle,children:"Quick Actions"}),w.jsxs("div",{style:ae.actionsGrid,children:[w.jsxs($t,{to:"/propose",style:ae.actionButton,children:[w.jsx("span",{style:ae.actionIcon,children:""}),w.jsx("span",{children:"Propose New Location"})]}),w.jsxs($t,{to:"/",style:ae.actionButton,children:[w.jsx("span",{style:ae.actionIcon,children:""}),w.jsx("span",{children:"View Map"})]}),w.jsxs($t,{to:"/contribute",style:ae.actionButton,children:[w.jsx("span",{style:ae.actionIcon,children:""}),w.jsx("span",{children:"Contribute"})]}),w.jsxs("button",{onClick:v,style:{...ae.actionButton,cursor:"pointer",border:"none"},children:[w.jsx("span",{style:ae.actionIcon,children:""}),w.jsx("span",{children:"Logout"})]})]})]}),w.jsxs("div",{style:ae.card,children:[w.jsx("h2",{style:ae.cardTitle,children:"My Proposals"}),i.length===0?w.jsxs("div",{style:ae.emptyState,children:[w.jsx("p",{children:"You haven't submitted any proposals yet."}),w.jsx($t,{to:"/propose",style:ae.primaryButton,children:"Submit Your First Proposal"})]}):w.jsx("div",{style:ae.proposalsList,children:i.map(S=>{var M,V,U;return w.jsxs("div",{style:ae.proposalCard,children:[w.jsxs("div",{style:ae.proposalHeader,children:[w.jsx("h3",{style:ae.proposalTitle,children:S.name}),w.jsx("span",{style:{...ae.statusBadge,backgroundColor:y(S.status)},children:((M=S.status)==null?void 0:M.toUpperCase())||"PENDING"})]}),w.jsxs("div",{style:ae.proposalDetails,children:[w.jsxs("div",{children:[w.jsx("strong",{children:"Category:"})," ",S.category]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Location:"})," [",(V=S.lat)==null?void 0:V.toFixed(4),", ",(U=S.lng)==null?void 0:U.toFixed(4),"]"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Submitted:"})," ",new Date(S.timestamp).toLocaleDateString()]})]}),S.description&&w.jsx("p",{style:ae.proposalDescription,children:S.description}),S.adminFeedback&&w.jsxs("div",{style:ae.feedback,children:[w.jsx("strong",{children:"Admin Feedback:"})," ",S.adminFeedback]})]},S.id)})})]}),w.jsxs("div",{style:ae.card,children:[w.jsx("h2",{style:ae.cardTitle,children:"Need Help?"}),w.jsxs("p",{children:["Check out our ",w.jsx($t,{to:"/about",style:ae.link,children:"About page"})," for more information about Pilani Trails."]}),w.jsxs("p",{children:["Questions? Contact us or visit the ",w.jsx($t,{to:"/contribute",style:ae.link,children:"Contribute page"})," to learn more."]})]})]})}const ae={container:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},subtitle:{fontSize:"1.1rem",color:"#666"},loading:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#666"},card:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#333"},infoGrid:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},infoItem:{padding:"0.5rem",fontSize:"1rem"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},statCard:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid",textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},statLabel:{fontSize:"0.9rem",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},actionsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},actionButton:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f8f9fa",borderRadius:"8px",textDecoration:"none",color:"#333",transition:"all 0.2s",fontWeight:"500"},actionIcon:{fontSize:"2rem",marginBottom:"0.5rem"},emptyState:{textAlign:"center",padding:"2rem",color:"#666"},primaryButton:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"#fff",textDecoration:"none",borderRadius:"4px",marginTop:"1rem",fontWeight:"500"},proposalsList:{display:"flex",flexDirection:"column",gap:"1rem"},proposalCard:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},proposalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},proposalTitle:{fontSize:"1.2rem",fontWeight:"bold",margin:0},statusBadge:{padding:"0.25rem 0.75rem",borderRadius:"12px",color:"#fff",fontSize:"0.8rem",fontWeight:"bold"},proposalDetails:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},proposalDescription:{marginTop:"0.5rem",color:"#555",lineHeight:"1.5"},feedback:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",borderLeft:"3px solid #007bff"},link:{color:"#007bff",textDecoration:"none",fontWeight:"500"}},kD=()=>{const{currentUser:t}=W.useContext(Bg),[e,n]=W.useState({name:"",description:"",latitude:"",longitude:"",category:""}),[i,r]=W.useState(!1),[o,l]=W.useState({type:"",text:""}),h=p=>{const{name:v,value:y}=p.target;n(T=>({...T,[v]:y}))},d=async p=>{if(p.preventDefault(),!t){l({type:"error",text:"You must be logged in to propose a location."});return}if(!e.name||!e.description||!e.latitude||!e.longitude||!e.category){l({type:"error",text:"Please fill in all fields."});return}const v=parseFloat(e.latitude),y=parseFloat(e.longitude);if(isNaN(v)||isNaN(y)||v<-90||v>90||y<-180||y>180){l({type:"error",text:"Please enter valid coordinates."});return}r(!0),l({type:"",text:""});try{await AO(NI(cl,"proposals"),{name:e.name,description:e.description,latitude:v,longitude:y,category:e.category,status:"pending",userId:t.uid,userEmail:t.email,createdAt:kO()}),l({type:"success",text:"Location proposal submitted successfully!"}),n({name:"",description:"",latitude:"",longitude:"",category:""})}catch(T){console.error("Error submitting proposal:",T),l({type:"error",text:"Failed to submit proposal. Please try again."})}finally{r(!1)}};return t?w.jsx("div",{className:"propose-location-container",children:w.jsxs("div",{className:"propose-location-card",children:[w.jsx("h2",{children:"Propose a New Location"}),w.jsx("p",{className:"subtitle",children:"Share a new trail or location with the community"}),o.text&&w.jsx("div",{className:`message ${o.type}`,children:o.text}),w.jsxs("form",{onSubmit:d,children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"name",children:"Location Name *"}),w.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:h,placeholder:"Enter location name",required:!0})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"description",children:"Description *"}),w.jsx("textarea",{id:"description",name:"description",value:e.description,onChange:h,placeholder:"Describe the location, its features, and why it should be added",rows:"4",required:!0})]}),w.jsxs("div",{className:"form-row",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"latitude",children:"Latitude *"}),w.jsx("input",{type:"text",id:"latitude",name:"latitude",value:e.latitude,onChange:h,placeholder:"e.g., 28.3636",required:!0})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"longitude",children:"Longitude *"}),w.jsx("input",{type:"text",id:"longitude",name:"longitude",value:e.longitude,onChange:h,placeholder:"e.g., 75.5868",required:!0})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"category",children:"Category *"}),w.jsxs("select",{id:"category",name:"category",value:e.category,onChange:h,required:!0,children:[w.jsx("option",{value:"",children:"Select a category"}),w.jsx("option",{value:"trail",children:"Trail"}),w.jsx("option",{value:"viewpoint",children:"Viewpoint"}),w.jsx("option",{value:"landmark",children:"Landmark"}),w.jsx("option",{value:"park",children:"Park"}),w.jsx("option",{value:"other",children:"Other"})]})]}),w.jsx("button",{type:"submit",className:"submit-button",disabled:i,children:i?"Submitting...":"Submit Proposal"})]})]})}):w.jsx("div",{className:"propose-location-container",children:w.jsxs("div",{className:"login-required",children:[w.jsx("h2",{children:"Login Required"}),w.jsx("p",{children:"You must be logged in to propose a new location."}),w.jsx("p",{children:"Please log in or sign up to continue."})]})})},RD=()=>{const[t,e]=W.useState([]),[n,i]=W.useState(!0),[r,o]=W.useState("pending"),{currentUser:l}=Pd();W.useEffect(()=>{h()},[r]);const h=async()=>{try{i(!0);const y=NI(cl,"locationProposals");let T;r==="all"?T=y:T=vO(y,yO("status","==",r));const M=(await CO(T)).docs.map(V=>({id:V.id,...V.data()}));e(M)}catch(y){console.error("Error fetching proposals:",y),alert("Failed to fetch proposals")}finally{i(!1)}},d=async y=>{try{const T=Kc(cl,"locationProposals",y);await Ky(T,{status:"approved",reviewedBy:l.uid,reviewedAt:new Date().toISOString()}),alert("Proposal approved successfully!"),h()}catch(T){console.error("Error approving proposal:",T),alert("Failed to approve proposal")}},p=async(y,T)=>{const S=prompt("Please provide a reason for rejection:");if(!S){alert("Rejection reason is required");return}try{const M=Kc(cl,"locationProposals",y);await Ky(M,{status:"rejected",reviewedBy:l.uid,reviewedAt:new Date().toISOString(),rejectionReason:S}),alert("Proposal rejected successfully!"),h()}catch(M){console.error("Error rejecting proposal:",M),alert("Failed to reject proposal")}},v=async y=>{if(window.confirm("Are you sure you want to delete this proposal? This action cannot be undone."))try{await xO(Kc(cl,"locationProposals",y)),alert("Proposal deleted successfully!"),h()}catch(T){console.error("Error deleting proposal:",T),alert("Failed to delete proposal")}};return n?w.jsx("div",{className:"admin-review-loading",children:"Loading proposals..."}):w.jsxs("div",{className:"admin-review-container",children:[w.jsxs("div",{className:"admin-review-header",children:[w.jsx("h1",{children:"Admin Review Panel"}),w.jsx("p",{children:"Review and manage location proposals"})]}),w.jsxs("div",{className:"filter-section",children:[w.jsx("label",{htmlFor:"status-filter",children:"Filter by Status:"}),w.jsxs("select",{id:"status-filter",value:r,onChange:y=>o(y.target.value),className:"status-filter",children:[w.jsx("option",{value:"pending",children:"Pending"}),w.jsx("option",{value:"approved",children:"Approved"}),w.jsx("option",{value:"rejected",children:"Rejected"}),w.jsx("option",{value:"all",children:"All"})]})]}),t.length===0?w.jsx("div",{className:"no-proposals",children:w.jsxs("p",{children:["No ",r!=="all"?r:""," proposals found."]})}):w.jsx("div",{className:"proposals-grid",children:t.map(y=>w.jsxs("div",{className:`proposal-card status-${y.status}`,children:[w.jsxs("div",{className:"proposal-header",children:[w.jsx("h3",{children:y.name}),w.jsx("span",{className:`status-badge ${y.status}`,children:y.status})]}),w.jsxs("div",{className:"proposal-details",children:[w.jsxs("div",{className:"detail-row",children:[w.jsx("strong",{children:"Description:"}),w.jsx("p",{children:y.description})]}),w.jsxs("div",{className:"detail-row",children:[w.jsx("strong",{children:"Category:"}),w.jsx("span",{className:"category-tag",children:y.category})]}),w.jsxs("div",{className:"detail-row",children:[w.jsx("strong",{children:"Location:"}),w.jsxs("p",{children:["Lat: ",y.latitude,", Lng: ",y.longitude]})]}),w.jsxs("div",{className:"detail-row",children:[w.jsx("strong",{children:"Proposed by:"}),w.jsx("p",{children:y.proposedBy||"Anonymous"})]}),w.jsxs("div",{className:"detail-row",children:[w.jsx("strong",{children:"Submitted:"}),w.jsx("p",{children:new Date(y.createdAt).toLocaleString()})]}),y.imageUrl&&w.jsxs("div",{className:"detail-row",children:[w.jsx("strong",{children:"Image:"}),w.jsx("img",{src:y.imageUrl,alt:y.name,className:"proposal-image"})]}),y.status==="rejected"&&y.rejectionReason&&w.jsxs("div",{className:"detail-row rejection-reason",children:[w.jsx("strong",{children:"Rejection Reason:"}),w.jsx("p",{children:y.rejectionReason})]}),y.reviewedBy&&w.jsxs("div",{className:"detail-row",children:[w.jsx("strong",{children:"Reviewed by:"}),w.jsx("p",{children:y.reviewedBy}),w.jsx("p",{className:"review-date",children:new Date(y.reviewedAt).toLocaleString()})]})]}),w.jsxs("div",{className:"proposal-actions",children:[y.status==="pending"&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>d(y.id),className:"btn btn-approve",children:"Approve"}),w.jsx("button",{onClick:()=>p(y.id),className:"btn btn-reject",children:"Reject"})]}),w.jsx("button",{onClick:()=>v(y.id),className:"btn btn-delete",children:"Delete"})]})]},y.id))})]})};class iw extends fs.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){var e;return this.state.hasError?w.jsxs("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#fff3cd",minHeight:"100vh"},children:[w.jsx("h1",{children:" Oops! Something went wrong"}),w.jsx("p",{children:"The app encountered an error. Please try refreshing the page."}),w.jsxs("details",{style:{marginTop:"1rem",textAlign:"left",maxWidth:"600px",margin:"1rem auto"},children:[w.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),w.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"1rem",borderRadius:"4px",overflow:"auto"},children:(e=this.state.error)==null?void 0:e.toString()})]}),w.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",fontSize:"1rem",cursor:"pointer"},children:"Refresh Page"})]}):this.props.children}}function LD(){return w.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."})}function xc({children:t}){const{currentUser:e}=cP();return e?t:w.jsx(lA,{to:"/login",replace:!0})}function bD(){return w.jsx(iw,{children:w.jsxs("div",{className:"app-root",children:[w.jsx(XM,{}),w.jsx("main",{className:"main",children:w.jsx(iw,{children:w.jsx(fs.Suspense,{fallback:w.jsx(LD,{}),children:w.jsxs(cA,{children:[w.jsx(ti,{path:"/",element:w.jsx(TD,{})}),w.jsx(ti,{path:"/contribute",element:w.jsx(ID,{})}),w.jsx(ti,{path:"/about",element:w.jsx(PD,{})}),w.jsx(ti,{path:"/login",element:w.jsx(CD,{})}),w.jsx(ti,{path:"/signup",element:w.jsx(xD,{})}),w.jsx(ti,{path:"/dashboard",element:w.jsx(xc,{children:w.jsx(AD,{})})}),w.jsx(ti,{path:"/propose-location",element:w.jsx(xc,{children:w.jsx(kD,{})})}),w.jsx(ti,{path:"/admin-review",element:w.jsx(xc,{children:w.jsx(RD,{})})}),w.jsx(ti,{path:"/admin",element:w.jsx(xc,{children:w.jsx(SD,{})})})]})})})}),w.jsx("footer",{className:"site-footer",children:"Made with  by Pilani peeps  be chill, be kind.  v0.1 (MVP)"})]})})}const _P=document.getElementById("root");if(!_P){const t=document.createElement("div");t.id="root",document.body.appendChild(t),console.error("Root element was missing - created new one")}window.addEventListener("error",t=>{console.error("Global error caught:",t.error)});window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)});try{vE(_P||document.getElementById("root")).render(w.jsx(fs.StrictMode,{children:w.jsx(_A,{children:w.jsx(QM,{children:w.jsx(bD,{})})})}))}catch(t){console.error("Failed to render app:",t);const e=document.createElement("div");e.style.cssText="padding: 2rem; text-align: center; font-family: system-ui, sans-serif;",e.innerHTML=`
    <h1> Failed to load Pilani-Trails</h1>
    <p>The application encountered an error during startup.</p>
    <p style="color: #666; font-size: 0.9em;">Error: ${t.message}</p>
    <button onclick="window.location.reload()" style="padding: 0.5rem 1rem; font-size: 1rem; cursor: pointer; margin-top: 1rem;">Reload Page</button>
  `,document.body.appendChild(e)}
