function UP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var BP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rw={exports:{}},jh={},sw={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eu=Symbol.for("react.element"),$P=Symbol.for("react.portal"),WP=Symbol.for("react.fragment"),HP=Symbol.for("react.strict_mode"),qP=Symbol.for("react.profiler"),GP=Symbol.for("react.provider"),KP=Symbol.for("react.context"),ZP=Symbol.for("react.forward_ref"),QP=Symbol.for("react.suspense"),YP=Symbol.for("react.memo"),XP=Symbol.for("react.lazy"),p_=Symbol.iterator;function JP(t){return t===null||typeof t!="object"?null:(t=p_&&t[p_]||t["@@iterator"],typeof t=="function"?t:null)}var ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aw=Object.assign,lw={};function Xo(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uw(){}uw.prototype=Xo.prototype;function $p(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}var Wp=$p.prototype=new uw;Wp.constructor=$p;aw(Wp,Xo.prototype);Wp.isPureReactComponent=!0;var m_=Array.isArray,cw=Object.prototype.hasOwnProperty,Hp={current:null},hw={key:!0,ref:!0,__self:!0,__source:!0};function dw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)cw.call(e,i)&&!hw.hasOwnProperty(i)&&(r[i]=e[i]);var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];r.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)r[i]===void 0&&(r[i]=h[i]);return{$$typeof:eu,type:t,key:o,ref:l,props:r,_owner:Hp.current}}function eS(t,e){return{$$typeof:eu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===eu}function tS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var g_=/\/+/g;function Nd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tS(""+t.key):e.toString(36)}function kc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case eu:case $P:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+Nd(l,0):i,m_(r)?(n="",t!=null&&(n=t.replace(g_,"$&/")+"/"),kc(r,e,n,"",function(p){return p})):r!=null&&(qp(r)&&(r=eS(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(g_,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",m_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Nd(o,h);l+=kc(o,e,n,d,r)}else if(d=JP(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Nd(o,h++),l+=kc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function sc(t,e,n){if(t==null)return t;var i=[],r=0;return kc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function nS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Rc={transition:null},iS={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:Hp};function fw(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:sc,forEach:function(t,e,n){sc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sc(t,function(){e++}),e},toArray:function(t){return sc(t,function(e){return e})||[]},only:function(t){if(!qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Xo;Ie.Fragment=WP;Ie.Profiler=qP;Ie.PureComponent=$p;Ie.StrictMode=HP;Ie.Suspense=QP;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iS;Ie.act=fw;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=aw({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Hp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)cw.call(e,d)&&!hw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:eu,type:t.type,key:r,ref:o,props:i,_owner:l}};Ie.createContext=function(t){return t={$$typeof:KP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GP,_context:t},t.Consumer=t};Ie.createElement=dw;Ie.createFactory=function(t){var e=dw.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:ZP,render:t}};Ie.isValidElement=qp;Ie.lazy=function(t){return{$$typeof:XP,_payload:{_status:-1,_result:t},_init:nS}};Ie.memo=function(t,e){return{$$typeof:YP,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Rc.transition;Rc.transition={};try{t()}finally{Rc.transition=e}};Ie.unstable_act=fw;Ie.useCallback=function(t,e){return Wt.current.useCallback(t,e)};Ie.useContext=function(t){return Wt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Wt.current.useEffect(t,e)};Ie.useId=function(){return Wt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Wt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Wt.current.useRef(t)};Ie.useState=function(t){return Wt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Wt.current.useTransition()};Ie.version="18.3.1";sw.exports=Ie;var H=sw.exports;const Pl=iw(H),rS=UP({__proto__:null,default:Pl},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=H,oS=Symbol.for("react.element"),aS=Symbol.for("react.fragment"),lS=Object.prototype.hasOwnProperty,uS=sS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cS={key:!0,ref:!0,__self:!0,__source:!0};function pw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)lS.call(e,i)&&!cS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:oS,type:t,key:o,ref:l,props:r,_owner:uS.current}}jh.Fragment=aS;jh.jsx=pw;jh.jsxs=pw;rw.exports=jh;var P=rw.exports,mw={exports:{}},fn={},gw={exports:{}},_w={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ce){var X=q.length;q.push(ce);e:for(;0<X;){var de=X-1>>>1,ye=q[de];if(0<r(ye,ce))q[de]=ce,q[X]=ye,X=de;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ce=q[0],X=q.pop();if(X!==ce){q[0]=X;e:for(var de=0,ye=q.length,Pe=ye>>>1;de<Pe;){var Ne=2*(de+1)-1,we=q[Ne],me=Ne+1,ft=q[me];if(0>r(we,X))me<ye&&0>r(ft,we)?(q[de]=ft,q[me]=X,de=me):(q[de]=we,q[Ne]=X,de=Ne);else if(me<ye&&0>r(ft,X))q[de]=ft,q[me]=X,de=me;else break e}}return ce}function r(q,ce){var X=q.sortIndex-ce.sortIndex;return X!==0?X:q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],v=1,y=null,E=3,S=!1,D=!1,V=!1,U=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(q){for(var ce=n(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=q)i(p),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(p)}}function W(q){if(V=!1,b(q),!D)if(n(d)!==null)D=!0,dt(Y);else{var ce=n(p);ce!==null&&jt(W,ce.startTime-q)}}function Y(q,ce){D=!1,V&&(V=!1,R(I),I=-1),S=!0;var X=E;try{for(b(ce),y=n(d);y!==null&&(!(y.expirationTime>ce)||q&&!M());){var de=y.callback;if(typeof de=="function"){y.callback=null,E=y.priorityLevel;var ye=de(y.expirationTime<=ce);ce=t.unstable_now(),typeof ye=="function"?y.callback=ye:y===n(d)&&i(d),b(ce)}else i(d);y=n(d)}if(y!==null)var Pe=!0;else{var Ne=n(p);Ne!==null&&jt(W,Ne.startTime-ce),Pe=!1}return Pe}finally{y=null,E=X,S=!1}}var J=!1,x=null,I=-1,A=5,N=-1;function M(){return!(t.unstable_now()-N<A)}function F(){if(x!==null){var q=t.unstable_now();N=q;var ce=!0;try{ce=x(!0,q)}finally{ce?O():(J=!1,x=null)}}else J=!1}var O;if(typeof C=="function")O=function(){C(F)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,ci=Xe.port2;Xe.port1.onmessage=F,O=function(){ci.postMessage(null)}}else O=function(){U(F,0)};function dt(q){x=q,J||(J=!0,O())}function jt(q,ce){I=U(function(){q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){D||S||(D=!0,dt(Y))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(E){case 1:case 2:case 3:var ce=3;break;default:ce=E}var X=E;E=ce;try{return q()}finally{E=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ce){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=E;E=q;try{return ce()}finally{E=X}},t.unstable_scheduleCallback=function(q,ce,X){var de=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?de+X:de):X=de,q){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=X+ye,q={id:v++,callback:ce,priorityLevel:q,startTime:X,expirationTime:ye,sortIndex:-1},X>de?(q.sortIndex=X,e(p,q),n(d)===null&&q===n(p)&&(V?(R(I),I=-1):V=!0,jt(W,X-de))):(q.sortIndex=ye,e(d,q),D||S||(D=!0,dt(Y))),q},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(q){var ce=E;return function(){var X=E;E=ce;try{return q.apply(this,arguments)}finally{E=X}}}})(_w);gw.exports=_w;var hS=gw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dS=H,dn=hS;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vw=new Set,Sl={};function Ss(t,e){Vo(t,e),Vo(t+"Capture",e)}function Vo(t,e){for(Sl[t]=e,t=0;t<e.length;t++)vw.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wf=Object.prototype.hasOwnProperty,fS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,__={},v_={};function pS(t){return wf.call(v_,t)?!0:wf.call(__,t)?!1:fS.test(t)?v_[t]=!0:(__[t]=!0,!1)}function mS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gS(t,e,n,i){if(e===null||typeof e>"u"||mS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gp=/[\-:]([a-z])/g;function Kp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gp,Kp);kt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gp,Kp);kt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gp,Kp);kt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zp(t,e,n,i){var r=kt.hasOwnProperty(e)?kt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gS(e,n,r,i)&&(n=null),i||r===null?pS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ui=dS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oc=Symbol.for("react.element"),mo=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Ef=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),ww=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),If=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),Ew=Symbol.for("react.offscreen"),y_=Symbol.iterator;function Wa(t){return t===null||typeof t!="object"?null:(t=y_&&t[y_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,bd;function Ja(t){if(bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bd=e&&e[1]||""}return`
`+bd+t}var Od=!1;function Md(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,h=o.length-1;1<=l&&0<=h&&r[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(r[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||r[l]!==o[h]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ja(t):""}function _S(t){switch(t.tag){case 5:return Ja(t.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 2:case 15:return t=Md(t.type,!1),t;case 11:return t=Md(t.type.render,!1),t;case 1:return t=Md(t.type,!0),t;default:return""}}function Pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case go:return"Fragment";case mo:return"Portal";case Ef:return"Profiler";case Qp:return"StrictMode";case Tf:return"Suspense";case If:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ww:return(t.displayName||"Context")+".Consumer";case yw:return(t._context.displayName||"Context")+".Provider";case Yp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xp:return e=t.displayName||null,e!==null?e:Pf(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return Pf(t(e))}catch{}}return null}function vS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pf(e);case 8:return e===Qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yS(t){var e=Tw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ac(t){t._valueTracker||(t._valueTracker=yS(t))}function Iw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Tw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Yc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function w_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pw(t,e){e=e.checked,e!=null&&Zp(t,"checked",e,!1)}function Cf(t,e){Pw(t,e);var n=Cr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Af(t,e.type,n):e.hasOwnProperty("defaultValue")&&Af(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function E_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Af(t,e,n){(e!=="number"||Yc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var el=Array.isArray;function Ao(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(el(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function Sw(t,e){var n=Cr(e.value),i=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function I_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lc,Aw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lc=lc||document.createElement("div"),lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wS=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(t){wS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ul[e]=ul[t]})});function xw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ul.hasOwnProperty(t)&&ul[t]?(""+e).trim():e+"px"}function kw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=xw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var ES=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rf(t,e){if(e){if(ES[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=null;function Jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bf=null,xo=null,ko=null;function P_(t){if(t=iu(t)){if(typeof bf!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Wh(e),bf(t.stateNode,t.type,e))}}function Rw(t){xo?ko?ko.push(t):ko=[t]:xo=t}function Lw(){if(xo){var t=xo,e=ko;if(ko=xo=null,P_(t),e)for(t=0;t<e.length;t++)P_(e[t])}}function Nw(t,e){return t(e)}function bw(){}var Dd=!1;function Ow(t,e,n){if(Dd)return t(e,n);Dd=!0;try{return Nw(t,e,n)}finally{Dd=!1,(xo!==null||ko!==null)&&(bw(),Lw())}}function Al(t,e){var n=t.stateNode;if(n===null)return null;var i=Wh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Of=!1;if(bi)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){Of=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{Of=!1}function TS(t,e,n,i,r,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var cl=!1,Xc=null,Jc=!1,Mf=null,IS={onError:function(t){cl=!0,Xc=t}};function PS(t,e,n,i,r,o,l,h,d){cl=!1,Xc=null,TS.apply(IS,arguments)}function SS(t,e,n,i,r,o,l,h,d){if(PS.apply(this,arguments),cl){if(cl){var p=Xc;cl=!1,Xc=null}else throw Error(Q(198));Jc||(Jc=!0,Mf=p)}}function Cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S_(t){if(Cs(t)!==t)throw Error(Q(188))}function CS(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return S_(r),t;if(o===i)return S_(r),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,h=r.child;h;){if(h===n){l=!0,n=r,i=o;break}if(h===i){l=!0,i=r,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=r;break}if(h===i){l=!0,i=o,n=r;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Dw(t){return t=CS(t),t!==null?Vw(t):null}function Vw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vw(t);if(e!==null)return e;t=t.sibling}return null}var Fw=dn.unstable_scheduleCallback,C_=dn.unstable_cancelCallback,AS=dn.unstable_shouldYield,xS=dn.unstable_requestPaint,it=dn.unstable_now,kS=dn.unstable_getCurrentPriorityLevel,em=dn.unstable_ImmediatePriority,jw=dn.unstable_UserBlockingPriority,eh=dn.unstable_NormalPriority,RS=dn.unstable_LowPriority,zw=dn.unstable_IdlePriority,zh=null,ii=null;function LS(t){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:OS,NS=Math.log,bS=Math.LN2;function OS(t){return t>>>=0,t===0?32:31-(NS(t)/bS|0)|0}var uc=64,cc=4194304;function tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function th(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~r;h!==0?i=tl(h):(o&=l,o!==0&&(i=tl(o)))}else l=n&~r,l!==0?i=tl(l):o!==0&&(i=tl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Un(e),r=1<<n,i|=t[n],e&=~r;return i}function MS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Un(o),h=1<<l,d=r[l];d===-1?(!(h&n)||h&i)&&(r[l]=MS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Df(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uw(){var t=uc;return uc<<=1,!(uc&4194240)&&(uc=64),t}function Vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function VS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Un(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function tm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Un(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Oe=0;function Bw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $w,nm,Ww,Hw,qw,Vf=!1,hc=[],fr=null,pr=null,mr=null,xl=new Map,kl=new Map,rr=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A_(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(e.pointerId)}}function qa(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=iu(e),e!==null&&nm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function jS(t,e,n,i,r){switch(e){case"focusin":return fr=qa(fr,t,e,n,i,r),!0;case"dragenter":return pr=qa(pr,t,e,n,i,r),!0;case"mouseover":return mr=qa(mr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return xl.set(o,qa(xl.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,kl.set(o,qa(kl.get(o)||null,t,e,n,i,r)),!0}return!1}function Gw(t){var e=is(t.target);if(e!==null){var n=Cs(e);if(n!==null){if(e=n.tag,e===13){if(e=Mw(n),e!==null){t.blockedOn=e,qw(t.priority,function(){Ww(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ff(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Nf=i,n.target.dispatchEvent(i),Nf=null}else return e=iu(n),e!==null&&nm(e),t.blockedOn=n,!1;e.shift()}return!0}function x_(t,e,n){Lc(t)&&n.delete(e)}function zS(){Vf=!1,fr!==null&&Lc(fr)&&(fr=null),pr!==null&&Lc(pr)&&(pr=null),mr!==null&&Lc(mr)&&(mr=null),xl.forEach(x_),kl.forEach(x_)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,Vf||(Vf=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,zS)))}function Rl(t){function e(r){return Ga(r,t)}if(0<hc.length){Ga(hc[0],t);for(var n=1;n<hc.length;n++){var i=hc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(fr!==null&&Ga(fr,t),pr!==null&&Ga(pr,t),mr!==null&&Ga(mr,t),xl.forEach(e),kl.forEach(e),n=0;n<rr.length;n++)i=rr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)Gw(n),n.blockedOn===null&&rr.shift()}var Ro=Ui.ReactCurrentBatchConfig,nh=!0;function US(t,e,n,i){var r=Oe,o=Ro.transition;Ro.transition=null;try{Oe=1,im(t,e,n,i)}finally{Oe=r,Ro.transition=o}}function BS(t,e,n,i){var r=Oe,o=Ro.transition;Ro.transition=null;try{Oe=4,im(t,e,n,i)}finally{Oe=r,Ro.transition=o}}function im(t,e,n,i){if(nh){var r=Ff(t,e,n,i);if(r===null)Gd(t,e,i,ih,n),A_(t,i);else if(jS(r,t,e,n,i))i.stopPropagation();else if(A_(t,i),e&4&&-1<FS.indexOf(t)){for(;r!==null;){var o=iu(r);if(o!==null&&$w(o),o=Ff(t,e,n,i),o===null&&Gd(t,e,i,ih,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Gd(t,e,i,null,n)}}var ih=null;function Ff(t,e,n,i){if(ih=null,t=Jp(i),t=is(t),t!==null)if(e=Cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ih=t,null}function Kw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kS()){case em:return 1;case jw:return 4;case eh:case RS:return 16;case zw:return 536870912;default:return 16}default:return 16}}var ur=null,rm=null,Nc=null;function Zw(){if(Nc)return Nc;var t,e=rm,n=e.length,i,r="value"in ur?ur.value:ur.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return Nc=r.slice(t,1<i?1-i:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dc(){return!0}function k_(){return!1}function pn(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dc:k_,this.isPropagationStopped=k_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dc)},persist:function(){},isPersistent:dc}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sm=pn(Jo),nu=Qe({},Jo,{view:0,detail:0}),$S=pn(nu),Fd,jd,Ka,Uh=Qe({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:om,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ka&&(Ka&&t.type==="mousemove"?(Fd=t.screenX-Ka.screenX,jd=t.screenY-Ka.screenY):jd=Fd=0,Ka=t),Fd)},movementY:function(t){return"movementY"in t?t.movementY:jd}}),R_=pn(Uh),WS=Qe({},Uh,{dataTransfer:0}),HS=pn(WS),qS=Qe({},nu,{relatedTarget:0}),zd=pn(qS),GS=Qe({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),KS=pn(GS),ZS=Qe({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QS=pn(ZS),YS=Qe({},Jo,{data:0}),L_=pn(YS),XS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eC[t])?!!e[t]:!1}function om(){return tC}var nC=Qe({},nu,{key:function(t){if(t.key){var e=XS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:om,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iC=pn(nC),rC=Qe({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N_=pn(rC),sC=Qe({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:om}),oC=pn(sC),aC=Qe({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),lC=pn(aC),uC=Qe({},Uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cC=pn(uC),hC=[9,13,27,32],am=bi&&"CompositionEvent"in window,hl=null;bi&&"documentMode"in document&&(hl=document.documentMode);var dC=bi&&"TextEvent"in window&&!hl,Qw=bi&&(!am||hl&&8<hl&&11>=hl),b_=" ",O_=!1;function Yw(t,e){switch(t){case"keyup":return hC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function fC(t,e){switch(t){case"compositionend":return Xw(e);case"keypress":return e.which!==32?null:(O_=!0,b_);case"textInput":return t=e.data,t===b_&&O_?null:t;default:return null}}function pC(t,e){if(_o)return t==="compositionend"||!am&&Yw(t,e)?(t=Zw(),Nc=rm=ur=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qw&&e.locale!=="ko"?null:e.data;default:return null}}var mC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mC[t.type]:e==="textarea"}function Jw(t,e,n,i){Rw(i),e=rh(e,"onChange"),0<e.length&&(n=new sm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var dl=null,Ll=null;function gC(t){c0(t,0)}function Bh(t){var e=wo(t);if(Iw(e))return t}function _C(t,e){if(t==="change")return e}var e0=!1;if(bi){var Ud;if(bi){var Bd="oninput"in document;if(!Bd){var D_=document.createElement("div");D_.setAttribute("oninput","return;"),Bd=typeof D_.oninput=="function"}Ud=Bd}else Ud=!1;e0=Ud&&(!document.documentMode||9<document.documentMode)}function V_(){dl&&(dl.detachEvent("onpropertychange",t0),Ll=dl=null)}function t0(t){if(t.propertyName==="value"&&Bh(Ll)){var e=[];Jw(e,Ll,t,Jp(t)),Ow(gC,e)}}function vC(t,e,n){t==="focusin"?(V_(),dl=e,Ll=n,dl.attachEvent("onpropertychange",t0)):t==="focusout"&&V_()}function yC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bh(Ll)}function wC(t,e){if(t==="click")return Bh(e)}function EC(t,e){if(t==="input"||t==="change")return Bh(e)}function TC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:TC;function Nl(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!wf.call(e,r)||!Hn(t[r],e[r]))return!1}return!0}function F_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j_(t,e){var n=F_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=F_(n)}}function n0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i0(){for(var t=window,e=Yc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yc(t.document)}return e}function lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IC(t){var e=i0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n0(n.ownerDocument.documentElement,n)){if(i!==null&&lm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=j_(n,o);var l=j_(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PC=bi&&"documentMode"in document&&11>=document.documentMode,vo=null,jf=null,fl=null,zf=!1;function z_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zf||vo==null||vo!==Yc(i)||(i=vo,"selectionStart"in i&&lm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fl&&Nl(fl,i)||(fl=i,i=rh(jf,"onSelect"),0<i.length&&(e=new sm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=vo)))}function fc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yo={animationend:fc("Animation","AnimationEnd"),animationiteration:fc("Animation","AnimationIteration"),animationstart:fc("Animation","AnimationStart"),transitionend:fc("Transition","TransitionEnd")},$d={},r0={};bi&&(r0=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function $h(t){if($d[t])return $d[t];if(!yo[t])return t;var e=yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r0)return $d[t]=e[n];return t}var s0=$h("animationend"),o0=$h("animationiteration"),a0=$h("animationstart"),l0=$h("transitionend"),u0=new Map,U_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){u0.set(t,e),Ss(e,[t])}for(var Wd=0;Wd<U_.length;Wd++){var Hd=U_[Wd],SC=Hd.toLowerCase(),CC=Hd[0].toUpperCase()+Hd.slice(1);Lr(SC,"on"+CC)}Lr(s0,"onAnimationEnd");Lr(o0,"onAnimationIteration");Lr(a0,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(l0,"onTransitionEnd");Vo("onMouseEnter",["mouseout","mouseover"]);Vo("onMouseLeave",["mouseout","mouseover"]);Vo("onPointerEnter",["pointerout","pointerover"]);Vo("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function B_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,SS(i,e,void 0,t),t.currentTarget=null}function c0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&r.isPropagationStopped())break e;B_(r,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&r.isPropagationStopped())break e;B_(r,h,p),o=d}}}if(Jc)throw t=Mf,Jc=!1,Mf=null,t}function ze(t,e){var n=e[Hf];n===void 0&&(n=e[Hf]=new Set);var i=t+"__bubble";n.has(i)||(h0(e,t,2,!1),n.add(i))}function qd(t,e,n){var i=0;e&&(i|=4),h0(n,t,i,e)}var pc="_reactListening"+Math.random().toString(36).slice(2);function bl(t){if(!t[pc]){t[pc]=!0,vw.forEach(function(n){n!=="selectionchange"&&(AC.has(n)||qd(n,!1,t),qd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pc]||(e[pc]=!0,qd("selectionchange",!1,e))}}function h0(t,e,n,i){switch(Kw(e)){case 1:var r=US;break;case 4:r=BS;break;default:r=im}n=r.bind(null,e,n,t),r=void 0,!Of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Gd(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===r||h.nodeType===8&&h.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;h!==null;){if(l=is(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Ow(function(){var p=o,v=Jp(n),y=[];e:{var E=u0.get(t);if(E!==void 0){var S=sm,D=t;switch(t){case"keypress":if(bc(n)===0)break e;case"keydown":case"keyup":S=iC;break;case"focusin":D="focus",S=zd;break;case"focusout":D="blur",S=zd;break;case"beforeblur":case"afterblur":S=zd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=R_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=HS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=oC;break;case s0:case o0:case a0:S=KS;break;case l0:S=lC;break;case"scroll":S=$S;break;case"wheel":S=cC;break;case"copy":case"cut":case"paste":S=QS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=N_}var V=(e&4)!==0,U=!V&&t==="scroll",R=V?E!==null?E+"Capture":null:E;V=[];for(var C=p,b;C!==null;){b=C;var W=b.stateNode;if(b.tag===5&&W!==null&&(b=W,R!==null&&(W=Al(C,R),W!=null&&V.push(Ol(C,W,b)))),U)break;C=C.return}0<V.length&&(E=new S(E,D,null,n,v),y.push({event:E,listeners:V}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",E&&n!==Nf&&(D=n.relatedTarget||n.fromElement)&&(is(D)||D[Oi]))break e;if((S||E)&&(E=v.window===v?v:(E=v.ownerDocument)?E.defaultView||E.parentWindow:window,S?(D=n.relatedTarget||n.toElement,S=p,D=D?is(D):null,D!==null&&(U=Cs(D),D!==U||D.tag!==5&&D.tag!==6)&&(D=null)):(S=null,D=p),S!==D)){if(V=R_,W="onMouseLeave",R="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(V=N_,W="onPointerLeave",R="onPointerEnter",C="pointer"),U=S==null?E:wo(S),b=D==null?E:wo(D),E=new V(W,C+"leave",S,n,v),E.target=U,E.relatedTarget=b,W=null,is(v)===p&&(V=new V(R,C+"enter",D,n,v),V.target=b,V.relatedTarget=U,W=V),U=W,S&&D)t:{for(V=S,R=D,C=0,b=V;b;b=uo(b))C++;for(b=0,W=R;W;W=uo(W))b++;for(;0<C-b;)V=uo(V),C--;for(;0<b-C;)R=uo(R),b--;for(;C--;){if(V===R||R!==null&&V===R.alternate)break t;V=uo(V),R=uo(R)}V=null}else V=null;S!==null&&$_(y,E,S,V,!1),D!==null&&U!==null&&$_(y,U,D,V,!0)}}e:{if(E=p?wo(p):window,S=E.nodeName&&E.nodeName.toLowerCase(),S==="select"||S==="input"&&E.type==="file")var Y=_C;else if(M_(E))if(e0)Y=EC;else{Y=yC;var J=vC}else(S=E.nodeName)&&S.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(Y=wC);if(Y&&(Y=Y(t,p))){Jw(y,Y,n,v);break e}J&&J(t,E,p),t==="focusout"&&(J=E._wrapperState)&&J.controlled&&E.type==="number"&&Af(E,"number",E.value)}switch(J=p?wo(p):window,t){case"focusin":(M_(J)||J.contentEditable==="true")&&(vo=J,jf=p,fl=null);break;case"focusout":fl=jf=vo=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,z_(y,n,v);break;case"selectionchange":if(PC)break;case"keydown":case"keyup":z_(y,n,v)}var x;if(am)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else _o?Yw(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Qw&&n.locale!=="ko"&&(_o||I!=="onCompositionStart"?I==="onCompositionEnd"&&_o&&(x=Zw()):(ur=v,rm="value"in ur?ur.value:ur.textContent,_o=!0)),J=rh(p,I),0<J.length&&(I=new L_(I,t,null,n,v),y.push({event:I,listeners:J}),x?I.data=x:(x=Xw(n),x!==null&&(I.data=x)))),(x=dC?fC(t,n):pC(t,n))&&(p=rh(p,"onBeforeInput"),0<p.length&&(v=new L_("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=x))}c0(y,e)})}function Ol(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Al(t,n),o!=null&&i.unshift(Ol(t,o,r)),o=Al(t,e),o!=null&&i.push(Ol(t,o,r))),t=t.return}return i}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $_(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,r?(d=Al(n,o),d!=null&&l.unshift(Ol(n,d,h))):r||(d=Al(n,o),d!=null&&l.push(Ol(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var xC=/\r\n?/g,kC=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(xC,`
`).replace(kC,"")}function mc(t,e,n){if(e=W_(e),W_(t)!==e&&n)throw Error(Q(425))}function sh(){}var Uf=null,Bf=null;function $f(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wf=typeof setTimeout=="function"?setTimeout:void 0,RC=typeof clearTimeout=="function"?clearTimeout:void 0,H_=typeof Promise=="function"?Promise:void 0,LC=typeof queueMicrotask=="function"?queueMicrotask:typeof H_<"u"?function(t){return H_.resolve(null).then(t).catch(NC)}:Wf;function NC(t){setTimeout(function(){throw t})}function Kd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Rl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Rl(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function q_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ea=Math.random().toString(36).slice(2),ni="__reactFiber$"+ea,Ml="__reactProps$"+ea,Oi="__reactContainer$"+ea,Hf="__reactEvents$"+ea,bC="__reactListeners$"+ea,OC="__reactHandles$"+ea;function is(t){var e=t[ni];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Oi]||n[ni]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=q_(t);t!==null;){if(n=t[ni])return n;t=q_(t)}return e}t=n,n=t.parentNode}return null}function iu(t){return t=t[ni]||t[Oi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Wh(t){return t[Ml]||null}var qf=[],Eo=-1;function Nr(t){return{current:t}}function Be(t){0>Eo||(t.current=qf[Eo],qf[Eo]=null,Eo--)}function je(t,e){Eo++,qf[Eo]=t.current,t.current=e}var Ar={},Vt=Nr(Ar),Xt=Nr(!1),ds=Ar;function Fo(t,e){var n=t.type.contextTypes;if(!n)return Ar;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Jt(t){return t=t.childContextTypes,t!=null}function oh(){Be(Xt),Be(Vt)}function G_(t,e,n){if(Vt.current!==Ar)throw Error(Q(168));je(Vt,e),je(Xt,n)}function d0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Q(108,vS(t)||"Unknown",r));return Qe({},n,i)}function ah(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,ds=Vt.current,je(Vt,t),je(Xt,Xt.current),!0}function K_(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=d0(t,e,ds),i.__reactInternalMemoizedMergedChildContext=t,Be(Xt),Be(Vt),je(Vt,t)):Be(Xt),je(Xt,n)}var Pi=null,Hh=!1,Zd=!1;function f0(t){Pi===null?Pi=[t]:Pi.push(t)}function MC(t){Hh=!0,f0(t)}function br(){if(!Zd&&Pi!==null){Zd=!0;var t=0,e=Oe;try{var n=Pi;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Pi=null,Hh=!1}catch(r){throw Pi!==null&&(Pi=Pi.slice(t+1)),Fw(em,br),r}finally{Oe=e,Zd=!1}}return null}var To=[],Io=0,lh=null,uh=0,In=[],Pn=0,fs=null,Ci=1,Ai="";function Jr(t,e){To[Io++]=uh,To[Io++]=lh,lh=t,uh=e}function p0(t,e,n){In[Pn++]=Ci,In[Pn++]=Ai,In[Pn++]=fs,fs=t;var i=Ci;t=Ai;var r=32-Un(i)-1;i&=~(1<<r),n+=1;var o=32-Un(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,Ci=1<<32-Un(e)+r|n<<r|i,Ai=o+t}else Ci=1<<o|n<<r|i,Ai=t}function um(t){t.return!==null&&(Jr(t,1),p0(t,1,0))}function cm(t){for(;t===lh;)lh=To[--Io],To[Io]=null,uh=To[--Io],To[Io]=null;for(;t===fs;)fs=In[--Pn],In[Pn]=null,Ai=In[--Pn],In[Pn]=null,Ci=In[--Pn],In[Pn]=null}var un=null,an=null,He=!1,jn=null;function m0(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Z_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fs!==null?{id:Ci,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function Gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kf(t){if(He){var e=an;if(e){var n=e;if(!Z_(t,e)){if(Gf(t))throw Error(Q(418));e=gr(n.nextSibling);var i=un;e&&Z_(t,e)?m0(i,n):(t.flags=t.flags&-4097|2,He=!1,un=t)}}else{if(Gf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,He=!1,un=t}}}function Q_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function gc(t){if(t!==un)return!1;if(!He)return Q_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$f(t.type,t.memoizedProps)),e&&(e=an)){if(Gf(t))throw g0(),Error(Q(418));for(;e;)m0(t,e),e=gr(e.nextSibling)}if(Q_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?gr(t.stateNode.nextSibling):null;return!0}function g0(){for(var t=an;t;)t=gr(t.nextSibling)}function jo(){an=un=null,He=!1}function hm(t){jn===null?jn=[t]:jn.push(t)}var DC=Ui.ReactCurrentBatchConfig;function Za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=r.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function _c(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y_(t){var e=t._init;return e(t._payload)}function _0(t){function e(R,C){if(t){var b=R.deletions;b===null?(R.deletions=[C],R.flags|=16):b.push(C)}}function n(R,C){if(!t)return null;for(;C!==null;)e(R,C),C=C.sibling;return null}function i(R,C){for(R=new Map;C!==null;)C.key!==null?R.set(C.key,C):R.set(C.index,C),C=C.sibling;return R}function r(R,C){return R=wr(R,C),R.index=0,R.sibling=null,R}function o(R,C,b){return R.index=b,t?(b=R.alternate,b!==null?(b=b.index,b<C?(R.flags|=2,C):b):(R.flags|=2,C)):(R.flags|=1048576,C)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function h(R,C,b,W){return C===null||C.tag!==6?(C=nf(b,R.mode,W),C.return=R,C):(C=r(C,b),C.return=R,C)}function d(R,C,b,W){var Y=b.type;return Y===go?v(R,C,b.props.children,W,b.key):C!==null&&(C.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===nr&&Y_(Y)===C.type)?(W=r(C,b.props),W.ref=Za(R,C,b),W.return=R,W):(W=zc(b.type,b.key,b.props,null,R.mode,W),W.ref=Za(R,C,b),W.return=R,W)}function p(R,C,b,W){return C===null||C.tag!==4||C.stateNode.containerInfo!==b.containerInfo||C.stateNode.implementation!==b.implementation?(C=rf(b,R.mode,W),C.return=R,C):(C=r(C,b.children||[]),C.return=R,C)}function v(R,C,b,W,Y){return C===null||C.tag!==7?(C=cs(b,R.mode,W,Y),C.return=R,C):(C=r(C,b),C.return=R,C)}function y(R,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return C=nf(""+C,R.mode,b),C.return=R,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case oc:return b=zc(C.type,C.key,C.props,null,R.mode,b),b.ref=Za(R,null,C),b.return=R,b;case mo:return C=rf(C,R.mode,b),C.return=R,C;case nr:var W=C._init;return y(R,W(C._payload),b)}if(el(C)||Wa(C))return C=cs(C,R.mode,b,null),C.return=R,C;_c(R,C)}return null}function E(R,C,b,W){var Y=C!==null?C.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return Y!==null?null:h(R,C,""+b,W);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case oc:return b.key===Y?d(R,C,b,W):null;case mo:return b.key===Y?p(R,C,b,W):null;case nr:return Y=b._init,E(R,C,Y(b._payload),W)}if(el(b)||Wa(b))return Y!==null?null:v(R,C,b,W,null);_c(R,b)}return null}function S(R,C,b,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return R=R.get(b)||null,h(C,R,""+W,Y);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case oc:return R=R.get(W.key===null?b:W.key)||null,d(C,R,W,Y);case mo:return R=R.get(W.key===null?b:W.key)||null,p(C,R,W,Y);case nr:var J=W._init;return S(R,C,b,J(W._payload),Y)}if(el(W)||Wa(W))return R=R.get(b)||null,v(C,R,W,Y,null);_c(C,W)}return null}function D(R,C,b,W){for(var Y=null,J=null,x=C,I=C=0,A=null;x!==null&&I<b.length;I++){x.index>I?(A=x,x=null):A=x.sibling;var N=E(R,x,b[I],W);if(N===null){x===null&&(x=A);break}t&&x&&N.alternate===null&&e(R,x),C=o(N,C,I),J===null?Y=N:J.sibling=N,J=N,x=A}if(I===b.length)return n(R,x),He&&Jr(R,I),Y;if(x===null){for(;I<b.length;I++)x=y(R,b[I],W),x!==null&&(C=o(x,C,I),J===null?Y=x:J.sibling=x,J=x);return He&&Jr(R,I),Y}for(x=i(R,x);I<b.length;I++)A=S(x,R,I,b[I],W),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?I:A.key),C=o(A,C,I),J===null?Y=A:J.sibling=A,J=A);return t&&x.forEach(function(M){return e(R,M)}),He&&Jr(R,I),Y}function V(R,C,b,W){var Y=Wa(b);if(typeof Y!="function")throw Error(Q(150));if(b=Y.call(b),b==null)throw Error(Q(151));for(var J=Y=null,x=C,I=C=0,A=null,N=b.next();x!==null&&!N.done;I++,N=b.next()){x.index>I?(A=x,x=null):A=x.sibling;var M=E(R,x,N.value,W);if(M===null){x===null&&(x=A);break}t&&x&&M.alternate===null&&e(R,x),C=o(M,C,I),J===null?Y=M:J.sibling=M,J=M,x=A}if(N.done)return n(R,x),He&&Jr(R,I),Y;if(x===null){for(;!N.done;I++,N=b.next())N=y(R,N.value,W),N!==null&&(C=o(N,C,I),J===null?Y=N:J.sibling=N,J=N);return He&&Jr(R,I),Y}for(x=i(R,x);!N.done;I++,N=b.next())N=S(x,R,I,N.value,W),N!==null&&(t&&N.alternate!==null&&x.delete(N.key===null?I:N.key),C=o(N,C,I),J===null?Y=N:J.sibling=N,J=N);return t&&x.forEach(function(F){return e(R,F)}),He&&Jr(R,I),Y}function U(R,C,b,W){if(typeof b=="object"&&b!==null&&b.type===go&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case oc:e:{for(var Y=b.key,J=C;J!==null;){if(J.key===Y){if(Y=b.type,Y===go){if(J.tag===7){n(R,J.sibling),C=r(J,b.props.children),C.return=R,R=C;break e}}else if(J.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===nr&&Y_(Y)===J.type){n(R,J.sibling),C=r(J,b.props),C.ref=Za(R,J,b),C.return=R,R=C;break e}n(R,J);break}else e(R,J);J=J.sibling}b.type===go?(C=cs(b.props.children,R.mode,W,b.key),C.return=R,R=C):(W=zc(b.type,b.key,b.props,null,R.mode,W),W.ref=Za(R,C,b),W.return=R,R=W)}return l(R);case mo:e:{for(J=b.key;C!==null;){if(C.key===J)if(C.tag===4&&C.stateNode.containerInfo===b.containerInfo&&C.stateNode.implementation===b.implementation){n(R,C.sibling),C=r(C,b.children||[]),C.return=R,R=C;break e}else{n(R,C);break}else e(R,C);C=C.sibling}C=rf(b,R.mode,W),C.return=R,R=C}return l(R);case nr:return J=b._init,U(R,C,J(b._payload),W)}if(el(b))return D(R,C,b,W);if(Wa(b))return V(R,C,b,W);_c(R,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,C!==null&&C.tag===6?(n(R,C.sibling),C=r(C,b),C.return=R,R=C):(n(R,C),C=nf(b,R.mode,W),C.return=R,R=C),l(R)):n(R,C)}return U}var zo=_0(!0),v0=_0(!1),ch=Nr(null),hh=null,Po=null,dm=null;function fm(){dm=Po=hh=null}function pm(t){var e=ch.current;Be(ch),t._currentValue=e}function Zf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Lo(t,e){hh=t,dm=Po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(dm!==t)if(t={context:t,memoizedValue:e,next:null},Po===null){if(hh===null)throw Error(Q(308));Po=t,hh.dependencies={lanes:0,firstContext:t}}else Po=Po.next=t;return e}var rs=null;function mm(t){rs===null?rs=[t]:rs.push(t)}function y0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,mm(e)):(n.next=r.next,r.next=n),e.interleaved=n,Mi(t,i)}function Mi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function gm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Mi(t,n)}return r=i.interleaved,r===null?(e.next=e,mm(i)):(e.next=r.next,r.next=e),i.interleaved=e,Mi(t,n)}function Oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tm(t,n)}}function X_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dh(t,e,n,i){var r=t.updateQueue;ir=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,h=r.shared.pending;if(h!==null){r.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;l=0,v=p=d=null,h=o;do{var E=h.lane,S=h.eventTime;if((i&E)===E){v!==null&&(v=v.next={eventTime:S,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var D=t,V=h;switch(E=e,S=n,V.tag){case 1:if(D=V.payload,typeof D=="function"){y=D.call(S,y,E);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,E=typeof D=="function"?D.call(S,y,E):D,E==null)break e;y=Qe({},y,E);break e;case 2:ir=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=r.effects,E===null?r.effects=[h]:E.push(h))}else S={eventTime:S,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(p=v=S,d=y):v=v.next=S,l|=E;if(h=h.next,h===null){if(h=r.shared.pending,h===null)break;E=h,h=E.next,E.next=null,r.lastBaseUpdate=E,r.shared.pending=null}}while(!0);if(v===null&&(d=y),r.baseState=d,r.firstBaseUpdate=p,r.lastBaseUpdate=v,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);ms|=l,t.lanes=l,t.memoizedState=y}}function J_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Q(191,r));r.call(i)}}}var ru={},ri=Nr(ru),Dl=Nr(ru),Vl=Nr(ru);function ss(t){if(t===ru)throw Error(Q(174));return t}function _m(t,e){switch(je(Vl,e),je(Dl,t),je(ri,ru),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kf(e,t)}Be(ri),je(ri,e)}function Uo(){Be(ri),Be(Dl),Be(Vl)}function E0(t){ss(Vl.current);var e=ss(ri.current),n=kf(e,t.type);e!==n&&(je(Dl,t),je(ri,n))}function vm(t){Dl.current===t&&(Be(ri),Be(Dl))}var Ke=Nr(0);function fh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function ym(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var Mc=Ui.ReactCurrentDispatcher,Yd=Ui.ReactCurrentBatchConfig,ps=0,Ze=null,pt=null,Et=null,ph=!1,pl=!1,Fl=0,VC=0;function Lt(){throw Error(Q(321))}function wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Em(t,e,n,i,r,o){if(ps=o,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mc.current=t===null||t.memoizedState===null?UC:BC,t=n(i,r),pl){o=0;do{if(pl=!1,Fl=0,25<=o)throw Error(Q(301));o+=1,Et=pt=null,e.updateQueue=null,Mc.current=$C,t=n(i,r)}while(pl)}if(Mc.current=mh,e=pt!==null&&pt.next!==null,ps=0,Et=pt=Ze=null,ph=!1,e)throw Error(Q(300));return t}function Tm(){var t=Fl!==0;return Fl=0,t}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ze.memoizedState=Et=t:Et=Et.next=t,Et}function kn(){if(pt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Et===null?Ze.memoizedState:Et.next;if(e!==null)Et=e,pt=t;else{if(t===null)throw Error(Q(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Et===null?Ze.memoizedState=Et=t:Et=Et.next=t}return Et}function jl(t,e){return typeof e=="function"?e(t):e}function Xd(t){var e=kn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=pt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var h=l=null,d=null,p=o;do{var v=p.lane;if((ps&v)===v)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=y,l=i):d=d.next=y,Ze.lanes|=v,ms|=v}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Hn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Ze.lanes|=o,ms|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jd(t){var e=kn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);Hn(o,e.memoizedState)||(Yt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function T0(){}function I0(t,e){var n=Ze,i=kn(),r=e(),o=!Hn(i.memoizedState,r);if(o&&(i.memoizedState=r,Yt=!0),i=i.queue,Im(C0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,zl(9,S0.bind(null,n,i,r,e),void 0,null),Tt===null)throw Error(Q(349));ps&30||P0(n,e,r)}return r}function P0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function S0(t,e,n,i){e.value=n,e.getSnapshot=i,A0(e)&&x0(t)}function C0(t,e,n){return n(function(){A0(e)&&x0(t)})}function A0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function x0(t){var e=Mi(t,1);e!==null&&Bn(e,t,1,-1)}function ev(t){var e=ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e.queue=t,t=t.dispatch=zC.bind(null,Ze,t),[e.memoizedState,t]}function zl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function k0(){return kn().memoizedState}function Dc(t,e,n,i){var r=ti();Ze.flags|=t,r.memoizedState=zl(1|e,n,void 0,i===void 0?null:i)}function qh(t,e,n,i){var r=kn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,i!==null&&wm(i,l.deps)){r.memoizedState=zl(e,n,o,i);return}}Ze.flags|=t,r.memoizedState=zl(1|e,n,o,i)}function tv(t,e){return Dc(8390656,8,t,e)}function Im(t,e){return qh(2048,8,t,e)}function R0(t,e){return qh(4,2,t,e)}function L0(t,e){return qh(4,4,t,e)}function N0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b0(t,e,n){return n=n!=null?n.concat([t]):null,qh(4,4,N0.bind(null,e,t),n)}function Pm(){}function O0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function M0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function D0(t,e,n){return ps&21?(Hn(n,e)||(n=Uw(),Ze.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function FC(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=Yd.transition;Yd.transition={};try{t(!1),e()}finally{Oe=n,Yd.transition=i}}function V0(){return kn().memoizedState}function jC(t,e,n){var i=yr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},F0(t))j0(e,n);else if(n=y0(t,e,n,i),n!==null){var r=$t();Bn(n,t,i,r),z0(n,e,i)}}function zC(t,e,n){var i=yr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(F0(t))j0(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(r.hasEagerState=!0,r.eagerState=h,Hn(h,l)){var d=e.interleaved;d===null?(r.next=r,mm(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=y0(t,e,r,i),n!==null&&(r=$t(),Bn(n,t,i,r),z0(n,e,i))}}function F0(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function j0(t,e){pl=ph=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tm(t,n)}}var mh={readContext:xn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},UC={readContext:xn,useCallback:function(t,e){return ti().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:tv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dc(4194308,4,N0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dc(4,2,t,e)},useMemo:function(t,e){var n=ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ti();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=jC.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=ti();return t={current:t},e.memoizedState=t},useState:ev,useDebugValue:Pm,useDeferredValue:function(t){return ti().memoizedState=t},useTransition:function(){var t=ev(!1),e=t[0];return t=FC.bind(null,t[1]),ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,r=ti();if(He){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Tt===null)throw Error(Q(349));ps&30||P0(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,tv(C0.bind(null,i,o,t),[t]),i.flags|=2048,zl(9,S0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ti(),e=Tt.identifierPrefix;if(He){var n=Ai,i=Ci;n=(i&~(1<<32-Un(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BC={readContext:xn,useCallback:O0,useContext:xn,useEffect:Im,useImperativeHandle:b0,useInsertionEffect:R0,useLayoutEffect:L0,useMemo:M0,useReducer:Xd,useRef:k0,useState:function(){return Xd(jl)},useDebugValue:Pm,useDeferredValue:function(t){var e=kn();return D0(e,pt.memoizedState,t)},useTransition:function(){var t=Xd(jl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:I0,useId:V0,unstable_isNewReconciler:!1},$C={readContext:xn,useCallback:O0,useContext:xn,useEffect:Im,useImperativeHandle:b0,useInsertionEffect:R0,useLayoutEffect:L0,useMemo:M0,useReducer:Jd,useRef:k0,useState:function(){return Jd(jl)},useDebugValue:Pm,useDeferredValue:function(t){var e=kn();return pt===null?e.memoizedState=t:D0(e,pt.memoizedState,t)},useTransition:function(){var t=Jd(jl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:I0,useId:V0,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gh={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=$t(),r=yr(t),o=Li(i,r);o.payload=e,n!=null&&(o.callback=n),e=_r(t,o,r),e!==null&&(Bn(e,t,r,i),Oc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=$t(),r=yr(t),o=Li(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=_r(t,o,r),e!==null&&(Bn(e,t,r,i),Oc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),i=yr(t),r=Li(n,i);r.tag=2,e!=null&&(r.callback=e),e=_r(t,r,i),e!==null&&(Bn(e,t,i,n),Oc(e,t,i))}};function nv(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,i)||!Nl(r,o):!0}function U0(t,e,n){var i=!1,r=Ar,o=e.contextType;return typeof o=="object"&&o!==null?o=xn(o):(r=Jt(e)?ds:Vt.current,i=e.contextTypes,o=(i=i!=null)?Fo(t,r):Ar),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function iv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Gh.enqueueReplaceState(e,e.state,null)}function Yf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},gm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=xn(o):(o=Jt(e)?ds:Vt.current,r.context=Fo(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Qf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Gh.enqueueReplaceState(r,r.state,null),dh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Bo(t,e){try{var n="",i=e;do n+=_S(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function ef(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WC=typeof WeakMap=="function"?WeakMap:Map;function B0(t,e,n){n=Li(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){_h||(_h=!0,lp=i),Xf(t,e)},n}function $0(t,e,n){n=Li(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Xf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Xf(t,e),typeof i!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function rv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new WC;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=rA.bind(null,t,e,n),e.then(t,t))}function sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ov(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Li(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t)}var HC=Ui.ReactCurrentOwner,Yt=!1;function Bt(t,e,n,i){e.child=t===null?v0(e,null,n,i):zo(e,t.child,n,i)}function av(t,e,n,i,r){n=n.render;var o=e.ref;return Lo(e,r),i=Em(t,e,n,i,o,r),n=Tm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Di(t,e,r)):(He&&n&&um(e),e.flags|=1,Bt(t,e,i,r),e.child)}function lv(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,W0(t,e,o,i,r)):(t=zc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(l,i)&&t.ref===e.ref)return Di(t,e,r)}return e.flags|=1,t=wr(o,i),t.ref=e.ref,t.return=e,e.child=t}function W0(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Nl(o,i)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Di(t,e,r)}return Jf(t,e,n,i,r)}function H0(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Co,on),on|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Co,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,je(Co,on),on|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,je(Co,on),on|=i;return Bt(t,e,r,n),e.child}function q0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jf(t,e,n,i,r){var o=Jt(n)?ds:Vt.current;return o=Fo(e,o),Lo(e,r),n=Em(t,e,n,i,o,r),i=Tm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Di(t,e,r)):(He&&i&&um(e),e.flags|=1,Bt(t,e,n,r),e.child)}function uv(t,e,n,i,r){if(Jt(n)){var o=!0;ah(e)}else o=!1;if(Lo(e,r),e.stateNode===null)Vc(t,e),U0(e,n,i),Yf(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=xn(p):(p=Jt(n)?ds:Vt.current,p=Fo(e,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&iv(e,l,i,p),ir=!1;var E=e.memoizedState;l.state=E,dh(e,i,l,r),d=e.memoizedState,h!==i||E!==d||Xt.current||ir?(typeof v=="function"&&(Qf(e,n,v,i),d=e.memoizedState),(h=ir||nv(e,n,h,i,E,d,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,w0(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Vn(e.type,h),l.props=p,y=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=xn(d):(d=Jt(n)?ds:Vt.current,d=Fo(e,d));var S=n.getDerivedStateFromProps;(v=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||E!==d)&&iv(e,l,i,d),ir=!1,E=e.memoizedState,l.state=E,dh(e,i,l,r);var D=e.memoizedState;h!==y||E!==D||Xt.current||ir?(typeof S=="function"&&(Qf(e,n,S,i),D=e.memoizedState),(p=ir||nv(e,n,p,i,E,D,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,D,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,D,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),l.props=i,l.state=D,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return ep(t,e,n,i,o,r)}function ep(t,e,n,i,r,o){q0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&K_(e,n,!1),Di(t,e,o);i=e.stateNode,HC.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=zo(e,t.child,null,o),e.child=zo(e,null,h,o)):Bt(t,e,h,o),e.memoizedState=i.state,r&&K_(e,n,!0),e.child}function G0(t){var e=t.stateNode;e.pendingContext?G_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&G_(t,e.context,!1),_m(t,e.containerInfo)}function cv(t,e,n,i,r){return jo(),hm(r),e.flags|=256,Bt(t,e,n,i),e.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(t){return{baseLanes:t,cachePool:null,transitions:null}}function K0(t,e,n){var i=e.pendingProps,r=Ke.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(r&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),je(Ke,r&1),t===null)return Kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Qh(l,i,0,null),t=cs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=np(n),e.memoizedState=tp,t):Sm(e,l));if(r=t.memoizedState,r!==null&&(h=r.dehydrated,h!==null))return qC(t,e,l,i,h,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,h=r.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=wr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),h!==null?o=wr(h,o):(o=cs(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?np(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=tp,i}return o=t.child,t=o.sibling,i=wr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Sm(t,e){return e=Qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vc(t,e,n,i){return i!==null&&hm(i),zo(e,t.child,null,n),t=Sm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qC(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=ef(Error(Q(422))),vc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Qh({mode:"visible",children:i.children},r,0,null),o=cs(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&zo(e,t.child,null,l),e.child.memoizedState=np(l),e.memoizedState=tp,o);if(!(e.mode&1))return vc(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=ef(o,i,void 0),vc(t,e,l,i)}if(h=(l&t.childLanes)!==0,Yt||h){if(i=Tt,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Mi(t,r),Bn(i,t,r,-1))}return Lm(),i=ef(Error(Q(421))),vc(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=sA.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,an=gr(r.nextSibling),un=e,He=!0,jn=null,t!==null&&(In[Pn++]=Ci,In[Pn++]=Ai,In[Pn++]=fs,Ci=t.id,Ai=t.overflow,fs=e),e=Sm(e,i.children),e.flags|=4096,e)}function hv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Zf(t.return,e,n)}function tf(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Z0(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Bt(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hv(t,n,e);else if(t.tag===19)hv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(je(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&fh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),tf(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&fh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}tf(e,!0,n,null,o);break;case"together":tf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GC(t,e,n){switch(e.tag){case 3:G0(e),jo();break;case 5:E0(e);break;case 1:Jt(e.type)&&ah(e);break;case 4:_m(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;je(ch,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?K0(t,e,n):(je(Ke,Ke.current&1),t=Di(t,e,n),t!==null?t.sibling:null);je(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Z0(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,H0(t,e,n)}return Di(t,e,n)}var Q0,ip,Y0,X0;Q0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ip=function(){};Y0=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ss(ri.current);var o=null;switch(n){case"input":r=Sf(t,r),i=Sf(t,i),o=[];break;case"select":r=Qe({},r,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":r=xf(t,r),i=xf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=sh)}Rf(n,i);var l;n=null;for(p in r)if(!i.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var h=r[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Sl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=r!=null?r[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Sl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&ze("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};X0=function(t,e,n,i){n!==i&&(e.flags|=4)};function Qa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function KC(t,e,n){var i=e.pendingProps;switch(cm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Jt(e.type)&&oh(),Nt(e),null;case 3:return i=e.stateNode,Uo(),Be(Xt),Be(Vt),ym(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(gc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(hp(jn),jn=null))),ip(t,e),Nt(e),null;case 5:vm(e);var r=ss(Vl.current);if(n=e.type,t!==null&&e.stateNode!=null)Y0(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return Nt(e),null}if(t=ss(ri.current),gc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ni]=e,i[Ml]=o,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(r=0;r<nl.length;r++)ze(nl[r],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":w_(i,o),ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ze("invalid",i);break;case"textarea":T_(i,o),ze("invalid",i)}Rf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&mc(i.textContent,h,t),r=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&mc(i.textContent,h,t),r=["children",""+h]):Sl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ze("scroll",i)}switch(n){case"input":ac(i),E_(i,o,!0);break;case"textarea":ac(i),I_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=sh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ni]=e,t[Ml]=i,Q0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Lf(n,i),n){case"dialog":ze("cancel",t),ze("close",t),r=i;break;case"iframe":case"object":case"embed":ze("load",t),r=i;break;case"video":case"audio":for(r=0;r<nl.length;r++)ze(nl[r],t);r=i;break;case"source":ze("error",t),r=i;break;case"img":case"image":case"link":ze("error",t),ze("load",t),r=i;break;case"details":ze("toggle",t),r=i;break;case"input":w_(t,i),r=Sf(t,i),ze("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Qe({},i,{value:void 0}),ze("invalid",t);break;case"textarea":T_(t,i),r=xf(t,i),ze("invalid",t);break;default:r=i}Rf(n,r),h=r;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?kw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Aw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Cl(t,d):typeof d=="number"&&Cl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Sl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ze("scroll",t):d!=null&&Zp(t,o,d,l))}switch(n){case"input":ac(t),E_(t,i,!1);break;case"textarea":ac(t),I_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Cr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ao(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ao(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=sh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)X0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=ss(Vl.current),ss(ri.current),gc(e)){if(i=e.stateNode,n=e.memoizedProps,i[ni]=e,(o=i.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:mc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ni]=e,e.stateNode=i}return Nt(e),null;case 13:if(Be(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&an!==null&&e.mode&1&&!(e.flags&128))g0(),jo(),e.flags|=98560,o=!1;else if(o=gc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[ni]=e}else jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),o=!1}else jn!==null&&(hp(jn),jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?mt===0&&(mt=3):Lm())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Uo(),ip(t,e),t===null&&bl(e.stateNode.containerInfo),Nt(e),null;case 10:return pm(e.type._context),Nt(e),null;case 17:return Jt(e.type)&&oh(),Nt(e),null;case 19:if(Be(Ke),o=e.memoizedState,o===null)return Nt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Qa(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=fh(t),l!==null){for(e.flags|=128,Qa(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>$o&&(e.flags|=128,i=!0,Qa(o,!1),e.lanes=4194304)}else{if(!i)if(t=fh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return Nt(e),null}else 2*it()-o.renderingStartTime>$o&&n!==1073741824&&(e.flags|=128,i=!0,Qa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ke.current,je(Ke,i?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Rm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?on&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function ZC(t,e){switch(cm(e),e.tag){case 1:return Jt(e.type)&&oh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Uo(),Be(Xt),Be(Vt),ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vm(e),null;case 13:if(Be(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ke),null;case 4:return Uo(),null;case 10:return pm(e.type._context),null;case 22:case 23:return Rm(),null;case 24:return null;default:return null}}var yc=!1,Mt=!1,QC=typeof WeakSet=="function"?WeakSet:Set,ne=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function rp(t,e,n){try{n()}catch(i){et(t,e,i)}}var dv=!1;function YC(t,e){if(Uf=nh,t=i0(),lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,v=0,y=t,E=null;t:for(;;){for(var S;y!==n||r!==0&&y.nodeType!==3||(h=l+r),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(S=y.firstChild)!==null;)E=y,y=S;for(;;){if(y===t)break t;if(E===n&&++p===r&&(h=l),E===o&&++v===i&&(d=l),(S=y.nextSibling)!==null)break;y=E,E=y.parentNode}y=S}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bf={focusedElem:t,selectionRange:n},nh=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var V=D.memoizedProps,U=D.memoizedState,R=e.stateNode,C=R.getSnapshotBeforeUpdate(e.elementType===e.type?V:Vn(e.type,V),U);R.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(W){et(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return D=dv,dv=!1,D}function ml(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&rp(e,n,o)}r=r.next}while(r!==i)}}function Kh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function J0(t){var e=t.alternate;e!==null&&(t.alternate=null,J0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ni],delete e[Ml],delete e[Hf],delete e[bC],delete e[OC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eE(t){return t.tag===5||t.tag===3||t.tag===4}function fv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function op(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sh));else if(i!==4&&(t=t.child,t!==null))for(op(t,e,n),t=t.sibling;t!==null;)op(t,e,n),t=t.sibling}function ap(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}var Pt=null,Fn=!1;function er(t,e,n){for(n=n.child;n!==null;)tE(t,e,n),n=n.sibling}function tE(t,e,n){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(zh,n)}catch{}switch(n.tag){case 5:Mt||So(n,e);case 6:var i=Pt,r=Fn;Pt=null,er(t,e,n),Pt=i,Fn=r,Pt!==null&&(Fn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Fn?(t=Pt,n=n.stateNode,t.nodeType===8?Kd(t.parentNode,n):t.nodeType===1&&Kd(t,n),Rl(t)):Kd(Pt,n.stateNode));break;case 4:i=Pt,r=Fn,Pt=n.stateNode.containerInfo,Fn=!0,er(t,e,n),Pt=i,Fn=r;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&rp(n,e,l),r=r.next}while(r!==i)}er(t,e,n);break;case 1:if(!Mt&&(So(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(Mt=(i=Mt)||n.memoizedState!==null,er(t,e,n),Mt=i):er(t,e,n);break;default:er(t,e,n)}}function pv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QC),e.forEach(function(i){var r=oA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Pt=h.stateNode,Fn=!1;break e;case 3:Pt=h.stateNode.containerInfo,Fn=!0;break e;case 4:Pt=h.stateNode.containerInfo,Fn=!0;break e}h=h.return}if(Pt===null)throw Error(Q(160));tE(o,l,r),Pt=null,Fn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(p){et(r,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nE(e,t),e=e.sibling}function nE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),ei(t),i&4){try{ml(3,t,t.return),Kh(3,t)}catch(V){et(t,t.return,V)}try{ml(5,t,t.return)}catch(V){et(t,t.return,V)}}break;case 1:Dn(e,t),ei(t),i&512&&n!==null&&So(n,n.return);break;case 5:if(Dn(e,t),ei(t),i&512&&n!==null&&So(n,n.return),t.flags&32){var r=t.stateNode;try{Cl(r,"")}catch(V){et(t,t.return,V)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Pw(r,o),Lf(h,l);var p=Lf(h,o);for(l=0;l<d.length;l+=2){var v=d[l],y=d[l+1];v==="style"?kw(r,y):v==="dangerouslySetInnerHTML"?Aw(r,y):v==="children"?Cl(r,y):Zp(r,v,y,p)}switch(h){case"input":Cf(r,o);break;case"textarea":Sw(r,o);break;case"select":var E=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Ao(r,!!o.multiple,S,!1):E!==!!o.multiple&&(o.defaultValue!=null?Ao(r,!!o.multiple,o.defaultValue,!0):Ao(r,!!o.multiple,o.multiple?[]:"",!1))}r[Ml]=o}catch(V){et(t,t.return,V)}}break;case 6:if(Dn(e,t),ei(t),i&4){if(t.stateNode===null)throw Error(Q(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(V){et(t,t.return,V)}}break;case 3:if(Dn(e,t),ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Rl(e.containerInfo)}catch(V){et(t,t.return,V)}break;case 4:Dn(e,t),ei(t);break;case 13:Dn(e,t),ei(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(xm=it())),i&4&&pv(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(p=Mt)||v,Dn(e,t),Mt=p):Dn(e,t),ei(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(ne=t,v=t.child;v!==null;){for(y=ne=v;ne!==null;){switch(E=ne,S=E.child,E.tag){case 0:case 11:case 14:case 15:ml(4,E,E.return);break;case 1:So(E,E.return);var D=E.stateNode;if(typeof D.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(V){et(i,n,V)}}break;case 5:So(E,E.return);break;case 22:if(E.memoizedState!==null){gv(y);continue}}S!==null?(S.return=E,ne=S):gv(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{r=y.stateNode,p?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=xw("display",l))}catch(V){et(t,t.return,V)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(V){et(t,t.return,V)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Dn(e,t),ei(t),i&4&&pv(t);break;case 21:break;default:Dn(e,t),ei(t)}}function ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eE(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Cl(r,""),i.flags&=-33);var o=fv(t);ap(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,h=fv(t);op(t,h,l);break;default:throw Error(Q(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XC(t,e,n){ne=t,iE(t)}function iE(t,e,n){for(var i=(t.mode&1)!==0;ne!==null;){var r=ne,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||yc;if(!l){var h=r.alternate,d=h!==null&&h.memoizedState!==null||Mt;h=yc;var p=Mt;if(yc=l,(Mt=d)&&!p)for(ne=r;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?_v(r):d!==null?(d.return=l,ne=d):_v(r);for(;o!==null;)ne=o,iE(o),o=o.sibling;ne=r,yc=h,Mt=p}mv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ne=o):mv(t)}}function mv(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||Kh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&J_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}J_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&Rl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Mt||e.flags&512&&sp(e)}catch(E){et(e,e.return,E)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function gv(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function _v(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){et(e,r,d)}}var o=e.return;try{sp(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{sp(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){ne=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ne=h;break}ne=e.return}}var JC=Math.ceil,gh=Ui.ReactCurrentDispatcher,Cm=Ui.ReactCurrentOwner,Cn=Ui.ReactCurrentBatchConfig,Re=0,Tt=null,ct=null,At=0,on=0,Co=Nr(0),mt=0,Ul=null,ms=0,Zh=0,Am=0,gl=null,Zt=null,xm=0,$o=1/0,Ii=null,_h=!1,lp=null,vr=null,wc=!1,cr=null,vh=0,_l=0,up=null,Fc=-1,jc=0;function $t(){return Re&6?it():Fc!==-1?Fc:Fc=it()}function yr(t){return t.mode&1?Re&2&&At!==0?At&-At:DC.transition!==null?(jc===0&&(jc=Uw()),jc):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Kw(t.type)),t):1}function Bn(t,e,n,i){if(50<_l)throw _l=0,up=null,Error(Q(185));tu(t,n,i),(!(Re&2)||t!==Tt)&&(t===Tt&&(!(Re&2)&&(Zh|=n),mt===4&&sr(t,At)),en(t,i),n===1&&Re===0&&!(e.mode&1)&&($o=it()+500,Hh&&br()))}function en(t,e){var n=t.callbackNode;DS(t,e);var i=th(t,t===Tt?At:0);if(i===0)n!==null&&C_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&C_(n),e===1)t.tag===0?MC(vv.bind(null,t)):f0(vv.bind(null,t)),LC(function(){!(Re&6)&&br()}),n=null;else{switch(Bw(i)){case 1:n=em;break;case 4:n=jw;break;case 16:n=eh;break;case 536870912:n=zw;break;default:n=eh}n=hE(n,rE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rE(t,e){if(Fc=-1,jc=0,Re&6)throw Error(Q(327));var n=t.callbackNode;if(No()&&t.callbackNode!==n)return null;var i=th(t,t===Tt?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=yh(t,i);else{e=i;var r=Re;Re|=2;var o=oE();(Tt!==t||At!==e)&&(Ii=null,$o=it()+500,us(t,e));do try{nA();break}catch(h){sE(t,h)}while(!0);fm(),gh.current=o,Re=r,ct!==null?e=0:(Tt=null,At=0,e=mt)}if(e!==0){if(e===2&&(r=Df(t),r!==0&&(i=r,e=cp(t,r))),e===1)throw n=Ul,us(t,0),sr(t,i),en(t,it()),n;if(e===6)sr(t,i);else{if(r=t.current.alternate,!(i&30)&&!eA(r)&&(e=yh(t,i),e===2&&(o=Df(t),o!==0&&(i=o,e=cp(t,o))),e===1))throw n=Ul,us(t,0),sr(t,i),en(t,it()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:es(t,Zt,Ii);break;case 3:if(sr(t,i),(i&130023424)===i&&(e=xm+500-it(),10<e)){if(th(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){$t(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Wf(es.bind(null,t,Zt,Ii),e);break}es(t,Zt,Ii);break;case 4:if(sr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-Un(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*JC(i/1960))-i,10<i){t.timeoutHandle=Wf(es.bind(null,t,Zt,Ii),i);break}es(t,Zt,Ii);break;case 5:es(t,Zt,Ii);break;default:throw Error(Q(329))}}}return en(t,it()),t.callbackNode===n?rE.bind(null,t):null}function cp(t,e){var n=gl;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=yh(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&hp(e)),t}function hp(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function eA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Hn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~Am,e&=~Zh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),i=1<<n;t[n]=-1,e&=~i}}function vv(t){if(Re&6)throw Error(Q(327));No();var e=th(t,0);if(!(e&1))return en(t,it()),null;var n=yh(t,e);if(t.tag!==0&&n===2){var i=Df(t);i!==0&&(e=i,n=cp(t,i))}if(n===1)throw n=Ul,us(t,0),sr(t,e),en(t,it()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,Zt,Ii),en(t,it()),null}function km(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&($o=it()+500,Hh&&br())}}function gs(t){cr!==null&&cr.tag===0&&!(Re&6)&&No();var e=Re;Re|=1;var n=Cn.transition,i=Oe;try{if(Cn.transition=null,Oe=1,t)return t()}finally{Oe=i,Cn.transition=n,Re=e,!(Re&6)&&br()}}function Rm(){on=Co.current,Be(Co)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RC(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(cm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&oh();break;case 3:Uo(),Be(Xt),Be(Vt),ym();break;case 5:vm(i);break;case 4:Uo();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:pm(i.type._context);break;case 22:case 23:Rm()}n=n.return}if(Tt=t,ct=t=wr(t.current,null),At=on=e,mt=0,Ul=null,Am=Zh=ms=0,Zt=gl=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}rs=null}return t}function sE(t,e){do{var n=ct;try{if(fm(),Mc.current=mh,ph){for(var i=Ze.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ph=!1}if(ps=0,Et=pt=Ze=null,pl=!1,Fl=0,Cm.current=null,n===null||n.return===null){mt=1,Ul=e,ct=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var E=v.alternate;E?(v.updateQueue=E.updateQueue,v.memoizedState=E.memoizedState,v.lanes=E.lanes):(v.updateQueue=null,v.memoizedState=null)}var S=sv(l);if(S!==null){S.flags&=-257,ov(S,l,h,o,e),S.mode&1&&rv(o,p,e),e=S,d=p;var D=e.updateQueue;if(D===null){var V=new Set;V.add(d),e.updateQueue=V}else D.add(d);break e}else{if(!(e&1)){rv(o,p,e),Lm();break e}d=Error(Q(426))}}else if(He&&h.mode&1){var U=sv(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),ov(U,l,h,o,e),hm(Bo(d,h));break e}}o=d=Bo(d,h),mt!==4&&(mt=2),gl===null?gl=[o]:gl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=B0(o,d,e);X_(o,R);break e;case 1:h=d;var C=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vr===null||!vr.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=$0(o,h,e);X_(o,W);break e}}o=o.return}while(o!==null)}lE(n)}catch(Y){e=Y,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function oE(){var t=gh.current;return gh.current=mh,t===null?mh:t}function Lm(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(ms&268435455)&&!(Zh&268435455)||sr(Tt,At)}function yh(t,e){var n=Re;Re|=2;var i=oE();(Tt!==t||At!==e)&&(Ii=null,us(t,e));do try{tA();break}catch(r){sE(t,r)}while(!0);if(fm(),Re=n,gh.current=i,ct!==null)throw Error(Q(261));return Tt=null,At=0,mt}function tA(){for(;ct!==null;)aE(ct)}function nA(){for(;ct!==null&&!AS();)aE(ct)}function aE(t){var e=cE(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?lE(t):ct=e,Cm.current=null}function lE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZC(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ct=null;return}}else if(n=KC(n,e,on),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);mt===0&&(mt=5)}function es(t,e,n){var i=Oe,r=Cn.transition;try{Cn.transition=null,Oe=1,iA(t,e,n,i)}finally{Cn.transition=r,Oe=i}return null}function iA(t,e,n,i){do No();while(cr!==null);if(Re&6)throw Error(Q(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(VS(t,o),t===Tt&&(ct=Tt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wc||(wc=!0,hE(eh,function(){return No(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Cn.transition,Cn.transition=null;var l=Oe;Oe=1;var h=Re;Re|=4,Cm.current=null,YC(t,n),nE(n,t),IC(Bf),nh=!!Uf,Bf=Uf=null,t.current=n,XC(n),xS(),Re=h,Oe=l,Cn.transition=o}else t.current=n;if(wc&&(wc=!1,cr=t,vh=r),o=t.pendingLanes,o===0&&(vr=null),LS(n.stateNode),en(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(_h)throw _h=!1,t=lp,lp=null,t;return vh&1&&t.tag!==0&&No(),o=t.pendingLanes,o&1?t===up?_l++:(_l=0,up=t):_l=0,br(),null}function No(){if(cr!==null){var t=Bw(vh),e=Cn.transition,n=Oe;try{if(Cn.transition=null,Oe=16>t?16:t,cr===null)var i=!1;else{if(t=cr,cr=null,vh=0,Re&6)throw Error(Q(331));var r=Re;for(Re|=4,ne=t.current;ne!==null;){var o=ne,l=o.child;if(ne.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(ne=p;ne!==null;){var v=ne;switch(v.tag){case 0:case 11:case 15:ml(8,v,o)}var y=v.child;if(y!==null)y.return=v,ne=y;else for(;ne!==null;){v=ne;var E=v.sibling,S=v.return;if(J0(v),v===p){ne=null;break}if(E!==null){E.return=S,ne=E;break}ne=S}}}var D=o.alternate;if(D!==null){var V=D.child;if(V!==null){D.child=null;do{var U=V.sibling;V.sibling=null,V=U}while(V!==null)}}ne=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ne=l;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ml(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,ne=R;break e}ne=o.return}}var C=t.current;for(ne=C;ne!==null;){l=ne;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,ne=b;else e:for(l=C;ne!==null;){if(h=ne,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Kh(9,h)}}catch(Y){et(h,h.return,Y)}if(h===l){ne=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,ne=W;break e}ne=h.return}}if(Re=r,br(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(zh,t)}catch{}i=!0}return i}finally{Oe=n,Cn.transition=e}}return!1}function yv(t,e,n){e=Bo(n,e),e=B0(t,e,1),t=_r(t,e,1),e=$t(),t!==null&&(tu(t,1,e),en(t,e))}function et(t,e,n){if(t.tag===3)yv(t,t,n);else for(;e!==null;){if(e.tag===3){yv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vr===null||!vr.has(i))){t=Bo(n,t),t=$0(e,t,1),e=_r(e,t,1),t=$t(),e!==null&&(tu(e,1,t),en(e,t));break}}e=e.return}}function rA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(At&n)===n&&(mt===4||mt===3&&(At&130023424)===At&&500>it()-xm?us(t,0):Am|=n),en(t,e)}function uE(t,e){e===0&&(t.mode&1?(e=cc,cc<<=1,!(cc&130023424)&&(cc=4194304)):e=1);var n=$t();t=Mi(t,e),t!==null&&(tu(t,e,n),en(t,n))}function sA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uE(t,n)}function oA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),uE(t,n)}var cE;cE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,GC(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,He&&e.flags&1048576&&p0(e,uh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Vc(t,e),t=e.pendingProps;var r=Fo(e,Vt.current);Lo(e,n),r=Em(null,e,i,t,r,n);var o=Tm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(o=!0,ah(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,gm(e),r.updater=Gh,e.stateNode=r,r._reactInternals=e,Yf(e,i,t,n),e=ep(null,e,i,!0,o,n)):(e.tag=0,He&&o&&um(e),Bt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Vc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=lA(i),t=Vn(i,t),r){case 0:e=Jf(null,e,i,t,n);break e;case 1:e=uv(null,e,i,t,n);break e;case 11:e=av(null,e,i,t,n);break e;case 14:e=lv(null,e,i,Vn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),Jf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),uv(t,e,i,r,n);case 3:e:{if(G0(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,r=o.element,w0(t,e),dh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Bo(Error(Q(423)),e),e=cv(t,e,i,n,r);break e}else if(i!==r){r=Bo(Error(Q(424)),e),e=cv(t,e,i,n,r);break e}else for(an=gr(e.stateNode.containerInfo.firstChild),un=e,He=!0,jn=null,n=v0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jo(),i===r){e=Di(t,e,n);break e}Bt(t,e,i,n)}e=e.child}return e;case 5:return E0(e),t===null&&Kf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,$f(i,r)?l=null:o!==null&&$f(i,o)&&(e.flags|=32),q0(t,e),Bt(t,e,l,n),e.child;case 6:return t===null&&Kf(e),null;case 13:return K0(t,e,n);case 4:return _m(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=zo(e,null,i,n):Bt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),av(t,e,i,r,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,je(ch,i._currentValue),i._currentValue=l,o!==null)if(Hn(o.value,l)){if(o.children===r.children&&!Xt.current){e=Di(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Li(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?d.next=d:(d.next=v.next,v.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Zf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Zf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Bt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Lo(e,n),r=xn(r),i=i(r),e.flags|=1,Bt(t,e,i,n),e.child;case 14:return i=e.type,r=Vn(i,e.pendingProps),r=Vn(i.type,r),lv(t,e,i,r,n);case 15:return W0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),Vc(t,e),e.tag=1,Jt(i)?(t=!0,ah(e)):t=!1,Lo(e,n),U0(e,i,r),Yf(e,i,r,n),ep(null,e,i,!0,t,n);case 19:return Z0(t,e,n);case 22:return H0(t,e,n)}throw Error(Q(156,e.tag))};function hE(t,e){return Fw(t,e)}function aA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,i){return new aA(t,e,n,i)}function Nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lA(t){if(typeof t=="function")return Nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yp)return 11;if(t===Xp)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zc(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")Nm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case go:return cs(n.children,r,o,e);case Qp:l=8,r|=8;break;case Ef:return t=Sn(12,n,e,r|2),t.elementType=Ef,t.lanes=o,t;case Tf:return t=Sn(13,n,e,r),t.elementType=Tf,t.lanes=o,t;case If:return t=Sn(19,n,e,r),t.elementType=If,t.lanes=o,t;case Ew:return Qh(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yw:l=10;break e;case ww:l=9;break e;case Yp:l=11;break e;case Xp:l=14;break e;case nr:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Sn(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function cs(t,e,n,i){return t=Sn(7,t,i,e),t.lanes=n,t}function Qh(t,e,n,i){return t=Sn(22,t,i,e),t.elementType=Ew,t.lanes=n,t.stateNode={isHidden:!1},t}function nf(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function rf(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vd(0),this.expirationTimes=Vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function bm(t,e,n,i,r,o,l,h,d){return t=new uA(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Sn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(o),t}function cA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function dE(t){if(!t)return Ar;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Jt(n))return d0(t,n,e)}return e}function fE(t,e,n,i,r,o,l,h,d){return t=bm(n,i,!0,t,r,o,l,h,d),t.context=dE(null),n=t.current,i=$t(),r=yr(n),o=Li(i,r),o.callback=e??null,_r(n,o,r),t.current.lanes=r,tu(t,r,i),en(t,i),t}function Yh(t,e,n,i){var r=e.current,o=$t(),l=yr(r);return n=dE(n),e.context===null?e.context=n:e.pendingContext=n,e=Li(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=_r(r,e,l),t!==null&&(Bn(t,r,l,o),Oc(t,r,l)),l}function wh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Om(t,e){wv(t,e),(t=t.alternate)&&wv(t,e)}function hA(){return null}var pE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mm(t){this._internalRoot=t}Xh.prototype.render=Mm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Yh(t,e,null,null)};Xh.prototype.unmount=Mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){Yh(null,t,null,null)}),e[Oi]=null}};function Xh(t){this._internalRoot=t}Xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&Gw(t)}};function Dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ev(){}function dA(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var p=wh(l);o.call(p)}}var l=fE(e,i,t,0,null,!1,!1,"",Ev);return t._reactRootContainer=l,t[Oi]=l.current,bl(t.nodeType===8?t.parentNode:t),gs(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var h=i;i=function(){var p=wh(d);h.call(p)}}var d=bm(t,0,!1,null,null,!1,!1,"",Ev);return t._reactRootContainer=d,t[Oi]=d.current,bl(t.nodeType===8?t.parentNode:t),gs(function(){Yh(e,d,n,i)}),d}function ed(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var h=r;r=function(){var d=wh(l);h.call(d)}}Yh(e,l,t,r)}else l=dA(n,e,t,r,i);return wh(l)}$w=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tl(e.pendingLanes);n!==0&&(tm(e,n|1),en(e,it()),!(Re&6)&&($o=it()+500,br()))}break;case 13:gs(function(){var i=Mi(t,1);if(i!==null){var r=$t();Bn(i,t,1,r)}}),Om(t,1)}};nm=function(t){if(t.tag===13){var e=Mi(t,134217728);if(e!==null){var n=$t();Bn(e,t,134217728,n)}Om(t,134217728)}};Ww=function(t){if(t.tag===13){var e=yr(t),n=Mi(t,e);if(n!==null){var i=$t();Bn(n,t,e,i)}Om(t,e)}};Hw=function(){return Oe};qw=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};bf=function(t,e,n){switch(e){case"input":if(Cf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Wh(i);if(!r)throw Error(Q(90));Iw(i),Cf(i,r)}}}break;case"textarea":Sw(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};Nw=km;bw=gs;var fA={usingClientEntryPoint:!1,Events:[iu,wo,Wh,Rw,Lw,km]},Ya={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pA={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||hA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{zh=Ec.inject(pA),ii=Ec}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fA;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dm(e))throw Error(Q(200));return cA(t,e,null,n)};fn.createRoot=function(t,e){if(!Dm(t))throw Error(Q(299));var n=!1,i="",r=pE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=bm(t,1,!1,null,null,n,!1,i,r),t[Oi]=e.current,bl(t.nodeType===8?t.parentNode:t),new Mm(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Dw(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return gs(t)};fn.hydrate=function(t,e,n){if(!Jh(e))throw Error(Q(200));return ed(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Dm(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=pE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=fE(e,null,t,1,n??null,r,!1,o,l),t[Oi]=e.current,bl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Xh(e)};fn.render=function(t,e,n){if(!Jh(e))throw Error(Q(200));return ed(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Jh(t))throw Error(Q(40));return t._reactRootContainer?(gs(function(){ed(null,null,t,!1,function(){t._reactRootContainer=null,t[Oi]=null})}),!0):!1};fn.unstable_batchedUpdates=km;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return ed(t,e,n,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function mE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mE)}catch(t){console.error(t)}}mE(),mw.exports=fn;var gE=mw.exports,_E,Tv=gE;_E=Tv.createRoot,Tv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bl.apply(this,arguments)}var hr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hr||(hr={}));const Iv="popstate";function mA(t){t===void 0&&(t={});function e(r,o){let{pathname:l="/",search:h="",hash:d=""}=As(r.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),dp("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let l=r.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let d=r.location.href,p=d.indexOf("#");h=p===-1?d:d.slice(0,p)}return h+"#"+(typeof o=="string"?o:Eh(o))}function i(r,o){Vm(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return _A(e,n,i,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gA(){return Math.random().toString(36).substr(2,8)}function Pv(t,e){return{usr:t.state,key:t.key,idx:e}}function dp(t,e,n,i){return n===void 0&&(n=null),Bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:n,key:e&&e.key||i||gA()})}function Eh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function As(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function _A(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,h=hr.Pop,d=null,p=v();p==null&&(p=0,l.replaceState(Bl({},l.state,{idx:p}),""));function v(){return(l.state||{idx:null}).idx}function y(){h=hr.Pop;let U=v(),R=U==null?null:U-p;p=U,d&&d({action:h,location:V.location,delta:R})}function E(U,R){h=hr.Push;let C=dp(V.location,U,R);n&&n(C,U),p=v()+1;let b=Pv(C,p),W=V.createHref(C);try{l.pushState(b,"",W)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;r.location.assign(W)}o&&d&&d({action:h,location:V.location,delta:1})}function S(U,R){h=hr.Replace;let C=dp(V.location,U,R);n&&n(C,U),p=v();let b=Pv(C,p),W=V.createHref(C);l.replaceState(b,"",W),o&&d&&d({action:h,location:V.location,delta:0})}function D(U){let R=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof U=="string"?U:Eh(U);return C=C.replace(/ $/,"%20"),rt(R,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,R)}let V={get action(){return h},get location(){return t(r,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Iv,y),d=U,()=>{r.removeEventListener(Iv,y),d=null}},createHref(U){return e(r,U)},createURL:D,encodeLocation(U){let R=D(U);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:E,replace:S,go(U){return l.go(U)}};return V}var Sv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sv||(Sv={}));function vA(t,e,n){return n===void 0&&(n="/"),yA(t,e,n)}function yA(t,e,n,i){let r=typeof e=="string"?As(e):e,o=Fm(r.pathname||"/",n);if(o==null)return null;let l=vE(t);wA(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=NA(o);h=kA(l[d],p)}return h}function vE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(rt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=Er([i,d.relativePath]),v=n.concat(d);o.children&&o.children.length>0&&(rt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),vE(o.children,e,v,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:AA(p,o.index),routesMeta:v})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))r(o,l);else for(let d of yE(o.path))r(o,l,d)}),e}function yE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=yE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function wA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const EA=/^:[\w-]+$/,TA=3,IA=2,PA=1,SA=10,CA=-2,Cv=t=>t==="*";function AA(t,e){let n=t.split("/"),i=n.length;return n.some(Cv)&&(i+=CA),e&&(i+=IA),n.filter(r=>!Cv(r)).reduce((r,o)=>r+(EA.test(o)?TA:o===""?PA:SA),i)}function xA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function kA(t,e,n){let{routesMeta:i}=t,r={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,v=o==="/"?e:e.slice(o.length)||"/",y=RA({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},v),E=d.route;if(!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:Er([o,y.pathname]),pathnameBase:DA(Er([o,y.pathnameBase])),route:E}),y.pathnameBase!=="/"&&(o=Er([o,y.pathnameBase]))}return l}function RA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=LA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((p,v,y)=>{let{paramName:E,isOptional:S}=v;if(E==="*"){let V=h[y]||"";l=o.slice(0,o.length-V.length).replace(/(.)\/+$/,"$1")}const D=h[y];return S&&!D?p[E]=void 0:p[E]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function LA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function NA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function bA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?As(t):t;return{pathname:n?n.startsWith("/")?n:OA(n,e):e,search:VA(i),hash:FA(r)}}function OA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function sf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jm(t,e){let n=MA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zm(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=As(t):(r=Bl({},t),rt(!r.pathname||!r.pathname.includes("?"),sf("?","pathname","search",r)),rt(!r.pathname||!r.pathname.includes("#"),sf("#","pathname","hash",r)),rt(!r.search||!r.search.includes("#"),sf("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,h;if(l==null)h=n;else{let y=e.length-1;if(!i&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),y-=1;r.pathname=E.join("/")}h=y>=0?e[y]:"/"}let d=bA(r,h),p=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||v)&&(d.pathname+="/"),d}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),DA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wE=["post","put","patch","delete"];new Set(wE);const zA=["get",...wE];new Set(zA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$l.apply(this,arguments)}const Um=H.createContext(null),UA=H.createContext(null),Or=H.createContext(null),td=H.createContext(null),Mr=H.createContext({outlet:null,matches:[],isDataRoute:!1}),EE=H.createContext(null);function BA(t,e){let{relative:n}=e===void 0?{}:e;ta()||rt(!1);let{basename:i,navigator:r}=H.useContext(Or),{hash:o,pathname:l,search:h}=IE(t,{relative:n}),d=l;return i!=="/"&&(d=l==="/"?i:Er([i,l])),r.createHref({pathname:d,search:h,hash:o})}function ta(){return H.useContext(td)!=null}function su(){return ta()||rt(!1),H.useContext(td).location}function TE(t){H.useContext(Or).static||H.useLayoutEffect(t)}function ou(){let{isDataRoute:t}=H.useContext(Mr);return t?tx():$A()}function $A(){ta()||rt(!1);let t=H.useContext(Um),{basename:e,future:n,navigator:i}=H.useContext(Or),{matches:r}=H.useContext(Mr),{pathname:o}=su(),l=JSON.stringify(jm(r,n.v7_relativeSplatPath)),h=H.useRef(!1);return TE(()=>{h.current=!0}),H.useCallback(function(p,v){if(v===void 0&&(v={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let y=zm(p,JSON.parse(l),o,v.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Er([e,y.pathname])),(v.replace?i.replace:i.push)(y,v.state,v)},[e,i,l,o,t])}function IE(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=H.useContext(Or),{matches:r}=H.useContext(Mr),{pathname:o}=su(),l=JSON.stringify(jm(r,i.v7_relativeSplatPath));return H.useMemo(()=>zm(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function WA(t,e){return HA(t,e)}function HA(t,e,n,i){ta()||rt(!1);let{navigator:r}=H.useContext(Or),{matches:o}=H.useContext(Mr),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=su(),v;if(e){var y;let U=typeof e=="string"?As(e):e;d==="/"||(y=U.pathname)!=null&&y.startsWith(d)||rt(!1),v=U}else v=p;let E=v.pathname||"/",S=E;if(d!=="/"){let U=d.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=vA(t,{pathname:S}),V=QA(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:Er([d,r.encodeLocation?r.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:Er([d,r.encodeLocation?r.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&V?H.createElement(td.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:hr.Pop}},V):V}function qA(){let t=ex(),e=jA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:r},n):null,null)}const GA=H.createElement(qA,null);class KA extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?H.createElement(Mr.Provider,{value:this.props.routeContext},H.createElement(EE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZA(t){let{routeContext:e,match:n,children:i}=t,r=H.useContext(Um);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(Mr.Provider,{value:e},i)}function QA(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(r=n)==null?void 0:r.errors;if(h!=null){let v=l.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||rt(!1),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<l.length;v++){let y=l[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=v),y.route.id){let{loaderData:E,errors:S}=n,D=y.route.loader&&E[y.route.id]===void 0&&(!S||S[y.route.id]===void 0);if(y.route.lazy||D){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((v,y,E)=>{let S,D=!1,V=null,U=null;n&&(S=h&&y.route.id?h[y.route.id]:void 0,V=y.route.errorElement||GA,d&&(p<0&&E===0?(nx("route-fallback"),D=!0,U=null):p===E&&(D=!0,U=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,E+1)),C=()=>{let b;return S?b=V:D?b=U:y.route.Component?b=H.createElement(y.route.Component,null):y.route.element?b=y.route.element:b=v,H.createElement(ZA,{match:y,routeContext:{outlet:v,matches:R,isDataRoute:n!=null},children:b})};return n&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?H.createElement(KA,{location:n.location,revalidation:n.revalidation,component:V,error:S,children:C(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):C()},null)}var PE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(PE||{}),SE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SE||{});function YA(t){let e=H.useContext(Um);return e||rt(!1),e}function XA(t){let e=H.useContext(UA);return e||rt(!1),e}function JA(t){let e=H.useContext(Mr);return e||rt(!1),e}function CE(t){let e=JA(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function ex(){var t;let e=H.useContext(EE),n=XA(),i=CE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function tx(){let{router:t}=YA(PE.UseNavigateStable),e=CE(SE.UseNavigateStable),n=H.useRef(!1);return TE(()=>{n.current=!0}),H.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,$l({fromRouteId:e},o)))},[t,e])}const Av={};function nx(t,e,n){Av[t]||(Av[t]=!0)}function ix(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rx(t){let{to:e,replace:n,state:i,relative:r}=t;ta()||rt(!1);let{future:o,static:l}=H.useContext(Or),{matches:h}=H.useContext(Mr),{pathname:d}=su(),p=ou(),v=zm(e,jm(h,o.v7_relativeSplatPath),d,r==="path"),y=JSON.stringify(v);return H.useEffect(()=>p(JSON.parse(y),{replace:n,state:i,relative:r}),[p,y,r,n,i]),null}function ts(t){rt(!1)}function sx(t){let{basename:e="/",children:n=null,location:i,navigationType:r=hr.Pop,navigator:o,static:l=!1,future:h}=t;ta()&&rt(!1);let d=e.replace(/^\/*/,"/"),p=H.useMemo(()=>({basename:d,navigator:o,static:l,future:$l({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=As(i));let{pathname:v="/",search:y="",hash:E="",state:S=null,key:D="default"}=i,V=H.useMemo(()=>{let U=Fm(v,d);return U==null?null:{location:{pathname:U,search:y,hash:E,state:S,key:D},navigationType:r}},[d,v,y,E,S,D,r]);return V==null?null:H.createElement(Or.Provider,{value:p},H.createElement(td.Provider,{children:n,value:V}))}function ox(t){let{children:e,location:n}=t;return WA(fp(e),n)}new Promise(()=>{});function fp(t,e){e===void 0&&(e=[]);let n=[];return H.Children.forEach(t,(i,r)=>{if(!H.isValidElement(i))return;let o=[...e,r];if(i.type===H.Fragment){n.push.apply(n,fp(i.props.children,o));return}i.type!==ts&&rt(!1),!i.props.index||!i.props.children||rt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=fp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pp.apply(this,arguments)}function ax(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function lx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ux(t,e){return t.button===0&&(!e||e==="_self")&&!lx(t)}const cx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hx="6";try{window.__reactRouterVersion=hx}catch{}const dx="startTransition",xv=rS[dx];function fx(t){let{basename:e,children:n,future:i,window:r}=t,o=H.useRef();o.current==null&&(o.current=mA({window:r,v5Compat:!0}));let l=o.current,[h,d]=H.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},v=H.useCallback(y=>{p&&xv?xv(()=>d(y)):d(y)},[d,p]);return H.useLayoutEffect(()=>l.listen(v),[l,v]),H.useEffect(()=>ix(i),[i]),H.createElement(sx,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}const px=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kt=H.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:v,viewTransition:y}=e,E=ax(e,cx),{basename:S}=H.useContext(Or),D,V=!1;if(typeof p=="string"&&mx.test(p)&&(D=p,px))try{let b=new URL(window.location.href),W=p.startsWith("//")?new URL(b.protocol+p):new URL(p),Y=Fm(W.pathname,S);W.origin===b.origin&&Y!=null?p=Y+W.search+W.hash:V=!0}catch{}let U=BA(p,{relative:r}),R=gx(p,{replace:l,state:h,target:d,preventScrollReset:v,relative:r,viewTransition:y});function C(b){i&&i(b),b.defaultPrevented||R(b)}return H.createElement("a",pp({},E,{href:D||U,onClick:V||o?i:C,ref:n,target:d}))});var kv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kv||(kv={}));var Rv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Rv||(Rv={}));function gx(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,d=ou(),p=su(),v=IE(t,{relative:l});return H.useCallback(y=>{if(ux(y,n)){y.preventDefault();let E=i!==void 0?i:Eh(p)===Eh(v);d(t,{replace:E,state:r,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,v,i,r,n,t,o,l,h])}var Lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},_x=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],h=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,h=l?t[r+1]:0,d=r+2<t.length,p=d?t[r+2]:0,v=o>>2,y=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,S=p&63;d||(S=64,l||(E=64)),i.push(n[v],n[y],n[E],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_x(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||h==null||p==null||y==null)throw new vx;const E=o<<2|h>>4;if(i.push(E),p!==64){const S=h<<4&240|p>>2;if(i.push(S),y!==64){const D=p<<6&192|y;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yx=function(t){const e=AE(t);return xE.encodeByteArray(e,!0)},Th=function(t){return yx(t).replace(/\./g,"")},kE=function(t){try{return xE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=()=>wx().__FIREBASE_DEFAULTS__,Tx=()=>{if(typeof process>"u"||typeof Lv>"u")return;const t=Lv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ix=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kE(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return Ex()||Tx()||Ix()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RE=t=>{var e,n;return(n=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Px=t=>{const e=RE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},LE=()=>{var t;return(t=nd())===null||t===void 0?void 0:t.config},NE=t=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Th(JSON.stringify(n)),Th(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ax(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function xx(){var t;const e=(t=nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lx(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nx(){return!xx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OE(){try{return typeof indexedDB=="object"}catch{return!1}}function ME(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function bx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="FirebaseError";class Kn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Ox,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xs.prototype.create)}}class xs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?Mx(o,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Kn(r,h,i)}}function Mx(t,e){return t.replace(Dx,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Dx=/\{\$([^}]+)}/g;function Vx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(Nv(o)&&Nv(l)){if(!Wl(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function il(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function rl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Fx(t,e){const n=new jx(t,e);return n.subscribe.bind(n)}class jx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");zx(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=of),r.error===void 0&&(r.error=of),r.complete===void 0&&(r.complete=of);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=1e3,Bx=2,$x=4*60*60*1e3,Wx=.5;function bv(t,e=Ux,n=Bx){const i=e*Math.pow(n,t),r=Math.round(Wx*i*(Math.random()-.5)*2);return Math.min($x,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class qn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Sx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gx(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qx(t){return t===ns?void 0:t}function Gx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Hx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const Zx={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},Qx=Ae.INFO,Yx={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},Xx=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Yx[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class id{constructor(e){this.name=e,this._logLevel=Qx,this._logHandler=Xx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const Jx=(t,e)=>e.some(n=>t instanceof n);let Ov,Mv;function ek(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tk(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DE=new WeakMap,mp=new WeakMap,VE=new WeakMap,af=new WeakMap,Bm=new WeakMap;function nk(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Tr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&DE.set(n,t)}).catch(()=>{}),Bm.set(e,t),e}function ik(t){if(mp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});mp.set(t,e)}let gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rk(t){gp=t(gp)}function sk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(lf(this),e,...n);return VE.set(i,e.sort?e.sort():[e]),Tr(i)}:tk().includes(t)?function(...e){return t.apply(lf(this),e),Tr(DE.get(this))}:function(...e){return Tr(t.apply(lf(this),e))}}function ok(t){return typeof t=="function"?sk(t):(t instanceof IDBTransaction&&ik(t),Jx(t,ek())?new Proxy(t,gp):t)}function Tr(t){if(t instanceof IDBRequest)return nk(t);if(af.has(t))return af.get(t);const e=ok(t);return e!==t&&(af.set(t,e),Bm.set(e,t)),e}const lf=t=>Bm.get(t);function FE(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),h=Tr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Tr(l.result),d.oldVersion,d.newVersion,Tr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const ak=["get","getKey","getAll","getAllKeys","count"],lk=["put","add","delete","clear"],uf=new Map;function Dv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=lk.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||ak.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,r?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&d.done]))[0]};return uf.set(e,o),o}rk(t=>({...t,get:(e,n,i)=>Dv(e,n)||t.get(e,n,i),has:(e,n)=>!!Dv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ck(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ck(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _p="@firebase/app",Vv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new id("@firebase/app"),hk="@firebase/app-compat",dk="@firebase/analytics-compat",fk="@firebase/analytics",pk="@firebase/app-check-compat",mk="@firebase/app-check",gk="@firebase/auth",_k="@firebase/auth-compat",vk="@firebase/database",yk="@firebase/data-connect",wk="@firebase/database-compat",Ek="@firebase/functions",Tk="@firebase/functions-compat",Ik="@firebase/installations",Pk="@firebase/installations-compat",Sk="@firebase/messaging",Ck="@firebase/messaging-compat",Ak="@firebase/performance",xk="@firebase/performance-compat",kk="@firebase/remote-config",Rk="@firebase/remote-config-compat",Lk="@firebase/storage",Nk="@firebase/storage-compat",bk="@firebase/firestore",Ok="@firebase/vertexai-preview",Mk="@firebase/firestore-compat",Dk="firebase",Vk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="[DEFAULT]",Fk={[_p]:"fire-core",[hk]:"fire-core-compat",[fk]:"fire-analytics",[dk]:"fire-analytics-compat",[mk]:"fire-app-check",[pk]:"fire-app-check-compat",[gk]:"fire-auth",[_k]:"fire-auth-compat",[vk]:"fire-rtdb",[yk]:"fire-data-connect",[wk]:"fire-rtdb-compat",[Ek]:"fire-fn",[Tk]:"fire-fn-compat",[Ik]:"fire-iid",[Pk]:"fire-iid-compat",[Sk]:"fire-fcm",[Ck]:"fire-fcm-compat",[Ak]:"fire-perf",[xk]:"fire-perf-compat",[kk]:"fire-rc",[Rk]:"fire-rc-compat",[Lk]:"fire-gcs",[Nk]:"fire-gcs-compat",[bk]:"fire-fst",[Mk]:"fire-fst-compat",[Ok]:"fire-vertex","fire-js":"fire-js",[Dk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,jk=new Map,yp=new Map;function Fv(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function li(t){const e=t.name;if(yp.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;yp.set(e,t);for(const n of Ih.values())Fv(n,t);for(const n of jk.values())Fv(n,t);return!0}function ks(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new xs("app","Firebase",zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=Vk;function jE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ir.create("bad-app-name",{appName:String(r)});if(n||(n=LE()),!n)throw Ir.create("no-options");const o=Ih.get(r);if(o){if(Wl(n,o.options)&&Wl(i,o.config))return o;throw Ir.create("duplicate-app",{appName:r})}const l=new Kx(r);for(const d of yp.values())l.addComponent(d);const h=new Uk(n,i,l);return Ih.set(r,h),h}function $m(t=vp){const e=Ih.get(t);if(!e&&t===vp&&LE())return jE();if(!e)throw Ir.create("no-app",{appName:t});return e}function An(t,e,n){var i;let r=(i=Fk[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(h.join(" "));return}li(new qn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="firebase-heartbeat-database",$k=1,Hl="firebase-heartbeat-store";let cf=null;function zE(){return cf||(cf=FE(Bk,$k,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),cf}async function Wk(t){try{const n=(await zE()).transaction(Hl),i=await n.objectStore(Hl).get(UE(t));return await n.done,i}catch(e){if(e instanceof Kn)Vi.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(n.message)}}}async function jv(t,e){try{const i=(await zE()).transaction(Hl,"readwrite");await i.objectStore(Hl).put(e,UE(t)),await i.done}catch(n){if(n instanceof Kn)Vi.warn(n.message);else{const i=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vi.warn(i.message)}}}function UE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=1024,qk=30*24*60*60*1e3;class Gk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=qk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Vi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zv(),{heartbeatsToSend:i,unsentEntries:r}=Kk(this._heartbeatsCache.heartbeats),o=Th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vi.warn(n),""}}}function zv(){return new Date().toISOString().substring(0,10)}function Kk(t,e=Hk){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),Uv(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Uv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Zk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OE()?ME().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return jv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return jv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Uv(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){li(new qn("platform-logger",e=>new uk(e),"PRIVATE")),li(new qn("heartbeat",e=>new Gk(e),"PRIVATE")),An(_p,Vv,t),An(_p,Vv,"esm2017"),An("fire-js","")}Qk("");function Wm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function BE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yk=BE,$E=new xs("auth","Firebase",BE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new id("@firebase/auth");function Xk(t,...e){Ph.logLevel<=Ae.WARN&&Ph.warn(`Auth (${na}): ${t}`,...e)}function Uc(t,...e){Ph.logLevel<=Ae.ERROR&&Ph.error(`Auth (${na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw qm(t,...e)}function $n(t,...e){return qm(t,...e)}function Hm(t,e,n){const i=Object.assign(Object.assign({},Yk()),{[e]:n});return new xs("auth","Firebase",i).create(e,{appName:t.name})}function Ni(t){return Hm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jk(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Rn(t,"argument-error"),Hm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return $E.create(t,...e)}function he(t,e,...n){if(!t)throw qm(e,...n)}function xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uc(e),new Error(e)}function Fi(t,e){t||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eR(){return Bv()==="http:"||Bv()==="https:"}function Bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eR()||bE()||"connection"in navigator)?navigator.onLine:!0}function nR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fi(n>e,"Short delay should be less than long delay!"),this.isMobile=Ax()||Rx()}get(){return tR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){Fi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new lu(3e4,6e4);function Dr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Bi(t,e,n,i,r={}){return HE(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=au(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},o);return kx()||(p.referrerPolicy="no-referrer"),WE.fetch()(qE(t,t.config.apiHost,n,h),p)})}async function HE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},iR),e);try{const r=new oR(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Tc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Tc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Tc(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Hm(t,v,p);Rn(t,v)}}catch(r){if(r instanceof Kn)throw r;Rn(t,"network-request-failed",{message:String(r)})}}async function uu(t,e,n,i,r={}){const o=await Bi(t,e,n,i,r);return"mfaPendingCredential"in o&&Rn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function qE(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Gm(t.config,r):`${t.config.apiScheme}://${r}`}function sR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i($n(this.auth,"network-request-failed")),rR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=$n(t,e,i);return r.customData._tokenResponse=n,r}function $v(t){return t!==void 0&&t.enterprise!==void 0}class aR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function lR(t,e){return Bi(t,"GET","/v2/recaptchaConfig",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e){return Bi(t,"POST","/v1/accounts:delete",e)}async function GE(t,e){return Bi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cR(t,e=!1){const n=st(t),i=await n.getIdToken(e),r=Km(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:vl(hf(r.auth_time)),issuedAtTime:vl(hf(r.iat)),expirationTime:vl(hf(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function hf(t){return Number(t)*1e3}function Km(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const r=kE(n);return r?JSON.parse(r):(Uc("Failed to decode base64 JWT payload"),null)}catch(r){return Uc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Wv(t){const e=Km(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kn&&hR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function hR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vl(this.lastLoginAt),this.creationTime=vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Wo(t,GE(n,{idToken:i}));he(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?KE(o.providerUserInfo):[],h=pR(t.providerData,l),d=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ep(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,y)}async function fR(t){const e=st(t);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pR(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function KE(t){return t.map(e=>{var{providerId:n}=e,i=Wm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(t,e){const n=await HE(t,{},async()=>{const i=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=qE(t,r,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",WE.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gR(t,e){return Bi(t,"POST","/v2/accounts:revokeToken",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await mR(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new bo;return i&&(he(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(he(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ki{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Wm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ep(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Wo(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cR(this,e)}reload(){return fR(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await Wo(this,uR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,h,d,p,v;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,E=(r=n.email)!==null&&r!==void 0?r:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,R=(p=n.createdAt)!==null&&p!==void 0?p:void 0,C=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:b,emailVerified:W,isAnonymous:Y,providerData:J,stsTokenManager:x}=n;he(b&&x,e,"internal-error");const I=bo.fromJSON(this.name,x);he(typeof b=="string",e,"internal-error"),tr(y,e.name),tr(E,e.name),he(typeof W=="boolean",e,"internal-error"),he(typeof Y=="boolean",e,"internal-error"),tr(S,e.name),tr(D,e.name),tr(V,e.name),tr(U,e.name),tr(R,e.name),tr(C,e.name);const A=new ki({uid:b,auth:e,email:E,emailVerified:W,displayName:y,isAnonymous:Y,photoURL:D,phoneNumber:S,tenantId:V,stsTokenManager:I,createdAt:R,lastLoginAt:C});return J&&Array.isArray(J)&&(A.providerData=J.map(N=>Object.assign({},N))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,n,i=!1){const r=new bo;r.updateFromServerResponse(n);const o=new ki({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Sh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];he(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?KE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new bo;h.updateFromIdToken(i);const d=new ki({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ep(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;function Ri(t){Fi(t instanceof Function,"Expected a class definition");let e=Hv.get(t);return e?(Fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZE.type="NONE";const qv=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t,e,n){return`firebase:${t}:${e}:${n}`}class Oo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Bc(this.userKey,r.apiKey,o),this.fullPersistenceKey=Bc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Oo(Ri(qv),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||Ri(qv);const l=Bc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const v=await p._get(l);if(v){const y=ki._fromJSON(e,v);p!==o&&(h=y),o=p;break}}catch{}const d=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Oo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Oo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tT(e))return"Blackberry";if(nT(e))return"Webos";if(YE(e))return"Safari";if((e.includes("chrome/")||XE(e))&&!e.includes("edge/"))return"Chrome";if(eT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function QE(t=Ft()){return/firefox\//i.test(t)}function YE(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XE(t=Ft()){return/crios\//i.test(t)}function JE(t=Ft()){return/iemobile/i.test(t)}function eT(t=Ft()){return/android/i.test(t)}function tT(t=Ft()){return/blackberry/i.test(t)}function nT(t=Ft()){return/webos/i.test(t)}function Zm(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _R(t=Ft()){var e;return Zm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vR(){return Lx()&&document.documentMode===10}function iT(t=Ft()){return Zm(t)||eT(t)||nT(t)||tT(t)||/windows phone/i.test(t)||JE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t,e=[]){let n;switch(t){case"Browser":n=Gv(Ft());break;case"Worker":n=`${Gv(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e={}){return Bi(t,"GET","/v2/passwordPolicy",Dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=6;class TR{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:ER,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kv(this),this.idTokenSubscription=new Kv(this),this.beforeStateQueue=new yR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$E,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ri(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await GE(this,{idToken:e}),i=await ki._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Ni(this));const n=e?st(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),n=new TR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await gR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ri(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Xk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vr(t){return st(t)}class Kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fx(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PR(t){rd=t}function sT(t){return rd.loadJS(t)}function SR(){return rd.recaptchaEnterpriseScript}function CR(){return rd.gapiScript}function AR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const xR="recaptcha-enterprise",kR="NO_RECAPTCHA";class RR{constructor(e){this.type=xR,this.auth=Vr(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{lR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new aR(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function r(o,l,h){const d=window.grecaptcha;$v(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(kR)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&$v(window.grecaptcha))r(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=SR();d.length!==0&&(d+=h),sT(d).then(()=>{r(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Zv(t,e,n,i=!1){const r=new RR(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Tp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Zv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Zv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e){const n=ks(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Wl(o,e??{}))return r;Rn(r,"already-initialized")}return n.initialize({options:e})}function NR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ri);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function bR(t,e,n){const i=Vr(t);he(i._canInitEmulator,i,"emulator-config-failed"),he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=oT(e),{host:l,port:h}=OR(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),MR()}function oT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OR(t){const e=oT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Qv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Qv(l)}}}function Qv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}async function DR(t,e){return Bi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){return uu(t,"POST","/v1/accounts:signInWithPassword",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}async function jR(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends Qm{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ql(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ql(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,n,"signInWithPassword",VR);case"emailLink":return FR(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,i,"signUpPassword",DR);case"emailLink":return jR(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e){return uu(t,"POST","/v1/accounts:signInWithIdp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="http://localhost";class _s extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Wm(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new _s(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Mo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Mo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mo(e,n)}buildRequest(){const e={requestUri:zR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BR(t){const e=il(rl(t)).link,n=e?il(rl(e)).deep_link_id:null,i=il(rl(t)).deep_link_id;return(i?il(rl(i)).link:null)||i||n||e||t}class Ym{constructor(e){var n,i,r,o,l,h;const d=il(rl(e)),p=(n=d.apiKey)!==null&&n!==void 0?n:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,y=UR((r=d.mode)!==null&&r!==void 0?r:null);he(p&&v&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=BR(e);try{return new Ym(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.providerId=ia.PROVIDER_ID}static credential(e,n){return ql._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ym.parseLink(n);return he(i,"argument-error"),ql._fromEmailAndCode(e,i.code,i.tenantId)}}ia.PROVIDER_ID="password";ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Xm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends cu{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Si.credential(n,i)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends cu{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends cu{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return lr.credential(n,i)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(t,e){return uu(t,"POST","/v1/accounts:signUp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await ki._fromIdTokenResponse(e,i,r),l=Yv(i);return new vs({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Yv(i);return new vs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Yv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Kn{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Ch(e,n,i,r)}}function aT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(t,o,e,i):o})}async function WR(t,e,n=!1){const i=await Wo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e,n=!1){const{auth:i}=t;if(zn(i.app))return Promise.reject(Ni(i));const r="reauthenticate";try{const o=await Wo(t,aT(i,r,e,t),n);he(o.idToken,i,"internal-error");const l=Km(o.idToken);he(l,i,"internal-error");const{sub:h}=l;return he(t.uid===h,i,"user-mismatch"),vs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Rn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(t,e,n=!1){if(zn(t.app))return Promise.reject(Ni(t));const i="signIn",r=await aT(t,i,e),o=await vs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function qR(t,e){return lT(Vr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(t){const e=Vr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GR(t,e,n){if(zn(t.app))return Promise.reject(Ni(t));const i=Vr(t),l=await Tp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$R).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&uT(t),d}),h=await vs._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function KR(t,e,n){return zn(t.app)?Promise.reject(Ni(t)):qR(st(t),ia.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&uT(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e){return Bi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=st(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Wo(i,ZR(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const h=i.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function YR(t,e,n,i){return st(t).onIdTokenChanged(e,n,i)}function XR(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function JR(t,e,n,i){return st(t).onAuthStateChanged(e,n,i)}function cT(t){return st(t).signOut()}const Ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=1e3,t1=10;class dT extends hT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);vR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,t1):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},e1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dT.type="LOCAL";const n1=dT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends hT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fT.type="SESSION";const pT=fT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await i1(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=Jm("",20);r.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const E=y;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function s1(t){si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function o1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function l1(){return mT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firebaseLocalStorageDb",u1=1,xh="firebaseLocalStorage",_T="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function od(t,e){return t.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function c1(){const t=indexedDB.deleteDatabase(gT);return new hu(t).toPromise()}function Ip(){const t=indexedDB.open(gT,u1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xh,{keyPath:_T})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xh)?e(i):(i.close(),await c1(),e(await Ip()))})})}async function Xv(t,e,n){const i=od(t,!0).put({[_T]:e,value:n});return new hu(i).toPromise()}async function h1(t,e){const n=od(t,!1).get(e),i=await new hu(n).toPromise();return i===void 0?null:i.value}function Jv(t,e){const n=od(t,!0).delete(e);return new hu(n).toPromise()}const d1=800,f1=3;class vT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>f1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sd._getInstance(l1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o1(),!this.activeServiceWorker)return;this.sender=new r1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ip();return await Xv(e,Ah,"1"),await Jv(e,Ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>h1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=od(r,!1).getAll();return new hu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vT.type="LOCAL";const p1=vT;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e){return e?Ri(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m1(t){return lT(t.auth,new eg(t),t.bypassAuthState)}function g1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),HR(n,new eg(t),t.bypassAuthState)}async function _1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),WR(n,new eg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m1;case"linkViaPopup":case"linkViaRedirect":return _1;case"reauthViaPopup":case"reauthViaRedirect":return g1;default:Rn(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new lu(2e3,1e4);async function y1(t,e,n){if(zn(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const i=Vr(t);Jk(t,e,Xm);const r=yT(i,n);return new os(i,"signInViaPopup",e,r).executeNotNull()}class os extends wT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,os.currentPopupAction&&os.currentPopupAction.cancel(),os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v1.get())};e()}}os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="pendingRedirect",$c=new Map;class E1 extends wT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const i=await T1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T1(t,e){const n=S1(e),i=P1(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function I1(t,e){$c.set(t._key(),e)}function P1(t){return Ri(t._redirectPersistence)}function S1(t){return Bc(w1,t.config.apiKey,t.name)}async function C1(t,e,n=!1){if(zn(t.app))return Promise.reject(Ni(t));const i=Vr(t),r=yT(i,e),l=await new E1(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=10*60*1e3;class x1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!ET(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError($n(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A1&&this.cachedEventUids.clear(),this.cachedEventUids.has(ey(e))}saveEventToCache(e){this.cachedEventUids.add(ey(e)),this.lastProcessedEventTime=Date.now()}}function ey(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ET({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ET(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(t,e={}){return Bi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N1=/^https?/;async function b1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await R1(t);for(const n of e)try{if(O1(n))return}catch{}Rn(t,"unauthorized-domain")}function O1(t){const e=wp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!N1.test(n))return!1;if(L1.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new lu(3e4,6e4);function ty(){const t=si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function D1(t){return new Promise((e,n)=>{var i,r,o;function l(){ty(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ty(),n($n(t,"network-request-failed"))},timeout:M1.get()})}if(!((r=(i=si().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=si().gapi)===null||o===void 0)&&o.load)l();else{const h=AR("iframefcb");return si()[h]=()=>{gapi.load?l():n($n(t,"network-request-failed"))},sT(`${CR()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function V1(t){return Wc=Wc||D1(t),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new lu(5e3,15e3),j1="__/auth/iframe",z1="emulator/auth/iframe",U1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $1(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gm(e,z1):`https://${t.config.authDomain}/${j1}`,i={apiKey:e.apiKey,appName:t.name,v:na},r=B1.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${au(i).slice(1)}`}async function W1(t){const e=await V1(t),n=si().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:$1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U1,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=$n(t,"network-request-failed"),h=si().setTimeout(()=>{o(l)},F1.get());function d(){si().clearTimeout(h),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q1=500,G1=600,K1="_blank",Z1="http://localhost";class ny{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q1(t,e,n,i=q1,r=G1){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},H1),{width:i.toString(),height:r.toString(),top:o,left:l}),p=Ft().toLowerCase();n&&(h=XE(p)?K1:n),QE(p)&&(e=e||Z1,d.scrollbars="yes");const v=Object.entries(d).reduce((E,[S,D])=>`${E}${S}=${D},`,"");if(_R(p)&&h!=="_self")return Y1(e||"",h),new ny(null);const y=window.open(e||"",h,v);he(y,t,"popup-blocked");try{y.focus()}catch{}return new ny(y)}function Y1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="__/auth/handler",J1="emulator/auth/handler",eL=encodeURIComponent("fac");async function iy(t,e,n,i,r,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:na,eventId:r};if(e instanceof Xm){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Vx(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,y]of Object.entries({}))l[v]=y}if(e instanceof cu){const v=e.getScopes().filter(y=>y!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),p=d?`#${eL}=${encodeURIComponent(d)}`:"";return`${tL(t)}?${au(h).slice(1)}${p}`}function tL({config:t}){return t.emulator?Gm(t,J1):`https://${t.authDomain}/${X1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="webStorageSupport";class nL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pT,this._completeRedirectFn=C1,this._overrideRedirectResult=I1}async _openPopup(e,n,i,r){var o;Fi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await iy(e,n,i,wp(),r);return Q1(e,l,Jm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await iy(e,n,i,wp(),r);return s1(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Fi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await W1(e),i=new x1(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(df,{type:df},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[df];l!==void 0&&n(!!l),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=b1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iT()||YE()||Zm()}}const iL=nL;var ry="@firebase/auth",sy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oL(t){li(new qn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;he(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rT(t)},p=new IR(i,r,o,d);return NR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),li(new qn("auth-internal",e=>{const n=Vr(e.getProvider("auth").getImmediate());return(i=>new rL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),An(ry,sy,sL(t)),An(ry,sy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=5*60,lL=NE("authIdTokenMaxAge")||aL;let oy=null;const uL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>lL)return;const r=n==null?void 0:n.token;oy!==r&&(oy=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function cL(t=$m()){const e=ks(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LR(t,{popupRedirectResolver:iL,persistence:[p1,n1,pT]}),i=NE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=uL(o.toString());XR(n,l,()=>l(n.currentUser)),YR(n,h=>l(h))}}const r=RE("auth");return r&&bR(n,`http://${r}`),n}function hL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}PR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=$n("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",hL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oL("Browser");var dL="firebase",fL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An(dL,fL,"app");var ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,TT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function A(){}A.prototype=I.prototype,x.D=I.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(N,M,F){for(var O=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)O[Xe-2]=arguments[Xe];return I.prototype[M].apply(N,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,I,A){A||(A=0);var N=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)N[M]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(M=0;16>M;++M)N[M]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=x.g[0],A=x.g[1],M=x.g[2];var F=x.g[3],O=I+(F^A&(M^F))+N[0]+3614090360&4294967295;I=A+(O<<7&4294967295|O>>>25),O=F+(M^I&(A^M))+N[1]+3905402710&4294967295,F=I+(O<<12&4294967295|O>>>20),O=M+(A^F&(I^A))+N[2]+606105819&4294967295,M=F+(O<<17&4294967295|O>>>15),O=A+(I^M&(F^I))+N[3]+3250441966&4294967295,A=M+(O<<22&4294967295|O>>>10),O=I+(F^A&(M^F))+N[4]+4118548399&4294967295,I=A+(O<<7&4294967295|O>>>25),O=F+(M^I&(A^M))+N[5]+1200080426&4294967295,F=I+(O<<12&4294967295|O>>>20),O=M+(A^F&(I^A))+N[6]+2821735955&4294967295,M=F+(O<<17&4294967295|O>>>15),O=A+(I^M&(F^I))+N[7]+4249261313&4294967295,A=M+(O<<22&4294967295|O>>>10),O=I+(F^A&(M^F))+N[8]+1770035416&4294967295,I=A+(O<<7&4294967295|O>>>25),O=F+(M^I&(A^M))+N[9]+2336552879&4294967295,F=I+(O<<12&4294967295|O>>>20),O=M+(A^F&(I^A))+N[10]+4294925233&4294967295,M=F+(O<<17&4294967295|O>>>15),O=A+(I^M&(F^I))+N[11]+2304563134&4294967295,A=M+(O<<22&4294967295|O>>>10),O=I+(F^A&(M^F))+N[12]+1804603682&4294967295,I=A+(O<<7&4294967295|O>>>25),O=F+(M^I&(A^M))+N[13]+4254626195&4294967295,F=I+(O<<12&4294967295|O>>>20),O=M+(A^F&(I^A))+N[14]+2792965006&4294967295,M=F+(O<<17&4294967295|O>>>15),O=A+(I^M&(F^I))+N[15]+1236535329&4294967295,A=M+(O<<22&4294967295|O>>>10),O=I+(M^F&(A^M))+N[1]+4129170786&4294967295,I=A+(O<<5&4294967295|O>>>27),O=F+(A^M&(I^A))+N[6]+3225465664&4294967295,F=I+(O<<9&4294967295|O>>>23),O=M+(I^A&(F^I))+N[11]+643717713&4294967295,M=F+(O<<14&4294967295|O>>>18),O=A+(F^I&(M^F))+N[0]+3921069994&4294967295,A=M+(O<<20&4294967295|O>>>12),O=I+(M^F&(A^M))+N[5]+3593408605&4294967295,I=A+(O<<5&4294967295|O>>>27),O=F+(A^M&(I^A))+N[10]+38016083&4294967295,F=I+(O<<9&4294967295|O>>>23),O=M+(I^A&(F^I))+N[15]+3634488961&4294967295,M=F+(O<<14&4294967295|O>>>18),O=A+(F^I&(M^F))+N[4]+3889429448&4294967295,A=M+(O<<20&4294967295|O>>>12),O=I+(M^F&(A^M))+N[9]+568446438&4294967295,I=A+(O<<5&4294967295|O>>>27),O=F+(A^M&(I^A))+N[14]+3275163606&4294967295,F=I+(O<<9&4294967295|O>>>23),O=M+(I^A&(F^I))+N[3]+4107603335&4294967295,M=F+(O<<14&4294967295|O>>>18),O=A+(F^I&(M^F))+N[8]+1163531501&4294967295,A=M+(O<<20&4294967295|O>>>12),O=I+(M^F&(A^M))+N[13]+2850285829&4294967295,I=A+(O<<5&4294967295|O>>>27),O=F+(A^M&(I^A))+N[2]+4243563512&4294967295,F=I+(O<<9&4294967295|O>>>23),O=M+(I^A&(F^I))+N[7]+1735328473&4294967295,M=F+(O<<14&4294967295|O>>>18),O=A+(F^I&(M^F))+N[12]+2368359562&4294967295,A=M+(O<<20&4294967295|O>>>12),O=I+(A^M^F)+N[5]+4294588738&4294967295,I=A+(O<<4&4294967295|O>>>28),O=F+(I^A^M)+N[8]+2272392833&4294967295,F=I+(O<<11&4294967295|O>>>21),O=M+(F^I^A)+N[11]+1839030562&4294967295,M=F+(O<<16&4294967295|O>>>16),O=A+(M^F^I)+N[14]+4259657740&4294967295,A=M+(O<<23&4294967295|O>>>9),O=I+(A^M^F)+N[1]+2763975236&4294967295,I=A+(O<<4&4294967295|O>>>28),O=F+(I^A^M)+N[4]+1272893353&4294967295,F=I+(O<<11&4294967295|O>>>21),O=M+(F^I^A)+N[7]+4139469664&4294967295,M=F+(O<<16&4294967295|O>>>16),O=A+(M^F^I)+N[10]+3200236656&4294967295,A=M+(O<<23&4294967295|O>>>9),O=I+(A^M^F)+N[13]+681279174&4294967295,I=A+(O<<4&4294967295|O>>>28),O=F+(I^A^M)+N[0]+3936430074&4294967295,F=I+(O<<11&4294967295|O>>>21),O=M+(F^I^A)+N[3]+3572445317&4294967295,M=F+(O<<16&4294967295|O>>>16),O=A+(M^F^I)+N[6]+76029189&4294967295,A=M+(O<<23&4294967295|O>>>9),O=I+(A^M^F)+N[9]+3654602809&4294967295,I=A+(O<<4&4294967295|O>>>28),O=F+(I^A^M)+N[12]+3873151461&4294967295,F=I+(O<<11&4294967295|O>>>21),O=M+(F^I^A)+N[15]+530742520&4294967295,M=F+(O<<16&4294967295|O>>>16),O=A+(M^F^I)+N[2]+3299628645&4294967295,A=M+(O<<23&4294967295|O>>>9),O=I+(M^(A|~F))+N[0]+4096336452&4294967295,I=A+(O<<6&4294967295|O>>>26),O=F+(A^(I|~M))+N[7]+1126891415&4294967295,F=I+(O<<10&4294967295|O>>>22),O=M+(I^(F|~A))+N[14]+2878612391&4294967295,M=F+(O<<15&4294967295|O>>>17),O=A+(F^(M|~I))+N[5]+4237533241&4294967295,A=M+(O<<21&4294967295|O>>>11),O=I+(M^(A|~F))+N[12]+1700485571&4294967295,I=A+(O<<6&4294967295|O>>>26),O=F+(A^(I|~M))+N[3]+2399980690&4294967295,F=I+(O<<10&4294967295|O>>>22),O=M+(I^(F|~A))+N[10]+4293915773&4294967295,M=F+(O<<15&4294967295|O>>>17),O=A+(F^(M|~I))+N[1]+2240044497&4294967295,A=M+(O<<21&4294967295|O>>>11),O=I+(M^(A|~F))+N[8]+1873313359&4294967295,I=A+(O<<6&4294967295|O>>>26),O=F+(A^(I|~M))+N[15]+4264355552&4294967295,F=I+(O<<10&4294967295|O>>>22),O=M+(I^(F|~A))+N[6]+2734768916&4294967295,M=F+(O<<15&4294967295|O>>>17),O=A+(F^(M|~I))+N[13]+1309151649&4294967295,A=M+(O<<21&4294967295|O>>>11),O=I+(M^(A|~F))+N[4]+4149444226&4294967295,I=A+(O<<6&4294967295|O>>>26),O=F+(A^(I|~M))+N[11]+3174756917&4294967295,F=I+(O<<10&4294967295|O>>>22),O=M+(I^(F|~A))+N[2]+718787259&4294967295,M=F+(O<<15&4294967295|O>>>17),O=A+(F^(M|~I))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+F&4294967295}i.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var A=I-this.blockSize,N=this.B,M=this.h,F=0;F<I;){if(M==0)for(;F<=A;)r(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<I;)if(N[M++]=x.charCodeAt(F++),M==this.blockSize){r(this,N),M=0;break}}else for(;F<I;)if(N[M++]=x[F++],M==this.blockSize){r(this,N),M=0;break}}this.h=M,this.o+=I},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var A=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=A&255,A/=256;for(this.u(x),x=Array(16),I=A=0;4>I;++I)for(var N=0;32>N;N+=8)x[A++]=this.g[I]>>>N&255;return x};function o(x,I){var A=h;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=I(x)}function l(x,I){this.h=I;for(var A=[],N=!0,M=x.length-1;0<=M;M--){var F=x[M]|0;N&&F==I||(A[M]=F,N=!1)}this.g=A}var h={};function d(x){return-128<=x&&128>x?o(x,function(I){return new l([I|0],0>I?-1:0)}):new l([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return y;if(0>x)return U(p(-x));for(var I=[],A=1,N=0;x>=A;N++)I[N]=x/A|0,A*=4294967296;return new l(I,0)}function v(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return U(v(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(I,8)),N=y,M=0;M<x.length;M+=8){var F=Math.min(8,x.length-M),O=parseInt(x.substring(M,M+F),I);8>F?(F=p(Math.pow(I,F)),N=N.j(F).add(p(O))):(N=N.j(A),N=N.add(p(O)))}return N}var y=d(0),E=d(1),S=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-U(this).m();for(var x=0,I=1,A=0;A<this.g.length;A++){var N=this.i(A);x+=(0<=N?N:4294967296+N)*I,I*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D(this))return"0";if(V(this))return"-"+U(this).toString(x);for(var I=p(Math.pow(x,6)),A=this,N="";;){var M=W(A,I).g;A=R(A,M.j(I));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=M,D(A))return F+N;for(;6>F.length;)F="0"+F;N=F+N}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function D(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function V(x){return x.h==-1}t.l=function(x){return x=R(this,x),V(x)?-1:D(x)?0:1};function U(x){for(var I=x.g.length,A=[],N=0;N<I;N++)A[N]=~x.g[N];return new l(A,~x.h).add(E)}t.abs=function(){return V(this)?U(this):this},t.add=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],N=0,M=0;M<=I;M++){var F=N+(this.i(M)&65535)+(x.i(M)&65535),O=(F>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);N=O>>>16,F&=65535,O&=65535,A[M]=O<<16|F}return new l(A,A[A.length-1]&-2147483648?-1:0)};function R(x,I){return x.add(U(I))}t.j=function(x){if(D(this)||D(x))return y;if(V(this))return V(x)?U(this).j(U(x)):U(U(this).j(x));if(V(x))return U(this.j(U(x)));if(0>this.l(S)&&0>x.l(S))return p(this.m()*x.m());for(var I=this.g.length+x.g.length,A=[],N=0;N<2*I;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<x.g.length;M++){var F=this.i(N)>>>16,O=this.i(N)&65535,Xe=x.i(M)>>>16,ci=x.i(M)&65535;A[2*N+2*M]+=O*ci,C(A,2*N+2*M),A[2*N+2*M+1]+=F*ci,C(A,2*N+2*M+1),A[2*N+2*M+1]+=O*Xe,C(A,2*N+2*M+1),A[2*N+2*M+2]+=F*Xe,C(A,2*N+2*M+2)}for(N=0;N<I;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=I;N<2*I;N++)A[N]=0;return new l(A,0)};function C(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function b(x,I){this.g=x,this.h=I}function W(x,I){if(D(I))throw Error("division by zero");if(D(x))return new b(y,y);if(V(x))return I=W(U(x),I),new b(U(I.g),U(I.h));if(V(I))return I=W(x,U(I)),new b(U(I.g),I.h);if(30<x.g.length){if(V(x)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var A=E,N=I;0>=N.l(x);)A=Y(A),N=Y(N);var M=J(A,1),F=J(N,1);for(N=J(N,2),A=J(A,2);!D(N);){var O=F.add(N);0>=O.l(x)&&(M=M.add(A),F=O),N=J(N,1),A=J(A,1)}return I=R(x,M.j(I)),new b(M,I)}for(M=y;0<=x.l(I);){for(A=Math.max(1,Math.floor(x.m()/I.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),F=p(A),O=F.j(I);V(O)||0<O.l(x);)A-=N,F=p(A),O=F.j(I);D(F)&&(F=E),M=M.add(F),x=R(x,O)}return new b(M,x)}t.A=function(x){return W(this,x).h},t.and=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)&x.i(N);return new l(A,this.h&x.h)},t.or=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)|x.i(N);return new l(A,this.h|x.h)},t.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)^x.i(N);return new l(A,this.h^x.h)};function Y(x){for(var I=x.g.length+1,A=[],N=0;N<I;N++)A[N]=x.i(N)<<1|x.i(N-1)>>>31;return new l(A,x.h)}function J(x,I){var A=I>>5;I%=32;for(var N=x.g.length-A,M=[],F=0;F<N;F++)M[F]=0<I?x.i(F+A)>>>I|x.i(F+A+1)<<32-I:x.i(F+A);return new l(M,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,TT=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,hs=l}).apply(typeof ay<"u"?ay:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IT,sl,PT,Hc,Pp,ST,CT,AT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in _))break e;_=_[j]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var _=0,T=!1,j={next:function(){if(!T&&_<u.length){var $=_++;return{value:m($,u[$]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(u){return u||function(){return o(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function E(u,m,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:y,E.apply(null,arguments)}function S(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function D(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,j,$){for(var ee=Array(arguments.length-2),be=2;be<arguments.length;be++)ee[be-2]=arguments[be];return m.prototype[j].apply(T,ee)}}function V(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function U(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(d(T)){const j=u.length||0,$=T.length||0;u.length=j+$;for(let ee=0;ee<$;ee++)u[j+ee]=T[ee]}else u.push(T)}}class R{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function C(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function W(u){return W[" "](u),u}W[" "]=function(){};var Y=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function J(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function x(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function I(u){const m={};for(const _ in u)m[_]=u[_];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let _,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(_ in T)u[_]=T[_];for(let $=0;$<A.length;$++)_=A[$],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function F(u){h.setTimeout(()=>{throw u},0)}function O(){var u=ce;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Xe{constructor(){this.h=this.g=null}add(m,_){const T=ci.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ci=new R(()=>new dt,u=>u.reset());class dt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,q=!1,ce=new Xe,X=()=>{const u=h.Promise.resolve(void 0);jt=()=>{u.then(de)}};var de=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(_){F(_)}var m=ci;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}q=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u}();function we(u,m){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Y){e:{try{W(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}D(we,Pe);var me={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function Iu(u,m,_,T,j){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=j,this.key=++Zn,this.da=this.fa=!1}function $i(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Wi(u){this.src=u,this.g={},this.h=0}Wi.prototype.add=function(u,m,_,T,j){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ee=jr(u,m,T,j);return-1<ee?(m=u[ee],_||(m.fa=!1)):(m=new Iu(m,this.src,$,!!T,j),m.fa=_,u.push(m)),m};function hi(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],j=Array.prototype.indexOf.call(T,m,void 0),$;($=0<=j)&&Array.prototype.splice.call(T,j,1),$&&($i(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function jr(u,m,_,T){for(var j=0;j<u.length;++j){var $=u[j];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==T)return j}return-1}var la="closure_lm_"+(1e6*Math.random()|0),Ns={};function ua(u,m,_,T,j){if(Array.isArray(m)){for(var $=0;$<m.length;$++)ua(u,m[$],_,T,j);return null}return _=Cu(_),u&&u[ft]?u.K(m,_,p(T)?!!T.capture:!1,j):ca(u,m,_,!1,T,j)}function ca(u,m,_,T,j,$){if(!m)throw Error("Invalid event type");var ee=p(j)?!!j.capture:!!j,be=Ds(u);if(be||(u[la]=be=new Wi(u)),_=be.add(m,_,T,ee,$),_.proxy)return _;if(T=bs(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ne||(j=ee),j===void 0&&(j=!1),u.addEventListener(m.toString(),T,j);else if(u.attachEvent)u.attachEvent(Ms(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function bs(){function u(_){return m.call(u.src,u.listener,_)}const m=Su;return u}function Pu(u,m,_,T,j){if(Array.isArray(m))for(var $=0;$<m.length;$++)Pu(u,m[$],_,T,j);else T=p(T)?!!T.capture:!!T,_=Cu(_),u&&u[ft]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],_=jr($,_,T,j),-1<_&&($i($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ds(u))&&(m=u.g[m.toString()],u=-1,m&&(u=jr(m,_,T,j)),(_=-1<u?m[u]:null)&&Os(_))}function Os(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ft])hi(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Ms(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Ds(m))?(hi(_,u),_.h==0&&(_.src=null,m[la]=null)):$i(u)}}}function Ms(u){return u in Ns?Ns[u]:Ns[u]="on"+u}function Su(u,m){if(u.da)u=!0;else{m=new we(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&Os(u),u=_.call(T,m)}return u}function Ds(u){return u=u[la],u instanceof Wi?u:null}var ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cu(u){return typeof u=="function"?u:(u[ha]||(u[ha]=function(m){return u.handleEvent(m)}),u[ha])}function ot(){ye.call(this),this.i=new Wi(this),this.M=this,this.F=null}D(ot,ye),ot.prototype[ft]=!0,ot.prototype.removeEventListener=function(u,m,_,T){Pu(this,u,m,_,T)};function _t(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new Pe(m,u);else if(m instanceof Pe)m.target=m.target||u;else{var j=m;m=new Pe(T,u),N(m,j)}if(j=!0,_)for(var $=_.length-1;0<=$;$--){var ee=m.g=_[$];j=zr(ee,T,!0,m)&&j}if(ee=m.g=u,j=zr(ee,T,!0,m)&&j,j=zr(ee,T,!1,m)&&j,_)for($=0;$<_.length;$++)ee=m.g=_[$],j=zr(ee,T,!1,m)&&j}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)$i(_[T]);delete u.g[m],u.h--}}this.F=null},ot.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},ot.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function zr(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,$=0;$<m.length;++$){var ee=m[$];if(ee&&!ee.da&&ee.capture==_){var be=ee.listener,at=ee.ha||ee.src;ee.fa&&hi(u.i,ee),j=be.call(at,T)!==!1&&j}}return j&&!T.defaultPrevented}function Au(u,m,_){if(typeof u=="function")_&&(u=E(u,_));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function da(u){u.g=Au(()=>{u.g=null,u.i&&(u.i=!1,da(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class xu extends ye{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:da(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(u){ye.call(this),this.h=u,this.g={}}D(Ur,ye);var fa=[];function Vs(u){J(u.g,function(m,_){this.g.hasOwnProperty(_)&&Os(m)},u),u.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),Vs(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=h.JSON.stringify,Pd=h.JSON.parse,Br=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function pa(){}pa.prototype.h=null;function ku(u){return u.h||(u.h=u.i())}function ma(){}var Hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function js(){Pe.call(this,"d")}D(js,Pe);function ga(){Pe.call(this,"c")}D(ga,Pe);var di={},Ru=null;function zs(){return Ru=Ru||new ot}di.La="serverreachability";function Lu(u){Pe.call(this,di.La,u)}D(Lu,Pe);function $r(u){const m=zs();_t(m,new Lu(m))}di.STAT_EVENT="statevent";function Us(u,m){Pe.call(this,di.STAT_EVENT,u),this.stat=m}D(Us,Pe);function It(u){const m=zs();_t(m,new Us(m,u))}di.Ma="timingevent";function Nu(u,m){Pe.call(this,di.Ma,u),this.size=m}D(Nu,Pe);function Wr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Hr(){this.g=!0}Hr.prototype.xa=function(){this.g=!1};function mn(u,m,_,T,j,$){u.info(function(){if(u.g)if($)for(var ee="",be=$.split("&"),at=0;at<be.length;at++){var xe=be[at].split("=");if(1<xe.length){var Ve=xe[0];xe=xe[1];var Ge=Ve.split("_");ee=2<=Ge.length&&Ge[1]=="type"?ee+(Ve+"="+xe+"&"):ee+(Ve+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+_+`
`+ee})}function se(u,m,_,T,j,$,ee){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+_+`
`+$+" "+ee})}function fi(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ou(u,_)+(T?" "+T:"")})}function bu(u,m){u.info(function(){return"TIMEOUT: "+m})}Hr.prototype.info=function(){};function Ou(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var $=j[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<j.length;ee++)j[ee]=""}}}}return Fs(_)}catch{return m}}var qr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$s;function Ln(){}D(Ln,pa),Ln.prototype.g=function(){return new XMLHttpRequest},Ln.prototype.i=function(){return{}},$s=new Ln;function Nn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mu}function Mu(){this.i=null,this.g="",this.h=!1}var Du={},_a={};function va(u,m,_){u.L=1,u.v=_n(Je(m)),u.m=_,u.P=!0,ya(u,null)}function ya(u,m){u.F=Date.now(),Hs(u),u.A=Je(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),ju(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Mu,u.g=qu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new xu(E(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(fa[0]=j.toString()),j=fa);for(var $=0;$<j.length;$++){var ee=ua(_,j[$],T||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),$r(),mn(u.i,u.u,u.A,u.l,u.R,u.m)}Nn.prototype.ca=function(u){u=u.target;const m=this.M;m&&zt(u)==3?m.j():this.Y(u)},Nn.prototype.Y=function(u){try{if(u==this.g)e:{const Ge=zt(this.g);var m=this.g.Ba();const Xi=this.g.Z();if(!(3>Ge)&&(Ge!=3||this.g&&(this.h.h||this.g.oa()||Ma(this.g)))){this.J||Ge!=4||m==7||(m==8||0>=Xi?$r(3):$r(2)),wa(this);var _=this.g.Z();this.X=_;t:if(Vu(this)){var T=Ma(this.g);u="";var j=T.length,$=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),Gr(this);var ee="";break t}this.h.i=new h.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!($&&m==j-1)});T.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=_==200,se(this.i,this.u,this.A,this.l,this.R,Ge,_),this.o){if(this.T&&!this.K){t:{if(this.g){var be,at=this.g;if((be=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(be)){var xe=be;break t}}xe=null}if(_=xe)fi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kr(this,_);else{this.o=!1,this.s=3,It(12),pi(this),Gr(this);break e}}if(this.P){_=!0;let tt;for(;!this.J&&this.C<ee.length;)if(tt=Ws(this,ee),tt==_a){Ge==4&&(this.s=4,It(14),_=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Du){this.s=4,It(15),fi(this.i,this.l,ee,"[Invalid Chunk]"),_=!1;break}else fi(this.i,this.l,tt,null),Kr(this,tt);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||ee.length!=0||this.h.h||(this.s=1,It(16),_=!1),this.o=this.o&&_,!_)fi(this.i,this.l,ee,"[Invalid Chunked Response]"),pi(this),Gr(this);else if(0<ee.length&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.ba&&!Ve.M&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),eo(Ve),Ve.M=!0,It(11))}}else fi(this.i,this.l,ee,null),Kr(this,ee);Ge==4&&pi(this),this.o&&!this.J&&(Ge==4?Va(this.j,this):(this.o=!1,Hs(this)))}else Sd(this.g),_==400&&0<ee.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),pi(this),Gr(this)}}}catch{}finally{}};function Vu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ws(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?_a:(_=Number(m.substring(_,T)),isNaN(_)?Du:(T+=1,T+_>m.length?_a:(m=m.slice(T,T+_),u.C=T+_,m)))}Nn.prototype.cancel=function(){this.J=!0,pi(this)};function Hs(u){u.S=Date.now()+u.I,Fu(u,u.I)}function Fu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Wr(E(u.ba,u),m)}function wa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}Nn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(bu(this.i,this.A),this.L!=2&&($r(),It(17)),pi(this),this.s=2,Gr(this)):Fu(this,this.S-u)};function Gr(u){u.j.G==0||u.J||Va(u.j,u)}function pi(u){wa(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Vs(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Kr(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Se(_.h,u))){if(!u.K&&Se(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)no(_),Xs(_);else break e;Js(_),It(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=Wr(E(_.Za,_),6e3));if(1>=qi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else yi(_,11)}else if((u.K||_.g==u)&&no(_),!C(m))for(j=_.Da.g.parse(m),m=0;m<j.length;m++){let xe=j[m];if(_.T=xe[0],xe=xe[1],_.G==2)if(xe[0]=="c"){_.K=xe[1],_.ia=xe[2];const Ve=xe[3];Ve!=null&&(_.la=Ve,_.j.info("VER="+_.la));const Ge=xe[4];Ge!=null&&(_.Aa=Ge,_.j.info("SVER="+_.Aa));const Xi=xe[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(T=1.5*Xi,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const tt=u.g;if(tt){const ro=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var $=T.h;$.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Fe($,$.h),$.h=null))}if(T.D){const Xn=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xn&&(T.ya=Xn,fe(T.I,T.D,Xn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ee=u;if(T.qa=io(T,T.J?T.ia:null,T.W),ee.K){Qr(T.h,ee);var be=ee,at=T.L;at&&(be.I=at),be.B&&(wa(be),Hs(be)),T.g=ee}else Mn(T);0<_.i.length&&Yi(_)}else xe[0]!="stop"&&xe[0]!="close"||yi(_,7);else _.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?yi(_,7):Ys(_):xe[0]!="noop"&&_.l&&_.l.ta(xe),_.v=0)}}$r(4)}catch{}}var Zr=class{constructor(u,m){this.g=u,this.map=m}};function Ea(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ta(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qi(u){return u.h?1:u.g?u.g.size:0}function Se(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Fe(u,m){u.g?u.g.add(m):u.h=m}function Qr(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ea.prototype.cancel=function(){if(this.i=mi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return V(u.i)}function Gi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function Ia(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function ve(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Ia(u),T=Gi(u),j=T.length,$=0;$<j;$++)m.call(void 0,T[$],_&&_[$],u)}var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),j=null;if(0<=T){var $=u[_].substring(0,T);j=u[_].substring(T+1)}else $=u[_];m($,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function gn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gn){this.h=u.h,qs(this,u.j),this.o=u.o,this.g=u.g,gi(this,u.s),this.l=u.l;var m=u.i,_=new _i;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Qn(this,_),this.m=u.m}else u&&(m=String(u).match($e))?(this.h=!1,qs(this,m[1]||"",!0),this.o=bn(m[2]||""),this.g=bn(m[3]||"",!0),gi(this,m[4]),this.l=bn(m[5]||"",!0),Qn(this,m[6]||"",!0),this.m=bn(m[7]||"")):(this.h=!1,this.i=new _i(null,this.h))}gn.prototype.toString=function(){var u=[],m=this.j;m&&u.push(On(m,Ki,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(On(m,Ki,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(On(_,_.charAt(0)=="/"?Aa:Ca,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",On(_,xa)),u.join("")};function Je(u){return new gn(u)}function qs(u,m,_){u.j=_?bn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function gi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Qn(u,m,_){m instanceof _i?(u.i=m,vn(u.i,u.h)):(_||(m=On(m,Gs)),u.i=new _i(m,u.h))}function fe(u,m,_){u.i.set(m,_)}function _n(u){return fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function On(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Sa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Sa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ki=/[#\/\?@]/g,Ca=/[#\?:]/g,Aa=/[#\?]/g,Gs=/[#\?@]/g,xa=/#/g;function _i(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function nn(u){u.g||(u.g=new Map,u.h=0,u.i&&Pa(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=_i.prototype,t.add=function(u,m){nn(this),this.i=null,u=le(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ka(u,m){nn(u),m=le(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ks(u,m){return nn(u),m=le(u,m),u.g.has(m)}t.forEach=function(u,m){nn(this),this.g.forEach(function(_,T){_.forEach(function(j){u.call(m,j,T,this)},this)},this)},t.na=function(){nn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const j=u[T];for(let $=0;$<j.length;$++)_.push(m[T])}return _},t.V=function(u){nn(this);let m=[];if(typeof u=="string")Ks(this,u)&&(m=m.concat(this.g.get(le(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},t.set=function(u,m){return nn(this),this.i=null,u=le(this,u),Ks(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function ju(u,m,_){ka(u,m),0<_.length&&(u.i=null,u.g.set(le(u,m),V(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const $=encodeURIComponent(String(T)),ee=this.V(T);for(T=0;T<ee.length;T++){var j=$;ee[T]!==""&&(j+="="+encodeURIComponent(String(ee[T]))),u.push(j)}}return this.i=u.join("&")};function le(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function vn(u,m){m&&!u.j&&(nn(u),u.i=null,u.g.forEach(function(_,T){var j=T.toLowerCase();T!=j&&(ka(this,T),ju(this,j,_))},u)),u.j=m}function De(u,m){const _=new Hr;if(h.Image){const T=new Image;T.onload=S(yn,_,"TestLoadImage: loaded",!0,m,T),T.onerror=S(yn,_,"TestLoadImage: error",!1,m,T),T.onabort=S(yn,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=S(yn,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function zu(u,m){const _=new Hr,T=new AbortController,j=setTimeout(()=>{T.abort(),yn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(j),$.ok?yn(_,"TestPingServer: ok",!0,m):yn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),yn(_,"TestPingServer: error",!1,m)})}function yn(u,m,_,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(_)}catch{}}function Ra(){this.g=new Br}function La(u,m,_){const T=_||"";try{ve(u,function(j,$){let ee=j;p(j)&&(ee=Fs(j)),m.push(T+$+"="+encodeURIComponent(ee))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function wn(u){this.l=u.Ub||null,this.j=u.eb||!1}D(wn,pa),wn.prototype.g=function(){return new Zi(this.l,this.j)},wn.prototype.i=function(u){return function(){return u}}({});function Zi(u,m){ot.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Zi,ot),t=Zi.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,rn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qe(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?qe(this):rn(this),this.readyState==3&&Qi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qe(this))},t.Qa=function(u){this.g&&(this.response=u,qe(this))},t.ga=function(){this.g&&qe(this)};function qe(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rn(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function rn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Na(u){let m="";return J(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Zs(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Na(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):fe(u,m,_))}function We(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(We,ot);var Uu=/^https?$/i,ba=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$s.g(),this.v=this.o?ku(this.o):ku($s),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){Bu(this,$);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)_.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())_.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),j=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ba,m,void 0))||T||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of _)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Bu(this,$)}};function Bu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Oa(u),Qs(u)}function Oa(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),Qs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qs(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Te(this):this.bb())},t.bb=function(){Te(this)};function Te(u){if(u.h&&typeof l<"u"&&(!u.v[1]||zt(u)!=4||u.Z()!=2)){if(u.u&&zt(u)==4)Au(u.Ea,0,u);else if(_t(u,"readystatechange"),zt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=ee===0){var j=String(u.D).match($e)[1]||null;!j&&h.self&&h.self.location&&(j=h.self.location.protocol.slice(0,-1)),T=!Uu.test(j?j.toLowerCase():"")}_=T}if(_)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var $=2<zt(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Oa(u)}}finally{Qs(u)}}}}function Qs(u,m){if(u.g){qt(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||_t(u,"ready");try{_.onreadystatechange=T}catch{}}}function qt(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function zt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pd(m)}};function Ma(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Sd(u){const m={};u=(u.g&&2<=zt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(C(u[T]))continue;var _=M(u[T]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[j]||[];m[j]=$,$.push(_)}x(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function $u(u){this.Aa=0,this.i=[],this.j=new Hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,u),this.cb=vi("retryDelaySeedMs",1e4,u),this.Wa=vi("forwardChannelMaxRetries",2,u),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ea(u&&u.concurrentRequestLimit),this.Da=new Ra,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$u.prototype,t.la=8,t.G=1,t.connect=function(u,m,_,T){It(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=io(this,null,this.W),Yi(this)};function Ys(u){if(Wu(u),u.G==3){var m=u.U++,_=Je(u.I);if(fe(_,"SID",u.K),fe(_,"RID",m),fe(_,"TYPE","terminate"),Yr(u,_),m=new Nn(u,u.j,m),m.L=2,m.v=_n(Je(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.v,_=!0),_||(m.g=qu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Hs(m)}Hu(u)}function Xs(u){u.g&&(eo(u),u.g.cancel(),u.g=null)}function Wu(u){Xs(u),u.u&&(h.clearTimeout(u.u),u.u=null),no(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Yi(u){if(!Ta(u.h)&&!u.s){u.s=!0;var m=u.Ga;jt||X(),q||(jt(),q=!0),ce.add(m,u),u.B=0}}function Cd(u,m){return qi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Wr(E(u.Ga,u,m),Fa(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Nn(this,this.j,u);let $=this.o;if(this.S&&($?($=I($),N($,this.S)):$=this.S),this.m!==null||this.O||(j.H=$,$=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Da(this,j,m),_=Je(this.I),fe(_,"RID",u),fe(_,"CVER",22),this.D&&fe(_,"X-HTTP-Session-Id",this.D),Yr(this,_),$&&(this.O?m="headers="+encodeURIComponent(String(Na($)))+"&"+m:this.m&&Zs(_,this.m,$)),Fe(this.h,j),this.Ua&&fe(_,"TYPE","init"),this.P?(fe(_,"$req",m),fe(_,"SID","null"),j.T=!0,va(j,_,null)):va(j,_,m),this.G=2}}else this.G==3&&(u?sn(this,u):this.i.length==0||Ta(this.h)||sn(this))};function sn(u,m){var _;m?_=m.l:_=u.U++;const T=Je(u.I);fe(T,"SID",u.K),fe(T,"RID",_),fe(T,"AID",u.T),Yr(u,T),u.m&&u.o&&Zs(T,u.m,u.o),_=new Nn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Da(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fe(u.h,_),va(_,T,m)}function Yr(u,m){u.H&&J(u.H,function(_,T){fe(m,T,_)}),u.l&&ve({},function(_,T){fe(m,T,_)})}function Da(u,m,_){_=Math.min(u.i.length,_);var T=u.l?E(u.l.Na,u.l,u):null;e:{var j=u.i;let $=-1;for(;;){const ee=["count="+_];$==-1?0<_?($=j[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let be=!0;for(let at=0;at<_;at++){let xe=j[at].g;const Ve=j[at].map;if(xe-=$,0>xe)$=Math.max(0,j[at].g-100),be=!1;else try{La(Ve,ee,"req"+xe+"_")}catch{T&&T(Ve)}}if(be){T=ee.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function Mn(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;jt||X(),q||(jt(),q=!0),ce.add(m,u),u.v=0}}function Js(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Wr(E(u.Fa,u),Fa(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,to(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Wr(E(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Xs(this),to(this))};function eo(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function to(u){u.g=new Nn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Je(u.qa);fe(m,"RID","rpc"),fe(m,"SID",u.K),fe(m,"AID",u.T),fe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&fe(m,"TO",u.ja),fe(m,"TYPE","xmlhttp"),Yr(u,m),u.m&&u.o&&Zs(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=_n(Je(m)),_.m=null,_.P=!0,ya(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Xs(this),Js(this),It(19))};function no(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Va(u,m){var _=null;if(u.g==m){no(u),eo(u),u.g=null;var T=2}else if(Se(u.h,m))_=m.D,Qr(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;T=zs(),_t(T,new Nu(T,_)),Yi(u)}else Mn(u);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&Cd(u,m)||T==2&&Js(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),j){case 1:yi(u,5);break;case 4:yi(u,10);break;case 3:yi(u,6);break;default:yi(u,2)}}}function Fa(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function yi(u,m){if(u.j.info("Error code "+m),m==2){var _=E(u.fb,u),T=u.Xa;const j=!T;T=new gn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||qs(T,"https"),_n(T),j?De(T.toString(),_):zu(T.toString(),_)}else It(2);u.G=0,u.l&&u.l.sa(m),Hu(u),Wu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Hu(u){if(u.G=0,u.ka=[],u.l){const m=mi(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function io(u,m,_){var T=_ instanceof gn?Je(_):new gn(_);if(T.g!="")m&&(T.g=m+"."+T.g),gi(T,T.s);else{var j=h.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var $=new gn(null);T&&qs($,T),m&&($.g=m),j&&gi($,j),_&&($.l=_),T=$}return _=u.D,m=u.ya,_&&m&&fe(T,_,m),fe(T,"VER",u.la),Yr(u,T),T}function qu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new We(new wn({eb:_})):new We(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ja(){}t=ja.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xr(){}Xr.prototype.g=function(u,m){return new vt(u,m)};function vt(u,m){ot.call(this),this.g=new $u(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!C(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new En(this)}D(vt,ot),vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){Ys(this.g)},vt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Fs(u),u=_);m.i.push(new Zr(m.Ya++,u)),m.G==3&&Yi(m)},vt.prototype.N=function(){this.g.l=null,delete this.j,Ys(this.g),delete this.g,vt.aa.N.call(this)};function Yn(u){js.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}D(Yn,js);function Gu(){ga.call(this),this.status=1}D(Gu,ga);function En(u){this.g=u}D(En,ja),En.prototype.ua=function(){_t(this.g,"a")},En.prototype.ta=function(u){_t(this.g,new Yn(u))},En.prototype.sa=function(u){_t(this.g,new Gu)},En.prototype.ra=function(){_t(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,AT=function(){return new Xr},CT=function(){return zs()},ST=di,Pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,Hc=qr,Bs.COMPLETE="complete",PT=Bs,ma.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,sl=ma,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,IT=We}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const ly="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new id("@firebase/firestore");function Xa(){return ys.logLevel}function re(t,...e){if(ys.logLevel<=Ae.DEBUG){const n=e.map(tg);ys.debug(`Firestore (${ra}): ${t}`,...n)}}function ji(t,...e){if(ys.logLevel<=Ae.ERROR){const n=e.map(tg);ys.error(`Firestore (${ra}): ${t}`,...n)}}function Ho(t,...e){if(ys.logLevel<=Ae.WARN){const n=e.map(tg);ys.warn(`Firestore (${ra}): ${t}`,...n)}}function tg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+t;throw ji(e),new Error(e)}function Me(t,e){t||pe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class mL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gL{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Pr,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Pr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string"),new xT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new Ot(e)}}class _L{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vL{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new _L(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Me(this.o===void 0);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new yL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=EL(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function qo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new gt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new gt(0,0))}static max(){return new ge(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,i){n===void 0?n=0:n>e.length&&pe(),i===void 0?i=e.length-n:i>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),l=n.get(r);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Gl{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const TL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Gl{construct(e,n,i){return new Ct(e,n,i)}static isValidIdentifier(e){return TL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(o(),r++)}if(o(),l)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ue.fromString(e))}static fromName(e){return new oe(Ue.fromString(e).popFirst(5))}static empty(){return new oe(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ue(e.slice()))}}function IL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(i===1e9?new gt(n+1,0):new gt(n,i));return new xr(r,oe.empty(),e)}function PL(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new xr(ge.min(),oe.empty(),-1)}static max(){return new xr(ge.max(),oe.empty(),-1)}}function SL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==CL)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++o,l&&o===r&&n()},d=>i(d))}),l=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(v=>{l[p]=v,++h,h===o&&i(l)},v=>r(v))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function xL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ng.oe=-1;function ad(t){return t==null}function kh(t){return t===0&&1/t==-1/0}function kL(t){return typeof t=="number"&&Number.isInteger(t)&&!kh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pc(this.root,e,this.comparator,!0)}}class Pc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??St.RED,this.left=r??St.EMPTY,this.right=o??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new St(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return St.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cy(this.data.getIterator())}getIteratorFrom(e){return new cy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class cy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new ln([])}unionWith(e){let n=new xt(Ct.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LT("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const RL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(Me(!!t),typeof t=="string"){let e=0;const n=RL.exec(t);if(Me(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ws(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rg(t){const e=t.mapValue.fields.__previous_value__;return ig(e)?rg(e):e}function Kl(t){const e=kr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n,i,r,o,l,h,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p}}class Zl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc={mapValue:{}};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ig(t)?4:bL(t)?9007199254740991:NL(t)?10:11:pe()}function ui(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=kr(r.timestampValue),h=kr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ws(r.bytesValue).isEqual(ws(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return nt(r.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(r.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return nt(r.integerValue)===nt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=nt(r.doubleValue),h=nt(o.doubleValue);return l===h?kh(l)===kh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return qo(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(uy(l)!==uy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ui(l[d],h[d])))return!1;return!0}(t,e);default:return pe()}}function Ql(t,e){return(t.values||[]).find(n=>ui(n,e))!==void 0}function Go(t,e){if(t===e)return 0;const n=Es(t),i=Es(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),d=nt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return hy(t.timestampValue,e.timestampValue);case 4:return hy(Kl(t),Kl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(o,l){const h=ws(o),d=ws(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const v=Le(h[p],d[p]);if(v!==0)return v}return Le(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Le(nt(o.latitude),nt(l.latitude));return h!==0?h:Le(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,p,v;const y=o.fields||{},E=l.fields||{},S=(h=y.value)===null||h===void 0?void 0:h.arrayValue,D=(d=E.value)===null||d===void 0?void 0:d.arrayValue,V=Le(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((v=D==null?void 0:D.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:dy(S,D)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Sc.mapValue&&l===Sc.mapValue)return 0;if(o===Sc.mapValue)return 1;if(l===Sc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},v=Object.keys(p);d.sort(),v.sort();for(let y=0;y<d.length&&y<v.length;++y){const E=Le(d[y],v[y]);if(E!==0)return E;const S=Go(h[d[y]],p[v[y]]);if(S!==0)return S}return Le(d.length,v.length)}(t.mapValue,e.mapValue);default:throw pe()}}function hy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=kr(t),i=kr(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function dy(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Go(n[r],i[r]);if(o)return o}return Le(n.length,i.length)}function Ko(t){return Sp(t)}function Sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=kr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Sp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Sp(n.fields[l])}`;return r+"}"}(t.mapValue):pe()}function fy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cp(t){return!!t&&"integerValue"in t}function sg(t){return!!t&&"arrayValue"in t}function py(t){return!!t&&"nullValue"in t}function my(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qc(t){return!!t&&"mapValue"in t}function NL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=yl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(n)}setAll(e){let n=Ct.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=yl(l):r.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];qc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Rs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Qt(yl(this.value))}}function NT(t){const e=[];return Rs(t.fields,(n,i)=>{const r=new Ct([n]);if(qc(i)){const o=NT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,i,r,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Dt(e,0,ge.min(),ge.min(),ge.min(),Qt.empty(),0)}static newFoundDocument(e,n,i,r){return new Dt(e,1,n,ge.min(),i,r,0)}static newNoDocument(e,n){return new Dt(e,2,n,ge.min(),ge.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ge.min(),ge.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function gy(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=Go(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function _y(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n="asc"){this.field=e,this.dir=n}}function OL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{}class ht extends bT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new DL(e,n,i):n==="array-contains"?new jL(e,i):n==="in"?new zL(e,i):n==="not-in"?new UL(e,i):n==="array-contains-any"?new BL(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new VL(e,i):new FL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Go(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends bT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gn(e,n)}matches(e){return OT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function OT(t){return t.op==="and"}function MT(t){return ML(t)&&OT(t)}function ML(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function Ap(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Ko(t.value);if(MT(t))return t.filters.map(e=>Ap(e)).join(",");{const e=t.filters.map(n=>Ap(n)).join(",");return`${t.op}(${e})`}}function DT(t,e){return t instanceof ht?function(i,r){return r instanceof ht&&i.op===r.op&&i.field.isEqual(r.field)&&ui(i.value,r.value)}(t,e):t instanceof Gn?function(i,r){return r instanceof Gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,h)=>o&&DT(l,r.filters[h]),!0):!1}(t,e):void pe()}function VT(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Ko(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(VT).join(" ,")+"}"}(t):"Filter"}class DL extends ht{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class VL extends ht{constructor(e,n){super(e,"in",n),this.keys=FT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FL extends ht{constructor(e,n){super(e,"not-in",n),this.keys=FT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class jL extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sg(n)&&Ql(n.arrayValue,this.value)}}class zL extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class UL extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ql(this.value.arrayValue,n)}}class BL extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n=null,i=[],r=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function vy(t,e=null,n=[],i=[],r=null,o=null,l=null){return new $L(t,e,n,i,r,o,l)}function og(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ap(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ko(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ko(i)).join(",")),e.ue=n}return e.ue}function ag(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_y(t.startAt,e.startAt)&&_y(t.endAt,e.endAt)}function xp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n=null,i=[],r=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WL(t,e,n,i,r,o,l,h){return new pu(t,e,n,i,r,o,l,h)}function jT(t){return new pu(t)}function yy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zT(t){return t.collectionGroup!==null}function wl(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new xt(Ct.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Lh(o,i))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new Lh(Ct.keyField(),i))}return e.ce}function oi(t){const e=_e(t);return e.le||(e.le=HL(e,wl(t))),e.le}function HL(t,e){if(t.limitType==="F")return vy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Lh(r.field,o)});const n=t.endAt?new Rh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Rh(t.startAt.position,t.startAt.inclusive):null;return vy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function kp(t,e){const n=t.filters.concat([e]);return new pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rp(t,e,n){return new pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ld(t,e){return ag(oi(t),oi(e))&&t.limitType===e.limitType}function UT(t){return`${og(oi(t))}|lt:${t.limitType}`}function co(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>VT(r)).join(", ")}]`),ad(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ko(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ko(r)).join(",")),`Target(${i})`}(oi(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of wl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(l,h,d){const p=gy(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,wl(i),r)||i.endAt&&!function(l,h,d){const p=gy(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,wl(i),r))}(t,e)}function qL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BT(t){return(e,n)=>{let i=!1;for(const r of wl(t)){const o=GL(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function GL(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Go(d,p):pe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return RT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new Ye(oe.comparator);function zi(){return KL}const $T=new Ye(oe.comparator);function ol(...t){let e=$T;for(const n of t)e=e.insert(n.key,n);return e}function WT(t){let e=$T;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function as(){return El()}function HT(){return El()}function El(){return new sa(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZL=new Ye(oe.comparator),QL=new xt(oe.comparator);function Ce(...t){let e=QL;for(const n of t)e=e.add(n);return e}const YL=new xt(Le);function XL(){return YL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function qT(t){return{integerValue:""+t}}function JL(t,e){return kL(e)?qT(e):lg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function eN(t,e,n){return t instanceof Yl?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ig(o)&&(o=rg(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Xl?KT(t,e):t instanceof Jl?ZT(t,e):function(r,o){const l=GT(r,o),h=wy(l)+wy(r.Pe);return Cp(l)&&Cp(r.Pe)?qT(h):lg(r.serializer,h)}(t,e)}function tN(t,e,n){return t instanceof Xl?KT(t,e):t instanceof Jl?ZT(t,e):n}function GT(t,e){return t instanceof Nh?function(i){return Cp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Yl extends cd{}class Xl extends cd{constructor(e){super(),this.elements=e}}function KT(t,e){const n=QT(e);for(const i of t.elements)n.some(r=>ui(r,i))||n.push(i);return{arrayValue:{values:n}}}class Jl extends cd{constructor(e){super(),this.elements=e}}function ZT(t,e){let n=QT(e);for(const i of t.elements)n=n.filter(r=>!ui(r,i));return{arrayValue:{values:n}}}class Nh extends cd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function wy(t){return nt(t.integerValue||t.doubleValue)}function QT(t){return sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.field=e,this.transform=n}}function iN(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Xl&&r instanceof Xl||i instanceof Jl&&r instanceof Jl?qo(i.elements,r.elements,ui):i instanceof Nh&&r instanceof Nh?ui(i.Pe,r.Pe):i instanceof Yl&&r instanceof Yl}(t.transform,e.transform)}class rN{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hd{}function YT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ug(t.key,Wn.none()):new mu(t.key,t.data,Wn.none());{const n=t.data,i=Qt.empty();let r=new xt(Ct.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new Fr(t.key,i,new ln(r.toArray()),Wn.none())}}function sN(t,e,n){t instanceof mu?function(r,o,l){const h=r.value.clone(),d=Ty(r.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(r,o,l){if(!Gc(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Ty(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(XT(r)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,i){return t instanceof mu?function(o,l,h,d){if(!Gc(o.precondition,l))return h;const p=o.value.clone(),v=Iy(o.fieldTransforms,d,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Fr?function(o,l,h,d){if(!Gc(o.precondition,l))return h;const p=Iy(o.fieldTransforms,d,l),v=l.data;return v.setAll(XT(o)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,h){return Gc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function oN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=GT(i.transform,r||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(i.field,o))}return n||null}function Ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&qo(i,r,(o,l)=>iN(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mu extends hd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fr extends hd{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Ty(t,e,n){const i=new Map;Me(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,h=e.data.field(o.field);i.set(o.field,tN(l,h,n[r]))}return i}function Iy(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,eN(o,l,e))}return i}class ug extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aN extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&sN(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Tl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Tl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=HT();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(r.key)?null:h;const d=YT(l,h);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(n,i)=>Ey(n,i))&&qo(this.baseMutations,e.baseMutations,(n,i)=>Ey(n,i))}}class cg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Me(e.mutations.length===i.length);let r=function(){return ZL}();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new cg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,ke;function hN(t){switch(t){default:return pe();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function JT(t){if(t===void 0)return ji("GRPC error has no .code"),G.UNKNOWN;switch(t){case ut.OK:return G.OK;case ut.CANCELLED:return G.CANCELLED;case ut.UNKNOWN:return G.UNKNOWN;case ut.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ut.INTERNAL:return G.INTERNAL;case ut.UNAVAILABLE:return G.UNAVAILABLE;case ut.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ut.NOT_FOUND:return G.NOT_FOUND;case ut.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ut.ABORTED:return G.ABORTED;case ut.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ut.DATA_LOSS:return G.DATA_LOSS;default:return pe()}}(ke=ut||(ut={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new hs([4294967295,4294967295],0);function Py(t){const e=dN().encode(t),n=new TT;return n.update(e),new Uint8Array(n.digest())}function Sy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hs([n,i],0),new hs([r,o],0)]}class hg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new al(`Invalid padding: ${n}`);if(i<0)throw new al(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new al(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(hs.fromNumber(i)));return r.compare(fN)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Py(e),[i,r]=Sy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new hg(o,r,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=Py(e),[i,r]=Sy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new dd(ge.min(),r,new Ye(Le),zi(),Ce())}}class gu{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new gu(i,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class eI{constructor(e,n){this.targetId=e,this.me=n}}class tI{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Cy{constructor(){this.fe=0,this.ge=xy(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),i=Ce();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:pe()}}),new gu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=xy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pN{constructor(e){this.Le=e,this.Be=new Map,this.ke=zi(),this.qe=Ay(),this.Qe=new Ye(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(xp(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,Dt.newNoDocument(l,ge.min()))}else Me(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,h;try{l=ws(i).toUint8Array()}catch(d){if(d instanceof LT)return Ho("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new hg(l,r,o)}catch(d){return Ho(d instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&xp(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Dt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Ce();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const r=new dd(e,n,this.Qe,this.ke,i);return this.ke=zi(),this.qe=Ay(),this.Qe=new Ye(Le),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Cy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xt(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ay(){return new Ye(oe.comparator)}function xy(){return new Ye(oe.comparator)}const mN={asc:"ASCENDING",desc:"DESCENDING"},gN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_N={and:"AND",or:"OR"};class vN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lp(t,e){return t.useProto3Json||ad(e)?e:{value:e}}function bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yN(t,e){return bh(t,e.toTimestamp())}function ai(t){return Me(!!t),ge.fromTimestamp(function(n){const i=kr(n);return new gt(i.seconds,i.nanos)}(t))}function dg(t,e){return Np(t,e).canonicalString()}function Np(t,e){const n=function(r){return new Ue(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iI(t){const e=Ue.fromString(t);return Me(lI(e)),e}function bp(t,e){return dg(t.databaseId,e.path)}function ff(t,e){const n=iI(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(sI(n))}function rI(t,e){return dg(t.databaseId,e)}function wN(t){const e=iI(t);return e.length===4?Ue.emptyPath():sI(e)}function Op(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sI(t){return Me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ky(t,e,n){return{name:bp(t,e),fields:n.value.mapValue.fields}}function EN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(p,v){return p.useProto3Json?(Me(v===void 0||typeof v=="string"),Rt.fromBase64String(v||"")):(Me(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Rt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const v=p.code===void 0?G.UNKNOWN:JT(p.code);return new ie(v,p.message||"")}(l);n=new tI(i,r,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ff(t,i.document.name),o=ai(i.document.updateTime),l=i.document.createTime?ai(i.document.createTime):ge.min(),h=new Qt({mapValue:{fields:i.document.fields}}),d=Dt.newFoundDocument(r,o,l,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new Kc(p,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ff(t,i.document),o=i.readTime?ai(i.readTime):ge.min(),l=Dt.newNoDocument(r,o),h=i.removedTargetIds||[];n=new Kc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ff(t,i.document),o=i.removedTargetIds||[];n=new Kc([],o,r,null)}else{if(!("filter"in e))return pe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new cN(r,o),h=i.targetId;n=new eI(h,l)}}return n}function TN(t,e){let n;if(e instanceof mu)n={update:ky(t,e.key,e.value)};else if(e instanceof ug)n={delete:bp(t,e.key)};else if(e instanceof Fr)n={update:ky(t,e.key,e.data),updateMask:LN(e.fieldMask)};else{if(!(e instanceof aN))return pe();n={verify:bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Yl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Xl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Nh)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw pe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:yN(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe()}(t,e.precondition)),n}function IN(t,e){return t&&t.length>0?(Me(e!==void 0),t.map(n=>function(r,o){let l=r.updateTime?ai(r.updateTime):ai(o);return l.isEqual(ge.min())&&(l=ai(o)),new rN(l,r.transformResults||[])}(n,e))):[]}function PN(t,e){return{documents:[rI(t,e.path)]}}function SN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=rI(t,r);const o=function(p){if(p.length!==0)return aI(Gn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(v=>function(E){return{field:ho(E.field),direction:xN(E.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Lp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function CN(t){let e=wN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Me(i===1);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(y){const E=oI(y);return E instanceof Gn&&MT(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(E=>function(D){return new Lh(fo(D.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(y){let E;return E=typeof y=="object"?y.value:y,ad(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(y){const E=!!y.before,S=y.values||[];return new Rh(S,E)}(n.startAt));let p=null;return n.endAt&&(p=function(y){const E=!y.before,S=y.values||[];return new Rh(S,E)}(n.endAt)),WL(e,r,l,o,h,"F",d,p)}function AN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fo(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=fo(n.unaryFilter.field);return ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fo(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=fo(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(fo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(i=>oI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function xN(t){return mN[t]}function kN(t){return gN[t]}function RN(t){return _N[t]}function ho(t){return{fieldPath:t.canonicalString()}}function fo(t){return Ct.fromServerFormat(t.fieldPath)}function aI(t){return t instanceof ht?function(n){if(n.op==="=="){if(my(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(py(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(my(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(py(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:kN(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const i=n.getFilters().map(r=>aI(r));return i.length===1?i[0]:{compositeFilter:{op:RN(n.op),filters:i}}}(t):pe()}function LN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,i,r,o=ge.min(),l=ge.min(),h=Rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.ct=e}}function bN(t){const e=CN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.un=new MN}addToCollectionParentIndex(e,n){return this.un.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(xr.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class MN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new xt(Ue.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new xt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zo(0)}static kn(){return new Zo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.changes=new sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Tl(i.mutation,r,ln.empty(),gt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ce()){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=ol();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=as();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,r){let o=zi();const l=El(),h=function(){return El()}();return n.forEach((d,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof Fr)?o=o.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),Tl(v.mutation,p,v.mutation.getFieldMask(),gt.now())):l.set(p.key,ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,v)=>l.set(p,v)),n.forEach((p,v)=>{var y;return h.set(p,new VN(v,(y=l.get(p))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const i=El();let r=new Ye((l,h)=>l-h),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let v=i.get(d)||ln.empty();v=h.applyToLocalView(p,v),i.set(d,v);const y=(r.get(h.batchId)||Ce()).add(d);r=r.insert(h.batchId,y)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,v=d.value,y=HT();v.forEach(E=>{if(!o.has(E)){const S=YT(n.get(E),i.get(E));S!==null&&y.set(E,S),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return Z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve(as());let h=-1,d=o;return l.next(p=>Z.forEach(p,(v,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(v)?Z.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{d=d.insert(v,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ce())).next(v=>({batchId:h,changes:WT(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=ol();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=ol();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,d=>{const p=function(y,E){return new pu(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(v=>{v.forEach((y,E)=>{l=l.insert(y,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(l=>{o.forEach((d,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,Dt.newInvalidDocument(v)))});let h=ol();return l.forEach((d,p)=>{const v=o.get(d);v!==void 0&&Tl(v.mutation,p,ln.empty(),gt.now()),ud(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ai(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:bN(r.bundledQuery),readTime:ai(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.overlays=new Ye(oe.comparator),this.Ir=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=as();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=as(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ye((p,v)=>p-v);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=o.get(p.largestBatchId);v===null&&(v=as(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=as(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=r)););return Z.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new uN(n,i));let o=this.Ir.get(n);o===void 0&&(o=Ce(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.Tr=new xt(wt.Er),this.dr=new xt(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new wt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new Ue([])),i=new wt(n,e),r=new wt(n,e+1),o=[];return this.dr.forEachInRange([i,r],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Ue([])),i=new wt(n,e),r=new wt(n,e+1);let o=Ce();return this.dr.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new wt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class wt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new xt(wt.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new lN(o,n,i,r);this.mutationQueue.push(l);for(const h of r)this.br=this.br.add(new wt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new wt(n,0),r=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],l=>{const h=this.Dr(l.wr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xt(Le);return n.forEach(r=>{const o=new wt(r,0),l=new wt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new wt(new oe(o),0);let h=new xt(Le);return this.br.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(d.wr)),!0)},l),Z.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Z.forEach(n.mutations,r=>{const o=new wt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new wt(n,0),r=this.br.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.Mr=e,this.docs=function(){return new Ye(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let i=zi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Dt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=zi();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:v}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||SL(PL(v),i)<=0||(r.has(v.key)||ud(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){pe()}Or(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new WN(this)}getSize(e){return Z.resolve(this.size)}}class WN extends DN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.persistence=e,this.Nr=new sa(n=>og(n),ag),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fg,this.targetCount=0,this.kr=Zo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Kn(n),Z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ng(0),this.Kr=!1,this.Kr=!0,this.$r=new UN,this.referenceDelegate=e(this),this.Ur=new HN(this),this.indexManager=new ON,this.remoteDocumentCache=function(r){return new $N(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new NN(n),this.Gr=new jN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new BN(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new GN(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class GN extends AL{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Jr=new fg,this.Yr=null}static Zr(e){return new pg(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,i=>{const r=oe.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Z.or([()=>Z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Ce(),r=Ce();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new mg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Nx()?8:xL(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new KN;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Xa()<=Ae.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(Xa()<=Ae.DEBUG&&re("QueryEngine","Query:",co(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Xa()<=Ae.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(n))):Z.resolve())}Yi(e,n){if(yy(n))return Z.resolve(null);let i=oi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Rp(n,null,"F"),i=oi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ce(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.ts(n,h);return this.ns(n,p,l,d.readTime)?this.Yi(e,Rp(n,null,"F")):this.rs(e,p,n,d)}))})))}Zi(e,n,i,r){return yy(n)||r.isEqual(ge.min())?Z.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,r)?Z.resolve(null):(Xa()<=Ae.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),co(n)),this.rs(e,l,n,IL(r,-1)).next(h=>h))})}ts(e,n){let i=new xt(BT(e));return n.forEach((r,o)=>{ud(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return Xa()<=Ae.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",co(n)),this.Ji.getDocumentsMatchingQuery(e,n,xr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ye(Le),this._s=new sa(o=>og(o),ag),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function YN(t,e,n,i){return new QN(t,e,n,i)}async function uI(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ce();for(const p of r){l.push(p.batchId);for(const v of p.mutations)d=d.add(v.key)}for(const p of o){h.push(p.batchId);for(const v of p.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:h}))})})}function XN(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,p,v){const y=p.batch,E=y.keys();let S=Z.resolve();return E.forEach(D=>{S=S.next(()=>v.getEntry(d,D)).next(V=>{const U=p.docVersions.get(D);Me(U!==null),V.version.compareTo(U)<0&&(y.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),v.addEntry(V)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ce();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function cI(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function JN(t,e){const n=_e(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((v,y)=>{const E=r.get(y);if(!E)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,y)));let S=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Rt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,i)),r=r.insert(y,S),function(V,U,R){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(E,S,v)&&h.push(n.Ur.updateTargetData(o,S))});let d=zi(),p=Ce();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(eb(o,l,e.documentUpdates).next(v=>{d=v.Ps,p=v.Is})),!i.isEqual(ge.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.os=r,o))}function eb(t,e,n){let i=Ce(),r=Ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=zi();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),d.isNoDocument()&&d.version.isEqual(ge.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):re("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Ps:l,Is:r}})}function tb(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nb(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.Ur.allocateTargetId(i).next(l=>(r=new dr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Mp(t,e,n){const i=_e(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!fu(l))throw l;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Ry(t,e,n){const i=_e(t);let r=ge.min(),o=Ce();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,v){const y=_e(d),E=y._s.get(v);return E!==void 0?Z.resolve(y.os.get(E)):y.Ur.getTargetData(p,v)}(i,l,oi(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?r:ge.min(),n?o:Ce())).next(h=>(ib(i,qL(e),h),{documents:h,Ts:o})))}function ib(t,e,n){let i=t.us.get(e)||ge.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Ly{constructor(){this.activeTargetIds=XL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rb{constructor(){this.so=new Ly,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ly,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc=null;function pf(){return Cc===null?Cc=function(){return 268435456+Math.round(2147483648*Math.random())}():Cc++,"0x"+Cc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class lb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,l){const h=pf(),d=this.xo(n,i.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${h}:`,d,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(n,d,p,r).then(v=>(re("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw Ho("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",d,"request:",r),v})}Lo(n,i,r,o,l,h){return this.Mo(n,i,r,o,l)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),r&&r.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const r=ob[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=pf();return new Promise((l,h)=>{const d=new IT;d.setWithCredentials(!0),d.listenOnce(PT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Hc.NO_ERROR:const v=d.getResponseJson();re(bt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case Hc.TIMEOUT:re(bt,`RPC '${e}' ${o} timed out`),h(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const y=d.getStatus();if(re(bt,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const D=function(U){const R=U.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(R)>=0?R:G.UNKNOWN}(S.status);h(new ie(D,S.message))}else h(new ie(G.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ie(G.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(bt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(r);re(bt,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=pf(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=AT(),h=CT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");re(bt,`Creating RPC '${e}' stream ${r}: ${v}`,d);const y=l.createWebChannel(v,d);let E=!1,S=!1;const D=new ab({Io:U=>{S?re(bt,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(E||(re(bt,`Opening RPC '${e}' stream ${r} transport.`),y.open(),E=!0),re(bt,`RPC '${e}' stream ${r} sending:`,U),y.send(U))},To:()=>y.close()}),V=(U,R,C)=>{U.listen(R,b=>{try{C(b)}catch(W){setTimeout(()=>{throw W},0)}})};return V(y,sl.EventType.OPEN,()=>{S||(re(bt,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),V(y,sl.EventType.CLOSE,()=>{S||(S=!0,re(bt,`RPC '${e}' stream ${r} transport closed`),D.So())}),V(y,sl.EventType.ERROR,U=>{S||(S=!0,Ho(bt,`RPC '${e}' stream ${r} transport errored:`,U),D.So(new ie(G.UNAVAILABLE,"The operation could not be completed")))}),V(y,sl.EventType.MESSAGE,U=>{var R;if(!S){const C=U.data[0];Me(!!C);const b=C,W=b.error||((R=b[0])===null||R===void 0?void 0:R.error);if(W){re(bt,`RPC '${e}' stream ${r} received error:`,W);const Y=W.status;let J=function(A){const N=ut[A];if(N!==void 0)return JT(N)}(Y),x=W.message;J===void 0&&(J=G.INTERNAL,x="Unknown error status: "+Y+" with message "+W.message),S=!0,D.So(new ie(J,x)),y.close()}else re(bt,`RPC '${e}' stream ${r} received:`,C),D.bo(C)}}),V(h,ST.STAT_EVENT,U=>{U.stat===Pp.PROXY?re(bt,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===Pp.NOPROXY&&re(bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){return new vN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,i,r,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(ji(n.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ie(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ub extends dI{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=EN(this.serializer,e),i=function(o){if(!("targetChange"in o))return ge.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ge.min():l.readTime?ai(l.readTime):ge.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Op(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=xp(d)?{documents:PN(o,d)}:{query:SN(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=nI(o,l.resumeToken);const p=Lp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ge.min())>0){h.readTime=bh(o,l.snapshotVersion.toTimestamp());const p=Lp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=AN(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Op(this.serializer),n.removeTarget=e,this.a_(n)}}class cb extends dI{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Me(!!e.streamToken),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=IN(e.writeResults,e.commitTime),i=ai(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Op(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>TN(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Np(n,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(G.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Np(n,i),r,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(G.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class db{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ji(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{Ls(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=_e(d);p.L_.add(4),await _u(p),p.q_.set("Unknown"),p.L_.delete(4),await pd(p)}(this))})}),this.q_=new db(i,r)}}async function pd(t){if(Ls(t))for(const e of t.B_)await e(!0)}async function _u(t){for(const e of t.B_)await e(!1)}function fI(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yg(n)?vg(n):oa(n).r_()&&_g(n,e))}function gg(t,e){const n=_e(t),i=oa(n);n.N_.delete(e),i.r_()&&pI(n,e),n.N_.size===0&&(i.r_()?i.o_():Ls(n)&&n.q_.set("Unknown"))}function _g(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).A_(e)}function pI(t,e){t.Q_.xe(e),oa(t).R_(e)}function vg(t){t.Q_=new pN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.q_.v_()}function yg(t){return Ls(t)&&!oa(t).n_()&&t.N_.size>0}function Ls(t){return _e(t).L_.size===0}function mI(t){t.Q_=void 0}async function pb(t){t.q_.set("Online")}async function mb(t){t.N_.forEach((e,n)=>{_g(t,e)})}async function gb(t,e){mI(t),yg(t)?(t.q_.M_(e),vg(t)):t.q_.set("Unknown")}async function _b(t,e,n){if(t.q_.set("Online"),e instanceof tI&&e.state===2&&e.cause)try{await async function(r,o){const l=o.cause;for(const h of o.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Oh(t,i)}else if(e instanceof Kc?t.Q_.Ke(e):e instanceof eI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const i=await cI(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.N_.get(p);v&&o.N_.set(p,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const v=o.N_.get(d);if(!v)return;o.N_.set(d,v.withResumeToken(Rt.EMPTY_BYTE_STRING,v.snapshotVersion)),pI(o,d);const y=new dr(v.target,d,p,v.sequenceNumber);_g(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await Oh(t,i)}}async function Oh(t,e,n){if(!fu(e))throw e;t.L_.add(1),await _u(t),t.q_.set("Offline"),n||(n=()=>cI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pd(t)})}function gI(t,e){return e().catch(n=>Oh(t,n,e))}async function md(t){const e=_e(t),n=Rr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vb(e);)try{const r=await tb(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,yb(e,r)}catch(r){await Oh(e,r)}_I(e)&&vI(e)}function vb(t){return Ls(t)&&t.O_.length<10}function yb(t,e){t.O_.push(e);const n=Rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function _I(t){return Ls(t)&&!Rr(t).n_()&&t.O_.length>0}function vI(t){Rr(t).start()}async function wb(t){Rr(t).p_()}async function Eb(t){const e=Rr(t);for(const n of t.O_)e.m_(n.mutations)}async function Tb(t,e,n){const i=t.O_.shift(),r=cg.from(i,e,n);await gI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await md(t)}async function Ib(t,e){e&&Rr(t).V_&&await async function(i,r){if(function(l){return hN(l)&&l!==G.ABORTED}(r.code)){const o=i.O_.shift();Rr(i).s_(),await gI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await md(i)}}(t,e),_I(t)&&vI(t)}async function by(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=Ls(n);n.L_.add(3),await _u(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pd(n)}async function Pb(t,e){const n=_e(t);e?(n.L_.delete(2),await pd(n)):e||(n.L_.add(2),await _u(n),n.q_.set("Unknown"))}function oa(t){return t.K_||(t.K_=function(n,i,r){const o=_e(n);return o.w_(),new ub(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:pb.bind(null,t),Ro:mb.bind(null,t),mo:gb.bind(null,t),d_:_b.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yg(t)?vg(t):t.q_.set("Unknown")):(await t.K_.stop(),mI(t))})),t.K_}function Rr(t){return t.U_||(t.U_=function(n,i,r){const o=_e(n);return o.w_(),new cb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wb.bind(null,t),mo:Ib.bind(null,t),f_:Eb.bind(null,t),g_:Tb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await md(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,h=new wg(e,n,l,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(t,e){if(ji("AsyncQueue",`${e}: ${t}`),fu(t))return new ie(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=ol(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Do(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.W_=new Ye(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Qo{constructor(e,n,i,r,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Qo(e,n,Do.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Cb{constructor(){this.queries=My(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=_e(n),o=r.queries;r.queries=My(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function My(){return new sa(t=>UT(t),ld)}async function Ab(t,e){const n=_e(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Sb,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=Eg(l,`Initialization of query '${co(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Tg(n)}async function xb(t,e){const n=_e(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function kb(t,e){const n=_e(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(r)&&(i=!0);l.z_=r}}i&&Tg(n)}function Rb(t,e,n){const i=_e(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Tg(t){t.Y_.forEach(e=>{e.next()})}var Dp,Dy;(Dy=Dp||(Dp={})).ea="default",Dy.Cache="cache";class Lb{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Qo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.key=e}}class wI{constructor(e){this.key=e}}class Nb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=BT(e),this.Ra=new Do(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Oy,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,y)=>{const E=r.get(v),S=ud(this.query,y)?y:null,D=!!E&&this.mutatedKeys.has(E.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let U=!1;E&&S?E.data.isEqual(S.data)?D!==V&&(i.track({type:3,doc:S}),U=!0):this.ga(E,S)||(i.track({type:2,doc:S}),U=!0,(d&&this.Aa(S,d)>0||p&&this.Aa(S,p)<0)&&(h=!0)):!E&&S?(i.track({type:0,doc:S}),U=!0):E&&!S&&(i.track({type:1,doc:E}),U=!0,(d||p)&&(h=!0)),U&&(S?(l=l.add(S),o=V?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,y)=>function(S,D){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return V(S)-V(D)}(v.type,y.type)||this.Aa(v.doc,y.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,p=d!==this.Ea;return this.Ea=d,l.length!==0||p?{snapshot:new Qo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Oy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new wI(i))}),this.da.forEach(i=>{e.has(i)||n.push(new yI(i))}),n}ba(e){this.Ta=e.Ts,this.da=Ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bb{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Ob{constructor(e){this.key=e,this.va=!1}}class Mb{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new sa(h=>UT(h),ld),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(oe.comparator),this.Na=new Map,this.La=new fg,this.Ba={},this.ka=new Map,this.qa=Zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Db(t,e,n=!0){const i=CI(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await EI(i,e,n,!0),r}async function Vb(t,e){const n=CI(t);await EI(n,e,!0,!1)}async function EI(t,e,n,i){const r=await nb(t.localStore,oi(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await Fb(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&fI(t.remoteStore,r),h}async function Fb(t,e,n,i,r){t.Ka=(y,E,S)=>async function(V,U,R,C){let b=U.view.ma(R);b.ns&&(b=await Ry(V.localStore,U.query,!1).then(({documents:x})=>U.view.ma(x,b)));const W=C&&C.targetChanges.get(U.targetId),Y=C&&C.targetMismatches.get(U.targetId)!=null,J=U.view.applyChanges(b,V.isPrimaryClient,W,Y);return Fy(V,U.targetId,J.wa),J.snapshot}(t,y,E,S);const o=await Ry(t.localStore,e,!0),l=new Nb(e,o.Ts),h=l.ma(o.documents),d=gu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=l.applyChanges(h,t.isPrimaryClient,d);Fy(t,n,p.wa);const v=new bb(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function jb(t,e,n){const i=_e(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(l=>!ld(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Mp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&gg(i.remoteStore,r.targetId),Vp(i,r.targetId)}).catch(du)):(Vp(i,r.targetId),await Mp(i.localStore,r.targetId,!0))}async function zb(t,e){const n=_e(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),gg(n.remoteStore,i.targetId))}async function Ub(t,e,n){const i=Kb(t);try{const r=await function(l,h){const d=_e(l),p=gt.now(),v=h.reduce((S,D)=>S.add(D.key),Ce());let y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=zi(),V=Ce();return d.cs.getEntries(S,v).next(U=>{D=U,D.forEach((R,C)=>{C.isValidDocument()||(V=V.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,D)).next(U=>{y=U;const R=[];for(const C of h){const b=oN(C,y.get(C.key).overlayedDocument);b!=null&&R.push(new Fr(C.key,b,NT(b.value.mapValue),Wn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,R,h)}).next(U=>{E=U;const R=U.applyToLocalDocumentSet(y,V);return d.documentOverlayCache.saveOverlays(S,U.batchId,R)})}).then(()=>({batchId:E.batchId,changes:WT(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,h,d){let p=l.Ba[l.currentUser.toKey()];p||(p=new Ye(Le)),p=p.insert(h,d),l.Ba[l.currentUser.toKey()]=p}(i,r.batchId,n),await vu(i,r.changes),await md(i.remoteStore)}catch(r){const o=Eg(r,"Failed to persist write");n.reject(o)}}async function TI(t,e){const n=_e(t);try{const i=await JN(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.Na.get(o);l&&(Me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.va=!0:r.modifiedDocuments.size>0?Me(l.va):r.removedDocuments.size>0&&(Me(l.va),l.va=!1))}),await vu(n,i,e)}catch(i){await du(i)}}function Vy(t,e,n){const i=_e(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(l,h){const d=_e(l);d.onlineState=h;let p=!1;d.queries.forEach((v,y)=>{for(const E of y.j_)E.Z_(h)&&(p=!0)}),p&&Tg(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Bb(t,e,n){const i=_e(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let l=new Ye(oe.comparator);l=l.insert(o,Dt.newNoDocument(o,ge.min()));const h=Ce().add(o),d=new dd(ge.min(),new Map,new Ye(Le),l,h);await TI(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Ig(i)}else await Mp(i.localStore,e,!1).then(()=>Vp(i,e,n)).catch(du)}async function $b(t,e){const n=_e(t),i=e.batch.batchId;try{const r=await XN(n.localStore,e);PI(n,i,null),II(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await vu(n,r)}catch(r){await du(r)}}async function Wb(t,e,n){const i=_e(t);try{const r=await function(l,h){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return d.mutationQueue.lookupMutationBatch(p,h).next(y=>(Me(y!==null),v=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>d.localDocuments.getDocuments(p,v))})}(i.localStore,e);PI(i,e,n),II(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await vu(i,r)}catch(r){await du(r)}}function II(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function PI(t,e,n){const i=_e(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Vp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||SI(t,i)})}function SI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ig(t))}function Fy(t,e,n){for(const i of n)i instanceof yI?(t.La.addReference(i.key,e),Hb(t,i)):i instanceof wI?(re("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||SI(t,i.key)):pe()}function Hb(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(i),Ig(t))}function Ig(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Ue.fromString(e)),i=t.qa.next();t.Na.set(i,new Ob(n)),t.Oa=t.Oa.insert(n,i),fI(t.remoteStore,new dr(oi(jT(n.path)),i,"TargetPurposeLimboResolution",ng.oe))}}async function vu(t,e,n){const i=_e(t),r=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(p=>{var v;if((p||n)&&i.isPrimaryClient){const y=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){r.push(p);const y=mg.Wi(d.targetId,p);o.push(y)}}))}),await Promise.all(l),i.Ca.d_(r),await async function(d,p){const v=_e(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Z.forEach(p,E=>Z.forEach(E.$i,S=>v.persistence.referenceDelegate.addReference(y,E.targetId,S)).next(()=>Z.forEach(E.Ui,S=>v.persistence.referenceDelegate.removeReference(y,E.targetId,S)))))}catch(y){if(!fu(y))throw y;re("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const E=y.targetId;if(!y.fromCache){const S=v.os.get(E),D=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(D);v.os=v.os.insert(E,V)}}}(i.localStore,o))}async function qb(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await uI(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new ie(G.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vu(n,i.hs)}}function Gb(t,e){const n=_e(t),i=n.Na.get(e);if(i&&i.va)return Ce().add(i.key);{let r=Ce();const o=n.Ma.get(e);if(!o)return r;for(const l of o){const h=n.Fa.get(l);r=r.unionWith(h.view.Va)}return r}}function CI(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bb.bind(null,e),e.Ca.d_=kb.bind(null,e.eventManager),e.Ca.$a=Rb.bind(null,e.eventManager),e}function Kb(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$b.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wb.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return YN(this.persistence,new ZN,e.initialUser,this.serializer)}Ga(e){return new qN(pg.Zr,this.serializer)}Wa(e){return new rb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class Fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Vy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qb.bind(null,this.syncEngine),await Pb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Cb}()}createDatastore(e){const n=fd(e.databaseInfo.databaseId),i=function(o){return new lb(o)}(e.databaseInfo);return function(o,l,h,d){return new hb(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,l,h){return new fb(i,r,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Vy(this.syncEngine,n,0),function(){return Ny.D()?new Ny:new sb}())}createSyncEngine(e,n){return function(r,o,l,h,d,p,v){const y=new Mb(r,o,l,h,d,p);return v&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=_e(r);re("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await _u(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fp.provider={build:()=>new Fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=kT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{re("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Eg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function gf(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await uI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Yb(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>by(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>by(e.remoteStore,r)),t._onlineComponents=e}async function Yb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await gf(t,new Mh)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await gf(t,new Mh);return t._offlineComponents}async function AI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await jy(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await jy(t,new Fp))),t._onlineComponents}function Xb(t){return AI(t).then(e=>e.syncEngine)}async function Jb(t){const e=await AI(t),n=e.eventManager;return n.onListen=Db.bind(null,e.syncEngine),n.onUnlisten=jb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Vb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zb.bind(null,e.syncEngine),n}function eO(t,e,n={}){const i=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const v=new Zb({next:E=>{v.Za(),l.enqueueAndForget(()=>xb(o,y)),E.fromCache&&d.source==="server"?p.reject(new ie(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),y=new Lb(h,v,{includeMetadataChanges:!0,_a:!0});return Ab(o,y)}(await Jb(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e,n){if(!n)throw new ie(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tO(t,e,n,i){if(e===!0&&i===!0)throw new ie(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uy(t){if(!oe.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function By(t){if(oe.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function Ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gd(t);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $y({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $y(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new pL;switch(i.type){case"firstParty":return new vL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=zy.get(n);i&&(re("ComponentProvider","Removing Datastore"),zy.delete(n),i.terminate())}(this),Promise.resolve()}}function nO(t,e,n,i={}){var r;const o=(t=Ts(t,_d))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Ot.MOCK_USER;else{h=Cx(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ie(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(p)}t._authCredentials=new mL(new xT(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class cn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Sr extends aa{constructor(e,n,i){super(e,n,jT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new oe(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function RI(t,e,...n){if(t=st(t),kI("collection","path",e),t instanceof _d){const i=Ue.fromString(e,...n);return By(i),new Sr(t,null,i)}{if(!(t instanceof cn||t instanceof Sr))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return By(i),new Sr(t.firestore,null,i)}}function Zc(t,e,...n){if(t=st(t),arguments.length===1&&(e=kT.newId()),kI("doc","path",e),t instanceof _d){const i=Ue.fromString(e,...n);return Uy(i),new cn(t,null,new oe(i))}{if(!(t instanceof cn||t instanceof Sr))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return Uy(i),new cn(t.firestore,t instanceof Sr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hI(this,"async_queue_retry"),this.Vu=()=>{const i=mf();i&&re("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fu(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw ji("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=wg.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class yu extends _d{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Wy,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wy(e),this._firestoreClient=void 0,await e}}}function iO(t,e){const n=typeof t=="object"?t:$m(),i=typeof t=="string"?t:"(default)",r=ks(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Px("firestore");o&&nO(r,...o)}return r}function LI(t){if(t._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rO(t),t._firestoreClient}function rO(t){var e,n,i;const r=t._freezeSettings(),o=function(h,d,p,v){return new LL(h,d,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,xI(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Qb(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yo(Rt.fromBase64String(e))}catch(n){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yo(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=/^__.*__$/;class oO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class NI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class Cg{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bI(this.Cu)&&sO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class aO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||fd(e)}Qu(e,n,i,r=!1){return new Cg({Cu:e,methodName:n,qu:i,path:Ct.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ag(t){const e=t._freezeSettings(),n=fd(t._databaseId);return new aO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lO(t,e,n,i,r,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);kg("Data must be an object, but it was:",l,i);const h=OI(i,l);let d,p;if(o.merge)d=new ln(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const y of o.mergeFields){const E=jp(e,y,n);if(!l.contains(E))throw new ie(G.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);DI(v,E)||v.push(E)}d=new ln(v),p=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,p=l.fieldTransforms;return new oO(new Qt(h),d,p)}class wd extends yd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}class xg extends yd{_toFieldTransform(e){return new nN(e.path,new Yl)}isEqual(e){return e instanceof xg}}function uO(t,e,n,i){const r=t.Qu(1,e,n);kg("Data must be an object, but it was:",r,i);const o=[],l=Qt.empty();Rs(i,(d,p)=>{const v=Rg(e,d,n);p=st(p);const y=r.Nu(v);if(p instanceof wd)o.push(v);else{const E=wu(p,y);E!=null&&(o.push(v),l.set(v,E))}});const h=new ln(o);return new NI(l,h,r.fieldTransforms)}function cO(t,e,n,i,r,o){const l=t.Qu(1,e,n),h=[jp(e,i,n)],d=[r];if(o.length%2!=0)throw new ie(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(jp(e,o[E])),d.push(o[E+1]);const p=[],v=Qt.empty();for(let E=h.length-1;E>=0;--E)if(!DI(p,h[E])){const S=h[E];let D=d[E];D=st(D);const V=l.Nu(S);if(D instanceof wd)p.push(S);else{const U=wu(D,V);U!=null&&(p.push(S),v.set(S,U))}}const y=new ln(p);return new NI(v,y,l.fieldTransforms)}function hO(t,e,n,i=!1){return wu(n,t.Qu(i?4:3,e))}function wu(t,e){if(MI(t=st(t)))return kg("Unsupported field value:",e,t),OI(t,e);if(t instanceof yd)return function(i,r){if(!bI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const h of i){let d=wu(h,r.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=st(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JL(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=gt.fromDate(i);return{timestampValue:bh(r.serializer,o)}}if(i instanceof gt){const o=new gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bh(r.serializer,o)}}if(i instanceof Pg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yo)return{bytesValue:nI(r.serializer,i._byteString)};if(i instanceof cn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Sg)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return lg(h.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${gd(i)}`)}(t,e)}function OI(t,e){const n={};return RT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(i,r)=>{const o=wu(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function MI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Pg||t instanceof Yo||t instanceof cn||t instanceof yd||t instanceof Sg)}function kg(t,e,n){if(!MI(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=gd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function jp(t,e,n){if((e=st(e))instanceof vd)return e._internalPath;if(typeof e=="string")return Rg(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const dO=new RegExp("[~\\*/\\[\\]]");function Rg(t,e,n){if(e.search(dO)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vd(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new ie(G.INVALID_ARGUMENT,h+t+d)}function DI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fO extends VI{data(){return super.data()}}function Lg(t,e){return typeof e=="string"?Rg(t,e):e instanceof vd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ng{}class mO extends Ng{}function gO(t,e,...n){let i=[];e instanceof Ng&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof bg).length,h=o.filter(d=>d instanceof Ed).length;if(l>1||l>0&&h>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Ed extends mO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ed(e,n,i)}_apply(e){const n=this._parse(e);return FI(e._query,n),new aa(e.firestore,e.converter,kp(e._query,n))}_parse(e){const n=Ag(e.firestore);return function(o,l,h,d,p,v,y){let E;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){qy(y,v);const S=[];for(const D of y)S.push(Hy(d,o,D));E={arrayValue:{values:S}}}else E=Hy(d,o,y)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||qy(y,v),E=hO(h,l,y,v==="in"||v==="not-in");return ht.create(p,v,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _O(t,e,n){const i=e,r=Lg("where",t);return Ed._create(r,i,n)}class bg extends Ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let l=r;const h=o.getFlattenedFilters();for(const d of h)FI(l,d),l=kp(l,d)}(e._query,n),new aa(e.firestore,e.converter,kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Hy(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&n.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!oe.isDocumentKey(i))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fy(t,new oe(i))}if(n instanceof cn)return fy(t,n._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(n)}.`)}function qy(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FI(t,e){const n=function(r,o){for(const l of r)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vO{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Rs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>nt(l.doubleValue));return new Sg(o)}convertGeoPoint(e){return new Pg(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=rg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=kr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);Me(lI(i));const r=new Zl(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return r.isEqual(n)||ji(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wO extends VI{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Lg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Qc extends wO{data(e={}){return super.data(e)}}class EO{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ac(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Qc(this._firestore,this._userDataWriter,i.key,i,new Ac(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const d=new Qc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ac(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Qc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ac(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:TO(h.type),doc:d,oldIndex:p,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}class IO extends vO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function PO(t){t=Ts(t,aa);const e=Ts(t.firestore,yu),n=LI(e),i=new IO(e);return pO(t._query),eO(n,t._query).then(r=>new EO(e,i,t,r))}function Gy(t,e,n,...i){t=Ts(t,cn);const r=Ts(t.firestore,yu),o=Ag(r);let l;return l=typeof(e=st(e))=="string"||e instanceof vd?cO(o,"updateDoc",t._key,e,n,i):uO(o,"updateDoc",t._key,e),Og(r,[l.toMutation(t._key,Wn.exists(!0))])}function SO(t){return Og(Ts(t.firestore,yu),[new ug(t._key,Wn.none())])}function CO(t,e){const n=Ts(t.firestore,yu),i=Zc(t),r=yO(t.converter,e);return Og(n,[lO(Ag(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then(()=>i)}function Og(t,e){return function(i,r){const o=new Pr;return i.asyncQueue.enqueueAndForget(async()=>Ub(await Xb(i),r,o)),o.promise}(LI(t),e)}function AO(){return new xg("serverTimestamp")}(function(e,n=!0){(function(r){ra=r})(na),li(new qn("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new yu(new gL(i.getProvider("auth-internal")),new wL(i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(p.options.projectId,v)}(l,r),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),An(ly,"4.7.3",e),An(ly,"4.7.3","esm2017")})();const jI="@firebase/installations",Mg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=1e4,UI=`w:${Mg}`,BI="FIS_v2",xO="https://firebaseinstallations.googleapis.com/v1",kO=60*60*1e3,RO="installations",LO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Is=new xs(RO,LO,NO);function $I(t){return t instanceof Kn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI({projectId:t}){return`${xO}/projects/${t}/installations`}function HI(t){return{token:t.token,requestStatus:2,expiresIn:OO(t.expiresIn),creationTime:Date.now()}}async function qI(t,e){const i=(await e.json()).error;return Is.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function GI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bO(t,{refreshToken:e}){const n=GI(t);return n.append("Authorization",MO(e)),n}async function KI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function OO(t){return Number(t.replace("s","000"))}function MO(t){return`${BI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=WI(t),r=GI(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={fid:n,authVersion:BI,appId:t.appId,sdkVersion:UI},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await KI(()=>fetch(i,h));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:HI(p.authToken)}}else throw await qI("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=/^[cdef][\w-]{21}$/,zp="";function jO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=zO(t);return FO.test(n)?n:zp}catch{return zp}}function zO(t){return VO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new Map;function YI(t,e){const n=Td(t);XI(n,e),UO(n,e)}function XI(t,e){const n=QI.get(t);if(n)for(const i of n)i(e)}function UO(t,e){const n=BO();n&&n.postMessage({key:t,fid:e}),$O()}let ls=null;function BO(){return!ls&&"BroadcastChannel"in self&&(ls=new BroadcastChannel("[Firebase] FID Change"),ls.onmessage=t=>{XI(t.data.key,t.data.fid)}),ls}function $O(){QI.size===0&&ls&&(ls.close(),ls=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="firebase-installations-database",HO=1,Ps="firebase-installations-store";let _f=null;function Dg(){return _f||(_f=FE(WO,HO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ps)}}})),_f}async function Vh(t,e){const n=Td(t),r=(await Dg()).transaction(Ps,"readwrite"),o=r.objectStore(Ps),l=await o.get(n);return await o.put(e,n),await r.done,(!l||l.fid!==e.fid)&&YI(t,e.fid),e}async function JI(t){const e=Td(t),i=(await Dg()).transaction(Ps,"readwrite");await i.objectStore(Ps).delete(e),await i.done}async function Id(t,e){const n=Td(t),r=(await Dg()).transaction(Ps,"readwrite"),o=r.objectStore(Ps),l=await o.get(n),h=e(l);return h===void 0?await o.delete(n):await o.put(h,n),await r.done,h&&(!l||l.fid!==h.fid)&&YI(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vg(t){let e;const n=await Id(t.appConfig,i=>{const r=qO(i),o=GO(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===zp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function qO(t){const e=t||{fid:jO(),registrationStatus:0};return eP(e)}function GO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Is.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=KO(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZO(t)}:{installationEntry:e}}async function KO(t,e){try{const n=await DO(t,e);return Vh(t.appConfig,n)}catch(n){throw $I(n)&&n.customData.serverCode===409?await JI(t.appConfig):await Vh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ZO(t){let e=await Ky(t.appConfig);for(;e.registrationStatus===1;)await ZI(100),e=await Ky(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Vg(t);return i||n}return e}function Ky(t){return Id(t,e=>{if(!e)throw Is.create("installation-not-found");return eP(e)})}function eP(t){return QO(t)?{fid:t.fid,registrationStatus:0}:t}function QO(t){return t.registrationStatus===1&&t.registrationTime+zI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO({appConfig:t,heartbeatServiceProvider:e},n){const i=XO(t,n),r=bO(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={installation:{sdkVersion:UI,appId:t.appId}},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await KI(()=>fetch(i,h));if(d.ok){const p=await d.json();return HI(p)}else throw await qI("Generate Auth Token",d)}function XO(t,{fid:e}){return`${WI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fg(t,e=!1){let n;const i=await Id(t.appConfig,o=>{if(!tP(o))throw Is.create("not-registered");const l=o.authToken;if(!e&&tM(l))return o;if(l.requestStatus===1)return n=JO(t,e),o;{if(!navigator.onLine)throw Is.create("app-offline");const h=iM(o);return n=eM(t,h),h}});return n?await n:i.authToken}async function JO(t,e){let n=await Zy(t.appConfig);for(;n.authToken.requestStatus===1;)await ZI(100),n=await Zy(t.appConfig);const i=n.authToken;return i.requestStatus===0?Fg(t,e):i}function Zy(t){return Id(t,e=>{if(!tP(e))throw Is.create("not-registered");const n=e.authToken;return rM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function eM(t,e){try{const n=await YO(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Vh(t.appConfig,i),n}catch(n){if($I(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await JI(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Vh(t.appConfig,i)}throw n}}function tP(t){return t!==void 0&&t.registrationStatus===2}function tM(t){return t.requestStatus===2&&!nM(t)}function nM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kO}function iM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function rM(t){return t.requestStatus===1&&t.requestTime+zI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t){const e=t,{installationEntry:n,registrationPromise:i}=await Vg(e);return i?i.catch(console.error):Fg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e=!1){const n=t;return await aM(n),(await Fg(n,e)).token}async function aM(t){const{registrationPromise:e}=await Vg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){if(!t||!t.options)throw vf("App Configuration");if(!t.name)throw vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vf(t){return Is.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="installations",uM="installations-internal",cM=t=>{const e=t.getProvider("app").getImmediate(),n=lM(e),i=ks(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},hM=t=>{const e=t.getProvider("app").getImmediate(),n=ks(e,nP).getImmediate();return{getId:()=>sM(n),getToken:r=>oM(n,r)}};function dM(){li(new qn(nP,cM,"PUBLIC")),li(new qn(uM,hM,"PRIVATE"))}dM();An(jI,Mg);An(jI,Mg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="analytics",fM="firebase_id",pM="origin",mM=60*1e3,gM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new id("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hn=new xs("analytics","Analytics",_M);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){if(!t.startsWith(jg)){const e=hn.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function iP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function wM(t,e){const n=yM("firebase-js-sdk-policy",{createScriptURL:vM}),i=document.createElement("script"),r=`${jg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function EM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function TM(t,e,n,i,r,o){const l=i[r];try{if(l)await e[l];else{const d=(await iP(n)).find(p=>p.measurementId===r);d&&await e[d.appId]}}catch(h){tn.error(h)}t("config",r,o)}async function IM(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const h=await iP(n);for(const d of l){const p=h.find(y=>y.measurementId===d),v=p&&e[p.appId];if(v)o.push(v);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){tn.error(o)}}function PM(t,e,n,i){async function r(o,...l){try{if(o==="event"){const[h,d]=l;await IM(t,e,n,h,d)}else if(o==="config"){const[h,d]=l;await TM(t,e,n,i,h,d)}else if(o==="consent"){const[h,d]=l;t("consent",h,d)}else if(o==="get"){const[h,d,p]=l;t("get",h,d,p)}else if(o==="set"){const[h]=l;t("set",h)}else t(o,...l)}catch(h){tn.error(h)}}return r}function SM(t,e,n,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=PM(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function CM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(jg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=30,xM=1e3;class kM{constructor(e={},n=xM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const rP=new kM;function RM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function LM(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:RM(i)},o=gM.replace("{app-id}",n),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let h="";try{const d=await l.json();!((e=d.error)===null||e===void 0)&&e.message&&(h=d.error.message)}catch{}throw hn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function NM(t,e=rP,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw hn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw hn.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new MM;return setTimeout(async()=>{h.abort()},mM),sP({appId:i,apiKey:r,measurementId:o},l,h,e)}async function sP(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=rP){var o;const{appId:l,measurementId:h}=t;try{await bM(i,e)}catch(d){if(h)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:h};throw d}try{const d=await LM(t);return r.deleteThrottleMetadata(l),d}catch(d){const p=d;if(!OM(p)){if(r.deleteThrottleMetadata(l),h)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:h};throw d}const v=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?bv(n,r.intervalMillis,AM):bv(n,r.intervalMillis),y={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return r.setThrottleMetadata(l,y),tn.debug(`Calling attemptFetch again in ${v} millis`),sP(t,y,i,r)}}function bM(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OM(t){if(!(t instanceof Kn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class MM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function DM(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,l=Object.assign(Object.assign({},i),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(){if(OE())try{await ME()}catch(t){return tn.warn(hn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return tn.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function FM(t,e,n,i,r,o,l){var h;const d=NM(t);d.then(S=>{n[S.measurementId]=S.appId,t.options.measurementId&&S.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>tn.error(S)),e.push(d);const p=VM().then(S=>{if(S)return i.getId()}),[v,y]=await Promise.all([d,p]);CM(o)||wM(o,v.measurementId),r("js",new Date);const E=(h=l==null?void 0:l.config)!==null&&h!==void 0?h:{};return E[pM]="firebase",E.update=!0,y!=null&&(E[fM]=y),r("config",v.measurementId,E),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.app=e}_delete(){return delete Il[this.app.options.appId],Promise.resolve()}}let Il={},Qy=[];const Yy={};let yf="dataLayer",zM="gtag",Xy,oP,Jy=!1;function UM(){const t=[];if(bE()&&t.push("This is a browser extension environment."),bx()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=hn.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}function BM(t,e,n){UM();const i=t.options.appId;if(!i)throw hn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hn.create("no-api-key");if(Il[i]!=null)throw hn.create("already-exists",{id:i});if(!Jy){EM(yf);const{wrappedGtag:o,gtagCore:l}=SM(Il,Qy,Yy,yf,zM);oP=o,Xy=l,Jy=!0}return Il[i]=FM(t,Qy,Yy,e,Xy,yf,n),new jM(t)}function $M(t=$m()){t=st(t);const e=ks(t,Fh);return e.isInitialized()?e.getImmediate():WM(t)}function WM(t,e={}){const n=ks(t,Fh);if(n.isInitialized()){const r=n.getImmediate();if(Wl(e,n.getOptions()))return r;throw hn.create("already-initialized")}return n.initialize({options:e})}function HM(t,e,n,i){t=st(t),DM(oP,Il[t.app.options.appId],e,n,i).catch(r=>tn.error(r))}const ew="@firebase/analytics",tw="0.10.8";function qM(){li(new qn(Fh,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return BM(i,r,n)},"PUBLIC")),li(new qn("analytics-internal",t,"PRIVATE")),An(ew,tw),An(ew,tw,"esm2017");function t(e){try{const n=e.getProvider(Fh).getImmediate();return{logEvent:(i,r,o)=>HM(n,i,r,o)}}catch(n){throw hn.create("interop-component-reg-failed",{reason:n})}}}qM();const GM={apiKey:"AIzaSyA-ZR_VWGeaRLHT-NX-ly4L95GiGrIMCqY",authDomain:"pilani-trails-84cef.firebaseapp.com",projectId:"pilani-trails-84cef",storageBucket:"pilani-trails-84cef.firebasestorage.app",messagingSenderId:"110096860877",appId:"1:110096860877:web:b23c4b91a6f05cf0ac0b84",measurementId:"G-CG49XPR3LQ"},zg=jE(GM),po=cL(zg),ll=iO(zg);let KM=null;try{KM=$M(zg)}catch(t){console.warn("Firebase Analytics initialization failed:",t)}const Ug=H.createContext({}),Eu=()=>H.useContext(Ug),ZM=({children:t})=>{const[e,n]=H.useState(null),[i,r]=H.useState(!0),o=async(v,y,E)=>{const S=await GR(po,v,y);return E&&await QR(S.user,{displayName:E}),S},l=(v,y)=>KR(po,v,y),h=()=>{const v=new Si;return y1(po,v)},d=()=>cT(po);H.useEffect(()=>JR(po,y=>{n(y),r(!1)}),[]);const p={currentUser:e,signup:o,login:l,signInWithGoogle:h,logout:d,loading:i};return P.jsx(Ug.Provider,{value:p,children:!i&&t})},xc=({children:t})=>{const{currentUser:e,loading:n}=Eu();return n?P.jsx("div",{children:"Loading..."}):e?t:P.jsx(rx,{to:"/login",replace:!0})},QM=()=>{const{currentUser:t}=Eu(),e=ou(),n=async()=>{try{await cT(po),e("/login")}catch(i){console.error("Logout failed:",i)}};return P.jsx("header",{className:"app-header",children:P.jsxs("nav",{className:"header-nav",children:[P.jsx("div",{className:"nav-brand",children:P.jsx(Kt,{to:"/",children:"Pilani Trails"})}),P.jsxs("ul",{className:"nav-links",children:[P.jsx("li",{children:P.jsx(Kt,{to:"/",children:"Home"})}),t?P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(Kt,{to:"/dashboard",children:"Dashboard"})}),P.jsx("li",{children:P.jsx(Kt,{to:"/propose-location",children:"Propose Location"})}),t.isAdmin&&P.jsx("li",{children:P.jsx(Kt,{to:"/admin-review",children:"Admin Review"})}),P.jsx("li",{children:P.jsx("button",{onClick:n,className:"logout-btn",children:"Logout"})})]}):P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(Kt,{to:"/login",children:"Login"})}),P.jsx("li",{children:P.jsx(Kt,{to:"/signup",children:"Signup"})})]})]})]})})};function aP(t,e){const n=H.useRef(e);H.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const YM=1;function XM(t){return Object.freeze({__version:YM,map:t})}function JM(t,e){return Object.freeze({...t,...e})}const lP=H.createContext(null),uP=lP.Provider;function Bg(){const t=H.useContext(lP);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function eD(t){function e(n,i){const{instance:r,context:o}=t(n).current;return H.useImperativeHandle(i,()=>r),n.children==null?null:Pl.createElement(uP,{value:o},n.children)}return H.forwardRef(e)}function tD(t){function e(n,i){const[r,o]=H.useState(!1),{instance:l}=t(n,o).current;H.useImperativeHandle(i,()=>l),H.useEffect(function(){r&&l.update()},[l,r,n.children]);const h=l._contentNode;return h?gE.createPortal(n.children,h):null}return H.forwardRef(e)}function nD(t){function e(n,i){const{instance:r}=t(n).current;return H.useImperativeHandle(i,()=>r),null}return H.forwardRef(e)}function cP(t,e){const n=H.useRef();H.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function $g(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function iD(t,e){return function(i,r){const o=Bg(),l=t($g(i,o),o);return aP(o.map,i.attribution),cP(l.current,i.eventHandlers),e(l.current,o,i,r),l}}var Up={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(BP,function(n){var i="1.9.4";function r(s){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)s[a]=g[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var f=c.call(arguments,2);return function(){return s.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function p(s,a,c){var f,g,w,k;return k=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(s.apply(c,arguments),setTimeout(k,a),f=!0)},w}function v(s,a,c){var f=a[1],g=a[0],w=f-g;return s===f&&c?s:((s-g)%w+w)%w+g}function y(){return!1}function E(s,a){if(a===!1)return s;var c=Math.pow(10,a===void 0?6:a);return Math.round(s*c)/c}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function D(s){return S(s).split(/\s+/)}function V(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var c in a)s.options[c]=a[c];return s.options}function U(s,a,c){var f=[];for(var g in s)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function C(s,a){return s.replace(R,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var b=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function W(s,a){for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var x=0;function I(s){var a=+new Date,c=Math.max(0,16-(a-x));return x=a+c,window.setTimeout(s,c)}var A=window.requestAnimationFrame||J("RequestAnimationFrame")||I,N=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function M(s,a,c){if(c&&A===I)s.call(a);else return A.call(window,l(s,a))}function F(s){s&&N.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:v,falseFn:y,formatNum:E,trim:S,splitWords:D,setOptions:V,getParamString:U,template:C,isArray:b,indexOf:W,emptyImageUrl:Y,requestFn:A,cancelFn:N,requestAnimFrame:M,cancelAnimFrame:F};function Xe(){}Xe.extend=function(s){var a=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return s.statics&&r(a,s.statics),s.includes&&(ci(s.includes),r.apply(null,[f].concat(s.includes))),r(f,s),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},r(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,k=f._initHooks.length;w<k;w++)f._initHooks[w].call(this)}},a},Xe.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Xe.mergeOptions=function(s){return r(this.prototype.options,s),this},Xe.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ci(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=b(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dt={on:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a);else{s=D(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],a,c)}return this},off:function(s,a,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],a);else{s=D(s);for(var g=arguments.length===1,w=0,k=s.length;w<k;w++)g?this._off(s[w]):this._off(s[w],a,c)}return this},_on:function(s,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,a,c){var f,g,w;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=y;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(s,a,c);if(k!==!1){var z=f[k];this._firingCount&&(z.fn=y,this._events[s]=f=f.slice()),f.splice(k,1)}}},fire:function(s,a,c){if(!this.listens(s,c))return this;var f=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,k=g.length;w<k;w++){var z=g[w],B=z.fn;z.once&&this.off(s,B,z.ctx),B.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(s,a,c,f){typeof s!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,g,c)!==!1)return!0;if(f){for(var k in this._eventParents)if(this._eventParents[k].listens(s,a,c,f))return!0}return!1},_listens:function(s,a,c){if(!this._events)return!1;var f=this._events[s]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a,!0);else{s=D(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],a,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var jt=Xe.extend(dt);function q(s,a,c){this.x=c?Math.round(s):s,this.y=c?Math.round(a):a}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new q(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new q(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=X(s);var a=s.x-this.x,c=s.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function X(s,a,c){return s instanceof q?s:b(s)?new q(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new q(s.x,s.y):new q(s,a,c)}function de(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}de.prototype={extend:function(s){var a,c;if(!s)return this;if(s instanceof q||typeof s[0]=="number"||"x"in s)a=c=X(s);else if(s=ye(s),a=s.min,c=s.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,c;return typeof s[0]=="number"||s instanceof q?s=X(s):s=ye(s),s instanceof de?(a=s.min,c=s.max):a=c=s,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,w=g.x>=a.x&&f.x<=c.x,k=g.y>=a.y&&f.y<=c.y;return w&&k},overlaps:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,w=g.x>a.x&&f.x<c.x,k=g.y>a.y&&f.y<c.y;return w&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*s,g=Math.abs(a.y-c.y)*s;return ye(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(s){return s?(s=ye(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ye(s,a){return!s||s instanceof de?s:new de(s,a)}function Pe(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}Pe.prototype={extend:function(s){var a=this._southWest,c=this._northEast,f,g;if(s instanceof we)f=s,g=s;else if(s instanceof Pe){if(f=s._southWest,g=s._northEast,!f||!g)return this}else return s?this.extend(me(s)||Ne(s)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(s){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*s,g=Math.abs(a.lng-c.lng)*s;return new Pe(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=me(s):s=Ne(s);var a=this._southWest,c=this._northEast,f,g;return s instanceof Pe?(f=s.getSouthWest(),g=s.getNorthEast()):f=g=s,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(s){s=Ne(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,k=g.lng>=a.lng&&f.lng<=c.lng;return w&&k},overlaps:function(s){s=Ne(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,k=g.lng>a.lng&&f.lng<c.lng;return w&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=Ne(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(s,a){return s instanceof Pe?s:new Pe(s,a)}function we(s,a,c){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(s,a){if(!s)return!1;s=me(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+E(this.lat,s)+", "+E(this.lng,s)+")"},distanceTo:function(s){return Zn.distance(this,me(s))},wrap:function(){return Zn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function me(s,a,c){return s instanceof we?s:b(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new we(s,a,c)}var ft={latLngToPoint:function(s,a){var c=this.projection.project(s),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(s,a){var c=this.scale(a),f=this.transformation.untransform(s,c);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(s),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new de(f,g)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?v(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?v(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new we(c,a,f)},wrapLatLngBounds:function(s){var a=s.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return s;var w=s.getSouthWest(),k=s.getNorthEast(),z=new we(w.lat-f,w.lng-g),B=new we(k.lat-f,k.lng-g);return new Pe(z,B)}},Zn=r({},ft,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var c=Math.PI/180,f=s.lat*c,g=a.lat*c,w=Math.sin((a.lat-s.lat)*c/2),k=Math.sin((a.lng-s.lng)*c/2),z=w*w+Math.cos(f)*Math.cos(g)*k*k,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),Iu=6378137,$i={R:Iu,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,s.lat),-c),g=Math.sin(f*a);return new q(this.R*s.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=Iu*Math.PI;return new de([-s,-s],[s,s])}()};function Wi(s,a,c,f){if(b(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=c,this._d=f}Wi.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new q((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function hi(s,a,c,f){return new Wi(s,a,c,f)}var jr=r({},Zn,{code:"EPSG:3857",projection:$i,transformation:function(){var s=.5/(Math.PI*$i.R);return hi(s,.5,-s,.5)}()}),la=r({},jr,{code:"EPSG:900913"});function Ns(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ua(s,a){var c="",f,g,w,k,z,B;for(f=0,w=s.length;f<w;f++){for(z=s[f],g=0,k=z.length;g<k;g++)B=z[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var ca=document.documentElement.style,bs="ActiveXObject"in window,Pu=bs&&!document.addEventListener,Os="msLaunchUri"in navigator&&!("documentMode"in document),Ms=mn("webkit"),Su=mn("android"),Ds=mn("android 2")||mn("android 3"),ha=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Cu=Su&&mn("Google")&&ha<537&&!("AudioNode"in window),ot=!!window.opera,_t=!Os&&mn("chrome"),zr=mn("gecko")&&!Ms&&!ot&&!bs,Au=!_t&&mn("safari"),da=mn("phantom"),xu="OTransition"in ca,Ur=navigator.platform.indexOf("Win")===0,fa=bs&&"transition"in ca,Vs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ds,Fs="MozPerspective"in ca,Pd=!window.L_DISABLE_3D&&(fa||Vs||Fs)&&!xu&&!da,Br=typeof orientation<"u"||mn("mobile"),pa=Br&&Ms,ku=Br&&Vs,ma=!window.PointerEvent&&window.MSPointerEvent,Hi=!!(window.PointerEvent||ma),js="ontouchstart"in window||!!window.TouchEvent,ga=!window.L_NO_TOUCH&&(js||Hi),di=Br&&ot,Ru=Br&&zr,zs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lu=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return s}(),$r=function(){return!!document.createElement("canvas").getContext}(),Us=!!(document.createElementNS&&Ns("svg").createSVGRect),It=!!Us&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Nu=!Us&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Wr=navigator.platform.indexOf("Mac")===0,Hr=navigator.platform.indexOf("Linux")===0;function mn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:bs,ielt9:Pu,edge:Os,webkit:Ms,android:Su,android23:Ds,androidStock:Cu,opera:ot,chrome:_t,gecko:zr,safari:Au,phantom:da,opera12:xu,win:Ur,ie3d:fa,webkit3d:Vs,gecko3d:Fs,any3d:Pd,mobile:Br,mobileWebkit:pa,mobileWebkit3d:ku,msPointer:ma,pointer:Hi,touch:ga,touchNative:js,mobileOpera:di,mobileGecko:Ru,retina:zs,passiveEvents:Lu,canvas:$r,svg:Us,vml:Nu,inlineSvg:It,mac:Wr,linux:Hr},fi=se.msPointer?"MSPointerDown":"pointerdown",bu=se.msPointer?"MSPointerMove":"pointermove",Ou=se.msPointer?"MSPointerUp":"pointerup",qr=se.msPointer?"MSPointerCancel":"pointercancel",Bs={touchstart:fi,touchmove:bu,touchend:Ou,touchcancel:qr},$s={touchstart:Hs,touchmove:Ws,touchend:Ws,touchcancel:Ws},Ln={},Nn=!1;function Mu(s,a,c){return a==="touchstart"&&Vu(),$s[a]?(c=$s[a].bind(this,c),s.addEventListener(Bs[a],c,!1),c):(console.warn("wrong event specified:",a),y)}function Du(s,a,c){if(!Bs[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(Bs[a],c,!1)}function _a(s){Ln[s.pointerId]=s}function va(s){Ln[s.pointerId]&&(Ln[s.pointerId]=s)}function ya(s){delete Ln[s.pointerId]}function Vu(){Nn||(document.addEventListener(fi,_a,!0),document.addEventListener(bu,va,!0),document.addEventListener(Ou,ya,!0),document.addEventListener(qr,ya,!0),Nn=!0)}function Ws(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Ln)a.touches.push(Ln[c]);a.changedTouches=[a],s(a)}}function Hs(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&qe(a),Ws(s,a)}function Fu(s){var a={},c,f;for(f in s)c=s[f],a[f]=c&&c.bind?c.bind(s):c;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var wa=200;function Gr(s,a){s.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var k=Na(w);if(!(k.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!k.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=wa?(f++,f===2&&a(Fu(w))):f=1,c=z}}}return s.addEventListener("click",g),{dblclick:a,simDblclick:g}}function pi(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var Kr=gi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zr=gi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ea=Zr==="webkitTransition"||Zr==="OTransition"?Zr+"End":"transitionend";function Ta(s){return typeof s=="string"?document.getElementById(s):s}function qi(s,a){var c=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);c=f?f[a]:null}return c==="auto"?null:c}function Se(s,a,c){var f=document.createElement(s);return f.className=a||"",c&&c.appendChild(f),f}function Fe(s){var a=s.parentNode;a&&a.removeChild(s)}function Qr(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function mi(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function Gi(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function Ia(s,a){if(s.classList!==void 0)return s.classList.contains(a);var c=gn(s);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ve(s,a){if(s.classList!==void 0)for(var c=D(a),f=0,g=c.length;f<g;f++)s.classList.add(c[f]);else if(!Ia(s,a)){var w=gn(s);Pa(s,(w?w+" ":"")+a)}}function $e(s,a){s.classList!==void 0?s.classList.remove(a):Pa(s,S((" "+gn(s)+" ").replace(" "+a+" "," ")))}function Pa(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function gn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Je(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&qs(s,a)}function qs(s,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):s.style.filter+=" progid:"+f+"(opacity="+a+")"}function gi(s){for(var a=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in a)return s[c];return!1}function Qn(s,a,c){var f=a||new q(0,0);s.style[Kr]=(se.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function fe(s,a){s._leaflet_pos=a,se.any3d?Qn(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function _n(s){return s._leaflet_pos||new q(0,0)}var bn,On,Sa;if("onselectstart"in document)bn=function(){le(window,"selectstart",qe)},On=function(){De(window,"selectstart",qe)};else{var Ki=gi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);bn=function(){if(Ki){var s=document.documentElement.style;Sa=s[Ki],s[Ki]="none"}},On=function(){Ki&&(document.documentElement.style[Ki]=Sa,Sa=void 0)}}function Ca(){le(window,"dragstart",qe)}function Aa(){De(window,"dragstart",qe)}var Gs,xa;function _i(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(nn(),Gs=s,xa=s.style.outlineStyle,s.style.outlineStyle="none",le(window,"keydown",nn))}function nn(){Gs&&(Gs.style.outlineStyle=xa,Gs=void 0,xa=void 0,De(window,"keydown",nn))}function ka(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ks(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var ju={__proto__:null,TRANSFORM:Kr,TRANSITION:Zr,TRANSITION_END:Ea,get:Ta,getStyle:qi,create:Se,remove:Fe,empty:Qr,toFront:mi,toBack:Gi,hasClass:Ia,addClass:ve,removeClass:$e,setClass:Pa,getClass:gn,setOpacity:Je,testProp:gi,setTransform:Qn,setPosition:fe,getPosition:_n,get disableTextSelection(){return bn},get enableTextSelection(){return On},disableImageDrag:Ca,enableImageDrag:Aa,preventOutline:_i,restoreOutline:nn,getSizedParentNode:ka,getScale:Ks};function le(s,a,c,f){if(a&&typeof a=="object")for(var g in a)Ra(s,g,a[g],c);else{a=D(a);for(var w=0,k=a.length;w<k;w++)Ra(s,a[w],c,f)}return this}var vn="_leaflet_events";function De(s,a,c,f){if(arguments.length===1)zu(s),delete s[vn];else if(a&&typeof a=="object")for(var g in a)La(s,g,a[g],c);else if(a=D(a),arguments.length===2)zu(s,function(z){return W(a,z)!==-1});else for(var w=0,k=a.length;w<k;w++)La(s,a[w],c,f);return this}function zu(s,a){for(var c in s[vn]){var f=c.split(/\d/)[0];(!a||a(f))&&La(s,f,null,null,c)}}var yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ra(s,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(s[vn]&&s[vn][g])return this;var w=function(z){return c.call(f||s,z||window.event)},k=w;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?w=Mu(s,a,w):se.touch&&a==="dblclick"?w=Gr(s,w):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(yn[a]||a,w,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(z){z=z||window.event,ba(s,z)&&k(z)},s.addEventListener(yn[a],w,!1)):s.addEventListener(a,k,!1):s.attachEvent("on"+a,w),s[vn]=s[vn]||{},s[vn][g]=w}function La(s,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=s[vn]&&s[vn][g];if(!w)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?Du(s,a,w):se.touch&&a==="dblclick"?pi(s,w):"removeEventListener"in s?s.removeEventListener(yn[a]||a,w,!1):s.detachEvent("on"+a,w),s[vn][g]=null}function wn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Zi(s){return Ra(s,"wheel",wn),this}function Qi(s){return le(s,"mousedown touchstart dblclick contextmenu",wn),s._leaflet_disable_click=!0,this}function qe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function rn(s){return qe(s),wn(s),this}function Na(s){if(s.composedPath)return s.composedPath();for(var a=[],c=s.target;c;)a.push(c),c=c.parentNode;return a}function Zs(s,a){if(!a)return new q(s.clientX,s.clientY);var c=Ks(a),f=c.boundingClientRect;return new q((s.clientX-f.left)/c.x-a.clientLeft,(s.clientY-f.top)/c.y-a.clientTop)}var We=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Uu(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/We:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ba(s,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var Bu={__proto__:null,on:le,off:De,stopPropagation:wn,disableScrollPropagation:Zi,disableClickPropagation:Qi,preventDefault:qe,stop:rn,getPropagationPath:Na,getMousePosition:Zs,getWheelDelta:Uu,isExternalTarget:ba,addListener:le,removeListener:De},Oa=jt.extend({run:function(s,a,c,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=_n(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var c=this._startPos.add(this._offset.multiplyBy(s));a&&c._round(),fe(this._el,c),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Te=jt.extend({options:{crs:jr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=V(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(me(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zr&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,Ea,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(me(s),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=r({animate:c.animate},c.zoom),c.pan=r({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,c.zoom):this._tryAnimatedPan(s,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=s instanceof q?s:this.latLngToContainerPoint(s),k=w.subtract(g).multiplyBy(1-1/f),z=this.containerPointToLatLng(g.add(k));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():Ne(s);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(s,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),k=this.project(s.getSouthWest(),g),z=this.project(s.getNorthEast(),g),B=this.unproject(k.add(z).divideBy(2).add(w),g);return{center:B,zoom:g}},fitBounds:function(s,a){if(s=Ne(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=X(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Oa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(s,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(s),w=this.getSize(),k=this._zoom;s=me(s),a=a===void 0?k:a;var z=Math.max(w.x,w.y),B=z*this.getZoomScale(k,a),K=g.distanceTo(f)||1,te=1.42,ue=te*te;function Ee(lt){var rc=lt?-1:1,VP=lt?B:z,FP=B*B-z*z+rc*ue*ue*K*K,jP=2*VP*ue*K,Ld=FP/jP,f_=Math.sqrt(Ld*Ld+1)-Ld,zP=f_<1e-9?-18:Math.log(f_);return zP}function Ut(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function yt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Tn(lt){return Ut(lt)/yt(lt)}var Gt=Ee(0);function lo(lt){return z*(yt(Gt)/yt(Gt+te*lt))}function bP(lt){return z*(yt(Gt)*Tn(Gt+te*lt)-Ut(Gt))/ue}function OP(lt){return 1-Math.pow(1-lt,1.5)}var MP=Date.now(),h_=(Ee(1)-Gt)/te,DP=c.duration?1e3*c.duration:1e3*h_*.8;function d_(){var lt=(Date.now()-MP)/DP,rc=OP(lt)*h_;lt<=1?(this._flyToFrame=M(d_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(bP(rc)/K)),k),this.getScaleZoom(z/lo(rc),k),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),d_.call(this),this},flyToBounds:function(s,a){var c=this._getBoundsCenterZoom(s,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(s){return s=Ne(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Ne(s));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(s),k=this.getPixelBounds(),z=ye([k.min.add(c),k.max.subtract(f)]),B=z.getSize();if(!z.contains(w)){this._enforcingBounds=!0;var K=w.subtract(z.getCenter()),te=z.extend(w).getSize().subtract(B);g.x+=K.x<0?-te.x:te.x,g.y+=K.y<0?-te.y:te.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,s):navigator.geolocation.getCurrentPosition(a,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,c=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,c=s.coords.longitude,f=new we(a,c),g=f.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var k=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(k,w.maxZoom):k)}var z={latlng:f,bounds:g,timestamp:s.timestamp};for(var B in s.coords)typeof s.coords[B]=="number"&&(z[B]=s.coords[B]);this.fire("locationfound",z)}},addHandler:function(s,a){if(!a)return this;var c=this[s]=new a(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Fe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Fe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=Se("div",c,a||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new Pe(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,c){s=Ne(s),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),k=s.getNorthWest(),z=s.getSouthEast(),B=this.getSize().subtract(c),K=ye(this.project(z,f),this.project(k,f)).getSize(),te=se.any3d?this.options.zoomSnap:1,ue=B.x/K.x,Ee=B.y/K.y,Ut=a?Math.max(ue,Ee):Math.min(ue,Ee);return f=this.getScaleZoom(Ut,f),te&&(f=Math.round(f/(te/100))*(te/100),f=a?Math.ceil(f/te)*te:Math.floor(f/te)*te),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var c=this._getTopLeftPoint(s,a);return new de(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(s)/c.scale(a)},getScaleZoom:function(s,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(s*c.scale(a));return isNaN(f)?1/0:f},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(me(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(s),a)},layerPointToLatLng:function(s){var a=X(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(me(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(me(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ne(s))},distance:function(s,a){return this.options.crs.distance(me(s),me(a))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(s)))},mouseEventToContainerPoint:function(s){return Zs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Ta(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ve(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=qi(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(s.markerPane,"leaflet-zoom-hide"),ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,c){fe(this._mapPane,new q(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(s,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){fe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var a=s?De:le;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=s.target||s.srcElement,k=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){k=!0;break}if(f&&f.listens(a,!0)&&(g&&!ba(w,s)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!k&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var c=s.type;c==="mousedown"&&_i(a),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,c){if(s.type==="click"){var f=r({},s);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(s,a);if(c){for(var w=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&w.push(c[k]);g=w.concat(g)}if(g.length){a==="contextmenu"&&qe(s);var z=g[0],B={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var K=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=K?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(s),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=K?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(k=0;k<g.length;k++)if(g[k].fire(a,B,!0),B.originalEvent._stopped||g[k].options.bubblingMouseEvents===!1&&W(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return _n(this._mapPane)||new q(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var c=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var c=this.getSize()._divideBy(2);return this.project(s,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(s,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return ye([this.project(s.getSouthWest(),a)._subtract(f),this.project(s.getNorthWest(),a)._subtract(f),this.project(s.getSouthEast(),a)._subtract(f),this.project(s.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,c){if(!c)return s;var f=this.project(s,a),g=this.getSize().divideBy(2),w=new de(f.subtract(g),f.add(g)),k=this._getBoundsOffset(w,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?s:this.unproject(f.add(k),a)},_limitOffset:function(s,a){if(!a)return s;var c=this.getPixelBounds(),f=new de(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(s,a,c){var f=ye(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(s.min),w=f.max.subtract(s.max),k=this._rebound(g.x,-w.x),z=this._rebound(g.y,-w.y);return new q(k,z)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),c=this.getMaxZoom(),f=se.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(a,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var c=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var s=this._proxy=Se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var c=Kr,f=this._proxy.style[c];Qn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Fe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();Qn(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(s)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(M(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qs(s,a){return new Te(s,a)}var qt=Xe.extend({options:{position:"topright"},initialize:function(s){V(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),c=this.getPosition(),f=s._controlCorners[c];return ve(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Fe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),zt=function(s){return new qt(s)};Te.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",c=this._controlContainer=Se("div",a+"control-container",this._container);function f(g,w){var k=a+g+" "+a+w;s[g+w]=Se("div",k,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Fe(this._controlCorners[s]);Fe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ma=qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(s,a,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return qt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Se("div",s),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Qi(a),Zi(a);var f=this._section=Se("section",s+"-list");c&&(this._map.on("click",this.collapse,this),le(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Se("a",s+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),le(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){qe(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Se("div",s+"-base",f),this._separator=Se("div",s+"-separator",f),this._overlaysList=Se("div",s+"-overlays",f),a.appendChild(f)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qr(this._baseLayersList),Qr(this._overlaysList),this._layerControlInputs=[];var s,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,s=s||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(d(s.target)),c=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(s,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(s){var a=document.createElement("label"),c=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(s.layer),le(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var k=s.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)a=s[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,c,f=this._map.getZoom(),g=s.length-1;g>=0;g--)a=s[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,le(s,"click",qe),this.expand();var a=this;setTimeout(function(){De(s,"click",qe),a._preventClick=!1})}}),Sd=function(s,a,c){return new Ma(s,a,c)},vi=qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",c=Se("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,c,f,g){var w=Se("a",c,f);return w.innerHTML=s,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),Qi(w),le(w,"click",rn),le(w,"click",g,this),le(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";$e(this._zoomInButton,a),$e(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ve(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ve(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vi,this.addControl(this.zoomControl))});var $u=function(s){return new vi(s)},Ys=qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",c=Se("div",a),f=this.options;return this._addScales(f,a+"-line",c),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,c){s.metric&&(this._mScale=Se("div",a,c)),s.imperial&&(this._iScale=Se("div",a,c))},_update:function(){var s=this._map,a=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/s)},_updateImperial:function(s){var a=s*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(s,a,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),c=s/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Xs=function(s){return new Ys(s)},Wu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yi=qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Wu+" ":"")+"Leaflet</a>"},initialize:function(s){V(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Se("div","leaflet-control-attribution"),Qi(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new Yi().addTo(this)});var Cd=function(s){return new Yi(s)};qt.Layers=Ma,qt.Zoom=vi,qt.Scale=Ys,qt.Attribution=Yi,zt.layers=Sd,zt.zoom=$u,zt.scale=Xs,zt.attribution=Cd;var sn=Xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sn.addTo=function(s,a){return s.addHandler(a,this),this};var Yr={Events:dt},Da=se.touch?"touchstart mousedown":"mousedown",Mn=jt.extend({options:{clickTolerance:3},initialize:function(s,a,c,f){V(this,f),this._element=s,this._dragStartTarget=a||s,this._preventOutline=c},enable:function(){this._enabled||(le(this._dragStartTarget,Da,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Da,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ia(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Mn._dragging===this&&this.finishDrag();return}if(!(Mn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Mn._dragging=this,this._preventOutline&&_i(this._element),Ca(),bn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,c=ka(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=_n(this._element),this._parentScale=Ks(c);var f=s.type==="mousedown";le(document,f?"mousemove":"touchmove",this._onMove,this),le(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,qe(s),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),fe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),Aa(),On();var a=this._moved&&this._moving;this._moving=!1,Mn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Js(s,a,c){var f,g=[1,4,2,8],w,k,z,B,K,te,ue,Ee;for(w=0,te=s.length;w<te;w++)s[w]._code=Yn(s[w],a);for(z=0;z<4;z++){for(ue=g[z],f=[],w=0,te=s.length,k=te-1;w<te;k=w++)B=s[w],K=s[k],B._code&ue?K._code&ue||(Ee=vt(K,B,ue,a,c),Ee._code=Yn(Ee,a),f.push(Ee)):(K._code&ue&&(Ee=vt(K,B,ue,a,c),Ee._code=Yn(Ee,a),f.push(Ee)),f.push(B));s=f}return s}function eo(s,a){var c,f,g,w,k,z,B,K,te;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ue=me([0,0]),Ee=Ne(s),Ut=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Ut<1700&&(ue=to(s));var yt=s.length,Tn=[];for(c=0;c<yt;c++){var Gt=me(s[c]);Tn.push(a.project(me([Gt.lat-ue.lat,Gt.lng-ue.lng])))}for(z=B=K=0,c=0,f=yt-1;c<yt;f=c++)g=Tn[c],w=Tn[f],k=g.y*w.x-w.y*g.x,B+=(g.x+w.x)*k,K+=(g.y+w.y)*k,z+=k*3;z===0?te=Tn[0]:te=[B/z,K/z];var lo=a.unproject(X(te));return me([lo.lat+ue.lat,lo.lng+ue.lng])}function to(s){for(var a=0,c=0,f=0,g=0;g<s.length;g++){var w=me(s[g]);a+=w.lat,c+=w.lng,f++}return me([a/f,c/f])}var no={__proto__:null,clipPolygon:Js,polygonCenter:eo,centroid:to};function Va(s,a){if(!a||!s.length)return s.slice();var c=a*a;return s=qu(s,c),s=Hu(s,c),s}function Fa(s,a,c){return Math.sqrt(En(s,a,c,!0))}function yi(s,a,c){return En(s,a,c)}function Hu(s,a){var c=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,io(s,g,a,0,c-1);var w,k=[];for(w=0;w<c;w++)g[w]&&k.push(s[w]);return k}function io(s,a,c,f,g){var w=0,k,z,B;for(z=f+1;z<=g-1;z++)B=En(s[z],s[f],s[g],!0),B>w&&(k=z,w=B);w>c&&(a[k]=1,io(s,a,c,f,k),io(s,a,c,k,g))}function qu(s,a){for(var c=[s[0]],f=1,g=0,w=s.length;f<w;f++)Gu(s[f],s[g])>a&&(c.push(s[f]),g=f);return g<w-1&&c.push(s[w-1]),c}var ja;function Xr(s,a,c,f,g){var w=f?ja:Yn(s,c),k=Yn(a,c),z,B,K;for(ja=k;;){if(!(w|k))return[s,a];if(w&k)return!1;z=w||k,B=vt(s,a,z,c,g),K=Yn(B,c),z===w?(s=B,w=K):(a=B,k=K)}}function vt(s,a,c,f,g){var w=a.x-s.x,k=a.y-s.y,z=f.min,B=f.max,K,te;return c&8?(K=s.x+w*(B.y-s.y)/k,te=B.y):c&4?(K=s.x+w*(z.y-s.y)/k,te=z.y):c&2?(K=B.x,te=s.y+k*(B.x-s.x)/w):c&1&&(K=z.x,te=s.y+k*(z.x-s.x)/w),new q(K,te,g)}function Yn(s,a){var c=0;return s.x<a.min.x?c|=1:s.x>a.max.x&&(c|=2),s.y<a.min.y?c|=4:s.y>a.max.y&&(c|=8),c}function Gu(s,a){var c=a.x-s.x,f=a.y-s.y;return c*c+f*f}function En(s,a,c,f){var g=a.x,w=a.y,k=c.x-g,z=c.y-w,B=k*k+z*z,K;return B>0&&(K=((s.x-g)*k+(s.y-w)*z)/B,K>1?(g=c.x,w=c.y):K>0&&(g+=k*K,w+=z*K)),k=s.x-g,z=s.y-w,f?k*k+z*z:new q(g,w)}function u(s){return!b(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function _(s,a){var c,f,g,w,k,z,B,K;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=me([0,0]),ue=Ne(s),Ee=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());Ee<1700&&(te=to(s));var Ut=s.length,yt=[];for(c=0;c<Ut;c++){var Tn=me(s[c]);yt.push(a.project(me([Tn.lat-te.lat,Tn.lng-te.lng])))}for(c=0,f=0;c<Ut-1;c++)f+=yt[c].distanceTo(yt[c+1])/2;if(f===0)K=yt[0];else for(c=0,w=0;c<Ut-1;c++)if(k=yt[c],z=yt[c+1],g=k.distanceTo(z),w+=g,w>f){B=(w-f)/g,K=[z.x-B*(z.x-k.x),z.y-B*(z.y-k.y)];break}var Gt=a.unproject(X(K));return me([Gt.lat+te.lat,Gt.lng+te.lng])}var T={__proto__:null,simplify:Va,pointToSegmentDistance:Fa,closestPointOnSegment:yi,clipSegment:Xr,_getEdgeIntersection:vt,_getBitCode:Yn,_sqClosestPointOnSegment:En,isFlat:u,_flat:m,polylineCenter:_},j={project:function(s){return new q(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new de([-180,-90],[180,90])},$={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,c=this.R,f=s.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),k=w*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-k)/(1+k),w/2);return f=-c*Math.log(Math.max(z,1e-10)),new q(s.lng*a*c,f)},unproject:function(s){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-s.y/c),k=Math.PI/2-2*Math.atan(w),z=0,B=.1,K;z<15&&Math.abs(B)>1e-7;z++)K=g*Math.sin(k),K=Math.pow((1-K)/(1+K),g/2),B=Math.PI/2-2*Math.atan(w*K)-k,k+=B;return new we(k*a,s.x*a/c)}},ee={__proto__:null,LonLat:j,Mercator:$,SphericalMercator:$i},be=r({},Zn,{code:"EPSG:3395",projection:$,transformation:function(){var s=.5/(Math.PI*$.R);return hi(s,.5,-s,.5)}()}),at=r({},Zn,{code:"EPSG:4326",projection:j,transformation:hi(1/180,1,-1/180,.5)}),xe=r({},ft,{projection:j,transformation:hi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var c=a.lng-s.lng,f=a.lat-s.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ft.Earth=Zn,ft.EPSG3395=be,ft.EPSG3857=jr,ft.EPSG900913=la,ft.EPSG4326=at,ft.Simple=xe;var Ve=jt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=d(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},_addLayers:function(s){s=s?b(s)?s:[s]:[];for(var a=0,c=s.length;a<c;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=d(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ge=Ve.extend({initialize:function(s,a){V(this,a),this._layers={};var c,f;if(s)for(c=0,f=s.length;c<f;c++)this.addLayer(s[c])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[s]&&f[s].apply(f,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Xi=function(s,a){return new Ge(s,a)},tt=Ge.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ge.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ge.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var a in this._layers){var c=this._layers[a];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),ro=function(s,a){return new tt(s,a)},Xn=Xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){V(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),w=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(c.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function pP(s){return new Xn(s)}var za=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof za.imagePath!="string"&&(za.imagePath=this._detectIconPath()),(this.options.imagePath||za.imagePath)+Xn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Se("div","leaflet-default-icon-path",document.body),a=qi(s,"background-image")||qi(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),qg=sn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Mn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=_n(a._icon),k=c.getPixelBounds(),z=c.getPixelOrigin(),B=ye(k.min._subtract(z).add(g),k.max._subtract(z).subtract(g));if(!B.contains(w)){var K=X((Math.max(B.max.x,w.x)-B.max.x)/(k.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(k.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(k.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(k.min.y-B.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),fe(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=M(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,c=a._shadow,f=_n(a._icon),g=a._map.layerPointToLatLng(f);c&&fe(c,f),a._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ku=Ve.extend({options:{icon:new za,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){V(this,a),this._latlng=me(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),ve(c,a),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(c,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(ve(g,a),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Fe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Fe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&fe(this._icon,s),this._shadow&&fe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Je(this._icon,s),this._shadow&&Je(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function mP(s,a){return new Ku(s,a)}var Ji=Ve.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return V(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zu=Ji.extend({options:{fill:!0,radius:10},initialize:function(s,a){V(this,a),this._latlng=me(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return Ji.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,c=this._clickTolerance(),f=[s+c,a+c];this._pxBounds=new de(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gP(s,a){return new Zu(s,a)}var Ad=Zu.extend({initialize:function(s,a,c){if(typeof a=="number"&&(a=r({},c,{radius:a})),V(this,a),this._latlng=me(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Ji.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Zn.distance){var g=Math.PI/180,w=this._mRadius/Zn.R/g,k=c.project([a+w,s]),z=c.project([a-w,s]),B=k.add(z).divideBy(2),K=c.unproject(B).lat,te=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(K*g))/(Math.cos(a*g)*Math.cos(K*g)))/g;(isNaN(te)||te===0)&&(te=w/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:B.x-c.project([K,s-te]).x,this._radiusY=B.y-k.y}else{var ue=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ue).x}this._updateBounds()}});function _P(s,a,c){return new Ad(s,a,c)}var wi=Ji.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){V(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,c=null,f=En,g,w,k=0,z=this._parts.length;k<z;k++)for(var B=this._parts[k],K=1,te=B.length;K<te;K++){g=B[K-1],w=B[K];var ue=f(s,g,w,!0);ue<a&&(a=ue,c=f(s,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=me(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],c=u(s),f=0,g=s.length;f<g;f++)c?(a[f]=me(s[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(s[f]);return a},_project:function(){var s=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new q(s,s);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,c){var f=s[0]instanceof we,g=s.length,w,k;if(f){for(k=[],w=0;w<g;w++)k[w]=this._map.latLngToLayerPoint(s[w]),c.extend(k[w]);a.push(k)}else for(w=0;w<g;w++)this._projectLatlngs(s[w],a,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,k,z,B;for(c=0,g=0,w=this._rings.length;c<w;c++)for(B=this._rings[c],f=0,k=B.length;f<k-1;f++)z=Xr(B[f],B[f+1],s,f,!0),z&&(a[g]=a[g]||[],a[g].push(z[0]),(z[1]!==B[f+1]||f===k-2)&&(a[g].push(z[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,c=0,f=s.length;c<f;c++)s[c]=Va(s[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var c,f,g,w,k,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,w=this._parts.length;c<w;c++)for(z=this._parts[c],f=0,k=z.length,g=k-1;f<k;g=f++)if(!(!a&&f===0)&&Fa(s,z[g],z[f])<=B)return!0;return!1}});function vP(s,a){return new wi(s,a)}wi._flat=m;var so=wi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return eo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=wi.prototype._convertLatLngs.call(this,s),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(s){wi.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(s=new de(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=Js(this._rings[f],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,c,f,g,w,k,z,B,K;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,B=this._parts.length;w<B;w++)for(c=this._parts[w],k=0,K=c.length,z=K-1;k<K;z=k++)f=c[k],g=c[z],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||wi.prototype._containsPoint.call(this,s,!0)}});function yP(s,a){return new so(s,a)}var Ei=tt.extend({initialize:function(s,a){V(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=b(s)?s:s.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var k=Qu(s,w);return k?(k.feature=Ju(s),k.defaultOptions=k.options,this.resetStyle(k),w.onEachFeature&&w.onEachFeature(s,k),this.addLayer(k)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function Qu(s,a){var c=s.type==="Feature"?s.geometry:s,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,k=a&&a.coordsToLatLng||xd,z,B,K,te;if(!f&&!c)return null;switch(c.type){case"Point":return z=k(f),Gg(w,s,z,a);case"MultiPoint":for(K=0,te=f.length;K<te;K++)z=k(f[K]),g.push(Gg(w,s,z,a));return new tt(g);case"LineString":case"MultiLineString":return B=Yu(f,c.type==="LineString"?0:1,k),new wi(B,a);case"Polygon":case"MultiPolygon":return B=Yu(f,c.type==="Polygon"?1:2,k),new so(B,a);case"GeometryCollection":for(K=0,te=c.geometries.length;K<te;K++){var ue=Qu({geometry:c.geometries[K],type:"Feature",properties:s.properties},a);ue&&g.push(ue)}return new tt(g);case"FeatureCollection":for(K=0,te=c.features.length;K<te;K++){var Ee=Qu(c.features[K],a);Ee&&g.push(Ee)}return new tt(g);default:throw new Error("Invalid GeoJSON object.")}}function Gg(s,a,c,f){return s?s(a,c):new Ku(c,f&&f.markersInheritOptions&&f)}function xd(s){return new we(s[1],s[0],s[2])}function Yu(s,a,c){for(var f=[],g=0,w=s.length,k;g<w;g++)k=a?Yu(s[g],a-1,c):(c||xd)(s[g]),f.push(k);return f}function kd(s,a){return s=me(s),s.alt!==void 0?[E(s.lng,a),E(s.lat,a),E(s.alt,a)]:[E(s.lng,a),E(s.lat,a)]}function Xu(s,a,c,f){for(var g=[],w=0,k=s.length;w<k;w++)g.push(a?Xu(s[w],u(s[w])?0:a-1,c,f):kd(s[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function oo(s,a){return s.feature?r({},s.feature,{geometry:a}):Ju(a)}function Ju(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Rd={toGeoJSON:function(s){return oo(this,{type:"Point",coordinates:kd(this.getLatLng(),s)})}};Ku.include(Rd),Ad.include(Rd),Zu.include(Rd),wi.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=Xu(this._latlngs,a?1:0,!1,s);return oo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),so.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=Xu(this._latlngs,c?2:a?1:0,!0,s);return a||(f=[f]),oo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Ge.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(s).geometry.coordinates)}),oo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(s);if(c)f.push(w.geometry);else{var k=Ju(w);k.type==="FeatureCollection"?f.push.apply(f,k.features):f.push(k)}}}),c?oo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Kg(s,a){return new Ei(s,a)}var wP=Kg,ec=Ve.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,c){this._url=s,this._bounds=Ne(a),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Fe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&mi(this._image),this},bringToBack:function(){return this._map&&Gi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ne(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Se("img");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Qn(this._image,c,a)},_reset:function(){var s=this._image,a=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();fe(s,a.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){Je(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),EP=function(s,a,c){return new ec(s,a,c)},Zg=ec.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Se("video");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),s){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var k=Se("source");k.src=this._url[w],a.appendChild(k)}}});function TP(s,a,c){return new Zg(s,a,c)}var Qg=ec.extend({_initImage:function(){var s=this._image=this._url;ve(s,"leaflet-image-layer"),this._zoomAnimated&&ve(s,"leaflet-zoom-animated"),this.options.className&&ve(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function IP(s,a,c){return new Qg(s,a,c)}var Jn=Ve.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof we||b(s))?(this._latlng=me(s),V(this,a)):(V(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Je(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Je(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Je(this._container,0),this._removeTimeout=setTimeout(l(Fe,void 0,this._container),200)):Fe(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=me(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&mi(this._container),this},bringToBack:function(){return this._map&&Gi(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof tt){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?fe(this._container,s.add(c)):a=a.add(s).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(s,a,c,f){var g=a;return g instanceof s||(g=new s(f).setContent(a)),c&&g.setLatLng(c),g}}),Ve.include({_initOverlay:function(s,a,c,f){var g=c;return g instanceof s?(V(g,f),g._source=this):(g=a&&!f?a:new s(f,this),g.setContent(c)),g}});var tc=Jn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Jn.prototype.openOn.call(this,s)},onAdd:function(s){Jn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ji||this._source.on("preclick",wn))},onRemove:function(s){Jn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ji||this._source.off("preclick",wn))},getEvents:function(){var s=Jn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Se("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Se("div",s+"-content-wrapper",a);if(this._contentNode=Se("div",s+"-content",c),Qi(a),Zi(this._contentNode),le(a,"contextmenu",wn),this._tipContainer=Se("div",s+"-tip-container",a),this._tip=Se("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Se("a",s+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',le(f,"click",function(g){qe(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=s.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ve(s,w)):$e(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();fe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(qi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new q(this._containerLeft,-c-this._containerBottom);g._add(_n(this._container));var w=s.layerPointToContainerPoint(g),k=X(this.options.autoPanPadding),z=X(this.options.autoPanPaddingTopLeft||k),B=X(this.options.autoPanPaddingBottomRight||k),K=s.getSize(),te=0,ue=0;w.x+f+B.x>K.x&&(te=w.x+f-K.x+B.x),w.x-te-z.x<0&&(te=w.x-z.x),w.y+c+B.y>K.y&&(ue=w.y+c-K.y+B.y),w.y-ue-z.y<0&&(ue=w.y-z.y),(te||ue)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,ue]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),PP=function(s,a){return new tc(s,a)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(s,a,c){return this._initOverlay(tc,s,a,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ve.include({bindPopup:function(s,a){return this._popup=this._initOverlay(tc,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof tt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){rn(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof Ji)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var nc=Jn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Jn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Jn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Jn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Se("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),k=f.layerPointToContainerPoint(s),z=this.options.direction,B=g.offsetWidth,K=g.offsetHeight,te=X(this.options.offset),ue=this._getAnchor();z==="top"?(a=B/2,c=K):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=K/2):z==="right"?(a=0,c=K/2):z==="left"?(a=B,c=K/2):k.x<w.x?(z="right",a=0,c=K/2):(z="left",a=B+(te.x+ue.x)*2,c=K/2),s=s.subtract(X(a,c,!0)).add(te).add(ue),$e(g,"leaflet-tooltip-right"),$e(g,"leaflet-tooltip-left"),$e(g,"leaflet-tooltip-top"),$e(g,"leaflet-tooltip-bottom"),ve(g,"leaflet-tooltip-"+z),fe(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Je(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),SP=function(s,a){return new nc(s,a)};Te.include({openTooltip:function(s,a,c){return this._initOverlay(nc,s,a,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ve.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(nc,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof tt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(le(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),le(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,c,f;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Yg=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Qr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function CP(s){return new Yg(s)}Xn.Default=za;var Ua=Ve.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){V(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Fe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof q?s:new q(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,c=-s(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=s(c,+w));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Je(this._container,this.options.opacity);var s=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(s-g.loaded)/200);Je(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=a-Math.abs(s-c),this._onUpdateLevel(c)):(Fe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[s],g=this._map;return f||(f=this._levels[s]={},f.el=Se("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,g.getCenter(),g.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Fe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,c,f){var g=Math.floor(s/2),w=Math.floor(a/2),k=c-1,z=new q(+g,+w);z.z=+k;var B=this._tileCoordsToKey(z),K=this._tiles[B];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),k>f?this._retainParent(g,w,k,f):!1)},_retainChildren:function(s,a,c,f){for(var g=2*s;g<2*s+2;g++)for(var w=2*a;w<2*a+2;w++){var k=new q(g,w);k.z=c+1;var z=this._tileCoordsToKey(k),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,a)},_setZoomTransform:function(s,a,c){var f=this._map.getZoomScale(c,s.zoom),g=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?Qn(s.el,g,f):fe(s.el,g)},_resetGrid:function(){var s=this._map,a=s.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(s.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(s.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(s,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new de(g.subtract(w),g.add(w))},_update:function(s){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(f),w=g.getCenter(),k=[],z=this.options.keepBuffer,B=new de(g.getBottomLeft().subtract([z,-z]),g.getTopRight().add([z,-z]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var te=this._tiles[K].coords;(te.z!==this._tileZoom||!B.contains(new q(te.x,te.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var ue=g.min.y;ue<=g.max.y;ue++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var Ut=new q(Ee,ue);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var yt=this._tiles[this._tileCoordsToKey(Ut)];yt?yt.current=!0:k.push(Ut)}}if(k.sort(function(Gt,lo){return Gt.distanceTo(w)-lo.distanceTo(w)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(Ee=0;Ee<k.length;Ee++)this._addTile(k[Ee],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!a.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return Ne(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,c=this.getTileSize(),f=s.scaleBy(c),g=f.add(c),w=a.unproject(f,s.z),k=a.unproject(g,s.z);return[w,k]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),c=new Pe(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(s){var a=this._tiles[s];a&&(Fe(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ve(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=y,s.onmousemove=y,se.ielt9&&this.options.opacity<1&&Je(s,this.options.opacity)},_addTile:function(s,a){var c=this._getTilePos(s),f=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&M(l(this._tileReady,this,s,null,g)),fe(g,c),this._tiles[f]={el:g,coords:s,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:s});var f=this._tileCoordsToKey(s);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Je(c.el,0),F(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ve(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new q(this._wrapX?v(s.x,this._wrapX):s.x,this._wrapY?v(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new de(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function AP(s){return new Ua(s)}var ao=Ua.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=V(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var c=document.createElement("img");return le(c,"load",l(this._tileOnLoad,this,a,c)),le(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var a={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=c),a["-y"]=c}return C(this._url,r(a,this.options))},_tileOnLoad:function(s,a){se.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),s(c,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(s=a-s),s+f},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=y,a.onerror=y,!a.complete)){a.src=Y;var c=this._tiles[s].coords;Fe(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",Y),Ua.prototype._removeTile.call(this,s)},_tileReady:function(s,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return Ua.prototype._tileReady.call(this,s,a,c)}});function Xg(s,a){return new ao(s,a)}var Jg=ao.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var c=r({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=V(this,a);var g=a.detectRetina&&se.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,ao.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),c=this._crs,f=ye(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,k=(this._wmsVersion>=1.3&&this._crs===at?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),z=ao.prototype.getTileUrl.call(this,s);return z+U(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function xP(s,a){return new Jg(s,a)}ao.WMS=Jg,Xg.wms=xP;var Ti=Ve.extend({options:{padding:.1},initialize:function(s){V(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(s,a));se.any3d?Qn(this._container,w,c):fe(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new de(c,c.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),e_=Ti.extend({options:{tolerance:0},getEvents:function(){var s=Ti.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ti.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");le(s,"mousemove",this._onMouseMove,this),le(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,Fe(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ti.prototype._update.call(this);var s=this._bounds,a=this._container,c=s.getSize(),f=se.retina?2:1;fe(a,s.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ti.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var c,f,g,w,k=s._parts,z=k.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(f=0,g=k[c].length;f<g;f++)w=k[c][f],B[f?"lineTo":"moveTo"](w.x,w.y);a&&B.closePath()}this._fillStroke(B,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,c=this._ctx,f=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,a){var c=a.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&($e(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(ve(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,c){this._map._fireDOMEvent(a,c||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function t_(s){return se.canvas?new e_(s):null}var Ba=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),kP={_initContainer:function(){this._container=Se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ti.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Ba("shape");ve(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Ba("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Fe(a),s.removeInteractiveTarget(a),delete this._layers[d(s)]},_updateStyle:function(s){var a=s._stroke,c=s._fill,f=s.options,g=s._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=s._stroke=Ba("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=b(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),s._stroke=null),f.fill?(c||(c=s._fill=Ba("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),c=Math.round(s._radius),f=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){mi(s._container)},_bringToBack:function(s){Gi(s._container)}},ic=se.vml?Ba:Ns,$a=Ti.extend({_initContainer:function(){this._container=ic("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ic("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Fe(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ti.prototype._update.call(this);var s=this._bounds,a=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),fe(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=ic("path");s.options.className&&ve(a,s.options.className),s.options.interactive&&ve(a,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Fe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,c=s.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,ua(s._parts,a))},_updateCircle:function(s){var a=s._point,c=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(s,w)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){mi(s._path)},_bringToBack:function(s){Gi(s._path)}});se.vml&&$a.include(kP);function n_(s){return se.svg||se.vml?new $a(s):null}Te.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&t_(s)||n_(s)}});var i_=so.extend({initialize:function(s,a){so.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ne(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function RP(s,a){return new i_(s,a)}$a.create=ic,$a.pointsToPath=ua,Ei.geometryToLayer=Qu,Ei.coordsToLatLng=xd,Ei.coordsToLatLngs=Yu,Ei.latLngToCoords=kd,Ei.latLngsToCoords=Xu,Ei.getFeature=oo,Ei.asFeature=Ju,Te.mergeOptions({boxZoom:!0});var r_=sn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Fe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),bn(),Ca(),this._startPoint=this._map.mouseEventToContainerPoint(s),le(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Se("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new de(this._point,this._startPoint),c=a.getSize();fe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Fe(this._box),$e(this._container,"leaflet-crosshair")),On(),Aa(),De(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",r_),Te.mergeOptions({doubleClickZoom:!0});var s_=sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=s.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(s.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",s_),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var o_=sn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Mn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ne(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%s+a-c,w=(f+a+c)%s-a-c,k=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(s){var a=this._map,c=a.options,f=!c.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,z=g.multiplyBy(k/w),B=z.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,B),te=z.multiplyBy(K/B),ue=K/(c.inertiaDeceleration*k),Ee=te.multiplyBy(-ue/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),M(function(){a.panBy(Ee,{duration:ue,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",o_),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var a_=sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),le(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,c=s.scrollTop||a.scrollTop,f=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*s,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[s,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,s];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=s;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-s},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],s.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;rn(s)}}});Te.addInitHook("addHandler","keyboard",a_),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var l_=sn.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=Uu(s),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),rn(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,k=s._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,k&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+k):s.setZoomAround(this._lastMousePos,a+k))}});Te.addInitHook("addHandler","scrollWheelZoom",l_);var LP=600;Te.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var u_=sn.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",qe),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),LP),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){De(document,"touchend",qe),De(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Te.addInitHook("addHandler","tapHold",u_),Te.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var c_=sn.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),qe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(k,this,!0),qe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",c_),Te.BoxZoom=r_,Te.DoubleClickZoom=s_,Te.Drag=o_,Te.Keyboard=a_,Te.ScrollWheelZoom=l_,Te.TapHold=u_,Te.TouchZoom=c_,n.Bounds=de,n.Browser=se,n.CRS=ft,n.Canvas=e_,n.Circle=Ad,n.CircleMarker=Zu,n.Class=Xe,n.Control=qt,n.DivIcon=Yg,n.DivOverlay=Jn,n.DomEvent=Bu,n.DomUtil=ju,n.Draggable=Mn,n.Evented=jt,n.FeatureGroup=tt,n.GeoJSON=Ei,n.GridLayer=Ua,n.Handler=sn,n.Icon=Xn,n.ImageOverlay=ec,n.LatLng=we,n.LatLngBounds=Pe,n.Layer=Ve,n.LayerGroup=Ge,n.LineUtil=T,n.Map=Te,n.Marker=Ku,n.Mixin=Yr,n.Path=Ji,n.Point=q,n.PolyUtil=no,n.Polygon=so,n.Polyline=wi,n.Popup=tc,n.PosAnimation=Oa,n.Projection=ee,n.Rectangle=i_,n.Renderer=Ti,n.SVG=$a,n.SVGOverlay=Qg,n.TileLayer=ao,n.Tooltip=nc,n.Transformation=Wi,n.Util=O,n.VideoOverlay=Zg,n.bind=l,n.bounds=ye,n.canvas=t_,n.circle=_P,n.circleMarker=gP,n.control=zt,n.divIcon=CP,n.extend=r,n.featureGroup=ro,n.geoJSON=Kg,n.geoJson=wP,n.gridLayer=AP,n.icon=pP,n.imageOverlay=EP,n.latLng=me,n.latLngBounds=Ne,n.layerGroup=Xi,n.map=Qs,n.marker=mP,n.point=X,n.polygon=yP,n.polyline=vP,n.popup=PP,n.rectangle=RP,n.setOptions=V,n.stamp=d,n.svg=n_,n.svgOverlay=IP,n.tileLayer=Xg,n.tooltip=SP,n.transformation=hi,n.version=i,n.videoOverlay=TP;var NP=window.L;n.noConflict=function(){return window.L=NP,this},window.L=n})})(Up,Up.exports);var Tu=Up.exports;const hP=iw(Tu);function Wg(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Hg(t,e){return e==null?function(i,r){const o=H.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=H.useRef();o.current||(o.current=t(i,r));const l=H.useRef(i),{instance:h}=o.current;return H.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,r]),o}}function rD(t,e){H.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function dP(t){return function(n){const i=Bg(),r=t($g(n,i),i);return aP(i.map,n.attribution),cP(r.current,n.eventHandlers),rD(r.current,i),r}}function sD(t,e){const n=Hg(t,e),i=dP(n);return eD(i)}function oD(t,e){const n=Hg(t),i=iD(n,e);return tD(i)}function aD(t,e){const n=Hg(t,e),i=dP(n);return nD(i)}function lD(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function uD(){return Bg().map}function cD(t){const e=uD();return H.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Bp(){return Bp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bp.apply(this,arguments)}function hD({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:h,whenReady:d,zoom:p,...v},y){const[E]=H.useState({className:r,id:o,style:h}),[S,D]=H.useState(null);H.useImperativeHandle(y,()=>(S==null?void 0:S.map)??null,[S]);const V=H.useCallback(R=>{if(R!==null&&S===null){const C=new Tu.Map(R,v);n!=null&&p!=null?C.setView(n,p):t!=null&&C.fitBounds(t,e),d!=null&&C.whenReady(d),D(XM(C))}},[]);H.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const U=S?Pl.createElement(uP,{value:S},i):l??null;return Pl.createElement("div",Bp({},E,{ref:V}),U)}const dD=H.forwardRef(hD),fD=sD(function({position:e,...n},i){const r=new Tu.Marker(e,n);return Wg(r,JM(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),pD=oD(function(e,n){const i=new Tu.Popup(e,n.overlayContainer);return Wg(i,n)},function(e,n,{position:i},r){H.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),r(!0))}function d(p){p.popup===l&&r(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,i])}),mD=aD(function({url:e,...n},i){const r=new Tu.TileLayer(e,$g(n,i));return Wg(r,i)},function(e,n,i){lD(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete hP.Icon.Default.prototype._getIconUrl;hP.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function gD({allPlaces:t,allPlacesSetter:e}){return cD({click(n){const i=n.latlng.lat,r=n.latlng.lng,o=prompt("Add spot name (short):");if(o){const h={id:"u"+Date.now(),name:o,category:"Food",desc:"User-submitted spot",lat:i,lng:r,votes:0,source:"user"},d=[...t,h];e(d),alert("Yo! Your pin is added locally. Go to Contribute page to add details & pics.")}}}),null}function _D({places:t,onMarkerClick:e,allPlaces:n,allPlacesSetter:i}){const r=[28.3581,75.601];return P.jsxs("div",{className:"map-container",style:{height:"100%",width:"100%"},children:[P.jsxs(dD,{center:r,zoom:15,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[P.jsx(mD,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),P.jsx(gD,{allPlaces:n,allPlacesSetter:i}),t.map(o=>P.jsx(fD,{position:[o.lat,o.lng],eventHandlers:{click:()=>{e&&e(o)}},children:P.jsxs(pD,{children:[P.jsx("strong",{children:o.name}),P.jsx("br",{}),o.category&&P.jsxs("span",{children:["Category: ",o.category]}),P.jsx("br",{}),o.desc&&P.jsx("span",{children:o.desc})]})},o.id))]}),P.jsx("div",{className:"map-hint",style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"10px 20px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1e3,fontSize:"14px",textAlign:"center"},children:"Click anywhere on the map to add a quick pin (you can edit later on Contribute page)"})]})}function vD({places:t,categories:e,onFilter:n,onSelect:i}){return P.jsxs("aside",{className:"sidebar",children:[P.jsxs("div",{className:"side-top",children:[P.jsx("h2",{children:"Pilani Trails"}),P.jsx("p",{className:"muted",children:"Explore the town  filter, search & bookmark your faves."}),P.jsx("div",{className:"search-row",children:P.jsx("input",{placeholder:"Search spots, e.g., 'printing' or 'momo'",onChange:r=>n(o=>({...o,q:r.target.value}))})}),P.jsx("div",{className:"chips",children:e.map(r=>P.jsx("button",{className:"chip",onClick:()=>n(o=>({...o,category:r})),children:r},r))})]}),P.jsx("div",{className:"side-list",children:t.length===0?P.jsx("div",{className:"empty",children:"No matches  try fresh filters"}):t.map(r=>P.jsxs("div",{className:"place-card",onClick:()=>i(r),children:[P.jsxs("div",{className:"place-header",children:[P.jsx("strong",{children:r.name}),P.jsx("span",{className:"cat",children:r.category})]}),P.jsx("div",{className:"desc",children:r.desc}),P.jsxs("div",{className:"meta",children:[P.jsxs("span",{children:[" ",r.votes??0]}),P.jsx("span",{children:r.source==="seed"?"OG":"User"})]})]},r.id))}),P.jsx("div",{className:"side-bottom",children:P.jsx("a",{className:"btn",href:"/contribute",children:"Drop a pin"})})]})}const nw=[{id:"p1",name:"The Sardar Dhaba",category:"Food",desc:"Legendary dhaba vibes  butter chicken that hits different after a long lab sesh.",lat:28.3578,lng:75.6005,img:"",votes:32,bookmarked:!1,source:"seed"},{id:"p2",name:"Neelam Books & Stationery",category:"Stationery",desc:"OG spot for project printing, thick bond paper, and mad exam-specific notes.",lat:28.3589,lng:75.6002,img:"",votes:21,bookmarked:!1,source:"seed"},{id:"p3",name:"Payal Cafe",category:"Cafe",desc:"Chill cafe, good for group meetups and chai. Great momo on rainy days.",lat:28.3584,lng:75.602,img:"",votes:44,bookmarked:!0,source:"seed"},{id:"p4",name:"Campus Printing Hub",category:"Services",desc:"Fast printing, lamination & binding  usually crowded at midnight before submissions.",lat:28.3593,lng:75.6016,img:"",votes:12,bookmarked:!1,source:"seed"},{id:"p5",name:"Baker's Corner",category:"Food",desc:"Fresh bread & quirky cakes. Perfect for midnight cravings.",lat:28.3572,lng:75.6027,img:"",votes:9,bookmarked:!1,source:"seed"},{id:"p6",name:"BITS Medical Store",category:"Services",desc:"Medical & first-aid essentials. Helpful during chaotic project weeks.",lat:28.3579,lng:75.6009,img:"",votes:6,bookmarked:!1,source:"seed"},{id:"p7",name:"Neha's Samosa Stall",category:"Food",desc:"Cheap samosas, extra spicy chutney  campus fave for breakfast.",lat:28.3586,lng:75.5998,img:"",votes:15,bookmarked:!1,source:"seed"},{id:"p8",name:"Pilani Park",category:"Outdoors",desc:"Relax under trees, group picnic spot. Insta-friendly sunsets.",lat:28.3598,lng:75.6031,img:"",votes:26,bookmarked:!0,source:"seed"},{id:"p9",name:"SIM Printing (24x7)",category:"Services",desc:"24-hour print joint. Lifesaver during midnight panic.",lat:28.3569,lng:75.6011,img:"",votes:18,bookmarked:!1,source:"seed"},{id:"p10",name:"Gurdwara Lane",category:"Spiritual",desc:"Peaceful spot, langar on weekends sometimes.",lat:28.358,lng:75.6038,img:"",votes:8,bookmarked:!1,source:"seed"},{id:"p11",name:"The Chill Zone (Gaming)",category:"Entertainment",desc:"Console gaming, cheap snacks  perfect to unwind.",lat:28.3587,lng:75.6024,img:"",votes:11,bookmarked:!1,source:"seed"},{id:"p12",name:"Mom's Dosa",category:"Food",desc:"South-Indian breakfast stall that slaps. Dosa + filter coffee = peak energy.",lat:28.3576,lng:75.6018,img:"",votes:29,bookmarked:!0,source:"seed"}];function yD(){const t="pilani_trails_places_v1",[e,n]=H.useState(()=>{try{const i=localStorage.getItem(t);if(i){const r=JSON.parse(i);if(Array.isArray(r)&&r.length>=0)return r}return localStorage.setItem(t,JSON.stringify(nw)),nw}catch(i){return console.warn("usePlaces: failed to read places from localStorage",i),[]}});return H.useEffect(()=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(i){console.warn("usePlaces: failed to save places to localStorage",i)}},[e]),[e,n]}function wD(){const[t,e]=yD(),[n,i]=H.useState({q:"",category:"All"}),[r,o]=H.useState(null),l=t.filter(h=>{const d=n.q.toLowerCase(),p=!d||h.name.toLowerCase().includes(d)||(h.desc||"").toLowerCase().includes(d),v=n.category==="All"||h.category===n.category;return p&&v});return P.jsxs("div",{className:"home-grid",children:[P.jsx(vD,{filter:n,setFilter:i,places:t,setPlaces:e,selected:r,setSelected:o}),P.jsx(_D,{places:l,selected:r,setSelected:o})]})}const ED=()=>{const[t,e]=H.useState(""),[n,i]=H.useState(""),[r,o]=H.useState(""),[l,h]=H.useState(!1),{login:d,signInWithGoogle:p}=Eu(),v=ou(),y=async S=>{S.preventDefault();try{o(""),h(!0),await d(t,n),v("/")}catch(D){o("Failed to sign in: "+D.message)}h(!1)},E=async()=>{try{o(""),h(!0),await p(),v("/")}catch(S){o("Failed to sign in with Google: "+S.message)}h(!1)};return P.jsx("div",{className:"auth-container",children:P.jsxs("div",{className:"auth-card",children:[P.jsx("h2",{children:"Login to Pilani Trails"}),r&&P.jsx("div",{className:"error-message",children:r}),P.jsxs("form",{onSubmit:y,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"email",children:"Email"}),P.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),required:!0,placeholder:"your.email@example.com"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"password",children:"Password"}),P.jsx("input",{id:"password",type:"password",value:n,onChange:S=>i(S.target.value),required:!0,placeholder:""})]}),P.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Signing in...":"Sign In"})]}),P.jsx("div",{className:"divider",children:P.jsx("span",{children:"OR"})}),P.jsxs("button",{onClick:E,disabled:l,className:"btn-google",children:[P.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[P.jsx("path",{fill:"#4285F4",d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z"}),P.jsx("path",{fill:"#34A853",d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z"}),P.jsx("path",{fill:"#FBBC05",d:"M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z"}),P.jsx("path",{fill:"#EA4335",d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z"})]}),"Sign in with Google"]}),P.jsxs("p",{className:"auth-switch",children:["Don't have an account? ",P.jsx(Kt,{to:"/signup",children:"Sign up"})]})]})})};function TD(){var E;const{currentUser:t,logout:e}=Eu(),n=ou(),[i,r]=H.useState([]),[o,l]=H.useState(!0),[h,d]=H.useState({totalProposals:0,pendingProposals:0,approvedProposals:0,rejectedProposals:0});H.useEffect(()=>{p()},[t]);const p=async()=>{l(!0);try{const D=JSON.parse(localStorage.getItem("proposals")||"[]").filter(V=>V.userId===(t==null?void 0:t.uid));r(D),d({totalProposals:D.length,pendingProposals:D.filter(V=>V.status==="pending").length,approvedProposals:D.filter(V=>V.status==="approved").length,rejectedProposals:D.filter(V=>V.status==="rejected").length})}catch(S){console.error("Error loading user data:",S)}finally{l(!1)}},v=async()=>{try{await e(),n("/login")}catch(S){console.error("Logout error:",S)}},y=S=>{switch(S){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}};return o?P.jsx("div",{className:"dashboard-container",style:ae.container,children:P.jsx("div",{style:ae.loading,children:"Loading your dashboard..."})}):P.jsxs("div",{className:"dashboard-container",style:ae.container,children:[P.jsxs("div",{style:ae.header,children:[P.jsx("h1",{style:ae.title,children:"My Dashboard"}),P.jsxs("p",{style:ae.subtitle,children:["Welcome back, ",(t==null?void 0:t.email)||"User","!"]})]}),P.jsxs("div",{style:ae.card,children:[P.jsx("h2",{style:ae.cardTitle,children:"Account Information"}),P.jsxs("div",{style:ae.infoGrid,children:[P.jsxs("div",{style:ae.infoItem,children:[P.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]}),P.jsxs("div",{style:ae.infoItem,children:[P.jsx("strong",{children:"User ID:"})," ",t==null?void 0:t.uid]}),P.jsxs("div",{style:ae.infoItem,children:[P.jsx("strong",{children:"Member Since:"})," ",new Date(((E=t==null?void 0:t.metadata)==null?void 0:E.creationTime)||Date.now()).toLocaleDateString()]})]})]}),P.jsxs("div",{style:ae.statsGrid,children:[P.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#007bff"},children:[P.jsx("div",{style:ae.statNumber,children:h.totalProposals}),P.jsx("div",{style:ae.statLabel,children:"Total Proposals"})]}),P.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#ffc107"},children:[P.jsx("div",{style:ae.statNumber,children:h.pendingProposals}),P.jsx("div",{style:ae.statLabel,children:"Pending Review"})]}),P.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#28a745"},children:[P.jsx("div",{style:ae.statNumber,children:h.approvedProposals}),P.jsx("div",{style:ae.statLabel,children:"Approved"})]}),P.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#dc3545"},children:[P.jsx("div",{style:ae.statNumber,children:h.rejectedProposals}),P.jsx("div",{style:ae.statLabel,children:"Rejected"})]})]}),P.jsxs("div",{style:ae.card,children:[P.jsx("h2",{style:ae.cardTitle,children:"Quick Actions"}),P.jsxs("div",{style:ae.actionsGrid,children:[P.jsxs(Kt,{to:"/propose",style:ae.actionButton,children:[P.jsx("span",{style:ae.actionIcon,children:""}),P.jsx("span",{children:"Propose New Location"})]}),P.jsxs(Kt,{to:"/",style:ae.actionButton,children:[P.jsx("span",{style:ae.actionIcon,children:""}),P.jsx("span",{children:"View Map"})]}),P.jsxs(Kt,{to:"/contribute",style:ae.actionButton,children:[P.jsx("span",{style:ae.actionIcon,children:""}),P.jsx("span",{children:"Contribute"})]}),P.jsxs("button",{onClick:v,style:{...ae.actionButton,cursor:"pointer",border:"none"},children:[P.jsx("span",{style:ae.actionIcon,children:""}),P.jsx("span",{children:"Logout"})]})]})]}),P.jsxs("div",{style:ae.card,children:[P.jsx("h2",{style:ae.cardTitle,children:"My Proposals"}),i.length===0?P.jsxs("div",{style:ae.emptyState,children:[P.jsx("p",{children:"You haven't submitted any proposals yet."}),P.jsx(Kt,{to:"/propose",style:ae.primaryButton,children:"Submit Your First Proposal"})]}):P.jsx("div",{style:ae.proposalsList,children:i.map(S=>{var D,V,U;return P.jsxs("div",{style:ae.proposalCard,children:[P.jsxs("div",{style:ae.proposalHeader,children:[P.jsx("h3",{style:ae.proposalTitle,children:S.name}),P.jsx("span",{style:{...ae.statusBadge,backgroundColor:y(S.status)},children:((D=S.status)==null?void 0:D.toUpperCase())||"PENDING"})]}),P.jsxs("div",{style:ae.proposalDetails,children:[P.jsxs("div",{children:[P.jsx("strong",{children:"Category:"})," ",S.category]}),P.jsxs("div",{children:[P.jsx("strong",{children:"Location:"})," [",(V=S.lat)==null?void 0:V.toFixed(4),", ",(U=S.lng)==null?void 0:U.toFixed(4),"]"]}),P.jsxs("div",{children:[P.jsx("strong",{children:"Submitted:"})," ",new Date(S.timestamp).toLocaleDateString()]})]}),S.description&&P.jsx("p",{style:ae.proposalDescription,children:S.description}),S.adminFeedback&&P.jsxs("div",{style:ae.feedback,children:[P.jsx("strong",{children:"Admin Feedback:"})," ",S.adminFeedback]})]},S.id)})})]}),P.jsxs("div",{style:ae.card,children:[P.jsx("h2",{style:ae.cardTitle,children:"Need Help?"}),P.jsxs("p",{children:["Check out our ",P.jsx(Kt,{to:"/about",style:ae.link,children:"About page"})," for more information about Pilani Trails."]}),P.jsxs("p",{children:["Questions? Contact us or visit the ",P.jsx(Kt,{to:"/contribute",style:ae.link,children:"Contribute page"})," to learn more."]})]})]})}const ae={container:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},subtitle:{fontSize:"1.1rem",color:"#666"},loading:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#666"},card:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#333"},infoGrid:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},infoItem:{padding:"0.5rem",fontSize:"1rem"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},statCard:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid",textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},statLabel:{fontSize:"0.9rem",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},actionsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},actionButton:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f8f9fa",borderRadius:"8px",textDecoration:"none",color:"#333",transition:"all 0.2s",fontWeight:"500"},actionIcon:{fontSize:"2rem",marginBottom:"0.5rem"},emptyState:{textAlign:"center",padding:"2rem",color:"#666"},primaryButton:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"#fff",textDecoration:"none",borderRadius:"4px",marginTop:"1rem",fontWeight:"500"},proposalsList:{display:"flex",flexDirection:"column",gap:"1rem"},proposalCard:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},proposalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},proposalTitle:{fontSize:"1.2rem",fontWeight:"bold",margin:0},statusBadge:{padding:"0.25rem 0.75rem",borderRadius:"12px",color:"#fff",fontSize:"0.8rem",fontWeight:"bold"},proposalDetails:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},proposalDescription:{marginTop:"0.5rem",color:"#555",lineHeight:"1.5"},feedback:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",borderLeft:"3px solid #007bff"},link:{color:"#007bff",textDecoration:"none",fontWeight:"500"}},ID=()=>{const{currentUser:t}=H.useContext(Ug),[e,n]=H.useState({name:"",description:"",latitude:"",longitude:"",category:""}),[i,r]=H.useState(!1),[o,l]=H.useState({type:"",text:""}),h=p=>{const{name:v,value:y}=p.target;n(E=>({...E,[v]:y}))},d=async p=>{if(p.preventDefault(),!t){l({type:"error",text:"You must be logged in to propose a location."});return}if(!e.name||!e.description||!e.latitude||!e.longitude||!e.category){l({type:"error",text:"Please fill in all fields."});return}const v=parseFloat(e.latitude),y=parseFloat(e.longitude);if(isNaN(v)||isNaN(y)||v<-90||v>90||y<-180||y>180){l({type:"error",text:"Please enter valid coordinates."});return}r(!0),l({type:"",text:""});try{await CO(RI(ll,"proposals"),{name:e.name,description:e.description,latitude:v,longitude:y,category:e.category,status:"pending",userId:t.uid,userEmail:t.email,createdAt:AO()}),l({type:"success",text:"Location proposal submitted successfully!"}),n({name:"",description:"",latitude:"",longitude:"",category:""})}catch(E){console.error("Error submitting proposal:",E),l({type:"error",text:"Failed to submit proposal. Please try again."})}finally{r(!1)}};return t?P.jsx("div",{className:"propose-location-container",children:P.jsxs("div",{className:"propose-location-card",children:[P.jsx("h2",{children:"Propose a New Location"}),P.jsx("p",{className:"subtitle",children:"Share a new trail or location with the community"}),o.text&&P.jsx("div",{className:`message ${o.type}`,children:o.text}),P.jsxs("form",{onSubmit:d,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"name",children:"Location Name *"}),P.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:h,placeholder:"Enter location name",required:!0})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"description",children:"Description *"}),P.jsx("textarea",{id:"description",name:"description",value:e.description,onChange:h,placeholder:"Describe the location, its features, and why it should be added",rows:"4",required:!0})]}),P.jsxs("div",{className:"form-row",children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"latitude",children:"Latitude *"}),P.jsx("input",{type:"text",id:"latitude",name:"latitude",value:e.latitude,onChange:h,placeholder:"e.g., 28.3636",required:!0})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"longitude",children:"Longitude *"}),P.jsx("input",{type:"text",id:"longitude",name:"longitude",value:e.longitude,onChange:h,placeholder:"e.g., 75.5868",required:!0})]})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"category",children:"Category *"}),P.jsxs("select",{id:"category",name:"category",value:e.category,onChange:h,required:!0,children:[P.jsx("option",{value:"",children:"Select a category"}),P.jsx("option",{value:"trail",children:"Trail"}),P.jsx("option",{value:"viewpoint",children:"Viewpoint"}),P.jsx("option",{value:"landmark",children:"Landmark"}),P.jsx("option",{value:"park",children:"Park"}),P.jsx("option",{value:"other",children:"Other"})]})]}),P.jsx("button",{type:"submit",className:"submit-button",disabled:i,children:i?"Submitting...":"Submit Proposal"})]})]})}):P.jsx("div",{className:"propose-location-container",children:P.jsxs("div",{className:"login-required",children:[P.jsx("h2",{children:"Login Required"}),P.jsx("p",{children:"You must be logged in to propose a new location."}),P.jsx("p",{children:"Please log in or sign up to continue."})]})})},PD=()=>{const[t,e]=H.useState([]),[n,i]=H.useState(!0),[r,o]=H.useState("pending"),{currentUser:l}=Eu();H.useEffect(()=>{h()},[r]);const h=async()=>{try{i(!0);const y=RI(ll,"locationProposals");let E;r==="all"?E=y:E=gO(y,_O("status","==",r));const D=(await PO(E)).docs.map(V=>({id:V.id,...V.data()}));e(D)}catch(y){console.error("Error fetching proposals:",y),alert("Failed to fetch proposals")}finally{i(!1)}},d=async y=>{try{const E=Zc(ll,"locationProposals",y);await Gy(E,{status:"approved",reviewedBy:l.uid,reviewedAt:new Date().toISOString()}),alert("Proposal approved successfully!"),h()}catch(E){console.error("Error approving proposal:",E),alert("Failed to approve proposal")}},p=async(y,E)=>{const S=prompt("Please provide a reason for rejection:");if(!S){alert("Rejection reason is required");return}try{const D=Zc(ll,"locationProposals",y);await Gy(D,{status:"rejected",reviewedBy:l.uid,reviewedAt:new Date().toISOString(),rejectionReason:S}),alert("Proposal rejected successfully!"),h()}catch(D){console.error("Error rejecting proposal:",D),alert("Failed to reject proposal")}},v=async y=>{if(window.confirm("Are you sure you want to delete this proposal? This action cannot be undone."))try{await SO(Zc(ll,"locationProposals",y)),alert("Proposal deleted successfully!"),h()}catch(E){console.error("Error deleting proposal:",E),alert("Failed to delete proposal")}};return n?P.jsx("div",{className:"admin-review-loading",children:"Loading proposals..."}):P.jsxs("div",{className:"admin-review-container",children:[P.jsxs("div",{className:"admin-review-header",children:[P.jsx("h1",{children:"Admin Review Panel"}),P.jsx("p",{children:"Review and manage location proposals"})]}),P.jsxs("div",{className:"filter-section",children:[P.jsx("label",{htmlFor:"status-filter",children:"Filter by Status:"}),P.jsxs("select",{id:"status-filter",value:r,onChange:y=>o(y.target.value),className:"status-filter",children:[P.jsx("option",{value:"pending",children:"Pending"}),P.jsx("option",{value:"approved",children:"Approved"}),P.jsx("option",{value:"rejected",children:"Rejected"}),P.jsx("option",{value:"all",children:"All"})]})]}),t.length===0?P.jsx("div",{className:"no-proposals",children:P.jsxs("p",{children:["No ",r!=="all"?r:""," proposals found."]})}):P.jsx("div",{className:"proposals-grid",children:t.map(y=>P.jsxs("div",{className:`proposal-card status-${y.status}`,children:[P.jsxs("div",{className:"proposal-header",children:[P.jsx("h3",{children:y.name}),P.jsx("span",{className:`status-badge ${y.status}`,children:y.status})]}),P.jsxs("div",{className:"proposal-details",children:[P.jsxs("div",{className:"detail-row",children:[P.jsx("strong",{children:"Description:"}),P.jsx("p",{children:y.description})]}),P.jsxs("div",{className:"detail-row",children:[P.jsx("strong",{children:"Category:"}),P.jsx("span",{className:"category-tag",children:y.category})]}),P.jsxs("div",{className:"detail-row",children:[P.jsx("strong",{children:"Location:"}),P.jsxs("p",{children:["Lat: ",y.latitude,", Lng: ",y.longitude]})]}),P.jsxs("div",{className:"detail-row",children:[P.jsx("strong",{children:"Proposed by:"}),P.jsx("p",{children:y.proposedBy||"Anonymous"})]}),P.jsxs("div",{className:"detail-row",children:[P.jsx("strong",{children:"Submitted:"}),P.jsx("p",{children:new Date(y.createdAt).toLocaleString()})]}),y.imageUrl&&P.jsxs("div",{className:"detail-row",children:[P.jsx("strong",{children:"Image:"}),P.jsx("img",{src:y.imageUrl,alt:y.name,className:"proposal-image"})]}),y.status==="rejected"&&y.rejectionReason&&P.jsxs("div",{className:"detail-row rejection-reason",children:[P.jsx("strong",{children:"Rejection Reason:"}),P.jsx("p",{children:y.rejectionReason})]}),y.reviewedBy&&P.jsxs("div",{className:"detail-row",children:[P.jsx("strong",{children:"Reviewed by:"}),P.jsx("p",{children:y.reviewedBy}),P.jsx("p",{className:"review-date",children:new Date(y.reviewedAt).toLocaleString()})]})]}),P.jsxs("div",{className:"proposal-actions",children:[y.status==="pending"&&P.jsxs(P.Fragment,{children:[P.jsx("button",{onClick:()=>d(y.id),className:"btn btn-approve",children:"Approve"}),P.jsx("button",{onClick:()=>p(y.id),className:"btn btn-reject",children:"Reject"})]}),P.jsx("button",{onClick:()=>v(y.id),className:"btn btn-delete",children:"Delete"})]})]},y.id))})]})};function SD(){const t="pilani_trails_places_v1",[e,n]=H.useState(""),[i,r]=H.useState(!1),[o,l]=H.useState([]);H.useEffect(()=>{const p=localStorage.getItem(t)||"[]";l(JSON.parse(p))},[]);function h(p){p.preventDefault();const v=e==="pilaniadmin123";r(v),v||alert("Nah fam, wrong pass.")}function d(p){if(!confirm("Delete for real?"))return;const v=o.filter(y=>y.id!==p);l(v),localStorage.setItem(t,JSON.stringify(v))}return i?P.jsxs("div",{className:"admin-page",children:[P.jsx("h2",{children:"Admin Panel"}),P.jsxs("p",{children:[o.length," place(s) in local DB"]}),P.jsx("p",{className:"muted",children:"Delete any place. For mass edits, export localStorage key manually."}),P.jsxs("div",{className:"admin-list",children:[o.length===0&&P.jsx("p",{children:"No places yet."}),o.map(p=>P.jsxs("div",{className:"place-card",children:[P.jsx("h3",{children:p.name}),P.jsx("div",{className:"desc",children:p.desc||"(no desc)"}),P.jsxs("div",{className:"meta",children:["Category: ",p.category]}),P.jsxs("div",{className:"meta",children:["ID: ",p.id]}),P.jsx("button",{className:"btn ghost",onClick:()=>d(p.id),children:"Delete"})]},p.id))]})]}):P.jsxs("div",{className:"admin-page",children:[P.jsx("h2",{children:"Admin"}),P.jsxs("p",{children:["Enter the admin pass (set in ",P.jsx("code",{children:".env.local"}),")"]}),P.jsxs("form",{onSubmit:h,children:[P.jsx("input",{value:e,onChange:p=>n(p.target.value),placeholder:"admin pass"}),P.jsx("button",{className:"btn",type:"submit",children:"Unlock"})]})]})}function CD(){return P.jsxs(P.Fragment,{children:[P.jsx(QM,{}),P.jsxs(ox,{children:[P.jsx(ts,{path:"/",element:P.jsx(wD,{})}),P.jsx(ts,{path:"/login",element:P.jsx(ED,{})}),P.jsx(ts,{path:"/dashboard",element:P.jsx(xc,{children:P.jsx(TD,{})})}),P.jsx(ts,{path:"/propose",element:P.jsx(xc,{children:P.jsx(ID,{})})}),P.jsx(ts,{path:"/admin/review",element:P.jsx(xc,{children:P.jsx(PD,{})})}),P.jsx(ts,{path:"/admin",element:P.jsx(xc,{children:P.jsx(SD,{})})})]})]})}const fP=document.getElementById("root");if(!fP){const t=document.createElement("div");t.id="root",document.body.appendChild(t),console.error("Root element was missing - created new one")}window.addEventListener("error",t=>{console.error("Global error caught:",t.error)});window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)});try{_E(fP||document.getElementById("root")).render(P.jsx(Pl.StrictMode,{children:P.jsx(fx,{children:P.jsx(ZM,{children:P.jsx(CD,{})})})}))}catch(t){console.error("Error rendering app:",t),document.body.innerHTML=`<div style="padding: 20px; color: red;">Error loading app: ${t.message}</div>`}
