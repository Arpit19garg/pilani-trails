function z1(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var $1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LE={exports:{}},Yd={},bE={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=Symbol.for("react.element"),W1=Symbol.for("react.portal"),H1=Symbol.for("react.fragment"),q1=Symbol.for("react.strict_mode"),G1=Symbol.for("react.profiler"),K1=Symbol.for("react.provider"),Z1=Symbol.for("react.context"),Q1=Symbol.for("react.forward_ref"),Y1=Symbol.for("react.suspense"),X1=Symbol.for("react.memo"),J1=Symbol.for("react.lazy"),jv=Symbol.iterator;function eR(t){return t===null||typeof t!="object"?null:(t=jv&&t[jv]||t["@@iterator"],typeof t=="function"?t:null)}var DE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ME=Object.assign,NE={};function za(t,e,n){this.props=t,this.context=e,this.refs=NE,this.updater=n||DE}za.prototype.isReactComponent={};za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OE(){}OE.prototype=za.prototype;function Bg(t,e,n){this.props=t,this.context=e,this.refs=NE,this.updater=n||DE}var Ug=Bg.prototype=new OE;Ug.constructor=Bg;ME(Ug,za.prototype);Ug.isPureReactComponent=!0;var Bv=Array.isArray,VE=Object.prototype.hasOwnProperty,zg={current:null},FE={key:!0,ref:!0,__self:!0,__source:!0};function jE(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)VE.call(e,i)&&!FE.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:tc,type:t,key:o,ref:a,props:r,_owner:zg.current}}function tR(t,e){return{$$typeof:tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $g(t){return typeof t=="object"&&t!==null&&t.$$typeof===tc}function nR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uv=/\/+/g;function np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nR(""+t.key):e.toString(36)}function Lh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case tc:case W1:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+np(a,0):i,Bv(r)?(n="",t!=null&&(n=t.replace(Uv,"$&/")+"/"),Lh(r,e,n,"",function(f){return f})):r!=null&&($g(r)&&(r=tR(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Uv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Bv(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+np(o,u);a+=Lh(o,e,n,c,r)}else if(c=eR(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+np(o,u++),a+=Lh(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function sh(t,e,n){if(t==null)return t;var i=[],r=0;return Lh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function iR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},bh={transition:null},rR={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:bh,ReactCurrentOwner:zg};function BE(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:sh,forEach:function(t,e,n){sh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sh(t,function(){e++}),e},toArray:function(t){return sh(t,function(e){return e})||[]},only:function(t){if(!$g(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=za;Ae.Fragment=H1;Ae.Profiler=G1;Ae.PureComponent=Bg;Ae.StrictMode=q1;Ae.Suspense=Y1;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rR;Ae.act=BE;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ME({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=zg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)VE.call(e,c)&&!FE.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:tc,type:t.type,key:r,ref:o,props:i,_owner:a}};Ae.createContext=function(t){return t={$$typeof:Z1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K1,_context:t},t.Consumer=t};Ae.createElement=jE;Ae.createFactory=function(t){var e=jE.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:Q1,render:t}};Ae.isValidElement=$g;Ae.lazy=function(t){return{$$typeof:J1,_payload:{_status:-1,_result:t},_init:iR}};Ae.memo=function(t,e){return{$$typeof:X1,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=bh.transition;bh.transition={};try{t()}finally{bh.transition=e}};Ae.unstable_act=BE;Ae.useCallback=function(t,e){return tn.current.useCallback(t,e)};Ae.useContext=function(t){return tn.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return tn.current.useEffect(t,e)};Ae.useId=function(){return tn.current.useId()};Ae.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return tn.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};Ae.useRef=function(t){return tn.current.useRef(t)};Ae.useState=function(t){return tn.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return tn.current.useTransition()};Ae.version="18.3.1";bE.exports=Ae;var U=bE.exports;const Hs=kE(U),sR=z1({__proto__:null,default:Hs},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR=U,aR=Symbol.for("react.element"),lR=Symbol.for("react.fragment"),uR=Object.prototype.hasOwnProperty,cR=oR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hR={key:!0,ref:!0,__self:!0,__source:!0};function UE(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)uR.call(e,i)&&!hR.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:aR,type:t,key:o,ref:a,props:r,_owner:cR.current}}Yd.Fragment=lR;Yd.jsx=UE;Yd.jsxs=UE;LE.exports=Yd;var P=LE.exports,zE={exports:{}},Sn={},$E={exports:{}},WE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ae){var J=K.length;K.push(ae);e:for(;0<J;){var te=J-1>>>1,pe=K[te];if(0<r(pe,ae))K[te]=ae,K[J]=pe,J=te;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ae=K[0],J=K.pop();if(J!==ae){K[0]=J;e:for(var te=0,pe=K.length,Pe=pe>>>1;te<Pe;){var De=2*(te+1)-1,Ee=K[De],ce=De+1,st=K[ce];if(0>r(Ee,J))ce<pe&&0>r(st,Ee)?(K[te]=st,K[ce]=J,te=ce):(K[te]=Ee,K[De]=J,te=De);else if(ce<pe&&0>r(st,J))K[te]=st,K[ce]=J,te=ce;else break e}}return ae}function r(K,ae){var J=K.sortIndex-ae.sortIndex;return J!==0?J:K.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],f=[],m=1,g=null,v=3,T=!1,A=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(K){for(var ae=n(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=K)i(f),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=n(f)}}function B(K){if(k=!1,C(K),!A)if(n(c)!==null)A=!0,Se(G);else{var ae=n(f);ae!==null&&Ke(B,ae.startTime-K)}}function G(K,ae){A=!1,k&&(k=!1,b(I),I=-1),T=!0;var J=v;try{for(C(ae),g=n(c);g!==null&&(!(g.expirationTime>ae)||K&&!F());){var te=g.callback;if(typeof te=="function"){g.callback=null,v=g.priorityLevel;var pe=te(g.expirationTime<=ae);ae=t.unstable_now(),typeof pe=="function"?g.callback=pe:g===n(c)&&i(c),C(ae)}else i(c);g=n(c)}if(g!==null)var Pe=!0;else{var De=n(f);De!==null&&Ke(B,De.startTime-ae),Pe=!1}return Pe}finally{g=null,v=J,T=!1}}var W=!1,R=null,I=-1,D=5,M=-1;function F(){return!(t.unstable_now()-M<D)}function j(){if(R!==null){var K=t.unstable_now();M=K;var ae=!0;try{ae=R(!0,K)}finally{ae?N():(W=!1,R=null)}}else W=!1}var N;if(typeof x=="function")N=function(){x(j)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,ze=Te.port2;Te.port1.onmessage=j,N=function(){ze.postMessage(null)}}else N=function(){V(j,0)};function Se(K){R=K,W||(W=!0,N())}function Ke(K,ae){I=V(function(){K(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){A||T||(A=!0,Se(G))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(K){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var J=v;v=ae;try{return K()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=v;v=K;try{return ae()}finally{v=J}},t.unstable_scheduleCallback=function(K,ae,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,K){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=J+pe,K={id:m++,callback:ae,priorityLevel:K,startTime:J,expirationTime:pe,sortIndex:-1},J>te?(K.sortIndex=J,e(f,K),n(c)===null&&K===n(f)&&(k?(b(I),I=-1):k=!0,Ke(B,J-te))):(K.sortIndex=pe,e(c,K),A||T||(A=!0,Se(G))),K},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(K){var ae=v;return function(){var J=v;v=ae;try{return K.apply(this,arguments)}finally{v=J}}}})(WE);$E.exports=WE;var dR=$E.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=U,Pn=dR;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HE=new Set,Eu={};function ro(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(Eu[t]=e,t=0;t<e.length;t++)HE.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,pR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zv={},$v={};function mR(t){return rm.call($v,t)?!0:rm.call(zv,t)?!1:pR.test(t)?$v[t]=!0:(zv[t]=!0,!1)}function gR(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _R(t,e,n,i){if(e===null||typeof e>"u"||gR(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wg=/[\-:]([a-z])/g;function Hg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wg,Hg);Ot[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wg,Hg);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wg,Hg);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function qg(t,e,n,i){var r=Ot.hasOwnProperty(e)?Ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_R(e,n,r,i)&&(n=null),i||r===null?mR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ur=fR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oh=Symbol.for("react.element"),Xo=Symbol.for("react.portal"),Jo=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),qE=Symbol.for("react.provider"),GE=Symbol.for("react.context"),Kg=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),am=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),KE=Symbol.for("react.offscreen"),Wv=Symbol.iterator;function Nl(t){return t===null||typeof t!="object"?null:(t=Wv&&t[Wv]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,ip;function ql(t){if(ip===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ip=e&&e[1]||""}return`
`+ip+t}var rp=!1;function sp(t,e){if(!t||rp)return"";rp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{rp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ql(t):""}function yR(t){switch(t.tag){case 5:return ql(t.type);case 16:return ql("Lazy");case 13:return ql("Suspense");case 19:return ql("SuspenseList");case 0:case 2:case 15:return t=sp(t.type,!1),t;case 11:return t=sp(t.type.render,!1),t;case 1:return t=sp(t.type,!0),t;default:return""}}function lm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jo:return"Fragment";case Xo:return"Portal";case sm:return"Profiler";case Gg:return"StrictMode";case om:return"Suspense";case am:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GE:return(t.displayName||"Context")+".Consumer";case qE:return(t._context.displayName||"Context")+".Provider";case Kg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zg:return e=t.displayName||null,e!==null?e:lm(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return lm(t(e))}catch{}}return null}function vR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lm(e);case 8:return e===Gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ZE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wR(t){var e=ZE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ah(t){t._valueTracker||(t._valueTracker=wR(t))}function QE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ZE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ed(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function um(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YE(t,e){e=e.checked,e!=null&&qg(t,"checked",e,!1)}function cm(t,e){YE(t,e);var n=Yr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hm(t,e.type,n):e.hasOwnProperty("defaultValue")&&hm(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hm(t,e,n){(e!=="number"||ed(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gl=Array.isArray;function ma(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function dm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Gl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function XE(t,e){var n=Yr(e.value),i=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Kv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lh,eP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lh=lh||document.createElement("div"),lh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var iu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TR=["Webkit","ms","Moz","O"];Object.keys(iu).forEach(function(t){TR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),iu[e]=iu[t]})});function tP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||iu.hasOwnProperty(t)&&iu[t]?(""+e).trim():e+"px"}function nP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=tP(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var ER=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pm(t,e){if(e){if(ER[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function mm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gm=null;function Qg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _m=null,ga=null,_a=null;function Zv(t){if(t=rc(t)){if(typeof _m!="function")throw Error(X(280));var e=t.stateNode;e&&(e=nf(e),_m(t.stateNode,t.type,e))}}function iP(t){ga?_a?_a.push(t):_a=[t]:ga=t}function rP(){if(ga){var t=ga,e=_a;if(_a=ga=null,Zv(t),e)for(t=0;t<e.length;t++)Zv(e[t])}}function sP(t,e){return t(e)}function oP(){}var op=!1;function aP(t,e,n){if(op)return t(e,n);op=!0;try{return sP(t,e,n)}finally{op=!1,(ga!==null||_a!==null)&&(oP(),rP())}}function Iu(t,e){var n=t.stateNode;if(n===null)return null;var i=nf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var ym=!1;if(er)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){ym=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{ym=!1}function PR(t,e,n,i,r,o,a,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var ru=!1,td=null,nd=!1,vm=null,IR={onError:function(t){ru=!0,td=t}};function SR(t,e,n,i,r,o,a,u,c){ru=!1,td=null,PR.apply(IR,arguments)}function xR(t,e,n,i,r,o,a,u,c){if(SR.apply(this,arguments),ru){if(ru){var f=td;ru=!1,td=null}else throw Error(X(198));nd||(nd=!0,vm=f)}}function so(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qv(t){if(so(t)!==t)throw Error(X(188))}function AR(t){var e=t.alternate;if(!e){if(e=so(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Qv(r),t;if(o===i)return Qv(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function uP(t){return t=AR(t),t!==null?cP(t):null}function cP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cP(t);if(e!==null)return e;t=t.sibling}return null}var hP=Pn.unstable_scheduleCallback,Yv=Pn.unstable_cancelCallback,CR=Pn.unstable_shouldYield,RR=Pn.unstable_requestPaint,ht=Pn.unstable_now,kR=Pn.unstable_getCurrentPriorityLevel,Yg=Pn.unstable_ImmediatePriority,dP=Pn.unstable_UserBlockingPriority,id=Pn.unstable_NormalPriority,LR=Pn.unstable_LowPriority,fP=Pn.unstable_IdlePriority,Xd=null,Ei=null;function bR(t){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(Xd,t,void 0,(t.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:NR,DR=Math.log,MR=Math.LN2;function NR(t){return t>>>=0,t===0?32:31-(DR(t)/MR|0)|0}var uh=64,ch=4194304;function Kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Kl(u):(o&=a,o!==0&&(i=Kl(o)))}else a=n&~r,a!==0?i=Kl(a):o!==0&&(i=Kl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ii(e),r=1<<n,i|=t[n],e&=~r;return i}function OR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VR(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ii(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=OR(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function wm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pP(){var t=uh;return uh<<=1,!(uh&4194240)&&(uh=64),t}function ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ii(e),t[e]=n}function FR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ii(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Xg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ii(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ve=0;function mP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gP,Jg,_P,yP,vP,Tm=!1,hh=[],Fr=null,jr=null,Br=null,Su=new Map,xu=new Map,Cr=[],jR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xv(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(e.pointerId)}}function Vl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=rc(e),e!==null&&Jg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function BR(t,e,n,i,r){switch(e){case"focusin":return Fr=Vl(Fr,t,e,n,i,r),!0;case"dragenter":return jr=Vl(jr,t,e,n,i,r),!0;case"mouseover":return Br=Vl(Br,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Su.set(o,Vl(Su.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,xu.set(o,Vl(xu.get(o)||null,t,e,n,i,r)),!0}return!1}function wP(t){var e=Ms(t.target);if(e!==null){var n=so(e);if(n!==null){if(e=n.tag,e===13){if(e=lP(n),e!==null){t.blockedOn=e,vP(t.priority,function(){_P(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Em(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);gm=i,n.target.dispatchEvent(i),gm=null}else return e=rc(n),e!==null&&Jg(e),t.blockedOn=n,!1;e.shift()}return!0}function Jv(t,e,n){Dh(t)&&n.delete(e)}function UR(){Tm=!1,Fr!==null&&Dh(Fr)&&(Fr=null),jr!==null&&Dh(jr)&&(jr=null),Br!==null&&Dh(Br)&&(Br=null),Su.forEach(Jv),xu.forEach(Jv)}function Fl(t,e){t.blockedOn===e&&(t.blockedOn=null,Tm||(Tm=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,UR)))}function Au(t){function e(r){return Fl(r,t)}if(0<hh.length){Fl(hh[0],t);for(var n=1;n<hh.length;n++){var i=hh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fr!==null&&Fl(Fr,t),jr!==null&&Fl(jr,t),Br!==null&&Fl(Br,t),Su.forEach(e),xu.forEach(e),n=0;n<Cr.length;n++)i=Cr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)wP(n),n.blockedOn===null&&Cr.shift()}var ya=ur.ReactCurrentBatchConfig,sd=!0;function zR(t,e,n,i){var r=Ve,o=ya.transition;ya.transition=null;try{Ve=1,e_(t,e,n,i)}finally{Ve=r,ya.transition=o}}function $R(t,e,n,i){var r=Ve,o=ya.transition;ya.transition=null;try{Ve=4,e_(t,e,n,i)}finally{Ve=r,ya.transition=o}}function e_(t,e,n,i){if(sd){var r=Em(t,e,n,i);if(r===null)_p(t,e,i,od,n),Xv(t,i);else if(BR(r,t,e,n,i))i.stopPropagation();else if(Xv(t,i),e&4&&-1<jR.indexOf(t)){for(;r!==null;){var o=rc(r);if(o!==null&&gP(o),o=Em(t,e,n,i),o===null&&_p(t,e,i,od,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else _p(t,e,i,null,n)}}var od=null;function Em(t,e,n,i){if(od=null,t=Qg(i),t=Ms(t),t!==null)if(e=so(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return od=t,null}function TP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kR()){case Yg:return 1;case dP:return 4;case id:case LR:return 16;case fP:return 536870912;default:return 16}default:return 16}}var Mr=null,t_=null,Mh=null;function EP(){if(Mh)return Mh;var t,e=t_,n=e.length,i,r="value"in Mr?Mr.value:Mr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Mh=r.slice(t,1<i?1-i:void 0)}function Nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dh(){return!0}function ew(){return!1}function xn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dh:ew,this.isPropagationStopped=ew,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dh)},persist:function(){},isPersistent:dh}),e}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n_=xn($a),ic=it({},$a,{view:0,detail:0}),WR=xn(ic),lp,up,jl,Jd=it({},ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:i_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jl&&(jl&&t.type==="mousemove"?(lp=t.screenX-jl.screenX,up=t.screenY-jl.screenY):up=lp=0,jl=t),lp)},movementY:function(t){return"movementY"in t?t.movementY:up}}),tw=xn(Jd),HR=it({},Jd,{dataTransfer:0}),qR=xn(HR),GR=it({},ic,{relatedTarget:0}),cp=xn(GR),KR=it({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),ZR=xn(KR),QR=it({},$a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YR=xn(QR),XR=it({},$a,{data:0}),nw=xn(XR),JR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tk[t])?!!e[t]:!1}function i_(){return nk}var ik=it({},ic,{key:function(t){if(t.key){var e=JR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ek[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:i_,charCode:function(t){return t.type==="keypress"?Nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rk=xn(ik),sk=it({},Jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iw=xn(sk),ok=it({},ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:i_}),ak=xn(ok),lk=it({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),uk=xn(lk),ck=it({},Jd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hk=xn(ck),dk=[9,13,27,32],r_=er&&"CompositionEvent"in window,su=null;er&&"documentMode"in document&&(su=document.documentMode);var fk=er&&"TextEvent"in window&&!su,PP=er&&(!r_||su&&8<su&&11>=su),rw=" ",sw=!1;function IP(t,e){switch(t){case"keyup":return dk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ea=!1;function pk(t,e){switch(t){case"compositionend":return SP(e);case"keypress":return e.which!==32?null:(sw=!0,rw);case"textInput":return t=e.data,t===rw&&sw?null:t;default:return null}}function mk(t,e){if(ea)return t==="compositionend"||!r_&&IP(t,e)?(t=EP(),Mh=t_=Mr=null,ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PP&&e.locale!=="ko"?null:e.data;default:return null}}var gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ow(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gk[t.type]:e==="textarea"}function xP(t,e,n,i){iP(i),e=ad(e,"onChange"),0<e.length&&(n=new n_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ou=null,Cu=null;function _k(t){VP(t,0)}function ef(t){var e=ia(t);if(QE(e))return t}function yk(t,e){if(t==="change")return e}var AP=!1;if(er){var hp;if(er){var dp="oninput"in document;if(!dp){var aw=document.createElement("div");aw.setAttribute("oninput","return;"),dp=typeof aw.oninput=="function"}hp=dp}else hp=!1;AP=hp&&(!document.documentMode||9<document.documentMode)}function lw(){ou&&(ou.detachEvent("onpropertychange",CP),Cu=ou=null)}function CP(t){if(t.propertyName==="value"&&ef(Cu)){var e=[];xP(e,Cu,t,Qg(t)),aP(_k,e)}}function vk(t,e,n){t==="focusin"?(lw(),ou=e,Cu=n,ou.attachEvent("onpropertychange",CP)):t==="focusout"&&lw()}function wk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ef(Cu)}function Tk(t,e){if(t==="click")return ef(e)}function Ek(t,e){if(t==="input"||t==="change")return ef(e)}function Pk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:Pk;function Ru(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!rm.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function uw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cw(t,e){var n=uw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uw(n)}}function RP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?RP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kP(){for(var t=window,e=ed();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ed(t.document)}return e}function s_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ik(t){var e=kP(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&RP(n.ownerDocument.documentElement,n)){if(i!==null&&s_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=cw(n,o);var a=cw(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sk=er&&"documentMode"in document&&11>=document.documentMode,ta=null,Pm=null,au=null,Im=!1;function hw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Im||ta==null||ta!==ed(i)||(i=ta,"selectionStart"in i&&s_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),au&&Ru(au,i)||(au=i,i=ad(Pm,"onSelect"),0<i.length&&(e=new n_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ta)))}function fh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var na={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionend:fh("Transition","TransitionEnd")},fp={},LP={};er&&(LP=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function tf(t){if(fp[t])return fp[t];if(!na[t])return t;var e=na[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LP)return fp[t]=e[n];return t}var bP=tf("animationend"),DP=tf("animationiteration"),MP=tf("animationstart"),NP=tf("transitionend"),OP=new Map,dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){OP.set(t,e),ro(e,[t])}for(var pp=0;pp<dw.length;pp++){var mp=dw[pp],xk=mp.toLowerCase(),Ak=mp[0].toUpperCase()+mp.slice(1);ss(xk,"on"+Ak)}ss(bP,"onAnimationEnd");ss(DP,"onAnimationIteration");ss(MP,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(NP,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function fw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,xR(i,e,void 0,t),t.currentTarget=null}function VP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;fw(r,u,f),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;fw(r,u,f),o=c}}}if(nd)throw t=vm,nd=!1,vm=null,t}function We(t,e){var n=e[Rm];n===void 0&&(n=e[Rm]=new Set);var i=t+"__bubble";n.has(i)||(FP(e,t,2,!1),n.add(i))}function gp(t,e,n){var i=0;e&&(i|=4),FP(n,t,i,e)}var ph="_reactListening"+Math.random().toString(36).slice(2);function ku(t){if(!t[ph]){t[ph]=!0,HE.forEach(function(n){n!=="selectionchange"&&(Ck.has(n)||gp(n,!1,t),gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ph]||(e[ph]=!0,gp("selectionchange",!1,e))}}function FP(t,e,n,i){switch(TP(e)){case 1:var r=zR;break;case 4:r=$R;break;default:r=e_}n=r.bind(null,e,n,t),r=void 0,!ym||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function _p(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Ms(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}aP(function(){var f=o,m=Qg(n),g=[];e:{var v=OP.get(t);if(v!==void 0){var T=n_,A=t;switch(t){case"keypress":if(Nh(n)===0)break e;case"keydown":case"keyup":T=rk;break;case"focusin":A="focus",T=cp;break;case"focusout":A="blur",T=cp;break;case"beforeblur":case"afterblur":T=cp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=tw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=qR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=ak;break;case bP:case DP:case MP:T=ZR;break;case NP:T=uk;break;case"scroll":T=WR;break;case"wheel":T=hk;break;case"copy":case"cut":case"paste":T=YR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=iw}var k=(e&4)!==0,V=!k&&t==="scroll",b=k?v!==null?v+"Capture":null:v;k=[];for(var x=f,C;x!==null;){C=x;var B=C.stateNode;if(C.tag===5&&B!==null&&(C=B,b!==null&&(B=Iu(x,b),B!=null&&k.push(Lu(x,B,C)))),V)break;x=x.return}0<k.length&&(v=new T(v,A,null,n,m),g.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==gm&&(A=n.relatedTarget||n.fromElement)&&(Ms(A)||A[tr]))break e;if((T||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,T?(A=n.relatedTarget||n.toElement,T=f,A=A?Ms(A):null,A!==null&&(V=so(A),A!==V||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=f),T!==A)){if(k=tw,B="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(k=iw,B="onPointerLeave",b="onPointerEnter",x="pointer"),V=T==null?v:ia(T),C=A==null?v:ia(A),v=new k(B,x+"leave",T,n,m),v.target=V,v.relatedTarget=C,B=null,Ms(m)===f&&(k=new k(b,x+"enter",A,n,m),k.target=C,k.relatedTarget=V,B=k),V=B,T&&A)t:{for(k=T,b=A,x=0,C=k;C;C=Go(C))x++;for(C=0,B=b;B;B=Go(B))C++;for(;0<x-C;)k=Go(k),x--;for(;0<C-x;)b=Go(b),C--;for(;x--;){if(k===b||b!==null&&k===b.alternate)break t;k=Go(k),b=Go(b)}k=null}else k=null;T!==null&&pw(g,v,T,k,!1),A!==null&&V!==null&&pw(g,V,A,k,!0)}}e:{if(v=f?ia(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var G=yk;else if(ow(v))if(AP)G=Ek;else{G=wk;var W=vk}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(G=Tk);if(G&&(G=G(t,f))){xP(g,G,n,m);break e}W&&W(t,v,f),t==="focusout"&&(W=v._wrapperState)&&W.controlled&&v.type==="number"&&hm(v,"number",v.value)}switch(W=f?ia(f):window,t){case"focusin":(ow(W)||W.contentEditable==="true")&&(ta=W,Pm=f,au=null);break;case"focusout":au=Pm=ta=null;break;case"mousedown":Im=!0;break;case"contextmenu":case"mouseup":case"dragend":Im=!1,hw(g,n,m);break;case"selectionchange":if(Sk)break;case"keydown":case"keyup":hw(g,n,m)}var R;if(r_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ea?IP(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(PP&&n.locale!=="ko"&&(ea||I!=="onCompositionStart"?I==="onCompositionEnd"&&ea&&(R=EP()):(Mr=m,t_="value"in Mr?Mr.value:Mr.textContent,ea=!0)),W=ad(f,I),0<W.length&&(I=new nw(I,t,null,n,m),g.push({event:I,listeners:W}),R?I.data=R:(R=SP(n),R!==null&&(I.data=R)))),(R=fk?pk(t,n):mk(t,n))&&(f=ad(f,"onBeforeInput"),0<f.length&&(m=new nw("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}VP(g,e)})}function Lu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ad(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Iu(t,n),o!=null&&i.unshift(Lu(t,o,r)),o=Iu(t,e),o!=null&&i.push(Lu(t,o,r))),t=t.return}return i}function Go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pw(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&f!==null&&(u=f,r?(c=Iu(n,o),c!=null&&a.unshift(Lu(n,c,u))):r||(c=Iu(n,o),c!=null&&a.push(Lu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Rk=/\r\n?/g,kk=/\u0000|\uFFFD/g;function mw(t){return(typeof t=="string"?t:""+t).replace(Rk,`
`).replace(kk,"")}function mh(t,e,n){if(e=mw(e),mw(t)!==e&&n)throw Error(X(425))}function ld(){}var Sm=null,xm=null;function Am(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cm=typeof setTimeout=="function"?setTimeout:void 0,Lk=typeof clearTimeout=="function"?clearTimeout:void 0,gw=typeof Promise=="function"?Promise:void 0,bk=typeof queueMicrotask=="function"?queueMicrotask:typeof gw<"u"?function(t){return gw.resolve(null).then(t).catch(Dk)}:Cm;function Dk(t){setTimeout(function(){throw t})}function yp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Au(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Au(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _w(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),wi="__reactFiber$"+Wa,bu="__reactProps$"+Wa,tr="__reactContainer$"+Wa,Rm="__reactEvents$"+Wa,Mk="__reactListeners$"+Wa,Nk="__reactHandles$"+Wa;function Ms(t){var e=t[wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_w(t);t!==null;){if(n=t[wi])return n;t=_w(t)}return e}t=n,n=t.parentNode}return null}function rc(t){return t=t[wi]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ia(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function nf(t){return t[bu]||null}var km=[],ra=-1;function os(t){return{current:t}}function qe(t){0>ra||(t.current=km[ra],km[ra]=null,ra--)}function $e(t,e){ra++,km[ra]=t.current,t.current=e}var Xr={},qt=os(Xr),un=os(!1),qs=Xr;function xa(t,e){var n=t.type.contextTypes;if(!n)return Xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function cn(t){return t=t.childContextTypes,t!=null}function ud(){qe(un),qe(qt)}function yw(t,e,n){if(qt.current!==Xr)throw Error(X(168));$e(qt,e),$e(un,n)}function jP(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,vR(t)||"Unknown",r));return it({},n,i)}function cd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,qs=qt.current,$e(qt,t),$e(un,un.current),!0}function vw(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=jP(t,e,qs),i.__reactInternalMemoizedMergedChildContext=t,qe(un),qe(qt),$e(qt,t)):qe(un),$e(un,n)}var zi=null,rf=!1,vp=!1;function BP(t){zi===null?zi=[t]:zi.push(t)}function Ok(t){rf=!0,BP(t)}function as(){if(!vp&&zi!==null){vp=!0;var t=0,e=Ve;try{var n=zi;for(Ve=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}zi=null,rf=!1}catch(r){throw zi!==null&&(zi=zi.slice(t+1)),hP(Yg,as),r}finally{Ve=e,vp=!1}}return null}var sa=[],oa=0,hd=null,dd=0,Fn=[],jn=0,Gs=null,$i=1,Wi="";function Rs(t,e){sa[oa++]=dd,sa[oa++]=hd,hd=t,dd=e}function UP(t,e,n){Fn[jn++]=$i,Fn[jn++]=Wi,Fn[jn++]=Gs,Gs=t;var i=$i;t=Wi;var r=32-ii(i)-1;i&=~(1<<r),n+=1;var o=32-ii(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,$i=1<<32-ii(e)+r|n<<r|i,Wi=o+t}else $i=1<<o|n<<r|i,Wi=t}function o_(t){t.return!==null&&(Rs(t,1),UP(t,1,0))}function a_(t){for(;t===hd;)hd=sa[--oa],sa[oa]=null,dd=sa[--oa],sa[oa]=null;for(;t===Gs;)Gs=Fn[--jn],Fn[jn]=null,Wi=Fn[--jn],Fn[jn]=null,$i=Fn[--jn],Fn[jn]=null}var Tn=null,vn=null,Ye=!1,ti=null;function zP(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ww(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,vn=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gs!==null?{id:$i,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,vn=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bm(t){if(Ye){var e=vn;if(e){var n=e;if(!ww(t,e)){if(Lm(t))throw Error(X(418));e=Ur(n.nextSibling);var i=Tn;e&&ww(t,e)?zP(i,n):(t.flags=t.flags&-4097|2,Ye=!1,Tn=t)}}else{if(Lm(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ye=!1,Tn=t}}}function Tw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function gh(t){if(t!==Tn)return!1;if(!Ye)return Tw(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Am(t.type,t.memoizedProps)),e&&(e=vn)){if(Lm(t))throw $P(),Error(X(418));for(;e;)zP(t,e),e=Ur(e.nextSibling)}if(Tw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=Tn?Ur(t.stateNode.nextSibling):null;return!0}function $P(){for(var t=vn;t;)t=Ur(t.nextSibling)}function Aa(){vn=Tn=null,Ye=!1}function l_(t){ti===null?ti=[t]:ti.push(t)}var Vk=ur.ReactCurrentBatchConfig;function Bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function _h(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ew(t){var e=t._init;return e(t._payload)}function WP(t){function e(b,x){if(t){var C=b.deletions;C===null?(b.deletions=[x],b.flags|=16):C.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function i(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function r(b,x){return b=Hr(b,x),b.index=0,b.sibling=null,b}function o(b,x,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<x?(b.flags|=2,x):C):(b.flags|=2,x)):(b.flags|=1048576,x)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,x,C,B){return x===null||x.tag!==6?(x=xp(C,b.mode,B),x.return=b,x):(x=r(x,C),x.return=b,x)}function c(b,x,C,B){var G=C.type;return G===Jo?m(b,x,C.props.children,B,C.key):x!==null&&(x.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Sr&&Ew(G)===x.type)?(B=r(x,C.props),B.ref=Bl(b,x,C),B.return=b,B):(B=zh(C.type,C.key,C.props,null,b.mode,B),B.ref=Bl(b,x,C),B.return=b,B)}function f(b,x,C,B){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=Ap(C,b.mode,B),x.return=b,x):(x=r(x,C.children||[]),x.return=b,x)}function m(b,x,C,B,G){return x===null||x.tag!==7?(x=zs(C,b.mode,B,G),x.return=b,x):(x=r(x,C),x.return=b,x)}function g(b,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return x=xp(""+x,b.mode,C),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oh:return C=zh(x.type,x.key,x.props,null,b.mode,C),C.ref=Bl(b,null,x),C.return=b,C;case Xo:return x=Ap(x,b.mode,C),x.return=b,x;case Sr:var B=x._init;return g(b,B(x._payload),C)}if(Gl(x)||Nl(x))return x=zs(x,b.mode,C,null),x.return=b,x;_h(b,x)}return null}function v(b,x,C,B){var G=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return G!==null?null:u(b,x,""+C,B);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case oh:return C.key===G?c(b,x,C,B):null;case Xo:return C.key===G?f(b,x,C,B):null;case Sr:return G=C._init,v(b,x,G(C._payload),B)}if(Gl(C)||Nl(C))return G!==null?null:m(b,x,C,B,null);_h(b,C)}return null}function T(b,x,C,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return b=b.get(C)||null,u(x,b,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case oh:return b=b.get(B.key===null?C:B.key)||null,c(x,b,B,G);case Xo:return b=b.get(B.key===null?C:B.key)||null,f(x,b,B,G);case Sr:var W=B._init;return T(b,x,C,W(B._payload),G)}if(Gl(B)||Nl(B))return b=b.get(C)||null,m(x,b,B,G,null);_h(x,B)}return null}function A(b,x,C,B){for(var G=null,W=null,R=x,I=x=0,D=null;R!==null&&I<C.length;I++){R.index>I?(D=R,R=null):D=R.sibling;var M=v(b,R,C[I],B);if(M===null){R===null&&(R=D);break}t&&R&&M.alternate===null&&e(b,R),x=o(M,x,I),W===null?G=M:W.sibling=M,W=M,R=D}if(I===C.length)return n(b,R),Ye&&Rs(b,I),G;if(R===null){for(;I<C.length;I++)R=g(b,C[I],B),R!==null&&(x=o(R,x,I),W===null?G=R:W.sibling=R,W=R);return Ye&&Rs(b,I),G}for(R=i(b,R);I<C.length;I++)D=T(R,b,I,C[I],B),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?I:D.key),x=o(D,x,I),W===null?G=D:W.sibling=D,W=D);return t&&R.forEach(function(F){return e(b,F)}),Ye&&Rs(b,I),G}function k(b,x,C,B){var G=Nl(C);if(typeof G!="function")throw Error(X(150));if(C=G.call(C),C==null)throw Error(X(151));for(var W=G=null,R=x,I=x=0,D=null,M=C.next();R!==null&&!M.done;I++,M=C.next()){R.index>I?(D=R,R=null):D=R.sibling;var F=v(b,R,M.value,B);if(F===null){R===null&&(R=D);break}t&&R&&F.alternate===null&&e(b,R),x=o(F,x,I),W===null?G=F:W.sibling=F,W=F,R=D}if(M.done)return n(b,R),Ye&&Rs(b,I),G;if(R===null){for(;!M.done;I++,M=C.next())M=g(b,M.value,B),M!==null&&(x=o(M,x,I),W===null?G=M:W.sibling=M,W=M);return Ye&&Rs(b,I),G}for(R=i(b,R);!M.done;I++,M=C.next())M=T(R,b,I,M.value,B),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?I:M.key),x=o(M,x,I),W===null?G=M:W.sibling=M,W=M);return t&&R.forEach(function(j){return e(b,j)}),Ye&&Rs(b,I),G}function V(b,x,C,B){if(typeof C=="object"&&C!==null&&C.type===Jo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case oh:e:{for(var G=C.key,W=x;W!==null;){if(W.key===G){if(G=C.type,G===Jo){if(W.tag===7){n(b,W.sibling),x=r(W,C.props.children),x.return=b,b=x;break e}}else if(W.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Sr&&Ew(G)===W.type){n(b,W.sibling),x=r(W,C.props),x.ref=Bl(b,W,C),x.return=b,b=x;break e}n(b,W);break}else e(b,W);W=W.sibling}C.type===Jo?(x=zs(C.props.children,b.mode,B,C.key),x.return=b,b=x):(B=zh(C.type,C.key,C.props,null,b.mode,B),B.ref=Bl(b,x,C),B.return=b,b=B)}return a(b);case Xo:e:{for(W=C.key;x!==null;){if(x.key===W)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(b,x.sibling),x=r(x,C.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=Ap(C,b.mode,B),x.return=b,b=x}return a(b);case Sr:return W=C._init,V(b,x,W(C._payload),B)}if(Gl(C))return A(b,x,C,B);if(Nl(C))return k(b,x,C,B);_h(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,x!==null&&x.tag===6?(n(b,x.sibling),x=r(x,C),x.return=b,b=x):(n(b,x),x=xp(C,b.mode,B),x.return=b,b=x),a(b)):n(b,x)}return V}var Ca=WP(!0),HP=WP(!1),fd=os(null),pd=null,aa=null,u_=null;function c_(){u_=aa=pd=null}function h_(t){var e=fd.current;qe(fd),t._currentValue=e}function Dm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function va(t,e){pd=t,u_=aa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Wn(t){var e=t._currentValue;if(u_!==t)if(t={context:t,memoizedValue:e,next:null},aa===null){if(pd===null)throw Error(X(308));aa=t,pd.dependencies={lanes:0,firstContext:t}}else aa=aa.next=t;return e}var Ns=null;function d_(t){Ns===null?Ns=[t]:Ns.push(t)}function qP(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,d_(e)):(n.next=r.next,r.next=n),e.interleaved=n,nr(t,i)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function f_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,nr(t,n)}return r=i.interleaved,r===null?(e.next=e,d_(i)):(e.next=r.next,r.next=e),i.interleaved=e,nr(t,n)}function Oh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xg(t,n)}}function Pw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function md(t,e,n,i){var r=t.updateQueue;xr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,f=c.next;c.next=null,a===null?o=f:a.next=f,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=c))}if(o!==null){var g=r.baseState;a=0,m=f=c=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,k=u;switch(v=e,T=n,k.tag){case 1:if(A=k.payload,typeof A=="function"){g=A.call(T,g,v);break e}g=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=k.payload,v=typeof A=="function"?A.call(T,g,v):A,v==null)break e;g=it({},g,v);break e;case 2:xr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,c=g):m=m.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(c=g),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Zs|=a,t.lanes=a,t.memoizedState=g}}function Iw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var sc={},Pi=os(sc),Du=os(sc),Mu=os(sc);function Os(t){if(t===sc)throw Error(X(174));return t}function p_(t,e){switch($e(Mu,e),$e(Du,t),$e(Pi,sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fm(e,t)}qe(Pi),$e(Pi,e)}function Ra(){qe(Pi),qe(Du),qe(Mu)}function KP(t){Os(Mu.current);var e=Os(Pi.current),n=fm(e,t.type);e!==n&&($e(Du,t),$e(Pi,n))}function m_(t){Du.current===t&&(qe(Pi),qe(Du))}var et=os(0);function gd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wp=[];function g_(){for(var t=0;t<wp.length;t++)wp[t]._workInProgressVersionPrimary=null;wp.length=0}var Vh=ur.ReactCurrentDispatcher,Tp=ur.ReactCurrentBatchConfig,Ks=0,nt=null,Tt=null,Ct=null,_d=!1,lu=!1,Nu=0,Fk=0;function jt(){throw Error(X(321))}function __(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function y_(t,e,n,i,r,o){if(Ks=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vh.current=t===null||t.memoizedState===null?zk:$k,t=n(i,r),lu){o=0;do{if(lu=!1,Nu=0,25<=o)throw Error(X(301));o+=1,Ct=Tt=null,e.updateQueue=null,Vh.current=Wk,t=n(i,r)}while(lu)}if(Vh.current=yd,e=Tt!==null&&Tt.next!==null,Ks=0,Ct=Tt=nt=null,_d=!1,e)throw Error(X(300));return t}function v_(){var t=Nu!==0;return Nu=0,t}function yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?nt.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Hn(){if(Tt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Ct===null?nt.memoizedState:Ct.next;if(e!==null)Ct=e,Tt=t;else{if(t===null)throw Error(X(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ct===null?nt.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Ou(t,e){return typeof e=="function"?e(t):e}function Ep(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=Tt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,f=o;do{var m=f.lane;if((Ks&m)===m)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,nt.lanes|=m,Zs|=m}f=f.next}while(f!==null&&f!==o);c===null?a=i:c.next=u,ai(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,nt.lanes|=o,Zs|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pp(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ai(o,e.memoizedState)||(ln=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function ZP(){}function QP(t,e){var n=nt,i=Hn(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,ln=!0),i=i.queue,w_(JP.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,Vu(9,XP.bind(null,n,i,r,e),void 0,null),Rt===null)throw Error(X(349));Ks&30||YP(n,e,r)}return r}function YP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XP(t,e,n,i){e.value=n,e.getSnapshot=i,eI(e)&&tI(t)}function JP(t,e,n){return n(function(){eI(e)&&tI(t)})}function eI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch{return!0}}function tI(t){var e=nr(t,1);e!==null&&ri(e,t,1,-1)}function Sw(t){var e=yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:t},e.queue=t,t=t.dispatch=Uk.bind(null,nt,t),[e.memoizedState,t]}function Vu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function nI(){return Hn().memoizedState}function Fh(t,e,n,i){var r=yi();nt.flags|=t,r.memoizedState=Vu(1|e,n,void 0,i===void 0?null:i)}function sf(t,e,n,i){var r=Hn();i=i===void 0?null:i;var o=void 0;if(Tt!==null){var a=Tt.memoizedState;if(o=a.destroy,i!==null&&__(i,a.deps)){r.memoizedState=Vu(e,n,o,i);return}}nt.flags|=t,r.memoizedState=Vu(1|e,n,o,i)}function xw(t,e){return Fh(8390656,8,t,e)}function w_(t,e){return sf(2048,8,t,e)}function iI(t,e){return sf(4,2,t,e)}function rI(t,e){return sf(4,4,t,e)}function sI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oI(t,e,n){return n=n!=null?n.concat([t]):null,sf(4,4,sI.bind(null,e,t),n)}function T_(){}function aI(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&__(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function lI(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&__(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function uI(t,e,n){return Ks&21?(ai(n,e)||(n=pP(),nt.lanes|=n,Zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function jk(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var i=Tp.transition;Tp.transition={};try{t(!1),e()}finally{Ve=n,Tp.transition=i}}function cI(){return Hn().memoizedState}function Bk(t,e,n){var i=Wr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},hI(t))dI(e,n);else if(n=qP(t,e,n,i),n!==null){var r=Jt();ri(n,t,i,r),fI(n,e,i)}}function Uk(t,e,n){var i=Wr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(hI(t))dI(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ai(u,a)){var c=e.interleaved;c===null?(r.next=r,d_(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=qP(t,e,r,i),n!==null&&(r=Jt(),ri(n,t,i,r),fI(n,e,i))}}function hI(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function dI(t,e){lu=_d=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fI(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xg(t,n)}}var yd={readContext:Wn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},zk={readContext:Wn,useCallback:function(t,e){return yi().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:xw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fh(4194308,4,sI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fh(4,2,t,e)},useMemo:function(t,e){var n=yi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=yi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Bk.bind(null,nt,t),[i.memoizedState,t]},useRef:function(t){var e=yi();return t={current:t},e.memoizedState=t},useState:Sw,useDebugValue:T_,useDeferredValue:function(t){return yi().memoizedState=t},useTransition:function(){var t=Sw(!1),e=t[0];return t=jk.bind(null,t[1]),yi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nt,r=yi();if(Ye){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Rt===null)throw Error(X(349));Ks&30||YP(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,xw(JP.bind(null,i,o,t),[t]),i.flags|=2048,Vu(9,XP.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=yi(),e=Rt.identifierPrefix;if(Ye){var n=Wi,i=$i;n=(i&~(1<<32-ii(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Fk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$k={readContext:Wn,useCallback:aI,useContext:Wn,useEffect:w_,useImperativeHandle:oI,useInsertionEffect:iI,useLayoutEffect:rI,useMemo:lI,useReducer:Ep,useRef:nI,useState:function(){return Ep(Ou)},useDebugValue:T_,useDeferredValue:function(t){var e=Hn();return uI(e,Tt.memoizedState,t)},useTransition:function(){var t=Ep(Ou)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:ZP,useSyncExternalStore:QP,useId:cI,unstable_isNewReconciler:!1},Wk={readContext:Wn,useCallback:aI,useContext:Wn,useEffect:w_,useImperativeHandle:oI,useInsertionEffect:iI,useLayoutEffect:rI,useMemo:lI,useReducer:Pp,useRef:nI,useState:function(){return Pp(Ou)},useDebugValue:T_,useDeferredValue:function(t){var e=Hn();return Tt===null?e.memoizedState=t:uI(e,Tt.memoizedState,t)},useTransition:function(){var t=Pp(Ou)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:ZP,useSyncExternalStore:QP,useId:cI,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var of={isMounted:function(t){return(t=t._reactInternals)?so(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Wr(t),o=Zi(i,r);o.payload=e,n!=null&&(o.callback=n),e=zr(t,o,r),e!==null&&(ri(e,t,r,i),Oh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Wr(t),o=Zi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=zr(t,o,r),e!==null&&(ri(e,t,r,i),Oh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=Wr(t),r=Zi(n,i);r.tag=2,e!=null&&(r.callback=e),e=zr(t,r,i),e!==null&&(ri(e,t,i,n),Oh(e,t,i))}};function Aw(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ru(n,i)||!Ru(r,o):!0}function pI(t,e,n){var i=!1,r=Xr,o=e.contextType;return typeof o=="object"&&o!==null?o=Wn(o):(r=cn(e)?qs:qt.current,i=e.contextTypes,o=(i=i!=null)?xa(t,r):Xr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=of,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Cw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&of.enqueueReplaceState(e,e.state,null)}function Nm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},f_(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Wn(o):(o=cn(e)?qs:qt.current,r.context=xa(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Mm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&of.enqueueReplaceState(r,r.state,null),md(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e){try{var n="",i=e;do n+=yR(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Ip(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Om(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hk=typeof WeakMap=="function"?WeakMap:Map;function mI(t,e,n){n=Zi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){wd||(wd=!0,qm=i),Om(t,e)},n}function gI(t,e,n){n=Zi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Om(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Om(t,e),typeof i!="function"&&($r===null?$r=new Set([this]):$r.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Rw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Hk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=sL.bind(null,t,e,n),e.then(t,t))}function kw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Lw(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zi(-1,1),e.tag=2,zr(n,e,1))),n.lanes|=1),t)}var qk=ur.ReactCurrentOwner,ln=!1;function Yt(t,e,n,i){e.child=t===null?HP(e,null,n,i):Ca(e,t.child,n,i)}function bw(t,e,n,i,r){n=n.render;var o=e.ref;return va(e,r),i=y_(t,e,n,i,o,r),n=v_(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ir(t,e,r)):(Ye&&n&&o_(e),e.flags|=1,Yt(t,e,i,r),e.child)}function Dw(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!R_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,_I(t,e,o,i,r)):(t=zh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ru,n(a,i)&&t.ref===e.ref)return ir(t,e,r)}return e.flags|=1,t=Hr(o,i),t.ref=e.ref,t.return=e,e.child=t}function _I(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Ru(o,i)&&t.ref===e.ref)if(ln=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,ir(t,e,r)}return Vm(t,e,n,i,r)}function yI(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ua,yn),yn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(ua,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(ua,yn),yn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(ua,yn),yn|=i;return Yt(t,e,r,n),e.child}function vI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vm(t,e,n,i,r){var o=cn(n)?qs:qt.current;return o=xa(e,o),va(e,r),n=y_(t,e,n,i,o,r),i=v_(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ir(t,e,r)):(Ye&&i&&o_(e),e.flags|=1,Yt(t,e,n,r),e.child)}function Mw(t,e,n,i,r){if(cn(n)){var o=!0;cd(e)}else o=!1;if(va(e,r),e.stateNode===null)jh(t,e),pI(e,n,i),Nm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Wn(f):(f=cn(n)?qs:qt.current,f=xa(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==f)&&Cw(e,a,i,f),xr=!1;var v=e.memoizedState;a.state=v,md(e,i,a,r),c=e.memoizedState,u!==i||v!==c||un.current||xr?(typeof m=="function"&&(Mm(e,n,m,i),c=e.memoizedState),(u=xr||Aw(e,n,u,i,v,c,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,GP(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Jn(e.type,u),a.props=f,g=e.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wn(c):(c=cn(n)?qs:qt.current,c=xa(e,c));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||v!==c)&&Cw(e,a,i,c),xr=!1,v=e.memoizedState,a.state=v,md(e,i,a,r);var A=e.memoizedState;u!==g||v!==A||un.current||xr?(typeof T=="function"&&(Mm(e,n,T,i),A=e.memoizedState),(f=xr||Aw(e,n,f,i,v,A,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,A,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,A,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=A),a.props=i,a.state=A,a.context=c,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Fm(t,e,n,i,o,r)}function Fm(t,e,n,i,r,o){vI(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&vw(e,n,!1),ir(t,e,o);i=e.stateNode,qk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ca(e,t.child,null,o),e.child=Ca(e,null,u,o)):Yt(t,e,u,o),e.memoizedState=i.state,r&&vw(e,n,!0),e.child}function wI(t){var e=t.stateNode;e.pendingContext?yw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yw(t,e.context,!1),p_(t,e.containerInfo)}function Nw(t,e,n,i,r){return Aa(),l_(r),e.flags|=256,Yt(t,e,n,i),e.child}var jm={dehydrated:null,treeContext:null,retryLane:0};function Bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function TI(t,e,n){var i=e.pendingProps,r=et.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(et,r&1),t===null)return bm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=uf(a,i,0,null),t=zs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Bm(n),e.memoizedState=jm,t):E_(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Gk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Hr(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Hr(u,o):(o=zs(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Bm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=jm,i}return o=t.child,t=o.sibling,i=Hr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function E_(t,e){return e=uf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yh(t,e,n,i){return i!==null&&l_(i),Ca(e,t.child,null,n),t=E_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Ip(Error(X(422))),yh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=uf({mode:"visible",children:i.children},r,0,null),o=zs(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ca(e,t.child,null,a),e.child.memoizedState=Bm(a),e.memoizedState=jm,o);if(!(e.mode&1))return yh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=Ip(o,i,void 0),yh(t,e,a,i)}if(u=(a&t.childLanes)!==0,ln||u){if(i=Rt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,nr(t,r),ri(i,t,r,-1))}return C_(),i=Ip(Error(X(421))),yh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=oL.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,vn=Ur(r.nextSibling),Tn=e,Ye=!0,ti=null,t!==null&&(Fn[jn++]=$i,Fn[jn++]=Wi,Fn[jn++]=Gs,$i=t.id,Wi=t.overflow,Gs=e),e=E_(e,i.children),e.flags|=4096,e)}function Ow(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Dm(t.return,e,n)}function Sp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function EI(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Yt(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ow(t,n,e);else if(t.tag===19)Ow(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&gd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Sp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&gd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Sp(e,!0,n,null,o);break;case"together":Sp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Kk(t,e,n){switch(e.tag){case 3:wI(e),Aa();break;case 5:KP(e);break;case 1:cn(e.type)&&cd(e);break;case 4:p_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(fd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?TI(t,e,n):($e(et,et.current&1),t=ir(t,e,n),t!==null?t.sibling:null);$e(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return EI(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,yI(t,e,n)}return ir(t,e,n)}var PI,Um,II,SI;PI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Um=function(){};II=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Os(Pi.current);var o=null;switch(n){case"input":r=um(t,r),i=um(t,i),o=[];break;case"select":r=it({},r,{value:void 0}),i=it({},i,{value:void 0}),o=[];break;case"textarea":r=dm(t,r),i=dm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ld)}pm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Eu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var c=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&We("scroll",t),o||u===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};SI=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ul(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Zk(t,e,n){var i=e.pendingProps;switch(a_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(e),null;case 1:return cn(e.type)&&ud(),Bt(e),null;case 3:return i=e.stateNode,Ra(),qe(un),qe(qt),g_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(gh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(Zm(ti),ti=null))),Um(t,e),Bt(e),null;case 5:m_(e);var r=Os(Mu.current);if(n=e.type,t!==null&&e.stateNode!=null)II(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Bt(e),null}if(t=Os(Pi.current),gh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[wi]=e,i[bu]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(r=0;r<Zl.length;r++)We(Zl[r],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":Hv(i,o),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},We("invalid",i);break;case"textarea":Gv(i,o),We("invalid",i)}pm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&mh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&mh(i.textContent,u,t),r=["children",""+u]):Eu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&We("scroll",i)}switch(n){case"input":ah(i),qv(i,o,!0);break;case"textarea":ah(i),Kv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=ld)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[wi]=e,t[bu]=i,PI(t,e,!1,!1),e.stateNode=t;e:{switch(a=mm(n,i),n){case"dialog":We("cancel",t),We("close",t),r=i;break;case"iframe":case"object":case"embed":We("load",t),r=i;break;case"video":case"audio":for(r=0;r<Zl.length;r++)We(Zl[r],t);r=i;break;case"source":We("error",t),r=i;break;case"img":case"image":case"link":We("error",t),We("load",t),r=i;break;case"details":We("toggle",t),r=i;break;case"input":Hv(t,i),r=um(t,i),We("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=it({},i,{value:void 0}),We("invalid",t);break;case"textarea":Gv(t,i),r=dm(t,i),We("invalid",t);break;default:r=i}pm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?nP(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&eP(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Pu(t,c):typeof c=="number"&&Pu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Eu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&We("scroll",t):c!=null&&qg(t,o,c,a))}switch(n){case"input":ah(t),qv(t,i,!1);break;case"textarea":ah(t),Kv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Yr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ma(t,!!i.multiple,o,!1):i.defaultValue!=null&&ma(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ld)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bt(e),null;case 6:if(t&&e.stateNode!=null)SI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=Os(Mu.current),Os(Pi.current),gh(e)){if(i=e.stateNode,n=e.memoizedProps,i[wi]=e,(o=i.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:mh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wi]=e,e.stateNode=i}return Bt(e),null;case 13:if(qe(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&vn!==null&&e.mode&1&&!(e.flags&128))$P(),Aa(),e.flags|=98560,o=!1;else if(o=gh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[wi]=e}else Aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bt(e),o=!1}else ti!==null&&(Zm(ti),ti=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?Et===0&&(Et=3):C_())),e.updateQueue!==null&&(e.flags|=4),Bt(e),null);case 4:return Ra(),Um(t,e),t===null&&ku(e.stateNode.containerInfo),Bt(e),null;case 10:return h_(e.type._context),Bt(e),null;case 17:return cn(e.type)&&ud(),Bt(e),null;case 19:if(qe(et),o=e.memoizedState,o===null)return Bt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Ul(o,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=gd(t),a!==null){for(e.flags|=128,Ul(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&ht()>La&&(e.flags|=128,i=!0,Ul(o,!1),e.lanes=4194304)}else{if(!i)if(t=gd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ul(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ye)return Bt(e),null}else 2*ht()-o.renderingStartTime>La&&n!==1073741824&&(e.flags|=128,i=!0,Ul(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,n=et.current,$e(et,i?n&1|2:n&1),e):(Bt(e),null);case 22:case 23:return A_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yn&1073741824&&(Bt(e),e.subtreeFlags&6&&(e.flags|=8192)):Bt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function Qk(t,e){switch(a_(e),e.tag){case 1:return cn(e.type)&&ud(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ra(),qe(un),qe(qt),g_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return m_(e),null;case 13:if(qe(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(et),null;case 4:return Ra(),null;case 10:return h_(e.type._context),null;case 22:case 23:return A_(),null;case 24:return null;default:return null}}var vh=!1,Wt=!1,Yk=typeof WeakSet=="function"?WeakSet:Set,ie=null;function la(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function zm(t,e,n){try{n()}catch(i){at(t,e,i)}}var Vw=!1;function Xk(t,e){if(Sm=sd,t=kP(),s_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,f=0,m=0,g=t,v=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)v=g,g=T;for(;;){if(g===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++m===i&&(c=a),(T=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=T}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xm={focusedElem:t,selectionRange:n},sd=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var k=A.memoizedProps,V=A.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:Jn(e.type,k),V);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(B){at(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return A=Vw,Vw=!1,A}function uu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&zm(e,n,o)}r=r.next}while(r!==i)}}function af(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function $m(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xI(t){var e=t.alternate;e!==null&&(t.alternate=null,xI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wi],delete e[bu],delete e[Rm],delete e[Mk],delete e[Nk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AI(t){return t.tag===5||t.tag===3||t.tag===4}function Fw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ld));else if(i!==4&&(t=t.child,t!==null))for(Wm(t,e,n),t=t.sibling;t!==null;)Wm(t,e,n),t=t.sibling}function Hm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Hm(t,e,n),t=t.sibling;t!==null;)Hm(t,e,n),t=t.sibling}var Lt=null,ei=!1;function Tr(t,e,n){for(n=n.child;n!==null;)CI(t,e,n),n=n.sibling}function CI(t,e,n){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(Xd,n)}catch{}switch(n.tag){case 5:Wt||la(n,e);case 6:var i=Lt,r=ei;Lt=null,Tr(t,e,n),Lt=i,ei=r,Lt!==null&&(ei?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(ei?(t=Lt,n=n.stateNode,t.nodeType===8?yp(t.parentNode,n):t.nodeType===1&&yp(t,n),Au(t)):yp(Lt,n.stateNode));break;case 4:i=Lt,r=ei,Lt=n.stateNode.containerInfo,ei=!0,Tr(t,e,n),Lt=i,ei=r;break;case 0:case 11:case 14:case 15:if(!Wt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&zm(n,e,a),r=r.next}while(r!==i)}Tr(t,e,n);break;case 1:if(!Wt&&(la(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}Tr(t,e,n);break;case 21:Tr(t,e,n);break;case 22:n.mode&1?(Wt=(i=Wt)||n.memoizedState!==null,Tr(t,e,n),Wt=i):Tr(t,e,n);break;default:Tr(t,e,n)}}function jw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Yk),e.forEach(function(i){var r=aL.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Lt=u.stateNode,ei=!1;break e;case 3:Lt=u.stateNode.containerInfo,ei=!0;break e;case 4:Lt=u.stateNode.containerInfo,ei=!0;break e}u=u.return}if(Lt===null)throw Error(X(160));CI(o,a,r),Lt=null,ei=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){at(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)RI(e,t),e=e.sibling}function RI(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),gi(t),i&4){try{uu(3,t,t.return),af(3,t)}catch(k){at(t,t.return,k)}try{uu(5,t,t.return)}catch(k){at(t,t.return,k)}}break;case 1:Xn(e,t),gi(t),i&512&&n!==null&&la(n,n.return);break;case 5:if(Xn(e,t),gi(t),i&512&&n!==null&&la(n,n.return),t.flags&32){var r=t.stateNode;try{Pu(r,"")}catch(k){at(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&YE(r,o),mm(u,a);var f=mm(u,o);for(a=0;a<c.length;a+=2){var m=c[a],g=c[a+1];m==="style"?nP(r,g):m==="dangerouslySetInnerHTML"?eP(r,g):m==="children"?Pu(r,g):qg(r,m,g,f)}switch(u){case"input":cm(r,o);break;case"textarea":XE(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?ma(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?ma(r,!!o.multiple,o.defaultValue,!0):ma(r,!!o.multiple,o.multiple?[]:"",!1))}r[bu]=o}catch(k){at(t,t.return,k)}}break;case 6:if(Xn(e,t),gi(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){at(t,t.return,k)}}break;case 3:if(Xn(e,t),gi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Au(e.containerInfo)}catch(k){at(t,t.return,k)}break;case 4:Xn(e,t),gi(t);break;case 13:Xn(e,t),gi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(S_=ht())),i&4&&jw(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(f=Wt)||m,Xn(e,t),Wt=f):Xn(e,t),gi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ie=t,m=t.child;m!==null;){for(g=ie=m;ie!==null;){switch(v=ie,T=v.child,v.tag){case 0:case 11:case 14:case 15:uu(4,v,v.return);break;case 1:la(v,v.return);var A=v.stateNode;if(typeof A.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(k){at(i,n,k)}}break;case 5:la(v,v.return);break;case 22:if(v.memoizedState!==null){Uw(g);continue}}T!==null?(T.return=v,ie=T):Uw(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=tP("display",a))}catch(k){at(t,t.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){at(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Xn(e,t),gi(t),i&4&&jw(t);break;case 21:break;default:Xn(e,t),gi(t)}}function gi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AI(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Pu(r,""),i.flags&=-33);var o=Fw(t);Hm(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=Fw(t);Wm(t,u,a);break;default:throw Error(X(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Jk(t,e,n){ie=t,kI(t)}function kI(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var r=ie,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||vh;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Wt;u=vh;var f=Wt;if(vh=a,(Wt=c)&&!f)for(ie=r;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?zw(r):c!==null?(c.return=a,ie=c):zw(r);for(;o!==null;)ie=o,kI(o),o=o.sibling;ie=r,vh=u,Wt=f}Bw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ie=o):Bw(t)}}function Bw(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||af(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Iw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Iw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Au(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Wt||e.flags&512&&$m(e)}catch(v){at(e,e.return,v)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Uw(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function zw(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{af(4,e)}catch(c){at(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){at(e,r,c)}}var o=e.return;try{$m(e)}catch(c){at(e,o,c)}break;case 5:var a=e.return;try{$m(e)}catch(c){at(e,a,c)}}}catch(c){at(e,e.return,c)}if(e===t){ie=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ie=u;break}ie=e.return}}var eL=Math.ceil,vd=ur.ReactCurrentDispatcher,P_=ur.ReactCurrentOwner,Un=ur.ReactCurrentBatchConfig,Me=0,Rt=null,vt=null,Mt=0,yn=0,ua=os(0),Et=0,Fu=null,Zs=0,lf=0,I_=0,cu=null,on=null,S_=0,La=1/0,Ui=null,wd=!1,qm=null,$r=null,wh=!1,Nr=null,Td=0,hu=0,Gm=null,Bh=-1,Uh=0;function Jt(){return Me&6?ht():Bh!==-1?Bh:Bh=ht()}function Wr(t){return t.mode&1?Me&2&&Mt!==0?Mt&-Mt:Vk.transition!==null?(Uh===0&&(Uh=pP()),Uh):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:TP(t.type)),t):1}function ri(t,e,n,i){if(50<hu)throw hu=0,Gm=null,Error(X(185));nc(t,n,i),(!(Me&2)||t!==Rt)&&(t===Rt&&(!(Me&2)&&(lf|=n),Et===4&&Rr(t,Mt)),hn(t,i),n===1&&Me===0&&!(e.mode&1)&&(La=ht()+500,rf&&as()))}function hn(t,e){var n=t.callbackNode;VR(t,e);var i=rd(t,t===Rt?Mt:0);if(i===0)n!==null&&Yv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Yv(n),e===1)t.tag===0?Ok($w.bind(null,t)):BP($w.bind(null,t)),bk(function(){!(Me&6)&&as()}),n=null;else{switch(mP(i)){case 1:n=Yg;break;case 4:n=dP;break;case 16:n=id;break;case 536870912:n=fP;break;default:n=id}n=FI(n,LI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LI(t,e){if(Bh=-1,Uh=0,Me&6)throw Error(X(327));var n=t.callbackNode;if(wa()&&t.callbackNode!==n)return null;var i=rd(t,t===Rt?Mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ed(t,i);else{e=i;var r=Me;Me|=2;var o=DI();(Rt!==t||Mt!==e)&&(Ui=null,La=ht()+500,Us(t,e));do try{iL();break}catch(u){bI(t,u)}while(!0);c_(),vd.current=o,Me=r,vt!==null?e=0:(Rt=null,Mt=0,e=Et)}if(e!==0){if(e===2&&(r=wm(t),r!==0&&(i=r,e=Km(t,r))),e===1)throw n=Fu,Us(t,0),Rr(t,i),hn(t,ht()),n;if(e===6)Rr(t,i);else{if(r=t.current.alternate,!(i&30)&&!tL(r)&&(e=Ed(t,i),e===2&&(o=wm(t),o!==0&&(i=o,e=Km(t,o))),e===1))throw n=Fu,Us(t,0),Rr(t,i),hn(t,ht()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:ks(t,on,Ui);break;case 3:if(Rr(t,i),(i&130023424)===i&&(e=S_+500-ht(),10<e)){if(rd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Cm(ks.bind(null,t,on,Ui),e);break}ks(t,on,Ui);break;case 4:if(Rr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ii(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*eL(i/1960))-i,10<i){t.timeoutHandle=Cm(ks.bind(null,t,on,Ui),i);break}ks(t,on,Ui);break;case 5:ks(t,on,Ui);break;default:throw Error(X(329))}}}return hn(t,ht()),t.callbackNode===n?LI.bind(null,t):null}function Km(t,e){var n=cu;return t.current.memoizedState.isDehydrated&&(Us(t,e).flags|=256),t=Ed(t,e),t!==2&&(e=on,on=n,e!==null&&Zm(e)),t}function Zm(t){on===null?on=t:on.push.apply(on,t)}function tL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~I_,e&=~lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ii(e),i=1<<n;t[n]=-1,e&=~i}}function $w(t){if(Me&6)throw Error(X(327));wa();var e=rd(t,0);if(!(e&1))return hn(t,ht()),null;var n=Ed(t,e);if(t.tag!==0&&n===2){var i=wm(t);i!==0&&(e=i,n=Km(t,i))}if(n===1)throw n=Fu,Us(t,0),Rr(t,e),hn(t,ht()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ks(t,on,Ui),hn(t,ht()),null}function x_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(La=ht()+500,rf&&as())}}function Qs(t){Nr!==null&&Nr.tag===0&&!(Me&6)&&wa();var e=Me;Me|=1;var n=Un.transition,i=Ve;try{if(Un.transition=null,Ve=1,t)return t()}finally{Ve=i,Un.transition=n,Me=e,!(Me&6)&&as()}}function A_(){yn=ua.current,qe(ua)}function Us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Lk(n)),vt!==null)for(n=vt.return;n!==null;){var i=n;switch(a_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ud();break;case 3:Ra(),qe(un),qe(qt),g_();break;case 5:m_(i);break;case 4:Ra();break;case 13:qe(et);break;case 19:qe(et);break;case 10:h_(i.type._context);break;case 22:case 23:A_()}n=n.return}if(Rt=t,vt=t=Hr(t.current,null),Mt=yn=e,Et=0,Fu=null,I_=lf=Zs=0,on=cu=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Ns=null}return t}function bI(t,e){do{var n=vt;try{if(c_(),Vh.current=yd,_d){for(var i=nt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_d=!1}if(Ks=0,Ct=Tt=nt=null,lu=!1,Nu=0,P_.current=null,n===null||n.return===null){Et=1,Fu=e,vt=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Mt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=kw(a);if(T!==null){T.flags&=-257,Lw(T,a,u,o,e),T.mode&1&&Rw(o,f,e),e=T,c=f;var A=e.updateQueue;if(A===null){var k=new Set;k.add(c),e.updateQueue=k}else A.add(c);break e}else{if(!(e&1)){Rw(o,f,e),C_();break e}c=Error(X(426))}}else if(Ye&&u.mode&1){var V=kw(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Lw(V,a,u,o,e),l_(ka(c,u));break e}}o=c=ka(c,u),Et!==4&&(Et=2),cu===null?cu=[o]:cu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=mI(o,c,e);Pw(o,b);break e;case 1:u=c;var x=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&($r===null||!$r.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=gI(o,u,e);Pw(o,B);break e}}o=o.return}while(o!==null)}NI(n)}catch(G){e=G,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function DI(){var t=vd.current;return vd.current=yd,t===null?yd:t}function C_(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||!(Zs&268435455)&&!(lf&268435455)||Rr(Rt,Mt)}function Ed(t,e){var n=Me;Me|=2;var i=DI();(Rt!==t||Mt!==e)&&(Ui=null,Us(t,e));do try{nL();break}catch(r){bI(t,r)}while(!0);if(c_(),Me=n,vd.current=i,vt!==null)throw Error(X(261));return Rt=null,Mt=0,Et}function nL(){for(;vt!==null;)MI(vt)}function iL(){for(;vt!==null&&!CR();)MI(vt)}function MI(t){var e=VI(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?NI(t):vt=e,P_.current=null}function NI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Qk(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,vt=null;return}}else if(n=Zk(n,e,yn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Et===0&&(Et=5)}function ks(t,e,n){var i=Ve,r=Un.transition;try{Un.transition=null,Ve=1,rL(t,e,n,i)}finally{Un.transition=r,Ve=i}return null}function rL(t,e,n,i){do wa();while(Nr!==null);if(Me&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(FR(t,o),t===Rt&&(vt=Rt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wh||(wh=!0,FI(id,function(){return wa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Un.transition,Un.transition=null;var a=Ve;Ve=1;var u=Me;Me|=4,P_.current=null,Xk(t,n),RI(n,t),Ik(xm),sd=!!Sm,xm=Sm=null,t.current=n,Jk(n),RR(),Me=u,Ve=a,Un.transition=o}else t.current=n;if(wh&&(wh=!1,Nr=t,Td=r),o=t.pendingLanes,o===0&&($r=null),bR(n.stateNode),hn(t,ht()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(wd)throw wd=!1,t=qm,qm=null,t;return Td&1&&t.tag!==0&&wa(),o=t.pendingLanes,o&1?t===Gm?hu++:(hu=0,Gm=t):hu=0,as(),null}function wa(){if(Nr!==null){var t=mP(Td),e=Un.transition,n=Ve;try{if(Un.transition=null,Ve=16>t?16:t,Nr===null)var i=!1;else{if(t=Nr,Nr=null,Td=0,Me&6)throw Error(X(331));var r=Me;for(Me|=4,ie=t.current;ie!==null;){var o=ie,a=o.child;if(ie.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(ie=f;ie!==null;){var m=ie;switch(m.tag){case 0:case 11:case 15:uu(8,m,o)}var g=m.child;if(g!==null)g.return=m,ie=g;else for(;ie!==null;){m=ie;var v=m.sibling,T=m.return;if(xI(m),m===f){ie=null;break}if(v!==null){v.return=T,ie=v;break}ie=T}}}var A=o.alternate;if(A!==null){var k=A.child;if(k!==null){A.child=null;do{var V=k.sibling;k.sibling=null,k=V}while(k!==null)}}ie=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ie=a;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:uu(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ie=b;break e}ie=o.return}}var x=t.current;for(ie=x;ie!==null;){a=ie;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,ie=C;else e:for(a=x;ie!==null;){if(u=ie,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:af(9,u)}}catch(G){at(u,u.return,G)}if(u===a){ie=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,ie=B;break e}ie=u.return}}if(Me=r,as(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(Xd,t)}catch{}i=!0}return i}finally{Ve=n,Un.transition=e}}return!1}function Ww(t,e,n){e=ka(n,e),e=mI(t,e,1),t=zr(t,e,1),e=Jt(),t!==null&&(nc(t,1,e),hn(t,e))}function at(t,e,n){if(t.tag===3)Ww(t,t,n);else for(;e!==null;){if(e.tag===3){Ww(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($r===null||!$r.has(i))){t=ka(n,t),t=gI(e,t,1),e=zr(e,t,1),t=Jt(),e!==null&&(nc(e,1,t),hn(e,t));break}}e=e.return}}function sL(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Mt&n)===n&&(Et===4||Et===3&&(Mt&130023424)===Mt&&500>ht()-S_?Us(t,0):I_|=n),hn(t,e)}function OI(t,e){e===0&&(t.mode&1?(e=ch,ch<<=1,!(ch&130023424)&&(ch=4194304)):e=1);var n=Jt();t=nr(t,e),t!==null&&(nc(t,e,n),hn(t,n))}function oL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OI(t,n)}function aL(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),OI(t,n)}var VI;VI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,Kk(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Ye&&e.flags&1048576&&UP(e,dd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;jh(t,e),t=e.pendingProps;var r=xa(e,qt.current);va(e,n),r=y_(null,e,i,t,r,n);var o=v_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(i)?(o=!0,cd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,f_(e),r.updater=of,e.stateNode=r,r._reactInternals=e,Nm(e,i,t,n),e=Fm(null,e,i,!0,o,n)):(e.tag=0,Ye&&o&&o_(e),Yt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(jh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=uL(i),t=Jn(i,t),r){case 0:e=Vm(null,e,i,t,n);break e;case 1:e=Mw(null,e,i,t,n);break e;case 11:e=bw(null,e,i,t,n);break e;case 14:e=Dw(null,e,i,Jn(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),Vm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),Mw(t,e,i,r,n);case 3:e:{if(wI(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,GP(t,e),md(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=ka(Error(X(423)),e),e=Nw(t,e,i,n,r);break e}else if(i!==r){r=ka(Error(X(424)),e),e=Nw(t,e,i,n,r);break e}else for(vn=Ur(e.stateNode.containerInfo.firstChild),Tn=e,Ye=!0,ti=null,n=HP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),i===r){e=ir(t,e,n);break e}Yt(t,e,i,n)}e=e.child}return e;case 5:return KP(e),t===null&&bm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Am(i,r)?a=null:o!==null&&Am(i,o)&&(e.flags|=32),vI(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&bm(e),null;case 13:return TI(t,e,n);case 4:return p_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ca(e,null,i,n):Yt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),bw(t,e,i,r,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,$e(fd,i._currentValue),i._currentValue=a,o!==null)if(ai(o.value,a)){if(o.children===r.children&&!un.current){e=ir(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=Zi(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?c.next=c:(c.next=m.next,m.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Dm(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Dm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Yt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,va(e,n),r=Wn(r),i=i(r),e.flags|=1,Yt(t,e,i,n),e.child;case 14:return i=e.type,r=Jn(i,e.pendingProps),r=Jn(i.type,r),Dw(t,e,i,r,n);case 15:return _I(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),jh(t,e),e.tag=1,cn(i)?(t=!0,cd(e)):t=!1,va(e,n),pI(e,i,r),Nm(e,i,r,n),Fm(null,e,i,!0,t,n);case 19:return EI(t,e,n);case 22:return yI(t,e,n)}throw Error(X(156,e.tag))};function FI(t,e){return hP(t,e)}function lL(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,i){return new lL(t,e,n,i)}function R_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uL(t){if(typeof t=="function")return R_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kg)return 11;if(t===Zg)return 14}return 2}function Hr(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")R_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Jo:return zs(n.children,r,o,e);case Gg:a=8,r|=8;break;case sm:return t=Bn(12,n,e,r|2),t.elementType=sm,t.lanes=o,t;case om:return t=Bn(13,n,e,r),t.elementType=om,t.lanes=o,t;case am:return t=Bn(19,n,e,r),t.elementType=am,t.lanes=o,t;case KE:return uf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qE:a=10;break e;case GE:a=9;break e;case Kg:a=11;break e;case Zg:a=14;break e;case Sr:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Bn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function zs(t,e,n,i){return t=Bn(7,t,i,e),t.lanes=n,t}function uf(t,e,n,i){return t=Bn(22,t,i,e),t.elementType=KE,t.lanes=n,t.stateNode={isHidden:!1},t}function xp(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function Ap(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cL(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function k_(t,e,n,i,r,o,a,u,c){return t=new cL(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Bn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},f_(o),t}function hL(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function jI(t){if(!t)return Xr;t=t._reactInternals;e:{if(so(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(cn(n))return jP(t,n,e)}return e}function BI(t,e,n,i,r,o,a,u,c){return t=k_(n,i,!0,t,r,o,a,u,c),t.context=jI(null),n=t.current,i=Jt(),r=Wr(n),o=Zi(i,r),o.callback=e??null,zr(n,o,r),t.current.lanes=r,nc(t,r,i),hn(t,i),t}function cf(t,e,n,i){var r=e.current,o=Jt(),a=Wr(r);return n=jI(n),e.context===null?e.context=n:e.pendingContext=n,e=Zi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=zr(r,e,a),t!==null&&(ri(t,r,a,o),Oh(t,r,a)),a}function Pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function L_(t,e){Hw(t,e),(t=t.alternate)&&Hw(t,e)}function dL(){return null}var UI=typeof reportError=="function"?reportError:function(t){console.error(t)};function b_(t){this._internalRoot=t}hf.prototype.render=b_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));cf(t,e,null,null)};hf.prototype.unmount=b_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){cf(null,t,null,null)}),e[tr]=null}};function hf(t){this._internalRoot=t}hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=yP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&wP(t)}};function D_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qw(){}function fL(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Pd(a);o.call(f)}}var a=BI(e,i,t,0,null,!1,!1,"",qw);return t._reactRootContainer=a,t[tr]=a.current,ku(t.nodeType===8?t.parentNode:t),Qs(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Pd(c);u.call(f)}}var c=k_(t,0,!1,null,null,!1,!1,"",qw);return t._reactRootContainer=c,t[tr]=c.current,ku(t.nodeType===8?t.parentNode:t),Qs(function(){cf(e,c,n,i)}),c}function ff(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=Pd(a);u.call(c)}}cf(e,a,t,r)}else a=fL(n,e,t,r,i);return Pd(a)}gP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kl(e.pendingLanes);n!==0&&(Xg(e,n|1),hn(e,ht()),!(Me&6)&&(La=ht()+500,as()))}break;case 13:Qs(function(){var i=nr(t,1);if(i!==null){var r=Jt();ri(i,t,1,r)}}),L_(t,1)}};Jg=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=Jt();ri(e,t,134217728,n)}L_(t,134217728)}};_P=function(t){if(t.tag===13){var e=Wr(t),n=nr(t,e);if(n!==null){var i=Jt();ri(n,t,e,i)}L_(t,e)}};yP=function(){return Ve};vP=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};_m=function(t,e,n){switch(e){case"input":if(cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=nf(i);if(!r)throw Error(X(90));QE(i),cm(i,r)}}}break;case"textarea":XE(t,n);break;case"select":e=n.value,e!=null&&ma(t,!!n.multiple,e,!1)}};sP=x_;oP=Qs;var pL={usingClientEntryPoint:!1,Events:[rc,ia,nf,iP,rP,x_]},zl={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mL={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uP(t),t===null?null:t.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||dL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Xd=Th.inject(mL),Ei=Th}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pL;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D_(e))throw Error(X(200));return hL(t,e,null,n)};Sn.createRoot=function(t,e){if(!D_(t))throw Error(X(299));var n=!1,i="",r=UI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=k_(t,1,!1,null,null,n,!1,i,r),t[tr]=e.current,ku(t.nodeType===8?t.parentNode:t),new b_(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=uP(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Qs(t)};Sn.hydrate=function(t,e,n){if(!df(e))throw Error(X(200));return ff(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!D_(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=UI;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=BI(e,null,t,1,n??null,r,!1,o,a),t[tr]=e.current,ku(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new hf(e)};Sn.render=function(t,e,n){if(!df(e))throw Error(X(200));return ff(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!df(t))throw Error(X(40));return t._reactRootContainer?(Qs(function(){ff(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};Sn.unstable_batchedUpdates=x_;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!df(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return ff(t,e,n,!1,i)};Sn.version="18.3.1-next-f1338f8080-20240426";function zI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zI)}catch(t){console.error(t)}}zI(),zE.exports=Sn;var $I=zE.exports,WI,Gw=$I;WI=Gw.createRoot,Gw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ju.apply(this,arguments)}var Or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Or||(Or={}));const Kw="popstate";function gL(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:c=""}=oo(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Qm("",{pathname:a,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=r.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:Id(o))}function i(r,o){M_(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return yL(e,n,i,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function M_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _L(){return Math.random().toString(36).substr(2,8)}function Zw(t,e){return{usr:t.state,key:t.key,idx:e}}function Qm(t,e,n,i){return n===void 0&&(n=null),ju({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oo(e):e,{state:n,key:e&&e.key||i||_L()})}function Id(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function yL(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Or.Pop,c=null,f=m();f==null&&(f=0,a.replaceState(ju({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Or.Pop;let V=m(),b=V==null?null:V-f;f=V,c&&c({action:u,location:k.location,delta:b})}function v(V,b){u=Or.Push;let x=Qm(k.location,V,b);n&&n(x,V),f=m()+1;let C=Zw(x,f),B=k.createHref(x);try{a.pushState(C,"",B)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(B)}o&&c&&c({action:u,location:k.location,delta:1})}function T(V,b){u=Or.Replace;let x=Qm(k.location,V,b);n&&n(x,V),f=m();let C=Zw(x,f),B=k.createHref(x);a.replaceState(C,"",B),o&&c&&c({action:u,location:k.location,delta:0})}function A(V){let b=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof V=="string"?V:Id(V);return x=x.replace(/ $/,"%20"),ft(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let k={get action(){return u},get location(){return t(r,a)},listen(V){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Kw,g),c=V,()=>{r.removeEventListener(Kw,g),c=null}},createHref(V){return e(r,V)},createURL:A,encodeLocation(V){let b=A(V);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:T,go(V){return a.go(V)}};return k}var Qw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qw||(Qw={}));function vL(t,e,n){return n===void 0&&(n="/"),wL(t,e,n)}function wL(t,e,n,i){let r=typeof e=="string"?oo(e):e,o=N_(r.pathname||"/",n);if(o==null)return null;let a=HI(t);TL(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=DL(o);u=kL(a[c],f)}return u}function HI(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let f=qr([i,c.relativePath]),m=n.concat(c);o.children&&o.children.length>0&&(ft(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),HI(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:CL(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let c of qI(o.path))r(o,a,c)}),e}function qI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=qI(i.join("/")),u=[];return u.push(...a.map(c=>c===""?o:[o,c].join("/"))),r&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function TL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RL(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const EL=/^:[\w-]+$/,PL=3,IL=2,SL=1,xL=10,AL=-2,Yw=t=>t==="*";function CL(t,e){let n=t.split("/"),i=n.length;return n.some(Yw)&&(i+=AL),e&&(i+=IL),n.filter(r=>!Yw(r)).reduce((r,o)=>r+(EL.test(o)?PL:o===""?SL:xL),i)}function RL(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function kL(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let c=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=LL({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},m),v=c.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:qr([o,g.pathname]),pathnameBase:VL(qr([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=qr([o,g.pathnameBase]))}return a}function LL(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=bL(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const A=u[g];return T&&!A?f[v]=void 0:f[v]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function bL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),M_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(i.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function DL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function N_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function ML(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?oo(t):t;return{pathname:n?n.startsWith("/")?n:NL(n,e):e,search:FL(i),hash:jL(r)}}function NL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Cp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function O_(t,e){let n=OL(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function V_(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=oo(t):(r=ju({},t),ft(!r.pathname||!r.pathname.includes("?"),Cp("?","pathname","search",r)),ft(!r.pathname||!r.pathname.includes("#"),Cp("#","pathname","hash",r)),ft(!r.search||!r.search.includes("#"),Cp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?e[g]:"/"}let c=ML(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||m)&&(c.pathname+="/"),c}const qr=t=>t.join("/").replace(/\/\/+/g,"/"),VL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const GI=["post","put","patch","delete"];new Set(GI);const UL=["get",...GI];new Set(UL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bu.apply(this,arguments)}const F_=U.createContext(null),zL=U.createContext(null),ls=U.createContext(null),pf=U.createContext(null),us=U.createContext({outlet:null,matches:[],isDataRoute:!1}),KI=U.createContext(null);function $L(t,e){let{relative:n}=e===void 0?{}:e;Ha()||ft(!1);let{basename:i,navigator:r}=U.useContext(ls),{hash:o,pathname:a,search:u}=QI(t,{relative:n}),c=a;return i!=="/"&&(c=a==="/"?i:qr([i,a])),r.createHref({pathname:c,search:u,hash:o})}function Ha(){return U.useContext(pf)!=null}function oc(){return Ha()||ft(!1),U.useContext(pf).location}function ZI(t){U.useContext(ls).static||U.useLayoutEffect(t)}function qa(){let{isDataRoute:t}=U.useContext(us);return t?nb():WL()}function WL(){Ha()||ft(!1);let t=U.useContext(F_),{basename:e,future:n,navigator:i}=U.useContext(ls),{matches:r}=U.useContext(us),{pathname:o}=oc(),a=JSON.stringify(O_(r,n.v7_relativeSplatPath)),u=U.useRef(!1);return ZI(()=>{u.current=!0}),U.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=V_(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:qr([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function QI(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=U.useContext(ls),{matches:r}=U.useContext(us),{pathname:o}=oc(),a=JSON.stringify(O_(r,i.v7_relativeSplatPath));return U.useMemo(()=>V_(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function HL(t,e){return qL(t,e)}function qL(t,e,n,i){Ha()||ft(!1);let{navigator:r}=U.useContext(ls),{matches:o}=U.useContext(us),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=oc(),m;if(e){var g;let V=typeof e=="string"?oo(e):e;c==="/"||(g=V.pathname)!=null&&g.startsWith(c)||ft(!1),m=V}else m=f;let v=m.pathname||"/",T=v;if(c!=="/"){let V=c.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(V.length).join("/")}let A=vL(t,{pathname:T}),k=YL(A&&A.map(V=>Object.assign({},V,{params:Object.assign({},u,V.params),pathname:qr([c,r.encodeLocation?r.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?c:qr([c,r.encodeLocation?r.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,i);return e&&k?U.createElement(pf.Provider,{value:{location:Bu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Or.Pop}},k):k}function GL(){let t=tb(),e=BL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:r},n):null,null)}const KL=U.createElement(GL,null);class ZL extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(us.Provider,{value:this.props.routeContext},U.createElement(KI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QL(t){let{routeContext:e,match:n,children:i}=t,r=U.useContext(F_);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(us.Provider,{value:e},i)}function YL(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||ft(!1),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:v,errors:T}=n,A=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||A){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,A=!1,k=null,V=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||KL,c&&(f<0&&v===0?(ib("route-fallback"),A=!0,V=null):f===v&&(A=!0,V=g.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,v+1)),x=()=>{let C;return T?C=k:A?C=V:g.route.Component?C=U.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=m,U.createElement(QL,{match:g,routeContext:{outlet:m,matches:b,isDataRoute:n!=null},children:C})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?U.createElement(ZL,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var YI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YI||{}),XI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XI||{});function XL(t){let e=U.useContext(F_);return e||ft(!1),e}function JL(t){let e=U.useContext(zL);return e||ft(!1),e}function eb(t){let e=U.useContext(us);return e||ft(!1),e}function JI(t){let e=eb(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function tb(){var t;let e=U.useContext(KI),n=JL(),i=JI();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function nb(){let{router:t}=XL(YI.UseNavigateStable),e=JI(XI.UseNavigateStable),n=U.useRef(!1);return ZI(()=>{n.current=!0}),U.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Bu({fromRouteId:e},o)))},[t,e])}const Xw={};function ib(t,e,n){Xw[t]||(Xw[t]=!0)}function rb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function eS(t){let{to:e,replace:n,state:i,relative:r}=t;Ha()||ft(!1);let{future:o,static:a}=U.useContext(ls),{matches:u}=U.useContext(us),{pathname:c}=oc(),f=qa(),m=V_(e,O_(u,o.v7_relativeSplatPath),c,r==="path"),g=JSON.stringify(m);return U.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function Pr(t){ft(!1)}function sb(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Or.Pop,navigator:o,static:a=!1,future:u}=t;Ha()&&ft(!1);let c=e.replace(/^\/*/,"/"),f=U.useMemo(()=>({basename:c,navigator:o,static:a,future:Bu({v7_relativeSplatPath:!1},u)}),[c,u,o,a]);typeof i=="string"&&(i=oo(i));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:A="default"}=i,k=U.useMemo(()=>{let V=N_(m,c);return V==null?null:{location:{pathname:V,search:g,hash:v,state:T,key:A},navigationType:r}},[c,m,g,v,T,A,r]);return k==null?null:U.createElement(ls.Provider,{value:f},U.createElement(pf.Provider,{children:n,value:k}))}function ob(t){let{children:e,location:n}=t;return HL(Ym(e),n)}new Promise(()=>{});function Ym(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(i,r)=>{if(!U.isValidElement(i))return;let o=[...e,r];if(i.type===U.Fragment){n.push.apply(n,Ym(i.props.children,o));return}i.type!==Pr&&ft(!1),!i.props.index||!i.props.children||ft(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Ym(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xm(){return Xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xm.apply(this,arguments)}function ab(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function lb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ub(t,e){return t.button===0&&(!e||e==="_self")&&!lb(t)}const cb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hb="6";try{window.__reactRouterVersion=hb}catch{}const db="startTransition",Jw=sR[db];function fb(t){let{basename:e,children:n,future:i,window:r}=t,o=U.useRef();o.current==null&&(o.current=gL({window:r,v5Compat:!0}));let a=o.current,[u,c]=U.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=U.useCallback(g=>{f&&Jw?Jw(()=>c(g)):c(g)},[c,f]);return U.useLayoutEffect(()=>a.listen(m),[a,m]),U.useEffect(()=>rb(i),[i]),U.createElement(sb,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const pb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xt=U.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:c,to:f,preventScrollReset:m,viewTransition:g}=e,v=ab(e,cb),{basename:T}=U.useContext(ls),A,k=!1;if(typeof f=="string"&&mb.test(f)&&(A=f,pb))try{let C=new URL(window.location.href),B=f.startsWith("//")?new URL(C.protocol+f):new URL(f),G=N_(B.pathname,T);B.origin===C.origin&&G!=null?f=G+B.search+B.hash:k=!0}catch{}let V=$L(f,{relative:r}),b=gb(f,{replace:a,state:u,target:c,preventScrollReset:m,relative:r,viewTransition:g});function x(C){i&&i(C),C.defaultPrevented||b(C)}return U.createElement("a",Xm({},v,{href:A||V,onClick:k||o?i:x,ref:n,target:c}))});var e0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(e0||(e0={}));var t0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(t0||(t0={}));function gb(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,c=qa(),f=oc(),m=QI(t,{relative:a});return U.useCallback(g=>{if(ub(g,n)){g.preventDefault();let v=i!==void 0?i:Id(f)===Id(m);c(t,{replace:v,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,c,m,i,r,n,t,o,a,u])}var n0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},_b=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},nS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,f=c?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;c||(T=64,a||(v=64)),i.push(n[m],n[g],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_b(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new yb;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const A=f<<6&192|g;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vb=function(t){const e=tS(t);return nS.encodeByteArray(e,!0)},Sd=function(t){return vb(t).replace(/\./g,"")},iS=function(t){try{return nS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=()=>wb().__FIREBASE_DEFAULTS__,Eb=()=>{if(typeof process>"u"||typeof n0>"u")return;const t=n0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iS(t[1]);return e&&JSON.parse(e)},mf=()=>{try{return Tb()||Eb()||Pb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rS=t=>{var e,n;return(n=(e=mf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ib=t=>{const e=rS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},sS=()=>{var t;return(t=mf())===null||t===void 0?void 0:t.config},oS=t=>{var e;return(e=mf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sd(JSON.stringify(n)),Sd(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ab(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function Cb(){var t;const e=(t=mf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lb(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bb(){return!Cb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lS(){try{return typeof indexedDB=="object"}catch{return!1}}function uS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function Db(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="FirebaseError";class ci extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Mb,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ao.prototype.create)}}class ao{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Nb(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ci(r,u,i)}}function Nb(t,e){return t.replace(Ob,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Ob=/\{\$([^}]+)}/g;function Vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uu(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(i0(o)&&i0(a)){if(!Uu(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function i0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ql(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Yl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Fb(t,e){const n=new jb(t,e);return n.subscribe.bind(n)}class jb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Bb(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Rp),r.error===void 0&&(r.error=Rp),r.complete===void 0&&(r.complete=Rp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=1e3,zb=2,$b=4*60*60*1e3,Wb=.5;function r0(t,e=Ub,n=zb){const i=e*Math.pow(n,t),r=Math.round(Wb*i*(Math.random()-.5)*2);return Math.min($b,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Sb;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gb(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qb(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qb(t){return t===Ls?void 0:t}function Gb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Hb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const Zb={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Qb=ke.INFO,Yb={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Xb=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Yb[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gf{constructor(e){this.name=e,this._logLevel=Qb,this._logHandler=Xb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Jb=(t,e)=>e.some(n=>t instanceof n);let s0,o0;function eD(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tD(){return o0||(o0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cS=new WeakMap,Jm=new WeakMap,hS=new WeakMap,kp=new WeakMap,j_=new WeakMap;function nD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Gr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&cS.set(n,t)}).catch(()=>{}),j_.set(e,t),e}function iD(t){if(Jm.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Jm.set(t,e)}let eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rD(t){eg=t(eg)}function sD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Lp(this),e,...n);return hS.set(i,e.sort?e.sort():[e]),Gr(i)}:tD().includes(t)?function(...e){return t.apply(Lp(this),e),Gr(cS.get(this))}:function(...e){return Gr(t.apply(Lp(this),e))}}function oD(t){return typeof t=="function"?sD(t):(t instanceof IDBTransaction&&iD(t),Jb(t,eD())?new Proxy(t,eg):t)}function Gr(t){if(t instanceof IDBRequest)return nD(t);if(kp.has(t))return kp.get(t);const e=oD(t);return e!==t&&(kp.set(t,e),j_.set(e,t)),e}const Lp=t=>j_.get(t);function dS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Gr(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Gr(a.result),c.oldVersion,c.newVersion,Gr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const aD=["get","getKey","getAll","getAllKeys","count"],lD=["put","add","delete","clear"],bp=new Map;function a0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=lD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||aD.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&c.done]))[0]};return bp.set(e,o),o}rD(t=>({...t,get:(e,n,i)=>a0(e,n)||t.get(e,n,i),has:(e,n)=>!!a0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function cD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tg="@firebase/app",l0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new gf("@firebase/app"),hD="@firebase/app-compat",dD="@firebase/analytics-compat",fD="@firebase/analytics",pD="@firebase/app-check-compat",mD="@firebase/app-check",gD="@firebase/auth",_D="@firebase/auth-compat",yD="@firebase/database",vD="@firebase/data-connect",wD="@firebase/database-compat",TD="@firebase/functions",ED="@firebase/functions-compat",PD="@firebase/installations",ID="@firebase/installations-compat",SD="@firebase/messaging",xD="@firebase/messaging-compat",AD="@firebase/performance",CD="@firebase/performance-compat",RD="@firebase/remote-config",kD="@firebase/remote-config-compat",LD="@firebase/storage",bD="@firebase/storage-compat",DD="@firebase/firestore",MD="@firebase/vertexai-preview",ND="@firebase/firestore-compat",OD="firebase",VD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="[DEFAULT]",FD={[tg]:"fire-core",[hD]:"fire-core-compat",[fD]:"fire-analytics",[dD]:"fire-analytics-compat",[mD]:"fire-app-check",[pD]:"fire-app-check-compat",[gD]:"fire-auth",[_D]:"fire-auth-compat",[yD]:"fire-rtdb",[vD]:"fire-data-connect",[wD]:"fire-rtdb-compat",[TD]:"fire-fn",[ED]:"fire-fn-compat",[PD]:"fire-iid",[ID]:"fire-iid-compat",[SD]:"fire-fcm",[xD]:"fire-fcm-compat",[AD]:"fire-perf",[CD]:"fire-perf-compat",[RD]:"fire-rc",[kD]:"fire-rc-compat",[LD]:"fire-gcs",[bD]:"fire-gcs-compat",[DD]:"fire-fst",[ND]:"fire-fst-compat",[MD]:"fire-vertex","fire-js":"fire-js",[OD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,jD=new Map,ig=new Map;function u0(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ci(t){const e=t.name;if(ig.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,t);for(const n of xd.values())u0(n,t);for(const n of jD.values())u0(n,t);return!0}function lo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ni(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new ao("app","Firebase",BD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=VD;function fS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ng,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Kr.create("bad-app-name",{appName:String(r)});if(n||(n=sS()),!n)throw Kr.create("no-options");const o=xd.get(r);if(o){if(Uu(n,o.options)&&Uu(i,o.config))return o;throw Kr.create("duplicate-app",{appName:r})}const a=new Kb(r);for(const c of ig.values())a.addComponent(c);const u=new UD(n,i,a);return xd.set(r,u),u}function B_(t=ng){const e=xd.get(t);if(!e&&t===ng&&sS())return fS();if(!e)throw Kr.create("no-app",{appName:t});return e}function zn(t,e,n){var i;let r=(i=FD[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(u.join(" "));return}Ci(new li(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="firebase-heartbeat-database",$D=1,zu="firebase-heartbeat-store";let Dp=null;function pS(){return Dp||(Dp=dS(zD,$D,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),Dp}async function WD(t){try{const n=(await pS()).transaction(zu),i=await n.objectStore(zu).get(mS(t));return await n.done,i}catch(e){if(e instanceof ci)rr.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function c0(t,e){try{const i=(await pS()).transaction(zu,"readwrite");await i.objectStore(zu).put(e,mS(t)),await i.done}catch(n){if(n instanceof ci)rr.warn(n.message);else{const i=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(i.message)}}}function mS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=1024,qD=30*24*60*60*1e3;class GD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=h0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=qD}),this._storage.overwrite(this._heartbeatsCache))}catch(i){rr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h0(),{heartbeatsToSend:i,unsentEntries:r}=KD(this._heartbeatsCache.heartbeats),o=Sd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return rr.warn(n),""}}}function h0(){return new Date().toISOString().substring(0,10)}function KD(t,e=HD){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),d0(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),d0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ZD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lS()?uS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function d0(t){return Sd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){Ci(new li("platform-logger",e=>new uD(e),"PRIVATE")),Ci(new li("heartbeat",e=>new GD(e),"PRIVATE")),zn(tg,l0,t),zn(tg,l0,"esm2017"),zn("fire-js","")}QD("");function U_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function gS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YD=gS,_S=new ao("auth","Firebase",gS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new gf("@firebase/auth");function XD(t,...e){Ad.logLevel<=ke.WARN&&Ad.warn(`Auth (${Ga}): ${t}`,...e)}function $h(t,...e){Ad.logLevel<=ke.ERROR&&Ad.error(`Auth (${Ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw $_(t,...e)}function si(t,...e){return $_(t,...e)}function z_(t,e,n){const i=Object.assign(Object.assign({},YD()),{[e]:n});return new ao("auth","Firebase",i).create(e,{appName:t.name})}function Qi(t){return z_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JD(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&qn(t,"argument-error"),z_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return _S.create(t,...e)}function me(t,e,...n){if(!t)throw $_(e,...n)}function Hi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $h(e),new Error(e)}function sr(t,e){t||Hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eM(){return f0()==="http:"||f0()==="https:"}function f0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eM()||aS()||"connection"in navigator)?navigator.onLine:!0}function nM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=Ab()||kb()}get(){return tM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new lc(3e4,6e4);function cs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cr(t,e,n,i,r={}){return vS(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=ac(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:c},o);return Rb()||(f.referrerPolicy="no-referrer"),yS.fetch()(wS(t,t.config.apiHost,n,u),f)})}async function vS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},iM),e);try{const r=new oM(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Eh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Eh(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Eh(t,"user-disabled",a);const m=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw z_(t,m,f);qn(t,m)}}catch(r){if(r instanceof ci)throw r;qn(t,"network-request-failed",{message:String(r)})}}async function uc(t,e,n,i,r={}){const o=await cr(t,e,n,i,r);return"mfaPendingCredential"in o&&qn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function wS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?W_(t.config,r):`${t.config.apiScheme}://${r}`}function sM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(si(this.auth,"network-request-failed")),rM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Eh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=si(t,e,i);return r.customData._tokenResponse=n,r}function p0(t){return t!==void 0&&t.enterprise!==void 0}class aM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function lM(t,e){return cr(t,"GET","/v2/recaptchaConfig",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(t,e){return cr(t,"POST","/v1/accounts:delete",e)}async function TS(t,e){return cr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cM(t,e=!1){const n=lt(t),i=await n.getIdToken(e),r=H_(i);me(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:du(Mp(r.auth_time)),issuedAtTime:du(Mp(r.iat)),expirationTime:du(Mp(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Mp(t){return Number(t)*1e3}function H_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const r=iS(n);return r?JSON.parse(r):($h("Failed to decode base64 JWT payload"),null)}catch(r){return $h("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function m0(t){const e=H_(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ci&&hM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function hM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ba(t,TS(n,{idToken:i}));me(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ES(o.providerUserInfo):[],u=pM(t.providerData,a),c=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),m=c?f:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new sg(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function fM(t){const e=lt(t);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pM(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ES(t){return t.map(e=>{var{providerId:n}=e,i=U_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e){const n=await vS(t,{},async()=>{const i=ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=wS(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",yS.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gM(t,e){return cr(t,"POST","/v2/accounts:revokeToken",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=m0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await mM(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ta;return i&&(me(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(me(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(me(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ta,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qi{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=U_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await ba(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cM(this,e)}reload(){return fM(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Cd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(Qi(this.auth));const e=await this.getIdToken();return await ba(this,uM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,u,c,f,m;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,v=(r=n.email)!==null&&r!==void 0?r:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(u=n.tenantId)!==null&&u!==void 0?u:void 0,V=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(f=n.createdAt)!==null&&f!==void 0?f:void 0,x=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:B,isAnonymous:G,providerData:W,stsTokenManager:R}=n;me(C&&R,e,"internal-error");const I=Ta.fromJSON(this.name,R);me(typeof C=="string",e,"internal-error"),Er(g,e.name),Er(v,e.name),me(typeof B=="boolean",e,"internal-error"),me(typeof G=="boolean",e,"internal-error"),Er(T,e.name),Er(A,e.name),Er(k,e.name),Er(V,e.name),Er(b,e.name),Er(x,e.name);const D=new qi({uid:C,auth:e,email:v,emailVerified:B,displayName:g,isAnonymous:G,photoURL:A,phoneNumber:T,tenantId:k,stsTokenManager:I,createdAt:b,lastLoginAt:x});return W&&Array.isArray(W)&&(D.providerData=W.map(M=>Object.assign({},M))),V&&(D._redirectEventId=V),D}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ta;r.updateFromServerResponse(n);const o=new qi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Cd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];me(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?ES(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ta;u.updateFromIdToken(i);const c=new qi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new sg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Map;function Gi(t){sr(t instanceof Function,"Expected a class definition");let e=g0.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,g0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}PS.type="NONE";const _0=PS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ea{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Wh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Wh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ea(Gi(_0),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Gi(_0);const a=Wh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){const g=qi._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Ea(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ea(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RS(e))return"Blackberry";if(kS(e))return"Webos";if(SS(e))return"Safari";if((e.includes("chrome/")||xS(e))&&!e.includes("edge/"))return"Chrome";if(CS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function IS(t=Gt()){return/firefox\//i.test(t)}function SS(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xS(t=Gt()){return/crios\//i.test(t)}function AS(t=Gt()){return/iemobile/i.test(t)}function CS(t=Gt()){return/android/i.test(t)}function RS(t=Gt()){return/blackberry/i.test(t)}function kS(t=Gt()){return/webos/i.test(t)}function q_(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _M(t=Gt()){var e;return q_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yM(){return Lb()&&document.documentMode===10}function LS(t=Gt()){return q_(t)||CS(t)||kS(t)||RS(t)||/windows phone/i.test(t)||AS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e=[]){let n;switch(t){case"Browser":n=y0(Gt());break;case"Worker":n=`${y0(Gt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ga}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t,e={}){return cr(t,"GET","/v2/passwordPolicy",cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=6;class EM{constructor(e){var n,i,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:TM,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v0(this),this.idTokenSubscription=new v0(this),this.beforeStateQueue=new vM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await TS(this,{idToken:e}),i=await qi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ni(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(r=c.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(Qi(this));const n=e?lt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wM(this),n=new EM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ao("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await gM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gi(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&XD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hs(t){return lt(t)}class v0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fb(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IM(t){_f=t}function DS(t){return _f.loadJS(t)}function SM(){return _f.recaptchaEnterpriseScript}function xM(){return _f.gapiScript}function AM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const CM="recaptcha-enterprise",RM="NO_RECAPTCHA";class kM{constructor(e){this.type=CM,this.auth=hs(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{lM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new aM(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(c=>{u(c)})})}function r(o,a,u){const c=window.grecaptcha;p0(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(RM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&p0(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=SM();c.length!==0&&(c+=u),DS(c).then(()=>{r(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function w0(t,e,n,i=!1){const r=new kM(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function og(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await w0(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await w0(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t,e){const n=lo(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Uu(o,e??{}))return r;qn(r,"already-initialized")}return n.initialize({options:e})}function bM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function DM(t,e,n){const i=hs(t);me(i._canInitEmulator,i,"emulator-config-failed"),me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=MS(e),{host:a,port:u}=MM(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),NM()}function MS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MM(t){const e=MS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:T0(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:T0(a)}}}function T0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(e){return Hi("not implemented")}_linkToIdToken(e,n){return Hi("not implemented")}_getReauthenticationResolver(e){return Hi("not implemented")}}async function OM(t,e){return cr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,e){return uc(t,"POST","/v1/accounts:signInWithPassword",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){return uc(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}async function jM(t,e){return uc(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends G_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new $u(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new $u(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return og(e,n,"signInWithPassword",VM);case"emailLink":return FM(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return og(e,i,"signUpPassword",OM);case"emailLink":return jM(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e){return uc(t,"POST","/v1/accounts:signInWithIdp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="http://localhost";class Ys extends G_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=U_(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Ys(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Pa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Pa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pa(e,n)}buildRequest(){const e={requestUri:BM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zM(t){const e=Ql(Yl(t)).link,n=e?Ql(Yl(e)).deep_link_id:null,i=Ql(Yl(t)).deep_link_id;return(i?Ql(Yl(i)).link:null)||i||n||e||t}class K_{constructor(e){var n,i,r,o,a,u;const c=Ql(Yl(e)),f=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(i=c.oobCode)!==null&&i!==void 0?i:null,g=UM((r=c.mode)!==null&&r!==void 0?r:null);me(f&&m&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=m,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=zM(e);try{return new K_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.providerId=Ka.PROVIDER_ID}static credential(e,n){return $u._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=K_.parseLink(n);return me(i,"argument-error"),$u._fromEmailAndCode(e,i.code,i.tenantId)}}Ka.PROVIDER_ID="password";Ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends Z_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends cc{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ys._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends cc{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends cc{constructor(){super("twitter.com")}static credential(e,n){return Ys._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return br.credential(n,i)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){return uc(t,"POST","/v1/accounts:signUp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await qi._fromIdTokenResponse(e,i,r),a=E0(i);return new Xs({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=E0(i);return new Xs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function E0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends ci{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Rd(e,n,i,r)}}function NS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(t,o,e,i):o})}async function WM(t,e,n=!1){const i=await ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e,n=!1){const{auth:i}=t;if(ni(i.app))return Promise.reject(Qi(i));const r="reauthenticate";try{const o=await ba(t,NS(i,r,e,t),n);me(o.idToken,i,"internal-error");const a=H_(o.idToken);me(a,i,"internal-error");const{sub:u}=a;return me(t.uid===u,i,"user-mismatch"),Xs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&qn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e,n=!1){if(ni(t.app))return Promise.reject(Qi(t));const i="signIn",r=await NS(t,i,e),o=await Xs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function qM(t,e){return OS(hs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(t){const e=hs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FS(t,e,n){if(ni(t.app))return Promise.reject(Qi(t));const i=hs(t),a=await og(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$M).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&VS(t),c}),u=await Xs._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function GM(t,e,n){return ni(t.app)?Promise.reject(Qi(t)):qM(lt(t),Ka.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&VS(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return cr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=lt(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await ba(i,KM(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const u=i.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function QM(t,e,n,i){return lt(t).onIdTokenChanged(e,n,i)}function YM(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function XM(t,e,n,i){return lt(t).onAuthStateChanged(e,n,i)}function jS(t){return lt(t).signOut()}const kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=1e3,eN=10;class US extends BS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);yM()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,eN):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},JM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}US.type="LOCAL";const tN=US;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends BS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zS.type="SESSION";const $S=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new yf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),c=await nN(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const f=Q_("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function rN(t){Ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function sN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aN(){return WS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firebaseLocalStorageDb",lN=1,Ld="firebaseLocalStorage",qS="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vf(t,e){return t.transaction([Ld],e?"readwrite":"readonly").objectStore(Ld)}function uN(){const t=indexedDB.deleteDatabase(HS);return new hc(t).toPromise()}function ag(){const t=indexedDB.open(HS,lN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ld,{keyPath:qS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ld)?e(i):(i.close(),await uN(),e(await ag()))})})}async function P0(t,e,n){const i=vf(t,!0).put({[qS]:e,value:n});return new hc(i).toPromise()}async function cN(t,e){const n=vf(t,!1).get(e),i=await new hc(n).toPromise();return i===void 0?null:i.value}function I0(t,e){const n=vf(t,!0).delete(e);return new hc(n).toPromise()}const hN=800,dN=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>dN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yf._getInstance(aN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sN(),!this.activeServiceWorker)return;this.sender=new iN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ag();return await P0(e,kd,"1"),await I0(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>P0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>cN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>I0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=vf(r,!1).getAll();return new hc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const fN=GS;new lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e){return e?Gi(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends G_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pN(t){return OS(t.auth,new Y_(t),t.bypassAuthState)}function mN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),HM(n,new Y_(t),t.bypassAuthState)}async function gN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),WM(n,new Y_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pN;case"linkViaPopup":case"linkViaRedirect":return gN;case"reauthViaPopup":case"reauthViaRedirect":return mN;default:qn(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new lc(2e3,1e4);async function QS(t,e,n){if(ni(t.app))return Promise.reject(si(t,"operation-not-supported-in-this-environment"));const i=hs(t);JD(t,e,Z_);const r=KS(i,n);return new Vs(i,"signInViaPopup",e,r).executeNotNull()}class Vs extends ZS{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=Q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_N.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="pendingRedirect",Hh=new Map;class vN extends ZS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Hh.get(this.auth._key());if(!e){try{const i=await wN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Hh.set(this.auth._key(),e)}return this.bypassAuthState||Hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wN(t,e){const n=PN(e),i=EN(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function TN(t,e){Hh.set(t._key(),e)}function EN(t){return Gi(t._redirectPersistence)}function PN(t){return Wh(yN,t.config.apiKey,t.name)}async function IN(t,e,n=!1){if(ni(t.app))return Promise.reject(Qi(t));const i=hs(t),r=KS(i,e),a=await new vN(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=10*60*1e3;class xN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!YS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(si(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SN&&this.cachedEventUids.clear(),this.cachedEventUids.has(S0(e))}saveEventToCache(e){this.cachedEventUids.add(S0(e)),this.lastProcessedEventTime=Date.now()}}function S0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e={}){return cr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kN=/^https?/;async function LN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CN(t);for(const n of e)try{if(bN(n))return}catch{}qn(t,"unauthorized-domain")}function bN(t){const e=rg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!kN.test(n))return!1;if(RN.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new lc(3e4,6e4);function x0(){const t=Ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function MN(t){return new Promise((e,n)=>{var i,r,o;function a(){x0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x0(),n(si(t,"network-request-failed"))},timeout:DN.get()})}if(!((r=(i=Ii().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Ii().gapi)===null||o===void 0)&&o.load)a();else{const u=AM("iframefcb");return Ii()[u]=()=>{gapi.load?a():n(si(t,"network-request-failed"))},DS(`${xM()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw qh=null,e})}let qh=null;function NN(t){return qh=qh||MN(t),qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=new lc(5e3,15e3),VN="__/auth/iframe",FN="emulator/auth/iframe",jN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UN(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W_(e,FN):`https://${t.config.authDomain}/${VN}`,i={apiKey:e.apiKey,appName:t.name,v:Ga},r=BN.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${ac(i).slice(1)}`}async function zN(t){const e=await NN(t),n=Ii().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:UN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jN,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=si(t,"network-request-failed"),u=Ii().setTimeout(()=>{o(a)},ON.get());function c(){Ii().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WN=500,HN=600,qN="_blank",GN="http://localhost";class A0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KN(t,e,n,i=WN,r=HN){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},$N),{width:i.toString(),height:r.toString(),top:o,left:a}),f=Gt().toLowerCase();n&&(u=xS(f)?qN:n),IS(f)&&(e=e||GN,c.scrollbars="yes");const m=Object.entries(c).reduce((v,[T,A])=>`${v}${T}=${A},`,"");if(_M(f)&&u!=="_self")return ZN(e||"",u),new A0(null);const g=window.open(e||"",u,m);me(g,t,"popup-blocked");try{g.focus()}catch{}return new A0(g)}function ZN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="__/auth/handler",YN="emulator/auth/handler",XN=encodeURIComponent("fac");async function C0(t,e,n,i,r,o){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ga,eventId:r};if(e instanceof Z_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Vb(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof cc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),f=c?`#${XN}=${encodeURIComponent(c)}`:"";return`${JN(t)}?${ac(u).slice(1)}${f}`}function JN({config:t}){return t.emulator?W_(t,YN):`https://${t.authDomain}/${QN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="webStorageSupport";class eO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=IN,this._overrideRedirectResult=TN}async _openPopup(e,n,i,r){var o;sr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await C0(e,n,i,rg(),r);return KN(e,a,Q_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await C0(e,n,i,rg(),r);return rN(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(sr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await zN(e),i=new xN(e);return n.register("authEvent",r=>(me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Np,{type:Np},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Np];a!==void 0&&n(!!a),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LS()||SS()||q_()}}const tO=eO;var R0="@firebase/auth",k0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rO(t){Ci(new li("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;me(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bS(t)},f=new PM(i,r,o,c);return bM(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ci(new li("auth-internal",e=>{const n=hs(e.getProvider("auth").getImmediate());return(i=>new nO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(R0,k0,iO(t)),zn(R0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=5*60,oO=oS("authIdTokenMaxAge")||sO;let L0=null;const aO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>oO)return;const r=n==null?void 0:n.token;L0!==r&&(L0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function lO(t=B_()){const e=lo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LM(t,{popupRedirectResolver:tO,persistence:[fN,tN,$S]}),i=oS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=aO(o.toString());YM(n,a,()=>a(n.currentUser)),QM(n,u=>a(u))}}const r=rS("auth");return r&&DM(n,`http://${r}`),n}function uO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=si("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",uO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rO("Browser");var cO="firebase",hO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(cO,hO,"app");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,XS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function D(){}D.prototype=I.prototype,R.D=I.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(M,F,j){for(var N=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)N[Te-2]=arguments[Te];return I.prototype[F].apply(M,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,D){D||(D=0);var M=Array(16);if(typeof I=="string")for(var F=0;16>F;++F)M[F]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(F=0;16>F;++F)M[F]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=R.g[0],D=R.g[1],F=R.g[2];var j=R.g[3],N=I+(j^D&(F^j))+M[0]+3614090360&4294967295;I=D+(N<<7&4294967295|N>>>25),N=j+(F^I&(D^F))+M[1]+3905402710&4294967295,j=I+(N<<12&4294967295|N>>>20),N=F+(D^j&(I^D))+M[2]+606105819&4294967295,F=j+(N<<17&4294967295|N>>>15),N=D+(I^F&(j^I))+M[3]+3250441966&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(j^D&(F^j))+M[4]+4118548399&4294967295,I=D+(N<<7&4294967295|N>>>25),N=j+(F^I&(D^F))+M[5]+1200080426&4294967295,j=I+(N<<12&4294967295|N>>>20),N=F+(D^j&(I^D))+M[6]+2821735955&4294967295,F=j+(N<<17&4294967295|N>>>15),N=D+(I^F&(j^I))+M[7]+4249261313&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(j^D&(F^j))+M[8]+1770035416&4294967295,I=D+(N<<7&4294967295|N>>>25),N=j+(F^I&(D^F))+M[9]+2336552879&4294967295,j=I+(N<<12&4294967295|N>>>20),N=F+(D^j&(I^D))+M[10]+4294925233&4294967295,F=j+(N<<17&4294967295|N>>>15),N=D+(I^F&(j^I))+M[11]+2304563134&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(j^D&(F^j))+M[12]+1804603682&4294967295,I=D+(N<<7&4294967295|N>>>25),N=j+(F^I&(D^F))+M[13]+4254626195&4294967295,j=I+(N<<12&4294967295|N>>>20),N=F+(D^j&(I^D))+M[14]+2792965006&4294967295,F=j+(N<<17&4294967295|N>>>15),N=D+(I^F&(j^I))+M[15]+1236535329&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(F^j&(D^F))+M[1]+4129170786&4294967295,I=D+(N<<5&4294967295|N>>>27),N=j+(D^F&(I^D))+M[6]+3225465664&4294967295,j=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(j^I))+M[11]+643717713&4294967295,F=j+(N<<14&4294967295|N>>>18),N=D+(j^I&(F^j))+M[0]+3921069994&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(F^j&(D^F))+M[5]+3593408605&4294967295,I=D+(N<<5&4294967295|N>>>27),N=j+(D^F&(I^D))+M[10]+38016083&4294967295,j=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(j^I))+M[15]+3634488961&4294967295,F=j+(N<<14&4294967295|N>>>18),N=D+(j^I&(F^j))+M[4]+3889429448&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(F^j&(D^F))+M[9]+568446438&4294967295,I=D+(N<<5&4294967295|N>>>27),N=j+(D^F&(I^D))+M[14]+3275163606&4294967295,j=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(j^I))+M[3]+4107603335&4294967295,F=j+(N<<14&4294967295|N>>>18),N=D+(j^I&(F^j))+M[8]+1163531501&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(F^j&(D^F))+M[13]+2850285829&4294967295,I=D+(N<<5&4294967295|N>>>27),N=j+(D^F&(I^D))+M[2]+4243563512&4294967295,j=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(j^I))+M[7]+1735328473&4294967295,F=j+(N<<14&4294967295|N>>>18),N=D+(j^I&(F^j))+M[12]+2368359562&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(D^F^j)+M[5]+4294588738&4294967295,I=D+(N<<4&4294967295|N>>>28),N=j+(I^D^F)+M[8]+2272392833&4294967295,j=I+(N<<11&4294967295|N>>>21),N=F+(j^I^D)+M[11]+1839030562&4294967295,F=j+(N<<16&4294967295|N>>>16),N=D+(F^j^I)+M[14]+4259657740&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(D^F^j)+M[1]+2763975236&4294967295,I=D+(N<<4&4294967295|N>>>28),N=j+(I^D^F)+M[4]+1272893353&4294967295,j=I+(N<<11&4294967295|N>>>21),N=F+(j^I^D)+M[7]+4139469664&4294967295,F=j+(N<<16&4294967295|N>>>16),N=D+(F^j^I)+M[10]+3200236656&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(D^F^j)+M[13]+681279174&4294967295,I=D+(N<<4&4294967295|N>>>28),N=j+(I^D^F)+M[0]+3936430074&4294967295,j=I+(N<<11&4294967295|N>>>21),N=F+(j^I^D)+M[3]+3572445317&4294967295,F=j+(N<<16&4294967295|N>>>16),N=D+(F^j^I)+M[6]+76029189&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(D^F^j)+M[9]+3654602809&4294967295,I=D+(N<<4&4294967295|N>>>28),N=j+(I^D^F)+M[12]+3873151461&4294967295,j=I+(N<<11&4294967295|N>>>21),N=F+(j^I^D)+M[15]+530742520&4294967295,F=j+(N<<16&4294967295|N>>>16),N=D+(F^j^I)+M[2]+3299628645&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(F^(D|~j))+M[0]+4096336452&4294967295,I=D+(N<<6&4294967295|N>>>26),N=j+(D^(I|~F))+M[7]+1126891415&4294967295,j=I+(N<<10&4294967295|N>>>22),N=F+(I^(j|~D))+M[14]+2878612391&4294967295,F=j+(N<<15&4294967295|N>>>17),N=D+(j^(F|~I))+M[5]+4237533241&4294967295,D=F+(N<<21&4294967295|N>>>11),N=I+(F^(D|~j))+M[12]+1700485571&4294967295,I=D+(N<<6&4294967295|N>>>26),N=j+(D^(I|~F))+M[3]+2399980690&4294967295,j=I+(N<<10&4294967295|N>>>22),N=F+(I^(j|~D))+M[10]+4293915773&4294967295,F=j+(N<<15&4294967295|N>>>17),N=D+(j^(F|~I))+M[1]+2240044497&4294967295,D=F+(N<<21&4294967295|N>>>11),N=I+(F^(D|~j))+M[8]+1873313359&4294967295,I=D+(N<<6&4294967295|N>>>26),N=j+(D^(I|~F))+M[15]+4264355552&4294967295,j=I+(N<<10&4294967295|N>>>22),N=F+(I^(j|~D))+M[6]+2734768916&4294967295,F=j+(N<<15&4294967295|N>>>17),N=D+(j^(F|~I))+M[13]+1309151649&4294967295,D=F+(N<<21&4294967295|N>>>11),N=I+(F^(D|~j))+M[4]+4149444226&4294967295,I=D+(N<<6&4294967295|N>>>26),N=j+(D^(I|~F))+M[11]+3174756917&4294967295,j=I+(N<<10&4294967295|N>>>22),N=F+(I^(j|~D))+M[2]+718787259&4294967295,F=j+(N<<15&4294967295|N>>>17),N=D+(j^(F|~I))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(F+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+j&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var D=I-this.blockSize,M=this.B,F=this.h,j=0;j<I;){if(F==0)for(;j<=D;)r(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<I;)if(M[F++]=R.charCodeAt(j++),F==this.blockSize){r(this,M),F=0;break}}else for(;j<I;)if(M[F++]=R[j++],F==this.blockSize){r(this,M),F=0;break}}this.h=F,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var D=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=D&255,D/=256;for(this.u(R),R=Array(16),I=D=0;4>I;++I)for(var M=0;32>M;M+=8)R[D++]=this.g[I]>>>M&255;return R};function o(R,I){var D=u;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=I(R)}function a(R,I){this.h=I;for(var D=[],M=!0,F=R.length-1;0<=F;F--){var j=R[F]|0;M&&j==I||(D[F]=j,M=!1)}this.g=D}var u={};function c(R){return-128<=R&&128>R?o(R,function(I){return new a([I|0],0>I?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(0>R)return V(f(-R));for(var I=[],D=1,M=0;R>=D;M++)I[M]=R/D|0,D*=4294967296;return new a(I,0)}function m(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return V(m(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(I,8)),M=g,F=0;F<R.length;F+=8){var j=Math.min(8,R.length-F),N=parseInt(R.substring(F,F+j),I);8>j?(j=f(Math.pow(I,j)),M=M.j(j).add(f(N))):(M=M.j(D),M=M.add(f(N)))}return M}var g=c(0),v=c(1),T=c(16777216);t=a.prototype,t.m=function(){if(k(this))return-V(this).m();for(var R=0,I=1,D=0;D<this.g.length;D++){var M=this.i(D);R+=(0<=M?M:4294967296+M)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(k(this))return"-"+V(this).toString(R);for(var I=f(Math.pow(R,6)),D=this,M="";;){var F=B(D,I).g;D=b(D,F.j(I));var j=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=F,A(D))return j+M;for(;6>j.length;)j="0"+j;M=j+M}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=b(this,R),k(R)?-1:A(R)?0:1};function V(R){for(var I=R.g.length,D=[],M=0;M<I;M++)D[M]=~R.g[M];return new a(D,~R.h).add(v)}t.abs=function(){return k(this)?V(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0,F=0;F<=I;F++){var j=M+(this.i(F)&65535)+(R.i(F)&65535),N=(j>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);M=N>>>16,j&=65535,N&=65535,D[F]=N<<16|j}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(R,I){return R.add(V(I))}t.j=function(R){if(A(this)||A(R))return g;if(k(this))return k(R)?V(this).j(V(R)):V(V(this).j(R));if(k(R))return V(this.j(V(R)));if(0>this.l(T)&&0>R.l(T))return f(this.m()*R.m());for(var I=this.g.length+R.g.length,D=[],M=0;M<2*I;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(var F=0;F<R.g.length;F++){var j=this.i(M)>>>16,N=this.i(M)&65535,Te=R.i(F)>>>16,ze=R.i(F)&65535;D[2*M+2*F]+=N*ze,x(D,2*M+2*F),D[2*M+2*F+1]+=j*ze,x(D,2*M+2*F+1),D[2*M+2*F+1]+=N*Te,x(D,2*M+2*F+1),D[2*M+2*F+2]+=j*Te,x(D,2*M+2*F+2)}for(M=0;M<I;M++)D[M]=D[2*M+1]<<16|D[2*M];for(M=I;M<2*I;M++)D[M]=0;return new a(D,0)};function x(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function C(R,I){this.g=R,this.h=I}function B(R,I){if(A(I))throw Error("division by zero");if(A(R))return new C(g,g);if(k(R))return I=B(V(R),I),new C(V(I.g),V(I.h));if(k(I))return I=B(R,V(I)),new C(V(I.g),I.h);if(30<R.g.length){if(k(R)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var D=v,M=I;0>=M.l(R);)D=G(D),M=G(M);var F=W(D,1),j=W(M,1);for(M=W(M,2),D=W(D,2);!A(M);){var N=j.add(M);0>=N.l(R)&&(F=F.add(D),j=N),M=W(M,1),D=W(D,1)}return I=b(R,F.j(I)),new C(F,I)}for(F=g;0<=R.l(I);){for(D=Math.max(1,Math.floor(R.m()/I.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),j=f(D),N=j.j(I);k(N)||0<N.l(R);)D-=M,j=f(D),N=j.j(I);A(j)&&(j=v),F=F.add(j),R=b(R,N)}return new C(F,R)}t.A=function(R){return B(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)&R.i(M);return new a(D,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)|R.i(M);return new a(D,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)^R.i(M);return new a(D,this.h^R.h)};function G(R){for(var I=R.g.length+1,D=[],M=0;M<I;M++)D[M]=R.i(M)<<1|R.i(M-1)>>>31;return new a(D,R.h)}function W(R,I){var D=I>>5;I%=32;for(var M=R.g.length-D,F=[],j=0;j<M;j++)F[j]=0<I?R.i(j+D)>>>I|R.i(j+D+1)<<32-I:R.i(j+D);return new a(F,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,XS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,$s=a}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JS,Xl,ex,Gh,lg,tx,nx,ix;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,w){return h==Array.prototype||h==Object.prototype||(h[_]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(h,_){if(_)e:{var w=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var z=h[S];if(!(z in w))break e;w=w[z]}h=h[h.length-1],S=w[h],_=_(S),_!=S&&_!=null&&e(w,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var w=0,S=!1,z={next:function(){if(!S&&w<h.length){var q=w++;return{value:_(q,h[q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(h){return h||function(){return o(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,w){return h.call.apply(h.bind,arguments)}function g(h,_,w){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),h.apply(_,z)}}return function(){return h.apply(_,arguments)}}function v(h,_,w){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,v.apply(null,arguments)}function T(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function A(h,_){function w(){}w.prototype=_.prototype,h.aa=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(S,z,q){for(var ee=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ee[Oe-2]=arguments[Oe];return _.prototype[z].apply(S,ee)}}function k(h){const _=h.length;if(0<_){const w=Array(_);for(let S=0;S<_;S++)w[S]=h[S];return w}return[]}function V(h,_){for(let w=1;w<arguments.length;w++){const S=arguments[w];if(c(S)){const z=h.length||0,q=S.length||0;h.length=z+q;for(let ee=0;ee<q;ee++)h[z+ee]=S[ee]}else h.push(S)}}class b{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function x(h){return/^[\s\xa0]*$/.test(h)}function C(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function B(h){return B[" "](h),h}B[" "]=function(){};var G=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function W(h,_,w){for(const S in h)_.call(w,h[S],S,h)}function R(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function I(h){const _={};for(const w in h)_[w]=h[w];return _}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,_){let w,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(w in S)h[w]=S[w];for(let q=0;q<D.length;q++)w=D[q],Object.prototype.hasOwnProperty.call(S,w)&&(h[w]=S[w])}}function F(h){var _=1;h=h.split(":");const w=[];for(;0<_&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function j(h){u.setTimeout(()=>{throw h},0)}function N(){var h=ae;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Te{constructor(){this.h=this.g=null}add(_,w){const S=ze.get();S.set(_,w),this.h?this.h.next=S:this.g=S,this.h=S}}var ze=new b(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,K=!1,ae=new Te,J=()=>{const h=u.Promise.resolve(void 0);Ke=()=>{h.then(te)}};var te=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(w){j(w)}var _=ze;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}K=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};u.addEventListener("test",w,_),u.removeEventListener("test",w,_)}catch{}return h}();function Ee(h,_){if(Pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(G){e:{try{B(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ee.aa.h.call(this)}}A(Ee,Pe);var ce={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),An=0;function hr(h,_,w,S,z){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!S,this.ha=z,this.key=++An,this.da=this.fa=!1}function pn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ft(h){this.src=h,this.g={},this.h=0}Ft.prototype.add=function(h,_,w,S,z){var q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);var ee=ps(h,_,S,z);return-1<ee?(_=h[ee],w||(_.fa=!1)):(_=new hr(_,this.src,q,!!S,z),_.fa=w,h.push(_)),_};function hi(h,_){var w=_.type;if(w in h.g){var S=h.g[w],z=Array.prototype.indexOf.call(S,_,void 0),q;(q=0<=z)&&Array.prototype.splice.call(S,z,1),q&&(pn(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function ps(h,_,w,S){for(var z=0;z<h.length;++z){var q=h[z];if(!q.da&&q.listener==_&&q.capture==!!w&&q.ha==S)return z}return-1}var Ja="closure_lm_"+(1e6*Math.random()|0),go={};function el(h,_,w,S,z){if(Array.isArray(_)){for(var q=0;q<_.length;q++)el(h,_[q],w,S,z);return null}return w=xc(w),h&&h[st]?h.K(_,w,f(S)?!!S.capture:!1,z):tl(h,_,w,!1,S,z)}function tl(h,_,w,S,z,q){if(!_)throw Error("Invalid event type");var ee=f(z)?!!z.capture:!!z,Oe=wo(h);if(Oe||(h[Ja]=Oe=new Ft(h)),w=Oe.add(_,w,S,ee,q),w.proxy)return w;if(S=_o(),w.proxy=S,S.src=h,S.listener=w,h.addEventListener)De||(z=ee),z===void 0&&(z=!1),h.addEventListener(_.toString(),S,z);else if(h.attachEvent)h.attachEvent(vo(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function _o(){function h(w){return _.call(h.src,h.listener,w)}const _=Sc;return h}function Ic(h,_,w,S,z){if(Array.isArray(_))for(var q=0;q<_.length;q++)Ic(h,_[q],w,S,z);else S=f(S)?!!S.capture:!!S,w=xc(w),h&&h[st]?(h=h.i,_=String(_).toString(),_ in h.g&&(q=h.g[_],w=ps(q,w,S,z),-1<w&&(pn(q[w]),Array.prototype.splice.call(q,w,1),q.length==0&&(delete h.g[_],h.h--)))):h&&(h=wo(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ps(_,w,S,z)),(w=-1<h?_[h]:null)&&yo(w))}function yo(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[st])hi(_.i,h);else{var w=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(w,S,h.capture):_.detachEvent?_.detachEvent(vo(w),S):_.addListener&&_.removeListener&&_.removeListener(S),(w=wo(_))?(hi(w,h),w.h==0&&(w.src=null,_[Ja]=null)):pn(h)}}}function vo(h){return h in go?go[h]:go[h]="on"+h}function Sc(h,_){if(h.da)h=!0;else{_=new Ee(_,this);var w=h.listener,S=h.ha||h.src;h.fa&&yo(h),h=w.call(S,_)}return h}function wo(h){return h=h[Ja],h instanceof Ft?h:null}var nl="__closure_events_fn_"+(1e9*Math.random()>>>0);function xc(h){return typeof h=="function"?h:(h[nl]||(h[nl]=function(_){return h.handleEvent(_)}),h[nl])}function pt(){pe.call(this),this.i=new Ft(this),this.M=this,this.F=null}A(pt,pe),pt.prototype[st]=!0,pt.prototype.removeEventListener=function(h,_,w,S){Ic(this,h,_,w,S)};function It(h,_){var w,S=h.F;if(S)for(w=[];S;S=S.F)w.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new Pe(_,h);else if(_ instanceof Pe)_.target=_.target||h;else{var z=_;_=new Pe(S,h),M(_,z)}if(z=!0,w)for(var q=w.length-1;0<=q;q--){var ee=_.g=w[q];z=ms(ee,S,!0,_)&&z}if(ee=_.g=h,z=ms(ee,S,!0,_)&&z,z=ms(ee,S,!1,_)&&z,w)for(q=0;q<w.length;q++)ee=_.g=w[q],z=ms(ee,S,!1,_)&&z}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var w=h.g[_],S=0;S<w.length;S++)pn(w[S]);delete h.g[_],h.h--}}this.F=null},pt.prototype.K=function(h,_,w,S){return this.i.add(String(h),_,!1,w,S)},pt.prototype.L=function(h,_,w,S){return this.i.add(String(h),_,!0,w,S)};function ms(h,_,w,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var z=!0,q=0;q<_.length;++q){var ee=_[q];if(ee&&!ee.da&&ee.capture==w){var Oe=ee.listener,mt=ee.ha||ee.src;ee.fa&&hi(h.i,ee),z=Oe.call(mt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Ac(h,_,w){if(typeof h=="function")w&&(h=v(h,w));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(h,_||0)}function il(h){h.g=Ac(()=>{h.g=null,h.i&&(h.i=!1,il(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Cc extends pe{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:il(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(h){pe.call(this),this.h=h,this.g={}}A(gs,pe);var rl=[];function To(h){W(h.g,function(_,w){this.g.hasOwnProperty(w)&&yo(_)},h),h.g={}}gs.prototype.N=function(){gs.aa.N.call(this),To(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eo=u.JSON.stringify,Kf=u.JSON.parse,_s=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function sl(){}sl.prototype.h=null;function Rc(h){return h.h||(h.h=h.i())}function ol(){}var dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Po(){Pe.call(this,"d")}A(Po,Pe);function al(){Pe.call(this,"c")}A(al,Pe);var ki={},kc=null;function Io(){return kc=kc||new pt}ki.La="serverreachability";function Lc(h){Pe.call(this,ki.La,h)}A(Lc,Pe);function ys(h){const _=Io();It(_,new Lc(_))}ki.STAT_EVENT="statevent";function So(h,_){Pe.call(this,ki.STAT_EVENT,h),this.stat=_}A(So,Pe);function kt(h){const _=Io();It(_,new So(_,h))}ki.Ma="timingevent";function bc(h,_){Pe.call(this,ki.Ma,h),this.size=_}A(bc,Pe);function vs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function Cn(h,_,w,S,z,q){h.info(function(){if(h.g)if(q)for(var ee="",Oe=q.split("&"),mt=0;mt<Oe.length;mt++){var Le=Oe[mt].split("=");if(1<Le.length){var Be=Le[0];Le=Le[1];var Je=Be.split("_");ee=2<=Je.length&&Je[1]=="type"?ee+(Be+"="+Le+"&"):ee+(Be+"=redacted&")}}else ee=null;else ee=q;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+_+`
`+w+`
`+ee})}function oe(h,_,w,S,z,q,ee){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+_+`
`+w+`
`+q+" "+ee})}function Li(h,_,w,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Mc(h,w)+(S?" "+S:"")})}function Dc(h,_){h.info(function(){return"TIMEOUT: "+_})}ws.prototype.info=function(){};function Mc(h,_){if(!h.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var S=w[h];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var q=z[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ee=1;ee<z.length;ee++)z[ee]=""}}}}return Eo(w)}catch{return _}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ao;function Gn(){}A(Gn,sl),Gn.prototype.g=function(){return new XMLHttpRequest},Gn.prototype.i=function(){return{}},Ao=new Gn;function Kn(h,_,w,S){this.j=h,this.i=_,this.l=w,this.R=S||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nc}function Nc(){this.i=null,this.g="",this.h=!1}var Oc={},ll={};function ul(h,_,w){h.L=1,h.v=kn(ot(_)),h.m=w,h.P=!0,cl(h,null)}function cl(h,_){h.F=Date.now(),Ro(h),h.A=ot(h.v);var w=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),jc(w.i,"t",S),h.C=0,w=h.j.J,h.h=new Nc,h.g=qc(h.j,w?_:null,!h.m),0<h.O&&(h.M=new Cc(v(h.Y,h,h.g),h.O)),_=h.U,w=h.g,S=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(rl[0]=z.toString()),z=rl);for(var q=0;q<z.length;q++){var ee=el(w,z[q],S||_.handleEvent,!1,_.h||_);if(!ee)break;_.g[ee.key]=ee}_=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),ys(),Cn(h.i,h.u,h.A,h.l,h.R,h.m)}Kn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Kt(h)==3?_.j():this.Y(h)},Kn.prototype.Y=function(h){try{if(h==this.g)e:{const Je=Kt(this.g);var _=this.g.Ba();const vr=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||xl(this.g)))){this.J||Je!=4||_==7||(_==8||0>=vr?ys(3):ys(2)),hl(this);var w=this.g.Z();this.X=w;t:if(Vc(this)){var S=xl(this.g);h="";var z=S.length,q=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bi(this),Es(this);var ee="";break t}this.h.i=new u.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,h+=this.h.i.decode(S[_],{stream:!(q&&_==z-1)});S.length=0,this.h.g+=h,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=w==200,oe(this.i,this.u,this.A,this.l,this.R,Je,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,mt=this.g;if((Oe=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Oe)){var Le=Oe;break t}}Le=null}if(w=Le)Li(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ps(this,w);else{this.o=!1,this.s=3,kt(12),bi(this),Es(this);break e}}if(this.P){w=!0;let ut;for(;!this.J&&this.C<ee.length;)if(ut=Co(this,ee),ut==ll){Je==4&&(this.s=4,kt(14),w=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==Oc){this.s=4,kt(15),Li(this.i,this.l,ee,"[Invalid Chunk]"),w=!1;break}else Li(this.i,this.l,ut,null),Ps(this,ut);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||ee.length!=0||this.h.h||(this.s=1,kt(16),w=!1),this.o=this.o&&w,!w)Li(this.i,this.l,ee,"[Invalid Chunked Response]"),bi(this),Es(this);else if(0<ee.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Fo(Be),Be.M=!0,kt(11))}}else Li(this.i,this.l,ee,null),Ps(this,ee);Je==4&&bi(this),this.o&&!this.J&&(Je==4?Cl(this.j,this):(this.o=!1,Ro(this)))}else Zf(this.g),w==400&&0<ee.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),bi(this),Es(this)}}}catch{}finally{}};function Vc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Co(h,_){var w=h.C,S=_.indexOf(`
`,w);return S==-1?ll:(w=Number(_.substring(w,S)),isNaN(w)?Oc:(S+=1,S+w>_.length?ll:(_=_.slice(S,S+w),h.C=S+w,_)))}Kn.prototype.cancel=function(){this.J=!0,bi(this)};function Ro(h){h.S=Date.now()+h.I,Fc(h,h.I)}function Fc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=vs(v(h.ba,h),_)}function hl(h){h.B&&(u.clearTimeout(h.B),h.B=null)}Kn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Dc(this.i,this.A),this.L!=2&&(ys(),kt(17)),bi(this),this.s=2,Es(this)):Fc(this,this.S-h)};function Es(h){h.j.G==0||h.J||Cl(h.j,h)}function bi(h){hl(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,To(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Ps(h,_){try{var w=h.j;if(w.G!=0&&(w.g==h||Ce(w.h,h))){if(!h.K&&Ce(w.h,h)&&w.G==3){try{var S=w.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Bo(w),Oo(w);else break e;Vo(w),kt(18)}}else w.za=z[1],0<w.za-w.T&&37500>z[2]&&w.F&&w.v==0&&!w.C&&(w.C=vs(v(w.Za,w),6e3));if(1>=fr(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Vi(w,11)}else if((h.K||w.g==h)&&Bo(w),!x(_))for(z=w.Da.g.parse(_),_=0;_<z.length;_++){let Le=z[_];if(w.T=Le[0],Le=Le[1],w.G==2)if(Le[0]=="c"){w.K=Le[1],w.ia=Le[2];const Be=Le[3];Be!=null&&(w.la=Be,w.j.info("VER="+w.la));const Je=Le[4];Je!=null&&(w.Aa=Je,w.j.info("SVER="+w.Aa));const vr=Le[5];vr!=null&&typeof vr=="number"&&0<vr&&(S=1.5*vr,w.L=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const ut=h.g;if(ut){const zo=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var q=S.h;q.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ue(q,q.h),q.h=null))}if(S.D){const pi=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;pi&&(S.ya=pi,ge(S.I,S.D,pi))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),S=w;var ee=h;if(S.qa=Uo(S,S.J?S.ia:null,S.W),ee.K){Ss(S.h,ee);var Oe=ee,mt=S.L;mt&&(Oe.I=mt),Oe.B&&(hl(Oe),Ro(Oe)),S.g=ee}else Yn(S);0<w.i.length&&yr(w)}else Le[0]!="stop"&&Le[0]!="close"||Vi(w,7);else w.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Vi(w,7):No(w):Le[0]!="noop"&&w.l&&w.l.ta(Le),w.v=0)}}ys(4)}catch{}}var Is=class{constructor(h,_){this.g=h,this.map=_}};function dl(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fr(h){return h.h?1:h.g?h.g.size:0}function Ce(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ue(h,_){h.g?h.g.add(_):h.h=_}function Ss(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}dl.prototype.cancel=function(){if(this.i=Di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Di(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.D);return _}return k(h.i)}function pr(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var _=[],w=h.length,S=0;S<w;S++)_.push(h[S]);return _}_=[],w=0;for(S in h)_[w++]=h[S];return _}function pl(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var _=[];h=h.length;for(var w=0;w<h;w++)_.push(w);return _}_=[],w=0;for(const S in h)_[w++]=S;return _}}}function we(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var w=pl(h),S=pr(h),z=S.length,q=0;q<z;q++)_.call(void 0,S[q],w&&w[q],h)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ml(h,_){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var S=h[w].indexOf("="),z=null;if(0<=S){var q=h[w].substring(0,S);z=h[w].substring(S+1)}else q=h[w];_(q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Rn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Rn){this.h=h.h,ko(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.s),this.l=h.l;var _=h.i,w=new Ni;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),di(this,w),this.m=h.m}else h&&(_=String(h).match(Ze))?(this.h=!1,ko(this,_[1]||"",!0),this.o=Zn(_[2]||""),this.g=Zn(_[3]||"",!0),Mi(this,_[4]),this.l=Zn(_[5]||"",!0),di(this,_[6]||"",!0),this.m=Zn(_[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Rn.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Qn(_,mr,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Qn(_,mr,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Qn(w,w.charAt(0)=="/"?yl:_l,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Qn(w,vl)),h.join("")};function ot(h){return new Rn(h)}function ko(h,_,w){h.j=w?Zn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function di(h,_,w){_ instanceof Ni?(h.i=_,Ln(h.i,h.h)):(w||(_=Qn(_,Lo)),h.i=new Ni(_,h.h))}function ge(h,_,w){h.i.set(_,w)}function kn(h){return ge(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Zn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qn(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,gl),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function gl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var mr=/[#\/\?@]/g,_l=/[#\?:]/g,yl=/[#\?]/g,Lo=/[#\?@]/g,vl=/#/g;function Ni(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&ml(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}t=Ni.prototype,t.add=function(h,_){mn(this),this.i=null,h=he(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function wl(h,_){mn(h),_=he(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function bo(h,_){return mn(h),_=he(h,_),h.g.has(_)}t.forEach=function(h,_){mn(this),this.g.forEach(function(w,S){w.forEach(function(z){h.call(_,z,S,this)},this)},this)},t.na=function(){mn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let S=0;S<_.length;S++){const z=h[S];for(let q=0;q<z.length;q++)w.push(_[S])}return w},t.V=function(h){mn(this);let _=[];if(typeof h=="string")bo(this,h)&&(_=_.concat(this.g.get(he(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)_=_.concat(h[w])}return _},t.set=function(h,_){return mn(this),this.i=null,h=he(this,h),bo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function jc(h,_,w){wl(h,_),0<w.length&&(h.i=null,h.g.set(he(h,_),k(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var S=_[w];const q=encodeURIComponent(String(S)),ee=this.V(S);for(S=0;S<ee.length;S++){var z=q;ee[S]!==""&&(z+="="+encodeURIComponent(String(ee[S]))),h.push(z)}}return this.i=h.join("&")};function he(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ln(h,_){_&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(w,S){var z=S.toLowerCase();S!=z&&(wl(this,S),jc(this,z,w))},h)),h.j=_}function je(h,_){const w=new ws;if(u.Image){const S=new Image;S.onload=T(bn,w,"TestLoadImage: loaded",!0,_,S),S.onerror=T(bn,w,"TestLoadImage: error",!1,_,S),S.onabort=T(bn,w,"TestLoadImage: abort",!1,_,S),S.ontimeout=T(bn,w,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function Bc(h,_){const w=new ws,S=new AbortController,z=setTimeout(()=>{S.abort(),bn(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then(q=>{clearTimeout(z),q.ok?bn(w,"TestPingServer: ok",!0,_):bn(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),bn(w,"TestPingServer: error",!1,_)})}function bn(h,_,w,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(w)}catch{}}function Tl(){this.g=new _s}function El(h,_,w){const S=w||"";try{we(h,function(z,q){let ee=z;f(z)&&(ee=Eo(z)),_.push(S+q+"="+encodeURIComponent(ee))})}catch(z){throw _.push(S+"type="+encodeURIComponent("_badmap")),z}}function Dn(h){this.l=h.Ub||null,this.j=h.eb||!1}A(Dn,sl),Dn.prototype.g=function(){return new gr(this.l,this.j)},Dn.prototype.i=function(h){return function(){return h}}({});function gr(h,_){pt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(gr,pt),t=gr.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,gn(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xe(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_r(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function _r(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Xe(this):gn(this),this.readyState==3&&_r(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Xe(this))},t.Qa=function(h){this.g&&(this.response=h,Xe(this))},t.ga=function(){this.g&&Xe(this)};function Xe(h){h.readyState=4,h.l=null,h.j=null,h.v=null,gn(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function gn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pl(h){let _="";return W(h,function(w,S){_+=S,_+=":",_+=w,_+=`\r
`}),_}function Do(h,_,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=Pl(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):ge(h,_,w))}function Qe(h){pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Qe,pt);var Uc=/^https?$/i,Il=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ao.g(),this.v=this.o?Rc(this.o):Rc(Ao),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(q){zc(this,q);return}if(h=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)w.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const q of S.keys())w.set(q,S.get(q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(q=>q.toLowerCase()=="content-type"),z=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Il,_,void 0))||S||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ee]of w)this.g.setRequestHeader(q,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rn(this),this.u=!0,this.g.send(h),this.u=!1}catch(q){zc(this,q)}};function zc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Sl(h),Mo(h)}function Sl(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,It(this,"complete"),It(this,"abort"),Mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xe(this):this.bb())},t.bb=function(){xe(this)};function xe(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Kt(h)!=4||h.Z()!=2)){if(h.u&&Kt(h)==4)Ac(h.Ea,0,h);else if(It(h,"readystatechange"),Kt(h)==4){h.h=!1;try{const ee=h.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var S;if(S=ee===0){var z=String(h.D).match(Ze)[1]||null;!z&&u.self&&u.self.location&&(z=u.self.location.protocol.slice(0,-1)),S=!Uc.test(z?z.toLowerCase():"")}w=S}if(w)It(h,"complete"),It(h,"success");else{h.m=6;try{var q=2<Kt(h)?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.Z()+"]",Sl(h)}}finally{Mo(h)}}}}function Mo(h,_){if(h.g){rn(h);const w=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||It(h,"ready");try{w.onreadystatechange=S}catch{}}}function rn(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Kt(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Kf(_)}};function xl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Zf(h){const _={};h=(h.g&&2<=Kt(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(x(h[S]))continue;var w=F(h[S]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const q=_[z]||[];_[z]=q,q.push(w)}R(_,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function $c(h){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oi("baseRetryDelayMs",5e3,h),this.cb=Oi("retryDelaySeedMs",1e4,h),this.Wa=Oi("forwardChannelMaxRetries",2,h),this.wa=Oi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new dl(h&&h.concurrentRequestLimit),this.Da=new Tl,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$c.prototype,t.la=8,t.G=1,t.connect=function(h,_,w,S){kt(0),this.W=h,this.H=_||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.I=Uo(this,null,this.W),yr(this)};function No(h){if(Wc(h),h.G==3){var _=h.U++,w=ot(h.I);if(ge(w,"SID",h.K),ge(w,"RID",_),ge(w,"TYPE","terminate"),xs(h,w),_=new Kn(h,h.j,_),_.L=2,_.v=kn(ot(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=_.v,w=!0),w||(_.g=qc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ro(_)}Hc(h)}function Oo(h){h.g&&(Fo(h),h.g.cancel(),h.g=null)}function Wc(h){Oo(h),h.u&&(u.clearTimeout(h.u),h.u=null),Bo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function yr(h){if(!fl(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ke||J(),K||(Ke(),K=!0),ae.add(_,h),h.B=0}}function Qf(h,_){return fr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=vs(v(h.Ga,h,_),Rl(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new Kn(this,this.j,h);let q=this.o;if(this.S&&(q?(q=I(q),M(q,this.S)):q=this.S),this.m!==null||this.O||(z.H=q,q=null),this.P)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=Al(this,z,_),w=ot(this.I),ge(w,"RID",h),ge(w,"CVER",22),this.D&&ge(w,"X-HTTP-Session-Id",this.D),xs(this,w),q&&(this.O?_="headers="+encodeURIComponent(String(Pl(q)))+"&"+_:this.m&&Do(w,this.m,q)),Ue(this.h,z),this.Ua&&ge(w,"TYPE","init"),this.P?(ge(w,"$req",_),ge(w,"SID","null"),z.T=!0,ul(z,w,null)):ul(z,w,_),this.G=2}}else this.G==3&&(h?_n(this,h):this.i.length==0||fl(this.h)||_n(this))};function _n(h,_){var w;_?w=_.l:w=h.U++;const S=ot(h.I);ge(S,"SID",h.K),ge(S,"RID",w),ge(S,"AID",h.T),xs(h,S),h.m&&h.o&&Do(S,h.m,h.o),w=new Kn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Al(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ue(h.h,w),ul(w,S,_)}function xs(h,_){h.H&&W(h.H,function(w,S){ge(_,S,w)}),h.l&&we({},function(w,S){ge(_,S,w)})}function Al(h,_,w){w=Math.min(h.i.length,w);var S=h.l?v(h.l.Na,h.l,h):null;e:{var z=h.i;let q=-1;for(;;){const ee=["count="+w];q==-1?0<w?(q=z[0].g,ee.push("ofs="+q)):q=0:ee.push("ofs="+q);let Oe=!0;for(let mt=0;mt<w;mt++){let Le=z[mt].g;const Be=z[mt].map;if(Le-=q,0>Le)q=Math.max(0,z[mt].g-100),Oe=!1;else try{El(Be,ee,"req"+Le+"_")}catch{S&&S(Be)}}if(Oe){S=ee.join("&");break e}}}return h=h.i.splice(0,w),_.D=h,S}function Yn(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ke||J(),K||(Ke(),K=!0),ae.add(_,h),h.v=0}}function Vo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=vs(v(h.Fa,h),Rl(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,jo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=vs(v(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Oo(this),jo(this))};function Fo(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function jo(h){h.g=new Kn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=ot(h.qa);ge(_,"RID","rpc"),ge(_,"SID",h.K),ge(_,"AID",h.T),ge(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&ge(_,"TO",h.ja),ge(_,"TYPE","xmlhttp"),xs(h,_),h.m&&h.o&&Do(_,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=kn(ot(_)),w.m=null,w.P=!0,cl(w,h)}t.Za=function(){this.C!=null&&(this.C=null,Oo(this),Vo(this),kt(19))};function Bo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Cl(h,_){var w=null;if(h.g==_){Bo(h),Fo(h),h.g=null;var S=2}else if(Ce(h.h,_))w=_.D,Ss(h.h,_),S=1;else return;if(h.G!=0){if(_.o)if(S==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var z=h.B;S=Io(),It(S,new bc(S,w)),yr(h)}else Yn(h);else if(z=_.s,z==3||z==0&&0<_.X||!(S==1&&Qf(h,_)||S==2&&Vo(h)))switch(w&&0<w.length&&(_=h.h,_.i=_.i.concat(w)),z){case 1:Vi(h,5);break;case 4:Vi(h,10);break;case 3:Vi(h,6);break;default:Vi(h,2)}}}function Rl(h,_){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*_}function Vi(h,_){if(h.j.info("Error code "+_),_==2){var w=v(h.fb,h),S=h.Xa;const z=!S;S=new Rn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ko(S,"https"),kn(S),z?je(S.toString(),w):Bc(S.toString(),w)}else kt(2);h.G=0,h.l&&h.l.sa(_),Hc(h),Wc(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Hc(h){if(h.G=0,h.ka=[],h.l){const _=Di(h.h);(_.length!=0||h.i.length!=0)&&(V(h.ka,_),V(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function Uo(h,_,w){var S=w instanceof Rn?ot(w):new Rn(w);if(S.g!="")_&&(S.g=_+"."+S.g),Mi(S,S.s);else{var z=u.location;S=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var q=new Rn(null);S&&ko(q,S),_&&(q.g=_),z&&Mi(q,z),w&&(q.l=w),S=q}return w=h.D,_=h.ya,w&&_&&ge(S,w,_),ge(S,"VER",h.la),xs(h,S),S}function qc(h,_,w){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Qe(new Dn({eb:w})):new Qe(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kl(){}t=kl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function As(){}As.prototype.g=function(h,_){return new St(h,_)};function St(h,_){pt.call(this),this.g=new $c(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!x(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Mn(this)}A(St,pt),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){No(this.g)},St.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Eo(h),h=w);_.i.push(new Is(_.Ya++,h)),_.G==3&&yr(_)},St.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,St.aa.N.call(this)};function fi(h){Po.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const w in _){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}A(fi,Po);function Gc(){al.call(this),this.status=1}A(Gc,al);function Mn(h){this.g=h}A(Mn,kl),Mn.prototype.ua=function(){It(this.g,"a")},Mn.prototype.ta=function(h){It(this.g,new fi(h))},Mn.prototype.sa=function(h){It(this.g,new Gc)},Mn.prototype.ra=function(){It(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,ix=function(){return new As},nx=function(){return Io()},tx=ki,lg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,Gh=Ts,xo.COMPLETE="complete",ex=xo,ol.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Xl=ol,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,JS=Qe}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});const D0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new gf("@firebase/firestore");function $l(){return Js.logLevel}function se(t,...e){if(Js.logLevel<=ke.DEBUG){const n=e.map(X_);Js.debug(`Firestore (${Za}): ${t}`,...n)}}function or(t,...e){if(Js.logLevel<=ke.ERROR){const n=e.map(X_);Js.error(`Firestore (${Za}): ${t}`,...n)}}function Da(t,...e){if(Js.logLevel<=ke.WARN){const n=e.map(X_);Js.warn(`Firestore (${Za}): ${t}`,...n)}}function X_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: `+t;throw or(e),new Error(e)}function Fe(t,e){t||_e()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class fO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pO{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yi,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string"),new rx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new $t(e)}}class mO{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gO{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new mO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _O{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new _O(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=vO(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Ne(t,e){return t<e?-1:t>e?1:0}function Ma(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Pt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Pt(0,0))}static max(){return new ye(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,i){n===void 0?n=0:n>e.length&&_e(),i===void 0?i=e.length-n:i>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Wu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends Wu{construct(e,n,i){return new He(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new re(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new He(n)}static emptyPath(){return new He([])}}const wO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Wu{construct(e,n,i){return new Dt(e,n,i)}static isValidIdentifier(e){return wO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new re(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new re(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new re(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(He.fromString(e))}static fromName(e){return new le(He.fromString(e).popFirst(5))}static empty(){return new le(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new He(e.slice()))}}function TO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ye.fromTimestamp(i===1e9?new Pt(n+1,0):new Pt(n,i));return new Jr(r,le.empty(),e)}function EO(t){return new Jr(t.readTime,t.key,-1)}class Jr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Jr(ye.min(),le.empty(),-1)}static max(){return new Jr(ye.max(),le.empty(),-1)}}function PO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==IO)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,i)=>{n(e)})}static reject(e){return new Y((n,i)=>{i(e)})}static waitFor(e){return new Y((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=Y.resolve(!1);for(const i of e)n=n.next(r=>r?Y.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Y((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new Y((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function xO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}J_.oe=-1;function wf(t){return t==null}function bd(t){return t===0&&1/t==-1/0}function AO(t){return typeof t=="number"&&Number.isInteger(t)&&!bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ox(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??bt.RED,this.left=r??bt.EMPTY,this.right=o??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new bt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,i,r,o){return this}insert(e,n,i){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new Nt(Dt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ax("Invalid base64 string: "+o):o}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const CO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(Fe(!!t),typeof t=="string"){let e=0;const n=CO.exec(t);if(Fe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function eo(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ty(t){const e=t.mapValue.fields.__previous_value__;return ey(e)?ty(e):e}function Hu(t){const e=es(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,i,r,o,a,u,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f}}class qu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh={mapValue:{}};function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ey(t)?4:LO(t)?9007199254740991:kO(t)?10:11:_e()}function Ri(t,e){if(t===e)return!0;const n=to(t);if(n!==to(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hu(t).isEqual(Hu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=es(r.timestampValue),u=es(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return eo(r.bytesValue).isEqual(eo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ct(r.geoPointValue.latitude)===ct(o.geoPointValue.latitude)&&ct(r.geoPointValue.longitude)===ct(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ct(r.integerValue)===ct(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ct(r.doubleValue),u=ct(o.doubleValue);return a===u?bd(a)===bd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ma(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(M0(a)!==M0(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Ri(a[c],u[c])))return!1;return!0}(t,e);default:return _e()}}function Gu(t,e){return(t.values||[]).find(n=>Ri(n,e))!==void 0}function Na(t,e){if(t===e)return 0;const n=to(t),i=to(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ct(o.integerValue||o.doubleValue),c=ct(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return O0(t.timestampValue,e.timestampValue);case 4:return O0(Hu(t),Hu(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(o,a){const u=eo(o),c=eo(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const m=Ne(u[f],c[f]);if(m!==0)return m}return Ne(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ne(ct(o.latitude),ct(a.latitude));return u!==0?u:Ne(ct(o.longitude),ct(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return V0(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,c,f,m;const g=o.fields||{},v=a.fields||{},T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=(c=v.value)===null||c===void 0?void 0:c.arrayValue,k=Ne(((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0,((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:V0(T,A)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Sh.mapValue&&a===Sh.mapValue)return 0;if(o===Sh.mapValue)return 1;if(a===Sh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=a.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const v=Ne(c[g],m[g]);if(v!==0)return v;const T=Na(u[c[g]],f[m[g]]);if(T!==0)return T}return Ne(c.length,m.length)}(t.mapValue,e.mapValue);default:throw _e()}}function O0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=es(t),i=es(e),r=Ne(n.seconds,i.seconds);return r!==0?r:Ne(n.nanos,i.nanos)}function V0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Na(n[r],i[r]);if(o)return o}return Ne(n.length,i.length)}function Oa(t){return ug(t)}function ug(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=es(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return eo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=ug(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${ug(n.fields[a])}`;return r+"}"}(t.mapValue):_e()}function F0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cg(t){return!!t&&"integerValue"in t}function ny(t){return!!t&&"arrayValue"in t}function j0(t){return!!t&&"nullValue"in t}function B0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kh(t){return!!t&&"mapValue"in t}function kO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return uo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=fu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Kh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=Dt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=fu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Kh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){uo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new an(fu(this.value))}}function lx(t){const e=[];return uo(t.fields,(n,i)=>{const r=new Dt([n]);if(Kh(i)){const o=lx(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Ht(e,0,ye.min(),ye.min(),ye.min(),an.empty(),0)}static newFoundDocument(e,n,i,r){return new Ht(e,1,n,ye.min(),i,r,0)}static newNoDocument(e,n){return new Ht(e,2,n,ye.min(),ye.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,ye.min(),ye.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function U0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=le.comparator(le.fromName(a.referenceValue),n.key):i=Na(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function z0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n="asc"){this.field=e,this.dir=n}}function bO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{}class wt extends ux{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new MO(e,n,i):n==="array-contains"?new VO(e,i):n==="in"?new FO(e,i):n==="not-in"?new jO(e,i):n==="array-contains-any"?new BO(e,i):new wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new NO(e,i):new OO(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Na(n,this.value)):n!==null&&to(this.value)===to(n)&&this.matchesComparison(Na(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends ux{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ui(e,n)}matches(e){return cx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cx(t){return t.op==="and"}function hx(t){return DO(t)&&cx(t)}function DO(t){for(const e of t.filters)if(e instanceof ui)return!1;return!0}function hg(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Oa(t.value);if(hx(t))return t.filters.map(e=>hg(e)).join(",");{const e=t.filters.map(n=>hg(n)).join(",");return`${t.op}(${e})`}}function dx(t,e){return t instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.field.isEqual(r.field)&&Ri(i.value,r.value)}(t,e):t instanceof ui?function(i,r){return r instanceof ui&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&dx(a,r.filters[u]),!0):!1}(t,e):void _e()}function fx(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Oa(n.value)}`}(t):t instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(fx).join(" ,")+"}"}(t):"Filter"}class MO extends wt{constructor(e,n,i){super(e,n,i),this.key=le.fromName(i.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class NO extends wt{constructor(e,n){super(e,"in",n),this.keys=px("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OO extends wt{constructor(e,n){super(e,"not-in",n),this.keys=px("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function px(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>le.fromName(i.referenceValue))}class VO extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ny(n)&&Gu(n.arrayValue,this.value)}}class FO extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class jO extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gu(this.value.arrayValue,n)}}class BO extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ny(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Gu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function $0(t,e=null,n=[],i=[],r=null,o=null,a=null){return new UO(t,e,n,i,r,o,a)}function iy(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>hg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),wf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Oa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Oa(i)).join(",")),e.ue=n}return e.ue}function ry(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!z0(t.startAt,e.startAt)&&z0(t.endAt,e.endAt)}function dg(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zO(t,e,n,i,r,o,a,u){return new pc(t,e,n,i,r,o,a,u)}function Tf(t){return new pc(t)}function W0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mx(t){return t.collectionGroup!==null}function pu(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Nt(Dt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Md(o,i))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new Md(Dt.keyField(),i))}return e.ce}function Si(t){const e=ve(t);return e.le||(e.le=$O(e,pu(t))),e.le}function $O(t,e){if(t.limitType==="F")return $0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Md(r.field,o)});const n=t.endAt?new Dd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Dd(t.startAt.position,t.startAt.inclusive):null;return $0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function fg(t,e){const n=t.filters.concat([e]);return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pg(t,e,n){return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ef(t,e){return ry(Si(t),Si(e))&&t.limitType===e.limitType}function gx(t){return`${iy(Si(t))}|lt:${t.limitType}`}function Zo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>fx(r)).join(", ")}]`),wf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Oa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Oa(r)).join(",")),`Target(${i})`}(Si(t))}; limitType=${t.limitType})`}function Pf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):le.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of pu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const f=U0(a,u,c);return a.inclusive?f<=0:f<0}(i.startAt,pu(i),r)||i.endAt&&!function(a,u,c){const f=U0(a,u,c);return a.inclusive?f>=0:f>0}(i.endAt,pu(i),r))}(t,e)}function WO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _x(t){return(e,n)=>{let i=!1;for(const r of pu(t)){const o=HO(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function HO(t,e,n){const i=t.field.isKeyField()?le.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),f=u.data.field(o);return c!==null&&f!==null?Na(c,f):_e()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return ox(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new rt(le.comparator);function ar(){return qO}const yx=new rt(le.comparator);function Jl(...t){let e=yx;for(const n of t)e=e.insert(n.key,n);return e}function vx(t){let e=yx;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Fs(){return mu()}function wx(){return mu()}function mu(){return new Qa(t=>t.toString(),(t,e)=>t.isEqual(e))}const GO=new rt(le.comparator),KO=new Nt(le.comparator);function Re(...t){let e=KO;for(const n of t)e=e.add(n);return e}const ZO=new Nt(Ne);function QO(){return ZO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function Tx(t){return{integerValue:""+t}}function YO(t,e){return AO(e)?Tx(e):sy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this._=void 0}}function XO(t,e,n){return t instanceof Ku?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ey(o)&&(o=ty(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Zu?Px(t,e):t instanceof Qu?Ix(t,e):function(r,o){const a=Ex(r,o),u=H0(a)+H0(r.Pe);return cg(a)&&cg(r.Pe)?Tx(u):sy(r.serializer,u)}(t,e)}function JO(t,e,n){return t instanceof Zu?Px(t,e):t instanceof Qu?Ix(t,e):n}function Ex(t,e){return t instanceof Nd?function(i){return cg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Ku extends If{}class Zu extends If{constructor(e){super(),this.elements=e}}function Px(t,e){const n=Sx(e);for(const i of t.elements)n.some(r=>Ri(r,i))||n.push(i);return{arrayValue:{values:n}}}class Qu extends If{constructor(e){super(),this.elements=e}}function Ix(t,e){let n=Sx(e);for(const i of t.elements)n=n.filter(r=>!Ri(r,i));return{arrayValue:{values:n}}}class Nd extends If{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function H0(t){return ct(t.integerValue||t.doubleValue)}function Sx(t){return ny(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.field=e,this.transform=n}}function tV(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Zu&&r instanceof Zu||i instanceof Qu&&r instanceof Qu?Ma(i.elements,r.elements,Ri):i instanceof Nd&&r instanceof Nd?Ri(i.Pe,r.Pe):i instanceof Ku&&r instanceof Ku}(t.transform,e.transform)}class nV{constructor(e,n){this.version=e,this.transformResults=n}}class oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sf{}function xx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oy(t.key,oi.none()):new mc(t.key,t.data,oi.none());{const n=t.data,i=an.empty();let r=new Nt(Dt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ds(t.key,i,new wn(r.toArray()),oi.none())}}function iV(t,e,n){t instanceof mc?function(r,o,a){const u=r.value.clone(),c=G0(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(r,o,a){if(!Zh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=G0(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(Ax(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,i){return t instanceof mc?function(o,a,u,c){if(!Zh(o.precondition,a))return u;const f=o.value.clone(),m=K0(o.fieldTransforms,c,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof ds?function(o,a,u,c){if(!Zh(o.precondition,a))return u;const f=K0(o.fieldTransforms,c,a),m=a.data;return m.setAll(Ax(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Zh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function rV(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=Ex(i.transform,r||null);o!=null&&(n===null&&(n=an.empty()),n.set(i.field,o))}return n||null}function q0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ma(i,r,(o,a)=>tV(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mc extends Sf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ds extends Sf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ax(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function G0(t,e,n){const i=new Map;Fe(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,JO(a,u,n[r]))}return i}function K0(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,XO(o,a,e))}return i}class oy extends Sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sV extends Sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&iV(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=wx();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=xx(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ye.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(n,i)=>q0(n,i))&&Ma(this.baseMutations,e.baseMutations,(n,i)=>q0(n,i))}}class ay{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Fe(e.mutations.length===i.length);let r=function(){return GO}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new ay(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,be;function uV(t){switch(t){default:return _e();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Cx(t){if(t===void 0)return or("GRPC error has no .code"),Z.UNKNOWN;switch(t){case _t.OK:return Z.OK;case _t.CANCELLED:return Z.CANCELLED;case _t.UNKNOWN:return Z.UNKNOWN;case _t.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case _t.INTERNAL:return Z.INTERNAL;case _t.UNAVAILABLE:return Z.UNAVAILABLE;case _t.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case _t.NOT_FOUND:return Z.NOT_FOUND;case _t.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case _t.ABORTED:return Z.ABORTED;case _t.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case _t.DATA_LOSS:return Z.DATA_LOSS;default:return _e()}}(be=_t||(_t={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=new $s([4294967295,4294967295],0);function Z0(t){const e=cV().encode(t),n=new XS;return n.update(e),new Uint8Array(n.digest())}function Q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $s([n,i],0),new $s([r,o],0)]}class ly{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(i<0)throw new eu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$s.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply($s.fromNumber(i)));return r.compare(hV)===1&&(r=new $s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Z0(e),[i,r]=Q0(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new ly(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=Z0(e),[i,r]=Q0(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new xf(ye.min(),r,new rt(Ne),ar(),Re())}}class gc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new gc(i,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class Rx{constructor(e,n){this.targetId=e,this.me=n}}class kx{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Y0{constructor(){this.fe=0,this.ge=J0(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),i=Re();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:_e()}}),new gc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=J0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dV{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=X0(),this.Qe=new rt(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(dg(o))if(i===0){const a=new le(o.path);this.Ue(n,a,Ht.newNoDocument(a,ye.min()))}else Fe(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=eo(i).toUint8Array()}catch(c){if(c instanceof ax)return Da("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new ly(a,r,o)}catch(c){return Da(c instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&dg(u.target)){const c=new le(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,Ht.newNoDocument(c,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let i=Re();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const f=this.Je(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new xf(e,n,this.Qe,this.ke,i);return this.ke=ar(),this.qe=X0(),this.Qe=new rt(Ne),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Y0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Y0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function X0(){return new rt(le.comparator)}function J0(){return new rt(le.comparator)}const fV={asc:"ASCENDING",desc:"DESCENDING"},pV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mV={and:"AND",or:"OR"};class gV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mg(t,e){return t.useProto3Json||wf(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _V(t,e){return Od(t,e.toTimestamp())}function xi(t){return Fe(!!t),ye.fromTimestamp(function(n){const i=es(n);return new Pt(i.seconds,i.nanos)}(t))}function uy(t,e){return gg(t,e).canonicalString()}function gg(t,e){const n=function(r){return new He(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bx(t){const e=He.fromString(t);return Fe(Vx(e)),e}function _g(t,e){return uy(t.databaseId,e.path)}function Op(t,e){const n=bx(e);if(n.get(1)!==t.databaseId.projectId)throw new re(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(Mx(n))}function Dx(t,e){return uy(t.databaseId,e)}function yV(t){const e=bx(t);return e.length===4?He.emptyPath():Mx(e)}function yg(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mx(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eT(t,e,n){return{name:_g(t,e),fields:n.value.mapValue.fields}}function vV(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Fe(m===void 0||typeof m=="string"),Vt.fromBase64String(m||"")):(Fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Vt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?Z.UNKNOWN:Cx(f.code);return new re(m,f.message||"")}(a);n=new kx(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Op(t,i.document.name),o=xi(i.document.updateTime),a=i.document.createTime?xi(i.document.createTime):ye.min(),u=new an({mapValue:{fields:i.document.fields}}),c=Ht.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Qh(f,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Op(t,i.document),o=i.readTime?xi(i.readTime):ye.min(),a=Ht.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Qh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Op(t,i.document),o=i.removedTargetIds||[];n=new Qh([],o,r,null)}else{if(!("filter"in e))return _e();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new lV(r,o),u=i.targetId;n=new Rx(u,a)}}return n}function wV(t,e){let n;if(e instanceof mc)n={update:eT(t,e.key,e.value)};else if(e instanceof oy)n={delete:_g(t,e.key)};else if(e instanceof ds)n={update:eT(t,e.key,e.data),updateMask:RV(e.fieldMask)};else{if(!(e instanceof sV))return _e();n={verify:_g(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Ku)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Nd)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw _e()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:_V(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e()}(t,e.precondition)),n}function TV(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?xi(r.updateTime):xi(o);return a.isEqual(ye.min())&&(a=xi(o)),new nV(a,r.transformResults||[])}(n,e))):[]}function EV(t,e){return{documents:[Dx(t,e.path)]}}function PV(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Dx(t,r);const o=function(f){if(f.length!==0)return Ox(ui.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:Qo(v.field),direction:xV(v.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=mg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function IV(t){let e=yV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Fe(i===1);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const v=Nx(g);return v instanceof ui&&hx(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(A){return new Md(Yo(A.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,wf(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(g){const v=!!g.before,T=g.values||[];return new Dd(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,T=g.values||[];return new Dd(T,v)}(n.endAt)),zO(e,r,a,o,u,"F",c,f)}function SV(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Yo(n.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Yo(n.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yo(n.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Yo(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Yo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(i=>Nx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e()}function xV(t){return fV[t]}function AV(t){return pV[t]}function CV(t){return mV[t]}function Qo(t){return{fieldPath:t.canonicalString()}}function Yo(t){return Dt.fromServerFormat(t.fieldPath)}function Ox(t){return t instanceof wt?function(n){if(n.op==="=="){if(B0(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NAN"}};if(j0(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(B0(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NAN"}};if(j0(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(n.field),op:AV(n.op),value:n.value}}}(t):t instanceof ui?function(n){const i=n.getFilters().map(r=>Ox(r));return i.length===1?i[0]:{compositeFilter:{op:CV(n.op),filters:i}}}(t):_e()}function RV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Vx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,i,r,o=ye.min(),a=ye.min(),u=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.ct=e}}function LV(t){const e=IV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.un=new DV}addToCollectionParentIndex(e,n){return this.un.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Jr.min())}updateCollectionGroup(e,n,i){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class DV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Nt(He.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Nt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Va(0)}static kn(){return new Va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.changes=new Qa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Y.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&gu(i.mutation,r,wn.empty(),Pt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Re()){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Jl();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Re()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=ar();const a=mu(),u=function(){return mu()}();return n.forEach((c,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof ds)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),gu(m.mutation,f,m.mutation.getFieldMask(),Pt.now())):a.set(f.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>{var g;return u.set(f,new NV(m,(g=a.get(f))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=mu();let r=new rt((a,u)=>a-u),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let m=i.get(c)||wn.empty();m=u.applyToLocalView(f,m),i.set(c,m);const g=(r.get(u.batchId)||Re()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,m=c.value,g=wx();m.forEach(v=>{if(!o.has(v)){const T=xx(n.get(v),i.get(v));T!==null&&g.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Y.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Y.resolve(Fs());let u=-1,c=o;return a.next(f=>Y.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?Y.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{c=c.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,Re())).next(m=>({batchId:u,changes:vx(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(i=>{let r=Jl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Jl();return this.indexManager.getCollectionParents(e,o).next(u=>Y.forEach(u,c=>{const f=function(g,v){return new pc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Ht.newInvalidDocument(m)))});let u=Jl();return a.forEach((c,f)=>{const m=o.get(c);m!==void 0&&gu(m.mutation,f,wn.empty(),Pt.now()),Pf(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Y.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xi(r.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:LV(r.bundledQuery),readTime:xi(r.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.overlays=new rt(le.comparator),this.Ir=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Fs();return Y.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Y.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Y.resolve()}getOverlaysForCollection(e,n,i){const r=Fs(),o=n.length+1,a=new le(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Y.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new rt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Fs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Fs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return Y.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new aV(n,i));let o=this.Ir.get(n);o===void 0&&(o=Re(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(){this.Tr=new Nt(At.Er),this.dr=new Nt(At.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new At(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new At(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new le(new He([])),i=new At(n,e),r=new At(n,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new He([])),i=new At(n,e),r=new At(n,e+1);let o=Re();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new At(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Nt(At.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new oV(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new At(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,n){return Y.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{const u=this.Dr(a.wr);o.push(u)}),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Nt(Ne);return n.forEach(r=>{const o=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{i=i.add(u.wr)})}),Y.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;le.isDocumentKey(o)||(o=o.child(""));const a=new At(new le(o),0);let u=new Nt(Ne);return this.br.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(c.wr)),!0)},a),Y.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Y.forEach(n.mutations,r=>{const o=new At(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new At(n,0),r=this.br.firstAfterOrEqual(i);return Y.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.Mr=e,this.docs=function(){return new rt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Y.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let i=ar();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Ht.newInvalidDocument(r))}),Y.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=ar();const a=n.path,u=new le(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||PO(EO(m),i)<=0||(r.has(m.key)||Pf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,n,i,r){_e()}Or(e,n){return Y.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new zV(this)}getSize(e){return Y.resolve(this.size)}}class zV extends MV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Y.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.persistence=e,this.Nr=new Qa(n=>iy(n),ry),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cy,this.targetCount=0,this.kr=Va.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Va(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Kn(n),Y.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Y.waitFor(o).next(()=>r)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Y.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Y.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Y.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Y.resolve(i)}containsKey(e,n){return Y.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new J_(0),this.Kr=!1,this.Kr=!0,this.$r=new jV,this.referenceDelegate=e(this),this.Ur=new $V(this),this.indexManager=new bV,this.remoteDocumentCache=function(r){return new UV(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new kV(n),this.Gr=new VV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new BV(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new HV(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Y.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class HV extends SO{constructor(e){super(),this.currentSequenceNumber=e}}class hy{constructor(e){this.persistence=e,this.Jr=new cy,this.Yr=null}static Zr(e){return new hy(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Y.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,i=>{const r=le.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,ye.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Y.or([()=>Y.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Re(),r=Re();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new dy(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bb()?8:xO(Gt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new qV;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?($l()<=ke.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):($l()<=ke.DEBUG&&se("QueryEngine","Query:",Zo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?($l()<=ke.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(n))):Y.resolve())}Yi(e,n){if(W0(n))return Y.resolve(null);let i=Si(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=pg(n,null,"F"),i=Si(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Re(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const f=this.ts(n,u);return this.ns(n,f,a,c.readTime)?this.Yi(e,pg(n,null,"F")):this.rs(e,f,n,c)}))})))}Zi(e,n,i,r){return W0(n)||r.isEqual(ye.min())?Y.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const a=this.ts(n,o);return this.ns(n,a,i,r)?Y.resolve(null):($l()<=ke.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zo(n)),this.rs(e,a,n,TO(r,-1)).next(u=>u))})}ts(e,n){let i=new Nt(_x(e));return n.forEach((r,o)=>{Pf(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return $l()<=ke.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Zo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Jr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new rt(Ne),this._s=new Qa(o=>iy(o),ry),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ZV(t,e,n,i){return new KV(t,e,n,i)}async function Fx(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=Re();for(const f of r){a.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(i,c).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:u}))})})}function QV(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,f,m){const g=f.batch,v=g.keys();let T=Y.resolve();return v.forEach(A=>{T=T.next(()=>m.getEntry(c,A)).next(k=>{const V=f.docVersions.get(A);Fe(V!==null),k.version.compareTo(V)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=Re();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function jx(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function YV(t,e){const n=ve(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const u=[];e.targetChanges.forEach((m,g)=>{const v=r.get(g);if(!v)return;u.push(n.Ur.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(o,m.addedDocuments,g)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Vt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(k,V,b){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(v,T,m)&&u.push(n.Ur.updateTargetData(o,T))});let c=ar(),f=Re();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(XV(o,a,e.documentUpdates).next(m=>{c=m.Ps,f=m.Is})),!i.isEqual(ye.min())){const m=n.Ur.getLastRemoteSnapshotVersion(o).next(g=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return Y.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.os=r,o))}function XV(t,e,n){let i=Re(),r=Re();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=ar();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):se("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{Ps:a,Is:r}})}function JV(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function e2(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Y.resolve(r)):n.Ur.allocateTargetId(i).next(a=>(r=new Vr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function vg(t,e,n){const i=ve(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!fc(a))throw a;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function tT(t,e,n){const i=ve(t);let r=ye.min(),o=Re();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,m){const g=ve(c),v=g._s.get(m);return v!==void 0?Y.resolve(g.os.get(v)):g.Ur.getTargetData(f,m)}(i,a,Si(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?r:ye.min(),n?o:Re())).next(u=>(t2(i,WO(e),u),{documents:u,Ts:o})))}function t2(t,e,n){let i=t.us.get(e)||ye.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class nT{constructor(){this.activeTargetIds=QO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n2{constructor(){this.so=new nT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=null;function Vp(){return xh===null?xh=function(){return 268435456+Math.round(2147483648*Math.random())}():xh++,"0x"+xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class o2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,a){const u=Vp(),c=this.xo(n,i.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${u}:`,c,r);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(n,c,f,r).then(m=>(se("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw Da("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",r),m})}Lo(n,i,r,o,a,u){return this.Mo(n,i,r,o,a)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}xo(n,i){const r=r2[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=Vp();return new Promise((a,u)=>{const c=new JS;c.setWithCredentials(!0),c.listenOnce(ex.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Gh.NO_ERROR:const m=c.getResponseJson();se(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Gh.TIMEOUT:se(Ut,`RPC '${e}' ${o} timed out`),u(new re(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:const g=c.getStatus();if(se(Ut,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const A=function(V){const b=V.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(b)>=0?b:Z.UNKNOWN}(T.status);u(new re(A,T.message))}else u(new re(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new re(Z.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{se(Ut,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);se(Ut,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",f,i,15)})}Bo(e,n,i){const r=Vp(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ix(),u=nx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const m=o.join("");se(Ut,`Creating RPC '${e}' stream ${r}: ${m}`,c);const g=a.createWebChannel(m,c);let v=!1,T=!1;const A=new s2({Io:V=>{T?se(Ut,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(v||(se(Ut,`Opening RPC '${e}' stream ${r} transport.`),g.open(),v=!0),se(Ut,`RPC '${e}' stream ${r} sending:`,V),g.send(V))},To:()=>g.close()}),k=(V,b,x)=>{V.listen(b,C=>{try{x(C)}catch(B){setTimeout(()=>{throw B},0)}})};return k(g,Xl.EventType.OPEN,()=>{T||(se(Ut,`RPC '${e}' stream ${r} transport opened.`),A.yo())}),k(g,Xl.EventType.CLOSE,()=>{T||(T=!0,se(Ut,`RPC '${e}' stream ${r} transport closed`),A.So())}),k(g,Xl.EventType.ERROR,V=>{T||(T=!0,Da(Ut,`RPC '${e}' stream ${r} transport errored:`,V),A.So(new re(Z.UNAVAILABLE,"The operation could not be completed")))}),k(g,Xl.EventType.MESSAGE,V=>{var b;if(!T){const x=V.data[0];Fe(!!x);const C=x,B=C.error||((b=C[0])===null||b===void 0?void 0:b.error);if(B){se(Ut,`RPC '${e}' stream ${r} received error:`,B);const G=B.status;let W=function(D){const M=_t[D];if(M!==void 0)return Cx(M)}(G),R=B.message;W===void 0&&(W=Z.INTERNAL,R="Unknown error status: "+G+" with message "+B.message),T=!0,A.So(new re(W,R)),g.close()}else se(Ut,`RPC '${e}' stream ${r} received:`,x),A.bo(x)}}),k(u,tx.STAT_EVENT,V=>{V.stat===lg.PROXY?se(Ut,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===lg.NOPROXY&&se(Ut,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new gV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,i,r,o,a,u,c){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new re(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a2 extends Ux{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vV(this.serializer,e),i=function(o){if(!("targetChange"in o))return ye.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ye.min():a.readTime?xi(a.readTime):ye.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=yg(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=dg(c)?{documents:EV(o,c)}:{query:PV(o,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Lx(o,a.resumeToken);const f=mg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(ye.min())>0){u.readTime=Od(o,a.snapshotVersion.toTimestamp());const f=mg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=SV(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=yg(this.serializer),n.removeTarget=e,this.a_(n)}}class l2 extends Ux{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=TV(e.writeResults,e.commitTime),i=xi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=yg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>wV(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new re(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,gg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(Z.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,gg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re(Z.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class c2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(async()=>{co(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(c){const f=ve(c);f.L_.add(4),await _c(f),f.q_.set("Unknown"),f.L_.delete(4),await Cf(f)}(this))})}),this.q_=new c2(i,r)}}async function Cf(t){if(co(t))for(const e of t.B_)await e(!0)}async function _c(t){for(const e of t.B_)await e(!1)}function zx(t,e){const n=ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gy(n)?my(n):Ya(n).r_()&&py(n,e))}function fy(t,e){const n=ve(t),i=Ya(n);n.N_.delete(e),i.r_()&&$x(n,e),n.N_.size===0&&(i.r_()?i.o_():co(n)&&n.q_.set("Unknown"))}function py(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ya(t).A_(e)}function $x(t,e){t.Q_.xe(e),Ya(t).R_(e)}function my(t){t.Q_=new dV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ya(t).start(),t.q_.v_()}function gy(t){return co(t)&&!Ya(t).n_()&&t.N_.size>0}function co(t){return ve(t).L_.size===0}function Wx(t){t.Q_=void 0}async function d2(t){t.q_.set("Online")}async function f2(t){t.N_.forEach((e,n)=>{py(t,e)})}async function p2(t,e){Wx(t),gy(t)?(t.q_.M_(e),my(t)):t.q_.set("Unknown")}async function m2(t,e,n){if(t.q_.set("Online"),e instanceof kx&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vd(t,i)}else if(e instanceof Qh?t.Q_.Ke(e):e instanceof Rx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ye.min()))try{const i=await jx(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=o.N_.get(f);m&&o.N_.set(f,m.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const m=o.N_.get(c);if(!m)return;o.N_.set(c,m.withResumeToken(Vt.EMPTY_BYTE_STRING,m.snapshotVersion)),$x(o,c);const g=new Vr(m.target,c,f,m.sequenceNumber);py(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await Vd(t,i)}}async function Vd(t,e,n){if(!fc(e))throw e;t.L_.add(1),await _c(t),t.q_.set("Offline"),n||(n=()=>jx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Cf(t)})}function Hx(t,e){return e().catch(n=>Vd(t,n,e))}async function Rf(t){const e=ve(t),n=ts(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;g2(e);)try{const r=await JV(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,_2(e,r)}catch(r){await Vd(e,r)}qx(e)&&Gx(e)}function g2(t){return co(t)&&t.O_.length<10}function _2(t,e){t.O_.push(e);const n=ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function qx(t){return co(t)&&!ts(t).n_()&&t.O_.length>0}function Gx(t){ts(t).start()}async function y2(t){ts(t).p_()}async function v2(t){const e=ts(t);for(const n of t.O_)e.m_(n.mutations)}async function w2(t,e,n){const i=t.O_.shift(),r=ay.from(i,e,n);await Hx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Rf(t)}async function T2(t,e){e&&ts(t).V_&&await async function(i,r){if(function(a){return uV(a)&&a!==Z.ABORTED}(r.code)){const o=i.O_.shift();ts(i).s_(),await Hx(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Rf(i)}}(t,e),qx(t)&&Gx(t)}async function rT(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=co(n);n.L_.add(3),await _c(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Cf(n)}async function E2(t,e){const n=ve(t);e?(n.L_.delete(2),await Cf(n)):e||(n.L_.add(2),await _c(n),n.q_.set("Unknown"))}function Ya(t){return t.K_||(t.K_=function(n,i,r){const o=ve(n);return o.w_(),new a2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:d2.bind(null,t),Ro:f2.bind(null,t),mo:p2.bind(null,t),d_:m2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gy(t)?my(t):t.q_.set("Unknown")):(await t.K_.stop(),Wx(t))})),t.K_}function ts(t){return t.U_||(t.U_=function(n,i,r){const o=ve(n);return o.w_(),new l2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:y2.bind(null,t),mo:T2.bind(null,t),f_:v2.bind(null,t),g_:w2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rf(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new _y(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(t,e){if(or("AsyncQueue",`${e}: ${t}`),fc(t))return new re(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.comparator=e?(n,i)=>e(n,i)||le.comparator(n.key,i.key):(n,i)=>le.comparator(n.key,i.key),this.keyedMap=Jl(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new Ia(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ia;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.W_=new rt(le.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Fa{constructor(e,n,i,r,o,a,u,c,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Fa(e,n,Ia.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class I2{constructor(){this.queries=oT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ve(n),o=r.queries;r.queries=oT(),o.forEach((a,u)=>{for(const c of u.j_)c.onError(i)})})(this,new re(Z.ABORTED,"Firestore shutting down"))}}function oT(){return new Qa(t=>gx(t),Ef)}async function vy(t,e){const n=ve(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new P2,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=yy(a,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Ty(n)}async function wy(t,e){const n=ve(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function S2(t,e){const n=ve(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(r)&&(i=!0);a.z_=r}}i&&Ty(n)}function x2(t,e,n){const i=ve(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Ty(t){t.Y_.forEach(e=>{e.next()})}var wg,aT;(aT=wg||(wg={})).ea="default",aT.Cache="cache";class Ey{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Fa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.key=e}}class Zx{constructor(e){this.key=e}}class A2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=_x(e),this.Ra=new Ia(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new sT,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const v=r.get(m),T=Pf(this.query,g)?g:null,A=!!v&&this.mutatedKeys.has(v.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let V=!1;v&&T?v.data.isEqual(T.data)?A!==k&&(i.track({type:3,doc:T}),V=!0):this.ga(v,T)||(i.track({type:2,doc:T}),V=!0,(c&&this.Aa(T,c)>0||f&&this.Aa(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),V=!0):v&&!T&&(i.track({type:1,doc:v}),V=!0,(c||f)&&(u=!0)),V&&(T?(a=a.add(T),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ra:a,fa:i,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((m,g)=>function(T,A){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return k(T)-k(A)}(m.type,g.type)||this.Aa(m.doc,g.doc)),this.pa(i),r=r!=null&&r;const u=n&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,f=c!==this.Ea;return this.Ea=c,a.length!==0||f?{snapshot:new Fa(this.query,e.Ra,o,a,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Zx(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Kx(i))}),n}ba(e){this.Ta=e.Ts,this.da=Re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Fa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class C2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class R2{constructor(e){this.key=e,this.va=!1}}class k2{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Qa(u=>gx(u),Ef),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(le.comparator),this.Na=new Map,this.La=new cy,this.Ba={},this.ka=new Map,this.qa=Va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function L2(t,e,n=!0){const i=tA(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await Qx(i,e,n,!0),r}async function b2(t,e){const n=tA(t);await Qx(n,e,!0,!1)}async function Qx(t,e,n,i){const r=await e2(t.localStore,Si(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await D2(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&zx(t.remoteStore,r),u}async function D2(t,e,n,i,r){t.Ka=(g,v,T)=>async function(k,V,b,x){let C=V.view.ma(b);C.ns&&(C=await tT(k.localStore,V.query,!1).then(({documents:R})=>V.view.ma(R,C)));const B=x&&x.targetChanges.get(V.targetId),G=x&&x.targetMismatches.get(V.targetId)!=null,W=V.view.applyChanges(C,k.isPrimaryClient,B,G);return uT(k,V.targetId,W.wa),W.snapshot}(t,g,v,T);const o=await tT(t.localStore,e,!0),a=new A2(e,o.Ts),u=a.ma(o.documents),c=gc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,c);uT(t,n,f.wa);const m=new C2(e,n,a);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function M2(t,e,n){const i=ve(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!Ef(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await vg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&fy(i.remoteStore,r.targetId),Tg(i,r.targetId)}).catch(dc)):(Tg(i,r.targetId),await vg(i.localStore,r.targetId,!0))}async function N2(t,e){const n=ve(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fy(n.remoteStore,i.targetId))}async function O2(t,e,n){const i=$2(t);try{const r=await function(a,u){const c=ve(a),f=Pt.now(),m=u.reduce((T,A)=>T.add(A.key),Re());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let A=ar(),k=Re();return c.cs.getEntries(T,m).next(V=>{A=V,A.forEach((b,x)=>{x.isValidDocument()||(k=k.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,A)).next(V=>{g=V;const b=[];for(const x of u){const C=rV(x,g.get(x.key).overlayedDocument);C!=null&&b.push(new ds(x.key,C,lx(C.value.mapValue),oi.exists(!0)))}return c.mutationQueue.addMutationBatch(T,f,b,u)}).next(V=>{v=V;const b=V.applyToLocalDocumentSet(g,k);return c.documentOverlayCache.saveOverlays(T,V.batchId,b)})}).then(()=>({batchId:v.batchId,changes:vx(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let f=a.Ba[a.currentUser.toKey()];f||(f=new rt(Ne)),f=f.insert(u,c),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,n),await yc(i,r.changes),await Rf(i.remoteStore)}catch(r){const o=yy(r,"Failed to persist write");n.reject(o)}}async function Yx(t,e){const n=ve(t);try{const i=await YV(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Na.get(o);a&&(Fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Fe(a.va):r.removedDocuments.size>0&&(Fe(a.va),a.va=!1))}),await yc(n,i,e)}catch(i){await dc(i)}}function lT(t,e,n){const i=ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=ve(a);c.onlineState=u;let f=!1;c.queries.forEach((m,g)=>{for(const v of g.j_)v.Z_(u)&&(f=!0)}),f&&Ty(c)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function V2(t,e,n){const i=ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let a=new rt(le.comparator);a=a.insert(o,Ht.newNoDocument(o,ye.min()));const u=Re().add(o),c=new xf(ye.min(),new Map,new rt(Ne),a,u);await Yx(i,c),i.Oa=i.Oa.remove(o),i.Na.delete(e),Py(i)}else await vg(i.localStore,e,!1).then(()=>Tg(i,e,n)).catch(dc)}async function F2(t,e){const n=ve(t),i=e.batch.batchId;try{const r=await QV(n.localStore,e);Jx(n,i,null),Xx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await yc(n,r)}catch(r){await dc(r)}}async function j2(t,e,n){const i=ve(t);try{const r=await function(a,u){const c=ve(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(Fe(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>c.localDocuments.getDocuments(f,m))})}(i.localStore,e);Jx(i,e,n),Xx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await yc(i,r)}catch(r){await dc(r)}}function Xx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Jx(t,e,n){const i=ve(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Tg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||eA(t,i)})}function eA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Py(t))}function uT(t,e,n){for(const i of n)i instanceof Kx?(t.La.addReference(i.key,e),B2(t,i)):i instanceof Zx?(se("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||eA(t,i.key)):_e()}function B2(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(i),Py(t))}function Py(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(He.fromString(e)),i=t.qa.next();t.Na.set(i,new R2(n)),t.Oa=t.Oa.insert(n,i),zx(t.remoteStore,new Vr(Si(Tf(n.path)),i,"TargetPurposeLimboResolution",J_.oe))}}async function yc(t,e,n){const i=ve(t),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((u,c)=>{a.push(i.Ka(c,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=dy.Wi(c.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(c,f){const m=ve(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Y.forEach(f,v=>Y.forEach(v.$i,T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T)).next(()=>Y.forEach(v.Ui,T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))}catch(g){if(!fc(g))throw g;se("LocalStore","Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const T=m.os.get(v),A=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(A);m.os=m.os.insert(v,k)}}}(i.localStore,o))}async function U2(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await Fx(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(c=>{c.reject(new re(Z.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await yc(n,i.hs)}}function z2(t,e){const n=ve(t),i=n.Na.get(e);if(i&&i.va)return Re().add(i.key);{let r=Re();const o=n.Ma.get(e);if(!o)return r;for(const a of o){const u=n.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function tA(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V2.bind(null,e),e.Ca.d_=S2.bind(null,e.eventManager),e.Ca.$a=x2.bind(null,e.eventManager),e}function $2(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j2.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ZV(this.persistence,new GV,e.initialUser,this.serializer)}Ga(e){return new WV(hy.Zr,this.serializer)}Wa(e){return new n2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class Eg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=U2.bind(null,this.syncEngine),await E2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I2}()}createDatastore(e){const n=Af(e.databaseInfo.databaseId),i=function(o){return new o2(o)}(e.databaseInfo);return function(o,a,u,c){return new u2(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new h2(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>lT(this.syncEngine,n,0),function(){return iT.D()?new iT:new i2}())}createSyncEngine(e,n){return function(r,o,a,u,c,f,m){const g=new k2(r,o,a,u,c,f);return m&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=ve(r);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await _c(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Eg.provider={build:()=>new Eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=$t.UNAUTHENTICATED,this.clientId=sx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=yy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function jp(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Fx(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await H2(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>rT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>rT(e.remoteStore,r)),t._onlineComponents=e}async function H2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await jp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Z.FAILED_PRECONDITION||r.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await jp(t,new Fd)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await jp(t,new Fd);return t._offlineComponents}async function nA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await cT(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await cT(t,new Eg))),t._onlineComponents}function q2(t){return nA(t).then(e=>e.syncEngine)}async function jd(t){const e=await nA(t),n=e.eventManager;return n.onListen=L2.bind(null,e.syncEngine),n.onUnlisten=M2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=N2.bind(null,e.syncEngine),n}function G2(t,e,n={}){const i=new Yi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,f){const m=new Iy({next:v=>{m.Za(),a.enqueueAndForget(()=>wy(o,g));const T=v.docs.has(u);!T&&v.fromCache?f.reject(new re(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&c&&c.source==="server"?f.reject(new re(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new Ey(Tf(u.path),m,{includeMetadataChanges:!0,_a:!0});return vy(o,g)}(await jd(t),t.asyncQueue,e,n,i)),i.promise}function K2(t,e,n={}){const i=new Yi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,f){const m=new Iy({next:v=>{m.Za(),a.enqueueAndForget(()=>wy(o,g)),v.fromCache&&c.source==="server"?f.reject(new re(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new Ey(u,m,{includeMetadataChanges:!0,_a:!0});return vy(o,g)}(await jd(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e,n){if(!n)throw new re(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z2(t,e,n,i){if(e===!0&&i===!0)throw new re(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dT(t){if(!le.isDocumentKey(t))throw new re(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fT(t){if(le.isDocumentKey(t))throw new re(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kf(t);throw new re(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new re(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pT(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new dO;switch(i.type){case"firstParty":return new gO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=hT.get(n);i&&(se("ComponentProvider","Removing Datastore"),hT.delete(n),i.terminate())}(this),Promise.resolve()}}function Q2(t,e,n,i={}){var r;const o=(t=$n(t,Lf))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,c;if(typeof i.mockUserToken=="string")u=i.mockUserToken,c=$t.MOCK_USER;else{u=xb(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new re(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new $t(f)}t._authCredentials=new fO(new rx(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ho(this.firestore,e,this._query)}}class en{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Zr extends ho{constructor(e,n,i){super(e,n,Tf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new le(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function Yu(t,e,...n){if(t=lt(t),rA("collection","path",e),t instanceof Lf){const i=He.fromString(e,...n);return fT(i),new Zr(t,null,i)}{if(!(t instanceof en||t instanceof Zr))throw new re(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return fT(i),new Zr(t.firestore,null,i)}}function ca(t,e,...n){if(t=lt(t),arguments.length===1&&(e=sx.newId()),rA("doc","path",e),t instanceof Lf){const i=He.fromString(e,...n);return dT(i),new en(t,null,new le(i))}{if(!(t instanceof en||t instanceof Zr))throw new re(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return dT(i),new en(t.firestore,t instanceof Zr?t.converter:null,new le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bx(this,"async_queue_retry"),this.Vu=()=>{const i=Fp();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fc(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw or("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=_y.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&_e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ns extends Lf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new mT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mT(e),this._firestoreClient=void 0,await e}}}function Y2(t,e){const n=typeof t=="object"?t:B_(),i=typeof t=="string"?t:"(default)",r=lo(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Ib("firestore");o&&Q2(r,...o)}return r}function bf(t){if(t._terminated)throw new re(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||X2(t),t._firestoreClient}function X2(t){var e,n,i;const r=t._freezeSettings(),o=function(u,c,f,m){return new RO(u,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,iA(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new W2(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(Vt.fromBase64String(e))}catch(n){throw new re(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ja(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=/^__.*__$/;class eF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new mc(e,this.data,n,this.fieldTransforms)}}class sA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Ay{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(oA(this.Cu)&&J2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Af(e)}Qu(e,n,i,r=!1){return new Ay({Cu:e,methodName:n,qu:i,path:Dt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cy(t){const e=t._freezeSettings(),n=Af(t._databaseId);return new tF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nF(t,e,n,i,r,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);ky("Data must be an object, but it was:",a,i);const u=aA(i,a);let c,f;if(o.merge)c=new wn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const v=Pg(e,g,n);if(!a.contains(v))throw new re(Z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);uA(m,v)||m.push(v)}c=new wn(m),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new eF(new an(u),c,f)}class Nf extends Mf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nf}}class Ry extends Mf{_toFieldTransform(e){return new eV(e.path,new Ku)}isEqual(e){return e instanceof Ry}}function iF(t,e,n,i){const r=t.Qu(1,e,n);ky("Data must be an object, but it was:",r,i);const o=[],a=an.empty();uo(i,(c,f)=>{const m=Ly(e,c,n);f=lt(f);const g=r.Nu(m);if(f instanceof Nf)o.push(m);else{const v=vc(f,g);v!=null&&(o.push(m),a.set(m,v))}});const u=new wn(o);return new sA(a,u,r.fieldTransforms)}function rF(t,e,n,i,r,o){const a=t.Qu(1,e,n),u=[Pg(e,i,n)],c=[r];if(o.length%2!=0)throw new re(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(Pg(e,o[v])),c.push(o[v+1]);const f=[],m=an.empty();for(let v=u.length-1;v>=0;--v)if(!uA(f,u[v])){const T=u[v];let A=c[v];A=lt(A);const k=a.Nu(T);if(A instanceof Nf)f.push(T);else{const V=vc(A,k);V!=null&&(f.push(T),m.set(T,V))}}const g=new wn(f);return new sA(m,g,a.fieldTransforms)}function sF(t,e,n,i=!1){return vc(n,t.Qu(i?4:3,e))}function vc(t,e){if(lA(t=lt(t)))return ky("Unsupported field value:",e,t),aA(t,e);if(t instanceof Mf)return function(i,r){if(!oA(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=vc(u,r.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return YO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Pt.fromDate(i);return{timestampValue:Od(r.serializer,o)}}if(i instanceof Pt){const o=new Pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Od(r.serializer,o)}}if(i instanceof Sy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ja)return{bytesValue:Lx(r.serializer,i._byteString)};if(i instanceof en){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xy)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return sy(u.serializer,c)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${kf(i)}`)}(t,e)}function aA(t,e){const n={};return ox(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(t,(i,r)=>{const o=vc(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function lA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof Sy||t instanceof ja||t instanceof en||t instanceof Mf||t instanceof xy)}function ky(t,e,n){if(!lA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=kf(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Pg(t,e,n){if((e=lt(e))instanceof Df)return e._internalPath;if(typeof e=="string")return Ly(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const oF=new RegExp("[~\\*/\\[\\]]");function Ly(t,e,n){if(e.search(oF)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Df(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new re(Z.INVALID_ARGUMENT,u+t+c)}function uA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(by("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aF extends cA{data(){return super.data()}}function by(t,e){return typeof e=="string"?Ly(t,e):e instanceof Df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class lF extends Dy{}function uF(t,e,...n){let i=[];e instanceof Dy&&i.push(e),i=i.concat(n),function(o){const a=o.filter(c=>c instanceof My).length,u=o.filter(c=>c instanceof Of).length;if(a>1||a>0&&u>0)throw new re(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Of extends lF{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Of(e,n,i)}_apply(e){const n=this._parse(e);return dA(e._query,n),new ho(e.firestore,e.converter,fg(e._query,n))}_parse(e){const n=Cy(e.firestore);return function(o,a,u,c,f,m,g){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new re(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){yT(g,m);const T=[];for(const A of g)T.push(_T(c,o,A));v={arrayValue:{values:T}}}else v=_T(c,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||yT(g,m),v=sF(u,a,g,m==="in"||m==="not-in");return wt.create(f,m,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cF(t,e,n){const i=e,r=by("where",t);return Of._create(r,i,n)}class My extends Dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new My(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const c of u)dA(a,c),a=fg(a,c)}(e._query,n),new ho(e.firestore,e.converter,fg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _T(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new re(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mx(e)&&n.indexOf("/")!==-1)throw new re(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(He.fromString(n));if(!le.isDocumentKey(i))throw new re(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return F0(t,new le(i))}if(n instanceof en)return F0(t,n._key);throw new re(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(n)}.`)}function yT(t,e){if(!Array.isArray(t)||t.length===0)throw new re(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dA(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hF{convertValue(e,n="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return uo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>ct(a.doubleValue));return new xy(o)}convertGeoPoint(e){return new Sy(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ty(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const n=es(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=He.fromString(e);Fe(Vx(i));const r=new qu(i.get(1),i.get(3)),o=new le(i.popFirst(5));return r.isEqual(n)||or(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fA extends cA{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(by("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Yh extends fA{data(e={}){return super.data(e)}}class pA{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new tu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Yh(this._firestore,this._userDataWriter,i.key,i,new tu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new Yh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new tu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Yh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new tu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:fF(u.type),doc:c,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){t=$n(t,en);const e=$n(t.firestore,ns);return G2(bf(e),t._key).then(n=>yA(e,t,n))}class Ny extends hF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function pF(t){t=$n(t,ho);const e=$n(t.firestore,ns),n=bf(e),i=new Ny(e);return hA(t._query),K2(n,t._query).then(r=>new pA(e,i,t,r))}function Bp(t,e,n,...i){t=$n(t,en);const r=$n(t.firestore,ns),o=Cy(r);let a;return a=typeof(e=lt(e))=="string"||e instanceof Df?rF(o,"updateDoc",t._key,e,n,i):iF(o,"updateDoc",t._key,e),Oy(r,[a.toMutation(t._key,oi.exists(!0))])}function mF(t){return Oy($n(t.firestore,ns),[new oy(t._key,oi.none())])}function gA(t,e){const n=$n(t.firestore,ns),i=ca(t),r=dF(t.converter,e);return Oy(n,[nF(Cy(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,oi.exists(!1))]).then(()=>i)}function _A(t,...e){var n,i,r;t=lt(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||gT(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gT(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let c,f,m;if(t instanceof en)f=$n(t.firestore,ns),m=Tf(t._key.path),c={next:g=>{e[a]&&e[a](yA(f,t,g))},error:e[a+1],complete:e[a+2]};else{const g=$n(t,ho);f=$n(g.firestore,ns),m=g._query;const v=new Ny(f);c={next:T=>{e[a]&&e[a](new pA(f,v,g,T))},error:e[a+1],complete:e[a+2]},hA(t._query)}return function(v,T,A,k){const V=new Iy(k),b=new Ey(T,V,A);return v.asyncQueue.enqueueAndForget(async()=>vy(await jd(v),b)),()=>{V.Za(),v.asyncQueue.enqueueAndForget(async()=>wy(await jd(v),b))}}(bf(f),m,u,c)}function Oy(t,e){return function(i,r){const o=new Yi;return i.asyncQueue.enqueueAndForget(async()=>O2(await q2(i),r,o)),o.promise}(bf(t),e)}function yA(t,e,n){const i=n.docs.get(e._key),r=new Ny(t);return new fA(t,r,e._key,i,new tu(n.hasPendingWrites,n.fromCache),e.converter)}function gF(){return new Ry("serverTimestamp")}(function(e,n=!0){(function(r){Za=r})(Ga),Ci(new li("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new ns(new pO(i.getProvider("auth-internal")),new yO(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new re(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),zn(D0,"4.7.3",e),zn(D0,"4.7.3","esm2017")})();const vA="@firebase/installations",Vy="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1e4,TA=`w:${Vy}`,EA="FIS_v2",_F="https://firebaseinstallations.googleapis.com/v1",yF=60*60*1e3,vF="installations",wF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},no=new ao(vF,wF,TF);function PA(t){return t instanceof ci&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA({projectId:t}){return`${_F}/projects/${t}/installations`}function SA(t){return{token:t.token,requestStatus:2,expiresIn:PF(t.expiresIn),creationTime:Date.now()}}async function xA(t,e){const i=(await e.json()).error;return no.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function AA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function EF(t,{refreshToken:e}){const n=AA(t);return n.append("Authorization",IF(e)),n}async function CA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function PF(t){return Number(t.replace("s","000"))}function IF(t){return`${EA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SF({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=IA(t),r=AA(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={fid:n,authVersion:EA,appId:t.appId,sdkVersion:TA},u={method:"POST",headers:r,body:JSON.stringify(a)},c=await CA(()=>fetch(i,u));if(c.ok){const f=await c.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:SA(f.authToken)}}else throw await xA("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=/^[cdef][\w-]{21}$/,Ig="";function CF(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=RF(t);return AF.test(n)?n:Ig}catch{return Ig}}function RF(t){return xF(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Map;function LA(t,e){const n=Vf(t);bA(n,e),kF(n,e)}function bA(t,e){const n=kA.get(t);if(n)for(const i of n)i(e)}function kF(t,e){const n=LF();n&&n.postMessage({key:t,fid:e}),bF()}let js=null;function LF(){return!js&&"BroadcastChannel"in self&&(js=new BroadcastChannel("[Firebase] FID Change"),js.onmessage=t=>{bA(t.data.key,t.data.fid)}),js}function bF(){kA.size===0&&js&&(js.close(),js=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="firebase-installations-database",MF=1,io="firebase-installations-store";let Up=null;function Fy(){return Up||(Up=dS(DF,MF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(io)}}})),Up}async function Ud(t,e){const n=Vf(t),r=(await Fy()).transaction(io,"readwrite"),o=r.objectStore(io),a=await o.get(n);return await o.put(e,n),await r.done,(!a||a.fid!==e.fid)&&LA(t,e.fid),e}async function DA(t){const e=Vf(t),i=(await Fy()).transaction(io,"readwrite");await i.objectStore(io).delete(e),await i.done}async function Ff(t,e){const n=Vf(t),r=(await Fy()).transaction(io,"readwrite"),o=r.objectStore(io),a=await o.get(n),u=e(a);return u===void 0?await o.delete(n):await o.put(u,n),await r.done,u&&(!a||a.fid!==u.fid)&&LA(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(t){let e;const n=await Ff(t.appConfig,i=>{const r=NF(i),o=OF(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Ig?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function NF(t){const e=t||{fid:CF(),registrationStatus:0};return MA(e)}function OF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(no.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=VF(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:FF(t)}:{installationEntry:e}}async function VF(t,e){try{const n=await SF(t,e);return Ud(t.appConfig,n)}catch(n){throw PA(n)&&n.customData.serverCode===409?await DA(t.appConfig):await Ud(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function FF(t){let e=await vT(t.appConfig);for(;e.registrationStatus===1;)await RA(100),e=await vT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await jy(t);return i||n}return e}function vT(t){return Ff(t,e=>{if(!e)throw no.create("installation-not-found");return MA(e)})}function MA(t){return jF(t)?{fid:t.fid,registrationStatus:0}:t}function jF(t){return t.registrationStatus===1&&t.registrationTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BF({appConfig:t,heartbeatServiceProvider:e},n){const i=UF(t,n),r=EF(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={installation:{sdkVersion:TA,appId:t.appId}},u={method:"POST",headers:r,body:JSON.stringify(a)},c=await CA(()=>fetch(i,u));if(c.ok){const f=await c.json();return SA(f)}else throw await xA("Generate Auth Token",c)}function UF(t,{fid:e}){return`${IA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function By(t,e=!1){let n;const i=await Ff(t.appConfig,o=>{if(!NA(o))throw no.create("not-registered");const a=o.authToken;if(!e&&WF(a))return o;if(a.requestStatus===1)return n=zF(t,e),o;{if(!navigator.onLine)throw no.create("app-offline");const u=qF(o);return n=$F(t,u),u}});return n?await n:i.authToken}async function zF(t,e){let n=await wT(t.appConfig);for(;n.authToken.requestStatus===1;)await RA(100),n=await wT(t.appConfig);const i=n.authToken;return i.requestStatus===0?By(t,e):i}function wT(t){return Ff(t,e=>{if(!NA(e))throw no.create("not-registered");const n=e.authToken;return GF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function $F(t,e){try{const n=await BF(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Ud(t.appConfig,i),n}catch(n){if(PA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await DA(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ud(t.appConfig,i)}throw n}}function NA(t){return t!==void 0&&t.registrationStatus===2}function WF(t){return t.requestStatus===2&&!HF(t)}function HF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+yF}function qF(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function GF(t){return t.requestStatus===1&&t.requestTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t){const e=t,{installationEntry:n,registrationPromise:i}=await jy(e);return i?i.catch(console.error):By(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(t,e=!1){const n=t;return await QF(n),(await By(n,e)).token}async function QF(t){const{registrationPromise:e}=await jy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){if(!t||!t.options)throw zp("App Configuration");if(!t.name)throw zp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zp(t){return no.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="installations",XF="installations-internal",JF=t=>{const e=t.getProvider("app").getImmediate(),n=YF(e),i=lo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},ej=t=>{const e=t.getProvider("app").getImmediate(),n=lo(e,OA).getImmediate();return{getId:()=>KF(n),getToken:r=>ZF(n,r)}};function tj(){Ci(new li(OA,JF,"PUBLIC")),Ci(new li(XF,ej,"PRIVATE"))}tj();zn(vA,Vy);zn(vA,Vy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="analytics",nj="firebase_id",ij="origin",rj=60*1e3,sj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new gf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new ao("analytics","Analytics",oj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){if(!t.startsWith(Uy)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return dn.warn(e.message),""}return t}function VA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function lj(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function uj(t,e){const n=lj("firebase-js-sdk-policy",{createScriptURL:aj}),i=document.createElement("script"),r=`${Uy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function cj(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function hj(t,e,n,i,r,o){const a=i[r];try{if(a)await e[a];else{const c=(await VA(n)).find(f=>f.measurementId===r);c&&await e[c.appId]}}catch(u){dn.error(u)}t("config",r,o)}async function dj(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);const u=await VA(n);for(const c of a){const f=u.find(g=>g.measurementId===c),m=f&&e[f.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){dn.error(o)}}function fj(t,e,n,i){async function r(o,...a){try{if(o==="event"){const[u,c]=a;await dj(t,e,n,u,c)}else if(o==="config"){const[u,c]=a;await hj(t,e,n,i,u,c)}else if(o==="consent"){const[u,c]=a;t("consent",u,c)}else if(o==="get"){const[u,c,f]=a;t("get",u,c,f)}else if(o==="set"){const[u]=a;t("set",u)}else t(o,...a)}catch(u){dn.error(u)}}return r}function pj(t,e,n,i,r){let o=function(...a){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=fj(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function mj(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Uy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=30,_j=1e3;class yj{constructor(e={},n=_j){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const FA=new yj;function vj(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function wj(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:vj(i)},o=sj.replace("{app-id}",n),a=await fetch(o,r);if(a.status!==200&&a.status!==304){let u="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u})}return a.json()}async function Tj(t,e=FA,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw En.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw En.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Ij;return setTimeout(async()=>{u.abort()},rj),jA({appId:i,apiKey:r,measurementId:o},a,u,e)}async function jA(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=FA){var o;const{appId:a,measurementId:u}=t;try{await Ej(i,e)}catch(c){if(u)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:u};throw c}try{const c=await wj(t);return r.deleteThrottleMetadata(a),c}catch(c){const f=c;if(!Pj(f)){if(r.deleteThrottleMetadata(a),u)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:u};throw c}const m=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?r0(n,r.intervalMillis,gj):r0(n,r.intervalMillis),g={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return r.setThrottleMetadata(a,g),dn.debug(`Calling attemptFetch again in ${m} millis`),jA(t,g,i,r)}}function Ej(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Pj(t){if(!(t instanceof ci)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Ij{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Sj(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,a=Object.assign(Object.assign({},i),{send_to:o});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(){if(lS())try{await uS()}catch(t){return dn.warn(En.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Aj(t,e,n,i,r,o,a){var u;const c=Tj(t);c.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>dn.error(T)),e.push(c);const f=xj().then(T=>{if(T)return i.getId()}),[m,g]=await Promise.all([c,f]);mj(o)||uj(o,m.measurementId),r("js",new Date);const v=(u=a==null?void 0:a.config)!==null&&u!==void 0?u:{};return v[ij]="firebase",v.update=!0,g!=null&&(v[nj]=g),r("config",m.measurementId,v),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.app=e}_delete(){return delete _u[this.app.options.appId],Promise.resolve()}}let _u={},TT=[];const ET={};let $p="dataLayer",Rj="gtag",PT,BA,IT=!1;function kj(){const t=[];if(aS()&&t.push("This is a browser extension environment."),Db()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});dn.warn(n.message)}}function Lj(t,e,n){kj();const i=t.options.appId;if(!i)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(_u[i]!=null)throw En.create("already-exists",{id:i});if(!IT){cj($p);const{wrappedGtag:o,gtagCore:a}=pj(_u,TT,ET,$p,Rj);BA=o,PT=a,IT=!0}return _u[i]=Aj(t,TT,ET,e,PT,$p,n),new Cj(t)}function bj(t=B_()){t=lt(t);const e=lo(t,zd);return e.isInitialized()?e.getImmediate():Dj(t)}function Dj(t,e={}){const n=lo(t,zd);if(n.isInitialized()){const r=n.getImmediate();if(Uu(e,n.getOptions()))return r;throw En.create("already-initialized")}return n.initialize({options:e})}function Mj(t,e,n,i){t=lt(t),Sj(BA,_u[t.app.options.appId],e,n,i).catch(r=>dn.error(r))}const ST="@firebase/analytics",xT="0.10.8";function Nj(){Ci(new li(zd,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Lj(i,r,n)},"PUBLIC")),Ci(new li("analytics-internal",t,"PRIVATE")),zn(ST,xT),zn(ST,xT,"esm2017");function t(e){try{const n=e.getProvider(zd).getImmediate();return{logEvent:(i,r,o)=>Mj(n,i,r,o)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}Nj();const Oj={apiKey:"AIzaSyA-ZR_VWGeaRLHT-NX-ly4L95GiGrIMCqY",authDomain:"pilani-trails-84cef.firebaseapp.com",projectId:"pilani-trails-84cef",storageBucket:"pilani-trails-84cef.firebasestorage.app",messagingSenderId:"110096860877",appId:"1:110096860877:web:b23c4b91a6f05cf0ac0b84",measurementId:"G-CG49XPR3LQ"},zy=fS(Oj),Dr=lO(zy),vi=Y2(zy);let Vj=null;try{Vj=bj(zy)}catch(t){console.warn("Firebase Analytics initialization failed:",t)}const $y=U.createContext({}),fo=()=>U.useContext($y),Fj=({children:t})=>{const[e,n]=U.useState(null),[i,r]=U.useState(!0),o=async(m,g,v)=>{const T=await FS(Dr,m,g);return v&&await ZM(T.user,{displayName:v}),T},a=(m,g)=>GM(Dr,m,g),u=()=>{const m=new Ti;return QS(Dr,m)},c=()=>jS(Dr);U.useEffect(()=>XM(Dr,async g=>{if(g)try{console.log("[AuthContext] user signed in:",g.email,"uid:",g.uid);const v=ca(vi,"users",g.uid),T=await mA(v),A=T&&T.exists()?T.data():{};typeof A.isAdmin=="string"&&(A.isAdmin=A.isAdmin.toLowerCase()==="true"),n({...g,...A}),console.log("[AuthContext] userData from Firestore:",A)}catch(v){console.error("[AuthContext] Error loading user data from Firestore:",v),n(g)}else console.log("[AuthContext] no user logged in"),n(null);r(!1)}),[]);const f={currentUser:e,signup:o,login:a,signInWithGoogle:u,logout:c,loading:i};return P.jsx($y.Provider,{value:f,children:!i&&t})},Wp=({children:t})=>{const{currentUser:e,loading:n}=fo();return n?P.jsx("div",{children:"Loading..."}):e?t:P.jsx(eS,{to:"/login",replace:!0})};function jj(t){return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true":!1}const Bj=({children:t})=>{const{currentUser:e,loading:n}=fo();return n?P.jsx("div",{style:{padding:20},children:"Checking admin permissions..."}):e?jj(e)?t:P.jsxs("div",{style:{padding:24,textAlign:"center"},children:[P.jsx("h2",{children:"Access Denied"}),P.jsx("p",{children:"You must be an admin to access this page."})]}):P.jsx(eS,{to:"/login",replace:!0})},Uj="/pilani-trails/assets/logo-ByW2n5sB.jpg",zj=()=>{const{currentUser:t}=fo(),e=qa(),[n,i]=U.useState(!1);console.log("[Header] currentUser:",t);const r=async()=>{try{await jS(Dr),e("/login")}catch(u){console.error("Logout failed:",u)}},o=()=>i(u=>!u),a=t&&(t.role==="admin"||t.isAdmin===!0||t.email==="admin@pilanitrails.com");return P.jsx("header",{className:"app-header",children:P.jsx("nav",{className:"header-nav",children:P.jsxs("div",{className:"header-inner",children:[P.jsx("div",{className:"nav-brand",children:P.jsx(Xt,{to:"/",className:"brand-link",onClick:()=>i(!1),children:P.jsx("img",{src:Uj,alt:"Pilani Trails Logo",className:"brand-logo"})})}),P.jsx("button",{className:"menu-toggle",onClick:o,"aria-label":"Toggle menu",children:n?P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[P.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[P.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),P.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),P.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),P.jsxs("ul",{className:`nav-links ${n?"open":""}`,children:[P.jsx("li",{children:P.jsx(Xt,{to:"/",onClick:()=>i(!1),children:"Home"})}),t?P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(Xt,{to:"/dashboard",onClick:()=>i(!1),children:"Dashboard"})}),P.jsx("li",{children:P.jsx(Xt,{to:"/propose",onClick:()=>i(!1),children:"Propose Location"})}),a&&P.jsx("li",{children:P.jsx(Xt,{to:"/admin-review",onClick:()=>i(!1),children:"Admin Review"})}),P.jsx("li",{children:P.jsx("button",{onClick:r,className:"logout-btn",children:"Logout"})})]}):P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(Xt,{to:"/login",onClick:()=>i(!1),children:"Login"})}),P.jsx("li",{children:P.jsx(Xt,{to:"/signup",onClick:()=>i(!1),children:"Signup"})})]})]})]})})})},UA=U.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),jf=U.createContext({}),Wy=U.createContext(null),Bf=typeof document<"u",$j=Bf?U.useLayoutEffect:U.useEffect,zA=U.createContext({strict:!1}),Hy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Wj="framerAppearId",$A="data-"+Hy(Wj);function Hj(t,e,n,i){const{visualElement:r}=U.useContext(jf),o=U.useContext(zA),a=U.useContext(Wy),u=U.useContext(UA).reducedMotion,c=U.useRef();i=i||o.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=c.current;U.useInsertionEffect(()=>{f&&f.update(n,a)});const m=U.useRef(!!(n[$A]&&!window.HandoffComplete));return $j(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),U.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function ha(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qj(t,e,n){return U.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ha(n)&&(n.current=i))},[e])}function Xu(t){return typeof t=="string"||Array.isArray(t)}function Uf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gy=["initial",...qy];function zf(t){return Uf(t.animate)||Gy.some(e=>Xu(t[e]))}function WA(t){return!!(zf(t)||t.variants)}function Gj(t,e){if(zf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Xu(n)?n:void 0,animate:Xu(i)?i:void 0}}return t.inherit!==!1?e:{}}function Kj(t){const{initial:e,animate:n}=Gj(t,U.useContext(jf));return U.useMemo(()=>({initial:e,animate:n}),[AT(e),AT(n)])}function AT(t){return Array.isArray(t)?t.join(" "):t}const CT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ju={};for(const t in CT)Ju[t]={isEnabled:e=>CT[t].some(n=>!!e[n])};function Zj(t){for(const e in t)Ju[e]={...Ju[e],...t[e]}}const HA=U.createContext({}),qA=U.createContext({}),Qj=Symbol.for("motionComponentSymbol");function Yj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&Zj(t);function o(u,c){let f;const m={...U.useContext(UA),...u,layoutId:Xj(u)},{isStatic:g}=m,v=Kj(u),T=i(u,g);if(!g&&Bf){v.visualElement=Hj(r,T,m,e);const A=U.useContext(qA),k=U.useContext(zA).strict;v.visualElement&&(f=v.visualElement.loadFeatures(m,k,t,A))}return U.createElement(jf.Provider,{value:v},f&&v.visualElement?U.createElement(f,{visualElement:v.visualElement,...m}):null,n(r,u,qj(T,v.visualElement,c),T,g,v.visualElement))}const a=U.forwardRef(o);return a[Qj]=r,a}function Xj({layoutId:t}){const e=U.useContext(HA).id;return e&&t!==void 0?e+"-"+t:t}function Jj(t){function e(i,r={}){return Yj(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const eB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ky(t){return typeof t!="string"||t.includes("-")?!1:!!(eB.indexOf(t)>-1||/[A-Z]/.test(t))}const $d={};function tB(t){Object.assign($d,t)}const wc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=new Set(wc);function GA(t,{layout:e,layoutId:n}){return po.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$d[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),nB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iB=wc.length;function rB(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<iB;a++){const u=wc[a];if(t[u]!==void 0){const c=nB[u]||u;o+=`${c}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const KA=t=>e=>typeof e=="string"&&e.startsWith(t),ZA=KA("--"),Sg=KA("var(--"),sB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,oB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,is=(t,e,n)=>Math.min(Math.max(n,t),e),mo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yu={...mo,transform:t=>is(0,1,t)},Ah={...mo,default:1},vu=t=>Math.round(t*1e5)/1e5,$f=/(-)?([\d]*\.?[\d])+/g,QA=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,aB=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Tc(t){return typeof t=="string"}const Ec=t=>({test:e=>Tc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ir=Ec("deg"),Ai=Ec("%"),fe=Ec("px"),lB=Ec("vh"),uB=Ec("vw"),RT={...Ai,parse:t=>Ai.parse(t)/100,transform:t=>Ai.transform(t*100)},kT={...mo,transform:Math.round},YA={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,size:fe,top:fe,right:fe,bottom:fe,left:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,rotate:Ir,rotateX:Ir,rotateY:Ir,rotateZ:Ir,scale:Ah,scaleX:Ah,scaleY:Ah,scaleZ:Ah,skew:Ir,skewX:Ir,skewY:Ir,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:yu,originX:RT,originY:RT,originZ:fe,zIndex:kT,fillOpacity:yu,strokeOpacity:yu,numOctaves:kT};function Zy(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let c=!1,f=!1,m=!0;for(const g in e){const v=e[g];if(ZA(g)){o[g]=v;continue}const T=YA[g],A=oB(v,T);if(po.has(g)){if(c=!0,a[g]=A,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=A):r[g]=A}if(e.transform||(c||i?r.transform=rB(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${v} ${T}`}}const Qy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XA(t,e,n){for(const i in e)!fn(e[i])&&!GA(i,n)&&(t[i]=e[i])}function cB({transformTemplate:t},e,n){return U.useMemo(()=>{const i=Qy();return Zy(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function hB(t,e,n){const i=t.style||{},r={};return XA(r,i,t),Object.assign(r,cB(t,e,n)),t.transformValues?t.transformValues(r):r}function dB(t,e,n){const i={},r=hB(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const fB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fB.has(t)}let JA=t=>!Wd(t);function pB(t){t&&(JA=e=>e.startsWith("on")?!Wd(e):t(e))}try{pB(require("@emotion/is-prop-valid").default)}catch{}function mB(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(JA(r)||n===!0&&Wd(r)||!e&&!Wd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function LT(t,e,n){return typeof t=="string"?t:fe.transform(e+n*t)}function gB(t,e,n){const i=LT(e,t.x,t.width),r=LT(n,t.y,t.height);return`${i} ${r}`}const _B={offset:"stroke-dashoffset",array:"stroke-dasharray"},yB={offset:"strokeDashoffset",array:"strokeDasharray"};function vB(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?_B:yB;t[o.offset]=fe.transform(-i);const a=fe.transform(e),u=fe.transform(n);t[o.array]=`${a} ${u}`}function Yy(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...f},m,g,v){if(Zy(t,f,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:A,dimensions:k}=t;T.transform&&(k&&(A.transform=T.transform),delete T.transform),k&&(r!==void 0||o!==void 0||A.transform)&&(A.transformOrigin=gB(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&vB(T,a,u,c,!1)}const eC=()=>({...Qy(),attrs:{}}),Xy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wB(t,e,n,i){const r=U.useMemo(()=>{const o=eC();return Yy(o,e,{enableHardwareAcceleration:!1},Xy(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};XA(o,t.style,t),r.style={...o,...r.style}}return r}function TB(t=!1){return(n,i,r,{latestValues:o},a)=>{const c=(Ky(n)?wB:dB)(i,o,a,n),m={...mB(i,typeof n=="string",t),...c,ref:r},{children:g}=i,v=U.useMemo(()=>fn(g)?g.get():g,[g]);return U.createElement(n,{...m,children:v})}}function tC(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const nC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iC(t,e,n,i){tC(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(nC.has(r)?r:Hy(r),e.attrs[r])}function Jy(t,e){const{style:n}=t,i={};for(const r in n)(fn(n[r])||e.style&&fn(e.style[r])||GA(r,t))&&(i[r]=n[r]);return i}function rC(t,e){const n=Jy(t,e);for(const i in t)if(fn(t[i])||fn(e[i])){const r=wc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function ev(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function EB(t){const e=U.useRef(null);return e.current===null&&(e.current=t()),e.current}const Hd=t=>Array.isArray(t),PB=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),IB=t=>Hd(t)?t[t.length-1]||0:t;function Xh(t){const e=fn(t)?t.get():t;return PB(e)?e.toValue():e}function SB({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:xB(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const sC=t=>(e,n)=>{const i=U.useContext(jf),r=U.useContext(Wy),o=()=>SB(t,e,i,r);return n?o():EB(o)};function xB(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=Xh(o[v]);let{initial:a,animate:u}=t;const c=zf(t),f=WA(t);e&&f&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Uf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const A=ev(t,T);if(!A)return;const{transitionEnd:k,transition:V,...b}=A;for(const x in b){let C=b[x];if(Array.isArray(C)){const B=m?C.length-1:0;C=C[B]}C!==null&&(r[x]=C)}for(const x in k)r[x]=k[x]}),r}const dt=t=>t;class bT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function AB(t){let e=new bT,n=new bT,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(c,f=!1,m=!1)=>{const g=m&&r,v=g?e:n;return f&&a.add(c),v.add(c)&&g&&r&&(i=e.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(c),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(c))}};return u}const Ch=["prepare","read","update","preRender","render","postRender"],CB=40;function RB(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=Ch.reduce((g,v)=>(g[v]=AB(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,CB),1),r.timestamp=g,r.isProcessing=!0,Ch.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},c=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:Ch.reduce((g,v)=>{const T=o[v];return g[v]=(A,k=!1,V=!1)=>(n||c(),T.schedule(A,k,V)),g},{}),cancel:g=>Ch.forEach(v=>o[v].cancel(g)),state:r,steps:o}}const{schedule:Ge,cancel:lr,state:zt,steps:Hp}=RB(typeof requestAnimationFrame<"u"?requestAnimationFrame:dt,!0),kB={useVisualState:sC({scrapeMotionValuesFromProps:rC,createRenderState:eC,onMount:(t,e,{renderState:n,latestValues:i})=>{Ge.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ge.render(()=>{Yy(n,i,{enableHardwareAcceleration:!1},Xy(e.tagName),t.transformTemplate),iC(e,n)})}})},LB={useVisualState:sC({scrapeMotionValuesFromProps:Jy,createRenderState:Qy})};function bB(t,{forwardMotionProps:e=!1},n,i){return{...Ky(t)?kB:LB,preloadedFeatures:n,useRender:TB(e),createVisualElement:i,Component:t}}function Ki(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const oC=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Wf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const DB=t=>e=>oC(e)&&t(e,Wf(e));function Xi(t,e,n,i){return Ki(t,e,DB(n),i)}const MB=(t,e)=>n=>e(t(n)),Qr=(...t)=>t.reduce(MB);function aC(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const DT=aC("dragHorizontal"),MT=aC("dragVertical");function lC(t){let e=!1;if(t==="y")e=MT();else if(t==="x")e=DT();else{const n=DT(),i=MT();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function uC(){const t=lC(!0);return t?(t(),!1):!0}class fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function NT(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||uC())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&Ge.update(()=>u[i](o,a))};return Xi(t.current,n,r,{passive:!t.getProps()[i]})}class NB extends fs{mount(){this.unmount=Qr(NT(this.node,!0),NT(this.node,!1))}unmount(){}}class OB extends fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qr(Ki(this.node.current,"focus",()=>this.onFocus()),Ki(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const cC=(t,e)=>e?t===e?!0:cC(t,e.parentElement):!1;function qp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Wf(n))}class VB extends fs{constructor(){super(...arguments),this.removeStartListeners=dt,this.removeEndListeners=dt,this.removeAccessibleListeners=dt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=Xi(window,"pointerup",(u,c)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Ge.update(()=>{!g&&!cC(this.node.current,u.target)?m&&m(u,c):f&&f(u,c)})},{passive:!(i.onTap||i.onPointerUp)}),a=Xi(window,"pointercancel",(u,c)=>this.cancelPress(u,c),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Qr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||qp("up",(c,f)=>{const{onTap:m}=this.node.getProps();m&&Ge.update(()=>m(c,f))})};this.removeEndListeners(),this.removeEndListeners=Ki(this.node.current,"keyup",a),qp("down",(u,c)=>{this.startPress(u,c)})},n=Ki(this.node.current,"keydown",e),i=()=>{this.isPressing&&qp("cancel",(o,a)=>this.cancelPress(o,a))},r=Ki(this.node.current,"blur",i);this.removeAccessibleListeners=Qr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ge.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!uC()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ge.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Xi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Ki(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Qr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const xg=new WeakMap,Gp=new WeakMap,FB=t=>{const e=xg.get(t.target);e&&e(t)},jB=t=>{t.forEach(FB)};function BB({root:t,...e}){const n=t||document;Gp.has(n)||Gp.set(n,{});const i=Gp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(jB,{root:t,...e})),i[r]}function UB(t,e,n){const i=BB(e);return xg.set(t,n),i.observe(t),()=>{xg.delete(t),i.unobserve(t)}}const zB={some:0,all:1};class $B extends fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:zB[r]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(c)};return UB(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(WB(e,n))&&this.startObserver()}unmount(){}}function WB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const HB={inView:{Feature:$B},tap:{Feature:VB},focus:{Feature:OB},hover:{Feature:NB}};function hC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function qB(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function GB(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Hf(t,e,n){const i=t.getProps();return ev(i,e,n!==void 0?n:i.custom,qB(t),GB(t))}let tv=dt;const Ws=t=>t*1e3,Ji=t=>t/1e3,KB={current:!1},dC=t=>Array.isArray(t)&&typeof t[0]=="number";function fC(t){return!!(!t||typeof t=="string"&&pC[t]||dC(t)||Array.isArray(t)&&t.every(fC))}const nu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,pC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nu([0,.65,.55,1]),circOut:nu([.55,0,1,.45]),backIn:nu([.31,.01,.66,-.59]),backOut:nu([.33,1.53,.69,.99])};function mC(t){if(t)return dC(t)?nu(t):Array.isArray(t)?t.map(mC):pC[t]}function ZB(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:c}={}){const f={[e]:n};c&&(f.offset=c);const m=mC(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function QB(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const gC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,YB=1e-7,XB=12;function JB(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=gC(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>YB&&++u<XB);return a}function Pc(t,e,n,i){if(t===e&&n===i)return dt;const r=o=>JB(o,0,1,t,n);return o=>o===0||o===1?o:gC(r(o),e,i)}const eU=Pc(.42,0,1,1),tU=Pc(0,0,.58,1),_C=Pc(.42,0,.58,1),nU=t=>Array.isArray(t)&&typeof t[0]!="number",yC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vC=t=>e=>1-t(1-e),nv=t=>1-Math.sin(Math.acos(t)),wC=vC(nv),iU=yC(nv),TC=Pc(.33,1.53,.69,.99),iv=vC(TC),rU=yC(iv),sU=t=>(t*=2)<1?.5*iv(t):.5*(2-Math.pow(2,-10*(t-1))),oU={linear:dt,easeIn:eU,easeInOut:_C,easeOut:tU,circIn:nv,circInOut:iU,circOut:wC,backIn:iv,backInOut:rU,backOut:TC,anticipate:sU},OT=t=>{if(Array.isArray(t)){tv(t.length===4);const[e,n,i,r]=t;return Pc(e,n,i,r)}else if(typeof t=="string")return oU[t];return t},rv=(t,e)=>n=>!!(Tc(n)&&aB.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),EC=(t,e,n)=>i=>{if(!Tc(i))return i;const[r,o,a,u]=i.match($f);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},aU=t=>is(0,255,t),Kp={...mo,transform:t=>Math.round(aU(t))},Bs={test:rv("rgb","red"),parse:EC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Kp.transform(t)+", "+Kp.transform(e)+", "+Kp.transform(n)+", "+vu(yu.transform(i))+")"};function lU(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Ag={test:rv("#"),parse:lU,transform:Bs.transform},da={test:rv("hsl","hue"),parse:EC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ai.transform(vu(e))+", "+Ai.transform(vu(n))+", "+vu(yu.transform(i))+")"},Qt={test:t=>Bs.test(t)||Ag.test(t)||da.test(t),parse:t=>Bs.test(t)?Bs.parse(t):da.test(t)?da.parse(t):Ag.parse(t),transform:t=>Tc(t)?t:t.hasOwnProperty("red")?Bs.transform(t):da.transform(t)},tt=(t,e,n)=>-n*t+n*e+t;function Zp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function uU({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;r=Zp(c,u,t+1/3),o=Zp(c,u,t),a=Zp(c,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Qp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},cU=[Ag,Bs,da],hU=t=>cU.find(e=>e.test(t));function VT(t){const e=hU(t);let n=e.parse(t);return e===da&&(n=uU(n)),n}const PC=(t,e)=>{const n=VT(t),i=VT(e),r={...n};return o=>(r.red=Qp(n.red,i.red,o),r.green=Qp(n.green,i.green,o),r.blue=Qp(n.blue,i.blue,o),r.alpha=tt(n.alpha,i.alpha,o),Bs.transform(r))};function dU(t){var e,n;return isNaN(t)&&Tc(t)&&(((e=t.match($f))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(QA))===null||n===void 0?void 0:n.length)||0)>0}const IC={regex:sB,countKey:"Vars",token:"${v}",parse:dt},SC={regex:QA,countKey:"Colors",token:"${c}",parse:Qt.parse},xC={regex:$f,countKey:"Numbers",token:"${n}",parse:mo.parse};function Yp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function qd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Yp(n,IC),Yp(n,SC),Yp(n,xC),n}function AC(t){return qd(t).values}function CC(t){const{values:e,numColors:n,numVars:i,tokenised:r}=qd(t),o=e.length;return a=>{let u=r;for(let c=0;c<o;c++)c<i?u=u.replace(IC.token,a[c]):c<i+n?u=u.replace(SC.token,Qt.transform(a[c])):u=u.replace(xC.token,vu(a[c]));return u}}const fU=t=>typeof t=="number"?0:t;function pU(t){const e=AC(t);return CC(t)(e.map(fU))}const rs={test:dU,parse:AC,createTransformer:CC,getAnimatableNone:pU},RC=(t,e)=>n=>`${n>0?e:t}`;function kC(t,e){return typeof t=="number"?n=>tt(t,e,n):Qt.test(t)?PC(t,e):t.startsWith("var(")?RC(t,e):bC(t,e)}const LC=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>kC(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},mU=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=kC(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},bC=(t,e)=>{const n=rs.createTransformer(e),i=qd(t),r=qd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Qr(LC(i.values,r.values),n):RC(t,e)},ec=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},FT=(t,e)=>n=>tt(t,e,n);function gU(t){return typeof t=="number"?FT:typeof t=="string"?Qt.test(t)?PC:bC:Array.isArray(t)?LC:typeof t=="object"?mU:FT}function _U(t,e,n){const i=[],r=n||gU(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||dt:e;u=Qr(c,u)}i.push(u)}return i}function DC(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(tv(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=_U(e,i,r),u=a.length,c=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=ec(t[m],t[m+1],f);return a[m](g)};return n?f=>c(is(t[0],t[o-1],f)):c}function yU(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=ec(0,e,i);t.push(tt(n,1,r))}}function vU(t){const e=[0];return yU(e,t.length-1),e}function wU(t,e){return t.map(n=>n*e)}function TU(t,e){return t.map(()=>e||_C).splice(0,t.length-1)}function Gd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=nU(i)?i.map(OT):OT(i),o={done:!1,value:e[0]},a=wU(n&&n.length===e.length?n:vU(e),t),u=DC(a,e,{ease:Array.isArray(r)?r:TU(e,r)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}function MC(t,e){return e?t*(1e3/e):0}const EU=5;function NC(t,e,n){const i=Math.max(e-EU,0);return MC(n-t(i),e-i)}const Xp=.001,PU=.01,IU=10,SU=.05,xU=1;function AU({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=is(SU,xU,a),t=is(PU,IU,Ji(t)),a<1?(r=f=>{const m=f*a,g=m*t,v=m-n,T=Cg(f,a),A=Math.exp(-g);return Xp-v/T*A},o=f=>{const g=f*a*t,v=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,A=Math.exp(-g),k=Cg(Math.pow(f,2),a);return(-r(f)+Xp>0?-1:1)*((v-T)*A)/k}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Xp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,c=RU(r,o,u);if(t=Ws(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const CU=12;function RU(t,e,n){let i=n;for(let r=1;r<CU;r++)i=i-t(i)/e(i);return i}function Cg(t,e){return t*Math.sqrt(1-e*e)}const kU=["duration","bounce"],LU=["stiffness","damping","mass"];function jT(t,e){return e.some(n=>t[n]!==void 0)}function bU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!jT(t,LU)&&jT(t,kU)){const n=AU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function OC({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:c,mass:f,duration:m,velocity:g,isResolvedFromDuration:v}=bU({...i,velocity:-Ji(i.velocity||0)}),T=g||0,A=c/(2*Math.sqrt(u*f)),k=o-r,V=Ji(Math.sqrt(u/f)),b=Math.abs(k)<5;n||(n=b?.01:2),e||(e=b?.005:.5);let x;if(A<1){const C=Cg(V,A);x=B=>{const G=Math.exp(-A*V*B);return o-G*((T+A*V*k)/C*Math.sin(C*B)+k*Math.cos(C*B))}}else if(A===1)x=C=>o-Math.exp(-V*C)*(k+(T+V*k)*C);else{const C=V*Math.sqrt(A*A-1);x=B=>{const G=Math.exp(-A*V*B),W=Math.min(C*B,300);return o-G*((T+A*V*k)*Math.sinh(W)+C*k*Math.cosh(W))/C}}return{calculatedDuration:v&&m||null,next:C=>{const B=x(C);if(v)a.done=C>=m;else{let G=T;C!==0&&(A<1?G=NC(x,C,B):G=0);const W=Math.abs(G)<=n,R=Math.abs(o-B)<=e;a.done=W&&R}return a.value=a.done?o:B,a}}}function BT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:c,restDelta:f=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},T=I=>u!==void 0&&I<u||c!==void 0&&I>c,A=I=>u===void 0?c:c===void 0||Math.abs(u-I)<Math.abs(c-I)?u:c;let k=n*e;const V=g+k,b=a===void 0?V:a(V);b!==V&&(k=b-g);const x=I=>-k*Math.exp(-I/i),C=I=>b+x(I),B=I=>{const D=x(I),M=C(I);v.done=Math.abs(D)<=f,v.value=v.done?b:M};let G,W;const R=I=>{T(v.value)&&(G=I,W=OC({keyframes:[v.value,A(v.value)],velocity:NC(C,I,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:I=>{let D=!1;return!W&&G===void 0&&(D=!0,B(I),R(I)),G!==void 0&&I>G?W.next(I-G):(!D&&B(I),v)}}}const DU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ge.update(e,!0),stop:()=>lr(e),now:()=>zt.isProcessing?zt.timestamp:performance.now()}},UT=2e4;function zT(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<UT;)e+=n,i=t.next(e);return e>=UT?1/0:e}const MU={decay:BT,inertia:BT,tween:Gd,keyframes:Gd,spring:OC};function Kd({autoplay:t=!0,delay:e=0,driver:n=DU,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:c,onStop:f,onComplete:m,onUpdate:g,...v}){let T=1,A=!1,k,V;const b=()=>{V=new Promise(te=>{k=te})};b();let x;const C=MU[r]||Gd;let B;C!==Gd&&typeof i[0]!="number"&&(B=DC([0,100],i,{clamp:!1}),i=[0,100]);const G=C({...v,keyframes:i});let W;u==="mirror"&&(W=C({...v,keyframes:[...i].reverse(),velocity:-(v.velocity||0)}));let R="idle",I=null,D=null,M=null;G.calculatedDuration===null&&o&&(G.calculatedDuration=zT(G));const{calculatedDuration:F}=G;let j=1/0,N=1/0;F!==null&&(j=F+a,N=j*(o+1)-a);let Te=0;const ze=te=>{if(D===null)return;T>0&&(D=Math.min(D,te)),T<0&&(D=Math.min(te-N/T,D)),I!==null?Te=I:Te=Math.round(te-D)*T;const pe=Te-e*(T>=0?1:-1),Pe=T>=0?pe<0:pe>N;Te=Math.max(pe,0),R==="finished"&&I===null&&(Te=N);let De=Te,Ee=G;if(o){const hr=Math.min(Te,N)/j;let pn=Math.floor(hr),Ft=hr%1;!Ft&&hr>=1&&(Ft=1),Ft===1&&pn--,pn=Math.min(pn,o+1),!!(pn%2)&&(u==="reverse"?(Ft=1-Ft,a&&(Ft-=a/j)):u==="mirror"&&(Ee=W)),De=is(0,1,Ft)*j}const ce=Pe?{done:!1,value:i[0]}:Ee.next(De);B&&(ce.value=B(ce.value));let{done:st}=ce;!Pe&&F!==null&&(st=T>=0?Te>=N:Te<=0);const An=I===null&&(R==="finished"||R==="running"&&st);return g&&g(ce.value),An&&K(),ce},Se=()=>{x&&x.stop(),x=void 0},Ke=()=>{R="idle",Se(),k(),b(),D=M=null},K=()=>{R="finished",m&&m(),Se(),k()},ae=()=>{if(A)return;x||(x=n(ze));const te=x.now();c&&c(),I!==null?D=te-I:(!D||R==="finished")&&(D=te),R==="finished"&&b(),M=D,I=null,R="running",x.start()};t&&ae();const J={then(te,pe){return V.then(te,pe)},get time(){return Ji(Te)},set time(te){te=Ws(te),Te=te,I!==null||!x||T===0?I=te:D=x.now()-te/T},get duration(){const te=G.calculatedDuration===null?zT(G):G.calculatedDuration;return Ji(te)},get speed(){return T},set speed(te){te===T||!x||(T=te,J.time=Ji(Te))},get state(){return R},play:ae,pause:()=>{R="paused",I=Te},stop:()=>{A=!0,R!=="idle"&&(R="idle",f&&f(),Ke())},cancel:()=>{M!==null&&ze(M),Ke()},complete:()=>{R="finished"},sample:te=>(D=0,ze(te))};return J}function NU(t){let e;return()=>(e===void 0&&(e=t()),e)}const OU=NU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),VU=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Rh=10,FU=2e4,jU=(t,e)=>e.type==="spring"||t==="backgroundColor"||!fC(e.ease);function BU(t,e,{onUpdate:n,onComplete:i,...r}){if(!(OU()&&VU.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,c,f=!1;const m=()=>{c=new Promise(C=>{u=C})};m();let{keyframes:g,duration:v=300,ease:T,times:A}=r;if(jU(e,r)){const C=Kd({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const G=[];let W=0;for(;!B.done&&W<FU;)B=C.sample(W),G.push(B.value),W+=Rh;A=void 0,g=G,v=W-Rh,T="linear"}const k=ZB(t.owner.current,e,g,{...r,duration:v,ease:T,times:A}),V=()=>{f=!1,k.cancel()},b=()=>{f=!0,Ge.update(V),u(),m()};return k.onfinish=()=>{f||(t.set(QB(g,r)),i&&i(),b())},{then(C,B){return c.then(C,B)},attachTimeline(C){return k.timeline=C,k.onfinish=null,dt},get time(){return Ji(k.currentTime||0)},set time(C){k.currentTime=Ws(C)},get speed(){return k.playbackRate},set speed(C){k.playbackRate=C},get duration(){return Ji(v)},play:()=>{a||(k.play(),lr(V))},pause:()=>k.pause(),stop:()=>{if(a=!0,k.playState==="idle")return;const{currentTime:C}=k;if(C){const B=Kd({...r,autoplay:!1});t.setWithVelocity(B.sample(C-Rh).value,B.sample(C).value,Rh)}b()},complete:()=>{f||k.finish()},cancel:b}}function UU({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:dt,pause:dt,stop:dt,then:o=>(o(),Promise.resolve()),cancel:dt,complete:dt});return e?Kd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const zU={type:"spring",stiffness:500,damping:25,restSpeed:10},$U=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),WU={type:"keyframes",duration:.8},HU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qU=(t,{keyframes:e})=>e.length>2?WU:po.has(t)?t.startsWith("scale")?$U(e[1]):zU:HU,Rg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(rs.test(e)||e==="0")&&!e.startsWith("url(")),GU=new Set(["brightness","contrast","saturate","opacity"]);function KU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match($f)||[];if(!i)return t;const r=n.replace(i,"");let o=GU.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const ZU=/([a-z-]*)\(.*?\)/g,kg={...rs,getAnimatableNone:t=>{const e=t.match(ZU);return e?e.map(KU).join(" "):t}},QU={...YA,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:kg,WebkitFilter:kg},sv=t=>QU[t];function VC(t,e){let n=sv(t);return n!==kg&&(n=rs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const FC=t=>/^0[^.\s]+$/.test(t);function YU(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||FC(t)}function XU(t,e,n,i){const r=Rg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const c=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),YU(o[f])&&c.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&c.length&&u)for(let f=0;f<c.length;f++){const m=c[f];o[m]=VC(e,u)}return o}function JU({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:c,elapsed:f,...m}){return!!Object.keys(m).length}function ov(t,e){return t[e]||t.default||t}const ez={skipAnimations:!1},av=(t,e,n,i={})=>r=>{const o=ov(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Ws(a);const c=XU(e,t,n,o),f=c[0],m=c[c.length-1],g=Rg(t,f),v=Rg(t,m);let T={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:A=>{e.set(A),o.onUpdate&&o.onUpdate(A)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(JU(o)||(T={...T,...qU(t,T)}),T.duration&&(T.duration=Ws(T.duration)),T.repeatDelay&&(T.repeatDelay=Ws(T.repeatDelay)),!g||!v||KB.current||o.type===!1||ez.skipAnimations)return UU(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const A=BU(e,t,T);if(A)return A}return Kd(T)};function Zd(t){return!!(fn(t)&&t.add)}const jC=t=>/^\-?\d*\.?\d+$/.test(t);function lv(t,e){t.indexOf(e)===-1&&t.push(e)}function uv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class cv{constructor(){this.subscriptions=[]}add(e){return lv(this.subscriptions,e),()=>uv(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const tz=t=>!isNaN(parseFloat(t));class nz{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=zt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Ge.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ge.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=tz(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new cv);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?MC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ba(t,e){return new nz(t,e)}const BC=t=>e=>e.test(t),iz={test:t=>t==="auto",parse:t=>t},UC=[mo,fe,Ai,Ir,uB,lB,iz],Wl=t=>UC.find(BC(t)),rz=[...UC,Qt,rs],sz=t=>rz.find(BC(t));function oz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ba(n))}function az(t,e){const n=Hf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=IB(o[a]);oz(t,a,u)}}function lz(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const c=o[u],f=e[c];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[c])!==null&&i!==void 0?i:t.readValue(c))!==null&&r!==void 0?r:e[c]),m!=null&&(typeof m=="string"&&(jC(m)||FC(m))?m=parseFloat(m):!sz(m)&&rs.test(f)&&(m=VC(c,f)),t.addValue(c,Ba(m,{owner:t})),n[c]===void 0&&(n[c]=m),m!==null&&t.setBaseTarget(c,m))}}function uz(t,e){return e?(e[t]||e.default||e).from:void 0}function cz(t,e,n){const i={};for(const r in t){const o=uz(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function hz({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function dz(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function zC(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const v=t.getValue(g),T=u[g];if(!v||T===void 0||m&&hz(m,g))continue;const A={delay:n,elapsed:0,...ov(o||{},g)};if(window.HandoffAppearAnimations){const b=t.getProps()[$A];if(b){const x=window.HandoffAppearAnimations(b,g,v,Ge);x!==null&&(A.elapsed=x,A.isHandoff=!0)}}let k=!A.isHandoff&&!dz(v,T);if(A.type==="spring"&&(v.getVelocity()||A.velocity)&&(k=!1),v.animation&&(k=!1),k)continue;v.start(av(g,v,T,t.shouldReduceMotion&&po.has(g)?{type:!1}:A));const V=v.animation;Zd(c)&&(c.add(g),V.then(()=>c.remove(g))),f.push(V)}return a&&Promise.all(f).then(()=>{a&&az(t,a)}),f}function Lg(t,e,n={}){const i=Hf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(zC(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return fz(t,e,f+c,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[c,f]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function fz(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,c=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(pz).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Lg(f,e,{...o,delay:n+c(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function pz(t,e){return t.sortNodePosition(e)}function mz(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Lg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Lg(t,e,n);else{const r=typeof e=="function"?Hf(t,e,n.custom):e;i=Promise.all(zC(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const gz=[...qy].reverse(),_z=qy.length;function yz(t){return e=>Promise.all(e.map(({animation:n,options:i})=>mz(t,n,i)))}function vz(t){let e=yz(t);const n=Tz();let i=!0;const r=(c,f)=>{const m=Hf(t,f);if(m){const{transition:g,transitionEnd:v,...T}=m;c={...c,...T,...v}}return c};function o(c){e=c(t)}function a(c,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},v=[],T=new Set;let A={},k=1/0;for(let b=0;b<_z;b++){const x=gz[b],C=n[x],B=m[x]!==void 0?m[x]:g[x],G=Xu(B),W=x===f?C.isActive:null;W===!1&&(k=b);let R=B===g[x]&&B!==m[x]&&G;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),C.protectedKeys={...A},!C.isActive&&W===null||!B&&!C.prevProp||Uf(B)||typeof B=="boolean")continue;let D=wz(C.prevProp,B)||x===f&&C.isActive&&!R&&G||b>k&&G,M=!1;const F=Array.isArray(B)?B:[B];let j=F.reduce(r,{});W===!1&&(j={});const{prevResolvedValues:N={}}=C,Te={...N,...j},ze=Se=>{D=!0,T.has(Se)&&(M=!0,T.delete(Se)),C.needsAnimating[Se]=!0};for(const Se in Te){const Ke=j[Se],K=N[Se];if(A.hasOwnProperty(Se))continue;let ae=!1;Hd(Ke)&&Hd(K)?ae=!hC(Ke,K):ae=Ke!==K,ae?Ke!==void 0?ze(Se):T.add(Se):Ke!==void 0&&T.has(Se)?ze(Se):C.protectedKeys[Se]=!0}C.prevProp=B,C.prevResolvedValues=j,C.isActive&&(A={...A,...j}),i&&t.blockInitialAnimation&&(D=!1),D&&(!R||M)&&v.push(...F.map(Se=>({animation:Se,options:{type:x,...c}})))}if(T.size){const b={};T.forEach(x=>{const C=t.getBaseTarget(x);C!==void 0&&(b[x]=C)}),v.push({animation:b})}let V=!!v.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(V=!1),i=!1,V?e(v):Promise.resolve()}function u(c,f,m){var g;if(n[c].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var A;return(A=T.animationState)===null||A===void 0?void 0:A.setActive(c,f)}),n[c].isActive=f;const v=a(m,c);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function wz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!hC(e,t):!1}function Cs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tz(){return{animate:Cs(!0),whileInView:Cs(),whileHover:Cs(),whileTap:Cs(),whileDrag:Cs(),whileFocus:Cs(),exit:Cs()}}class Ez extends fs{constructor(e){super(e),e.animationState||(e.animationState=vz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Uf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Pz=0;class Iz extends fs{constructor(){super(...arguments),this.id=Pz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Sz={animation:{Feature:Ez},exit:{Feature:Iz}},$T=(t,e)=>Math.abs(t-e);function xz(t,e){const n=$T(t.x,e.x),i=$T(t.y,e.y);return Math.sqrt(n**2+i**2)}class $C{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=em(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=xz(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:A}=g,{timestamp:k}=zt;this.history.push({...A,timestamp:k});const{onStart:V,onMove:b}=this.handlers;v||(V&&V(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Jp(v,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:A,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=em(g.type==="pointercancel"?this.lastMoveEventInfo:Jp(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,V),A&&A(g,V)},!oC(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Wf(e),u=Jp(a,this.transformPagePoint),{point:c}=u,{timestamp:f}=zt;this.history=[{...c,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,em(u,this.history)),this.removeListeners=Qr(Xi(this.contextWindow,"pointermove",this.handlePointerMove),Xi(this.contextWindow,"pointerup",this.handlePointerUp),Xi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function Jp(t,e){return e?{point:e(t.point)}:t}function WT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function em({point:t},e){return{point:t,delta:WT(t,WC(e)),offset:WT(t,Az(e)),velocity:Cz(e,.1)}}function Az(t){return t[0]}function WC(t){return t[t.length-1]}function Cz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=WC(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ws(e)));)n--;if(!i)return{x:0,y:0};const o=Ji(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function In(t){return t.max-t.min}function bg(t,e=0,n=.01){return Math.abs(t-e)<=n}function HT(t,e,n,i=.5){t.origin=i,t.originPoint=tt(e.min,e.max,t.origin),t.scale=In(n)/In(e),(bg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(bg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function wu(t,e,n,i){HT(t.x,e.x,n.x,i?i.originX:void 0),HT(t.y,e.y,n.y,i?i.originY:void 0)}function qT(t,e,n){t.min=n.min+e.min,t.max=t.min+In(e)}function Rz(t,e,n){qT(t.x,e.x,n.x),qT(t.y,e.y,n.y)}function GT(t,e,n){t.min=e.min-n.min,t.max=t.min+In(e)}function Tu(t,e,n){GT(t.x,e.x,n.x),GT(t.y,e.y,n.y)}function kz(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tt(n,t,i.max):Math.min(t,n)),t}function KT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Lz(t,{top:e,left:n,bottom:i,right:r}){return{x:KT(t.x,n,r),y:KT(t.y,e,i)}}function ZT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function bz(t,e){return{x:ZT(t.x,e.x),y:ZT(t.y,e.y)}}function Dz(t,e){let n=.5;const i=In(t),r=In(e);return r>i?n=ec(e.min,e.max-i,t.min):i>r&&(n=ec(t.min,t.max-r,e.min)),is(0,1,n)}function Mz(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Dg=.35;function Nz(t=Dg){return t===!1?t=0:t===!0&&(t=Dg),{x:QT(t,"left","right"),y:QT(t,"top","bottom")}}function QT(t,e,n){return{min:YT(t,e),max:YT(t,n)}}function YT(t,e){return typeof t=="number"?t:t[e]||0}const XT=()=>({translate:0,scale:1,origin:0,originPoint:0}),fa=()=>({x:XT(),y:XT()}),JT=()=>({min:0,max:0}),yt=()=>({x:JT(),y:JT()});function Vn(t){return[t("x"),t("y")]}function HC({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Oz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Vz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function tm(t){return t===void 0||t===1}function Mg({scale:t,scaleX:e,scaleY:n}){return!tm(t)||!tm(e)||!tm(n)}function bs(t){return Mg(t)||qC(t)||t.z||t.rotate||t.rotateX||t.rotateY}function qC(t){return eE(t.x)||eE(t.y)}function eE(t){return t&&t!=="0%"}function Qd(t,e,n){const i=t-n,r=e*i;return n+r}function tE(t,e,n,i,r){return r!==void 0&&(t=Qd(t,r,i)),Qd(t,n,i)+e}function Ng(t,e=0,n=1,i,r){t.min=tE(t.min,e,n,i,r),t.max=tE(t.max,e,n,i,r)}function GC(t,{x:e,y:n}){Ng(t.x,e.translate,e.scale,e.originPoint),Ng(t.y,n.translate,n.scale,n.originPoint)}function Fz(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&pa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,GC(t,a)),i&&bs(o.latestValues)&&pa(t,o.latestValues))}e.x=nE(e.x),e.y=nE(e.y)}function nE(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ar(t,e){t.min=t.min+e,t.max=t.max+e}function iE(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=tt(t.min,t.max,o);Ng(t,e[n],e[i],a,e.scale)}const jz=["x","scaleX","originX"],Bz=["y","scaleY","originY"];function pa(t,e){iE(t.x,e,jz),iE(t.y,e,Bz)}function KC(t,e){return HC(Vz(t.getBoundingClientRect(),e))}function Uz(t,e,n){const i=KC(t,n),{scroll:r}=e;return r&&(Ar(i.x,r.offset.x),Ar(i.y,r.offset.y)),i}const ZC=({current:t})=>t?t.ownerDocument.defaultView:null,zz=new WeakMap;class $z{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wf(m,"page").point)},o=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:A}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=lC(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vn(V=>{let b=this.getAxisMotionValue(V).get()||0;if(Ai.test(b)){const{projection:x}=this.visualElement;if(x&&x.layout){const C=x.layout.layoutBox[V];C&&(b=In(C)*(parseFloat(b)/100))}}this.originPoint[V]=b}),A&&Ge.update(()=>A(m,g),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:A,onDrag:k}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:V}=g;if(T&&this.currentDirection===null){this.currentDirection=Wz(V),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,V),this.updateAxis("y",g.point,V),this.visualElement.render(),k&&k(m,g)},u=(m,g)=>this.stop(m,g),c=()=>Vn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new $C(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:ZC(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Ge.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!kh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=kz(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&ha(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=Lz(r.layoutBox,n):this.constraints=!1,this.elastic=Nz(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Mz(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ha(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=Uz(i,r.root,this.visualElement.getTransformPagePoint());let a=bz(r.layout.layoutBox,o);if(n){const u=n(Oz(a));this.hasMutatedConstraints=!!u,u&&(a=HC(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=Vn(m=>{if(!kh(m,n,this.currentDirection))return;let g=c&&c[m]||{};a&&(g={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,A={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,A)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(av(e,i,0,n))}stopAnimation(){Vn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Vn(n=>{const{drag:i}=this.getProps();if(!kh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-tt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ha(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Vn(a=>{const u=this.getAxisMotionValue(a);if(u){const c=u.get();r[a]=Dz({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Vn(a=>{if(!kh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];u.set(tt(c,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;zz.set(this.visualElement,this);const e=this.visualElement.current,n=Xi(e,"pointerdown",c=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();ha(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=Ki(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Vn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Dg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function kh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Wz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Hz extends fs{constructor(e){super(e),this.removeGroupControls=dt,this.removeListeners=dt,this.controls=new $z(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const rE=t=>(e,n)=>{t&&Ge.update(()=>t(e,n))};class qz extends fs{constructor(){super(...arguments),this.removePointerDownListener=dt}onPointerDown(e){this.session=new $C(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:rE(e),onStart:rE(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Ge.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=Xi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Gz(){const t=U.useContext(Wy);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=U.useId();return U.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Jh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(fe.test(t))t=parseFloat(t);else return t;const n=sE(t,e.target.x),i=sE(t,e.target.y);return`${n}% ${i}%`}},Kz={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=rs.parse(t);if(r.length>5)return i;const o=rs.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=c;const f=tt(u,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class Zz extends Hs.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;tB(Qz),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Jh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Ge.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function QC(t){const[e,n]=Gz(),i=U.useContext(HA);return Hs.createElement(Zz,{...t,layoutGroup:i,switchLayoutGroup:U.useContext(qA),isPresent:e,safeToRemove:n})}const Qz={borderRadius:{...Hl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hl,borderTopRightRadius:Hl,borderBottomLeftRadius:Hl,borderBottomRightRadius:Hl,boxShadow:Kz},YC=["TopLeft","TopRight","BottomLeft","BottomRight"],Yz=YC.length,oE=t=>typeof t=="string"?parseFloat(t):t,aE=t=>typeof t=="number"||fe.test(t);function Xz(t,e,n,i,r,o){r?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,Jz(i)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,e4(i))):o&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<Yz;a++){const u=`border${YC[a]}Radius`;let c=lE(e,u),f=lE(n,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||aE(c)===aE(f)?(t[u]=Math.max(tt(oE(c),oE(f),i),0),(Ai.test(f)||Ai.test(c))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,i))}function lE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Jz=XC(0,.5,wC),e4=XC(.5,.95,dt);function XC(t,e,n){return i=>i<t?0:i>e?1:n(ec(t,e,i))}function uE(t,e){t.min=e.min,t.max=e.max}function On(t,e){uE(t.x,e.x),uE(t.y,e.y)}function cE(t,e,n,i,r){return t-=e,t=Qd(t,1/n,i),r!==void 0&&(t=Qd(t,1/r,i)),t}function t4(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ai.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=tt(o.min,o.max,i);t===o&&(u-=e),t.min=cE(t.min,e,n,u,r),t.max=cE(t.max,e,n,u,r)}function hE(t,e,[n,i,r],o,a){t4(t,e[n],e[i],e[r],e.scale,o,a)}const n4=["x","scaleX","originX"],i4=["y","scaleY","originY"];function dE(t,e,n,i){hE(t.x,e,n4,n?n.x:void 0,i?i.x:void 0),hE(t.y,e,i4,n?n.y:void 0,i?i.y:void 0)}function fE(t){return t.translate===0&&t.scale===1}function JC(t){return fE(t.x)&&fE(t.y)}function r4(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function e1(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function pE(t){return In(t.x)/In(t.y)}class s4{constructor(){this.members=[]}add(e){lv(this.members,e),e.scheduleRender()}remove(e){if(uv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mE(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:f,rotateY:m}=n;c&&(i+=`rotate(${c}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const o4=(t,e)=>t.depth-e.depth;class a4{constructor(){this.children=[],this.isDirty=!1}add(e){lv(this.children,e),this.isDirty=!0}remove(e){uv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(o4),this.isDirty=!1,this.children.forEach(e)}}function l4(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(lr(i),t(o-e))};return Ge.read(i,!0),()=>lr(i)}function u4(t){window.MotionDebug&&window.MotionDebug.record(t)}function c4(t){return t instanceof SVGElement&&t.tagName!=="svg"}function h4(t,e,n){const i=fn(t)?t:Ba(t);return i.start(av("",i,e,n)),i.animation}const gE=["","X","Y","Z"],d4={visibility:"hidden"},_E=1e3;let f4=0;const Ds={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function t1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=f4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ds.totalNodes=Ds.resolvedTargetDeltas=Ds.recalculatedProjection=0,this.nodes.forEach(g4),this.nodes.forEach(T4),this.nodes.forEach(E4),this.nodes.forEach(_4),u4(Ds)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new a4)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new cv),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=c4(a),this.instance=a;const{layoutId:c,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||c)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=l4(v,250),Jh.hasAnimatedSinceResize&&(Jh.hasAnimatedSinceResize=!1,this.nodes.forEach(vE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||A4,{onLayoutAnimationStart:V,onLayoutAnimationComplete:b}=m.getProps(),x=!this.targetLayout||!e1(this.targetLayout,A)||T,C=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||v&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,C);const B={...ov(k,"layout"),onPlay:V,onComplete:b};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||vE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yE);return}this.isUpdating||this.nodes.forEach(v4),this.isUpdating=!1,this.nodes.forEach(w4),this.nodes.forEach(p4),this.nodes.forEach(m4),this.clearAllSnapshots();const u=performance.now();zt.delta=is(0,1e3/60,u-zt.timestamp),zt.timestamp=u,zt.isProcessing=!0,Hp.update.process(zt),Hp.preRender.process(zt),Hp.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(y4),this.sharedNodes.forEach(I4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!JC(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||bs(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),C4(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return yt();const u=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Ar(u.x,c.offset.x),Ar(u.y,c.offset.y)),u}removeElementScroll(a){const u=yt();On(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){On(u,a);const{scroll:v}=this.root;v&&(Ar(u.x,-v.offset.x),Ar(u.y,-v.offset.y))}Ar(u.x,m.offset.x),Ar(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const c=yt();On(c,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&pa(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),bs(m.latestValues)&&pa(c,m.latestValues)}return bs(this.latestValues)&&pa(c,this.latestValues),c}removeTransform(a){const u=yt();On(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!bs(f.latestValues))continue;Mg(f.latestValues)&&f.updateSnapshot();const m=yt(),g=f.measurePageBox();On(m,g),dE(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return bs(this.latestValues)&&dE(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=zt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Tu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Rz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):On(this.target,this.layout.layoutBox),GC(this.target,this.targetDelta)):On(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Tu(this.relativeTargetOrigin,this.target,T.target),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ds.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Mg(this.parent.latestValues)||qC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;On(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;Fz(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:A}=u;if(!A){this.projectionTransform&&(this.projectionDelta=fa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=fa(),this.projectionDeltaWithTransform=fa());const k=this.projectionTransform;wu(this.projectionDelta,this.layoutCorrected,A,this.latestValues),this.projectionTransform=mE(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),Ds.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const c=this.snapshot,f=c?c.latestValues:{},m={...this.latestValues},g=fa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=yt(),T=c?c.source:void 0,A=this.layout?this.layout.source:void 0,k=T!==A,V=this.getStack(),b=!V||V.members.length<=1,x=!!(k&&!b&&this.options.crossfade===!0&&!this.path.some(x4));this.animationProgress=0;let C;this.mixTargetDelta=B=>{const G=B/1e3;wE(g.x,a.x,G),wE(g.y,a.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),S4(this.relativeTarget,this.relativeTargetOrigin,v,G),C&&r4(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=yt()),On(C,this.relativeTarget)),k&&(this.animationValues=m,Xz(m,f,this.latestValues,G,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{Jh.hasAnimatedSinceResize=!0,this.currentAnimation=h4(0,_E,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_E),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:m}=a;if(!(!u||!c||!f)){if(this!==a&&this.layout&&f&&n1(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||yt();const g=In(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const v=In(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+v}On(u,c),pa(u,m),wu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new s4),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<gE.length;m++){const g="rotate"+gE[m];c[g]&&(f[g]=c[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return d4;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Xh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Xh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!bs(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=mE(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:T,y:A}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${A.origin*100}% 0`,g.animationValues?f.opacity=g===this?(c=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const k in $d){if(v[k]===void 0)continue;const{correct:V,applyTo:b}=$d[k],x=f.transform==="none"?v[k]:V(v[k],g);if(b){const C=b.length;for(let B=0;B<C;B++)f[b[B]]=x}else f[k]=x}return this.options.layoutId&&(f.pointerEvents=g===this?Xh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(yE),this.root.sharedNodes.clear()}}}function p4(t){t.updateLayout()}function m4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Vn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=In(v);v.min=i[g].min,v.max=v.min+T}):n1(o,n.layoutBox,i)&&Vn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=In(i[g]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=fa();wu(u,i,n.layoutBox);const c=fa();a?wu(c,t.applyTransform(r,!0),n.measuredBox):wu(c,i,n.layoutBox);const f=!JC(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const A=yt();Tu(A,n.layoutBox,v.layoutBox);const k=yt();Tu(k,i,T.layoutBox),e1(A,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=A,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function g4(t){Ds.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function y4(t){t.clearSnapshot()}function yE(t){t.clearMeasurements()}function v4(t){t.isLayoutDirty=!1}function w4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function vE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function T4(t){t.resolveTargetDelta()}function E4(t){t.calcProjection()}function P4(t){t.resetRotation()}function I4(t){t.removeLeadSnapshot()}function wE(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function TE(t,e,n,i){t.min=tt(e.min,n.min,i),t.max=tt(e.max,n.max,i)}function S4(t,e,n,i){TE(t.x,e.x,n.x,i),TE(t.y,e.y,n.y,i)}function x4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const A4={duration:.45,ease:[.4,0,.1,1]},EE=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),PE=EE("applewebkit/")&&!EE("chrome/")?Math.round:dt;function IE(t){t.min=PE(t.min),t.max=PE(t.max)}function C4(t){IE(t.x),IE(t.y)}function n1(t,e,n){return t==="position"||t==="preserve-aspect"&&!bg(pE(e),pE(n),.2)}const R4=t1({attachResizeListener:(t,e)=>Ki(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nm={current:void 0},i1=t1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nm.current){const t=new R4({});t.mount(window),t.setOptions({layoutScroll:!0}),nm.current=t}return nm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),k4={pan:{Feature:qz},drag:{Feature:Hz,ProjectionNode:i1,MeasureLayout:QC}},L4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function b4(t){const e=L4.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Og(t,e,n=1){const[i,r]=b4(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return jC(a)?parseFloat(a):a}else return Sg(r)?Og(r,e,n+1):r}function D4(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!Sg(o))return;const a=Og(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!Sg(o))continue;const a=Og(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const M4=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),r1=t=>M4.has(t),N4=t=>Object.keys(t).some(r1),SE=t=>t===mo||t===fe,xE=(t,e)=>parseFloat(t.split(", ")[e]),AE=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return xE(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?xE(o[1],t):0}},O4=new Set(["x","y","z"]),V4=wc.filter(t=>!O4.has(t));function F4(t){const e=[];return V4.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ua={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:AE(4,13),y:AE(5,14)};Ua.translateX=Ua.x;Ua.translateY=Ua.y;const j4=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Ua[f](i,o)}),e.render();const c=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Ua[f](c,o)}),t},B4=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(r1);let o=[],a=!1;const u=[];if(r.forEach(c=>{const f=t.getValue(c);if(!t.hasValue(c))return;let m=n[c],g=Wl(m);const v=e[c];let T;if(Hd(v)){const A=v.length,k=v[0]===null?1:0;m=v[k],g=Wl(m);for(let V=k;V<A&&v[V]!==null;V++)T?tv(Wl(v[V])===T):T=Wl(v[V])}else T=Wl(v);if(g!==T)if(SE(g)&&SE(T)){const A=f.get();typeof A=="string"&&f.set(parseFloat(A)),typeof v=="string"?e[c]=parseFloat(v):Array.isArray(v)&&T===fe&&(e[c]=v.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||v===0)?m===0?f.set(T.transform(m)):e[c]=g.transform(v):(a||(o=F4(t),a=!0),u.push(c),i[c]=i[c]!==void 0?i[c]:e[c],f.jump(v))}),u.length){const c=u.indexOf("height")>=0?window.pageYOffset:null,f=j4(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),Bf&&c!==null&&window.scrollTo({top:c}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function U4(t,e,n,i){return N4(e)?B4(t,e,n,i):{target:e,transitionEnd:i}}const z4=(t,e,n,i)=>{const r=D4(t,e,i);return e=r.target,i=r.transitionEnd,U4(t,e,n,i)},Vg={current:null},s1={current:!1};function $4(){if(s1.current=!0,!!Bf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Vg.current=t.matches;t.addListener(e),e()}else Vg.current=!1}function W4(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(fn(o))t.addValue(r,o),Zd(i)&&i.add(r);else if(fn(a))t.addValue(r,Ba(o,{owner:t})),Zd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Ba(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const CE=new WeakMap,o1=Object.keys(Ju),H4=o1.length,RE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],q4=Gy.length;class G4{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ge.render(this.render,!1,!0);const{latestValues:u,renderState:c}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=zf(n),this.isVariantNode=WA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const v=m[g];u[g]!==void 0&&fn(v)&&(v.set(u[g],!1),Zd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,CE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),s1.current||$4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Vg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){CE.delete(this.current),this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=po.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ge.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let c=0;c<H4;c++){const f=o1[c],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=Ju[f];v&&(a=v),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:f,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=n;this.projection.setOptions({layoutId:c,layout:f,alwaysMeasureLayout:!!m||g&&ha(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<RE.length;i++){const r=RE[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=W4(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<q4;i++){const r=Gy[i],o=this.props[r];(Xu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ba(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=ev(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new cv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class a1 extends G4{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=cz(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){lz(this,i,a);const u=z4(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function K4(t){return window.getComputedStyle(t)}class Z4 extends a1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(po.has(n)){const i=sv(n);return i&&i.default||0}else{const i=K4(e),r=(ZA(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return KC(e,n)}build(e,n,i,r){Zy(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Jy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){tC(e,n,i,r)}}class Q4 extends a1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(po.has(n)){const i=sv(n);return i&&i.default||0}return n=nC.has(n)?n:Hy(n),e.getAttribute(n)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(e,n){return rC(e,n)}build(e,n,i,r){Yy(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){iC(e,n,i,r)}mount(e){this.isSVGTag=Xy(e.tagName),super.mount(e)}}const Y4=(t,e)=>Ky(t)?new Q4(e,{enableHardwareAcceleration:!1}):new Z4(e,{enableHardwareAcceleration:!0}),X4={layout:{ProjectionNode:i1,MeasureLayout:QC}},J4={...Sz,...HB,...k4,...X4},im=Jj((t,e)=>bB(t,e,J4,Y4));function l1(t,e){const n=U.useRef(e);U.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const e3=1;function t3(t){return Object.freeze({__version:e3,map:t})}function n3(t,e){return Object.freeze({...t,...e})}const u1=U.createContext(null),c1=u1.Provider;function hv(){const t=U.useContext(u1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function i3(t){function e(n,i){const{instance:r,context:o}=t(n).current;return U.useImperativeHandle(i,()=>r),n.children==null?null:Hs.createElement(c1,{value:o},n.children)}return U.forwardRef(e)}function r3(t){function e(n,i){const[r,o]=U.useState(!1),{instance:a}=t(n,o).current;U.useImperativeHandle(i,()=>a),U.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?$I.createPortal(n.children,u):null}return U.forwardRef(e)}function s3(t){function e(n,i){const{instance:r}=t(n).current;return U.useImperativeHandle(i,()=>r),null}return U.forwardRef(e)}function h1(t,e){const n=U.useRef();U.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function dv(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function o3(t,e){return function(i,r){const o=hv(),a=t(dv(i,o),o);return l1(o.map,i.attribution),h1(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Fg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})($1,function(n){var i="1.9.4";function r(s){var l,d,p,y;for(d=1,p=arguments.length;d<p;d++){y=arguments[d];for(l in y)s[l]=y[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function c(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,y,E,O;return O=function(){p=!1,y&&(E.apply(d,y),y=!1)},E=function(){p?y=arguments:(s.apply(d,arguments),setTimeout(O,l),p=!0)},E}function m(s,l,d){var p=l[1],y=l[0],E=p-y;return s===p&&d?s:((s-y)%E+E)%E+y}function g(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function A(s){return T(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function V(s,l,d){var p=[];for(var y in s)p.push(encodeURIComponent(d?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function x(s,l){return s.replace(b,function(d,p){var y=l[p];if(y===void 0)throw new Error("No value provided for variable "+d);return typeof y=="function"&&(y=y(l)),y})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function W(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var D=window.requestAnimationFrame||W("RequestAnimationFrame")||I,M=window.cancelAnimationFrame||W("CancelAnimationFrame")||W("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function F(s,l,d){if(d&&D===I)s.call(l);else return D.call(window,a(s,l))}function j(s){s&&M.call(window,s)}var N={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:c,throttle:f,wrapNum:m,falseFn:g,formatNum:v,trim:T,splitWords:A,setOptions:k,getParamString:V,template:x,isArray:C,indexOf:B,emptyImageUrl:G,requestFn:D,cancelFn:M,requestAnimFrame:F,cancelAnimFrame:j};function Te(){}Te.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return s.statics&&r(l,s.statics),s.includes&&(ze(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,O=p._initHooks.length;E<O;E++)p._initHooks[E].call(this)}},l},Te.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Te.mergeOptions=function(s){return r(this.prototype.options,s),this},Te.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ze(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Se={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=A(s);for(var y=0,E=s.length;y<E;y++)this._on(s[y],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=A(s);for(var y=arguments.length===1,E=0,O=s.length;E<O;E++)y?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var y={fn:l,ctx:d};p&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,l,d){var p,y,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,E=p.length;y<E;y++)p[y].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var O=this._listens(s,l,d);if(O!==!1){var $=p[O];this._firingCount&&($.fn=g,this._events[s]=p=p.slice()),p.splice(O,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var E=0,O=y.length;E<O;E++){var $=y[E],H=$.fn;$.once&&this.off(s,H,$.ctx),H.call($.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(p=!!l,y=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,y,d)!==!1)return!0;if(p){for(var O in this._eventParents)if(this._eventParents[O].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var y=0,E=p.length;y<E;y++)if(p[y].fn===l&&p[y].ctx===d)return y;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=A(s);for(var y=0,E=s.length;y<E;y++)this._on(s[y],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[c(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[c(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Se.addEventListener=Se.on,Se.removeEventListener=Se.clearAllEventListeners=Se.off,Se.addOneTimeEventListener=Se.once,Se.fireEvent=Se.fire,Se.hasEventListeners=Se.listens;var Ke=Te.extend(Se);function K(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ae=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new K(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new K(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof K?s:C(s)?new K(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new K(s.x,s.y):new K(s,l,d)}function te(s,l){if(s)for(var d=l?[s,l]:s,p=0,y=d.length;p<y;p++)this.extend(d[p])}te.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof K||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=pe(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof K?s=J(s):s=pe(s),s instanceof te?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=pe(s);var l=this.min,d=this.max,p=s.min,y=s.max,E=y.x>=l.x&&p.x<=d.x,O=y.y>=l.y&&p.y<=d.y;return E&&O},overlaps:function(s){s=pe(s);var l=this.min,d=this.max,p=s.min,y=s.max,E=y.x>l.x&&p.x<d.x,O=y.y>l.y&&p.y<d.y;return E&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,y=Math.abs(l.y-d.y)*s;return pe(J(l.x-p,l.y-y),J(d.x+p,d.y+y))},equals:function(s){return s?(s=pe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function pe(s,l){return!s||s instanceof te?s:new te(s,l)}function Pe(s,l){if(s)for(var d=l?[s,l]:s,p=0,y=d.length;p<y;p++)this.extend(d[p])}Pe.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,y;if(s instanceof Ee)p=s,y=s;else if(s instanceof Pe){if(p=s._southWest,y=s._northEast,!p||!y)return this}else return s?this.extend(ce(s)||De(s)):this;return!l&&!d?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(y.lat,y.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(y.lat,d.lat),d.lng=Math.max(y.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,y=Math.abs(l.lng-d.lng)*s;return new Pe(new Ee(l.lat-p,l.lng-y),new Ee(d.lat+p,d.lng+y))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=ce(s):s=De(s);var l=this._southWest,d=this._northEast,p,y;return s instanceof Pe?(p=s.getSouthWest(),y=s.getNorthEast()):p=y=s,p.lat>=l.lat&&y.lat<=d.lat&&p.lng>=l.lng&&y.lng<=d.lng},intersects:function(s){s=De(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),E=y.lat>=l.lat&&p.lat<=d.lat,O=y.lng>=l.lng&&p.lng<=d.lng;return E&&O},overlaps:function(s){s=De(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),E=y.lat>l.lat&&p.lat<d.lat,O=y.lng>l.lng&&p.lng<d.lng;return E&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=De(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(s,l){return s instanceof Pe?s:new Pe(s,l)}function Ee(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(s,l){if(!s)return!1;s=ce(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return An.distance(this,ce(s))},wrap:function(){return An.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return De([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function ce(s,l,d){return s instanceof Ee?s:C(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ee(s,l,d)}var st={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),y=this.transformation.transform(l.max,d);return new te(p,y)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ee(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,y=l.lng-d.lng;if(p===0&&y===0)return s;var E=s.getSouthWest(),O=s.getNorthEast(),$=new Ee(E.lat-p,E.lng-y),H=new Ee(O.lat-p,O.lng-y);return new Pe($,H)}},An=r({},st,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,y=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),O=Math.sin((l.lng-s.lng)*d/2),$=E*E+Math.cos(p)*Math.cos(y)*O*O,H=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*H}}),hr=6378137,pn={R:hr,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),y=Math.sin(p*l);return new K(this.R*s.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=hr*Math.PI;return new te([-s,-s],[s,s])}()};function Ft(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Ft.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new K((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function hi(s,l,d,p){return new Ft(s,l,d,p)}var ps=r({},An,{code:"EPSG:3857",projection:pn,transformation:function(){var s=.5/(Math.PI*pn.R);return hi(s,.5,-s,.5)}()}),Ja=r({},ps,{code:"EPSG:900913"});function go(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function el(s,l){var d="",p,y,E,O,$,H;for(p=0,E=s.length;p<E;p++){for($=s[p],y=0,O=$.length;y<O;y++)H=$[y],d+=(y?"L":"M")+H.x+" "+H.y;d+=l?oe.svg?"z":"x":""}return d||"M0 0"}var tl=document.documentElement.style,_o="ActiveXObject"in window,Ic=_o&&!document.addEventListener,yo="msLaunchUri"in navigator&&!("documentMode"in document),vo=Cn("webkit"),Sc=Cn("android"),wo=Cn("android 2")||Cn("android 3"),nl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xc=Sc&&Cn("Google")&&nl<537&&!("AudioNode"in window),pt=!!window.opera,It=!yo&&Cn("chrome"),ms=Cn("gecko")&&!vo&&!pt&&!_o,Ac=!It&&Cn("safari"),il=Cn("phantom"),Cc="OTransition"in tl,gs=navigator.platform.indexOf("Win")===0,rl=_o&&"transition"in tl,To="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wo,Eo="MozPerspective"in tl,Kf=!window.L_DISABLE_3D&&(rl||To||Eo)&&!Cc&&!il,_s=typeof orientation<"u"||Cn("mobile"),sl=_s&&vo,Rc=_s&&To,ol=!window.PointerEvent&&window.MSPointerEvent,dr=!!(window.PointerEvent||ol),Po="ontouchstart"in window||!!window.TouchEvent,al=!window.L_NO_TOUCH&&(Po||dr),ki=_s&&pt,kc=_s&&ms,Io=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lc=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),ys=function(){return!!document.createElement("canvas").getContext}(),So=!!(document.createElementNS&&go("svg").createSVGRect),kt=!!So&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),bc=!So&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),vs=navigator.platform.indexOf("Mac")===0,ws=navigator.platform.indexOf("Linux")===0;function Cn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var oe={ie:_o,ielt9:Ic,edge:yo,webkit:vo,android:Sc,android23:wo,androidStock:xc,opera:pt,chrome:It,gecko:ms,safari:Ac,phantom:il,opera12:Cc,win:gs,ie3d:rl,webkit3d:To,gecko3d:Eo,any3d:Kf,mobile:_s,mobileWebkit:sl,mobileWebkit3d:Rc,msPointer:ol,pointer:dr,touch:al,touchNative:Po,mobileOpera:ki,mobileGecko:kc,retina:Io,passiveEvents:Lc,canvas:ys,svg:So,vml:bc,inlineSvg:kt,mac:vs,linux:ws},Li=oe.msPointer?"MSPointerDown":"pointerdown",Dc=oe.msPointer?"MSPointerMove":"pointermove",Mc=oe.msPointer?"MSPointerUp":"pointerup",Ts=oe.msPointer?"MSPointerCancel":"pointercancel",xo={touchstart:Li,touchmove:Dc,touchend:Mc,touchcancel:Ts},Ao={touchstart:Ro,touchmove:Co,touchend:Co,touchcancel:Co},Gn={},Kn=!1;function Nc(s,l,d){return l==="touchstart"&&Vc(),Ao[l]?(d=Ao[l].bind(this,d),s.addEventListener(xo[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Oc(s,l,d){if(!xo[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(xo[l],d,!1)}function ll(s){Gn[s.pointerId]=s}function ul(s){Gn[s.pointerId]&&(Gn[s.pointerId]=s)}function cl(s){delete Gn[s.pointerId]}function Vc(){Kn||(document.addEventListener(Li,ll,!0),document.addEventListener(Dc,ul,!0),document.addEventListener(Mc,cl,!0),document.addEventListener(Ts,cl,!0),Kn=!0)}function Co(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Gn)l.touches.push(Gn[d]);l.changedTouches=[l],s(l)}}function Ro(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Xe(l),Co(s,l)}function Fc(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var hl=200;function Es(s,l){s.addEventListener("dblclick",l);var d=0,p;function y(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var O=Pl(E);if(!(O.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!O.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var $=Date.now();$-d<=hl?(p++,p===2&&l(Fc(E))):p=1,d=$}}}return s.addEventListener("click",y),{dblclick:l,simDblclick:y}}function bi(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ps=Mi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Is=Mi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),dl=Is==="webkitTransition"||Is==="OTransition"?Is+"End":"transitionend";function fl(s){return typeof s=="string"?document.getElementById(s):s}function fr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ce(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Ue(s){var l=s.parentNode;l&&l.removeChild(s)}function Ss(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Di(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function pr(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function pl(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=Rn(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function we(s,l){if(s.classList!==void 0)for(var d=A(l),p=0,y=d.length;p<y;p++)s.classList.add(d[p]);else if(!pl(s,l)){var E=Rn(s);ml(s,(E?E+" ":"")+l)}}function Ze(s,l){s.classList!==void 0?s.classList.remove(l):ml(s,T((" "+Rn(s)+" ").replace(" "+l+" "," ")))}function ml(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Rn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function ot(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&ko(s,l)}function ko(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Mi(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function di(s,l,d){var p=l||new K(0,0);s.style[Ps]=(oe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function ge(s,l){s._leaflet_pos=l,oe.any3d?di(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function kn(s){return s._leaflet_pos||new K(0,0)}var Zn,Qn,gl;if("onselectstart"in document)Zn=function(){he(window,"selectstart",Xe)},Qn=function(){je(window,"selectstart",Xe)};else{var mr=Mi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zn=function(){if(mr){var s=document.documentElement.style;gl=s[mr],s[mr]="none"}},Qn=function(){mr&&(document.documentElement.style[mr]=gl,gl=void 0)}}function _l(){he(window,"dragstart",Xe)}function yl(){je(window,"dragstart",Xe)}var Lo,vl;function Ni(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(mn(),Lo=s,vl=s.style.outlineStyle,s.style.outlineStyle="none",he(window,"keydown",mn))}function mn(){Lo&&(Lo.style.outlineStyle=vl,Lo=void 0,vl=void 0,je(window,"keydown",mn))}function wl(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function bo(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var jc={__proto__:null,TRANSFORM:Ps,TRANSITION:Is,TRANSITION_END:dl,get:fl,getStyle:fr,create:Ce,remove:Ue,empty:Ss,toFront:Di,toBack:pr,hasClass:pl,addClass:we,removeClass:Ze,setClass:ml,getClass:Rn,setOpacity:ot,testProp:Mi,setTransform:di,setPosition:ge,getPosition:kn,get disableTextSelection(){return Zn},get enableTextSelection(){return Qn},disableImageDrag:_l,enableImageDrag:yl,preventOutline:Ni,restoreOutline:mn,getSizedParentNode:wl,getScale:bo};function he(s,l,d,p){if(l&&typeof l=="object")for(var y in l)Tl(s,y,l[y],d);else{l=A(l);for(var E=0,O=l.length;E<O;E++)Tl(s,l[E],d,p)}return this}var Ln="_leaflet_events";function je(s,l,d,p){if(arguments.length===1)Bc(s),delete s[Ln];else if(l&&typeof l=="object")for(var y in l)El(s,y,l[y],d);else if(l=A(l),arguments.length===2)Bc(s,function($){return B(l,$)!==-1});else for(var E=0,O=l.length;E<O;E++)El(s,l[E],d,p);return this}function Bc(s,l){for(var d in s[Ln]){var p=d.split(/\d/)[0];(!l||l(p))&&El(s,p,null,null,d)}}var bn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Tl(s,l,d,p){var y=l+c(d)+(p?"_"+c(p):"");if(s[Ln]&&s[Ln][y])return this;var E=function($){return d.call(p||s,$||window.event)},O=E;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?E=Nc(s,l,E):oe.touch&&l==="dblclick"?E=Es(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(bn[l]||l,E,oe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function($){$=$||window.event,Il(s,$)&&O($)},s.addEventListener(bn[l],E,!1)):s.addEventListener(l,O,!1):s.attachEvent("on"+l,E),s[Ln]=s[Ln]||{},s[Ln][y]=E}function El(s,l,d,p,y){y=y||l+c(d)+(p?"_"+c(p):"");var E=s[Ln]&&s[Ln][y];if(!E)return this;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?Oc(s,l,E):oe.touch&&l==="dblclick"?bi(s,E):"removeEventListener"in s?s.removeEventListener(bn[l]||l,E,!1):s.detachEvent("on"+l,E),s[Ln][y]=null}function Dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function gr(s){return Tl(s,"wheel",Dn),this}function _r(s){return he(s,"mousedown touchstart dblclick contextmenu",Dn),s._leaflet_disable_click=!0,this}function Xe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function gn(s){return Xe(s),Dn(s),this}function Pl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Do(s,l){if(!l)return new K(s.clientX,s.clientY);var d=bo(l),p=d.boundingClientRect;return new K((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var Qe=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Uc(s){return oe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Qe:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Il(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var zc={__proto__:null,on:he,off:je,stopPropagation:Dn,disableScrollPropagation:gr,disableClickPropagation:_r,preventDefault:Xe,stop:gn,getPropagationPath:Pl,getMousePosition:Do,getWheelDelta:Uc,isExternalTarget:Il,addListener:he,removeListener:je},Sl=Ke.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=kn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),ge(this._el,d),this.fire("step")},_complete:function(){j(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),xe=Ke.extend({options:{crs:ps,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Is&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,dl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ce(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),y=this.getSize().divideBy(2),E=s instanceof K?s:this.latLngToContainerPoint(s),O=E.subtract(y).multiplyBy(1-1/p),$=this.containerPointToLatLng(y.add(O));return this.setView($,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():De(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(s,!1,d.add(p));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var E=p.subtract(d).divideBy(2),O=this.project(s.getSouthWest(),y),$=this.project(s.getNorthEast(),y),H=this.unproject(O.add($).divideBy(2).add(E),y);return{center:H,zoom:y}},fitBounds:function(s,l){if(s=De(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Sl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!oe.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),y=this.project(s),E=this.getSize(),O=this._zoom;s=ce(s),l=l===void 0?O:l;var $=Math.max(E.x,E.y),H=$*this.getZoomScale(O,l),Q=y.distanceTo(p)||1,ne=1.42,de=ne*ne;function Ie(gt){var rh=gt?-1:1,F1=gt?H:$,j1=H*H-$*$+rh*de*de*Q*Q,B1=2*F1*de*Q,tp=j1/B1,Fv=Math.sqrt(tp*tp+1)-tp,U1=Fv<1e-9?-18:Math.log(Fv);return U1}function Zt(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function xt(gt){return(Math.exp(gt)+Math.exp(-gt))/2}function Nn(gt){return Zt(gt)/xt(gt)}var sn=Ie(0);function qo(gt){return $*(xt(sn)/xt(sn+ne*gt))}function M1(gt){return $*(xt(sn)*Nn(sn+ne*gt)-Zt(sn))/de}function N1(gt){return 1-Math.pow(1-gt,1.5)}var O1=Date.now(),Ov=(Ie(1)-sn)/ne,V1=d.duration?1e3*d.duration:1e3*Ov*.8;function Vv(){var gt=(Date.now()-O1)/V1,rh=N1(gt)*Ov;gt<=1?(this._flyToFrame=F(Vv,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(M1(rh)/Q)),O),this.getScaleZoom($/qo(rh),O),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Vv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=De(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,De(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),E=this.project(s),O=this.getPixelBounds(),$=pe([O.min.add(d),O.max.subtract(p)]),H=$.getSize();if(!$.contains(E)){this._enforcingBounds=!0;var Q=E.subtract($.getCenter()),ne=$.extend(E).getSize().subtract(H);y.x+=Q.x<0?-ne.x:ne.x,y.y+=Q.y<0?-ne.y:ne.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),y=d.divideBy(2).round(),E=p.subtract(y);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ee(l,d),y=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var O=this.getBoundsZoom(y);this.setView(p,E.maxZoom?Math.min(O,E.maxZoom):O)}var $={latlng:p,bounds:y,timestamp:s.timestamp};for(var H in s.coords)typeof s.coords[H]=="number"&&($[H]=s.coords[H]);this.fire("locationfound",$)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(j(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ue(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ce("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Pe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=De(s),d=J(d||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),E=this.getMaxZoom(),O=s.getNorthWest(),$=s.getSouthEast(),H=this.getSize().subtract(d),Q=pe(this.project($,p),this.project(O,p)).getSize(),ne=oe.any3d?this.options.zoomSnap:1,de=H.x/Q.x,Ie=H.y/Q.y,Zt=l?Math.max(de,Ie):Math.min(de,Ie);return p=this.getScaleZoom(Zt,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(y,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ce(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(De(s))},distance:function(s,l){return this.options.crs.distance(ce(s),ce(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return Do(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=fl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");he(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,we(s,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=fr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ge(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(s.markerPane,"leaflet-zoom-hide"),we(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){ge(this._mapPane,new K(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,d)._move(s,l)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((y||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return j(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ge(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[c(this._container)]=this;var l=s?je:he;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){j(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,y=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,O=!1;E;){if(p=this._targets[c(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){O=!0;break}if(p&&p.listens(l,!0)&&(y&&!Il(E,s)||(d.push(p),y))||E===this._container)break;E=E.parentNode}return!d.length&&!O&&!y&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Ni(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var y=this._findEventTargets(s,l);if(d){for(var E=[],O=0;O<d.length;O++)d[O].listens(l,!0)&&E.push(d[O]);y=E.concat(y)}if(y.length){l==="contextmenu"&&Xe(s);var $=y[0],H={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=$.getLatLng&&(!$._radius||$._radius<=10);H.containerPoint=Q?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(s),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=Q?$.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(O=0;O<y.length;O++)if(y[O].fire(l,H,!0),H.originalEvent._stopped||y[O].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return kn(this._mapPane)||new K(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return pe([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),y=this.getSize().divideBy(2),E=new te(p.subtract(y),p.add(y)),O=this._getBoundsOffset(E,d,l);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?s:this.unproject(p.add(O),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new te(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=pe(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),y=p.min.subtract(s.min),E=p.max.subtract(s.max),O=this._rebound(y.x,-E.x),$=this._rebound(y.y,-E.y);return new K(O,$)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=oe.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Ps,p=this._proxy.style[d];di(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();di(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),y=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(y)?!1:(F(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mo(s,l){return new xe(s,l)}var rn=Te.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return we(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Kt=function(s){return new rn(s)};xe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ce("div",l+"control-container",this._container);function p(y,E){var O=l+y+" "+l+E;s[y+E]=Ce("div",O,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ue(this._controlCorners[s]);Ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var xl=rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return rn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ce("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),_r(l),gr(l);var p=this._section=Ce("section",s+"-list");d&&(this._map.on("click",this.collapse,this),he(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Ce("a",s+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),he(y,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Xe(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ce("div",s+"-base",p),this._separator=Ce("div",s+"-separator",p),this._overlaysList=Ce("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ss(this._baseLayersList),Ss(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,y=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(c(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(p),p.layerId=c(s.layer),he(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(y);var O=s.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],y=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||y.push(d);for(E=0;E<y.length;E++)this._map.hasLayer(y[E])&&this._map.removeLayer(y[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),y=s.length-1;y>=0;y--)l=s[y],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,he(s,"click",Xe),this.expand();var l=this;setTimeout(function(){je(s,"click",Xe),l._preventClick=!1})}}),Zf=function(s,l,d){return new xl(s,l,d)},Oi=rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ce("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,y){var E=Ce("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),_r(E),he(E,"click",gn),he(E,"click",y,this),he(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ze(this._zoomInButton,l),Ze(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(we(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(we(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});xe.mergeOptions({zoomControl:!0}),xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var $c=function(s){return new Oi(s)},No=rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ce("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ce("div",l,d)),s.imperial&&(this._iScale=Ce("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,y;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Oo=function(s){return new No(s)},Wc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',yr=rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?Wc+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ce("div","leaflet-control-attribution"),_r(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});xe.mergeOptions({attributionControl:!0}),xe.addInitHook(function(){this.options.attributionControl&&new yr().addTo(this)});var Qf=function(s){return new yr(s)};rn.Layers=xl,rn.Zoom=Oi,rn.Scale=No,rn.Attribution=yr,Kt.layers=Zf,Kt.zoom=$c,Kt.scale=Oo,Kt.attribution=Qf;var _n=Te.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(s,l){return s.addHandler(l,this),this};var xs={Events:Se},Al=oe.touch?"touchstart mousedown":"mousedown",Yn=Ke.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){k(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(he(this._dragStartTarget,Al,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yn._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,Al,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!pl(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Yn._dragging===this&&this.finishDrag();return}if(!(Yn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Yn._dragging=this,this._preventOutline&&Ni(this._element),_l(),Zn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=wl(this._element);this._startPoint=new K(l.clientX,l.clientY),this._startPos=kn(this._element),this._parentScale=bo(d);var p=s.type==="mousedown";he(document,p?"mousemove":"touchmove",this._onMove,this),he(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new K(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Xe(s),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ge(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),yl(),Qn();var l=this._moved&&this._moving;this._moving=!1,Yn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Vo(s,l,d){var p,y=[1,4,2,8],E,O,$,H,Q,ne,de,Ie;for(E=0,ne=s.length;E<ne;E++)s[E]._code=fi(s[E],l);for($=0;$<4;$++){for(de=y[$],p=[],E=0,ne=s.length,O=ne-1;E<ne;O=E++)H=s[E],Q=s[O],H._code&de?Q._code&de||(Ie=St(Q,H,de,l,d),Ie._code=fi(Ie,l),p.push(Ie)):(Q._code&de&&(Ie=St(Q,H,de,l,d),Ie._code=fi(Ie,l),p.push(Ie)),p.push(H));s=p}return s}function Fo(s,l){var d,p,y,E,O,$,H,Q,ne;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var de=ce([0,0]),Ie=De(s),Zt=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Zt<1700&&(de=jo(s));var xt=s.length,Nn=[];for(d=0;d<xt;d++){var sn=ce(s[d]);Nn.push(l.project(ce([sn.lat-de.lat,sn.lng-de.lng])))}for($=H=Q=0,d=0,p=xt-1;d<xt;p=d++)y=Nn[d],E=Nn[p],O=y.y*E.x-E.y*y.x,H+=(y.x+E.x)*O,Q+=(y.y+E.y)*O,$+=O*3;$===0?ne=Nn[0]:ne=[H/$,Q/$];var qo=l.unproject(J(ne));return ce([qo.lat+de.lat,qo.lng+de.lng])}function jo(s){for(var l=0,d=0,p=0,y=0;y<s.length;y++){var E=ce(s[y]);l+=E.lat,d+=E.lng,p++}return ce([l/p,d/p])}var Bo={__proto__:null,clipPolygon:Vo,polygonCenter:Fo,centroid:jo};function Cl(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=qc(s,d),s=Hc(s,d),s}function Rl(s,l,d){return Math.sqrt(Mn(s,l,d,!0))}function Vi(s,l,d){return Mn(s,l,d)}function Hc(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(d);y[0]=y[d-1]=1,Uo(s,y,l,0,d-1);var E,O=[];for(E=0;E<d;E++)y[E]&&O.push(s[E]);return O}function Uo(s,l,d,p,y){var E=0,O,$,H;for($=p+1;$<=y-1;$++)H=Mn(s[$],s[p],s[y],!0),H>E&&(O=$,E=H);E>d&&(l[O]=1,Uo(s,l,d,p,O),Uo(s,l,d,O,y))}function qc(s,l){for(var d=[s[0]],p=1,y=0,E=s.length;p<E;p++)Gc(s[p],s[y])>l&&(d.push(s[p]),y=p);return y<E-1&&d.push(s[E-1]),d}var kl;function As(s,l,d,p,y){var E=p?kl:fi(s,d),O=fi(l,d),$,H,Q;for(kl=O;;){if(!(E|O))return[s,l];if(E&O)return!1;$=E||O,H=St(s,l,$,d,y),Q=fi(H,d),$===E?(s=H,E=Q):(l=H,O=Q)}}function St(s,l,d,p,y){var E=l.x-s.x,O=l.y-s.y,$=p.min,H=p.max,Q,ne;return d&8?(Q=s.x+E*(H.y-s.y)/O,ne=H.y):d&4?(Q=s.x+E*($.y-s.y)/O,ne=$.y):d&2?(Q=H.x,ne=s.y+O*(H.x-s.x)/E):d&1&&(Q=$.x,ne=s.y+O*($.x-s.x)/E),new K(Q,ne,y)}function fi(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function Gc(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Mn(s,l,d,p){var y=l.x,E=l.y,O=d.x-y,$=d.y-E,H=O*O+$*$,Q;return H>0&&(Q=((s.x-y)*O+(s.y-E)*$)/H,Q>1?(y=d.x,E=d.y):Q>0&&(y+=O*Q,E+=$*Q)),O=s.x-y,$=s.y-E,p?O*O+$*$:new K(y,E)}function h(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function _(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(s)}function w(s,l){var d,p,y,E,O,$,H,Q;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ce([0,0]),de=De(s),Ie=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Ie<1700&&(ne=jo(s));var Zt=s.length,xt=[];for(d=0;d<Zt;d++){var Nn=ce(s[d]);xt.push(l.project(ce([Nn.lat-ne.lat,Nn.lng-ne.lng])))}for(d=0,p=0;d<Zt-1;d++)p+=xt[d].distanceTo(xt[d+1])/2;if(p===0)Q=xt[0];else for(d=0,E=0;d<Zt-1;d++)if(O=xt[d],$=xt[d+1],y=O.distanceTo($),E+=y,E>p){H=(E-p)/y,Q=[$.x-H*($.x-O.x),$.y-H*($.y-O.y)];break}var sn=l.unproject(J(Q));return ce([sn.lat+ne.lat,sn.lng+ne.lng])}var S={__proto__:null,simplify:Cl,pointToSegmentDistance:Rl,closestPointOnSegment:Vi,clipSegment:As,_getEdgeIntersection:St,_getBitCode:fi,_sqClosestPointOnSegment:Mn,isFlat:h,_flat:_,polylineCenter:w},z={project:function(s){return new K(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new te([-180,-90],[180,90])},q={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,y=this.R_MINOR/d,E=Math.sqrt(1-y*y),O=E*Math.sin(p),$=Math.tan(Math.PI/4-p/2)/Math.pow((1-O)/(1+O),E/2);return p=-d*Math.log(Math.max($,1e-10)),new K(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,y=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),O=Math.PI/2-2*Math.atan(E),$=0,H=.1,Q;$<15&&Math.abs(H)>1e-7;$++)Q=y*Math.sin(O),Q=Math.pow((1-Q)/(1+Q),y/2),H=Math.PI/2-2*Math.atan(E*Q)-O,O+=H;return new Ee(O*l,s.x*l/d)}},ee={__proto__:null,LonLat:z,Mercator:q,SphericalMercator:pn},Oe=r({},An,{code:"EPSG:3395",projection:q,transformation:function(){var s=.5/(Math.PI*q.R);return hi(s,.5,-s,.5)}()}),mt=r({},An,{code:"EPSG:4326",projection:z,transformation:hi(1/180,1,-1/180,.5)}),Le=r({},st,{projection:z,transformation:hi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});st.Earth=An,st.EPSG3395=Oe,st.EPSG3857=ps,st.EPSG900913=Ja,st.EPSG4326=mt,st.Simple=Le;var Be=Ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[c(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[c(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});xe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=c(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return c(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[c(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=c(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Je=Be.extend({initialize:function(s,l){k(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return c(s)}}),vr=function(s,l){return new Je(s,l)},ut=Je.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Je.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Je.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),zo=function(s,l){return new ut(s,l)},pi=Te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var y=J(p),E=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return oe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function m1(s){return new pi(s)}var Ll=pi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ll.imagePath!="string"&&(Ll.imagePath=this._detectIconPath()),(this.options.imagePath||Ll.imagePath)+pi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,y){var E=p.exec(d);return E&&E[y]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ce("div","leaflet-default-icon-path",document.body),l=fr(s,"background-image")||fr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),_v=_n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Yn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,E=kn(l._icon),O=d.getPixelBounds(),$=d.getPixelOrigin(),H=pe(O.min._subtract($).add(y),O.max._subtract($).subtract(y));if(!H.contains(E)){var Q=J((Math.max(H.max.x,E.x)-H.max.x)/(O.max.x-H.max.x)-(Math.min(H.min.x,E.x)-H.min.x)/(O.min.x-H.min.x),(Math.max(H.max.y,E.y)-H.max.y)/(O.max.y-H.max.y)-(Math.min(H.min.y,E.y)-H.min.y)/(O.min.y-H.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),ge(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=F(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(j(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=kn(l._icon),y=l._map.layerPointToLatLng(p);d&&ge(d,p),l._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){j(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Kc=Be.extend({options:{icon:new Ll,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),we(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(d,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),E=!1;y!==this._shadow&&(this._removeShadow(),E=!0),y&&(we(y,l),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),Ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ue(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ge(this._icon,s),this._shadow&&ge(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_v)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _v(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&ot(this._icon,s),this._shadow&&ot(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function g1(s,l){return new Kc(s,l)}var wr=Be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zc=wr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return wr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new te(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _1(s,l){return new Zc(s,l)}var Yf=Zc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:wr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===An.distance){var y=Math.PI/180,E=this._mRadius/An.R/y,O=d.project([l+E,s]),$=d.project([l-E,s]),H=O.add($).divideBy(2),Q=d.unproject(H).lat,ne=Math.acos((Math.cos(E*y)-Math.sin(l*y)*Math.sin(Q*y))/(Math.cos(l*y)*Math.cos(Q*y)))/y;(isNaN(ne)||ne===0)&&(ne=E/Math.cos(Math.PI/180*l)),this._point=H.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:H.x-d.project([Q,s-ne]).x,this._radiusY=H.y-O.y}else{var de=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(de).x}this._updateBounds()}});function y1(s,l,d){return new Yf(s,l,d)}var Fi=wr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Mn,y,E,O=0,$=this._parts.length;O<$;O++)for(var H=this._parts[O],Q=1,ne=H.length;Q<ne;Q++){y=H[Q-1],E=H[Q];var de=p(s,y,E,!0);de<l&&(l=de,d=p(s,y,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ce(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=h(s),p=0,y=s.length;p<y;p++)d?(l[p]=ce(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new K(s,s);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ee,y=s.length,E,O;if(p){for(O=[],E=0;E<y;E++)O[E]=this._map.latLngToLayerPoint(s[E]),d.extend(O[E]);l.push(O)}else for(E=0;E<y;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,y,E,O,$,H;for(d=0,y=0,E=this._rings.length;d<E;d++)for(H=this._rings[d],p=0,O=H.length;p<O-1;p++)$=As(H[p],H[p+1],s,p,!0),$&&(l[y]=l[y]||[],l[y].push($[0]),($[1]!==H[p+1]||p===O-2)&&(l[y].push($[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Cl(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,y,E,O,$,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for($=this._parts[d],p=0,O=$.length,y=O-1;p<O;y=p++)if(!(!l&&p===0)&&Rl(s,$[y],$[p])<=H)return!0;return!1}});function v1(s,l){return new Fi(s,l)}Fi._flat=_;var $o=Fi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Fi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Fi.prototype._setLatLngs.call(this,s),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new K(l,l);if(s=new te(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,E;p<y;p++)E=Vo(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,y,E,O,$,H,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,H=this._parts.length;E<H;E++)for(d=this._parts[E],O=0,Q=d.length,$=Q-1;O<Q;$=O++)p=d[O],y=d[$],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(l=!l);return l||Fi.prototype._containsPoint.call(this,s,!0)}});function w1(s,l){return new $o(s,l)}var ji=ut.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,y;if(l){for(d=0,p=l.length;d<p;d++)y=l[d],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var O=Qc(s,E);return O?(O.feature=Jc(s),O.defaultOptions=O.options,this.resetStyle(O),E.onEachFeature&&E.onEachFeature(s,O),this.addLayer(O)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Qc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,y=[],E=l&&l.pointToLayer,O=l&&l.coordsToLatLng||Xf,$,H,Q,ne;if(!p&&!d)return null;switch(d.type){case"Point":return $=O(p),yv(E,s,$,l);case"MultiPoint":for(Q=0,ne=p.length;Q<ne;Q++)$=O(p[Q]),y.push(yv(E,s,$,l));return new ut(y);case"LineString":case"MultiLineString":return H=Yc(p,d.type==="LineString"?0:1,O),new Fi(H,l);case"Polygon":case"MultiPolygon":return H=Yc(p,d.type==="Polygon"?1:2,O),new $o(H,l);case"GeometryCollection":for(Q=0,ne=d.geometries.length;Q<ne;Q++){var de=Qc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);de&&y.push(de)}return new ut(y);case"FeatureCollection":for(Q=0,ne=d.features.length;Q<ne;Q++){var Ie=Qc(d.features[Q],l);Ie&&y.push(Ie)}return new ut(y);default:throw new Error("Invalid GeoJSON object.")}}function yv(s,l,d,p){return s?s(l,d):new Kc(d,p&&p.markersInheritOptions&&p)}function Xf(s){return new Ee(s[1],s[0],s[2])}function Yc(s,l,d){for(var p=[],y=0,E=s.length,O;y<E;y++)O=l?Yc(s[y],l-1,d):(d||Xf)(s[y]),p.push(O);return p}function Jf(s,l){return s=ce(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Xc(s,l,d,p){for(var y=[],E=0,O=s.length;E<O;E++)y.push(l?Xc(s[E],h(s[E])?0:l-1,d,p):Jf(s[E],p));return!l&&d&&y.length>0&&y.push(y[0].slice()),y}function Wo(s,l){return s.feature?r({},s.feature,{geometry:l}):Jc(l)}function Jc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var ep={toGeoJSON:function(s){return Wo(this,{type:"Point",coordinates:Jf(this.getLatLng(),s)})}};Kc.include(ep),Yf.include(ep),Zc.include(ep),Fi.include({toGeoJSON:function(s){var l=!h(this._latlngs),d=Xc(this._latlngs,l?1:0,!1,s);return Wo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),$o.include({toGeoJSON:function(s){var l=!h(this._latlngs),d=l&&!h(this._latlngs[0]),p=Xc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Wo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Je.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Wo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var E=y.toGeoJSON(s);if(d)p.push(E.geometry);else{var O=Jc(E);O.type==="FeatureCollection"?p.push.apply(p,O.features):p.push(O)}}}),d?Wo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function vv(s,l){return new ji(s,l)}var T1=vv,eh=Be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=De(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Di(this._image),this},bringToBack:function(){return this._map&&pr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=De(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ce("img");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;di(this._image,d,l)},_reset:function(){var s=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ge(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),E1=function(s,l,d){return new eh(s,l,d)},wv=eh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ce("video");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],y=0;y<d.length;y++)p.push(d[y].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var O=Ce("source");O.src=this._url[E],l.appendChild(O)}}});function P1(s,l,d){return new wv(s,l,d)}var Tv=eh.extend({_initImage:function(){var s=this._image=this._url;we(s,"leaflet-image-layer"),this._zoomAnimated&&we(s,"leaflet-zoom-animated"),this.options.className&&we(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function I1(s,l,d){return new Tv(s,l,d)}var mi=Be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ee||C(s))?(this._latlng=ce(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&ot(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(ot(this._container,0),this._removeTimeout=setTimeout(a(Ue,void 0,this._container),200)):Ue(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Di(this._container),this},bringToBack:function(){return this._map&&pr(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof ut){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?ge(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});xe.include({_initOverlay:function(s,l,d,p){var y=l;return y instanceof s||(y=new s(p).setContent(l)),d&&y.setLatLng(d),y}}),Be.include({_initOverlay:function(s,l,d,p){var y=d;return y instanceof s?(k(y,p),y._source=this):(y=l&&!p?l:new s(p,this),y.setContent(d)),y}});var th=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mi.prototype.openOn.call(this,s)},onAdd:function(s){mi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof wr||this._source.on("preclick",Dn))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof wr||this._source.off("preclick",Dn))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ce("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ce("div",s+"-content-wrapper",l);if(this._contentNode=Ce("div",s+"-content",d),_r(l),gr(this._contentNode),he(l,"contextmenu",Dn),this._tipContainer=Ce("div",s+"-tip-container",l),this._tip=Ce("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ce("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',he(p,"click",function(y){Xe(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,y=this.options.maxHeight,E="leaflet-popup-scrolled";y&&p>y?(l.height=y+"px",we(s,E)):Ze(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ge(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(fr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,y=new K(this._containerLeft,-d-this._containerBottom);y._add(kn(this._container));var E=s.layerPointToContainerPoint(y),O=J(this.options.autoPanPadding),$=J(this.options.autoPanPaddingTopLeft||O),H=J(this.options.autoPanPaddingBottomRight||O),Q=s.getSize(),ne=0,de=0;E.x+p+H.x>Q.x&&(ne=E.x+p-Q.x+H.x),E.x-ne-$.x<0&&(ne=E.x-$.x),E.y+d+H.y>Q.y&&(de=E.y+d-Q.y+H.y),E.y-de-$.y<0&&(de=E.y-$.y),(ne||de)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,de]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),S1=function(s,l){return new th(s,l)};xe.mergeOptions({closePopupOnClick:!0}),xe.include({openPopup:function(s,l,d){return this._initOverlay(th,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Be.include({bindPopup:function(s,l){return this._popup=this._initOverlay(th,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof ut||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){gn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof wr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var nh=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ce("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,y=this._container,E=p.latLngToContainerPoint(p.getCenter()),O=p.layerPointToContainerPoint(s),$=this.options.direction,H=y.offsetWidth,Q=y.offsetHeight,ne=J(this.options.offset),de=this._getAnchor();$==="top"?(l=H/2,d=Q):$==="bottom"?(l=H/2,d=0):$==="center"?(l=H/2,d=Q/2):$==="right"?(l=0,d=Q/2):$==="left"?(l=H,d=Q/2):O.x<E.x?($="right",l=0,d=Q/2):($="left",l=H+(ne.x+de.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ne).add(de),Ze(y,"leaflet-tooltip-right"),Ze(y,"leaflet-tooltip-left"),Ze(y,"leaflet-tooltip-top"),Ze(y,"leaflet-tooltip-bottom"),we(y,"leaflet-tooltip-"+$),ge(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&ot(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),x1=function(s,l){return new nh(s,l)};xe.include({openTooltip:function(s,l,d){return this._initOverlay(nh,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Be.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(nh,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof ut||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(he(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),he(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Ev=pi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Ss(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function A1(s){return new Ev(s)}pi.Default=Ll;var bl=Be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ue(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Di(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof K?s:new K(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,y=l.length,E;p<y;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){ot(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var E=Math.min(1,(s-y.loaded)/200);ot(y.el,E),E<1?l=!0:(y.active?d=!0:this._onOpaqueTile(y),y.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(j(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ce("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Ue(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],y=this._map;return p||(p=this._levels[s]={},p.el=Ce("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,y.getCenter(),y.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ue(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var y=Math.floor(s/2),E=Math.floor(l/2),O=d-1,$=new K(+y,+E);$.z=+O;var H=this._tileCoordsToKey($),Q=this._tiles[H];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),O>p?this._retainParent(y,E,O,p):!1)},_retainChildren:function(s,l,d,p){for(var y=2*s;y<2*s+2;y++)for(var E=2*l;E<2*l+2;E++){var O=new K(y,E);O.z=d+1;var $=this._tileCoordsToKey(O),H=this._tiles[$];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);d+1<p&&this._retainChildren(y,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var E=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||E)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),y=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();oe.any3d?di(s.el,y,p):ge(s.el,y)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),y=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new te(y.subtract(E),y.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(p),E=y.getCenter(),O=[],$=this.options.keepBuffer,H=new te(y.getBottomLeft().subtract([$,-$]),y.getTopRight().add([$,-$]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ne=this._tiles[Q].coords;(ne.z!==this._tileZoom||!H.contains(new K(ne.x,ne.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var de=y.min.y;de<=y.max.y;de++)for(var Ie=y.min.x;Ie<=y.max.x;Ie++){var Zt=new K(Ie,de);if(Zt.z=this._tileZoom,!!this._isValidTile(Zt)){var xt=this._tiles[this._tileCoordsToKey(Zt)];xt?xt.current=!0:O.push(Zt)}}if(O.sort(function(sn,qo){return sn.distanceTo(E)-qo.distanceTo(E)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nn=document.createDocumentFragment();for(Ie=0;Ie<O.length;Ie++)this._addTile(O[Ie],Nn);this._level.el.appendChild(Nn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return De(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),y=p.add(d),E=l.unproject(p,s.z),O=l.unproject(y,s.z);return[E,O]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Pe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new K(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Ue(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){we(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,oe.ielt9&&this.options.opacity<1&&ot(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&F(a(this._tileReady,this,s,null,y)),ge(y,d),this._tiles[p]={el:y,coords:s,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(ot(d.el,0),j(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(we(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new K(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new te(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function C1(s){return new bl(s)}var Ho=bl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&oe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return he(d,"load",a(this._tileOnLoad,this,l,d)),he(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:oe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return x(this._url,r(l,this.options))},_tileOnLoad:function(s,l){oe.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=G;var d=this._tiles[s].coords;Ue(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),bl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return bl.prototype._tileReady.call(this,s,l,d)}});function Pv(s,l){return new Ho(s,l)}var Iv=Ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=k(this,l);var y=l.detectRetina&&oe.retina?2:1,E=this.getTileSize();d.width=E.x*y,d.height=E.y*y,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Ho.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=pe(d.project(l[0]),d.project(l[1])),y=p.min,E=p.max,O=(this._wmsVersion>=1.3&&this._crs===mt?[y.y,y.x,E.y,E.x]:[y.x,y.y,E.x,E.y]).join(","),$=Ho.prototype.getTileUrl.call(this,s);return $+V(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function R1(s,l){return new Iv(s,l)}Ho.WMS=Iv,Pv.wms=R1;var Bi=Be.extend({options:{padding:.1},initialize:function(s){k(this,s),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),E=p.multiplyBy(-d).add(y).subtract(this._map._getNewPixelOrigin(s,l));oe.any3d?di(this._container,E,d):ge(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new te(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Sv=Bi.extend({options:{tolerance:0},getEvents:function(){var s=Bi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");he(s,"mousemove",this._onMouseMove,this),he(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){j(this._redrawRequest),delete this._ctx,Ue(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=oe.retina?2:1;ge(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[c(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[c(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,y;for(y=0;y<l.length;y++){if(p=Number(l[y]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,y,E,O=s._parts,$=O.length,H=this._ctx;if($){for(H.beginPath(),d=0;d<$;d++){for(p=0,y=O[d].length;p<y;p++)E=O[d][p],H[p?"lineTo":"moveTo"](E.x,E.y);l&&H.closePath()}this._fillStroke(H,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||p)/p;y!==1&&(d.save(),d.scale(1,y)),d.beginPath(),d.arc(l.x,l.y/y,p,0,Math.PI*2,!1),y!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(we(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function xv(s){return oe.canvas?new Sv(s):null}var Dl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),k1={_initContainer:function(){this._container=Ce("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Dl("shape");we(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Dl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ue(l),s.removeInteractiveTarget(l),delete this._layers[c(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,y=s._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Dl("stroke")),y.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(y.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Dl("fill")),y.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(y.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Di(s._container)},_bringToBack:function(s){pr(s._container)}},ih=oe.vml?Dl:go,Ml=Bi.extend({_initContainer:function(){this._container=ih("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ih("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ue(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ge(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=ih("path");s.options.className&&we(l,s.options.className),s.options.interactive&&we(l,"leaflet-interactive"),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ue(s._path),s.removeInteractiveTarget(s._path),delete this._layers[c(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,el(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,y="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+y+d*2+",0 "+y+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Di(s._path)},_bringToBack:function(s){pr(s._path)}});oe.vml&&Ml.include(k1);function Av(s){return oe.svg||oe.vml?new Ml(s):null}xe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&xv(s)||Av(s)}});var Cv=$o.extend({initialize:function(s,l){$o.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=De(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function L1(s,l){return new Cv(s,l)}Ml.create=ih,Ml.pointsToPath=el,ji.geometryToLayer=Qc,ji.coordsToLatLng=Xf,ji.coordsToLatLngs=Yc,ji.latLngToCoords=Jf,ji.latLngsToCoords=Xc,ji.getFeature=Wo,ji.asFeature=Jc,xe.mergeOptions({boxZoom:!0});var Rv=_n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zn(),_l(),this._startPoint=this._map.mouseEventToContainerPoint(s),he(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ce("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new te(this._point,this._startPoint),d=l.getSize();ge(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Ue(this._box),Ze(this._container,"leaflet-crosshair")),Qn(),yl(),je(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xe.addInitHook("addHandler","boxZoom",Rv),xe.mergeOptions({doubleClickZoom:!0});var kv=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,y=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(s.containerPoint,y)}});xe.addInitHook("addHandler","doubleClickZoom",kv),xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Lv=_n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Yn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=De(this._map.options.maxBounds);this._offsetLimit=pe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,O=Math.abs(y+d)<Math.abs(E+d)?y:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,O=d.easeLinearity,$=y.multiplyBy(O/E),H=$.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,H),ne=$.multiplyBy(Q/H),de=Q/(d.inertiaDeceleration*O),Ie=ne.multiplyBy(-de/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),F(function(){l.panBy(Ie,{duration:de,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});xe.addInitHook("addHandler","dragging",Lv),xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bv=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),he(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,y;for(p=0,y=d.left.length;p<y;p++)l[d.left[p]]=[-1*s,0];for(p=0,y=d.right.length;p<y;p++)l[d.right[p]]=[s,0];for(p=0,y=d.down.length;p<y;p++)l[d.down[p]]=[0,s];for(p=0,y=d.up.length;p<y;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,y;for(p=0,y=d.zoomIn.length;p<y;p++)l[d.zoomIn[p]]=s;for(p=0,y=d.zoomOut.length;p<y;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var y=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(y)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;gn(s)}}});xe.addInitHook("addHandler","keyboard",bv),xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dv=_n.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Uc(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),gn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(y/d)*d:y,O=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,O&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+O):s.setZoomAround(this._lastMousePos,l+O))}});xe.addInitHook("addHandler","scrollWheelZoom",Dv);var b1=600;xe.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var Mv=_n.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new K(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(he(document,"touchend",Xe),he(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),b1),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){je(document,"touchend",Xe),je(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new K(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});xe.addInitHook("addHandler","tapHold",Mv),xe.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var Nv=_n.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),Xe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),y=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),j(this._animRequest);var O=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(O,this,!0),Xe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,j(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xe.addInitHook("addHandler","touchZoom",Nv),xe.BoxZoom=Rv,xe.DoubleClickZoom=kv,xe.Drag=Lv,xe.Keyboard=bv,xe.ScrollWheelZoom=Dv,xe.TapHold=Mv,xe.TouchZoom=Nv,n.Bounds=te,n.Browser=oe,n.CRS=st,n.Canvas=Sv,n.Circle=Yf,n.CircleMarker=Zc,n.Class=Te,n.Control=rn,n.DivIcon=Ev,n.DivOverlay=mi,n.DomEvent=zc,n.DomUtil=jc,n.Draggable=Yn,n.Evented=Ke,n.FeatureGroup=ut,n.GeoJSON=ji,n.GridLayer=bl,n.Handler=_n,n.Icon=pi,n.ImageOverlay=eh,n.LatLng=Ee,n.LatLngBounds=Pe,n.Layer=Be,n.LayerGroup=Je,n.LineUtil=S,n.Map=xe,n.Marker=Kc,n.Mixin=xs,n.Path=wr,n.Point=K,n.PolyUtil=Bo,n.Polygon=$o,n.Polyline=Fi,n.Popup=th,n.PosAnimation=Sl,n.Projection=ee,n.Rectangle=Cv,n.Renderer=Bi,n.SVG=Ml,n.SVGOverlay=Tv,n.TileLayer=Ho,n.Tooltip=nh,n.Transformation=Ft,n.Util=N,n.VideoOverlay=wv,n.bind=a,n.bounds=pe,n.canvas=xv,n.circle=y1,n.circleMarker=_1,n.control=Kt,n.divIcon=A1,n.extend=r,n.featureGroup=zo,n.geoJSON=vv,n.geoJson=T1,n.gridLayer=C1,n.icon=m1,n.imageOverlay=E1,n.latLng=ce,n.latLngBounds=De,n.layerGroup=vr,n.map=Mo,n.marker=g1,n.point=J,n.polygon=w1,n.polyline=v1,n.popup=S1,n.rectangle=L1,n.setOptions=k,n.stamp=c,n.svg=Av,n.svgOverlay=I1,n.tileLayer=Pv,n.tooltip=x1,n.transformation=hi,n.version=i,n.videoOverlay=P1;var D1=window.L;n.noConflict=function(){return window.L=D1,this},window.L=n})})(Fg,Fg.exports);var Xa=Fg.exports;const qf=kE(Xa);function Gf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function fv(t,e){return e==null?function(i,r){const o=U.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=U.useRef();o.current||(o.current=t(i,r));const a=U.useRef(i),{instance:u}=o.current;return U.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function a3(t,e){U.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function d1(t){return function(n){const i=hv(),r=t(dv(n,i),i);return l1(i.map,n.attribution),h1(r.current,n.eventHandlers),a3(r.current,i),r}}function l3(t,e){const n=fv(t,e),i=d1(n);return i3(i)}function f1(t,e){const n=fv(t),i=o3(n,e);return r3(i)}function u3(t,e){const n=fv(t,e),i=d1(n);return s3(i)}function c3(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function h3(){return hv().map}function d3(t){const e=h3();return U.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function jg(){return jg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jg.apply(this,arguments)}function f3({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:c,zoom:f,...m},g){const[v]=U.useState({className:r,id:o,style:u}),[T,A]=U.useState(null);U.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const k=U.useCallback(b=>{if(b!==null&&T===null){const x=new Xa.Map(b,m);n!=null&&f!=null?x.setView(n,f):t!=null&&x.fitBounds(t,e),c!=null&&x.whenReady(c),A(t3(x))}},[]);U.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const V=T?Hs.createElement(c1,{value:T},i):a??null;return Hs.createElement("div",jg({},v,{ref:k}),V)}const pv=U.forwardRef(f3),mv=l3(function({position:e,...n},i){const r=new Xa.Marker(e,n);return Gf(r,n3(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),p3=f1(function(e,n){const i=new Xa.Popup(e,n.overlayContainer);return Gf(i,n)},function(e,n,{position:i},r){U.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function c(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:u,popupclose:c}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),gv=u3(function({url:e,...n},i){const r=new Xa.TileLayer(e,dv(n,i));return Gf(r,i)},function(e,n,i){c3(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),m3=f1(function(e,n){const i=new Xa.Tooltip(e,n.overlayContainer);return Gf(i,n)},function(e,n,{position:i},r){U.useEffect(function(){const a=n.overlayContainer;if(a==null)return;const{instance:u}=e,c=m=>{m.tooltip===u&&(i!=null&&u.setLatLng(i),u.update(),r(!0))},f=m=>{m.tooltip===u&&r(!1)};return a.on({tooltipopen:c,tooltipclose:f}),a.bindTooltip(u),function(){a.off({tooltipopen:c,tooltipclose:f}),a._map!=null&&a.unbindTooltip()}},[e,n,r,i])});delete qf.Icon.Default.prototype._getIconUrl;qf.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function g3({places:t,selected:e,setSelected:n,allPlaces:i,allPlacesSetter:r}){const[o,a]=U.useState([]);U.useEffect(()=>{const c=_A(Yu(vi,"approvedLocations"),f=>{const m=f.docs.map(g=>{const v=g.data();return{id:g.id,...v,location:v.location||null}});a(m)});return()=>c()},[]);const u=o.filter(c=>c.location&&typeof c.location.lat=="number"&&typeof c.location.lng=="number");return P.jsx("div",{style:{height:"calc(100vh - 70px)",width:"100%"},children:P.jsxs(pv,{center:[28.36,75.59],zoom:15,style:{height:"100%",width:"100%"},children:[P.jsx(gv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/">OpenStreetMap</a>'}),u.map(c=>P.jsxs(mv,{position:[c.location.lat,c.location.lng],children:[P.jsx(m3,{direction:"top",offset:[0,-8],children:P.jsxs("div",{children:[P.jsx("strong",{children:c.name}),P.jsx("div",{children:c.category||"—"})]})}),P.jsx(p3,{children:P.jsxs("div",{className:"popup-card-inner",children:[P.jsx("h4",{children:c.name}),P.jsx("p",{children:c.description}),c.imageUrl&&P.jsx("img",{src:c.imageUrl,alt:c.name,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}}),P.jsx("p",{style:{marginTop:8},children:P.jsx("small",{children:c.category})})]})})]},c.id))]})})}function _3({places:t=[],categories:e=["All"],onFilter:n=()=>{},onSelect:i=()=>{},filter:r={q:"",category:"All"}}){const o=Array.isArray(e)?e:["All"];return P.jsxs("aside",{className:"sidebar",children:[P.jsxs("div",{className:"side-top",children:[P.jsx("h2",{children:"Pilani Trails"}),P.jsx("p",{className:"muted",children:"Explore the town — filter, search & bookmark your faves."}),P.jsx("div",{className:"search-row",children:P.jsx("input",{placeholder:"Search spots, e.g., 'printing' or 'momo'",value:r.q||"",onChange:a=>n(u=>({...u,q:a.target.value}))})}),P.jsx("div",{className:"chips",children:o.map(a=>P.jsx("button",{className:"chip",onClick:()=>n(u=>({...u,category:a})),children:a},a))})]}),P.jsx("div",{className:"side-list",children:!Array.isArray(t)||t.length===0?P.jsx("div",{className:"empty",children:"No matches — try fresh filters"}):t.map(a=>P.jsxs("div",{className:"place-card",onClick:()=>i(a),children:[P.jsxs("div",{className:"place-header",children:[P.jsx("strong",{children:a.name}),P.jsx("span",{className:"cat",children:a.category})]}),P.jsx("div",{className:"desc",children:a.desc}),P.jsxs("div",{className:"meta",children:[P.jsxs("span",{children:["🔥 ",a.votes??0]}),P.jsx("span",{children:a.source==="seed"?"OG":"User"})]})]},a.id))}),P.jsx("div",{className:"side-bottom",children:P.jsx("a",{className:"btn",href:"/contribute",children:"Drop a pin"})})]})}const y3="/pilani-trails/assets/bg-DLqqgHgj.jpg";function v3(){const[t,e]=U.useState([]),[n,i]=U.useState({q:"",category:"All"}),[r,o]=U.useState(null),[a,u]=U.useState(!0);U.useEffect(()=>{const m=_A(Yu(vi,"approvedLocations"),g=>{const v=g.docs.map(T=>({id:T.id,...T.data()}));e(v),u(!1)});return()=>m()},[]);const c=t.filter(m=>{const g=n.q.toLowerCase(),v=!g||m.name&&m.name.toLowerCase().includes(g)||m.description&&m.description.toLowerCase().includes(g),T=n.category==="All"||m.category&&m.category===n.category;return v&&T}),f=["All",...Array.from(new Set((Array.isArray(t)?t:[]).map(m=>m.category||"Other")))];return a?P.jsx("div",{className:"loading-screen",children:P.jsx(im.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6},children:"Loading trails..."})}):P.jsxs("div",{className:"home-grid",style:{backgroundImage:`url(${y3})`,backgroundSize:"cover",backgroundPosition:"center"},children:[P.jsx(im.div,{className:"sidebar-container",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7},children:P.jsx(_3,{filter:n,setFilter:i,places:t,setPlaces:e,selected:r,setSelected:o,categories:f,onFilter:i,onSelect:o})}),P.jsx(im.div,{className:"map-container",initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},children:P.jsx(g3,{places:c,selected:r,setSelected:o,allPlaces:t,allPlacesSetter:e})})]})}const w3=()=>{const[t,e]=U.useState(""),[n,i]=U.useState(""),[r,o]=U.useState(""),[a,u]=U.useState(!1),{login:c,signInWithGoogle:f}=fo(),m=qa(),g=async T=>{T.preventDefault();try{o(""),u(!0),await c(t,n),m("/")}catch(A){o("Failed to sign in: "+A.message)}u(!1)},v=async()=>{try{o(""),u(!0),await f(),m("/")}catch(T){o("Failed to sign in with Google: "+T.message)}u(!1)};return P.jsx("div",{className:"auth-container",children:P.jsxs("div",{className:"auth-card",children:[P.jsx("h2",{children:"Login to Pilani Trails"}),r&&P.jsx("div",{className:"error-message",children:r}),P.jsxs("form",{onSubmit:g,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"email",children:"Email"}),P.jsx("input",{id:"email",type:"email",value:t,onChange:T=>e(T.target.value),required:!0,placeholder:"your.email@example.com"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"password",children:"Password"}),P.jsx("input",{id:"password",type:"password",value:n,onChange:T=>i(T.target.value),required:!0,placeholder:"••••••••"})]}),P.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Signing in...":"Sign In"})]}),P.jsx("div",{className:"divider",children:P.jsx("span",{children:"OR"})}),P.jsxs("button",{onClick:v,disabled:a,className:"btn-google",children:[P.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[P.jsx("path",{fill:"#4285F4",d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z"}),P.jsx("path",{fill:"#34A853",d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z"}),P.jsx("path",{fill:"#FBBC05",d:"M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z"}),P.jsx("path",{fill:"#EA4335",d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z"})]}),"Sign in with Google"]}),P.jsxs("p",{className:"auth-switch",children:["Don't have an account? ",P.jsx(Xt,{to:"/signup",children:"Sign up"})]})]})})},T3=()=>{const[t,e]=U.useState(""),[n,i]=U.useState(""),[r,o]=U.useState(""),[a,u]=U.useState(""),[c,f]=U.useState(!1),{currentUser:m}=fo(),g=qa();if(m)return g("/"),null;const v=async A=>{if(A.preventDefault(),n!==r){u("Passwords do not match");return}if(n.length<6){u("Password must be at least 6 characters");return}u(""),f(!0);try{await FS(Dr,t,n),g("/")}catch(k){u(k.message)}finally{f(!1)}},T=async()=>{u(""),f(!0);try{const A=new Ti;await QS(Dr,A),g("/")}catch(A){u(A.message)}finally{f(!1)}};return P.jsx("div",{className:"auth-container",children:P.jsxs("div",{className:"auth-card",children:[P.jsx("h2",{children:"Create Account"}),P.jsx("p",{children:"Sign up for Pilani Trails"}),a&&P.jsx("div",{className:"error-message",children:a}),P.jsxs("form",{onSubmit:v,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"email",children:"Email"}),P.jsx("input",{type:"email",id:"email",value:t,onChange:A=>e(A.target.value),placeholder:"Enter your email",required:!0,disabled:c})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"password",children:"Password"}),P.jsx("input",{type:"password",id:"password",value:n,onChange:A=>i(A.target.value),placeholder:"Create a password (min 6 characters)",required:!0,disabled:c})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),P.jsx("input",{type:"password",id:"confirmPassword",value:r,onChange:A=>o(A.target.value),placeholder:"Confirm your password",required:!0,disabled:c})]}),P.jsx("button",{type:"submit",className:"btn-primary",disabled:c,children:c?"Creating Account...":"Sign Up"})]}),P.jsx("div",{className:"divider",children:"OR"}),P.jsxs("button",{onClick:T,className:"btn-google",disabled:c,children:[P.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[P.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),P.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),P.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),P.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign up with Google"]}),P.jsxs("div",{className:"auth-switch",children:["Already have an account? ",P.jsx(Xt,{to:"/login",children:"Sign In"})]})]})})};function E3(){var v;const{currentUser:t,logout:e}=fo(),n=qa(),[i,r]=U.useState([]),[o,a]=U.useState(!0),[u,c]=U.useState({totalProposals:0,pendingProposals:0,approvedProposals:0,rejectedProposals:0});U.useEffect(()=>{f()},[t]);const f=async()=>{a(!0);try{const A=JSON.parse(localStorage.getItem("proposals")||"[]").filter(k=>k.userId===(t==null?void 0:t.uid));r(A),c({totalProposals:A.length,pendingProposals:A.filter(k=>k.status==="pending").length,approvedProposals:A.filter(k=>k.status==="approved").length,rejectedProposals:A.filter(k=>k.status==="rejected").length})}catch(T){console.error("Error loading user data:",T)}finally{a(!1)}},m=async()=>{try{await e(),n("/login")}catch(T){console.error("Logout error:",T)}},g=T=>{switch(T){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}};return o?P.jsx("div",{className:"dashboard-container",style:ue.container,children:P.jsx("div",{style:ue.loading,children:"Loading your dashboard..."})}):P.jsxs("div",{className:"dashboard-container",style:ue.container,children:[P.jsxs("div",{style:ue.header,children:[P.jsx("h1",{style:ue.title,children:"My Dashboard"}),P.jsxs("p",{style:ue.subtitle,children:["Welcome back, ",(t==null?void 0:t.email)||"User","!"]})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"Account Information"}),P.jsxs("div",{style:ue.infoGrid,children:[P.jsxs("div",{style:ue.infoItem,children:[P.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]}),P.jsxs("div",{style:ue.infoItem,children:[P.jsx("strong",{children:"User ID:"})," ",t==null?void 0:t.uid]}),P.jsxs("div",{style:ue.infoItem,children:[P.jsx("strong",{children:"Member Since:"})," ",new Date(((v=t==null?void 0:t.metadata)==null?void 0:v.creationTime)||Date.now()).toLocaleDateString()]})]})]}),P.jsxs("div",{style:ue.statsGrid,children:[P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#007bff"},children:[P.jsx("div",{style:ue.statNumber,children:u.totalProposals}),P.jsx("div",{style:ue.statLabel,children:"Total Proposals"})]}),P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#ffc107"},children:[P.jsx("div",{style:ue.statNumber,children:u.pendingProposals}),P.jsx("div",{style:ue.statLabel,children:"Pending Review"})]}),P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#28a745"},children:[P.jsx("div",{style:ue.statNumber,children:u.approvedProposals}),P.jsx("div",{style:ue.statLabel,children:"Approved"})]}),P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#dc3545"},children:[P.jsx("div",{style:ue.statNumber,children:u.rejectedProposals}),P.jsx("div",{style:ue.statLabel,children:"Rejected"})]})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"Quick Actions"}),P.jsxs("div",{style:ue.actionsGrid,children:[P.jsxs(Xt,{to:"/propose",style:ue.actionButton,children:[P.jsx("span",{style:ue.actionIcon,children:"➕"}),P.jsx("span",{children:"Propose New Location"})]}),P.jsxs(Xt,{to:"/",style:ue.actionButton,children:[P.jsx("span",{style:ue.actionIcon,children:"🗺️"}),P.jsx("span",{children:"View Map"})]}),P.jsxs(Xt,{to:"/contribute",style:ue.actionButton,children:[P.jsx("span",{style:ue.actionIcon,children:"✍️"}),P.jsx("span",{children:"Contribute"})]}),P.jsxs("button",{onClick:m,style:{...ue.actionButton,cursor:"pointer",border:"none"},children:[P.jsx("span",{style:ue.actionIcon,children:"🚪"}),P.jsx("span",{children:"Logout"})]})]})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"My Proposals"}),i.length===0?P.jsxs("div",{style:ue.emptyState,children:[P.jsx("p",{children:"You haven't submitted any proposals yet."}),P.jsx(Xt,{to:"/propose",style:ue.primaryButton,children:"Submit Your First Proposal"})]}):P.jsx("div",{style:ue.proposalsList,children:i.map(T=>{var A,k,V;return P.jsxs("div",{style:ue.proposalCard,children:[P.jsxs("div",{style:ue.proposalHeader,children:[P.jsx("h3",{style:ue.proposalTitle,children:T.name}),P.jsx("span",{style:{...ue.statusBadge,backgroundColor:g(T.status)},children:((A=T.status)==null?void 0:A.toUpperCase())||"PENDING"})]}),P.jsxs("div",{style:ue.proposalDetails,children:[P.jsxs("div",{children:[P.jsx("strong",{children:"Category:"})," ",T.category]}),P.jsxs("div",{children:[P.jsx("strong",{children:"Location:"})," [",(k=T.lat)==null?void 0:k.toFixed(4),", ",(V=T.lng)==null?void 0:V.toFixed(4),"]"]}),P.jsxs("div",{children:[P.jsx("strong",{children:"Submitted:"})," ",new Date(T.timestamp).toLocaleDateString()]})]}),T.description&&P.jsx("p",{style:ue.proposalDescription,children:T.description}),T.adminFeedback&&P.jsxs("div",{style:ue.feedback,children:[P.jsx("strong",{children:"Admin Feedback:"})," ",T.adminFeedback]})]},T.id)})})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"Need Help?"}),P.jsxs("p",{children:["Check out our ",P.jsx(Xt,{to:"/about",style:ue.link,children:"About page"})," for more information about Pilani Trails."]}),P.jsxs("p",{children:["Questions? Contact us or visit the ",P.jsx(Xt,{to:"/contribute",style:ue.link,children:"Contribute page"})," to learn more."]})]})]})}const ue={container:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},subtitle:{fontSize:"1.1rem",color:"#666"},loading:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#666"},card:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#333"},infoGrid:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},infoItem:{padding:"0.5rem",fontSize:"1rem"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},statCard:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid",textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},statLabel:{fontSize:"0.9rem",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},actionsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},actionButton:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f8f9fa",borderRadius:"8px",textDecoration:"none",color:"#333",transition:"all 0.2s",fontWeight:"500"},actionIcon:{fontSize:"2rem",marginBottom:"0.5rem"},emptyState:{textAlign:"center",padding:"2rem",color:"#666"},primaryButton:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"#fff",textDecoration:"none",borderRadius:"4px",marginTop:"1rem",fontWeight:"500"},proposalsList:{display:"flex",flexDirection:"column",gap:"1rem"},proposalCard:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},proposalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},proposalTitle:{fontSize:"1.2rem",fontWeight:"bold",margin:0},statusBadge:{padding:"0.25rem 0.75rem",borderRadius:"12px",color:"#fff",fontSize:"0.8rem",fontWeight:"bold"},proposalDetails:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},proposalDescription:{marginTop:"0.5rem",color:"#555",lineHeight:"1.5"},feedback:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",borderLeft:"3px solid #007bff"},link:{color:"#007bff",textDecoration:"none",fontWeight:"500"}};delete qf.Icon.Default.prototype._getIconUrl;qf.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function P3({onSelect:t}){return d3({click(e){t(e.latlng)}}),null}function I3({value:t,onChange:e}){const[n,i]=U.useState(t||null),r=o=>{i(o),e&&e(o)};return P.jsxs("div",{style:{height:"300px",width:"100%",marginBottom:"1rem"},children:[P.jsxs(pv,{center:n?[n.lat,n.lng]:[28.36,75.59],zoom:15,style:{height:"100%",width:"100%"},children:[P.jsx(gv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),P.jsx(P3,{onSelect:r}),n&&P.jsx(mv,{position:[n.lat,n.lng]})]}),P.jsx("p",{style:{marginTop:"6px",fontSize:"0.9rem",color:"#333"},children:n?`Selected: ${n.lat.toFixed(5)}, ${n.lng.toFixed(5)}`:"Click on the map to drop a pin for this location"})]})}const S3=()=>{const{currentUser:t}=U.useContext($y),[e,n]=U.useState({name:"",description:"",category:"",tags:"",imageUrl:"",location:null}),[i,r]=U.useState(!1),[o,a]=U.useState({type:"",text:""}),u=f=>{const{name:m,value:g}=f.target;n(v=>({...v,[m]:g}))},c=async f=>{if(f.preventDefault(),!t)return a({type:"error",text:"You must be logged in to propose a location."});if(!e.name||!e.description||!e.category)return a({type:"error",text:"Please provide name, description, and category."});if(!e.location)return a({type:"error",text:"Please drop a pin on the map to select location."});r(!0),a({type:"",text:""});try{await gA(Yu(vi,"locationProposals"),{name:e.name,description:e.description,category:e.category,tags:e.tags||"",imageUrl:e.imageUrl||"",location:{lat:e.location.lat,lng:e.location.lng},status:"pending",proposedBy:t.email||t.uid,userId:t.uid,userEmail:t.email||"",createdAt:gF()}),a({type:"success",text:"✅ Location proposal submitted successfully! Awaiting admin review."}),n({name:"",description:"",category:"",tags:"",imageUrl:"",location:null})}catch(m){console.error("Error submitting proposal:",m),a({type:"error",text:`❌ Failed to submit proposal: ${m.message}`})}finally{r(!1)}};return P.jsx("div",{className:"propose-location-container",children:P.jsxs("div",{className:"propose-location-card",children:[P.jsx("h2",{children:"Propose a New Location"}),P.jsx("p",{className:"subtitle",children:"Share a new trail or point of interest with the community"}),o.text&&P.jsx("div",{className:`message ${o.type}`,children:o.text}),P.jsxs("form",{onSubmit:c,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Location Name *"}),P.jsx("input",{type:"text",name:"name",value:e.name,onChange:u,placeholder:"Enter location name"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Description *"}),P.jsx("textarea",{name:"description",value:e.description,onChange:u,placeholder:"Describe the location briefly"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Category *"}),P.jsxs("select",{name:"category",value:e.category,onChange:u,children:[P.jsx("option",{value:"",children:"Select a category"}),P.jsx("option",{value:"trail",children:"Trail"}),P.jsx("option",{value:"viewpoint",children:"Viewpoint"}),P.jsx("option",{value:"landmark",children:"Landmark"}),P.jsx("option",{value:"park",children:"Park"}),P.jsx("option",{value:"food",children:"Food"}),P.jsx("option",{value:"stationery",children:"Stationery"}),P.jsx("option",{value:"other",children:"Other"})]})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Pin Location *"}),P.jsx(I3,{value:e.location,onChange:f=>n(m=>({...m,location:f}))})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Tags (comma separated)"}),P.jsx("input",{type:"text",name:"tags",value:e.tags,onChange:u,placeholder:"e.g. hiking, sunset, peaceful"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Image URL"}),P.jsx("input",{type:"text",name:"imageUrl",value:e.imageUrl,onChange:u,placeholder:"https://example.com/photo.jpg"})]}),P.jsx("button",{type:"submit",className:"submit-button",disabled:i,children:i?"Submitting...":"Submit Proposal"})]})]})})};function x3(t){var n;return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true"||((n=t.email)==null?void 0:n.toLowerCase())==="admin@pilanitrails.com":!1}function A3(t){if(!t)return"—";if(t.seconds)return new Date(t.seconds*1e3).toLocaleString();try{return new Date(t).toLocaleString()}catch{return String(t)}}function _i(t={},e=[]){const n=Object.keys(t).reduce((i,r)=>(i[r.toLowerCase().replace(/\s+/g,"")]=r,i),{});for(const i of e){const r=i.toLowerCase().replace(/\s+/g,"");if(n[r])return t[n[r]]}}const Ko="Admin (admin@pilanitrails.com)",C3=()=>{const{currentUser:t,loading:e}=fo(),[n,i]=U.useState([]),[r,o]=U.useState(!0),[a,u]=U.useState("all"),[c,f]=U.useState(null),[m,g]=U.useState({}),[v,T]=U.useState(null),A=x3(t);U.useEffect(()=>{if(!e){if(!A){o(!1);return}k()}},[a,e,t]);const k=async()=>{T(null);try{o(!0);const W=Yu(vi,"locationProposals"),R=a==="all"?W:uF(W,cF("status","==",a)),D=(await pF(R)).docs.map(M=>({id:M.id,...M.data()}));i(D)}catch(W){console.error("[AdminReview] fetchProposals error:",W),T((W==null?void 0:W.message)||String(W)),i([])}finally{o(!1)}},V=async W=>{if(!A)return alert("Admin only");try{const R=ca(vi,"locationProposals",W),I=await mA(R);if(!I.exists()){alert("Proposal not found!");return}const D=I.data();if(!D.location||typeof D.location.lat!="number"||typeof D.location.lng!="number"){alert("Cannot approve — no pin location provided!");return}await Bp(R,{status:"approved",reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||Ko,reviewedAt:new Date().toISOString()}),await gA(Yu(vi,"approvedLocations"),{...D,approvedBy:(t==null?void 0:t.email)||Ko,approvedAt:new Date().toISOString()}),alert("✅ Proposal approved and moved to approved locations!"),k()}catch(R){console.error("Approve error:",R),alert("Approve failed: "+((R==null?void 0:R.message)||R))}},b=async W=>{if(!A)return alert("Admin only");const R=prompt("Reason for rejection?");if(R)try{await Bp(ca(vi,"locationProposals",W),{status:"rejected",rejectionReason:R,reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||Ko,reviewedAt:new Date().toISOString()}),alert("Proposal rejected!"),k()}catch(I){console.error("Reject error:",I),alert("Reject failed: "+((I==null?void 0:I.message)||I))}},x=async W=>{if(!A)return alert("Admin only");if(window.confirm("Delete this location permanently?"))try{await mF(ca(vi,"locationProposals",W)),alert("Location deleted!"),k()}catch(R){console.error("Delete error:",R),alert("Delete failed: "+((R==null?void 0:R.message)||R))}},C=W=>{f(W.id),g({name:_i(W,["name","Name"])||"",description:_i(W,["description","Description"])||"",category:_i(W,["category","Category"])||"",tags:_i(W,["tags","Tags"])||"",imageUrl:_i(W,["imageUrl","image","Image URL"])||""})},B=(W,R)=>{g(I=>({...I,[W]:R}))},G=async W=>{if(!A)return alert("Admin only");try{const R={...m,editedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||Ko,editedAt:new Date().toISOString()};await Bp(ca(vi,"locationProposals",W),R),alert("Changes saved successfully!"),f(null),k()}catch(R){console.error("Update error:",R),alert("Update failed: "+((R==null?void 0:R.message)||R))}};return e?P.jsx("div",{className:"admin-review-loading",children:"Checking authentication..."}):A?r?P.jsx("div",{className:"admin-review-loading",children:"Loading proposals..."}):P.jsxs("div",{className:"admin-review-container",children:[P.jsxs("div",{className:"admin-review-header",children:[P.jsx("h1",{children:"Admin Control Panel"}),P.jsx("p",{children:"Approve, edit, or delete any proposed location"})]}),P.jsxs("div",{className:"filter-section",style:{marginBottom:12},children:[P.jsx("label",{style:{marginRight:8},children:"Filter:"}),P.jsxs("select",{value:a,onChange:W=>u(W.target.value),children:[P.jsx("option",{value:"all",children:"All"}),P.jsx("option",{value:"pending",children:"Pending"}),P.jsx("option",{value:"approved",children:"Approved"}),P.jsx("option",{value:"rejected",children:"Rejected"})]})]}),v&&P.jsxs("div",{style:{color:"crimson",marginBottom:12},children:["Error fetching proposals: ",v]}),n.length===0?P.jsx("div",{className:"no-proposals",children:"No proposals found."}):P.jsx("div",{className:"proposals-grid",children:n.map(W=>{const R=_i(W,["name"])||"—",I=_i(W,["description"])||"—",D=_i(W,["category"])||"—",M=_i(W,["tags"])||"—",F=_i(W,["proposedBy","userEmail"])||W.userEmail||W.userId||"—",j=W.createdAt?A3(W.createdAt):"—",N=W.status||"pending",Te=W.rejectionReason||"";return P.jsxs("div",{className:"proposal-card",children:[P.jsxs("div",{className:"proposal-header",children:[c===W.id?P.jsx("input",{value:m.name,onChange:ze=>B("name",ze.target.value),className:"edit-input",placeholder:"Name"}):P.jsx("h3",{style:{margin:0},children:R}),P.jsx("span",{className:`status-badge ${N}`,children:N})]}),P.jsx("div",{className:"proposal-details",style:{marginTop:8},children:c===W.id?P.jsxs(P.Fragment,{children:[P.jsx("label",{children:"Description:"}),P.jsx("textarea",{value:m.description,onChange:ze=>B("description",ze.target.value)}),P.jsx("label",{children:"Category:"}),P.jsx("input",{value:m.category,onChange:ze=>B("category",ze.target.value)}),P.jsx("label",{children:"Tags:"}),P.jsx("input",{value:m.tags,onChange:ze=>B("tags",ze.target.value)}),P.jsx("label",{children:"Image URL:"}),P.jsx("input",{value:m.imageUrl,onChange:ze=>B("imageUrl",ze.target.value)})]}):P.jsxs(P.Fragment,{children:[P.jsxs("p",{children:[P.jsx("strong",{children:"Description:"})," ",I]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Category:"})," ",D]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Tags:"})," ",M]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Proposed by:"})," ",F]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Created At:"})," ",j]}),W.location&&typeof W.location.lat=="number"&&typeof W.location.lng=="number"&&P.jsx("div",{className:"mini-map",style:{marginTop:10,borderRadius:8,overflow:"hidden"},children:P.jsxs(pv,{center:[W.location.lat,W.location.lng],zoom:15,style:{height:"160px",width:"100%"},scrollWheelZoom:!1,children:[P.jsx(gv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),P.jsx(mv,{position:[W.location.lat,W.location.lng]})]})}),N==="approved"&&P.jsxs("p",{children:[P.jsx("strong",{children:"Approved by:"})," ",(t==null?void 0:t.email)||Ko]}),N==="rejected"&&P.jsxs(P.Fragment,{children:[P.jsxs("p",{children:[P.jsx("strong",{children:"Rejected by:"})," ",(t==null?void 0:t.email)||Ko]}),Te&&P.jsxs("p",{children:[P.jsx("strong",{children:"Reason:"})," ",Te]})]}),W.imageUrl&&P.jsx("img",{src:W.imageUrl,alt:R,style:{width:"100%",borderRadius:8,marginTop:8}})]})}),P.jsx("div",{className:"proposal-actions",style:{marginTop:10},children:c===W.id?P.jsxs(P.Fragment,{children:[P.jsx("button",{onClick:()=>G(W.id),className:"btn btn-save",children:"Save"}),P.jsx("button",{onClick:()=>f(null),className:"btn btn-cancel",children:"Cancel"})]}):P.jsxs(P.Fragment,{children:[P.jsx("button",{onClick:()=>V(W.id),className:"btn btn-approve",children:"Approve"}),P.jsx("button",{onClick:()=>b(W.id),className:"btn btn-reject",children:"Reject"}),P.jsx("button",{onClick:()=>C(W),className:"btn btn-edit",children:"Edit"}),P.jsx("button",{onClick:()=>x(W.id),className:"btn btn-delete",children:"Delete"})]})})]},W.id)})})]}):P.jsx("div",{className:"admin-review-container",children:P.jsxs("div",{className:"admin-review-header",children:[P.jsx("h1",{children:"Admin Control Panel"}),P.jsx("p",{children:"Only admins can view this page."})]})})};function R3(){const t="pilani_trails_places_v1",[e,n]=U.useState(""),[i,r]=U.useState(!1),[o,a]=U.useState([]);U.useEffect(()=>{const f=localStorage.getItem(t)||"[]";a(JSON.parse(f))},[]);function u(f){f.preventDefault();const m=e==="pilaniadmin123";r(m),m||alert("Nah fam, wrong pass.")}function c(f){if(!confirm("Delete for real?"))return;const m=o.filter(g=>g.id!==f);a(m),localStorage.setItem(t,JSON.stringify(m))}return i?P.jsxs("div",{className:"admin-page",children:[P.jsx("h2",{children:"Admin Panel"}),P.jsxs("p",{children:[o.length," place(s) in local DB"]}),P.jsx("p",{className:"muted",children:"Delete any place. For mass edits, export localStorage key manually."}),P.jsxs("div",{className:"admin-list",children:[o.length===0&&P.jsx("p",{children:"No places yet."}),o.map(f=>P.jsxs("div",{className:"place-card",children:[P.jsx("h3",{children:f.name}),P.jsx("div",{className:"desc",children:f.desc||"(no desc)"}),P.jsxs("div",{className:"meta",children:["Category: ",f.category]}),P.jsxs("div",{className:"meta",children:["ID: ",f.id]}),P.jsx("button",{className:"btn ghost",onClick:()=>c(f.id),children:"Delete"})]},f.id))]})]}):P.jsxs("div",{className:"admin-page",children:[P.jsx("h2",{children:"Admin"}),P.jsxs("p",{children:["Enter the admin pass (set in ",P.jsx("code",{children:".env.local"}),")"]}),P.jsxs("form",{onSubmit:u,children:[P.jsx("input",{value:e,onChange:f=>n(f.target.value),placeholder:"admin pass"}),P.jsx("button",{className:"btn",type:"submit",children:"Unlock"})]})]})}function k3(){return P.jsxs(P.Fragment,{children:[P.jsx(zj,{}),P.jsxs(ob,{children:[P.jsx(Pr,{path:"/",element:P.jsx(v3,{})}),P.jsx(Pr,{path:"/login",element:P.jsx(w3,{})}),P.jsx(Pr,{path:"/signup",element:P.jsx(T3,{})}),P.jsx(Pr,{path:"/dashboard",element:P.jsx(Wp,{children:P.jsx(E3,{})})}),P.jsx(Pr,{path:"/propose",element:P.jsx(Wp,{children:P.jsx(S3,{})})}),P.jsx(Pr,{path:"/admin-review",element:P.jsx(Bj,{children:P.jsx(C3,{})})}),P.jsx(Pr,{path:"/admin",element:P.jsx(Wp,{children:P.jsx(R3,{})})})]})]})}const p1=document.getElementById("root");if(!p1){const t=document.createElement("div");t.id="root",document.body.appendChild(t),console.error("Root element was missing - created new one")}window.addEventListener("error",t=>{console.error("Global error caught:",t.error)});window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)});try{WI(p1||document.getElementById("root")).render(P.jsx(Hs.StrictMode,{children:P.jsx(fb,{children:P.jsx(Fj,{children:P.jsx(k3,{})})})}))}catch(t){console.error("Error rendering app:",t),document.body.innerHTML=`<div style="padding: 20px; color: red;">Error loading app: ${t.message}</div>`}
