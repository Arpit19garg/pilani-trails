function YP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var XP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ow={exports:{}},Fh={},aw={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var su=Symbol.for("react.element"),JP=Symbol.for("react.portal"),eS=Symbol.for("react.fragment"),tS=Symbol.for("react.strict_mode"),nS=Symbol.for("react.profiler"),iS=Symbol.for("react.provider"),rS=Symbol.for("react.context"),sS=Symbol.for("react.forward_ref"),oS=Symbol.for("react.suspense"),aS=Symbol.for("react.memo"),lS=Symbol.for("react.lazy"),__=Symbol.iterator;function uS(t){return t===null||typeof t!="object"?null:(t=__&&t[__]||t["@@iterator"],typeof t=="function"?t:null)}var lw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uw=Object.assign,cw={};function ta(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||lw}ta.prototype.isReactComponent={};ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hw(){}hw.prototype=ta.prototype;function Wp(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||lw}var Hp=Wp.prototype=new hw;Hp.constructor=Wp;uw(Hp,ta.prototype);Hp.isPureReactComponent=!0;var v_=Array.isArray,dw=Object.prototype.hasOwnProperty,qp={current:null},fw={key:!0,ref:!0,__self:!0,__source:!0};function pw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)dw.call(e,i)&&!fw.hasOwnProperty(i)&&(r[i]=e[i]);var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];r.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)r[i]===void 0&&(r[i]=h[i]);return{$$typeof:su,type:t,key:o,ref:l,props:r,_owner:qp.current}}function cS(t,e){return{$$typeof:su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gp(t){return typeof t=="object"&&t!==null&&t.$$typeof===su}function hS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y_=/\/+/g;function Ld(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hS(""+t.key):e.toString(36)}function kc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case su:case JP:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+Ld(l,0):i,v_(r)?(n="",t!=null&&(n=t.replace(y_,"$&/")+"/"),kc(r,e,n,"",function(p){return p})):r!=null&&(Gp(r)&&(r=cS(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(y_,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",v_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Ld(o,h);l+=kc(o,e,n,d,r)}else if(d=uS(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Ld(o,h++),l+=kc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ac(t,e,n){if(t==null)return t;var i=[],r=0;return kc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function dS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Rc={transition:null},fS={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:qp};function mw(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:ac,forEach:function(t,e,n){ac(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ac(t,function(){e++}),e},toArray:function(t){return ac(t,function(e){return e})||[]},only:function(t){if(!Gp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=ta;Ie.Fragment=eS;Ie.Profiler=nS;Ie.PureComponent=Wp;Ie.StrictMode=tS;Ie.Suspense=oS;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fS;Ie.act=mw;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=uw({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=qp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)dw.call(e,d)&&!fw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:su,type:t.type,key:r,ref:o,props:i,_owner:l}};Ie.createContext=function(t){return t={$$typeof:rS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iS,_context:t},t.Consumer=t};Ie.createElement=pw;Ie.createFactory=function(t){var e=pw.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:sS,render:t}};Ie.isValidElement=Gp;Ie.lazy=function(t){return{$$typeof:lS,_payload:{_status:-1,_result:t},_init:dS}};Ie.memo=function(t,e){return{$$typeof:aS,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Rc.transition;Rc.transition={};try{t()}finally{Rc.transition=e}};Ie.unstable_act=mw;Ie.useCallback=function(t,e){return Ht.current.useCallback(t,e)};Ie.useContext=function(t){return Ht.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Ht.current.useEffect(t,e)};Ie.useId=function(){return Ht.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Ht.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};Ie.useRef=function(t){return Ht.current.useRef(t)};Ie.useState=function(t){return Ht.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Ht.current.useTransition()};Ie.version="18.3.1";aw.exports=Ie;var q=aw.exports;const kl=sw(q),pS=YP({__proto__:null,default:kl},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS=q,gS=Symbol.for("react.element"),_S=Symbol.for("react.fragment"),vS=Object.prototype.hasOwnProperty,yS=mS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wS={key:!0,ref:!0,__self:!0,__source:!0};function gw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)vS.call(e,i)&&!wS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:gS,type:t,key:o,ref:l,props:r,_owner:yS.current}}Fh.Fragment=_S;Fh.jsx=gw;Fh.jsxs=gw;ow.exports=Fh;var E=ow.exports,_w={exports:{}},fn={},vw={exports:{}},yw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ce){var J=G.length;G.push(ce);e:for(;0<J;){var de=J-1>>>1,ye=G[de];if(0<r(ye,ce))G[de]=ce,G[J]=ye,J=de;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ce=G[0],J=G.pop();if(J!==ce){G[0]=J;e:for(var de=0,ye=G.length,Pe=ye>>>1;de<Pe;){var be=2*(de+1)-1,we=G[be],me=be+1,ft=G[me];if(0>r(we,J))me<ye&&0>r(ft,we)?(G[de]=ft,G[me]=J,de=me):(G[de]=we,G[be]=J,de=be);else if(me<ye&&0>r(ft,J))G[de]=ft,G[me]=J,de=me;else break e}}return ce}function r(G,ce){var J=G.sortIndex-ce.sortIndex;return J!==0?J:G.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],_=1,y=null,T=3,C=!1,D=!1,V=!1,U=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(G){for(var ce=n(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=G)i(p),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(p)}}function H(G){if(V=!1,N(G),!D)if(n(d)!==null)D=!0,dt(X);else{var ce=n(p);ce!==null&&jt(H,ce.startTime-G)}}function X(G,ce){D=!1,V&&(V=!1,R(P),P=-1),C=!0;var J=T;try{for(N(ce),y=n(d);y!==null&&(!(y.expirationTime>ce)||G&&!M());){var de=y.callback;if(typeof de=="function"){y.callback=null,T=y.priorityLevel;var ye=de(y.expirationTime<=ce);ce=t.unstable_now(),typeof ye=="function"?y.callback=ye:y===n(d)&&i(d),N(ce)}else i(d);y=n(d)}if(y!==null)var Pe=!0;else{var be=n(p);be!==null&&jt(H,be.startTime-ce),Pe=!1}return Pe}finally{y=null,T=J,C=!1}}var $=!1,S=null,P=-1,x=5,k=-1;function M(){return!(t.unstable_now()-k<x)}function F(){if(S!==null){var G=t.unstable_now();k=G;var ce=!0;try{ce=S(!0,G)}finally{ce?O():($=!1,S=null)}}else $=!1}var O;if(typeof A=="function")O=function(){A(F)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,hi=Xe.port2;Xe.port1.onmessage=F,O=function(){hi.postMessage(null)}}else O=function(){U(F,0)};function dt(G){S=G,$||($=!0,O())}function jt(G,ce){P=U(function(){G(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){D||C||(D=!0,dt(X))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(G){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var J=T;T=ce;try{return G()}finally{T=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=T;T=G;try{return ce()}finally{T=J}},t.unstable_scheduleCallback=function(G,ce,J){var de=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?de+J:de):J=de,G){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=J+ye,G={id:_++,callback:ce,priorityLevel:G,startTime:J,expirationTime:ye,sortIndex:-1},J>de?(G.sortIndex=J,e(p,G),n(d)===null&&G===n(p)&&(V?(R(P),P=-1):V=!0,jt(H,J-de))):(G.sortIndex=ye,e(d,G),D||C||(D=!0,dt(X))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var ce=T;return function(){var J=T;T=ce;try{return G.apply(this,arguments)}finally{T=J}}}})(yw);vw.exports=yw;var ES=vw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=q,dn=ES;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ww=new Set,Rl={};function As(t,e){zo(t,e),zo(t+"Capture",e)}function zo(t,e){for(Rl[t]=e,t=0;t<e.length;t++)ww.add(e[t])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=Object.prototype.hasOwnProperty,IS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w_={},E_={};function PS(t){return Ef.call(E_,t)?!0:Ef.call(w_,t)?!1:IS.test(t)?E_[t]=!0:(w_[t]=!0,!1)}function SS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CS(t,e,n,i){if(e===null||typeof e>"u"||SS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kp=/[\-:]([a-z])/g;function Zp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kp,Zp);kt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kp,Zp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kp,Zp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qp(t,e,n,i){var r=kt.hasOwnProperty(e)?kt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CS(e,n,r,i)&&(n=null),i||r===null?PS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $i=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lc=Symbol.for("react.element"),_o=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),Ew=Symbol.for("react.provider"),Tw=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Pf=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Iw=Symbol.for("react.offscreen"),T_=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=T_&&t[T_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,bd;function rl(t){if(bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bd=e&&e[1]||""}return`
`+bd+t}var Nd=!1;function Od(t,e){if(!t||Nd)return"";Nd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,h=o.length-1;1<=l&&0<=h&&r[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(r[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||r[l]!==o[h]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Nd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function AS(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=Od(t.type,!1),t;case 11:return t=Od(t.type.render,!1),t;case 1:return t=Od(t.type,!0),t;default:return""}}function Sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case _o:return"Portal";case Tf:return"Profiler";case Yp:return"StrictMode";case If:return"Suspense";case Pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tw:return(t.displayName||"Context")+".Consumer";case Ew:return(t._context.displayName||"Context")+".Provider";case Xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jp:return e=t.displayName||null,e!==null?e:Sf(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return Sf(t(e))}catch{}}return null}function xS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sf(e);case 8:return e===Yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kS(t){var e=Pw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uc(t){t._valueTracker||(t._valueTracker=kS(t))}function Sw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Pw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cw(t,e){e=e.checked,e!=null&&Qp(t,"checked",e,!1)}function Af(t,e){Cw(t,e);var n=kr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xf(t,e.type,n):e.hasOwnProperty("defaultValue")&&xf(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xf(t,e,n){(e!=="number"||Qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function Ro(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function kf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(sl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Aw(t,e){var n=kr(e.value),i=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function C_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cc,kw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cc=cc||document.createElement("div"),cc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ll(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RS=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){RS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function Rw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function Lw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Rw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var LS=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lf(t,e){if(e){if(LS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function bf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=null;function em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Of=null,Lo=null,bo=null;function A_(t){if(t=lu(t)){if(typeof Of!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=$h(e),Of(t.stateNode,t.type,e))}}function bw(t){Lo?bo?bo.push(t):bo=[t]:Lo=t}function Nw(){if(Lo){var t=Lo,e=bo;if(bo=Lo=null,A_(t),e)for(t=0;t<e.length;t++)A_(e[t])}}function Ow(t,e){return t(e)}function Dw(){}var Dd=!1;function Mw(t,e,n){if(Dd)return t(e,n);Dd=!0;try{return Ow(t,e,n)}finally{Dd=!1,(Lo!==null||bo!==null)&&(Dw(),Nw())}}function bl(t,e){var n=t.stateNode;if(n===null)return null;var i=$h(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Df=!1;if(Oi)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Df=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Df=!1}function bS(t,e,n,i,r,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var ml=!1,Yc=null,Xc=!1,Mf=null,NS={onError:function(t){ml=!0,Yc=t}};function OS(t,e,n,i,r,o,l,h,d){ml=!1,Yc=null,bS.apply(NS,arguments)}function DS(t,e,n,i,r,o,l,h,d){if(OS.apply(this,arguments),ml){if(ml){var p=Yc;ml=!1,Yc=null}else throw Error(Y(198));Xc||(Xc=!0,Mf=p)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x_(t){if(xs(t)!==t)throw Error(Y(188))}function MS(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return x_(r),t;if(o===i)return x_(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,h=r.child;h;){if(h===n){l=!0,n=r,i=o;break}if(h===i){l=!0,i=r,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=r;break}if(h===i){l=!0,i=o,n=r;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Fw(t){return t=MS(t),t!==null?jw(t):null}function jw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jw(t);if(e!==null)return e;t=t.sibling}return null}var zw=dn.unstable_scheduleCallback,k_=dn.unstable_cancelCallback,VS=dn.unstable_shouldYield,FS=dn.unstable_requestPaint,it=dn.unstable_now,jS=dn.unstable_getCurrentPriorityLevel,tm=dn.unstable_ImmediatePriority,Uw=dn.unstable_UserBlockingPriority,Jc=dn.unstable_NormalPriority,zS=dn.unstable_LowPriority,Bw=dn.unstable_IdlePriority,jh=null,ri=null;function US(t){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(jh,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:WS,BS=Math.log,$S=Math.LN2;function WS(t){return t>>>=0,t===0?32:31-(BS(t)/$S|0)|0}var hc=64,dc=4194304;function ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~r;h!==0?i=ol(h):(o&=l,o!==0&&(i=ol(o)))}else l=n&~r,l!==0?i=ol(l):o!==0&&(i=ol(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Un(e),r=1<<n,i|=t[n],e&=~r;return i}function HS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Un(o),h=1<<l,d=r[l];d===-1?(!(h&n)||h&i)&&(r[l]=HS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $w(){var t=hc;return hc<<=1,!(hc&4194240)&&(hc=64),t}function Md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ou(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function GS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Un(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function nm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Un(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Oe=0;function Ww(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hw,im,qw,Gw,Kw,Ff=!1,fc=[],_r=null,vr=null,yr=null,Nl=new Map,Ol=new Map,ar=[],KS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R_(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(e.pointerId)}}function Ya(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=lu(e),e!==null&&im(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ZS(t,e,n,i,r){switch(e){case"focusin":return _r=Ya(_r,t,e,n,i,r),!0;case"dragenter":return vr=Ya(vr,t,e,n,i,r),!0;case"mouseover":return yr=Ya(yr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Nl.set(o,Ya(Nl.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ol.set(o,Ya(Ol.get(o)||null,t,e,n,i,r)),!0}return!1}function Zw(t){var e=os(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=Vw(n),e!==null){t.blockedOn=e,Kw(t.priority,function(){qw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Nf=i,n.target.dispatchEvent(i),Nf=null}else return e=lu(n),e!==null&&im(e),t.blockedOn=n,!1;e.shift()}return!0}function L_(t,e,n){Lc(t)&&n.delete(e)}function QS(){Ff=!1,_r!==null&&Lc(_r)&&(_r=null),vr!==null&&Lc(vr)&&(vr=null),yr!==null&&Lc(yr)&&(yr=null),Nl.forEach(L_),Ol.forEach(L_)}function Xa(t,e){t.blockedOn===e&&(t.blockedOn=null,Ff||(Ff=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,QS)))}function Dl(t){function e(r){return Xa(r,t)}if(0<fc.length){Xa(fc[0],t);for(var n=1;n<fc.length;n++){var i=fc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(_r!==null&&Xa(_r,t),vr!==null&&Xa(vr,t),yr!==null&&Xa(yr,t),Nl.forEach(e),Ol.forEach(e),n=0;n<ar.length;n++)i=ar[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)Zw(n),n.blockedOn===null&&ar.shift()}var No=$i.ReactCurrentBatchConfig,th=!0;function YS(t,e,n,i){var r=Oe,o=No.transition;No.transition=null;try{Oe=1,rm(t,e,n,i)}finally{Oe=r,No.transition=o}}function XS(t,e,n,i){var r=Oe,o=No.transition;No.transition=null;try{Oe=4,rm(t,e,n,i)}finally{Oe=r,No.transition=o}}function rm(t,e,n,i){if(th){var r=jf(t,e,n,i);if(r===null)qd(t,e,i,nh,n),R_(t,i);else if(ZS(r,t,e,n,i))i.stopPropagation();else if(R_(t,i),e&4&&-1<KS.indexOf(t)){for(;r!==null;){var o=lu(r);if(o!==null&&Hw(o),o=jf(t,e,n,i),o===null&&qd(t,e,i,nh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else qd(t,e,i,null,n)}}var nh=null;function jf(t,e,n,i){if(nh=null,t=em(i),t=os(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nh=t,null}function Qw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jS()){case tm:return 1;case Uw:return 4;case Jc:case zS:return 16;case Bw:return 536870912;default:return 16}default:return 16}}var fr=null,sm=null,bc=null;function Yw(){if(bc)return bc;var t,e=sm,n=e.length,i,r="value"in fr?fr.value:fr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return bc=r.slice(t,1<i?1-i:void 0)}function Nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pc(){return!0}function b_(){return!1}function pn(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pc:b_,this.isPropagationStopped=b_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=pn(na),au=Qe({},na,{view:0,detail:0}),JS=pn(au),Vd,Fd,Ja,zh=Qe({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:am,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(Vd=t.screenX-Ja.screenX,Fd=t.screenY-Ja.screenY):Fd=Vd=0,Ja=t),Vd)},movementY:function(t){return"movementY"in t?t.movementY:Fd}}),N_=pn(zh),eC=Qe({},zh,{dataTransfer:0}),tC=pn(eC),nC=Qe({},au,{relatedTarget:0}),jd=pn(nC),iC=Qe({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),rC=pn(iC),sC=Qe({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oC=pn(sC),aC=Qe({},na,{data:0}),O_=pn(aC),lC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cC[t])?!!e[t]:!1}function am(){return hC}var dC=Qe({},au,{key:function(t){if(t.key){var e=lC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:am,charCode:function(t){return t.type==="keypress"?Nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fC=pn(dC),pC=Qe({},zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D_=pn(pC),mC=Qe({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:am}),gC=pn(mC),_C=Qe({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),vC=pn(_C),yC=Qe({},zh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wC=pn(yC),EC=[9,13,27,32],lm=Oi&&"CompositionEvent"in window,gl=null;Oi&&"documentMode"in document&&(gl=document.documentMode);var TC=Oi&&"TextEvent"in window&&!gl,Xw=Oi&&(!lm||gl&&8<gl&&11>=gl),M_=" ",V_=!1;function Jw(t,e){switch(t){case"keyup":return EC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yo=!1;function IC(t,e){switch(t){case"compositionend":return e0(e);case"keypress":return e.which!==32?null:(V_=!0,M_);case"textInput":return t=e.data,t===M_&&V_?null:t;default:return null}}function PC(t,e){if(yo)return t==="compositionend"||!lm&&Jw(t,e)?(t=Yw(),bc=sm=fr=null,yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xw&&e.locale!=="ko"?null:e.data;default:return null}}var SC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SC[t.type]:e==="textarea"}function t0(t,e,n,i){bw(i),e=ih(e,"onChange"),0<e.length&&(n=new om("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var _l=null,Ml=null;function CC(t){d0(t,0)}function Uh(t){var e=To(t);if(Sw(e))return t}function AC(t,e){if(t==="change")return e}var n0=!1;if(Oi){var zd;if(Oi){var Ud="oninput"in document;if(!Ud){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),Ud=typeof j_.oninput=="function"}zd=Ud}else zd=!1;n0=zd&&(!document.documentMode||9<document.documentMode)}function z_(){_l&&(_l.detachEvent("onpropertychange",i0),Ml=_l=null)}function i0(t){if(t.propertyName==="value"&&Uh(Ml)){var e=[];t0(e,Ml,t,em(t)),Mw(CC,e)}}function xC(t,e,n){t==="focusin"?(z_(),_l=e,Ml=n,_l.attachEvent("onpropertychange",i0)):t==="focusout"&&z_()}function kC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uh(Ml)}function RC(t,e){if(t==="click")return Uh(e)}function LC(t,e){if(t==="input"||t==="change")return Uh(e)}function bC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:bC;function Vl(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ef.call(e,r)||!Hn(t[r],e[r]))return!1}return!0}function U_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function B_(t,e){var n=U_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U_(n)}}function r0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s0(){for(var t=window,e=Qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qc(t.document)}return e}function um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NC(t){var e=s0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r0(n.ownerDocument.documentElement,n)){if(i!==null&&um(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=B_(n,o);var l=B_(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OC=Oi&&"documentMode"in document&&11>=document.documentMode,wo=null,zf=null,vl=null,Uf=!1;function $_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||wo==null||wo!==Qc(i)||(i=wo,"selectionStart"in i&&um(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),vl&&Vl(vl,i)||(vl=i,i=ih(zf,"onSelect"),0<i.length&&(e=new om("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=wo)))}function mc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},Bd={},o0={};Oi&&(o0=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Bh(t){if(Bd[t])return Bd[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o0)return Bd[t]=e[n];return t}var a0=Bh("animationend"),l0=Bh("animationiteration"),u0=Bh("animationstart"),c0=Bh("transitionend"),h0=new Map,W_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){h0.set(t,e),As(e,[t])}for(var $d=0;$d<W_.length;$d++){var Wd=W_[$d],DC=Wd.toLowerCase(),MC=Wd[0].toUpperCase()+Wd.slice(1);Or(DC,"on"+MC)}Or(a0,"onAnimationEnd");Or(l0,"onAnimationIteration");Or(u0,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(c0,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VC=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function H_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,DS(i,e,void 0,t),t.currentTarget=null}function d0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&r.isPropagationStopped())break e;H_(r,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&r.isPropagationStopped())break e;H_(r,h,p),o=d}}}if(Xc)throw t=Mf,Xc=!1,Mf=null,t}function ze(t,e){var n=e[qf];n===void 0&&(n=e[qf]=new Set);var i=t+"__bubble";n.has(i)||(f0(e,t,2,!1),n.add(i))}function Hd(t,e,n){var i=0;e&&(i|=4),f0(n,t,i,e)}var gc="_reactListening"+Math.random().toString(36).slice(2);function Fl(t){if(!t[gc]){t[gc]=!0,ww.forEach(function(n){n!=="selectionchange"&&(VC.has(n)||Hd(n,!1,t),Hd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gc]||(e[gc]=!0,Hd("selectionchange",!1,e))}}function f0(t,e,n,i){switch(Qw(e)){case 1:var r=YS;break;case 4:r=XS;break;default:r=rm}n=r.bind(null,e,n,t),r=void 0,!Df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qd(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===r||h.nodeType===8&&h.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;h!==null;){if(l=os(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Mw(function(){var p=o,_=em(n),y=[];e:{var T=h0.get(t);if(T!==void 0){var C=om,D=t;switch(t){case"keypress":if(Nc(n)===0)break e;case"keydown":case"keyup":C=fC;break;case"focusin":D="focus",C=jd;break;case"focusout":D="blur",C=jd;break;case"beforeblur":case"afterblur":C=jd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=N_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=tC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=gC;break;case a0:case l0:case u0:C=rC;break;case c0:C=vC;break;case"scroll":C=JS;break;case"wheel":C=wC;break;case"copy":case"cut":case"paste":C=oC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=D_}var V=(e&4)!==0,U=!V&&t==="scroll",R=V?T!==null?T+"Capture":null:T;V=[];for(var A=p,N;A!==null;){N=A;var H=N.stateNode;if(N.tag===5&&H!==null&&(N=H,R!==null&&(H=bl(A,R),H!=null&&V.push(jl(A,H,N)))),U)break;A=A.return}0<V.length&&(T=new C(T,D,null,n,_),y.push({event:T,listeners:V}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",T&&n!==Nf&&(D=n.relatedTarget||n.fromElement)&&(os(D)||D[Di]))break e;if((C||T)&&(T=_.window===_?_:(T=_.ownerDocument)?T.defaultView||T.parentWindow:window,C?(D=n.relatedTarget||n.toElement,C=p,D=D?os(D):null,D!==null&&(U=xs(D),D!==U||D.tag!==5&&D.tag!==6)&&(D=null)):(C=null,D=p),C!==D)){if(V=N_,H="onMouseLeave",R="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(V=D_,H="onPointerLeave",R="onPointerEnter",A="pointer"),U=C==null?T:To(C),N=D==null?T:To(D),T=new V(H,A+"leave",C,n,_),T.target=U,T.relatedTarget=N,H=null,os(_)===p&&(V=new V(R,A+"enter",D,n,_),V.target=N,V.relatedTarget=U,H=V),U=H,C&&D)t:{for(V=C,R=D,A=0,N=V;N;N=fo(N))A++;for(N=0,H=R;H;H=fo(H))N++;for(;0<A-N;)V=fo(V),A--;for(;0<N-A;)R=fo(R),N--;for(;A--;){if(V===R||R!==null&&V===R.alternate)break t;V=fo(V),R=fo(R)}V=null}else V=null;C!==null&&q_(y,T,C,V,!1),D!==null&&U!==null&&q_(y,U,D,V,!0)}}e:{if(T=p?To(p):window,C=T.nodeName&&T.nodeName.toLowerCase(),C==="select"||C==="input"&&T.type==="file")var X=AC;else if(F_(T))if(n0)X=LC;else{X=kC;var $=xC}else(C=T.nodeName)&&C.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=RC);if(X&&(X=X(t,p))){t0(y,X,n,_);break e}$&&$(t,T,p),t==="focusout"&&($=T._wrapperState)&&$.controlled&&T.type==="number"&&xf(T,"number",T.value)}switch($=p?To(p):window,t){case"focusin":(F_($)||$.contentEditable==="true")&&(wo=$,zf=p,vl=null);break;case"focusout":vl=zf=wo=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,$_(y,n,_);break;case"selectionchange":if(OC)break;case"keydown":case"keyup":$_(y,n,_)}var S;if(lm)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else yo?Jw(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Xw&&n.locale!=="ko"&&(yo||P!=="onCompositionStart"?P==="onCompositionEnd"&&yo&&(S=Yw()):(fr=_,sm="value"in fr?fr.value:fr.textContent,yo=!0)),$=ih(p,P),0<$.length&&(P=new O_(P,t,null,n,_),y.push({event:P,listeners:$}),S?P.data=S:(S=e0(n),S!==null&&(P.data=S)))),(S=TC?IC(t,n):PC(t,n))&&(p=ih(p,"onBeforeInput"),0<p.length&&(_=new O_("onBeforeInput","beforeinput",null,n,_),y.push({event:_,listeners:p}),_.data=S))}d0(y,e)})}function jl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ih(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=bl(t,n),o!=null&&i.unshift(jl(t,o,r)),o=bl(t,e),o!=null&&i.push(jl(t,o,r))),t=t.return}return i}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q_(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,r?(d=bl(n,o),d!=null&&l.unshift(jl(n,d,h))):r||(d=bl(n,o),d!=null&&l.push(jl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var FC=/\r\n?/g,jC=/\u0000|\uFFFD/g;function G_(t){return(typeof t=="string"?t:""+t).replace(FC,`
`).replace(jC,"")}function _c(t,e,n){if(e=G_(e),G_(t)!==e&&n)throw Error(Y(425))}function rh(){}var Bf=null,$f=null;function Wf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,zC=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,UC=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(t){return K_.resolve(null).then(t).catch(BC)}:Hf;function BC(t){setTimeout(function(){throw t})}function Gd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Dl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Dl(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Z_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),ni="__reactFiber$"+ia,zl="__reactProps$"+ia,Di="__reactContainer$"+ia,qf="__reactEvents$"+ia,$C="__reactListeners$"+ia,WC="__reactHandles$"+ia;function os(t){var e=t[ni];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Di]||n[ni]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z_(t);t!==null;){if(n=t[ni])return n;t=Z_(t)}return e}t=n,n=t.parentNode}return null}function lu(t){return t=t[ni]||t[Di],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function To(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function $h(t){return t[zl]||null}var Gf=[],Io=-1;function Dr(t){return{current:t}}function Be(t){0>Io||(t.current=Gf[Io],Gf[Io]=null,Io--)}function je(t,e){Io++,Gf[Io]=t.current,t.current=e}var Rr={},Vt=Dr(Rr),Xt=Dr(!1),ms=Rr;function Uo(t,e){var n=t.type.contextTypes;if(!n)return Rr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Jt(t){return t=t.childContextTypes,t!=null}function sh(){Be(Xt),Be(Vt)}function Q_(t,e,n){if(Vt.current!==Rr)throw Error(Y(168));je(Vt,e),je(Xt,n)}function p0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,xS(t)||"Unknown",r));return Qe({},n,i)}function oh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,ms=Vt.current,je(Vt,t),je(Xt,Xt.current),!0}function Y_(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=p0(t,e,ms),i.__reactInternalMemoizedMergedChildContext=t,Be(Xt),Be(Vt),je(Vt,t)):Be(Xt),je(Xt,n)}var Si=null,Wh=!1,Kd=!1;function m0(t){Si===null?Si=[t]:Si.push(t)}function HC(t){Wh=!0,m0(t)}function Mr(){if(!Kd&&Si!==null){Kd=!0;var t=0,e=Oe;try{var n=Si;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Si=null,Wh=!1}catch(r){throw Si!==null&&(Si=Si.slice(t+1)),zw(tm,Mr),r}finally{Oe=e,Kd=!1}}return null}var Po=[],So=0,ah=null,lh=0,In=[],Pn=0,gs=null,Ci=1,Ai="";function ns(t,e){Po[So++]=lh,Po[So++]=ah,ah=t,lh=e}function g0(t,e,n){In[Pn++]=Ci,In[Pn++]=Ai,In[Pn++]=gs,gs=t;var i=Ci;t=Ai;var r=32-Un(i)-1;i&=~(1<<r),n+=1;var o=32-Un(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,Ci=1<<32-Un(e)+r|n<<r|i,Ai=o+t}else Ci=1<<o|n<<r|i,Ai=t}function cm(t){t.return!==null&&(ns(t,1),g0(t,1,0))}function hm(t){for(;t===ah;)ah=Po[--So],Po[So]=null,lh=Po[--So],Po[So]=null;for(;t===gs;)gs=In[--Pn],In[Pn]=null,Ai=In[--Pn],In[Pn]=null,Ci=In[--Pn],In[Pn]=null}var cn=null,ln=null,He=!1,jn=null;function _0(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,ln=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gs!==null?{id:Ci,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,ln=null,!0):!1;default:return!1}}function Kf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zf(t){if(He){var e=ln;if(e){var n=e;if(!X_(t,e)){if(Kf(t))throw Error(Y(418));e=wr(n.nextSibling);var i=cn;e&&X_(t,e)?_0(i,n):(t.flags=t.flags&-4097|2,He=!1,cn=t)}}else{if(Kf(t))throw Error(Y(418));t.flags=t.flags&-4097|2,He=!1,cn=t}}}function J_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function vc(t){if(t!==cn)return!1;if(!He)return J_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wf(t.type,t.memoizedProps)),e&&(e=ln)){if(Kf(t))throw v0(),Error(Y(418));for(;e;)_0(t,e),e=wr(e.nextSibling)}if(J_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=cn?wr(t.stateNode.nextSibling):null;return!0}function v0(){for(var t=ln;t;)t=wr(t.nextSibling)}function Bo(){ln=cn=null,He=!1}function dm(t){jn===null?jn=[t]:jn.push(t)}var qC=$i.ReactCurrentBatchConfig;function el(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=r.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function yc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ev(t){var e=t._init;return e(t._payload)}function y0(t){function e(R,A){if(t){var N=R.deletions;N===null?(R.deletions=[A],R.flags|=16):N.push(A)}}function n(R,A){if(!t)return null;for(;A!==null;)e(R,A),A=A.sibling;return null}function i(R,A){for(R=new Map;A!==null;)A.key!==null?R.set(A.key,A):R.set(A.index,A),A=A.sibling;return R}function r(R,A){return R=Pr(R,A),R.index=0,R.sibling=null,R}function o(R,A,N){return R.index=N,t?(N=R.alternate,N!==null?(N=N.index,N<A?(R.flags|=2,A):N):(R.flags|=2,A)):(R.flags|=1048576,A)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function h(R,A,N,H){return A===null||A.tag!==6?(A=tf(N,R.mode,H),A.return=R,A):(A=r(A,N),A.return=R,A)}function d(R,A,N,H){var X=N.type;return X===vo?_(R,A,N.props.children,H,N.key):A!==null&&(A.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===sr&&ev(X)===A.type)?(H=r(A,N.props),H.ref=el(R,A,N),H.return=R,H):(H=zc(N.type,N.key,N.props,null,R.mode,H),H.ref=el(R,A,N),H.return=R,H)}function p(R,A,N,H){return A===null||A.tag!==4||A.stateNode.containerInfo!==N.containerInfo||A.stateNode.implementation!==N.implementation?(A=nf(N,R.mode,H),A.return=R,A):(A=r(A,N.children||[]),A.return=R,A)}function _(R,A,N,H,X){return A===null||A.tag!==7?(A=fs(N,R.mode,H,X),A.return=R,A):(A=r(A,N),A.return=R,A)}function y(R,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return A=tf(""+A,R.mode,N),A.return=R,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case lc:return N=zc(A.type,A.key,A.props,null,R.mode,N),N.ref=el(R,null,A),N.return=R,N;case _o:return A=nf(A,R.mode,N),A.return=R,A;case sr:var H=A._init;return y(R,H(A._payload),N)}if(sl(A)||Za(A))return A=fs(A,R.mode,N,null),A.return=R,A;yc(R,A)}return null}function T(R,A,N,H){var X=A!==null?A.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return X!==null?null:h(R,A,""+N,H);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case lc:return N.key===X?d(R,A,N,H):null;case _o:return N.key===X?p(R,A,N,H):null;case sr:return X=N._init,T(R,A,X(N._payload),H)}if(sl(N)||Za(N))return X!==null?null:_(R,A,N,H,null);yc(R,N)}return null}function C(R,A,N,H,X){if(typeof H=="string"&&H!==""||typeof H=="number")return R=R.get(N)||null,h(A,R,""+H,X);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case lc:return R=R.get(H.key===null?N:H.key)||null,d(A,R,H,X);case _o:return R=R.get(H.key===null?N:H.key)||null,p(A,R,H,X);case sr:var $=H._init;return C(R,A,N,$(H._payload),X)}if(sl(H)||Za(H))return R=R.get(N)||null,_(A,R,H,X,null);yc(A,H)}return null}function D(R,A,N,H){for(var X=null,$=null,S=A,P=A=0,x=null;S!==null&&P<N.length;P++){S.index>P?(x=S,S=null):x=S.sibling;var k=T(R,S,N[P],H);if(k===null){S===null&&(S=x);break}t&&S&&k.alternate===null&&e(R,S),A=o(k,A,P),$===null?X=k:$.sibling=k,$=k,S=x}if(P===N.length)return n(R,S),He&&ns(R,P),X;if(S===null){for(;P<N.length;P++)S=y(R,N[P],H),S!==null&&(A=o(S,A,P),$===null?X=S:$.sibling=S,$=S);return He&&ns(R,P),X}for(S=i(R,S);P<N.length;P++)x=C(S,R,P,N[P],H),x!==null&&(t&&x.alternate!==null&&S.delete(x.key===null?P:x.key),A=o(x,A,P),$===null?X=x:$.sibling=x,$=x);return t&&S.forEach(function(M){return e(R,M)}),He&&ns(R,P),X}function V(R,A,N,H){var X=Za(N);if(typeof X!="function")throw Error(Y(150));if(N=X.call(N),N==null)throw Error(Y(151));for(var $=X=null,S=A,P=A=0,x=null,k=N.next();S!==null&&!k.done;P++,k=N.next()){S.index>P?(x=S,S=null):x=S.sibling;var M=T(R,S,k.value,H);if(M===null){S===null&&(S=x);break}t&&S&&M.alternate===null&&e(R,S),A=o(M,A,P),$===null?X=M:$.sibling=M,$=M,S=x}if(k.done)return n(R,S),He&&ns(R,P),X;if(S===null){for(;!k.done;P++,k=N.next())k=y(R,k.value,H),k!==null&&(A=o(k,A,P),$===null?X=k:$.sibling=k,$=k);return He&&ns(R,P),X}for(S=i(R,S);!k.done;P++,k=N.next())k=C(S,R,P,k.value,H),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?P:k.key),A=o(k,A,P),$===null?X=k:$.sibling=k,$=k);return t&&S.forEach(function(F){return e(R,F)}),He&&ns(R,P),X}function U(R,A,N,H){if(typeof N=="object"&&N!==null&&N.type===vo&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case lc:e:{for(var X=N.key,$=A;$!==null;){if($.key===X){if(X=N.type,X===vo){if($.tag===7){n(R,$.sibling),A=r($,N.props.children),A.return=R,R=A;break e}}else if($.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===sr&&ev(X)===$.type){n(R,$.sibling),A=r($,N.props),A.ref=el(R,$,N),A.return=R,R=A;break e}n(R,$);break}else e(R,$);$=$.sibling}N.type===vo?(A=fs(N.props.children,R.mode,H,N.key),A.return=R,R=A):(H=zc(N.type,N.key,N.props,null,R.mode,H),H.ref=el(R,A,N),H.return=R,R=H)}return l(R);case _o:e:{for($=N.key;A!==null;){if(A.key===$)if(A.tag===4&&A.stateNode.containerInfo===N.containerInfo&&A.stateNode.implementation===N.implementation){n(R,A.sibling),A=r(A,N.children||[]),A.return=R,R=A;break e}else{n(R,A);break}else e(R,A);A=A.sibling}A=nf(N,R.mode,H),A.return=R,R=A}return l(R);case sr:return $=N._init,U(R,A,$(N._payload),H)}if(sl(N))return D(R,A,N,H);if(Za(N))return V(R,A,N,H);yc(R,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,A!==null&&A.tag===6?(n(R,A.sibling),A=r(A,N),A.return=R,R=A):(n(R,A),A=tf(N,R.mode,H),A.return=R,R=A),l(R)):n(R,A)}return U}var $o=y0(!0),w0=y0(!1),uh=Dr(null),ch=null,Co=null,fm=null;function pm(){fm=Co=ch=null}function mm(t){var e=uh.current;Be(uh),t._currentValue=e}function Qf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Oo(t,e){ch=t,fm=Co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(fm!==t)if(t={context:t,memoizedValue:e,next:null},Co===null){if(ch===null)throw Error(Y(308));Co=t,ch.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return e}var as=null;function gm(t){as===null?as=[t]:as.push(t)}function E0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,gm(e)):(n.next=r.next,r.next=n),e.interleaved=n,Mi(t,i)}function Mi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function _m(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Mi(t,n)}return r=i.interleaved,r===null?(e.next=e,gm(i)):(e.next=r.next,r.next=e),i.interleaved=e,Mi(t,n)}function Oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nm(t,n)}}function tv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hh(t,e,n,i){var r=t.updateQueue;or=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,h=r.shared.pending;if(h!==null){r.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==l&&(h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;l=0,_=p=d=null,h=o;do{var T=h.lane,C=h.eventTime;if((i&T)===T){_!==null&&(_=_.next={eventTime:C,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var D=t,V=h;switch(T=e,C=n,V.tag){case 1:if(D=V.payload,typeof D=="function"){y=D.call(C,y,T);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,T=typeof D=="function"?D.call(C,y,T):D,T==null)break e;y=Qe({},y,T);break e;case 2:or=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=r.effects,T===null?r.effects=[h]:T.push(h))}else C={eventTime:C,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(p=_=C,d=y):_=_.next=C,l|=T;if(h=h.next,h===null){if(h=r.shared.pending,h===null)break;T=h,h=T.next,T.next=null,r.lastBaseUpdate=T,r.shared.pending=null}}while(!0);if(_===null&&(d=y),r.baseState=d,r.firstBaseUpdate=p,r.lastBaseUpdate=_,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);vs|=l,t.lanes=l,t.memoizedState=y}}function nv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var uu={},si=Dr(uu),Ul=Dr(uu),Bl=Dr(uu);function ls(t){if(t===uu)throw Error(Y(174));return t}function vm(t,e){switch(je(Bl,e),je(Ul,t),je(si,uu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rf(e,t)}Be(si),je(si,e)}function Wo(){Be(si),Be(Ul),Be(Bl)}function I0(t){ls(Bl.current);var e=ls(si.current),n=Rf(e,t.type);e!==n&&(je(Ul,t),je(si,n))}function ym(t){Ul.current===t&&(Be(si),Be(Ul))}var Ke=Dr(0);function dh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zd=[];function wm(){for(var t=0;t<Zd.length;t++)Zd[t]._workInProgressVersionPrimary=null;Zd.length=0}var Dc=$i.ReactCurrentDispatcher,Qd=$i.ReactCurrentBatchConfig,_s=0,Ze=null,pt=null,Et=null,fh=!1,yl=!1,$l=0,GC=0;function Lt(){throw Error(Y(321))}function Em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Tm(t,e,n,i,r,o){if(_s=o,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dc.current=t===null||t.memoizedState===null?YC:XC,t=n(i,r),yl){o=0;do{if(yl=!1,$l=0,25<=o)throw Error(Y(301));o+=1,Et=pt=null,e.updateQueue=null,Dc.current=JC,t=n(i,r)}while(yl)}if(Dc.current=ph,e=pt!==null&&pt.next!==null,_s=0,Et=pt=Ze=null,fh=!1,e)throw Error(Y(300));return t}function Im(){var t=$l!==0;return $l=0,t}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ze.memoizedState=Et=t:Et=Et.next=t,Et}function kn(){if(pt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Et===null?Ze.memoizedState:Et.next;if(e!==null)Et=e,pt=t;else{if(t===null)throw Error(Y(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Et===null?Ze.memoizedState=Et=t:Et=Et.next=t}return Et}function Wl(t,e){return typeof e=="function"?e(t):e}function Yd(t){var e=kn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=pt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var h=l=null,d=null,p=o;do{var _=p.lane;if((_s&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var y={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=y,l=i):d=d.next=y,Ze.lanes|=_,vs|=_}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Hn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Ze.lanes|=o,vs|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xd(t){var e=kn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);Hn(o,e.memoizedState)||(Yt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function P0(){}function S0(t,e){var n=Ze,i=kn(),r=e(),o=!Hn(i.memoizedState,r);if(o&&(i.memoizedState=r,Yt=!0),i=i.queue,Pm(x0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Hl(9,A0.bind(null,n,i,r,e),void 0,null),Tt===null)throw Error(Y(349));_s&30||C0(n,e,r)}return r}function C0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function A0(t,e,n,i){e.value=n,e.getSnapshot=i,k0(e)&&R0(t)}function x0(t,e,n){return n(function(){k0(e)&&R0(t)})}function k0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function R0(t){var e=Mi(t,1);e!==null&&Bn(e,t,1,-1)}function iv(t){var e=ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:t},e.queue=t,t=t.dispatch=QC.bind(null,Ze,t),[e.memoizedState,t]}function Hl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function L0(){return kn().memoizedState}function Mc(t,e,n,i){var r=ti();Ze.flags|=t,r.memoizedState=Hl(1|e,n,void 0,i===void 0?null:i)}function Hh(t,e,n,i){var r=kn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,i!==null&&Em(i,l.deps)){r.memoizedState=Hl(e,n,o,i);return}}Ze.flags|=t,r.memoizedState=Hl(1|e,n,o,i)}function rv(t,e){return Mc(8390656,8,t,e)}function Pm(t,e){return Hh(2048,8,t,e)}function b0(t,e){return Hh(4,2,t,e)}function N0(t,e){return Hh(4,4,t,e)}function O0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function D0(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4,4,O0.bind(null,e,t),n)}function Sm(){}function M0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function V0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function F0(t,e,n){return _s&21?(Hn(n,e)||(n=$w(),Ze.lanes|=n,vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function KC(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=Qd.transition;Qd.transition={};try{t(!1),e()}finally{Oe=n,Qd.transition=i}}function j0(){return kn().memoizedState}function ZC(t,e,n){var i=Ir(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},z0(t))U0(e,n);else if(n=E0(t,e,n,i),n!==null){var r=Wt();Bn(n,t,i,r),B0(n,e,i)}}function QC(t,e,n){var i=Ir(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(z0(t))U0(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(r.hasEagerState=!0,r.eagerState=h,Hn(h,l)){var d=e.interleaved;d===null?(r.next=r,gm(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=E0(t,e,r,i),n!==null&&(r=Wt(),Bn(n,t,i,r),B0(n,e,i))}}function z0(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function U0(t,e){yl=fh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nm(t,n)}}var ph={readContext:xn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},YC={readContext:xn,useCallback:function(t,e){return ti().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:rv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mc(4194308,4,O0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mc(4,2,t,e)},useMemo:function(t,e){var n=ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ti();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ZC.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=ti();return t={current:t},e.memoizedState=t},useState:iv,useDebugValue:Sm,useDeferredValue:function(t){return ti().memoizedState=t},useTransition:function(){var t=iv(!1),e=t[0];return t=KC.bind(null,t[1]),ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,r=ti();if(He){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Tt===null)throw Error(Y(349));_s&30||C0(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,rv(x0.bind(null,i,o,t),[t]),i.flags|=2048,Hl(9,A0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ti(),e=Tt.identifierPrefix;if(He){var n=Ai,i=Ci;n=(i&~(1<<32-Un(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=$l++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XC={readContext:xn,useCallback:M0,useContext:xn,useEffect:Pm,useImperativeHandle:D0,useInsertionEffect:b0,useLayoutEffect:N0,useMemo:V0,useReducer:Yd,useRef:L0,useState:function(){return Yd(Wl)},useDebugValue:Sm,useDeferredValue:function(t){var e=kn();return F0(e,pt.memoizedState,t)},useTransition:function(){var t=Yd(Wl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:P0,useSyncExternalStore:S0,useId:j0,unstable_isNewReconciler:!1},JC={readContext:xn,useCallback:M0,useContext:xn,useEffect:Pm,useImperativeHandle:D0,useInsertionEffect:b0,useLayoutEffect:N0,useMemo:V0,useReducer:Xd,useRef:L0,useState:function(){return Xd(Wl)},useDebugValue:Sm,useDeferredValue:function(t){var e=kn();return pt===null?e.memoizedState=t:F0(e,pt.memoizedState,t)},useTransition:function(){var t=Xd(Wl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:P0,useSyncExternalStore:S0,useId:j0,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qh={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=Ir(t),o=Li(i,r);o.payload=e,n!=null&&(o.callback=n),e=Er(t,o,r),e!==null&&(Bn(e,t,r,i),Oc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=Ir(t),o=Li(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Er(t,o,r),e!==null&&(Bn(e,t,r,i),Oc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),i=Ir(t),r=Li(n,i);r.tag=2,e!=null&&(r.callback=e),e=Er(t,r,i),e!==null&&(Bn(e,t,i,n),Oc(e,t,i))}};function sv(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Vl(n,i)||!Vl(r,o):!0}function $0(t,e,n){var i=!1,r=Rr,o=e.contextType;return typeof o=="object"&&o!==null?o=xn(o):(r=Jt(e)?ms:Vt.current,i=e.contextTypes,o=(i=i!=null)?Uo(t,r):Rr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function ov(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&qh.enqueueReplaceState(e,e.state,null)}function Xf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},_m(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=xn(o):(o=Jt(e)?ms:Vt.current,r.context=Uo(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Yf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&qh.enqueueReplaceState(r,r.state,null),hh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ho(t,e){try{var n="",i=e;do n+=AS(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Jd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eA=typeof WeakMap=="function"?WeakMap:Map;function W0(t,e,n){n=Li(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){gh||(gh=!0,up=i),Jf(t,e)},n}function H0(t,e,n){n=Li(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Jf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Jf(t,e),typeof i!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function av(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new eA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=pA.bind(null,t,e,n),e.then(t,t))}function lv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Li(-1,1),e.tag=2,Er(n,e,1))),n.lanes|=1),t)}var tA=$i.ReactCurrentOwner,Yt=!1;function Bt(t,e,n,i){e.child=t===null?w0(e,null,n,i):$o(e,t.child,n,i)}function cv(t,e,n,i,r){n=n.render;var o=e.ref;return Oo(e,r),i=Tm(t,e,n,i,o,r),n=Im(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vi(t,e,r)):(He&&n&&cm(e),e.flags|=1,Bt(t,e,i,r),e.child)}function hv(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,q0(t,e,o,i,r)):(t=zc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Vl,n(l,i)&&t.ref===e.ref)return Vi(t,e,r)}return e.flags|=1,t=Pr(o,i),t.ref=e.ref,t.return=e,e.child=t}function q0(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Vl(o,i)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Vi(t,e,r)}return ep(t,e,n,i,r)}function G0(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(xo,an),an|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(xo,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,je(xo,an),an|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,je(xo,an),an|=i;return Bt(t,e,r,n),e.child}function K0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ep(t,e,n,i,r){var o=Jt(n)?ms:Vt.current;return o=Uo(e,o),Oo(e,r),n=Tm(t,e,n,i,o,r),i=Im(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vi(t,e,r)):(He&&i&&cm(e),e.flags|=1,Bt(t,e,n,r),e.child)}function dv(t,e,n,i,r){if(Jt(n)){var o=!0;oh(e)}else o=!1;if(Oo(e,r),e.stateNode===null)Vc(t,e),$0(e,n,i),Xf(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=xn(p):(p=Jt(n)?ms:Vt.current,p=Uo(e,p));var _=n.getDerivedStateFromProps,y=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&ov(e,l,i,p),or=!1;var T=e.memoizedState;l.state=T,hh(e,i,l,r),d=e.memoizedState,h!==i||T!==d||Xt.current||or?(typeof _=="function"&&(Yf(e,n,_,i),d=e.memoizedState),(h=or||sv(e,n,h,i,T,d,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,T0(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Vn(e.type,h),l.props=p,y=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=xn(d):(d=Jt(n)?ms:Vt.current,d=Uo(e,d));var C=n.getDerivedStateFromProps;(_=typeof C=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||T!==d)&&ov(e,l,i,d),or=!1,T=e.memoizedState,l.state=T,hh(e,i,l,r);var D=e.memoizedState;h!==y||T!==D||Xt.current||or?(typeof C=="function"&&(Yf(e,n,C,i),D=e.memoizedState),(p=or||sv(e,n,p,i,T,D,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,D,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,D,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),l.props=i,l.state=D,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return tp(t,e,n,i,o,r)}function tp(t,e,n,i,r,o){K0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&Y_(e,n,!1),Vi(t,e,o);i=e.stateNode,tA.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,h,o)):Bt(t,e,h,o),e.memoizedState=i.state,r&&Y_(e,n,!0),e.child}function Z0(t){var e=t.stateNode;e.pendingContext?Q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Q_(t,e.context,!1),vm(t,e.containerInfo)}function fv(t,e,n,i,r){return Bo(),dm(r),e.flags|=256,Bt(t,e,n,i),e.child}var np={dehydrated:null,treeContext:null,retryLane:0};function ip(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q0(t,e,n){var i=e.pendingProps,r=Ke.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(r&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),je(Ke,r&1),t===null)return Zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Zh(l,i,0,null),t=fs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ip(n),e.memoizedState=np,t):Cm(e,l));if(r=t.memoizedState,r!==null&&(h=r.dehydrated,h!==null))return nA(t,e,l,i,h,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,h=r.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Pr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),h!==null?o=Pr(h,o):(o=fs(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?ip(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=np,i}return o=t.child,t=o.sibling,i=Pr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Cm(t,e){return e=Zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wc(t,e,n,i){return i!==null&&dm(i),$o(e,t.child,null,n),t=Cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nA(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=Jd(Error(Y(422))),wc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Zh({mode:"visible",children:i.children},r,0,null),o=fs(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&$o(e,t.child,null,l),e.child.memoizedState=ip(l),e.memoizedState=np,o);if(!(e.mode&1))return wc(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Y(419)),i=Jd(o,i,void 0),wc(t,e,l,i)}if(h=(l&t.childLanes)!==0,Yt||h){if(i=Tt,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Mi(t,r),Bn(i,t,r,-1))}return bm(),i=Jd(Error(Y(421))),wc(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=mA.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,ln=wr(r.nextSibling),cn=e,He=!0,jn=null,t!==null&&(In[Pn++]=Ci,In[Pn++]=Ai,In[Pn++]=gs,Ci=t.id,Ai=t.overflow,gs=e),e=Cm(e,i.children),e.flags|=4096,e)}function pv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Qf(t.return,e,n)}function ef(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Y0(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Bt(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pv(t,n,e);else if(t.tag===19)pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(je(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&dh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ef(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&dh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ef(e,!0,n,null,o);break;case"together":ef(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iA(t,e,n){switch(e.tag){case 3:Z0(e),Bo();break;case 5:I0(e);break;case 1:Jt(e.type)&&oh(e);break;case 4:vm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;je(uh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?Q0(t,e,n):(je(Ke,Ke.current&1),t=Vi(t,e,n),t!==null?t.sibling:null);je(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Y0(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,G0(t,e,n)}return Vi(t,e,n)}var X0,rp,J0,eE;X0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rp=function(){};J0=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ls(si.current);var o=null;switch(n){case"input":r=Cf(t,r),i=Cf(t,i),o=[];break;case"select":r=Qe({},r,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":r=kf(t,r),i=kf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=rh)}Lf(n,i);var l;n=null;for(p in r)if(!i.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var h=r[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Rl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=r!=null?r[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Rl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&ze("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};eE=function(t,e,n,i){n!==i&&(e.flags|=4)};function tl(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function rA(t,e,n){var i=e.pendingProps;switch(hm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Jt(e.type)&&sh(),bt(e),null;case 3:return i=e.stateNode,Wo(),Be(Xt),Be(Vt),wm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(vc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(dp(jn),jn=null))),rp(t,e),bt(e),null;case 5:ym(e);var r=ls(Bl.current);if(n=e.type,t!==null&&e.stateNode!=null)J0(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return bt(e),null}if(t=ls(si.current),vc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ni]=e,i[zl]=o,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(r=0;r<al.length;r++)ze(al[r],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":I_(i,o),ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ze("invalid",i);break;case"textarea":S_(i,o),ze("invalid",i)}Lf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&_c(i.textContent,h,t),r=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&_c(i.textContent,h,t),r=["children",""+h]):Rl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ze("scroll",i)}switch(n){case"input":uc(i),P_(i,o,!0);break;case"textarea":uc(i),C_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=rh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ni]=e,t[zl]=i,X0(t,e,!1,!1),e.stateNode=t;e:{switch(l=bf(n,i),n){case"dialog":ze("cancel",t),ze("close",t),r=i;break;case"iframe":case"object":case"embed":ze("load",t),r=i;break;case"video":case"audio":for(r=0;r<al.length;r++)ze(al[r],t);r=i;break;case"source":ze("error",t),r=i;break;case"img":case"image":case"link":ze("error",t),ze("load",t),r=i;break;case"details":ze("toggle",t),r=i;break;case"input":I_(t,i),r=Cf(t,i),ze("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Qe({},i,{value:void 0}),ze("invalid",t);break;case"textarea":S_(t,i),r=kf(t,i),ze("invalid",t);break;default:r=i}Lf(n,r),h=r;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Lw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&kw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ll(t,d):typeof d=="number"&&Ll(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Rl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ze("scroll",t):d!=null&&Qp(t,o,d,l))}switch(n){case"input":uc(t),P_(t,i,!1);break;case"textarea":uc(t),C_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+kr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ro(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ro(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=rh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)eE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ls(Bl.current),ls(si.current),vc(e)){if(i=e.stateNode,n=e.memoizedProps,i[ni]=e,(o=i.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:_c(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_c(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ni]=e,e.stateNode=i}return bt(e),null;case 13:if(Be(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&ln!==null&&e.mode&1&&!(e.flags&128))v0(),Bo(),e.flags|=98560,o=!1;else if(o=vc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[ni]=e}else Bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),o=!1}else jn!==null&&(dp(jn),jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?mt===0&&(mt=3):bm())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return Wo(),rp(t,e),t===null&&Fl(e.stateNode.containerInfo),bt(e),null;case 10:return mm(e.type._context),bt(e),null;case 17:return Jt(e.type)&&sh(),bt(e),null;case 19:if(Be(Ke),o=e.memoizedState,o===null)return bt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)tl(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=dh(t),l!==null){for(e.flags|=128,tl(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>qo&&(e.flags|=128,i=!0,tl(o,!1),e.lanes=4194304)}else{if(!i)if(t=dh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return bt(e),null}else 2*it()-o.renderingStartTime>qo&&n!==1073741824&&(e.flags|=128,i=!0,tl(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ke.current,je(Ke,i?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return Lm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?an&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function sA(t,e){switch(hm(e),e.tag){case 1:return Jt(e.type)&&sh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),Be(Xt),Be(Vt),wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ym(e),null;case 13:if(Be(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ke),null;case 4:return Wo(),null;case 10:return mm(e.type._context),null;case 22:case 23:return Lm(),null;case 24:return null;default:return null}}var Ec=!1,Dt=!1,oA=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function sp(t,e,n){try{n()}catch(i){et(t,e,i)}}var mv=!1;function aA(t,e){if(Bf=th,t=s0(),um(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,_=0,y=t,T=null;t:for(;;){for(var C;y!==n||r!==0&&y.nodeType!==3||(h=l+r),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(C=y.firstChild)!==null;)T=y,y=C;for(;;){if(y===t)break t;if(T===n&&++p===r&&(h=l),T===o&&++_===i&&(d=l),(C=y.nextSibling)!==null)break;y=T,T=y.parentNode}y=C}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for($f={focusedElem:t,selectionRange:n},th=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var V=D.memoizedProps,U=D.memoizedState,R=e.stateNode,A=R.getSnapshotBeforeUpdate(e.elementType===e.type?V:Vn(e.type,V),U);R.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(H){et(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return D=mv,mv=!1,D}function wl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&sp(e,n,o)}r=r.next}while(r!==i)}}function Gh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function op(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tE(t){var e=t.alternate;e!==null&&(t.alternate=null,tE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ni],delete e[zl],delete e[qf],delete e[$C],delete e[WC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nE(t){return t.tag===5||t.tag===3||t.tag===4}function gv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ap(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rh));else if(i!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}function lp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}var Pt=null,Fn=!1;function nr(t,e,n){for(n=n.child;n!==null;)iE(t,e,n),n=n.sibling}function iE(t,e,n){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(jh,n)}catch{}switch(n.tag){case 5:Dt||Ao(n,e);case 6:var i=Pt,r=Fn;Pt=null,nr(t,e,n),Pt=i,Fn=r,Pt!==null&&(Fn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Fn?(t=Pt,n=n.stateNode,t.nodeType===8?Gd(t.parentNode,n):t.nodeType===1&&Gd(t,n),Dl(t)):Gd(Pt,n.stateNode));break;case 4:i=Pt,r=Fn,Pt=n.stateNode.containerInfo,Fn=!0,nr(t,e,n),Pt=i,Fn=r;break;case 0:case 11:case 14:case 15:if(!Dt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&sp(n,e,l),r=r.next}while(r!==i)}nr(t,e,n);break;case 1:if(!Dt&&(Ao(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:n.mode&1?(Dt=(i=Dt)||n.memoizedState!==null,nr(t,e,n),Dt=i):nr(t,e,n);break;default:nr(t,e,n)}}function _v(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oA),e.forEach(function(i){var r=gA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Pt=h.stateNode,Fn=!1;break e;case 3:Pt=h.stateNode.containerInfo,Fn=!0;break e;case 4:Pt=h.stateNode.containerInfo,Fn=!0;break e}h=h.return}if(Pt===null)throw Error(Y(160));iE(o,l,r),Pt=null,Fn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(p){et(r,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rE(e,t),e=e.sibling}function rE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),ei(t),i&4){try{wl(3,t,t.return),Gh(3,t)}catch(V){et(t,t.return,V)}try{wl(5,t,t.return)}catch(V){et(t,t.return,V)}}break;case 1:Mn(e,t),ei(t),i&512&&n!==null&&Ao(n,n.return);break;case 5:if(Mn(e,t),ei(t),i&512&&n!==null&&Ao(n,n.return),t.flags&32){var r=t.stateNode;try{Ll(r,"")}catch(V){et(t,t.return,V)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Cw(r,o),bf(h,l);var p=bf(h,o);for(l=0;l<d.length;l+=2){var _=d[l],y=d[l+1];_==="style"?Lw(r,y):_==="dangerouslySetInnerHTML"?kw(r,y):_==="children"?Ll(r,y):Qp(r,_,y,p)}switch(h){case"input":Af(r,o);break;case"textarea":Aw(r,o);break;case"select":var T=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var C=o.value;C!=null?Ro(r,!!o.multiple,C,!1):T!==!!o.multiple&&(o.defaultValue!=null?Ro(r,!!o.multiple,o.defaultValue,!0):Ro(r,!!o.multiple,o.multiple?[]:"",!1))}r[zl]=o}catch(V){et(t,t.return,V)}}break;case 6:if(Mn(e,t),ei(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(V){et(t,t.return,V)}}break;case 3:if(Mn(e,t),ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Dl(e.containerInfo)}catch(V){et(t,t.return,V)}break;case 4:Mn(e,t),ei(t);break;case 13:Mn(e,t),ei(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(km=it())),i&4&&_v(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(p=Dt)||_,Mn(e,t),Dt=p):Mn(e,t),ei(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(ne=t,_=t.child;_!==null;){for(y=ne=_;ne!==null;){switch(T=ne,C=T.child,T.tag){case 0:case 11:case 14:case 15:wl(4,T,T.return);break;case 1:Ao(T,T.return);var D=T.stateNode;if(typeof D.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(V){et(i,n,V)}}break;case 5:Ao(T,T.return);break;case 22:if(T.memoizedState!==null){yv(y);continue}}C!==null?(C.return=T,ne=C):yv(y)}_=_.sibling}e:for(_=null,y=t;;){if(y.tag===5){if(_===null){_=y;try{r=y.stateNode,p?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Rw("display",l))}catch(V){et(t,t.return,V)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(V){et(t,t.return,V)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Mn(e,t),ei(t),i&4&&_v(t);break;case 21:break;default:Mn(e,t),ei(t)}}function ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ll(r,""),i.flags&=-33);var o=gv(t);lp(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,h=gv(t);ap(t,h,l);break;default:throw Error(Y(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lA(t,e,n){ne=t,sE(t)}function sE(t,e,n){for(var i=(t.mode&1)!==0;ne!==null;){var r=ne,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||Ec;if(!l){var h=r.alternate,d=h!==null&&h.memoizedState!==null||Dt;h=Ec;var p=Dt;if(Ec=l,(Dt=d)&&!p)for(ne=r;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?wv(r):d!==null?(d.return=l,ne=d):wv(r);for(;o!==null;)ne=o,sE(o),o=o.sibling;ne=r,Ec=h,Dt=p}vv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ne=o):vv(t)}}function vv(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Gh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Dt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&nv(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nv(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&Dl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Dt||e.flags&512&&op(e)}catch(T){et(e,e.return,T)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function yv(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function wv(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){et(e,r,d)}}var o=e.return;try{op(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{op(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){ne=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ne=h;break}ne=e.return}}var uA=Math.ceil,mh=$i.ReactCurrentDispatcher,Am=$i.ReactCurrentOwner,Cn=$i.ReactCurrentBatchConfig,Re=0,Tt=null,ct=null,At=0,an=0,xo=Dr(0),mt=0,ql=null,vs=0,Kh=0,xm=0,El=null,Zt=null,km=0,qo=1/0,Pi=null,gh=!1,up=null,Tr=null,Tc=!1,pr=null,_h=0,Tl=0,cp=null,Fc=-1,jc=0;function Wt(){return Re&6?it():Fc!==-1?Fc:Fc=it()}function Ir(t){return t.mode&1?Re&2&&At!==0?At&-At:qC.transition!==null?(jc===0&&(jc=$w()),jc):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Qw(t.type)),t):1}function Bn(t,e,n,i){if(50<Tl)throw Tl=0,cp=null,Error(Y(185));ou(t,n,i),(!(Re&2)||t!==Tt)&&(t===Tt&&(!(Re&2)&&(Kh|=n),mt===4&&lr(t,At)),en(t,i),n===1&&Re===0&&!(e.mode&1)&&(qo=it()+500,Wh&&Mr()))}function en(t,e){var n=t.callbackNode;qS(t,e);var i=eh(t,t===Tt?At:0);if(i===0)n!==null&&k_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&k_(n),e===1)t.tag===0?HC(Ev.bind(null,t)):m0(Ev.bind(null,t)),UC(function(){!(Re&6)&&Mr()}),n=null;else{switch(Ww(i)){case 1:n=tm;break;case 4:n=Uw;break;case 16:n=Jc;break;case 536870912:n=Bw;break;default:n=Jc}n=fE(n,oE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oE(t,e){if(Fc=-1,jc=0,Re&6)throw Error(Y(327));var n=t.callbackNode;if(Do()&&t.callbackNode!==n)return null;var i=eh(t,t===Tt?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=vh(t,i);else{e=i;var r=Re;Re|=2;var o=lE();(Tt!==t||At!==e)&&(Pi=null,qo=it()+500,ds(t,e));do try{dA();break}catch(h){aE(t,h)}while(!0);pm(),mh.current=o,Re=r,ct!==null?e=0:(Tt=null,At=0,e=mt)}if(e!==0){if(e===2&&(r=Vf(t),r!==0&&(i=r,e=hp(t,r))),e===1)throw n=ql,ds(t,0),lr(t,i),en(t,it()),n;if(e===6)lr(t,i);else{if(r=t.current.alternate,!(i&30)&&!cA(r)&&(e=vh(t,i),e===2&&(o=Vf(t),o!==0&&(i=o,e=hp(t,o))),e===1))throw n=ql,ds(t,0),lr(t,i),en(t,it()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:is(t,Zt,Pi);break;case 3:if(lr(t,i),(i&130023424)===i&&(e=km+500-it(),10<e)){if(eh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Wt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Hf(is.bind(null,t,Zt,Pi),e);break}is(t,Zt,Pi);break;case 4:if(lr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-Un(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*uA(i/1960))-i,10<i){t.timeoutHandle=Hf(is.bind(null,t,Zt,Pi),i);break}is(t,Zt,Pi);break;case 5:is(t,Zt,Pi);break;default:throw Error(Y(329))}}}return en(t,it()),t.callbackNode===n?oE.bind(null,t):null}function hp(t,e){var n=El;return t.current.memoizedState.isDehydrated&&(ds(t,e).flags|=256),t=vh(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&dp(e)),t}function dp(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function cA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Hn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~xm,e&=~Kh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),i=1<<n;t[n]=-1,e&=~i}}function Ev(t){if(Re&6)throw Error(Y(327));Do();var e=eh(t,0);if(!(e&1))return en(t,it()),null;var n=vh(t,e);if(t.tag!==0&&n===2){var i=Vf(t);i!==0&&(e=i,n=hp(t,i))}if(n===1)throw n=ql,ds(t,0),lr(t,e),en(t,it()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,Zt,Pi),en(t,it()),null}function Rm(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(qo=it()+500,Wh&&Mr())}}function ys(t){pr!==null&&pr.tag===0&&!(Re&6)&&Do();var e=Re;Re|=1;var n=Cn.transition,i=Oe;try{if(Cn.transition=null,Oe=1,t)return t()}finally{Oe=i,Cn.transition=n,Re=e,!(Re&6)&&Mr()}}function Lm(){an=xo.current,Be(xo)}function ds(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zC(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(hm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&sh();break;case 3:Wo(),Be(Xt),Be(Vt),wm();break;case 5:ym(i);break;case 4:Wo();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:mm(i.type._context);break;case 22:case 23:Lm()}n=n.return}if(Tt=t,ct=t=Pr(t.current,null),At=an=e,mt=0,ql=null,xm=Kh=vs=0,Zt=El=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}as=null}return t}function aE(t,e){do{var n=ct;try{if(pm(),Dc.current=ph,fh){for(var i=Ze.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}fh=!1}if(_s=0,Et=pt=Ze=null,yl=!1,$l=0,Am.current=null,n===null||n.return===null){mt=1,ql=e,ct=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=h,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var T=_.alternate;T?(_.updateQueue=T.updateQueue,_.memoizedState=T.memoizedState,_.lanes=T.lanes):(_.updateQueue=null,_.memoizedState=null)}var C=lv(l);if(C!==null){C.flags&=-257,uv(C,l,h,o,e),C.mode&1&&av(o,p,e),e=C,d=p;var D=e.updateQueue;if(D===null){var V=new Set;V.add(d),e.updateQueue=V}else D.add(d);break e}else{if(!(e&1)){av(o,p,e),bm();break e}d=Error(Y(426))}}else if(He&&h.mode&1){var U=lv(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),uv(U,l,h,o,e),dm(Ho(d,h));break e}}o=d=Ho(d,h),mt!==4&&(mt=2),El===null?El=[o]:El.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=W0(o,d,e);tv(o,R);break e;case 1:h=d;var A=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof A.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Tr===null||!Tr.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=H0(o,h,e);tv(o,H);break e}}o=o.return}while(o!==null)}cE(n)}catch(X){e=X,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function lE(){var t=mh.current;return mh.current=ph,t===null?ph:t}function bm(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(vs&268435455)&&!(Kh&268435455)||lr(Tt,At)}function vh(t,e){var n=Re;Re|=2;var i=lE();(Tt!==t||At!==e)&&(Pi=null,ds(t,e));do try{hA();break}catch(r){aE(t,r)}while(!0);if(pm(),Re=n,mh.current=i,ct!==null)throw Error(Y(261));return Tt=null,At=0,mt}function hA(){for(;ct!==null;)uE(ct)}function dA(){for(;ct!==null&&!VS();)uE(ct)}function uE(t){var e=dE(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?cE(t):ct=e,Am.current=null}function cE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sA(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ct=null;return}}else if(n=rA(n,e,an),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);mt===0&&(mt=5)}function is(t,e,n){var i=Oe,r=Cn.transition;try{Cn.transition=null,Oe=1,fA(t,e,n,i)}finally{Cn.transition=r,Oe=i}return null}function fA(t,e,n,i){do Do();while(pr!==null);if(Re&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(GS(t,o),t===Tt&&(ct=Tt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tc||(Tc=!0,fE(Jc,function(){return Do(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Cn.transition,Cn.transition=null;var l=Oe;Oe=1;var h=Re;Re|=4,Am.current=null,aA(t,n),rE(n,t),NC($f),th=!!Bf,$f=Bf=null,t.current=n,lA(n),FS(),Re=h,Oe=l,Cn.transition=o}else t.current=n;if(Tc&&(Tc=!1,pr=t,_h=r),o=t.pendingLanes,o===0&&(Tr=null),US(n.stateNode),en(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(gh)throw gh=!1,t=up,up=null,t;return _h&1&&t.tag!==0&&Do(),o=t.pendingLanes,o&1?t===cp?Tl++:(Tl=0,cp=t):Tl=0,Mr(),null}function Do(){if(pr!==null){var t=Ww(_h),e=Cn.transition,n=Oe;try{if(Cn.transition=null,Oe=16>t?16:t,pr===null)var i=!1;else{if(t=pr,pr=null,_h=0,Re&6)throw Error(Y(331));var r=Re;for(Re|=4,ne=t.current;ne!==null;){var o=ne,l=o.child;if(ne.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(ne=p;ne!==null;){var _=ne;switch(_.tag){case 0:case 11:case 15:wl(8,_,o)}var y=_.child;if(y!==null)y.return=_,ne=y;else for(;ne!==null;){_=ne;var T=_.sibling,C=_.return;if(tE(_),_===p){ne=null;break}if(T!==null){T.return=C,ne=T;break}ne=C}}}var D=o.alternate;if(D!==null){var V=D.child;if(V!==null){D.child=null;do{var U=V.sibling;V.sibling=null,V=U}while(V!==null)}}ne=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ne=l;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wl(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,ne=R;break e}ne=o.return}}var A=t.current;for(ne=A;ne!==null;){l=ne;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,ne=N;else e:for(l=A;ne!==null;){if(h=ne,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Gh(9,h)}}catch(X){et(h,h.return,X)}if(h===l){ne=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ne=H;break e}ne=h.return}}if(Re=r,Mr(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(jh,t)}catch{}i=!0}return i}finally{Oe=n,Cn.transition=e}}return!1}function Tv(t,e,n){e=Ho(n,e),e=W0(t,e,1),t=Er(t,e,1),e=Wt(),t!==null&&(ou(t,1,e),en(t,e))}function et(t,e,n){if(t.tag===3)Tv(t,t,n);else for(;e!==null;){if(e.tag===3){Tv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Tr===null||!Tr.has(i))){t=Ho(n,t),t=H0(e,t,1),e=Er(e,t,1),t=Wt(),e!==null&&(ou(e,1,t),en(e,t));break}}e=e.return}}function pA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(At&n)===n&&(mt===4||mt===3&&(At&130023424)===At&&500>it()-km?ds(t,0):xm|=n),en(t,e)}function hE(t,e){e===0&&(t.mode&1?(e=dc,dc<<=1,!(dc&130023424)&&(dc=4194304)):e=1);var n=Wt();t=Mi(t,e),t!==null&&(ou(t,e,n),en(t,n))}function mA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hE(t,n)}function gA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),hE(t,n)}var dE;dE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,iA(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,He&&e.flags&1048576&&g0(e,lh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Vc(t,e),t=e.pendingProps;var r=Uo(e,Vt.current);Oo(e,n),r=Tm(null,e,i,t,r,n);var o=Im();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(o=!0,oh(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,_m(e),r.updater=qh,e.stateNode=r,r._reactInternals=e,Xf(e,i,t,n),e=tp(null,e,i,!0,o,n)):(e.tag=0,He&&o&&cm(e),Bt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Vc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=vA(i),t=Vn(i,t),r){case 0:e=ep(null,e,i,t,n);break e;case 1:e=dv(null,e,i,t,n);break e;case 11:e=cv(null,e,i,t,n);break e;case 14:e=hv(null,e,i,Vn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),ep(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),dv(t,e,i,r,n);case 3:e:{if(Z0(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,T0(t,e),hh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Ho(Error(Y(423)),e),e=fv(t,e,i,n,r);break e}else if(i!==r){r=Ho(Error(Y(424)),e),e=fv(t,e,i,n,r);break e}else for(ln=wr(e.stateNode.containerInfo.firstChild),cn=e,He=!0,jn=null,n=w0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bo(),i===r){e=Vi(t,e,n);break e}Bt(t,e,i,n)}e=e.child}return e;case 5:return I0(e),t===null&&Zf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,Wf(i,r)?l=null:o!==null&&Wf(i,o)&&(e.flags|=32),K0(t,e),Bt(t,e,l,n),e.child;case 6:return t===null&&Zf(e),null;case 13:return Q0(t,e,n);case 4:return vm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=$o(e,null,i,n):Bt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),cv(t,e,i,r,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,je(uh,i._currentValue),i._currentValue=l,o!==null)if(Hn(o.value,l)){if(o.children===r.children&&!Xt.current){e=Vi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Li(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Qf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Qf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Bt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Oo(e,n),r=xn(r),i=i(r),e.flags|=1,Bt(t,e,i,n),e.child;case 14:return i=e.type,r=Vn(i,e.pendingProps),r=Vn(i.type,r),hv(t,e,i,r,n);case 15:return q0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vn(i,r),Vc(t,e),e.tag=1,Jt(i)?(t=!0,oh(e)):t=!1,Oo(e,n),$0(e,i,r),Xf(e,i,r,n),tp(null,e,i,!0,t,n);case 19:return Y0(t,e,n);case 22:return G0(t,e,n)}throw Error(Y(156,e.tag))};function fE(t,e){return zw(t,e)}function _A(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,i){return new _A(t,e,n,i)}function Nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vA(t){if(typeof t=="function")return Nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xp)return 11;if(t===Jp)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zc(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")Nm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case vo:return fs(n.children,r,o,e);case Yp:l=8,r|=8;break;case Tf:return t=Sn(12,n,e,r|2),t.elementType=Tf,t.lanes=o,t;case If:return t=Sn(13,n,e,r),t.elementType=If,t.lanes=o,t;case Pf:return t=Sn(19,n,e,r),t.elementType=Pf,t.lanes=o,t;case Iw:return Zh(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ew:l=10;break e;case Tw:l=9;break e;case Xp:l=11;break e;case Jp:l=14;break e;case sr:l=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Sn(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function fs(t,e,n,i){return t=Sn(7,t,i,e),t.lanes=n,t}function Zh(t,e,n,i){return t=Sn(22,t,i,e),t.elementType=Iw,t.lanes=n,t.stateNode={isHidden:!1},t}function tf(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function nf(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Md(0),this.expirationTimes=Md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Om(t,e,n,i,r,o,l,h,d){return t=new yA(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Sn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_m(o),t}function wA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_o,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function pE(t){if(!t)return Rr;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Jt(n))return p0(t,n,e)}return e}function mE(t,e,n,i,r,o,l,h,d){return t=Om(n,i,!0,t,r,o,l,h,d),t.context=pE(null),n=t.current,i=Wt(),r=Ir(n),o=Li(i,r),o.callback=e??null,Er(n,o,r),t.current.lanes=r,ou(t,r,i),en(t,i),t}function Qh(t,e,n,i){var r=e.current,o=Wt(),l=Ir(r);return n=pE(n),e.context===null?e.context=n:e.pendingContext=n,e=Li(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Er(r,e,l),t!==null&&(Bn(t,r,l,o),Oc(t,r,l)),l}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dm(t,e){Iv(t,e),(t=t.alternate)&&Iv(t,e)}function EA(){return null}var gE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mm(t){this._internalRoot=t}Yh.prototype.render=Mm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Qh(t,e,null,null)};Yh.prototype.unmount=Mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){Qh(null,t,null,null)}),e[Di]=null}};function Yh(t){this._internalRoot=t}Yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ar.length&&e!==0&&e<ar[n].priority;n++);ar.splice(n,0,t),n===0&&Zw(t)}};function Vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pv(){}function TA(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var p=yh(l);o.call(p)}}var l=mE(e,i,t,0,null,!1,!1,"",Pv);return t._reactRootContainer=l,t[Di]=l.current,Fl(t.nodeType===8?t.parentNode:t),ys(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var h=i;i=function(){var p=yh(d);h.call(p)}}var d=Om(t,0,!1,null,null,!1,!1,"",Pv);return t._reactRootContainer=d,t[Di]=d.current,Fl(t.nodeType===8?t.parentNode:t),ys(function(){Qh(e,d,n,i)}),d}function Jh(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var h=r;r=function(){var d=yh(l);h.call(d)}}Qh(e,l,t,r)}else l=TA(n,e,t,r,i);return yh(l)}Hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ol(e.pendingLanes);n!==0&&(nm(e,n|1),en(e,it()),!(Re&6)&&(qo=it()+500,Mr()))}break;case 13:ys(function(){var i=Mi(t,1);if(i!==null){var r=Wt();Bn(i,t,1,r)}}),Dm(t,1)}};im=function(t){if(t.tag===13){var e=Mi(t,134217728);if(e!==null){var n=Wt();Bn(e,t,134217728,n)}Dm(t,134217728)}};qw=function(t){if(t.tag===13){var e=Ir(t),n=Mi(t,e);if(n!==null){var i=Wt();Bn(n,t,e,i)}Dm(t,e)}};Gw=function(){return Oe};Kw=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Of=function(t,e,n){switch(e){case"input":if(Af(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=$h(i);if(!r)throw Error(Y(90));Sw(i),Af(i,r)}}}break;case"textarea":Aw(t,n);break;case"select":e=n.value,e!=null&&Ro(t,!!n.multiple,e,!1)}};Ow=Rm;Dw=ys;var IA={usingClientEntryPoint:!1,Events:[lu,To,$h,bw,Nw,Rm]},nl={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PA={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fw(t),t===null?null:t.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||EA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{jh=Ic.inject(PA),ri=Ic}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IA;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(e))throw Error(Y(200));return wA(t,e,null,n)};fn.createRoot=function(t,e){if(!Vm(t))throw Error(Y(299));var n=!1,i="",r=gE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Om(t,1,!1,null,null,n,!1,i,r),t[Di]=e.current,Fl(t.nodeType===8?t.parentNode:t),new Mm(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Fw(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return ys(t)};fn.hydrate=function(t,e,n){if(!Xh(e))throw Error(Y(200));return Jh(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Vm(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=gE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=mE(e,null,t,1,n??null,r,!1,o,l),t[Di]=e.current,Fl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Yh(e)};fn.render=function(t,e,n){if(!Xh(e))throw Error(Y(200));return Jh(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Xh(t))throw Error(Y(40));return t._reactRootContainer?(ys(function(){Jh(null,null,t,!1,function(){t._reactRootContainer=null,t[Di]=null})}),!0):!1};fn.unstable_batchedUpdates=Rm;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Xh(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Jh(t,e,n,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function _E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_E)}catch(t){console.error(t)}}_E(),_w.exports=fn;var vE=_w.exports,yE,Sv=vE;yE=Sv.createRoot,Sv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gl.apply(this,arguments)}var mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mr||(mr={}));const Cv="popstate";function SA(t){t===void 0&&(t={});function e(r,o){let{pathname:l="/",search:h="",hash:d=""}=ks(r.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),fp("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let l=r.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let d=r.location.href,p=d.indexOf("#");h=p===-1?d:d.slice(0,p)}return h+"#"+(typeof o=="string"?o:wh(o))}function i(r,o){Fm(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return AA(e,n,i,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CA(){return Math.random().toString(36).substr(2,8)}function Av(t,e){return{usr:t.state,key:t.key,idx:e}}function fp(t,e,n,i){return n===void 0&&(n=null),Gl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ks(e):e,{state:n,key:e&&e.key||i||CA()})}function wh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ks(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function AA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,h=mr.Pop,d=null,p=_();p==null&&(p=0,l.replaceState(Gl({},l.state,{idx:p}),""));function _(){return(l.state||{idx:null}).idx}function y(){h=mr.Pop;let U=_(),R=U==null?null:U-p;p=U,d&&d({action:h,location:V.location,delta:R})}function T(U,R){h=mr.Push;let A=fp(V.location,U,R);n&&n(A,U),p=_()+1;let N=Av(A,p),H=V.createHref(A);try{l.pushState(N,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;r.location.assign(H)}o&&d&&d({action:h,location:V.location,delta:1})}function C(U,R){h=mr.Replace;let A=fp(V.location,U,R);n&&n(A,U),p=_();let N=Av(A,p),H=V.createHref(A);l.replaceState(N,"",H),o&&d&&d({action:h,location:V.location,delta:0})}function D(U){let R=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof U=="string"?U:wh(U);return A=A.replace(/ $/,"%20"),rt(R,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,R)}let V={get action(){return h},get location(){return t(r,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Cv,y),d=U,()=>{r.removeEventListener(Cv,y),d=null}},createHref(U){return e(r,U)},createURL:D,encodeLocation(U){let R=D(U);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:C,go(U){return l.go(U)}};return V}var xv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xv||(xv={}));function xA(t,e,n){return n===void 0&&(n="/"),kA(t,e,n)}function kA(t,e,n,i){let r=typeof e=="string"?ks(e):e,o=jm(r.pathname||"/",n);if(o==null)return null;let l=wE(t);RA(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=BA(o);h=jA(l[d],p)}return h}function wE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(rt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=Sr([i,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(rt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),wE(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:VA(p,o.index),routesMeta:_})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))r(o,l);else for(let d of EE(o.path))r(o,l,d)}),e}function EE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=EE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function RA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const LA=/^:[\w-]+$/,bA=3,NA=2,OA=1,DA=10,MA=-2,kv=t=>t==="*";function VA(t,e){let n=t.split("/"),i=n.length;return n.some(kv)&&(i+=MA),e&&(i+=NA),n.filter(r=>!kv(r)).reduce((r,o)=>r+(LA.test(o)?bA:o===""?OA:DA),i)}function FA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function jA(t,e,n){let{routesMeta:i}=t,r={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,_=o==="/"?e:e.slice(o.length)||"/",y=zA({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),T=d.route;if(!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:Sr([o,y.pathname]),pathnameBase:qA(Sr([o,y.pathnameBase])),route:T}),y.pathnameBase!=="/"&&(o=Sr([o,y.pathnameBase]))}return l}function zA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=UA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((p,_,y)=>{let{paramName:T,isOptional:C}=_;if(T==="*"){let V=h[y]||"";l=o.slice(0,o.length-V.length).replace(/(.)\/+$/,"$1")}const D=h[y];return C&&!D?p[T]=void 0:p[T]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function UA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function BA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function $A(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ks(t):t;return{pathname:n?n.startsWith("/")?n:WA(n,e):e,search:GA(i),hash:KA(r)}}function WA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function rf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zm(t,e){let n=HA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Um(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ks(t):(r=Gl({},t),rt(!r.pathname||!r.pathname.includes("?"),rf("?","pathname","search",r)),rt(!r.pathname||!r.pathname.includes("#"),rf("#","pathname","hash",r)),rt(!r.search||!r.search.includes("#"),rf("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,h;if(l==null)h=n;else{let y=e.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),y-=1;r.pathname=T.join("/")}h=y>=0?e[y]:"/"}let d=$A(r,h),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),qA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TE=["post","put","patch","delete"];new Set(TE);const QA=["get",...TE];new Set(QA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kl.apply(this,arguments)}const Bm=q.createContext(null),YA=q.createContext(null),Vr=q.createContext(null),ed=q.createContext(null),Fr=q.createContext({outlet:null,matches:[],isDataRoute:!1}),IE=q.createContext(null);function XA(t,e){let{relative:n}=e===void 0?{}:e;ra()||rt(!1);let{basename:i,navigator:r}=q.useContext(Vr),{hash:o,pathname:l,search:h}=SE(t,{relative:n}),d=l;return i!=="/"&&(d=l==="/"?i:Sr([i,l])),r.createHref({pathname:d,search:h,hash:o})}function ra(){return q.useContext(ed)!=null}function cu(){return ra()||rt(!1),q.useContext(ed).location}function PE(t){q.useContext(Vr).static||q.useLayoutEffect(t)}function sa(){let{isDataRoute:t}=q.useContext(Fr);return t?hx():JA()}function JA(){ra()||rt(!1);let t=q.useContext(Bm),{basename:e,future:n,navigator:i}=q.useContext(Vr),{matches:r}=q.useContext(Fr),{pathname:o}=cu(),l=JSON.stringify(zm(r,n.v7_relativeSplatPath)),h=q.useRef(!1);return PE(()=>{h.current=!0}),q.useCallback(function(p,_){if(_===void 0&&(_={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let y=Um(p,JSON.parse(l),o,_.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Sr([e,y.pathname])),(_.replace?i.replace:i.push)(y,_.state,_)},[e,i,l,o,t])}function SE(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=q.useContext(Vr),{matches:r}=q.useContext(Fr),{pathname:o}=cu(),l=JSON.stringify(zm(r,i.v7_relativeSplatPath));return q.useMemo(()=>Um(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function ex(t,e){return tx(t,e)}function tx(t,e,n,i){ra()||rt(!1);let{navigator:r}=q.useContext(Vr),{matches:o}=q.useContext(Fr),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=cu(),_;if(e){var y;let U=typeof e=="string"?ks(e):e;d==="/"||(y=U.pathname)!=null&&y.startsWith(d)||rt(!1),_=U}else _=p;let T=_.pathname||"/",C=T;if(d!=="/"){let U=d.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=xA(t,{pathname:C}),V=ox(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:Sr([d,r.encodeLocation?r.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:Sr([d,r.encodeLocation?r.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&V?q.createElement(ed.Provider,{value:{location:Kl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:mr.Pop}},V):V}function nx(){let t=cx(),e=ZA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:r},n):null,null)}const ix=q.createElement(nx,null);class rx extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Fr.Provider,{value:this.props.routeContext},q.createElement(IE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sx(t){let{routeContext:e,match:n,children:i}=t,r=q.useContext(Bm);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Fr.Provider,{value:e},i)}function ox(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(r=n)==null?void 0:r.errors;if(h!=null){let _=l.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);_>=0||rt(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let _=0;_<l.length;_++){let y=l[_];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=_),y.route.id){let{loaderData:T,errors:C}=n,D=y.route.loader&&T[y.route.id]===void 0&&(!C||C[y.route.id]===void 0);if(y.route.lazy||D){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((_,y,T)=>{let C,D=!1,V=null,U=null;n&&(C=h&&y.route.id?h[y.route.id]:void 0,V=y.route.errorElement||ix,d&&(p<0&&T===0?(dx("route-fallback"),D=!0,U=null):p===T&&(D=!0,U=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,T+1)),A=()=>{let N;return C?N=V:D?N=U:y.route.Component?N=q.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=_,q.createElement(sx,{match:y,routeContext:{outlet:_,matches:R,isDataRoute:n!=null},children:N})};return n&&(y.route.ErrorBoundary||y.route.errorElement||T===0)?q.createElement(rx,{location:n.location,revalidation:n.revalidation,component:V,error:C,children:A(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):A()},null)}var CE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CE||{}),AE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(AE||{});function ax(t){let e=q.useContext(Bm);return e||rt(!1),e}function lx(t){let e=q.useContext(YA);return e||rt(!1),e}function ux(t){let e=q.useContext(Fr);return e||rt(!1),e}function xE(t){let e=ux(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function cx(){var t;let e=q.useContext(IE),n=lx(),i=xE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function hx(){let{router:t}=ax(CE.UseNavigateStable),e=xE(AE.UseNavigateStable),n=q.useRef(!1);return PE(()=>{n.current=!0}),q.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Kl({fromRouteId:e},o)))},[t,e])}const Rv={};function dx(t,e,n){Rv[t]||(Rv[t]=!0)}function fx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function kE(t){let{to:e,replace:n,state:i,relative:r}=t;ra()||rt(!1);let{future:o,static:l}=q.useContext(Vr),{matches:h}=q.useContext(Fr),{pathname:d}=cu(),p=sa(),_=Um(e,zm(h,o.v7_relativeSplatPath),d,r==="path"),y=JSON.stringify(_);return q.useEffect(()=>p(JSON.parse(y),{replace:n,state:i,relative:r}),[p,y,r,n,i]),null}function rr(t){rt(!1)}function px(t){let{basename:e="/",children:n=null,location:i,navigationType:r=mr.Pop,navigator:o,static:l=!1,future:h}=t;ra()&&rt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:Kl({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=ks(i));let{pathname:_="/",search:y="",hash:T="",state:C=null,key:D="default"}=i,V=q.useMemo(()=>{let U=jm(_,d);return U==null?null:{location:{pathname:U,search:y,hash:T,state:C,key:D},navigationType:r}},[d,_,y,T,C,D,r]);return V==null?null:q.createElement(Vr.Provider,{value:p},q.createElement(ed.Provider,{children:n,value:V}))}function mx(t){let{children:e,location:n}=t;return ex(pp(e),n)}new Promise(()=>{});function pp(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(i,r)=>{if(!q.isValidElement(i))return;let o=[...e,r];if(i.type===q.Fragment){n.push.apply(n,pp(i.props.children,o));return}i.type!==rr&&rt(!1),!i.props.index||!i.props.children||rt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=pp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mp.apply(this,arguments)}function gx(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function _x(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vx(t,e){return t.button===0&&(!e||e==="_self")&&!_x(t)}const yx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wx="6";try{window.__reactRouterVersion=wx}catch{}const Ex="startTransition",Lv=pS[Ex];function Tx(t){let{basename:e,children:n,future:i,window:r}=t,o=q.useRef();o.current==null&&(o.current=SA({window:r,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},_=q.useCallback(y=>{p&&Lv?Lv(()=>d(y)):d(y)},[d,p]);return q.useLayoutEffect(()=>l.listen(_),[l,_]),q.useEffect(()=>fx(i),[i]),q.createElement(px,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}const Ix=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=q.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:_,viewTransition:y}=e,T=gx(e,yx),{basename:C}=q.useContext(Vr),D,V=!1;if(typeof p=="string"&&Px.test(p)&&(D=p,Ix))try{let N=new URL(window.location.href),H=p.startsWith("//")?new URL(N.protocol+p):new URL(p),X=jm(H.pathname,C);H.origin===N.origin&&X!=null?p=X+H.search+H.hash:V=!0}catch{}let U=XA(p,{relative:r}),R=Sx(p,{replace:l,state:h,target:d,preventScrollReset:_,relative:r,viewTransition:y});function A(N){i&&i(N),N.defaultPrevented||R(N)}return q.createElement("a",mp({},T,{href:D||U,onClick:V||o?i:A,ref:n,target:d}))});var bv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bv||(bv={}));var Nv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nv||(Nv={}));function Sx(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,d=sa(),p=cu(),_=SE(t,{relative:l});return q.useCallback(y=>{if(vx(y,n)){y.preventDefault();let T=i!==void 0?i:wh(p)===wh(_);d(t,{replace:T,state:r,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,_,i,r,n,t,o,l,h])}var Ov={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Cx=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],h=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,h=l?t[r+1]:0,d=r+2<t.length,p=d?t[r+2]:0,_=o>>2,y=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,C=p&63;d||(C=64,l||(T=64)),i.push(n[_],n[y],n[T],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Cx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||h==null||p==null||y==null)throw new Ax;const T=o<<2|h>>4;if(i.push(T),p!==64){const C=h<<4&240|p>>2;if(i.push(C),y!==64){const D=p<<6&192|y;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ax extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xx=function(t){const e=RE(t);return LE.encodeByteArray(e,!0)},Eh=function(t){return xx(t).replace(/\./g,"")},bE=function(t){try{return LE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=()=>kx().__FIREBASE_DEFAULTS__,Lx=()=>{if(typeof process>"u"||typeof Ov>"u")return;const t=Ov.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bE(t[1]);return e&&JSON.parse(e)},td=()=>{try{return Rx()||Lx()||bx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NE=t=>{var e,n;return(n=(e=td())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nx=t=>{const e=NE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},OE=()=>{var t;return(t=td())===null||t===void 0?void 0:t.config},DE=t=>{var e;return(e=td())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Eh(JSON.stringify(n)),Eh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function Vx(){var t;const e=(t=td())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ME(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zx(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ux(){return!Vx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VE(){try{return typeof indexedDB=="object"}catch{return!1}}function FE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function Bx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="FirebaseError";class Kn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=$x,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rs.prototype.create)}}class Rs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?Wx(o,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Kn(r,h,i)}}function Wx(t,e){return t.replace(Hx,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Hx=/\{\$([^}]+)}/g;function qx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(Dv(o)&&Dv(l)){if(!Zl(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Dv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ll(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function ul(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Gx(t,e){const n=new Kx(t,e);return n.subscribe.bind(n)}class Kx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Zx(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=sf),r.error===void 0&&(r.error=sf),r.complete===void 0&&(r.complete=sf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=1e3,Yx=2,Xx=4*60*60*1e3,Jx=.5;function Mv(t,e=Qx,n=Yx){const i=e*Math.pow(n,t),r=Math.round(Jx*i*(Math.random()-.5)*2);return Math.min(Xx,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class qn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ox;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nk(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tk(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tk(t){return t===rs?void 0:t}function nk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ek(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const rk={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},sk=Ae.INFO,ok={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},ak=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ok[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nd{constructor(e){this.name=e,this._logLevel=sk,this._logHandler=ak,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const lk=(t,e)=>e.some(n=>t instanceof n);let Vv,Fv;function uk(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ck(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,gp=new WeakMap,zE=new WeakMap,of=new WeakMap,$m=new WeakMap;function hk(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Cr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&jE.set(n,t)}).catch(()=>{}),$m.set(e,t),e}function dk(t){if(gp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});gp.set(t,e)}let _p={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fk(t){_p=t(_p)}function pk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(af(this),e,...n);return zE.set(i,e.sort?e.sort():[e]),Cr(i)}:ck().includes(t)?function(...e){return t.apply(af(this),e),Cr(jE.get(this))}:function(...e){return Cr(t.apply(af(this),e))}}function mk(t){return typeof t=="function"?pk(t):(t instanceof IDBTransaction&&dk(t),lk(t,uk())?new Proxy(t,_p):t)}function Cr(t){if(t instanceof IDBRequest)return hk(t);if(of.has(t))return of.get(t);const e=mk(t);return e!==t&&(of.set(t,e),$m.set(e,t)),e}const af=t=>$m.get(t);function UE(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),h=Cr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Cr(l.result),d.oldVersion,d.newVersion,Cr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const gk=["get","getKey","getAll","getAllKeys","count"],_k=["put","add","delete","clear"],lf=new Map;function jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lf.get(e))return lf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=_k.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||gk.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,r?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&d.done]))[0]};return lf.set(e,o),o}fk(t=>({...t,get:(e,n,i)=>jv(e,n)||t.get(e,n,i),has:(e,n)=>!!jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yk(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function yk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vp="@firebase/app",zv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new nd("@firebase/app"),wk="@firebase/app-compat",Ek="@firebase/analytics-compat",Tk="@firebase/analytics",Ik="@firebase/app-check-compat",Pk="@firebase/app-check",Sk="@firebase/auth",Ck="@firebase/auth-compat",Ak="@firebase/database",xk="@firebase/data-connect",kk="@firebase/database-compat",Rk="@firebase/functions",Lk="@firebase/functions-compat",bk="@firebase/installations",Nk="@firebase/installations-compat",Ok="@firebase/messaging",Dk="@firebase/messaging-compat",Mk="@firebase/performance",Vk="@firebase/performance-compat",Fk="@firebase/remote-config",jk="@firebase/remote-config-compat",zk="@firebase/storage",Uk="@firebase/storage-compat",Bk="@firebase/firestore",$k="@firebase/vertexai-preview",Wk="@firebase/firestore-compat",Hk="firebase",qk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",Gk={[vp]:"fire-core",[wk]:"fire-core-compat",[Tk]:"fire-analytics",[Ek]:"fire-analytics-compat",[Pk]:"fire-app-check",[Ik]:"fire-app-check-compat",[Sk]:"fire-auth",[Ck]:"fire-auth-compat",[Ak]:"fire-rtdb",[xk]:"fire-data-connect",[kk]:"fire-rtdb-compat",[Rk]:"fire-fn",[Lk]:"fire-fn-compat",[bk]:"fire-iid",[Nk]:"fire-iid-compat",[Ok]:"fire-fcm",[Dk]:"fire-fcm-compat",[Mk]:"fire-perf",[Vk]:"fire-perf-compat",[Fk]:"fire-rc",[jk]:"fire-rc-compat",[zk]:"fire-gcs",[Uk]:"fire-gcs-compat",[Bk]:"fire-fst",[Wk]:"fire-fst-compat",[$k]:"fire-vertex","fire-js":"fire-js",[Hk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,Kk=new Map,wp=new Map;function Uv(t,e){try{t.container.addComponent(e)}catch(n){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ui(t){const e=t.name;if(wp.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,t);for(const n of Th.values())Uv(n,t);for(const n of Kk.values())Uv(n,t);return!0}function Ls(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Rs("app","Firebase",Zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=qk;function BE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ar.create("bad-app-name",{appName:String(r)});if(n||(n=OE()),!n)throw Ar.create("no-options");const o=Th.get(r);if(o){if(Zl(n,o.options)&&Zl(i,o.config))return o;throw Ar.create("duplicate-app",{appName:r})}const l=new ik(r);for(const d of wp.values())l.addComponent(d);const h=new Qk(n,i,l);return Th.set(r,h),h}function Wm(t=yp){const e=Th.get(t);if(!e&&t===yp&&OE())return BE();if(!e)throw Ar.create("no-app",{appName:t});return e}function An(t,e,n){var i;let r=(i=Gk[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(h.join(" "));return}ui(new qn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="firebase-heartbeat-database",Xk=1,Ql="firebase-heartbeat-store";let uf=null;function $E(){return uf||(uf=UE(Yk,Xk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),uf}async function Jk(t){try{const n=(await $E()).transaction(Ql),i=await n.objectStore(Ql).get(WE(t));return await n.done,i}catch(e){if(e instanceof Kn)Fi.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(n.message)}}}async function Bv(t,e){try{const i=(await $E()).transaction(Ql,"readwrite");await i.objectStore(Ql).put(e,WE(t)),await i.done}catch(n){if(n instanceof Kn)Fi.warn(n.message);else{const i=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fi.warn(i.message)}}}function WE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=1024,t1=30*24*60*60*1e3;class n1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new r1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$v();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=t1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Fi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$v(),{heartbeatsToSend:i,unsentEntries:r}=i1(this._heartbeatsCache.heartbeats),o=Eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fi.warn(n),""}}}function $v(){return new Date().toISOString().substring(0,10)}function i1(t,e=e1){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),Wv(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Wv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class r1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VE()?FE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wv(t){return Eh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){ui(new qn("platform-logger",e=>new vk(e),"PRIVATE")),ui(new qn("heartbeat",e=>new n1(e),"PRIVATE")),An(vp,zv,t),An(vp,zv,"esm2017"),An("fire-js","")}s1("");function Hm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function HE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o1=HE,qE=new Rs("auth","Firebase",HE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new nd("@firebase/auth");function a1(t,...e){Ih.logLevel<=Ae.WARN&&Ih.warn(`Auth (${oa}): ${t}`,...e)}function Uc(t,...e){Ih.logLevel<=Ae.ERROR&&Ih.error(`Auth (${oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw Gm(t,...e)}function $n(t,...e){return Gm(t,...e)}function qm(t,e,n){const i=Object.assign(Object.assign({},o1()),{[e]:n});return new Rs("auth","Firebase",i).create(e,{appName:t.name})}function bi(t){return qm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function l1(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Rn(t,"argument-error"),qm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return qE.create(t,...e)}function he(t,e,...n){if(!t)throw Gm(e,...n)}function xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uc(e),new Error(e)}function ji(t,e){t||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function u1(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u1()||ME()||"connection"in navigator)?navigator.onLine:!0}function h1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=Mx()||jx()}get(){return c1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e){ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new du(3e4,6e4);function jr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wi(t,e,n,i,r={}){return KE(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=hu(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},o);return Fx()||(p.referrerPolicy="no-referrer"),GE.fetch()(ZE(t,t.config.apiHost,n,h),p)})}async function KE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},d1),e);try{const r=new m1(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Pc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Pc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Pc(t,"user-disabled",l);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qm(t,_,p);Rn(t,_)}}catch(r){if(r instanceof Kn)throw r;Rn(t,"network-request-failed",{message:String(r)})}}async function fu(t,e,n,i,r={}){const o=await Wi(t,e,n,i,r);return"mfaPendingCredential"in o&&Rn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function ZE(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Km(t.config,r):`${t.config.apiScheme}://${r}`}function p1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class m1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i($n(this.auth,"network-request-failed")),f1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=$n(t,e,i);return r.customData._tokenResponse=n,r}function qv(t){return t!==void 0&&t.enterprise!==void 0}class g1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return p1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function _1(t,e){return Wi(t,"GET","/v2/recaptchaConfig",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(t,e){return Wi(t,"POST","/v1/accounts:delete",e)}async function QE(t,e){return Wi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y1(t,e=!1){const n=st(t),i=await n.getIdToken(e),r=Zm(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Il(cf(r.auth_time)),issuedAtTime:Il(cf(r.iat)),expirationTime:Il(cf(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function cf(t){return Number(t)*1e3}function Zm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const r=bE(n);return r?JSON.parse(r):(Uc("Failed to decode base64 JWT payload"),null)}catch(r){return Uc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Gv(t){const e=Zm(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kn&&w1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function w1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Il(this.lastLoginAt),this.creationTime=Il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Go(t,QE(n,{idToken:i}));he(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?YE(o.providerUserInfo):[],h=I1(t.providerData,l),d=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),_=d?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(t,y)}async function T1(t){const e=st(t);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I1(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function YE(t){return t.map(e=>{var{providerId:n}=e,i=Hm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(t,e){const n=await KE(t,{},async()=>{const i=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=ZE(t,r,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",GE.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function S1(t,e){return Wi(t,"POST","/v2/accounts:revokeToken",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Gv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await P1(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new Mo;return i&&(he(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(he(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ki{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new E1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Go(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return y1(this,e)}reload(){return T1(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await Go(this,v1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,h,d,p,_;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,C=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,R=(p=n.createdAt)!==null&&p!==void 0?p:void 0,A=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:N,emailVerified:H,isAnonymous:X,providerData:$,stsTokenManager:S}=n;he(N&&S,e,"internal-error");const P=Mo.fromJSON(this.name,S);he(typeof N=="string",e,"internal-error"),ir(y,e.name),ir(T,e.name),he(typeof H=="boolean",e,"internal-error"),he(typeof X=="boolean",e,"internal-error"),ir(C,e.name),ir(D,e.name),ir(V,e.name),ir(U,e.name),ir(R,e.name),ir(A,e.name);const x=new ki({uid:N,auth:e,email:T,emailVerified:H,displayName:y,isAnonymous:X,photoURL:D,phoneNumber:C,tenantId:V,stsTokenManager:P,createdAt:R,lastLoginAt:A});return $&&Array.isArray($)&&(x.providerData=$.map(k=>Object.assign({},k))),U&&(x._redirectEventId=U),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new Mo;r.updateFromServerResponse(n);const o=new ki({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ph(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];he(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?YE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new Mo;h.updateFromIdToken(i);const d=new ki({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Tp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Map;function Ri(t){ji(t instanceof Function,"Expected a class definition");let e=Kv.get(t);return e?(ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XE.type="NONE";const Zv=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t,e,n){return`firebase:${t}:${e}:${n}`}class Vo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Bc(this.userKey,r.apiKey,o),this.fullPersistenceKey=Bc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Vo(Ri(Zv),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||Ri(Zv);const l=Bc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){const y=ki._fromJSON(e,_);p!==o&&(h=y),o=p;break}}catch{}const d=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Vo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Vo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rT(e))return"Blackberry";if(sT(e))return"Webos";if(eT(e))return"Safari";if((e.includes("chrome/")||tT(e))&&!e.includes("edge/"))return"Chrome";if(iT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function JE(t=Ft()){return/firefox\//i.test(t)}function eT(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tT(t=Ft()){return/crios\//i.test(t)}function nT(t=Ft()){return/iemobile/i.test(t)}function iT(t=Ft()){return/android/i.test(t)}function rT(t=Ft()){return/blackberry/i.test(t)}function sT(t=Ft()){return/webos/i.test(t)}function Qm(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C1(t=Ft()){var e;return Qm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function A1(){return zx()&&document.documentMode===10}function oT(t=Ft()){return Qm(t)||iT(t)||sT(t)||rT(t)||/windows phone/i.test(t)||nT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e=[]){let n;switch(t){case"Browser":n=Qv(Ft());break;case"Worker":n=`${Qv(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t,e={}){return Wi(t,"GET","/v2/passwordPolicy",jr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=6;class L1{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:R1,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yv(this),this.idTokenSubscription=new Yv(this),this.beforeStateQueue=new x1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ri(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await QE(this,{idToken:e}),i=await ki._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=h1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(bi(this));const n=e?st(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k1(this),n=new L1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await S1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ri(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&a1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zr(t){return st(t)}class Yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gx(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N1(t){id=t}function lT(t){return id.loadJS(t)}function O1(){return id.recaptchaEnterpriseScript}function D1(){return id.gapiScript}function M1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const V1="recaptcha-enterprise",F1="NO_RECAPTCHA";class j1{constructor(e){this.type=V1,this.auth=zr(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{_1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new g1(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function r(o,l,h){const d=window.grecaptcha;qv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(F1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&qv(window.grecaptcha))r(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=O1();d.length!==0&&(d+=h),lT(d).then(()=>{r(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Xv(t,e,n,i=!1){const r=new j1(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ip(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Xv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Xv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e){const n=Ls(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Zl(o,e??{}))return r;Rn(r,"already-initialized")}return n.initialize({options:e})}function U1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ri);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function B1(t,e,n){const i=zr(t);he(i._canInitEmulator,i,"emulator-config-failed"),he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=uT(e),{host:l,port:h}=$1(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),W1()}function uT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $1(t){const e=uT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Jv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Jv(l)}}}function Jv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function W1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}async function H1(t,e){return Wi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(t,e){return fu(t,"POST","/v1/accounts:signInWithPassword",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(t,e){return fu(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,e))}async function K1(t,e){return fu(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends Ym{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Yl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Yl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,n,"signInWithPassword",q1);case"emailLink":return G1(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,i,"signUpPassword",H1);case"emailLink":return K1(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e){return fu(t,"POST","/v1/accounts:signInWithIdp",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="http://localhost";class ws extends Ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Hm(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new ws(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Fo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fo(e,n)}buildRequest(){const e={requestUri:Z1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y1(t){const e=ll(ul(t)).link,n=e?ll(ul(e)).deep_link_id:null,i=ll(ul(t)).deep_link_id;return(i?ll(ul(i)).link:null)||i||n||e||t}class Xm{constructor(e){var n,i,r,o,l,h;const d=ll(ul(e)),p=(n=d.apiKey)!==null&&n!==void 0?n:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,y=Q1((r=d.mode)!==null&&r!==void 0?r:null);he(p&&_&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=Y1(e);try{return new Xm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.providerId=aa.PROVIDER_ID}static credential(e,n){return Yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xm.parseLink(n);return he(i,"argument-error"),Yl._fromEmailAndCode(e,i.code,i.tenantId)}}aa.PROVIDER_ID="password";aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends pu{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ii.credential(n,i)}catch{return null}}}ii.GOOGLE_SIGN_IN_METHOD="google.com";ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends pu{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends pu{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return hr.credential(n,i)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t,e){return fu(t,"POST","/v1/accounts:signUp",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await ki._fromIdTokenResponse(e,i,r),l=ey(i);return new Es({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=ey(i);return new Es({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function ey(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Kn{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Sh(e,n,i,r)}}function cT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(t,o,e,i):o})}async function J1(t,e,n=!1){const i=await Go(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e,n=!1){const{auth:i}=t;if(zn(i.app))return Promise.reject(bi(i));const r="reauthenticate";try{const o=await Go(t,cT(i,r,e,t),n);he(o.idToken,i,"internal-error");const l=Zm(o.idToken);he(l,i,"internal-error");const{sub:h}=l;return he(t.uid===h,i,"user-mismatch"),Es._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Rn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t,e,n=!1){if(zn(t.app))return Promise.reject(bi(t));const i="signIn",r=await cT(t,i,e),o=await Es._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function tR(t,e){return hT(zr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(t){const e=zr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fT(t,e,n){if(zn(t.app))return Promise.reject(bi(t));const i=zr(t),l=await Ip(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",X1).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&dT(t),d}),h=await Es._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function nR(t,e,n){return zn(t.app)?Promise.reject(bi(t)):tR(st(t),aa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dT(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){return Wi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=st(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Go(i,iR(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const h=i.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function sR(t,e,n,i){return st(t).onIdTokenChanged(e,n,i)}function oR(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function aR(t,e,n,i){return st(t).onAuthStateChanged(e,n,i)}function pT(t){return st(t).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1e3,uR=10;class gT extends mT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);A1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,uR):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},lR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gT.type="LOCAL";const cR=gT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T extends mT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_T.type="SESSION";const vT=_T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new rd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await hR(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=eg("",20);r.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const T=y;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return window}function fR(t){oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}async function pR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gR(){return yT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firebaseLocalStorageDb",_R=1,Ah="firebaseLocalStorage",ET="fbase_key";class mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sd(t,e){return t.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function vR(){const t=indexedDB.deleteDatabase(wT);return new mu(t).toPromise()}function Pp(){const t=indexedDB.open(wT,_R);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ah,{keyPath:ET})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ah)?e(i):(i.close(),await vR(),e(await Pp()))})})}async function ty(t,e,n){const i=sd(t,!0).put({[ET]:e,value:n});return new mu(i).toPromise()}async function yR(t,e){const n=sd(t,!1).get(e),i=await new mu(n).toPromise();return i===void 0?null:i.value}function ny(t,e){const n=sd(t,!0).delete(e);return new mu(n).toPromise()}const wR=800,ER=3;class TT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ER)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(gR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pR(),!this.activeServiceWorker)return;this.sender=new dR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await ty(e,Ch,"1"),await ny(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>ty(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>yR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ny(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=sd(r,!1).getAll();return new mu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TT.type="LOCAL";const TR=TT;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e){return e?Ri(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IR(t){return hT(t.auth,new tg(t),t.bypassAuthState)}function PR(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),eR(n,new tg(t),t.bypassAuthState)}async function SR(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),J1(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IR;case"linkViaPopup":case"linkViaRedirect":return SR;case"reauthViaPopup":case"reauthViaRedirect":return PR;default:Rn(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new du(2e3,1e4);async function ST(t,e,n){if(zn(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const i=zr(t);l1(t,e,Jm);const r=IT(i,n);return new us(i,"signInViaPopup",e,r).executeNotNull()}class us extends PT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,us.currentPopupAction&&us.currentPopupAction.cancel(),us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CR.get())};e()}}us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="pendingRedirect",$c=new Map;class xR extends PT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const i=await kR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kR(t,e){const n=bR(e),i=LR(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function RR(t,e){$c.set(t._key(),e)}function LR(t){return Ri(t._redirectPersistence)}function bR(t){return Bc(AR,t.config.apiKey,t.name)}async function NR(t,e,n=!1){if(zn(t.app))return Promise.reject(bi(t));const i=zr(t),r=IT(i,e),l=await new xR(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=10*60*1e3;class DR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!CT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError($n(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OR&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}}function iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e={}){return Wi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jR=/^https?/;async function zR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VR(t);for(const n of e)try{if(UR(n))return}catch{}Rn(t,"unauthorized-domain")}function UR(t){const e=Ep(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!jR.test(n))return!1;if(FR.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new du(3e4,6e4);function ry(){const t=oi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $R(t){return new Promise((e,n)=>{var i,r,o;function l(){ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ry(),n($n(t,"network-request-failed"))},timeout:BR.get()})}if(!((r=(i=oi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=oi().gapi)===null||o===void 0)&&o.load)l();else{const h=M1("iframefcb");return oi()[h]=()=>{gapi.load?l():n($n(t,"network-request-failed"))},lT(`${D1()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function WR(t){return Wc=Wc||$R(t),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new du(5e3,15e3),qR="__/auth/iframe",GR="emulator/auth/iframe",KR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QR(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Km(e,GR):`https://${t.config.authDomain}/${qR}`,i={apiKey:e.apiKey,appName:t.name,v:oa},r=ZR.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${hu(i).slice(1)}`}async function YR(t){const e=await WR(t),n=oi().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:QR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KR,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=$n(t,"network-request-failed"),h=oi().setTimeout(()=>{o(l)},HR.get());function d(){oi().clearTimeout(h),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JR=500,eL=600,tL="_blank",nL="http://localhost";class sy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iL(t,e,n,i=JR,r=eL){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},XR),{width:i.toString(),height:r.toString(),top:o,left:l}),p=Ft().toLowerCase();n&&(h=tT(p)?tL:n),JE(p)&&(e=e||nL,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[C,D])=>`${T}${C}=${D},`,"");if(C1(p)&&h!=="_self")return rL(e||"",h),new sy(null);const y=window.open(e||"",h,_);he(y,t,"popup-blocked");try{y.focus()}catch{}return new sy(y)}function rL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="__/auth/handler",oL="emulator/auth/handler",aL=encodeURIComponent("fac");async function oy(t,e,n,i,r,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:oa,eventId:r};if(e instanceof Jm){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",qx(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,y]of Object.entries({}))l[_]=y}if(e instanceof pu){const _=e.getScopes().filter(y=>y!=="");_.length>0&&(l.scopes=_.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await t._getAppCheckToken(),p=d?`#${aL}=${encodeURIComponent(d)}`:"";return`${lL(t)}?${hu(h).slice(1)}${p}`}function lL({config:t}){return t.emulator?Km(t,oL):`https://${t.authDomain}/${sL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="webStorageSupport";class uL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vT,this._completeRedirectFn=NR,this._overrideRedirectResult=RR}async _openPopup(e,n,i,r){var o;ji((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await oy(e,n,i,Ep(),r);return iL(e,l,eg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await oy(e,n,i,Ep(),r);return fR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ji(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await YR(e),i=new DR(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hf,{type:hf},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[hf];l!==void 0&&n(!!l),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oT()||eT()||Qm()}}const cL=uL;var ay="@firebase/auth",ly="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fL(t){ui(new qn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;he(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aT(t)},p=new b1(i,r,o,d);return U1(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ui(new qn("auth-internal",e=>{const n=zr(e.getProvider("auth").getImmediate());return(i=>new hL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),An(ay,ly,dL(t)),An(ay,ly,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=5*60,mL=DE("authIdTokenMaxAge")||pL;let uy=null;const gL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>mL)return;const r=n==null?void 0:n.token;uy!==r&&(uy=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function _L(t=Wm()){const e=Ls(t,"auth");if(e.isInitialized())return e.getImmediate();const n=z1(t,{popupRedirectResolver:cL,persistence:[TR,cR,vT]}),i=DE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=gL(o.toString());oR(n,l,()=>l(n.currentUser)),sR(n,h=>l(h))}}const r=NE("auth");return r&&B1(n,`http://${r}`),n}function vL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}N1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=$n("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",vL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fL("Browser");var yL="firebase",wL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An(yL,wL,"app");var cy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,AT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,P){function x(){}x.prototype=P.prototype,S.D=P.prototype,S.prototype=new x,S.prototype.constructor=S,S.C=function(k,M,F){for(var O=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)O[Xe-2]=arguments[Xe];return P.prototype[M].apply(k,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,P,x){x||(x=0);var k=Array(16);if(typeof P=="string")for(var M=0;16>M;++M)k[M]=P.charCodeAt(x++)|P.charCodeAt(x++)<<8|P.charCodeAt(x++)<<16|P.charCodeAt(x++)<<24;else for(M=0;16>M;++M)k[M]=P[x++]|P[x++]<<8|P[x++]<<16|P[x++]<<24;P=S.g[0],x=S.g[1],M=S.g[2];var F=S.g[3],O=P+(F^x&(M^F))+k[0]+3614090360&4294967295;P=x+(O<<7&4294967295|O>>>25),O=F+(M^P&(x^M))+k[1]+3905402710&4294967295,F=P+(O<<12&4294967295|O>>>20),O=M+(x^F&(P^x))+k[2]+606105819&4294967295,M=F+(O<<17&4294967295|O>>>15),O=x+(P^M&(F^P))+k[3]+3250441966&4294967295,x=M+(O<<22&4294967295|O>>>10),O=P+(F^x&(M^F))+k[4]+4118548399&4294967295,P=x+(O<<7&4294967295|O>>>25),O=F+(M^P&(x^M))+k[5]+1200080426&4294967295,F=P+(O<<12&4294967295|O>>>20),O=M+(x^F&(P^x))+k[6]+2821735955&4294967295,M=F+(O<<17&4294967295|O>>>15),O=x+(P^M&(F^P))+k[7]+4249261313&4294967295,x=M+(O<<22&4294967295|O>>>10),O=P+(F^x&(M^F))+k[8]+1770035416&4294967295,P=x+(O<<7&4294967295|O>>>25),O=F+(M^P&(x^M))+k[9]+2336552879&4294967295,F=P+(O<<12&4294967295|O>>>20),O=M+(x^F&(P^x))+k[10]+4294925233&4294967295,M=F+(O<<17&4294967295|O>>>15),O=x+(P^M&(F^P))+k[11]+2304563134&4294967295,x=M+(O<<22&4294967295|O>>>10),O=P+(F^x&(M^F))+k[12]+1804603682&4294967295,P=x+(O<<7&4294967295|O>>>25),O=F+(M^P&(x^M))+k[13]+4254626195&4294967295,F=P+(O<<12&4294967295|O>>>20),O=M+(x^F&(P^x))+k[14]+2792965006&4294967295,M=F+(O<<17&4294967295|O>>>15),O=x+(P^M&(F^P))+k[15]+1236535329&4294967295,x=M+(O<<22&4294967295|O>>>10),O=P+(M^F&(x^M))+k[1]+4129170786&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^M&(P^x))+k[6]+3225465664&4294967295,F=P+(O<<9&4294967295|O>>>23),O=M+(P^x&(F^P))+k[11]+643717713&4294967295,M=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(M^F))+k[0]+3921069994&4294967295,x=M+(O<<20&4294967295|O>>>12),O=P+(M^F&(x^M))+k[5]+3593408605&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^M&(P^x))+k[10]+38016083&4294967295,F=P+(O<<9&4294967295|O>>>23),O=M+(P^x&(F^P))+k[15]+3634488961&4294967295,M=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(M^F))+k[4]+3889429448&4294967295,x=M+(O<<20&4294967295|O>>>12),O=P+(M^F&(x^M))+k[9]+568446438&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^M&(P^x))+k[14]+3275163606&4294967295,F=P+(O<<9&4294967295|O>>>23),O=M+(P^x&(F^P))+k[3]+4107603335&4294967295,M=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(M^F))+k[8]+1163531501&4294967295,x=M+(O<<20&4294967295|O>>>12),O=P+(M^F&(x^M))+k[13]+2850285829&4294967295,P=x+(O<<5&4294967295|O>>>27),O=F+(x^M&(P^x))+k[2]+4243563512&4294967295,F=P+(O<<9&4294967295|O>>>23),O=M+(P^x&(F^P))+k[7]+1735328473&4294967295,M=F+(O<<14&4294967295|O>>>18),O=x+(F^P&(M^F))+k[12]+2368359562&4294967295,x=M+(O<<20&4294967295|O>>>12),O=P+(x^M^F)+k[5]+4294588738&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^M)+k[8]+2272392833&4294967295,F=P+(O<<11&4294967295|O>>>21),O=M+(F^P^x)+k[11]+1839030562&4294967295,M=F+(O<<16&4294967295|O>>>16),O=x+(M^F^P)+k[14]+4259657740&4294967295,x=M+(O<<23&4294967295|O>>>9),O=P+(x^M^F)+k[1]+2763975236&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^M)+k[4]+1272893353&4294967295,F=P+(O<<11&4294967295|O>>>21),O=M+(F^P^x)+k[7]+4139469664&4294967295,M=F+(O<<16&4294967295|O>>>16),O=x+(M^F^P)+k[10]+3200236656&4294967295,x=M+(O<<23&4294967295|O>>>9),O=P+(x^M^F)+k[13]+681279174&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^M)+k[0]+3936430074&4294967295,F=P+(O<<11&4294967295|O>>>21),O=M+(F^P^x)+k[3]+3572445317&4294967295,M=F+(O<<16&4294967295|O>>>16),O=x+(M^F^P)+k[6]+76029189&4294967295,x=M+(O<<23&4294967295|O>>>9),O=P+(x^M^F)+k[9]+3654602809&4294967295,P=x+(O<<4&4294967295|O>>>28),O=F+(P^x^M)+k[12]+3873151461&4294967295,F=P+(O<<11&4294967295|O>>>21),O=M+(F^P^x)+k[15]+530742520&4294967295,M=F+(O<<16&4294967295|O>>>16),O=x+(M^F^P)+k[2]+3299628645&4294967295,x=M+(O<<23&4294967295|O>>>9),O=P+(M^(x|~F))+k[0]+4096336452&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~M))+k[7]+1126891415&4294967295,F=P+(O<<10&4294967295|O>>>22),O=M+(P^(F|~x))+k[14]+2878612391&4294967295,M=F+(O<<15&4294967295|O>>>17),O=x+(F^(M|~P))+k[5]+4237533241&4294967295,x=M+(O<<21&4294967295|O>>>11),O=P+(M^(x|~F))+k[12]+1700485571&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~M))+k[3]+2399980690&4294967295,F=P+(O<<10&4294967295|O>>>22),O=M+(P^(F|~x))+k[10]+4293915773&4294967295,M=F+(O<<15&4294967295|O>>>17),O=x+(F^(M|~P))+k[1]+2240044497&4294967295,x=M+(O<<21&4294967295|O>>>11),O=P+(M^(x|~F))+k[8]+1873313359&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~M))+k[15]+4264355552&4294967295,F=P+(O<<10&4294967295|O>>>22),O=M+(P^(F|~x))+k[6]+2734768916&4294967295,M=F+(O<<15&4294967295|O>>>17),O=x+(F^(M|~P))+k[13]+1309151649&4294967295,x=M+(O<<21&4294967295|O>>>11),O=P+(M^(x|~F))+k[4]+4149444226&4294967295,P=x+(O<<6&4294967295|O>>>26),O=F+(x^(P|~M))+k[11]+3174756917&4294967295,F=P+(O<<10&4294967295|O>>>22),O=M+(P^(F|~x))+k[2]+718787259&4294967295,M=F+(O<<15&4294967295|O>>>17),O=x+(F^(M|~P))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+P&4294967295,S.g[1]=S.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+F&4294967295}i.prototype.u=function(S,P){P===void 0&&(P=S.length);for(var x=P-this.blockSize,k=this.B,M=this.h,F=0;F<P;){if(M==0)for(;F<=x;)r(this,S,F),F+=this.blockSize;if(typeof S=="string"){for(;F<P;)if(k[M++]=S.charCodeAt(F++),M==this.blockSize){r(this,k),M=0;break}}else for(;F<P;)if(k[M++]=S[F++],M==this.blockSize){r(this,k),M=0;break}}this.h=M,this.o+=P},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var P=1;P<S.length-8;++P)S[P]=0;var x=8*this.o;for(P=S.length-8;P<S.length;++P)S[P]=x&255,x/=256;for(this.u(S),S=Array(16),P=x=0;4>P;++P)for(var k=0;32>k;k+=8)S[x++]=this.g[P]>>>k&255;return S};function o(S,P){var x=h;return Object.prototype.hasOwnProperty.call(x,S)?x[S]:x[S]=P(S)}function l(S,P){this.h=P;for(var x=[],k=!0,M=S.length-1;0<=M;M--){var F=S[M]|0;k&&F==P||(x[M]=F,k=!1)}this.g=x}var h={};function d(S){return-128<=S&&128>S?o(S,function(P){return new l([P|0],0>P?-1:0)}):new l([S|0],0>S?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return y;if(0>S)return U(p(-S));for(var P=[],x=1,k=0;S>=x;k++)P[k]=S/x|0,x*=4294967296;return new l(P,0)}function _(S,P){if(S.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S.charAt(0)=="-")return U(_(S.substring(1),P));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(P,8)),k=y,M=0;M<S.length;M+=8){var F=Math.min(8,S.length-M),O=parseInt(S.substring(M,M+F),P);8>F?(F=p(Math.pow(P,F)),k=k.j(F).add(p(O))):(k=k.j(x),k=k.add(p(O)))}return k}var y=d(0),T=d(1),C=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-U(this).m();for(var S=0,P=1,x=0;x<this.g.length;x++){var k=this.i(x);S+=(0<=k?k:4294967296+k)*P,P*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D(this))return"0";if(V(this))return"-"+U(this).toString(S);for(var P=p(Math.pow(S,6)),x=this,k="";;){var M=H(x,P).g;x=R(x,M.j(P));var F=((0<x.g.length?x.g[0]:x.h)>>>0).toString(S);if(x=M,D(x))return F+k;for(;6>F.length;)F="0"+F;k=F+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function D(S){if(S.h!=0)return!1;for(var P=0;P<S.g.length;P++)if(S.g[P]!=0)return!1;return!0}function V(S){return S.h==-1}t.l=function(S){return S=R(this,S),V(S)?-1:D(S)?0:1};function U(S){for(var P=S.g.length,x=[],k=0;k<P;k++)x[k]=~S.g[k];return new l(x,~S.h).add(T)}t.abs=function(){return V(this)?U(this):this},t.add=function(S){for(var P=Math.max(this.g.length,S.g.length),x=[],k=0,M=0;M<=P;M++){var F=k+(this.i(M)&65535)+(S.i(M)&65535),O=(F>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);k=O>>>16,F&=65535,O&=65535,x[M]=O<<16|F}return new l(x,x[x.length-1]&-2147483648?-1:0)};function R(S,P){return S.add(U(P))}t.j=function(S){if(D(this)||D(S))return y;if(V(this))return V(S)?U(this).j(U(S)):U(U(this).j(S));if(V(S))return U(this.j(U(S)));if(0>this.l(C)&&0>S.l(C))return p(this.m()*S.m());for(var P=this.g.length+S.g.length,x=[],k=0;k<2*P;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var M=0;M<S.g.length;M++){var F=this.i(k)>>>16,O=this.i(k)&65535,Xe=S.i(M)>>>16,hi=S.i(M)&65535;x[2*k+2*M]+=O*hi,A(x,2*k+2*M),x[2*k+2*M+1]+=F*hi,A(x,2*k+2*M+1),x[2*k+2*M+1]+=O*Xe,A(x,2*k+2*M+1),x[2*k+2*M+2]+=F*Xe,A(x,2*k+2*M+2)}for(k=0;k<P;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=P;k<2*P;k++)x[k]=0;return new l(x,0)};function A(S,P){for(;(S[P]&65535)!=S[P];)S[P+1]+=S[P]>>>16,S[P]&=65535,P++}function N(S,P){this.g=S,this.h=P}function H(S,P){if(D(P))throw Error("division by zero");if(D(S))return new N(y,y);if(V(S))return P=H(U(S),P),new N(U(P.g),U(P.h));if(V(P))return P=H(S,U(P)),new N(U(P.g),P.h);if(30<S.g.length){if(V(S)||V(P))throw Error("slowDivide_ only works with positive integers.");for(var x=T,k=P;0>=k.l(S);)x=X(x),k=X(k);var M=$(x,1),F=$(k,1);for(k=$(k,2),x=$(x,2);!D(k);){var O=F.add(k);0>=O.l(S)&&(M=M.add(x),F=O),k=$(k,1),x=$(x,1)}return P=R(S,M.j(P)),new N(M,P)}for(M=y;0<=S.l(P);){for(x=Math.max(1,Math.floor(S.m()/P.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),F=p(x),O=F.j(P);V(O)||0<O.l(S);)x-=k,F=p(x),O=F.j(P);D(F)&&(F=T),M=M.add(F),S=R(S,O)}return new N(M,S)}t.A=function(S){return H(this,S).h},t.and=function(S){for(var P=Math.max(this.g.length,S.g.length),x=[],k=0;k<P;k++)x[k]=this.i(k)&S.i(k);return new l(x,this.h&S.h)},t.or=function(S){for(var P=Math.max(this.g.length,S.g.length),x=[],k=0;k<P;k++)x[k]=this.i(k)|S.i(k);return new l(x,this.h|S.h)},t.xor=function(S){for(var P=Math.max(this.g.length,S.g.length),x=[],k=0;k<P;k++)x[k]=this.i(k)^S.i(k);return new l(x,this.h^S.h)};function X(S){for(var P=S.g.length+1,x=[],k=0;k<P;k++)x[k]=S.i(k)<<1|S.i(k-1)>>>31;return new l(x,S.h)}function $(S,P){var x=P>>5;P%=32;for(var k=S.g.length-x,M=[],F=0;F<k;F++)M[F]=0<P?S.i(F+x)>>>P|S.i(F+x+1)<<32-P:S.i(F+x);return new l(M,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,AT=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,ps=l}).apply(typeof cy<"u"?cy:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xT,cl,kT,Hc,Sp,RT,LT,bT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in v))break e;v=v[j]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var v=0,I=!1,j={next:function(){if(!I&&v<u.length){var W=v++;return{value:m(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(u){return u||function(){return o(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,I),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:y,T.apply(null,arguments)}function C(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function D(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,j,W){for(var ee=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ee[Ne-2]=arguments[Ne];return m.prototype[j].apply(I,ee)}}function V(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function U(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(d(I)){const j=u.length||0,W=I.length||0;u.length=j+W;for(let ee=0;ee<W;ee++)u[j+ee]=I[ee]}else u.push(I)}}class R{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function A(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var X=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function $(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function S(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function P(u){const m={};for(const v in u)m[v]=u[v];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let v,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(v in I)u[v]=I[v];for(let W=0;W<x.length;W++)v=x[W],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function M(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function F(u){h.setTimeout(()=>{throw u},0)}function O(){var u=ce;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Xe{constructor(){this.h=this.g=null}add(m,v){const I=hi.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var hi=new R(()=>new dt,u=>u.reset());class dt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,G=!1,ce=new Xe,J=()=>{const u=h.Promise.resolve(void 0);jt=()=>{u.then(de)}};var de=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(v){F(v)}var m=hi;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}G=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u}();function we(u,m){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(X){e:{try{H(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}D(we,Pe);var me={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function Su(u,m,v,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=j,this.key=++Zn,this.da=this.fa=!1}function Hi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qi(u){this.src=u,this.g={},this.h=0}qi.prototype.add=function(u,m,v,I,j){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ee=Br(u,m,I,j);return-1<ee?(m=u[ee],v||(m.fa=!1)):(m=new Su(m,this.src,W,!!I,j),m.fa=v,u.push(m)),m};function di(u,m){var v=m.type;if(v in u.g){var I=u.g[v],j=Array.prototype.indexOf.call(I,m,void 0),W;(W=0<=j)&&Array.prototype.splice.call(I,j,1),W&&(Hi(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Br(u,m,v,I){for(var j=0;j<u.length;++j){var W=u[j];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==I)return j}return-1}var fa="closure_lm_"+(1e6*Math.random()|0),Ds={};function pa(u,m,v,I,j){if(Array.isArray(m)){for(var W=0;W<m.length;W++)pa(u,m[W],v,I,j);return null}return v=xu(v),u&&u[ft]?u.K(m,v,p(I)?!!I.capture:!1,j):ma(u,m,v,!1,I,j)}function ma(u,m,v,I,j,W){if(!m)throw Error("Invalid event type");var ee=p(j)?!!j.capture:!!j,Ne=js(u);if(Ne||(u[fa]=Ne=new qi(u)),v=Ne.add(m,v,I,ee,W),v.proxy)return v;if(I=Ms(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)be||(j=ee),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(Fs(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ms(){function u(v){return m.call(u.src,u.listener,v)}const m=Au;return u}function Cu(u,m,v,I,j){if(Array.isArray(m))for(var W=0;W<m.length;W++)Cu(u,m[W],v,I,j);else I=p(I)?!!I.capture:!!I,v=xu(v),u&&u[ft]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],v=Br(W,v,I,j),-1<v&&(Hi(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=js(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Br(m,v,I,j)),(v=-1<u?m[u]:null)&&Vs(v))}function Vs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ft])di(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(Fs(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=js(m))?(di(v,u),v.h==0&&(v.src=null,m[fa]=null)):Hi(u)}}}function Fs(u){return u in Ds?Ds[u]:Ds[u]="on"+u}function Au(u,m){if(u.da)u=!0;else{m=new we(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&Vs(u),u=v.call(I,m)}return u}function js(u){return u=u[fa],u instanceof qi?u:null}var ga="__closure_events_fn_"+(1e9*Math.random()>>>0);function xu(u){return typeof u=="function"?u:(u[ga]||(u[ga]=function(m){return u.handleEvent(m)}),u[ga])}function ot(){ye.call(this),this.i=new qi(this),this.M=this,this.F=null}D(ot,ye),ot.prototype[ft]=!0,ot.prototype.removeEventListener=function(u,m,v,I){Cu(this,u,m,v,I)};function _t(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Pe(m,u);else if(m instanceof Pe)m.target=m.target||u;else{var j=m;m=new Pe(I,u),k(m,j)}if(j=!0,v)for(var W=v.length-1;0<=W;W--){var ee=m.g=v[W];j=$r(ee,I,!0,m)&&j}if(ee=m.g=u,j=$r(ee,I,!0,m)&&j,j=$r(ee,I,!1,m)&&j,v)for(W=0;W<v.length;W++)ee=m.g=v[W],j=$r(ee,I,!1,m)&&j}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)Hi(v[I]);delete u.g[m],u.h--}}this.F=null},ot.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},ot.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function $r(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,W=0;W<m.length;++W){var ee=m[W];if(ee&&!ee.da&&ee.capture==v){var Ne=ee.listener,at=ee.ha||ee.src;ee.fa&&di(u.i,ee),j=Ne.call(at,I)!==!1&&j}}return j&&!I.defaultPrevented}function ku(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function _a(u){u.g=ku(()=>{u.g=null,u.i&&(u.i=!1,_a(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ru extends ye{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_a(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(u){ye.call(this),this.h=u,this.g={}}D(Wr,ye);var va=[];function zs(u){$(u.g,function(m,v){this.g.hasOwnProperty(v)&&Vs(m)},u),u.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),zs(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Us=h.JSON.stringify,Id=h.JSON.parse,Hr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ya(){}ya.prototype.h=null;function Lu(u){return u.h||(u.h=u.i())}function wa(){}var Gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bs(){Pe.call(this,"d")}D(Bs,Pe);function Ea(){Pe.call(this,"c")}D(Ea,Pe);var fi={},bu=null;function $s(){return bu=bu||new ot}fi.La="serverreachability";function Nu(u){Pe.call(this,fi.La,u)}D(Nu,Pe);function qr(u){const m=$s();_t(m,new Nu(m))}fi.STAT_EVENT="statevent";function Ws(u,m){Pe.call(this,fi.STAT_EVENT,u),this.stat=m}D(Ws,Pe);function It(u){const m=$s();_t(m,new Ws(m,u))}fi.Ma="timingevent";function Ou(u,m){Pe.call(this,fi.Ma,u),this.size=m}D(Ou,Pe);function Gr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function mn(u,m,v,I,j,W){u.info(function(){if(u.g)if(W)for(var ee="",Ne=W.split("&"),at=0;at<Ne.length;at++){var xe=Ne[at].split("=");if(1<xe.length){var Ve=xe[0];xe=xe[1];var Ge=Ve.split("_");ee=2<=Ge.length&&Ge[1]=="type"?ee+(Ve+"="+xe+"&"):ee+(Ve+"=redacted&")}}else ee=null;else ee=W;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+v+`
`+ee})}function se(u,m,v,I,j,W,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+v+`
`+W+" "+ee})}function pi(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Mu(u,v)+(I?" "+I:"")})}function Du(u,m){u.info(function(){return"TIMEOUT: "+m})}Kr.prototype.info=function(){};function Mu(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var j=I[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ee=1;ee<j.length;ee++)j[ee]=""}}}}return Us(v)}catch{return m}}var Zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qs;function Ln(){}D(Ln,ya),Ln.prototype.g=function(){return new XMLHttpRequest},Ln.prototype.i=function(){return{}},qs=new Ln;function bn(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vu}function Vu(){this.i=null,this.g="",this.h=!1}var Fu={},Ta={};function Ia(u,m,v){u.L=1,u.v=_n(Je(m)),u.m=v,u.P=!0,Pa(u,null)}function Pa(u,m){u.F=Date.now(),Ks(u),u.A=Je(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Uu(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Vu,u.g=Ku(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Ru(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(va[0]=j.toString()),j=va);for(var W=0;W<j.length;W++){var ee=pa(v,j[W],I||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?P(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),qr(),mn(u.i,u.u,u.A,u.l,u.R,u.m)}bn.prototype.ca=function(u){u=u.target;const m=this.M;m&&zt(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const Ge=zt(this.g);var m=this.g.Ba();const er=this.g.Z();if(!(3>Ge)&&(Ge!=3||this.g&&(this.h.h||this.g.oa()||za(this.g)))){this.J||Ge!=4||m==7||(m==8||0>=er?qr(3):qr(2)),Sa(this);var v=this.g.Z();this.X=v;t:if(ju(this)){var I=za(this.g);u="";var j=I.length,W=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),Qr(this);var ee="";break t}this.h.i=new h.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(W&&m==j-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=v==200,se(this.i,this.u,this.A,this.l,this.R,Ge,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,at=this.g;if((Ne=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Ne)){var xe=Ne;break t}}xe=null}if(v=xe)pi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,v);else{this.o=!1,this.s=3,It(12),mi(this),Qr(this);break e}}if(this.P){v=!0;let tt;for(;!this.J&&this.C<ee.length;)if(tt=Gs(this,ee),tt==Ta){Ge==4&&(this.s=4,It(14),v=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Fu){this.s=4,It(15),pi(this.i,this.l,ee,"[Invalid Chunk]"),v=!1;break}else pi(this.i,this.l,tt,null),Yr(this,tt);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||ee.length!=0||this.h.h||(this.s=1,It(16),v=!1),this.o=this.o&&v,!v)pi(this.i,this.l,ee,"[Invalid Chunked Response]"),mi(this),Qr(this);else if(0<ee.length&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.ba&&!Ve.M&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),io(Ve),Ve.M=!0,It(11))}}else pi(this.i,this.l,ee,null),Yr(this,ee);Ge==4&&mi(this),this.o&&!this.J&&(Ge==4?Ba(this.j,this):(this.o=!1,Ks(this)))}else Pd(this.g),v==400&&0<ee.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),mi(this),Qr(this)}}}catch{}finally{}};function ju(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Gs(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Ta:(v=Number(m.substring(v,I)),isNaN(v)?Fu:(I+=1,I+v>m.length?Ta:(m=m.slice(I,I+v),u.C=I+v,m)))}bn.prototype.cancel=function(){this.J=!0,mi(this)};function Ks(u){u.S=Date.now()+u.I,zu(u,u.I)}function zu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Gr(T(u.ba,u),m)}function Sa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Du(this.i,this.A),this.L!=2&&(qr(),It(17)),mi(this),this.s=2,Qr(this)):zu(this,this.S-u)};function Qr(u){u.j.G==0||u.J||Ba(u.j,u)}function mi(u){Sa(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,zs(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Yr(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Se(v.h,u))){if(!u.K&&Se(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)so(v),to(v);else break e;no(v),It(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Gr(T(v.Za,v),6e3));if(1>=Ki(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else wi(v,11)}else if((u.K||v.g==u)&&so(v),!A(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let xe=j[m];if(v.T=xe[0],xe=xe[1],v.G==2)if(xe[0]=="c"){v.K=xe[1],v.ia=xe[2];const Ve=xe[3];Ve!=null&&(v.la=Ve,v.j.info("VER="+v.la));const Ge=xe[4];Ge!=null&&(v.Aa=Ge,v.j.info("SVER="+v.Aa));const er=xe[5];er!=null&&typeof er=="number"&&0<er&&(I=1.5*er,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const tt=u.g;if(tt){const ao=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var W=I.h;W.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Fe(W,W.h),W.h=null))}if(I.D){const Xn=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xn&&(I.ya=Xn,fe(I.I,I.D,Xn))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ee=u;if(I.qa=oo(I,I.J?I.ia:null,I.W),ee.K){Jr(I.h,ee);var Ne=ee,at=I.L;at&&(Ne.I=at),Ne.B&&(Sa(Ne),Ks(Ne)),I.g=ee}else Dn(I);0<v.i.length&&Ji(v)}else xe[0]!="stop"&&xe[0]!="close"||wi(v,7);else v.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?wi(v,7):eo(v):xe[0]!="noop"&&v.l&&v.l.ta(xe),v.v=0)}}qr(4)}catch{}}var Xr=class{constructor(u,m){this.g=u,this.map=m}};function Ca(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ki(u){return u.h?1:u.g?u.g.size:0}function Se(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Fe(u,m){u.g?u.g.add(m):u.h=m}function Jr(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ca.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return V(u.i)}function Zi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function xa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function ve(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=xa(u),I=Zi(u),j=I.length,W=0;W<j;W++)m.call(void 0,I[W],v&&v[W],u)}var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ka(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),j=null;if(0<=I){var W=u[v].substring(0,I);j=u[v].substring(I+1)}else W=u[v];m(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function gn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gn){this.h=u.h,Zs(this,u.j),this.o=u.o,this.g=u.g,_i(this,u.s),this.l=u.l;var m=u.i,v=new vi;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Qn(this,v),this.m=u.m}else u&&(m=String(u).match($e))?(this.h=!1,Zs(this,m[1]||"",!0),this.o=Nn(m[2]||""),this.g=Nn(m[3]||"",!0),_i(this,m[4]),this.l=Nn(m[5]||"",!0),Qn(this,m[6]||"",!0),this.m=Nn(m[7]||"")):(this.h=!1,this.i=new vi(null,this.h))}gn.prototype.toString=function(){var u=[],m=this.j;m&&u.push(On(m,Qi,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(On(m,Qi,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(On(v,v.charAt(0)=="/"?ba:La,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",On(v,Na)),u.join("")};function Je(u){return new gn(u)}function Zs(u,m,v){u.j=v?Nn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function _i(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Qn(u,m,v){m instanceof vi?(u.i=m,vn(u.i,u.h)):(v||(m=On(m,Qs)),u.i=new vi(m,u.h))}function fe(u,m,v){u.i.set(m,v)}function _n(u){return fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Nn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function On(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Ra),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ra(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qi=/[#\/\?@]/g,La=/[#\?:]/g,ba=/[#\?]/g,Qs=/[#\?@]/g,Na=/#/g;function vi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function rn(u){u.g||(u.g=new Map,u.h=0,u.i&&ka(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=vi.prototype,t.add=function(u,m){rn(this),this.i=null,u=le(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Oa(u,m){rn(u),m=le(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ys(u,m){return rn(u),m=le(u,m),u.g.has(m)}t.forEach=function(u,m){rn(this),this.g.forEach(function(v,I){v.forEach(function(j){u.call(m,j,I,this)},this)},this)},t.na=function(){rn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const j=u[I];for(let W=0;W<j.length;W++)v.push(m[I])}return v},t.V=function(u){rn(this);let m=[];if(typeof u=="string")Ys(this,u)&&(m=m.concat(this.g.get(le(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},t.set=function(u,m){return rn(this),this.i=null,u=le(this,u),Ys(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Uu(u,m,v){Oa(u,m),0<v.length&&(u.i=null,u.g.set(le(u,m),V(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const W=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var j=W;ee[I]!==""&&(j+="="+encodeURIComponent(String(ee[I]))),u.push(j)}}return this.i=u.join("&")};function le(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function vn(u,m){m&&!u.j&&(rn(u),u.i=null,u.g.forEach(function(v,I){var j=I.toLowerCase();I!=j&&(Oa(this,I),Uu(this,j,v))},u)),u.j=m}function Me(u,m){const v=new Kr;if(h.Image){const I=new Image;I.onload=C(yn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=C(yn,v,"TestLoadImage: error",!1,m,I),I.onabort=C(yn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=C(yn,v,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Bu(u,m){const v=new Kr,I=new AbortController,j=setTimeout(()=>{I.abort(),yn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(j),W.ok?yn(v,"TestPingServer: ok",!0,m):yn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),yn(v,"TestPingServer: error",!1,m)})}function yn(u,m,v,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(v)}catch{}}function Da(){this.g=new Hr}function Ma(u,m,v){const I=v||"";try{ve(u,function(j,W){let ee=j;p(j)&&(ee=Us(j)),m.push(I+W+"="+encodeURIComponent(ee))})}catch(j){throw m.push(I+"type="+encodeURIComponent("_badmap")),j}}function wn(u){this.l=u.Ub||null,this.j=u.eb||!1}D(wn,ya),wn.prototype.g=function(){return new Yi(this.l,this.j)},wn.prototype.i=function(u){return function(){return u}}({});function Yi(u,m){ot.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Yi,ot),t=Yi.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,sn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qe(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sn(this)),this.g&&(this.readyState=3,sn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?qe(this):sn(this),this.readyState==3&&Xi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qe(this))},t.Qa=function(u){this.g&&(this.response=u,qe(this))},t.ga=function(){this.g&&qe(this)};function qe(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sn(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function sn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Va(u){let m="";return $(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Xs(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Va(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):fe(u,m,v))}function We(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(We,ot);var $u=/^https?$/i,Fa=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qs.g(),this.v=this.o?Lu(this.o):Lu(qs),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){Wu(this,W);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)v.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())v.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),j=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Fa,m,void 0))||I||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of v)this.g.setRequestHeader(W,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Wu(this,W)}};function Wu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ja(u),Js(u)}function ja(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),Js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Js(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Te(this):this.bb())},t.bb=function(){Te(this)};function Te(u){if(u.h&&typeof l<"u"&&(!u.v[1]||zt(u)!=4||u.Z()!=2)){if(u.u&&zt(u)==4)ku(u.Ea,0,u);else if(_t(u,"readystatechange"),zt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ee===0){var j=String(u.D).match($e)[1]||null;!j&&h.self&&h.self.location&&(j=h.self.location.protocol.slice(0,-1)),I=!$u.test(j?j.toLowerCase():"")}v=I}if(v)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var W=2<zt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",ja(u)}}finally{Js(u)}}}}function Js(u,m){if(u.g){Gt(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||_t(u,"ready");try{v.onreadystatechange=I}catch{}}}function Gt(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function zt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Id(m)}};function za(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Pd(u){const m={};u=(u.g&&2<=zt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(A(u[I]))continue;var v=M(u[I]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[j]||[];m[j]=W,W.push(v)}S(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Hu(u){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yi("baseRetryDelayMs",5e3,u),this.cb=yi("retryDelaySeedMs",1e4,u),this.Wa=yi("forwardChannelMaxRetries",2,u),this.wa=yi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ca(u&&u.concurrentRequestLimit),this.Da=new Da,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hu.prototype,t.la=8,t.G=1,t.connect=function(u,m,v,I){It(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=oo(this,null,this.W),Ji(this)};function eo(u){if(qu(u),u.G==3){var m=u.U++,v=Je(u.I);if(fe(v,"SID",u.K),fe(v,"RID",m),fe(v,"TYPE","terminate"),es(u,v),m=new bn(u,u.j,m),m.L=2,m.v=_n(Je(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=Ku(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ks(m)}Gu(u)}function to(u){u.g&&(io(u),u.g.cancel(),u.g=null)}function qu(u){to(u),u.u&&(h.clearTimeout(u.u),u.u=null),so(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Ji(u){if(!Aa(u.h)&&!u.s){u.s=!0;var m=u.Ga;jt||J(),G||(jt(),G=!0),ce.add(m,u),u.B=0}}function Sd(u,m){return Ki(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Gr(T(u.Ga,u,m),$a(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new bn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=P(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ua(this,j,m),v=Je(this.I),fe(v,"RID",u),fe(v,"CVER",22),this.D&&fe(v,"X-HTTP-Session-Id",this.D),es(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Va(W)))+"&"+m:this.m&&Xs(v,this.m,W)),Fe(this.h,j),this.Ua&&fe(v,"TYPE","init"),this.P?(fe(v,"$req",m),fe(v,"SID","null"),j.T=!0,Ia(j,v,null)):Ia(j,v,m),this.G=2}}else this.G==3&&(u?on(this,u):this.i.length==0||Aa(this.h)||on(this))};function on(u,m){var v;m?v=m.l:v=u.U++;const I=Je(u.I);fe(I,"SID",u.K),fe(I,"RID",v),fe(I,"AID",u.T),es(u,I),u.m&&u.o&&Xs(I,u.m,u.o),v=new bn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ua(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fe(u.h,v),Ia(v,I,m)}function es(u,m){u.H&&$(u.H,function(v,I){fe(m,I,v)}),u.l&&ve({},function(v,I){fe(m,I,v)})}function Ua(u,m,v){v=Math.min(u.i.length,v);var I=u.l?T(u.l.Na,u.l,u):null;e:{var j=u.i;let W=-1;for(;;){const ee=["count="+v];W==-1?0<v?(W=j[0].g,ee.push("ofs="+W)):W=0:ee.push("ofs="+W);let Ne=!0;for(let at=0;at<v;at++){let xe=j[at].g;const Ve=j[at].map;if(xe-=W,0>xe)W=Math.max(0,j[at].g-100),Ne=!1;else try{Ma(Ve,ee,"req"+xe+"_")}catch{I&&I(Ve)}}if(Ne){I=ee.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Dn(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;jt||J(),G||(jt(),G=!0),ce.add(m,u),u.v=0}}function no(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Gr(T(u.Fa,u),$a(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ro(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Gr(T(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),to(this),ro(this))};function io(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function ro(u){u.g=new bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Je(u.qa);fe(m,"RID","rpc"),fe(m,"SID",u.K),fe(m,"AID",u.T),fe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&fe(m,"TO",u.ja),fe(m,"TYPE","xmlhttp"),es(u,m),u.m&&u.o&&Xs(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=_n(Je(m)),v.m=null,v.P=!0,Pa(v,u)}t.Za=function(){this.C!=null&&(this.C=null,to(this),no(this),It(19))};function so(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ba(u,m){var v=null;if(u.g==m){so(u),io(u),u.g=null;var I=2}else if(Se(u.h,m))v=m.D,Jr(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;I=$s(),_t(I,new Ou(I,v)),Ji(u)}else Dn(u);else if(j=m.s,j==3||j==0&&0<m.X||!(I==1&&Sd(u,m)||I==2&&no(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),j){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function $a(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),I=u.Xa;const j=!I;I=new gn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Zs(I,"https"),_n(I),j?Me(I.toString(),v):Bu(I.toString(),v)}else It(2);u.G=0,u.l&&u.l.sa(m),Gu(u),qu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Gu(u){if(u.G=0,u.ka=[],u.l){const m=gi(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function oo(u,m,v){var I=v instanceof gn?Je(v):new gn(v);if(I.g!="")m&&(I.g=m+"."+I.g),_i(I,I.s);else{var j=h.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var W=new gn(null);I&&Zs(W,I),m&&(W.g=m),j&&_i(W,j),v&&(W.l=v),I=W}return v=u.D,m=u.ya,v&&m&&fe(I,v,m),fe(I,"VER",u.la),es(u,I),I}function Ku(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new We(new wn({eb:v})):new We(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wa(){}t=Wa.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ts(){}ts.prototype.g=function(u,m){return new vt(u,m)};function vt(u,m){ot.call(this),this.g=new Hu(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!A(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new En(this)}D(vt,ot),vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){eo(this.g)},vt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Us(u),u=v);m.i.push(new Xr(m.Ya++,u)),m.G==3&&Ji(m)},vt.prototype.N=function(){this.g.l=null,delete this.j,eo(this.g),delete this.g,vt.aa.N.call(this)};function Yn(u){Bs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}D(Yn,Bs);function Zu(){Ea.call(this),this.status=1}D(Zu,Ea);function En(u){this.g=u}D(En,Wa),En.prototype.ua=function(){_t(this.g,"a")},En.prototype.ta=function(u){_t(this.g,new Yn(u))},En.prototype.sa=function(u){_t(this.g,new Zu)},En.prototype.ra=function(){_t(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,bT=function(){return new ts},LT=function(){return $s()},RT=fi,Sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,Hc=Zr,Hs.COMPLETE="complete",kT=Hs,wa.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,cl=wa,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,xT=We}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});const hy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new nd("@firebase/firestore");function il(){return Ts.logLevel}function re(t,...e){if(Ts.logLevel<=Ae.DEBUG){const n=e.map(ng);Ts.debug(`Firestore (${la}): ${t}`,...n)}}function zi(t,...e){if(Ts.logLevel<=Ae.ERROR){const n=e.map(ng);Ts.error(`Firestore (${la}): ${t}`,...n)}}function Ko(t,...e){if(Ts.logLevel<=Ae.WARN){const n=e.map(ng);Ts.warn(`Firestore (${la}): ${t}`,...n)}}function ng(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+t;throw zi(e),new Error(e)}function De(t,e){t||pe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class TL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IL{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ni,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ni)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(De(typeof i.accessToken=="string"),new NT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Ot(e)}}class PL{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class SL{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new PL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new CL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=xL(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function Zo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new gt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new gt(0,0))}static max(){return new ge(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,i){n===void 0?n=0:n>e.length&&pe(),i===void 0?i=e.length-n:i>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Xl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),l=n.get(r);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Xl{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const kL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Xl{construct(e,n,i){return new Ct(e,n,i)}static isValidIdentifier(e){return kL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ie(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ie(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(o(),r++)}if(o(),l)throw new ie(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ue.fromString(e))}static fromName(e){return new oe(Ue.fromString(e).popFirst(5))}static empty(){return new oe(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ue(e.slice()))}}function RL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(i===1e9?new gt(n+1,0):new gt(n,i));return new Lr(r,oe.empty(),e)}function LL(t){return new Lr(t.readTime,t.key,-1)}class Lr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Lr(ge.min(),oe.empty(),-1)}static max(){return new Lr(ge.max(),oe.empty(),-1)}}function bL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==NL)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let r=0,o=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++o,l&&o===r&&n()},d=>i(d))}),l=!0,o===r&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(r=>r?Q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,r)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(_=>{l[p]=_,++h,h===o&&i(l)},_=>r(_))}})}static doWhile(e,n){return new Q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function DL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _u(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ig.oe=-1;function od(t){return t==null}function xh(t){return t===0&&1/t==-1/0}function ML(t){return typeof t=="number"&&Number.isInteger(t)&&!xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cc(this.root,e,this.comparator,!0)}}class Cc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??St.RED,this.left=r??St.EMPTY,this.right=o??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new St(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return St.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fy(this.data.getIterator())}getIteratorFrom(e){return new fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new un([])}unionWith(e){let n=new xt(Ct.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new MT("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const VL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(De(!!t),typeof t=="string"){let e=0;const n=VL.exec(t);if(De(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Is(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sg(t){const e=t.mapValue.fields.__previous_value__;return rg(e)?sg(e):e}function Jl(t){const e=br(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n,i,r,o,l,h,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p}}class eu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac={mapValue:{}};function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rg(t)?4:zL(t)?9007199254740991:jL(t)?10:11:pe()}function ci(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=br(r.timestampValue),h=br(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Is(r.bytesValue).isEqual(Is(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return nt(r.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(r.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return nt(r.integerValue)===nt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=nt(r.doubleValue),h=nt(o.doubleValue);return l===h?xh(l)===xh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Zo(t.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(dy(l)!==dy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ci(l[d],h[d])))return!1;return!0}(t,e);default:return pe()}}function tu(t,e){return(t.values||[]).find(n=>ci(n,e))!==void 0}function Qo(t,e){if(t===e)return 0;const n=Ps(t),i=Ps(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),d=nt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return py(t.timestampValue,e.timestampValue);case 4:return py(Jl(t),Jl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Is(o),d=Is(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=Le(h[p],d[p]);if(_!==0)return _}return Le(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Le(nt(o.latitude),nt(l.latitude));return h!==0?h:Le(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return my(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,p,_;const y=o.fields||{},T=l.fields||{},C=(h=y.value)===null||h===void 0?void 0:h.arrayValue,D=(d=T.value)===null||d===void 0?void 0:d.arrayValue,V=Le(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((_=D==null?void 0:D.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:my(C,D)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Ac.mapValue&&l===Ac.mapValue)return 0;if(o===Ac.mapValue)return 1;if(l===Ac.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let y=0;y<d.length&&y<_.length;++y){const T=Le(d[y],_[y]);if(T!==0)return T;const C=Qo(h[d[y]],p[_[y]]);if(C!==0)return C}return Le(d.length,_.length)}(t.mapValue,e.mapValue);default:throw pe()}}function py(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=br(t),i=br(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function my(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Qo(n[r],i[r]);if(o)return o}return Le(n.length,i.length)}function Yo(t){return Cp(t)}function Cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=br(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Cp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Cp(n.fields[l])}`;return r+"}"}(t.mapValue):pe()}function gy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ap(t){return!!t&&"integerValue"in t}function og(t){return!!t&&"arrayValue"in t}function _y(t){return!!t&&"nullValue"in t}function vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qc(t){return!!t&&"mapValue"in t}function jL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Pl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(n)}setAll(e){let n=Ct.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=Pl(l):r.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];qc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){bs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Qt(Pl(this.value))}}function VT(t){const e=[];return bs(t.fields,(n,i)=>{const r=new Ct([n]);if(qc(i)){const o=VT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,i,r,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Mt(e,0,ge.min(),ge.min(),ge.min(),Qt.empty(),0)}static newFoundDocument(e,n,i,r){return new Mt(e,1,n,ge.min(),i,r,0)}static newNoDocument(e,n){return new Mt(e,2,n,ge.min(),ge.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,ge.min(),ge.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.position=e,this.inclusive=n}}function yy(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=Qo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n="asc"){this.field=e,this.dir=n}}function UL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{}class ht extends FT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new $L(e,n,i):n==="array-contains"?new qL(e,i):n==="in"?new GL(e,i):n==="not-in"?new KL(e,i):n==="array-contains-any"?new ZL(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new WL(e,i):new HL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qo(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends FT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gn(e,n)}matches(e){return jT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jT(t){return t.op==="and"}function zT(t){return BL(t)&&jT(t)}function BL(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function xp(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Yo(t.value);if(zT(t))return t.filters.map(e=>xp(e)).join(",");{const e=t.filters.map(n=>xp(n)).join(",");return`${t.op}(${e})`}}function UT(t,e){return t instanceof ht?function(i,r){return r instanceof ht&&i.op===r.op&&i.field.isEqual(r.field)&&ci(i.value,r.value)}(t,e):t instanceof Gn?function(i,r){return r instanceof Gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,h)=>o&&UT(l,r.filters[h]),!0):!1}(t,e):void pe()}function BT(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"}(t):"Filter"}class $L extends ht{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class WL extends ht{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HL extends ht{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $T(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class qL extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return og(n)&&tu(n.arrayValue,this.value)}}class GL extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tu(this.value.arrayValue,n)}}class KL extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tu(this.value.arrayValue,n)}}class ZL extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>tu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n=null,i=[],r=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function Ey(t,e=null,n=[],i=[],r=null,o=null,l=null){return new QL(t,e,n,i,r,o,l)}function ag(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>xp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Yo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Yo(i)).join(",")),e.ue=n}return e.ue}function lg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wy(t.startAt,e.startAt)&&wy(t.endAt,e.endAt)}function kp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n=null,i=[],r=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YL(t,e,n,i,r,o,l,h){return new vu(t,e,n,i,r,o,l,h)}function ug(t){return new vu(t)}function Ty(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WT(t){return t.collectionGroup!==null}function Sl(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new xt(Ct.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Rh(o,i))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new Rh(Ct.keyField(),i))}return e.ce}function ai(t){const e=_e(t);return e.le||(e.le=XL(e,Sl(t))),e.le}function XL(t,e){if(t.limitType==="F")return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Rh(r.field,o)});const n=t.endAt?new kh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new kh(t.startAt.position,t.startAt.inclusive):null;return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Rp(t,e){const n=t.filters.concat([e]);return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lp(t,e,n){return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return lg(ai(t),ai(e))&&t.limitType===e.limitType}function HT(t){return`${ag(ai(t))}|lt:${t.limitType}`}function po(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>BT(r)).join(", ")}]`),od(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Yo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Yo(r)).join(",")),`Target(${i})`}(ai(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Sl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(l,h,d){const p=yy(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,Sl(i),r)||i.endAt&&!function(l,h,d){const p=yy(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,Sl(i),r))}(t,e)}function JL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qT(t){return(e,n)=>{let i=!1;for(const r of Sl(t)){const o=eb(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function eb(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Qo(d,p):pe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return DT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Ye(oe.comparator);function Ui(){return tb}const GT=new Ye(oe.comparator);function hl(...t){let e=GT;for(const n of t)e=e.insert(n.key,n);return e}function KT(t){let e=GT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function cs(){return Cl()}function ZT(){return Cl()}function Cl(){return new ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const nb=new Ye(oe.comparator),ib=new xt(oe.comparator);function Ce(...t){let e=ib;for(const n of t)e=e.add(n);return e}const rb=new xt(Le);function sb(){return rb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function QT(t){return{integerValue:""+t}}function ob(t,e){return ML(e)?QT(e):cg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function ab(t,e,n){return t instanceof nu?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&rg(o)&&(o=sg(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof iu?XT(t,e):t instanceof ru?JT(t,e):function(r,o){const l=YT(r,o),h=Iy(l)+Iy(r.Pe);return Ap(l)&&Ap(r.Pe)?QT(h):cg(r.serializer,h)}(t,e)}function lb(t,e,n){return t instanceof iu?XT(t,e):t instanceof ru?JT(t,e):n}function YT(t,e){return t instanceof Lh?function(i){return Ap(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class nu extends ud{}class iu extends ud{constructor(e){super(),this.elements=e}}function XT(t,e){const n=eI(e);for(const i of t.elements)n.some(r=>ci(r,i))||n.push(i);return{arrayValue:{values:n}}}class ru extends ud{constructor(e){super(),this.elements=e}}function JT(t,e){let n=eI(e);for(const i of t.elements)n=n.filter(r=>!ci(r,i));return{arrayValue:{values:n}}}class Lh extends ud{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Iy(t){return nt(t.integerValue||t.doubleValue)}function eI(t){return og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){this.field=e,this.transform=n}}function cb(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof iu&&r instanceof iu||i instanceof ru&&r instanceof ru?Zo(i.elements,r.elements,ci):i instanceof Lh&&r instanceof Lh?ci(i.Pe,r.Pe):i instanceof nu&&r instanceof nu}(t.transform,e.transform)}class hb{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function tI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hg(t.key,Wn.none()):new yu(t.key,t.data,Wn.none());{const n=t.data,i=Qt.empty();let r=new xt(Ct.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new Ur(t.key,i,new un(r.toArray()),Wn.none())}}function db(t,e,n){t instanceof yu?function(r,o,l){const h=r.value.clone(),d=Sy(r.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(r,o,l){if(!Gc(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Sy(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(nI(r)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Al(t,e,n,i){return t instanceof yu?function(o,l,h,d){if(!Gc(o.precondition,l))return h;const p=o.value.clone(),_=Cy(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ur?function(o,l,h,d){if(!Gc(o.precondition,l))return h;const p=Cy(o.fieldTransforms,d,l),_=l.data;return _.setAll(nI(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,h){return Gc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function fb(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=YT(i.transform,r||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(i.field,o))}return n||null}function Py(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Zo(i,r,(o,l)=>cb(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yu extends cd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ur extends cd{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function nI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Sy(t,e,n){const i=new Map;De(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,h=e.data.field(o.field);i.set(o.field,lb(l,h,n[r]))}return i}function Cy(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,ab(o,l,e))}return i}class hg extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pb extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&db(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Al(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Al(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ZT();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(r.key)?null:h;const d=tI(l,h);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(n,i)=>Py(n,i))&&Zo(this.baseMutations,e.baseMutations,(n,i)=>Py(n,i))}}class dg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){De(e.mutations.length===i.length);let r=function(){return nb}();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new dg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,ke;function vb(t){switch(t){default:return pe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function iI(t){if(t===void 0)return zi("GRPC error has no .code"),K.UNKNOWN;switch(t){case ut.OK:return K.OK;case ut.CANCELLED:return K.CANCELLED;case ut.UNKNOWN:return K.UNKNOWN;case ut.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ut.INTERNAL:return K.INTERNAL;case ut.UNAVAILABLE:return K.UNAVAILABLE;case ut.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ut.NOT_FOUND:return K.NOT_FOUND;case ut.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ut.ABORTED:return K.ABORTED;case ut.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ut.DATA_LOSS:return K.DATA_LOSS;default:return pe()}}(ke=ut||(ut={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new ps([4294967295,4294967295],0);function Ay(t){const e=yb().encode(t),n=new AT;return n.update(e),new Uint8Array(n.digest())}function xy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ps([n,i],0),new ps([r,o],0)]}class fg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(i<0)throw new dl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ps.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(ps.fromNumber(i)));return r.compare(wb)===1&&(r=new ps([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ay(e),[i,r]=xy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new fg(o,r,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=Ay(e),[i,r]=xy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new hd(ge.min(),r,new Ye(Le),Ui(),Ce())}}class wu{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new wu(i,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class rI{constructor(e,n){this.targetId=e,this.me=n}}class sI{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class ky{constructor(){this.fe=0,this.ge=Ly(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),i=Ce();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:pe()}}),new wu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Ly()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Eb{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ui(),this.qe=Ry(),this.Qe=new Ye(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(kp(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,Mt.newNoDocument(l,ge.min()))}else De(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,h;try{l=Is(i).toUint8Array()}catch(d){if(d instanceof MT)return Ko("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new fg(l,r,o)}catch(d){return Ko(d instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&kp(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Mt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Ce();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const r=new hd(e,n,this.Qe,this.ke,i);return this.ke=Ui(),this.qe=Ry(),this.Qe=new Ye(Le),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ky,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xt(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ky),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ry(){return new Ye(oe.comparator)}function Ly(){return new Ye(oe.comparator)}const Tb={asc:"ASCENDING",desc:"DESCENDING"},Ib={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pb={and:"AND",or:"OR"};class Sb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bp(t,e){return t.useProto3Json||od(e)?e:{value:e}}function bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Cb(t,e){return bh(t,e.toTimestamp())}function li(t){return De(!!t),ge.fromTimestamp(function(n){const i=br(n);return new gt(i.seconds,i.nanos)}(t))}function pg(t,e){return Np(t,e).canonicalString()}function Np(t,e){const n=function(r){return new Ue(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aI(t){const e=Ue.fromString(t);return De(dI(e)),e}function Op(t,e){return pg(t.databaseId,e.path)}function df(t,e){const n=aI(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(uI(n))}function lI(t,e){return pg(t.databaseId,e)}function Ab(t){const e=aI(t);return e.length===4?Ue.emptyPath():uI(e)}function Dp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uI(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function by(t,e,n){return{name:Op(t,e),fields:n.value.mapValue.fields}}function xb(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(De(_===void 0||typeof _=="string"),Rt.fromBase64String(_||"")):(De(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Rt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=p.code===void 0?K.UNKNOWN:iI(p.code);return new ie(_,p.message||"")}(l);n=new sI(i,r,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=df(t,i.document.name),o=li(i.document.updateTime),l=i.document.createTime?li(i.document.createTime):ge.min(),h=new Qt({mapValue:{fields:i.document.fields}}),d=Mt.newFoundDocument(r,o,l,h),p=i.targetIds||[],_=i.removedTargetIds||[];n=new Kc(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=df(t,i.document),o=i.readTime?li(i.readTime):ge.min(),l=Mt.newNoDocument(r,o),h=i.removedTargetIds||[];n=new Kc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=df(t,i.document),o=i.removedTargetIds||[];n=new Kc([],o,r,null)}else{if(!("filter"in e))return pe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new _b(r,o),h=i.targetId;n=new rI(h,l)}}return n}function kb(t,e){let n;if(e instanceof yu)n={update:by(t,e.key,e.value)};else if(e instanceof hg)n={delete:Op(t,e.key)};else if(e instanceof Ur)n={update:by(t,e.key,e.data),updateMask:Fb(e.fieldMask)};else{if(!(e instanceof pb))return pe();n={verify:Op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof nu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof iu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ru)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Lh)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw pe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:Cb(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe()}(t,e.precondition)),n}function Rb(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(r,o){let l=r.updateTime?li(r.updateTime):li(o);return l.isEqual(ge.min())&&(l=li(o)),new hb(l,r.transformResults||[])}(n,e))):[]}function Lb(t,e){return{documents:[lI(t,e.path)]}}function bb(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=lI(t,r);const o=function(p){if(p.length!==0)return hI(Gn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(T){return{field:mo(T.field),direction:Db(T.dir)}}(_))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=bp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function Nb(t){let e=Ab(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){De(i===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(y){const T=cI(y);return T instanceof Gn&&zT(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(T=>function(D){return new Rh(go(D.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(y){let T;return T=typeof y=="object"?y.value:y,od(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(y){const T=!!y.before,C=y.values||[];return new kh(C,T)}(n.startAt));let p=null;return n.endAt&&(p=function(y){const T=!y.before,C=y.values||[];return new kh(C,T)}(n.endAt)),YL(e,r,l,o,h,"F",d,p)}function Ob(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=go(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=go(n.unaryFilter.field);return ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=go(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=go(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(go(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(i=>cI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function Db(t){return Tb[t]}function Mb(t){return Ib[t]}function Vb(t){return Pb[t]}function mo(t){return{fieldPath:t.canonicalString()}}function go(t){return Ct.fromServerFormat(t.fieldPath)}function hI(t){return t instanceof ht?function(n){if(n.op==="=="){if(vy(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NAN"}};if(_y(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vy(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NAN"}};if(_y(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(n.field),op:Mb(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const i=n.getFilters().map(r=>hI(r));return i.length===1?i[0]:{compositeFilter:{op:Vb(n.op),filters:i}}}(t):pe()}function Fb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,i,r,o=ge.min(),l=ge.min(),h=Rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.ct=e}}function zb(t){const e=Nb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(){this.un=new Bb}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Lr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class Bb{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new xt(Ue.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new xt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xo(0)}static kn(){return new Xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.changes=new ua(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Al(i.mutation,r,un.empty(),gt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ce()){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=hl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,r){let o=Ui();const l=Cl(),h=function(){return Cl()}();return n.forEach((d,p)=>{const _=i.get(p.key);r.has(p.key)&&(_===void 0||_.mutation instanceof Ur)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Al(_.mutation,p,_.mutation.getFieldMask(),gt.now())):l.set(p.key,un.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),n.forEach((p,_)=>{var y;return h.set(p,new Wb(_,(y=l.get(p))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const i=Cl();let r=new Ye((l,h)=>l-h),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let _=i.get(d)||un.empty();_=h.applyToLocalView(p,_),i.set(d,_);const y=(r.get(h.batchId)||Ce()).add(d);r=r.insert(h.batchId,y)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,y=ZT();_.forEach(T=>{if(!o.has(T)){const C=tI(n.get(T),i.get(T));C!==null&&y.set(T,C),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return Q.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Q.resolve(cs());let h=-1,d=o;return l.next(p=>Q.forEach(p,(_,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(_)?Q.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ce())).next(_=>({batchId:h,changes:KT(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=hl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=hl();return this.indexManager.getCollectionParents(e,o).next(h=>Q.forEach(h,d=>{const p=function(y,T){return new vu(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(_=>{_.forEach((y,T)=>{l=l.insert(y,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,Mt.newInvalidDocument(_)))});let h=hl();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Al(_.mutation,p,un.empty(),gt.now()),ld(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:li(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:zb(r.bundledQuery),readTime:li(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.overlays=new Ye(oe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=cs();return Q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const r=cs(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ye((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=o.get(p.largestBatchId);_===null&&(_=cs(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=cs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=r)););return Q.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new gb(n,i));let o=this.Ir.get(n);o===void 0&&(o=Ce(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Tr=new xt(wt.Er),this.dr=new xt(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new wt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new Ue([])),i=new wt(n,e),r=new wt(n,e+1),o=[];return this.dr.forEachInRange([i,r],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Ue([])),i=new wt(n,e),r=new wt(n,e+1);let o=Ce();return this.dr.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new wt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class wt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new xt(wt.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new mb(o,n,i,r);this.mutationQueue.push(l);for(const h of r)this.br=this.br.add(new wt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new wt(n,0),r=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],l=>{const h=this.Dr(l.wr);o.push(h)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xt(Le);return n.forEach(r=>{const o=new wt(r,0),l=new wt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new wt(new oe(o),0);let h=new xt(Le);return this.br.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(d.wr)),!0)},l),Q.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(n.mutations,r=>{const o=new wt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new wt(n,0),r=this.br.firstAfterOrEqual(i);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.Mr=e,this.docs=function(){return new Ye(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let i=Ui();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Mt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ui();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||bL(LL(_),i)<=0||(r.has(_.key)||ld(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){pe()}Or(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Yb(this)}getSize(e){return Q.resolve(this.size)}}class Yb extends $b{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.persistence=e,this.Nr=new ua(n=>ag(n),lg),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mg,this.targetCount=0,this.kr=Xo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),Q.waitFor(o).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ig(0),this.Kr=!1,this.Kr=!0,this.$r=new Kb,this.referenceDelegate=e(this),this.Ur=new Xb(this),this.indexManager=new Ub,this.remoteDocumentCache=function(r){return new Qb(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new jb(n),this.Gr=new qb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Gb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new Zb(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new eN(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Q.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class eN extends OL{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Jr=new mg,this.Yr=null}static Zr(e){return new gg(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,i=>{const r=oe.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Ce(),r=Ce();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new _g(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ux()?8:DL(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new tN;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(il()<=Ae.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(il()<=Ae.DEBUG&&re("QueryEngine","Query:",po(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(il()<=Ae.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):Q.resolve())}Yi(e,n){if(Ty(n))return Q.resolve(null);let i=ai(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Lp(n,null,"F"),i=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ce(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.ts(n,h);return this.ns(n,p,l,d.readTime)?this.Yi(e,Lp(n,null,"F")):this.rs(e,p,n,d)}))})))}Zi(e,n,i,r){return Ty(n)||r.isEqual(ge.min())?Q.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,r)?Q.resolve(null):(il()<=Ae.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),po(n)),this.rs(e,l,n,RL(r,-1)).next(h=>h))})}ts(e,n){let i=new xt(qT(e));return n.forEach((r,o)=>{ld(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return il()<=Ae.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",po(n)),this.Ji.getDocumentsMatchingQuery(e,n,Lr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ye(Le),this._s=new ua(o=>ag(o),lg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function rN(t,e,n,i){return new iN(t,e,n,i)}async function fI(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ce();for(const p of r){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:h}))})})}function sN(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,p,_){const y=p.batch,T=y.keys();let C=Q.resolve();return T.forEach(D=>{C=C.next(()=>_.getEntry(d,D)).next(V=>{const U=p.docVersions.get(D);De(U!==null),V.version.compareTo(U)<0&&(y.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),_.addEntry(V)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ce();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function pI(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function oN(t,e){const n=_e(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((_,y)=>{const T=r.get(y);if(!T)return;h.push(n.Ur.removeMatchingKeys(o,_.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,_.addedDocuments,y)));let C=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?C=C.withResumeToken(Rt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),r=r.insert(y,C),function(V,U,R){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(T,C,_)&&h.push(n.Ur.updateTargetData(o,C))});let d=Ui(),p=Ce();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(aN(o,l,e.documentUpdates).next(_=>{d=_.Ps,p=_.Is})),!i.isEqual(ge.min())){const _=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return Q.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.os=r,o))}function aN(t,e,n){let i=Ce(),r=Ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Ui();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),d.isNoDocument()&&d.version.isEqual(ge.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):re("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Ps:l,Is:r}})}function lN(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function uN(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Q.resolve(r)):n.Ur.allocateTargetId(i).next(l=>(r=new gr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Mp(t,e,n){const i=_e(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!_u(l))throw l;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Ny(t,e,n){const i=_e(t);let r=ge.min(),o=Ce();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const y=_e(d),T=y._s.get(_);return T!==void 0?Q.resolve(y.os.get(T)):y.Ur.getTargetData(p,_)}(i,l,ai(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?r:ge.min(),n?o:Ce())).next(h=>(cN(i,JL(e),h),{documents:h,Ts:o})))}function cN(t,e,n){let i=t.us.get(e)||ge.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Oy{constructor(){this.activeTargetIds=sb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hN{constructor(){this.so=new Oy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Oy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function ff(){return xc===null?xc=function(){return 268435456+Math.round(2147483648*Math.random())}():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class mN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,l){const h=ff(),d=this.xo(n,i.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${h}:`,d,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(n,d,p,r).then(_=>(re("RestConnection",`Received RPC '${n}' ${h}: `,_),_),_=>{throw Ko("RestConnection",`RPC '${n}' ${h} failed with error: `,_,"url: ",d,"request:",r),_})}Lo(n,i,r,o,l,h){return this.Mo(n,i,r,o,l)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),r&&r.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const r=fN[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=ff();return new Promise((l,h)=>{const d=new xT;d.setWithCredentials(!0),d.listenOnce(kT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Hc.NO_ERROR:const _=d.getResponseJson();re(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),l(_);break;case Hc.TIMEOUT:re(Nt,`RPC '${e}' ${o} timed out`),h(new ie(K.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const y=d.getStatus();if(re(Nt,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const D=function(U){const R=U.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(R)>=0?R:K.UNKNOWN}(C.status);h(new ie(D,C.message))}else h(new ie(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ie(K.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(Nt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(r);re(Nt,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=ff(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=bT(),h=LT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=o.join("");re(Nt,`Creating RPC '${e}' stream ${r}: ${_}`,d);const y=l.createWebChannel(_,d);let T=!1,C=!1;const D=new pN({Io:U=>{C?re(Nt,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(T||(re(Nt,`Opening RPC '${e}' stream ${r} transport.`),y.open(),T=!0),re(Nt,`RPC '${e}' stream ${r} sending:`,U),y.send(U))},To:()=>y.close()}),V=(U,R,A)=>{U.listen(R,N=>{try{A(N)}catch(H){setTimeout(()=>{throw H},0)}})};return V(y,cl.EventType.OPEN,()=>{C||(re(Nt,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),V(y,cl.EventType.CLOSE,()=>{C||(C=!0,re(Nt,`RPC '${e}' stream ${r} transport closed`),D.So())}),V(y,cl.EventType.ERROR,U=>{C||(C=!0,Ko(Nt,`RPC '${e}' stream ${r} transport errored:`,U),D.So(new ie(K.UNAVAILABLE,"The operation could not be completed")))}),V(y,cl.EventType.MESSAGE,U=>{var R;if(!C){const A=U.data[0];De(!!A);const N=A,H=N.error||((R=N[0])===null||R===void 0?void 0:R.error);if(H){re(Nt,`RPC '${e}' stream ${r} received error:`,H);const X=H.status;let $=function(x){const k=ut[x];if(k!==void 0)return iI(k)}(X),S=H.message;$===void 0&&($=K.INTERNAL,S="Unknown error status: "+X+" with message "+H.message),C=!0,D.So(new ie($,S)),y.close()}else re(Nt,`RPC '${e}' stream ${r} received:`,A),D.bo(A)}}),V(h,RT.STAT_EVENT,U=>{U.stat===Sp.PROXY?re(Nt,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===Sp.NOPROXY&&re(Nt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new Sb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,i,r,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ie(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gN extends gI{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=xb(this.serializer,e),i=function(o){if(!("targetChange"in o))return ge.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ge.min():l.readTime?li(l.readTime):ge.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Dp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=kp(d)?{documents:Lb(o,d)}:{query:bb(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=oI(o,l.resumeToken);const p=bp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ge.min())>0){h.readTime=bh(o,l.snapshotVersion.toTimestamp());const p=bp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=Ob(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Dp(this.serializer),n.removeTarget=e,this.a_(n)}}class _N extends gI{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Rb(e.writeResults,e.commitTime),i=li(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Dp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>kb(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ie(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Np(n,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(K.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Np(n,i),r,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(K.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zi(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{Ns(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=_e(d);p.L_.add(4),await Eu(p),p.q_.set("Unknown"),p.L_.delete(4),await fd(p)}(this))})}),this.q_=new yN(i,r)}}async function fd(t){if(Ns(t))for(const e of t.B_)await e(!0)}async function Eu(t){for(const e of t.B_)await e(!1)}function _I(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Eg(n)?wg(n):ca(n).r_()&&yg(n,e))}function vg(t,e){const n=_e(t),i=ca(n);n.N_.delete(e),i.r_()&&vI(n,e),n.N_.size===0&&(i.r_()?i.o_():Ns(n)&&n.q_.set("Unknown"))}function yg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ca(t).A_(e)}function vI(t,e){t.Q_.xe(e),ca(t).R_(e)}function wg(t){t.Q_=new Eb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ca(t).start(),t.q_.v_()}function Eg(t){return Ns(t)&&!ca(t).n_()&&t.N_.size>0}function Ns(t){return _e(t).L_.size===0}function yI(t){t.Q_=void 0}async function EN(t){t.q_.set("Online")}async function TN(t){t.N_.forEach((e,n)=>{yg(t,e)})}async function IN(t,e){yI(t),Eg(t)?(t.q_.M_(e),wg(t)):t.q_.set("Unknown")}async function PN(t,e,n){if(t.q_.set("Online"),e instanceof sI&&e.state===2&&e.cause)try{await async function(r,o){const l=o.cause;for(const h of o.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nh(t,i)}else if(e instanceof Kc?t.Q_.Ke(e):e instanceof rI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const i=await pI(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.N_.get(p);_&&o.N_.set(p,_.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const _=o.N_.get(d);if(!_)return;o.N_.set(d,_.withResumeToken(Rt.EMPTY_BYTE_STRING,_.snapshotVersion)),vI(o,d);const y=new gr(_.target,d,p,_.sequenceNumber);yg(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await Nh(t,i)}}async function Nh(t,e,n){if(!_u(e))throw e;t.L_.add(1),await Eu(t),t.q_.set("Offline"),n||(n=()=>pI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await fd(t)})}function wI(t,e){return e().catch(n=>Nh(t,n,e))}async function pd(t){const e=_e(t),n=Nr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SN(e);)try{const r=await lN(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,CN(e,r)}catch(r){await Nh(e,r)}EI(e)&&TI(e)}function SN(t){return Ns(t)&&t.O_.length<10}function CN(t,e){t.O_.push(e);const n=Nr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function EI(t){return Ns(t)&&!Nr(t).n_()&&t.O_.length>0}function TI(t){Nr(t).start()}async function AN(t){Nr(t).p_()}async function xN(t){const e=Nr(t);for(const n of t.O_)e.m_(n.mutations)}async function kN(t,e,n){const i=t.O_.shift(),r=dg.from(i,e,n);await wI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await pd(t)}async function RN(t,e){e&&Nr(t).V_&&await async function(i,r){if(function(l){return vb(l)&&l!==K.ABORTED}(r.code)){const o=i.O_.shift();Nr(i).s_(),await wI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await pd(i)}}(t,e),EI(t)&&TI(t)}async function My(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=Ns(n);n.L_.add(3),await Eu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await fd(n)}async function LN(t,e){const n=_e(t);e?(n.L_.delete(2),await fd(n)):e||(n.L_.add(2),await Eu(n),n.q_.set("Unknown"))}function ca(t){return t.K_||(t.K_=function(n,i,r){const o=_e(n);return o.w_(),new gN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:EN.bind(null,t),Ro:TN.bind(null,t),mo:IN.bind(null,t),d_:PN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Eg(t)?wg(t):t.q_.set("Unknown")):(await t.K_.stop(),yI(t))})),t.K_}function Nr(t){return t.U_||(t.U_=function(n,i,r){const o=_e(n);return o.w_(),new _N(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AN.bind(null,t),mo:RN.bind(null,t),f_:xN.bind(null,t),g_:kN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await pd(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,h=new Tg(e,n,l,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(t,e){if(zi("AsyncQueue",`${e}: ${t}`),_u(t))return new ie(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=hl(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.W_=new Ye(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Jo{constructor(e,n,i,r,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Jo(e,n,jo.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class NN{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=_e(n),o=r.queries;r.queries=Fy(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new ie(K.ABORTED,"Firestore shutting down"))}}function Fy(){return new ua(t=>HT(t),ad)}async function II(t,e){const n=_e(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new bN,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=Ig(l,`Initialization of query '${po(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Pg(n)}async function PI(t,e){const n=_e(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ON(t,e){const n=_e(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(r)&&(i=!0);l.z_=r}}i&&Pg(n)}function DN(t,e,n){const i=_e(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Pg(t){t.Y_.forEach(e=>{e.next()})}var Vp,jy;(jy=Vp||(Vp={})).ea="default",jy.Cache="cache";class SI{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Jo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.key=e}}class AI{constructor(e){this.key=e}}class MN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=qT(e),this.Ra=new jo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Vy,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((_,y)=>{const T=r.get(_),C=ld(this.query,y)?y:null,D=!!T&&this.mutatedKeys.has(T.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;T&&C?T.data.isEqual(C.data)?D!==V&&(i.track({type:3,doc:C}),U=!0):this.ga(T,C)||(i.track({type:2,doc:C}),U=!0,(d&&this.Aa(C,d)>0||p&&this.Aa(C,p)<0)&&(h=!0)):!T&&C?(i.track({type:0,doc:C}),U=!0):T&&!C&&(i.track({type:1,doc:T}),U=!0,(d||p)&&(h=!0)),U&&(C?(l=l.add(C),o=V?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((_,y)=>function(C,D){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return V(C)-V(D)}(_.type,y.type)||this.Aa(_.doc,y.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,p=d!==this.Ea;return this.Ea=d,l.length!==0||p?{snapshot:new Jo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new AI(i))}),this.da.forEach(i=>{e.has(i)||n.push(new CI(i))}),n}ba(e){this.Ta=e.Ts,this.da=Ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Jo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class FN{constructor(e){this.key=e,this.va=!1}}class jN{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new ua(h=>HT(h),ad),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(oe.comparator),this.Na=new Map,this.La=new mg,this.Ba={},this.ka=new Map,this.qa=Xo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function zN(t,e,n=!0){const i=NI(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await xI(i,e,n,!0),r}async function UN(t,e){const n=NI(t);await xI(n,e,!0,!1)}async function xI(t,e,n,i){const r=await uN(t.localStore,ai(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await BN(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&_I(t.remoteStore,r),h}async function BN(t,e,n,i,r){t.Ka=(y,T,C)=>async function(V,U,R,A){let N=U.view.ma(R);N.ns&&(N=await Ny(V.localStore,U.query,!1).then(({documents:S})=>U.view.ma(S,N)));const H=A&&A.targetChanges.get(U.targetId),X=A&&A.targetMismatches.get(U.targetId)!=null,$=U.view.applyChanges(N,V.isPrimaryClient,H,X);return Uy(V,U.targetId,$.wa),$.snapshot}(t,y,T,C);const o=await Ny(t.localStore,e,!0),l=new MN(e,o.Ts),h=l.ma(o.documents),d=wu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=l.applyChanges(h,t.isPrimaryClient,d);Uy(t,n,p.wa);const _=new VN(e,n,l);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function $N(t,e,n){const i=_e(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(l=>!ad(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Mp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&vg(i.remoteStore,r.targetId),Fp(i,r.targetId)}).catch(gu)):(Fp(i,r.targetId),await Mp(i.localStore,r.targetId,!0))}async function WN(t,e){const n=_e(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),vg(n.remoteStore,i.targetId))}async function HN(t,e,n){const i=XN(t);try{const r=await function(l,h){const d=_e(l),p=gt.now(),_=h.reduce((C,D)=>C.add(D.key),Ce());let y,T;return d.persistence.runTransaction("Locally write mutations","readwrite",C=>{let D=Ui(),V=Ce();return d.cs.getEntries(C,_).next(U=>{D=U,D.forEach((R,A)=>{A.isValidDocument()||(V=V.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(C,D)).next(U=>{y=U;const R=[];for(const A of h){const N=fb(A,y.get(A.key).overlayedDocument);N!=null&&R.push(new Ur(A.key,N,VT(N.value.mapValue),Wn.exists(!0)))}return d.mutationQueue.addMutationBatch(C,p,R,h)}).next(U=>{T=U;const R=U.applyToLocalDocumentSet(y,V);return d.documentOverlayCache.saveOverlays(C,U.batchId,R)})}).then(()=>({batchId:T.batchId,changes:KT(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,h,d){let p=l.Ba[l.currentUser.toKey()];p||(p=new Ye(Le)),p=p.insert(h,d),l.Ba[l.currentUser.toKey()]=p}(i,r.batchId,n),await Tu(i,r.changes),await pd(i.remoteStore)}catch(r){const o=Ig(r,"Failed to persist write");n.reject(o)}}async function kI(t,e){const n=_e(t);try{const i=await oN(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.Na.get(o);l&&(De(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.va=!0:r.modifiedDocuments.size>0?De(l.va):r.removedDocuments.size>0&&(De(l.va),l.va=!1))}),await Tu(n,i,e)}catch(i){await gu(i)}}function zy(t,e,n){const i=_e(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(l,h){const d=_e(l);d.onlineState=h;let p=!1;d.queries.forEach((_,y)=>{for(const T of y.j_)T.Z_(h)&&(p=!0)}),p&&Pg(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function qN(t,e,n){const i=_e(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let l=new Ye(oe.comparator);l=l.insert(o,Mt.newNoDocument(o,ge.min()));const h=Ce().add(o),d=new hd(ge.min(),new Map,new Ye(Le),l,h);await kI(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Sg(i)}else await Mp(i.localStore,e,!1).then(()=>Fp(i,e,n)).catch(gu)}async function GN(t,e){const n=_e(t),i=e.batch.batchId;try{const r=await sN(n.localStore,e);LI(n,i,null),RI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Tu(n,r)}catch(r){await gu(r)}}async function KN(t,e,n){const i=_e(t);try{const r=await function(l,h){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next(y=>(De(y!==null),_=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,e);LI(i,e,n),RI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Tu(i,r)}catch(r){await gu(r)}}function RI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function LI(t,e,n){const i=_e(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Fp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||bI(t,i)})}function bI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sg(t))}function Uy(t,e,n){for(const i of n)i instanceof CI?(t.La.addReference(i.key,e),ZN(t,i)):i instanceof AI?(re("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||bI(t,i.key)):pe()}function ZN(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(i),Sg(t))}function Sg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Ue.fromString(e)),i=t.qa.next();t.Na.set(i,new FN(n)),t.Oa=t.Oa.insert(n,i),_I(t.remoteStore,new gr(ai(ug(n.path)),i,"TargetPurposeLimboResolution",ig.oe))}}async function Tu(t,e,n){const i=_e(t),r=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(p=>{var _;if((p||n)&&i.isPrimaryClient){const y=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){r.push(p);const y=_g.Wi(d.targetId,p);o.push(y)}}))}),await Promise.all(l),i.Ca.d_(r),await async function(d,p){const _=_e(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(p,T=>Q.forEach(T.$i,C=>_.persistence.referenceDelegate.addReference(y,T.targetId,C)).next(()=>Q.forEach(T.Ui,C=>_.persistence.referenceDelegate.removeReference(y,T.targetId,C)))))}catch(y){if(!_u(y))throw y;re("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const T=y.targetId;if(!y.fromCache){const C=_.os.get(T),D=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(D);_.os=_.os.insert(T,V)}}}(i.localStore,o))}async function QN(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await fI(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new ie(K.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Tu(n,i.hs)}}function YN(t,e){const n=_e(t),i=n.Na.get(e);if(i&&i.va)return Ce().add(i.key);{let r=Ce();const o=n.Ma.get(e);if(!o)return r;for(const l of o){const h=n.Fa.get(l);r=r.unionWith(h.view.Va)}return r}}function NI(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qN.bind(null,e),e.Ca.d_=ON.bind(null,e.eventManager),e.Ca.$a=DN.bind(null,e.eventManager),e}function XN(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KN.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return rN(this.persistence,new nN,e.initialUser,this.serializer)}Ga(e){return new Jb(gg.Zr,this.serializer)}Wa(e){return new hN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QN.bind(null,this.syncEngine),await LN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NN}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),i=function(o){return new mN(o)}(e.databaseInfo);return function(o,l,h,d){return new vN(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,l,h){return new wN(i,r,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>zy(this.syncEngine,n,0),function(){return Dy.D()?new Dy:new dN}())}createSyncEngine(e,n){return function(r,o,l,h,d,p,_){const y=new jN(r,o,l,h,d,p);return _&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=_e(r);re("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Eu(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=OT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{re("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ig(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function mf(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await fI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function By(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eO(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>My(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>My(e.remoteStore,r)),t._onlineComponents=e}async function eO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await mf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ko("Error using user provided cache. Falling back to memory cache: "+n),await mf(t,new Oh)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await mf(t,new Oh);return t._offlineComponents}async function DI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await By(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await By(t,new jp))),t._onlineComponents}function tO(t){return DI(t).then(e=>e.syncEngine)}async function MI(t){const e=await DI(t),n=e.eventManager;return n.onListen=zN.bind(null,e.syncEngine),n.onUnlisten=$N.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WN.bind(null,e.syncEngine),n}function nO(t,e,n={}){const i=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new OI({next:T=>{_.Za(),l.enqueueAndForget(()=>PI(o,y));const C=T.docs.has(h);!C&&T.fromCache?p.reject(new ie(K.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&d&&d.source==="server"?p.reject(new ie(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),y=new SI(ug(h.path),_,{includeMetadataChanges:!0,_a:!0});return II(o,y)}(await MI(t),t.asyncQueue,e,n,i)),i.promise}function iO(t,e,n={}){const i=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new OI({next:T=>{_.Za(),l.enqueueAndForget(()=>PI(o,y)),T.fromCache&&d.source==="server"?p.reject(new ie(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),y=new SI(h,_,{includeMetadataChanges:!0,_a:!0});return II(o,y)}(await MI(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e,n){if(!n)throw new ie(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rO(t,e,n,i){if(e===!0&&i===!0)throw new ie(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wy(t){if(!oe.isDocumentKey(t))throw new ie(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hy(t){if(oe.isDocumentKey(t))throw new ie(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function Bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=md(t);throw new ie(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new EL;switch(i.type){case"firstParty":return new SL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=$y.get(n);i&&(re("ComponentProvider","Removing Datastore"),$y.delete(n),i.terminate())}(this),Promise.resolve()}}function sO(t,e,n,i={}){var r;const o=(t=Bi(t,gd))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Ot.MOCK_USER;else{h=Dx(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ie(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(p)}t._authCredentials=new TL(new NT(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ha(this.firestore,e,this._query)}}class tn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class xr extends ha{constructor(e,n,i){super(e,n,ug(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new oe(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function jI(t,e,...n){if(t=st(t),FI("collection","path",e),t instanceof gd){const i=Ue.fromString(e,...n);return Hy(i),new xr(t,null,i)}{if(!(t instanceof tn||t instanceof xr))throw new ie(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return Hy(i),new xr(t.firestore,null,i)}}function ko(t,e,...n){if(t=st(t),arguments.length===1&&(e=OT.newId()),FI("doc","path",e),t instanceof gd){const i=Ue.fromString(e,...n);return Wy(i),new tn(t,null,new oe(i))}{if(!(t instanceof tn||t instanceof xr))throw new ie(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return Wy(i),new tn(t.firestore,t instanceof xr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mI(this,"async_queue_retry"),this.Vu=()=>{const i=pf();i&&re("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ni;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_u(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw zi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Tg.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class da extends gd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Gy,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,await e}}}function oO(t,e){const n=typeof t=="object"?t:Wm(),i=typeof t=="string"?t:"(default)",r=Ls(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Nx("firestore");o&&sO(r,...o)}return r}function Cg(t){if(t._terminated)throw new ie(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aO(t),t._firestoreClient}function aO(t){var e,n,i;const r=t._freezeSettings(),o=function(h,d,p,_){return new FL(h,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,VI(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new JN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(Rt.fromBase64String(e))}catch(n){throw new ie(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ea(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=/^__.*__$/;class uO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class zI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class kg{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new kg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UI(this.Cu)&&lO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dd(e)}Qu(e,n,i,r=!1){return new kg({Cu:e,methodName:n,qu:i,path:Ct.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rg(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new cO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hO(t,e,n,i,r,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);bg("Data must be an object, but it was:",l,i);const h=BI(i,l);let d,p;if(o.merge)d=new un(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const y of o.mergeFields){const T=zp(e,y,n);if(!l.contains(T))throw new ie(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);WI(_,T)||_.push(T)}d=new un(_),p=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,p=l.fieldTransforms;return new uO(new Qt(h),d,p)}class yd extends vd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}class Lg extends vd{_toFieldTransform(e){return new ub(e.path,new nu)}isEqual(e){return e instanceof Lg}}function dO(t,e,n,i){const r=t.Qu(1,e,n);bg("Data must be an object, but it was:",r,i);const o=[],l=Qt.empty();bs(i,(d,p)=>{const _=Ng(e,d,n);p=st(p);const y=r.Nu(_);if(p instanceof yd)o.push(_);else{const T=Iu(p,y);T!=null&&(o.push(_),l.set(_,T))}});const h=new un(o);return new zI(l,h,r.fieldTransforms)}function fO(t,e,n,i,r,o){const l=t.Qu(1,e,n),h=[zp(e,i,n)],d=[r];if(o.length%2!=0)throw new ie(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(zp(e,o[T])),d.push(o[T+1]);const p=[],_=Qt.empty();for(let T=h.length-1;T>=0;--T)if(!WI(p,h[T])){const C=h[T];let D=d[T];D=st(D);const V=l.Nu(C);if(D instanceof yd)p.push(C);else{const U=Iu(D,V);U!=null&&(p.push(C),_.set(C,U))}}const y=new un(p);return new zI(_,y,l.fieldTransforms)}function pO(t,e,n,i=!1){return Iu(n,t.Qu(i?4:3,e))}function Iu(t,e){if($I(t=st(t)))return bg("Unsupported field value:",e,t),BI(t,e);if(t instanceof vd)return function(i,r){if(!UI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const h of i){let d=Iu(h,r.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=st(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ob(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=gt.fromDate(i);return{timestampValue:bh(r.serializer,o)}}if(i instanceof gt){const o=new gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bh(r.serializer,o)}}if(i instanceof Ag)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ea)return{bytesValue:oI(r.serializer,i._byteString)};if(i instanceof tn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:pg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xg)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return cg(h.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${md(i)}`)}(t,e)}function BI(t,e){const n={};return DT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,(i,r)=>{const o=Iu(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function $I(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Ag||t instanceof ea||t instanceof tn||t instanceof vd||t instanceof xg)}function bg(t,e,n){if(!$I(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=md(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function zp(t,e,n){if((e=st(e))instanceof _d)return e._internalPath;if(typeof e=="string")return Ng(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const mO=new RegExp("[~\\*/\\[\\]]");function Ng(t,e,n){if(e.search(mO)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _d(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new ie(K.INVALID_ARGUMENT,h+t+d)}function WI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gO extends HI{data(){return super.data()}}function Og(t,e){return typeof e=="string"?Ng(t,e):e instanceof _d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class vO extends Dg{}function yO(t,e,...n){let i=[];e instanceof Dg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Mg).length,h=o.filter(d=>d instanceof wd).length;if(l>1||l>0&&h>0)throw new ie(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class wd extends vO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new wd(e,n,i)}_apply(e){const n=this._parse(e);return qI(e._query,n),new ha(e.firestore,e.converter,Rp(e._query,n))}_parse(e){const n=Rg(e.firestore);return function(o,l,h,d,p,_,y){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Zy(y,_);const C=[];for(const D of y)C.push(Ky(d,o,D));T={arrayValue:{values:C}}}else T=Ky(d,o,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Zy(y,_),T=pO(h,l,y,_==="in"||_==="not-in");return ht.create(p,_,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wO(t,e,n){const i=e,r=Og("where",t);return wd._create(r,i,n)}class Mg extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let l=r;const h=o.getFlattenedFilters();for(const d of h)qI(l,d),l=Rp(l,d)}(e._query,n),new ha(e.firestore,e.converter,Rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ky(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new ie(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WT(e)&&n.indexOf("/")!==-1)throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!oe.isDocumentKey(i))throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gy(t,new oe(i))}if(n instanceof tn)return gy(t,n._key);throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${md(n)}.`)}function Zy(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qI(t,e){const n=function(r,o){for(const l of r)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EO{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return bs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>nt(l.doubleValue));return new xg(o)}convertGeoPoint(e){return new Ag(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const n=br(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);De(dI(i));const r=new eu(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return r.isEqual(n)||zi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GI extends HI{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Og("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Zc extends GI{data(e={}){return super.data(e)}}class IO{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Zc(this._firestore,this._userDataWriter,i.key,i,new fl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const d=new Zc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new fl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Zc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new fl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:PO(h.type),doc:d,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){t=Bi(t,tn);const e=Bi(t.firestore,da);return nO(Cg(e),t._key).then(n=>kO(e,t,n))}class KI extends EO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function CO(t){t=Bi(t,ha);const e=Bi(t.firestore,da),n=Cg(e),i=new KI(e);return _O(t._query),iO(n,t._query).then(r=>new IO(e,i,t,r))}function gf(t,e,n,...i){t=Bi(t,tn);const r=Bi(t.firestore,da),o=Rg(r);let l;return l=typeof(e=st(e))=="string"||e instanceof _d?fO(o,"updateDoc",t._key,e,n,i):dO(o,"updateDoc",t._key,e),Vg(r,[l.toMutation(t._key,Wn.exists(!0))])}function AO(t){return Vg(Bi(t.firestore,da),[new hg(t._key,Wn.none())])}function xO(t,e){const n=Bi(t.firestore,da),i=ko(t),r=TO(t.converter,e);return Vg(n,[hO(Rg(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then(()=>i)}function Vg(t,e){return function(i,r){const o=new Ni;return i.asyncQueue.enqueueAndForget(async()=>HN(await tO(i),r,o)),o.promise}(Cg(t),e)}function kO(t,e,n){const i=n.docs.get(e._key),r=new KI(t);return new GI(t,r,e._key,i,new fl(n.hasPendingWrites,n.fromCache),e.converter)}function RO(){return new Lg("serverTimestamp")}(function(e,n=!0){(function(r){la=r})(oa),ui(new qn("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new da(new IL(i.getProvider("auth-internal")),new AL(i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(p.options.projectId,_)}(l,r),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),An(hy,"4.7.3",e),An(hy,"4.7.3","esm2017")})();const ZI="@firebase/installations",Fg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=1e4,YI=`w:${Fg}`,XI="FIS_v2",LO="https://firebaseinstallations.googleapis.com/v1",bO=60*60*1e3,NO="installations",OO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ss=new Rs(NO,OO,DO);function JI(t){return t instanceof Kn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP({projectId:t}){return`${LO}/projects/${t}/installations`}function tP(t){return{token:t.token,requestStatus:2,expiresIn:VO(t.expiresIn),creationTime:Date.now()}}async function nP(t,e){const i=(await e.json()).error;return Ss.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function iP({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MO(t,{refreshToken:e}){const n=iP(t);return n.append("Authorization",FO(e)),n}async function rP(t){const e=await t();return e.status>=500&&e.status<600?t():e}function VO(t){return Number(t.replace("s","000"))}function FO(t){return`${XI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=eP(t),r=iP(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={fid:n,authVersion:XI,appId:t.appId,sdkVersion:YI},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await rP(()=>fetch(i,h));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:tP(p.authToken)}}else throw await nP("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=/^[cdef][\w-]{21}$/,Up="";function BO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$O(t);return UO.test(n)?n:Up}catch{return Up}}function $O(t){return zO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new Map;function aP(t,e){const n=Ed(t);lP(n,e),WO(n,e)}function lP(t,e){const n=oP.get(t);if(n)for(const i of n)i(e)}function WO(t,e){const n=HO();n&&n.postMessage({key:t,fid:e}),qO()}let hs=null;function HO(){return!hs&&"BroadcastChannel"in self&&(hs=new BroadcastChannel("[Firebase] FID Change"),hs.onmessage=t=>{lP(t.data.key,t.data.fid)}),hs}function qO(){oP.size===0&&hs&&(hs.close(),hs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="firebase-installations-database",KO=1,Cs="firebase-installations-store";let _f=null;function jg(){return _f||(_f=UE(GO,KO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Cs)}}})),_f}async function Mh(t,e){const n=Ed(t),r=(await jg()).transaction(Cs,"readwrite"),o=r.objectStore(Cs),l=await o.get(n);return await o.put(e,n),await r.done,(!l||l.fid!==e.fid)&&aP(t,e.fid),e}async function uP(t){const e=Ed(t),i=(await jg()).transaction(Cs,"readwrite");await i.objectStore(Cs).delete(e),await i.done}async function Td(t,e){const n=Ed(t),r=(await jg()).transaction(Cs,"readwrite"),o=r.objectStore(Cs),l=await o.get(n),h=e(l);return h===void 0?await o.delete(n):await o.put(h,n),await r.done,h&&(!l||l.fid!==h.fid)&&aP(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zg(t){let e;const n=await Td(t.appConfig,i=>{const r=ZO(i),o=QO(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Up?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ZO(t){const e=t||{fid:BO(),registrationStatus:0};return cP(e)}function QO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ss.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=YO(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XO(t)}:{installationEntry:e}}async function YO(t,e){try{const n=await jO(t,e);return Mh(t.appConfig,n)}catch(n){throw JI(n)&&n.customData.serverCode===409?await uP(t.appConfig):await Mh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function XO(t){let e=await Qy(t.appConfig);for(;e.registrationStatus===1;)await sP(100),e=await Qy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await zg(t);return i||n}return e}function Qy(t){return Td(t,e=>{if(!e)throw Ss.create("installation-not-found");return cP(e)})}function cP(t){return JO(t)?{fid:t.fid,registrationStatus:0}:t}function JO(t){return t.registrationStatus===1&&t.registrationTime+QI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2({appConfig:t,heartbeatServiceProvider:e},n){const i=t2(t,n),r=MO(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const l={installation:{sdkVersion:YI,appId:t.appId}},h={method:"POST",headers:r,body:JSON.stringify(l)},d=await rP(()=>fetch(i,h));if(d.ok){const p=await d.json();return tP(p)}else throw await nP("Generate Auth Token",d)}function t2(t,{fid:e}){return`${eP(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ug(t,e=!1){let n;const i=await Td(t.appConfig,o=>{if(!hP(o))throw Ss.create("not-registered");const l=o.authToken;if(!e&&r2(l))return o;if(l.requestStatus===1)return n=n2(t,e),o;{if(!navigator.onLine)throw Ss.create("app-offline");const h=o2(o);return n=i2(t,h),h}});return n?await n:i.authToken}async function n2(t,e){let n=await Yy(t.appConfig);for(;n.authToken.requestStatus===1;)await sP(100),n=await Yy(t.appConfig);const i=n.authToken;return i.requestStatus===0?Ug(t,e):i}function Yy(t){return Td(t,e=>{if(!hP(e))throw Ss.create("not-registered");const n=e.authToken;return a2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function i2(t,e){try{const n=await e2(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Mh(t.appConfig,i),n}catch(n){if(JI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await uP(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mh(t.appConfig,i)}throw n}}function hP(t){return t!==void 0&&t.registrationStatus===2}function r2(t){return t.requestStatus===2&&!s2(t)}function s2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+bO}function o2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function a2(t){return t.requestStatus===1&&t.requestTime+QI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t){const e=t,{installationEntry:n,registrationPromise:i}=await zg(e);return i?i.catch(console.error):Ug(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,e=!1){const n=t;return await c2(n),(await Ug(n,e)).token}async function c2(t){const{registrationPromise:e}=await zg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){if(!t||!t.options)throw vf("App Configuration");if(!t.name)throw vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vf(t){return Ss.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="installations",d2="installations-internal",f2=t=>{const e=t.getProvider("app").getImmediate(),n=h2(e),i=Ls(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},p2=t=>{const e=t.getProvider("app").getImmediate(),n=Ls(e,dP).getImmediate();return{getId:()=>l2(n),getToken:r=>u2(n,r)}};function m2(){ui(new qn(dP,f2,"PUBLIC")),ui(new qn(d2,p2,"PRIVATE"))}m2();An(ZI,Fg);An(ZI,Fg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="analytics",g2="firebase_id",_2="origin",v2=60*1e3,y2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new nd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hn=new Rs("analytics","Analytics",w2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){if(!t.startsWith(Bg)){const e=hn.create("invalid-gtag-resource",{gtagURL:t});return nn.warn(e.message),""}return t}function fP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function T2(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function I2(t,e){const n=T2("firebase-js-sdk-policy",{createScriptURL:E2}),i=document.createElement("script"),r=`${Bg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function P2(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function S2(t,e,n,i,r,o){const l=i[r];try{if(l)await e[l];else{const d=(await fP(n)).find(p=>p.measurementId===r);d&&await e[d.appId]}}catch(h){nn.error(h)}t("config",r,o)}async function C2(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const h=await fP(n);for(const d of l){const p=h.find(y=>y.measurementId===d),_=p&&e[p.appId];if(_)o.push(_);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){nn.error(o)}}function A2(t,e,n,i){async function r(o,...l){try{if(o==="event"){const[h,d]=l;await C2(t,e,n,h,d)}else if(o==="config"){const[h,d]=l;await S2(t,e,n,i,h,d)}else if(o==="consent"){const[h,d]=l;t("consent",h,d)}else if(o==="get"){const[h,d,p]=l;t("get",h,d,p)}else if(o==="set"){const[h]=l;t("set",h)}else t(o,...l)}catch(h){nn.error(h)}}return r}function x2(t,e,n,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=A2(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function k2(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Bg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=30,L2=1e3;class b2{constructor(e={},n=L2){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const pP=new b2;function N2(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function O2(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:N2(i)},o=y2.replace("{app-id}",n),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let h="";try{const d=await l.json();!((e=d.error)===null||e===void 0)&&e.message&&(h=d.error.message)}catch{}throw hn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function D2(t,e=pP,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw hn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw hn.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new F2;return setTimeout(async()=>{h.abort()},v2),mP({appId:i,apiKey:r,measurementId:o},l,h,e)}async function mP(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=pP){var o;const{appId:l,measurementId:h}=t;try{await M2(i,e)}catch(d){if(h)return nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:h};throw d}try{const d=await O2(t);return r.deleteThrottleMetadata(l),d}catch(d){const p=d;if(!V2(p)){if(r.deleteThrottleMetadata(l),h)return nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:h};throw d}const _=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?Mv(n,r.intervalMillis,R2):Mv(n,r.intervalMillis),y={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return r.setThrottleMetadata(l,y),nn.debug(`Calling attemptFetch again in ${_} millis`),mP(t,y,i,r)}}function M2(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function V2(t){if(!(t instanceof Kn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class F2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function j2(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,l=Object.assign(Object.assign({},i),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(){if(VE())try{await FE()}catch(t){return nn.warn(hn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return nn.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function U2(t,e,n,i,r,o,l){var h;const d=D2(t);d.then(C=>{n[C.measurementId]=C.appId,t.options.measurementId&&C.measurementId!==t.options.measurementId&&nn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${C.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(C=>nn.error(C)),e.push(d);const p=z2().then(C=>{if(C)return i.getId()}),[_,y]=await Promise.all([d,p]);k2(o)||I2(o,_.measurementId),r("js",new Date);const T=(h=l==null?void 0:l.config)!==null&&h!==void 0?h:{};return T[_2]="firebase",T.update=!0,y!=null&&(T[g2]=y),r("config",_.measurementId,T),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.app=e}_delete(){return delete xl[this.app.options.appId],Promise.resolve()}}let xl={},Xy=[];const Jy={};let yf="dataLayer",$2="gtag",ew,gP,tw=!1;function W2(){const t=[];if(ME()&&t.push("This is a browser extension environment."),Bx()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=hn.create("invalid-analytics-context",{errorInfo:e});nn.warn(n.message)}}function H2(t,e,n){W2();const i=t.options.appId;if(!i)throw hn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hn.create("no-api-key");if(xl[i]!=null)throw hn.create("already-exists",{id:i});if(!tw){P2(yf);const{wrappedGtag:o,gtagCore:l}=x2(xl,Xy,Jy,yf,$2);gP=o,ew=l,tw=!0}return xl[i]=U2(t,Xy,Jy,e,ew,yf,n),new B2(t)}function q2(t=Wm()){t=st(t);const e=Ls(t,Vh);return e.isInitialized()?e.getImmediate():G2(t)}function G2(t,e={}){const n=Ls(t,Vh);if(n.isInitialized()){const r=n.getImmediate();if(Zl(e,n.getOptions()))return r;throw hn.create("already-initialized")}return n.initialize({options:e})}function K2(t,e,n,i){t=st(t),j2(gP,xl[t.app.options.appId],e,n,i).catch(r=>nn.error(r))}const nw="@firebase/analytics",iw="0.10.8";function Z2(){ui(new qn(Vh,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return H2(i,r,n)},"PUBLIC")),ui(new qn("analytics-internal",t,"PRIVATE")),An(nw,iw),An(nw,iw,"esm2017");function t(e){try{const n=e.getProvider(Vh).getImmediate();return{logEvent:(i,r,o)=>K2(n,i,r,o)}}catch(n){throw hn.create("interop-component-reg-failed",{reason:n})}}}Z2();const Q2={apiKey:"AIzaSyA-ZR_VWGeaRLHT-NX-ly4L95GiGrIMCqY",authDomain:"pilani-trails-84cef.firebaseapp.com",projectId:"pilani-trails-84cef",storageBucket:"pilani-trails-84cef.firebasestorage.app",messagingSenderId:"110096860877",appId:"1:110096860877:web:b23c4b91a6f05cf0ac0b84",measurementId:"G-CG49XPR3LQ"},$g=BE(Q2),dr=_L($g),ss=oO($g);let Y2=null;try{Y2=q2($g)}catch(t){console.warn("Firebase Analytics initialization failed:",t)}const Wg=q.createContext({}),Os=()=>q.useContext(Wg),X2=({children:t})=>{const[e,n]=q.useState(null),[i,r]=q.useState(!0),o=async(_,y,T)=>{const C=await fT(dr,_,y);return T&&await rR(C.user,{displayName:T}),C},l=(_,y)=>nR(dr,_,y),h=()=>{const _=new ii;return ST(dr,_)},d=()=>pT(dr);q.useEffect(()=>aR(dr,async y=>{if(y)try{console.log("[AuthContext] user signed in:",y.email,"uid:",y.uid);const T=ko(ss,"users",y.uid),C=await SO(T),D=C&&C.exists()?C.data():{};console.log("[AuthContext] userData from Firestore:",D),n({...y,...D})}catch(T){console.error("[AuthContext] Error loading user data from Firestore:",T),n(y)}else console.log("[AuthContext] no user logged in"),n(null);r(!1)}),[]);const p={currentUser:e,signup:o,login:l,signInWithGoogle:h,logout:d,loading:i};return E.jsx(Wg.Provider,{value:p,children:!i&&t})},wf=({children:t})=>{const{currentUser:e,loading:n}=Os();return n?E.jsx("div",{children:"Loading..."}):e?t:E.jsx(kE,{to:"/login",replace:!0})};function J2(t){return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true":!1}const eD=({children:t})=>{const{currentUser:e,loading:n}=Os();return n?E.jsx("div",{style:{padding:20},children:"Checking admin permissions..."}):e?J2(e)?t:E.jsxs("div",{style:{padding:24,textAlign:"center"},children:[E.jsx("h2",{children:"Access Denied"}),E.jsx("p",{children:"You must be an admin to access this page."})]}):E.jsx(kE,{to:"/login",replace:!0})},tD="/pilani-trails/assets/logo-ByW2n5sB.jpg",nD=()=>{const{currentUser:t}=Os(),e=sa(),[n,i]=q.useState(!1);console.log("[Header] currentUser:",t);const r=async()=>{try{await pT(dr),e("/login")}catch(h){console.error("Logout failed:",h)}},o=()=>i(h=>!h),l=t&&(t.role==="admin"||t.isAdmin===!0||t.email==="admin@pilanitrails.com");return E.jsx("header",{className:"app-header",children:E.jsx("nav",{className:"header-nav",children:E.jsxs("div",{className:"header-inner",children:[E.jsx("div",{className:"nav-brand",children:E.jsx($t,{to:"/",className:"brand-link",onClick:()=>i(!1),children:E.jsx("img",{src:tD,alt:"Pilani Trails Logo",className:"brand-logo"})})}),E.jsx("button",{className:"menu-toggle",onClick:o,"aria-label":"Toggle menu",children:n?E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[E.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),E.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),E.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),E.jsxs("ul",{className:`nav-links ${n?"open":""}`,children:[E.jsx("li",{children:E.jsx($t,{to:"/",onClick:()=>i(!1),children:"Home"})}),t?E.jsxs(E.Fragment,{children:[E.jsx("li",{children:E.jsx($t,{to:"/dashboard",onClick:()=>i(!1),children:"Dashboard"})}),E.jsx("li",{children:E.jsx($t,{to:"/propose",onClick:()=>i(!1),children:"Propose Location"})}),l&&E.jsx(E.Fragment,{children:E.jsx("li",{children:E.jsx($t,{to:"/admin/review",onClick:()=>i(!1),children:"Admin Review"})})}),E.jsx("li",{children:E.jsx("button",{onClick:r,className:"logout-btn",children:"Logout"})})]}):E.jsxs(E.Fragment,{children:[E.jsx("li",{children:E.jsx($t,{to:"/login",onClick:()=>i(!1),children:"Login"})}),E.jsx("li",{children:E.jsx($t,{to:"/signup",onClick:()=>i(!1),children:"Signup"})})]})]})]})})})};function _P(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const iD=1;function rD(t){return Object.freeze({__version:iD,map:t})}function sD(t,e){return Object.freeze({...t,...e})}const vP=q.createContext(null),yP=vP.Provider;function Hg(){const t=q.useContext(vP);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function oD(t){function e(n,i){const{instance:r,context:o}=t(n).current;return q.useImperativeHandle(i,()=>r),n.children==null?null:kl.createElement(yP,{value:o},n.children)}return q.forwardRef(e)}function aD(t){function e(n,i){const[r,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(i,()=>l),q.useEffect(function(){r&&l.update()},[l,r,n.children]);const h=l._contentNode;return h?vE.createPortal(n.children,h):null}return q.forwardRef(e)}function lD(t){function e(n,i){const{instance:r}=t(n).current;return q.useImperativeHandle(i,()=>r),null}return q.forwardRef(e)}function wP(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function qg(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function uD(t,e){return function(i,r){const o=Hg(),l=t(qg(i,o),o);return _P(o.map,i.attribution),wP(l.current,i.eventHandlers),e(l.current,o,i,r),l}}var Bp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(XP,function(n){var i="1.9.4";function r(s){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)s[a]=g[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var f=c.call(arguments,2);return function(){return s.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function p(s,a,c){var f,g,w,b;return b=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(s.apply(c,arguments),setTimeout(b,a),f=!0)},w}function _(s,a,c){var f=a[1],g=a[0],w=f-g;return s===f&&c?s:((s-g)%w+w)%w+g}function y(){return!1}function T(s,a){if(a===!1)return s;var c=Math.pow(10,a===void 0?6:a);return Math.round(s*c)/c}function C(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function D(s){return C(s).split(/\s+/)}function V(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var c in a)s.options[c]=a[c];return s.options}function U(s,a,c){var f=[];for(var g in s)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function A(s,a){return s.replace(R,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var N=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function H(s,a){for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var S=0;function P(s){var a=+new Date,c=Math.max(0,16-(a-S));return S=a+c,window.setTimeout(s,c)}var x=window.requestAnimationFrame||$("RequestAnimationFrame")||P,k=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function M(s,a,c){if(c&&x===P)s.call(a);else return x.call(window,l(s,a))}function F(s){s&&k.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:_,falseFn:y,formatNum:T,trim:C,splitWords:D,setOptions:V,getParamString:U,template:A,isArray:N,indexOf:H,emptyImageUrl:X,requestFn:x,cancelFn:k,requestAnimFrame:M,cancelAnimFrame:F};function Xe(){}Xe.extend=function(s){var a=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return s.statics&&r(a,s.statics),s.includes&&(hi(s.includes),r.apply(null,[f].concat(s.includes))),r(f,s),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},r(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,b=f._initHooks.length;w<b;w++)f._initHooks[w].call(this)}},a},Xe.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Xe.mergeOptions=function(s){return r(this.prototype.options,s),this},Xe.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function hi(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=N(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dt={on:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a);else{s=D(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],a,c)}return this},off:function(s,a,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],a);else{s=D(s);for(var g=arguments.length===1,w=0,b=s.length;w<b;w++)g?this._off(s[w]):this._off(s[w],a,c)}return this},_on:function(s,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,a,c){var f,g,w;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=y;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var b=this._listens(s,a,c);if(b!==!1){var z=f[b];this._firingCount&&(z.fn=y,this._events[s]=f=f.slice()),f.splice(b,1)}}},fire:function(s,a,c){if(!this.listens(s,c))return this;var f=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,b=g.length;w<b;w++){var z=g[w],B=z.fn;z.once&&this.off(s,B,z.ctx),B.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(s,a,c,f){typeof s!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,g,c)!==!1)return!0;if(f){for(var b in this._eventParents)if(this._eventParents[b].listens(s,a,c,f))return!0}return!1},_listens:function(s,a,c){if(!this._events)return!1;var f=this._events[s]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a,!0);else{s=D(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],a,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var jt=Xe.extend(dt);function G(s,a,c){this.x=c?Math.round(s):s,this.y=c?Math.round(a):a}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=J(s);var a=s.x-this.x,c=s.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function J(s,a,c){return s instanceof G?s:N(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,a,c)}function de(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}de.prototype={extend:function(s){var a,c;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)a=c=J(s);else if(s=ye(s),a=s.min,c=s.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,c;return typeof s[0]=="number"||s instanceof G?s=J(s):s=ye(s),s instanceof de?(a=s.min,c=s.max):a=c=s,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,w=g.x>=a.x&&f.x<=c.x,b=g.y>=a.y&&f.y<=c.y;return w&&b},overlaps:function(s){s=ye(s);var a=this.min,c=this.max,f=s.min,g=s.max,w=g.x>a.x&&f.x<c.x,b=g.y>a.y&&f.y<c.y;return w&&b},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*s,g=Math.abs(a.y-c.y)*s;return ye(J(a.x-f,a.y-g),J(c.x+f,c.y+g))},equals:function(s){return s?(s=ye(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ye(s,a){return!s||s instanceof de?s:new de(s,a)}function Pe(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}Pe.prototype={extend:function(s){var a=this._southWest,c=this._northEast,f,g;if(s instanceof we)f=s,g=s;else if(s instanceof Pe){if(f=s._southWest,g=s._northEast,!f||!g)return this}else return s?this.extend(me(s)||be(s)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(s){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*s,g=Math.abs(a.lng-c.lng)*s;return new Pe(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=me(s):s=be(s);var a=this._southWest,c=this._northEast,f,g;return s instanceof Pe?(f=s.getSouthWest(),g=s.getNorthEast()):f=g=s,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(s){s=be(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,b=g.lng>=a.lng&&f.lng<=c.lng;return w&&b},overlaps:function(s){s=be(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,b=g.lng>a.lng&&f.lng<c.lng;return w&&b},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=be(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(s,a){return s instanceof Pe?s:new Pe(s,a)}function we(s,a,c){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(s,a){if(!s)return!1;s=me(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+T(this.lat,s)+", "+T(this.lng,s)+")"},distanceTo:function(s){return Zn.distance(this,me(s))},wrap:function(){return Zn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,c=a/Math.cos(Math.PI/180*this.lat);return be([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function me(s,a,c){return s instanceof we?s:N(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new we(s,a,c)}var ft={latLngToPoint:function(s,a){var c=this.projection.project(s),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(s,a){var c=this.scale(a),f=this.transformation.untransform(s,c);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(s),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new de(f,g)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new we(c,a,f)},wrapLatLngBounds:function(s){var a=s.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return s;var w=s.getSouthWest(),b=s.getNorthEast(),z=new we(w.lat-f,w.lng-g),B=new we(b.lat-f,b.lng-g);return new Pe(z,B)}},Zn=r({},ft,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var c=Math.PI/180,f=s.lat*c,g=a.lat*c,w=Math.sin((a.lat-s.lat)*c/2),b=Math.sin((a.lng-s.lng)*c/2),z=w*w+Math.cos(f)*Math.cos(g)*b*b,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),Su=6378137,Hi={R:Su,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,s.lat),-c),g=Math.sin(f*a);return new G(this.R*s.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=Su*Math.PI;return new de([-s,-s],[s,s])}()};function qi(s,a,c,f){if(N(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=c,this._d=f}qi.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new G((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function di(s,a,c,f){return new qi(s,a,c,f)}var Br=r({},Zn,{code:"EPSG:3857",projection:Hi,transformation:function(){var s=.5/(Math.PI*Hi.R);return di(s,.5,-s,.5)}()}),fa=r({},Br,{code:"EPSG:900913"});function Ds(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function pa(s,a){var c="",f,g,w,b,z,B;for(f=0,w=s.length;f<w;f++){for(z=s[f],g=0,b=z.length;g<b;g++)B=z[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var ma=document.documentElement.style,Ms="ActiveXObject"in window,Cu=Ms&&!document.addEventListener,Vs="msLaunchUri"in navigator&&!("documentMode"in document),Fs=mn("webkit"),Au=mn("android"),js=mn("android 2")||mn("android 3"),ga=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xu=Au&&mn("Google")&&ga<537&&!("AudioNode"in window),ot=!!window.opera,_t=!Vs&&mn("chrome"),$r=mn("gecko")&&!Fs&&!ot&&!Ms,ku=!_t&&mn("safari"),_a=mn("phantom"),Ru="OTransition"in ma,Wr=navigator.platform.indexOf("Win")===0,va=Ms&&"transition"in ma,zs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!js,Us="MozPerspective"in ma,Id=!window.L_DISABLE_3D&&(va||zs||Us)&&!Ru&&!_a,Hr=typeof orientation<"u"||mn("mobile"),ya=Hr&&Fs,Lu=Hr&&zs,wa=!window.PointerEvent&&window.MSPointerEvent,Gi=!!(window.PointerEvent||wa),Bs="ontouchstart"in window||!!window.TouchEvent,Ea=!window.L_NO_TOUCH&&(Bs||Gi),fi=Hr&&ot,bu=Hr&&$r,$s=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Nu=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return s}(),qr=function(){return!!document.createElement("canvas").getContext}(),Ws=!!(document.createElementNS&&Ds("svg").createSVGRect),It=!!Ws&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ou=!Ws&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Gr=navigator.platform.indexOf("Mac")===0,Kr=navigator.platform.indexOf("Linux")===0;function mn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:Ms,ielt9:Cu,edge:Vs,webkit:Fs,android:Au,android23:js,androidStock:xu,opera:ot,chrome:_t,gecko:$r,safari:ku,phantom:_a,opera12:Ru,win:Wr,ie3d:va,webkit3d:zs,gecko3d:Us,any3d:Id,mobile:Hr,mobileWebkit:ya,mobileWebkit3d:Lu,msPointer:wa,pointer:Gi,touch:Ea,touchNative:Bs,mobileOpera:fi,mobileGecko:bu,retina:$s,passiveEvents:Nu,canvas:qr,svg:Ws,vml:Ou,inlineSvg:It,mac:Gr,linux:Kr},pi=se.msPointer?"MSPointerDown":"pointerdown",Du=se.msPointer?"MSPointerMove":"pointermove",Mu=se.msPointer?"MSPointerUp":"pointerup",Zr=se.msPointer?"MSPointerCancel":"pointercancel",Hs={touchstart:pi,touchmove:Du,touchend:Mu,touchcancel:Zr},qs={touchstart:Ks,touchmove:Gs,touchend:Gs,touchcancel:Gs},Ln={},bn=!1;function Vu(s,a,c){return a==="touchstart"&&ju(),qs[a]?(c=qs[a].bind(this,c),s.addEventListener(Hs[a],c,!1),c):(console.warn("wrong event specified:",a),y)}function Fu(s,a,c){if(!Hs[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(Hs[a],c,!1)}function Ta(s){Ln[s.pointerId]=s}function Ia(s){Ln[s.pointerId]&&(Ln[s.pointerId]=s)}function Pa(s){delete Ln[s.pointerId]}function ju(){bn||(document.addEventListener(pi,Ta,!0),document.addEventListener(Du,Ia,!0),document.addEventListener(Mu,Pa,!0),document.addEventListener(Zr,Pa,!0),bn=!0)}function Gs(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Ln)a.touches.push(Ln[c]);a.changedTouches=[a],s(a)}}function Ks(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&qe(a),Gs(s,a)}function zu(s){var a={},c,f;for(f in s)c=s[f],a[f]=c&&c.bind?c.bind(s):c;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Sa=200;function Qr(s,a){s.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var b=Va(w);if(!(b.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!b.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=Sa?(f++,f===2&&a(zu(w))):f=1,c=z}}}return s.addEventListener("click",g),{dblclick:a,simDblclick:g}}function mi(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var Yr=_i(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xr=_i(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ca=Xr==="webkitTransition"||Xr==="OTransition"?Xr+"End":"transitionend";function Aa(s){return typeof s=="string"?document.getElementById(s):s}function Ki(s,a){var c=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);c=f?f[a]:null}return c==="auto"?null:c}function Se(s,a,c){var f=document.createElement(s);return f.className=a||"",c&&c.appendChild(f),f}function Fe(s){var a=s.parentNode;a&&a.removeChild(s)}function Jr(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function gi(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function Zi(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function xa(s,a){if(s.classList!==void 0)return s.classList.contains(a);var c=gn(s);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ve(s,a){if(s.classList!==void 0)for(var c=D(a),f=0,g=c.length;f<g;f++)s.classList.add(c[f]);else if(!xa(s,a)){var w=gn(s);ka(s,(w?w+" ":"")+a)}}function $e(s,a){s.classList!==void 0?s.classList.remove(a):ka(s,C((" "+gn(s)+" ").replace(" "+a+" "," ")))}function ka(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function gn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Je(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&Zs(s,a)}function Zs(s,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):s.style.filter+=" progid:"+f+"(opacity="+a+")"}function _i(s){for(var a=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in a)return s[c];return!1}function Qn(s,a,c){var f=a||new G(0,0);s.style[Yr]=(se.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function fe(s,a){s._leaflet_pos=a,se.any3d?Qn(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function _n(s){return s._leaflet_pos||new G(0,0)}var Nn,On,Ra;if("onselectstart"in document)Nn=function(){le(window,"selectstart",qe)},On=function(){Me(window,"selectstart",qe)};else{var Qi=_i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Nn=function(){if(Qi){var s=document.documentElement.style;Ra=s[Qi],s[Qi]="none"}},On=function(){Qi&&(document.documentElement.style[Qi]=Ra,Ra=void 0)}}function La(){le(window,"dragstart",qe)}function ba(){Me(window,"dragstart",qe)}var Qs,Na;function vi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(rn(),Qs=s,Na=s.style.outlineStyle,s.style.outlineStyle="none",le(window,"keydown",rn))}function rn(){Qs&&(Qs.style.outlineStyle=Na,Qs=void 0,Na=void 0,Me(window,"keydown",rn))}function Oa(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ys(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var Uu={__proto__:null,TRANSFORM:Yr,TRANSITION:Xr,TRANSITION_END:Ca,get:Aa,getStyle:Ki,create:Se,remove:Fe,empty:Jr,toFront:gi,toBack:Zi,hasClass:xa,addClass:ve,removeClass:$e,setClass:ka,getClass:gn,setOpacity:Je,testProp:_i,setTransform:Qn,setPosition:fe,getPosition:_n,get disableTextSelection(){return Nn},get enableTextSelection(){return On},disableImageDrag:La,enableImageDrag:ba,preventOutline:vi,restoreOutline:rn,getSizedParentNode:Oa,getScale:Ys};function le(s,a,c,f){if(a&&typeof a=="object")for(var g in a)Da(s,g,a[g],c);else{a=D(a);for(var w=0,b=a.length;w<b;w++)Da(s,a[w],c,f)}return this}var vn="_leaflet_events";function Me(s,a,c,f){if(arguments.length===1)Bu(s),delete s[vn];else if(a&&typeof a=="object")for(var g in a)Ma(s,g,a[g],c);else if(a=D(a),arguments.length===2)Bu(s,function(z){return H(a,z)!==-1});else for(var w=0,b=a.length;w<b;w++)Ma(s,a[w],c,f);return this}function Bu(s,a){for(var c in s[vn]){var f=c.split(/\d/)[0];(!a||a(f))&&Ma(s,f,null,null,c)}}var yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Da(s,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(s[vn]&&s[vn][g])return this;var w=function(z){return c.call(f||s,z||window.event)},b=w;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?w=Vu(s,a,w):se.touch&&a==="dblclick"?w=Qr(s,w):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(yn[a]||a,w,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(z){z=z||window.event,Fa(s,z)&&b(z)},s.addEventListener(yn[a],w,!1)):s.addEventListener(a,b,!1):s.attachEvent("on"+a,w),s[vn]=s[vn]||{},s[vn][g]=w}function Ma(s,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=s[vn]&&s[vn][g];if(!w)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?Fu(s,a,w):se.touch&&a==="dblclick"?mi(s,w):"removeEventListener"in s?s.removeEventListener(yn[a]||a,w,!1):s.detachEvent("on"+a,w),s[vn][g]=null}function wn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Yi(s){return Da(s,"wheel",wn),this}function Xi(s){return le(s,"mousedown touchstart dblclick contextmenu",wn),s._leaflet_disable_click=!0,this}function qe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function sn(s){return qe(s),wn(s),this}function Va(s){if(s.composedPath)return s.composedPath();for(var a=[],c=s.target;c;)a.push(c),c=c.parentNode;return a}function Xs(s,a){if(!a)return new G(s.clientX,s.clientY);var c=Ys(a),f=c.boundingClientRect;return new G((s.clientX-f.left)/c.x-a.clientLeft,(s.clientY-f.top)/c.y-a.clientTop)}var We=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $u(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/We:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Fa(s,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var Wu={__proto__:null,on:le,off:Me,stopPropagation:wn,disableScrollPropagation:Yi,disableClickPropagation:Xi,preventDefault:qe,stop:sn,getPropagationPath:Va,getMousePosition:Xs,getWheelDelta:$u,isExternalTarget:Fa,addListener:le,removeListener:Me},ja=jt.extend({run:function(s,a,c,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=_n(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var c=this._startPos.add(this._offset.multiplyBy(s));a&&c._round(),fe(this._el,c),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Te=jt.extend({options:{crs:Br,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=V(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(me(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xr&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,Ca,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(me(s),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=r({animate:c.animate},c.zoom),c.pan=r({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,c.zoom):this._tryAnimatedPan(s,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=s instanceof G?s:this.latLngToContainerPoint(s),b=w.subtract(g).multiplyBy(1-1/f),z=this.containerPointToLatLng(g.add(b));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():be(s);var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(s,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),b=this.project(s.getSouthWest(),g),z=this.project(s.getNorthEast(),g),B=this.unproject(b.add(z).divideBy(2).add(w),g);return{center:B,zoom:g}},fitBounds:function(s,a){if(s=be(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=J(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ja,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(s,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(s),w=this.getSize(),b=this._zoom;s=me(s),a=a===void 0?b:a;var z=Math.max(w.x,w.y),B=z*this.getZoomScale(b,a),Z=g.distanceTo(f)||1,te=1.42,ue=te*te;function Ee(lt){var oc=lt?-1:1,GP=lt?B:z,KP=B*B-z*z+oc*ue*ue*Z*Z,ZP=2*GP*ue*Z,Rd=KP/ZP,g_=Math.sqrt(Rd*Rd+1)-Rd,QP=g_<1e-9?-18:Math.log(g_);return QP}function Ut(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function yt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Tn(lt){return Ut(lt)/yt(lt)}var Kt=Ee(0);function ho(lt){return z*(yt(Kt)/yt(Kt+te*lt))}function $P(lt){return z*(yt(Kt)*Tn(Kt+te*lt)-Ut(Kt))/ue}function WP(lt){return 1-Math.pow(1-lt,1.5)}var HP=Date.now(),p_=(Ee(1)-Kt)/te,qP=c.duration?1e3*c.duration:1e3*p_*.8;function m_(){var lt=(Date.now()-HP)/qP,oc=WP(lt)*p_;lt<=1?(this._flyToFrame=M(m_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy($P(oc)/Z)),b),this.getScaleZoom(z/ho(oc),b),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),m_.call(this),this},flyToBounds:function(s,a){var c=this._getBoundsCenterZoom(s,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(s){return s=be(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,be(s));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(s),b=this.getPixelBounds(),z=ye([b.min.add(c),b.max.subtract(f)]),B=z.getSize();if(!z.contains(w)){this._enforcingBounds=!0;var Z=w.subtract(z.getCenter()),te=z.extend(w).getSize().subtract(B);g.x+=Z.x<0?-te.x:te.x,g.y+=Z.y<0?-te.y:te.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,s):navigator.geolocation.getCurrentPosition(a,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,c=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,c=s.coords.longitude,f=new we(a,c),g=f.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var b=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(b,w.maxZoom):b)}var z={latlng:f,bounds:g,timestamp:s.timestamp};for(var B in s.coords)typeof s.coords[B]=="number"&&(z[B]=s.coords[B]);this.fire("locationfound",z)}},addHandler:function(s,a){if(!a)return this;var c=this[s]=new a(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Fe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Fe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=Se("div",c,a||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new Pe(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,c){s=be(s),c=J(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),b=s.getNorthWest(),z=s.getSouthEast(),B=this.getSize().subtract(c),Z=ye(this.project(z,f),this.project(b,f)).getSize(),te=se.any3d?this.options.zoomSnap:1,ue=B.x/Z.x,Ee=B.y/Z.y,Ut=a?Math.max(ue,Ee):Math.min(ue,Ee);return f=this.getScaleZoom(Ut,f),te&&(f=Math.round(f/(te/100))*(te/100),f=a?Math.ceil(f/te)*te:Math.floor(f/te)*te),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var c=this._getTopLeftPoint(s,a);return new de(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(s)/c.scale(a)},getScaleZoom:function(s,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(s*c.scale(a));return isNaN(f)?1/0:f},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(me(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(J(s),a)},layerPointToLatLng:function(s){var a=J(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(me(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(me(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(be(s))},distance:function(s,a){return this.options.crs.distance(me(s),me(a))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(s)))},mouseEventToContainerPoint:function(s){return Xs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Aa(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ve(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Ki(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(s.markerPane,"leaflet-zoom-hide"),ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,c){fe(this._mapPane,new G(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(s,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){fe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var a=s?Me:le;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=s.target||s.srcElement,b=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){b=!0;break}if(f&&f.listens(a,!0)&&(g&&!Fa(w,s)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!b&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var c=s.type;c==="mousedown"&&vi(a),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,c){if(s.type==="click"){var f=r({},s);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(s,a);if(c){for(var w=[],b=0;b<c.length;b++)c[b].listens(a,!0)&&w.push(c[b]);g=w.concat(g)}if(g.length){a==="contextmenu"&&qe(s);var z=g[0],B={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Z=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=Z?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(s),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=Z?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(b=0;b<g.length;b++)if(g[b].fire(a,B,!0),B.originalEvent._stopped||g[b].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return _n(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var c=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var c=this.getSize()._divideBy(2);return this.project(s,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(s,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return ye([this.project(s.getSouthWest(),a)._subtract(f),this.project(s.getNorthWest(),a)._subtract(f),this.project(s.getSouthEast(),a)._subtract(f),this.project(s.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,c){if(!c)return s;var f=this.project(s,a),g=this.getSize().divideBy(2),w=new de(f.subtract(g),f.add(g)),b=this._getBoundsOffset(w,c,a);return Math.abs(b.x)<=1&&Math.abs(b.y)<=1?s:this.unproject(f.add(b),a)},_limitOffset:function(s,a){if(!a)return s;var c=this.getPixelBounds(),f=new de(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(s,a,c){var f=ye(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(s.min),w=f.max.subtract(s.max),b=this._rebound(g.x,-w.x),z=this._rebound(g.y,-w.y);return new G(b,z)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),c=this.getMaxZoom(),f=se.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(a,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var c=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var s=this._proxy=Se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var c=Yr,f=this._proxy.style[c];Qn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Fe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();Qn(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(s)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(M(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Js(s,a){return new Te(s,a)}var Gt=Xe.extend({options:{position:"topright"},initialize:function(s){V(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),c=this.getPosition(),f=s._controlCorners[c];return ve(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Fe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),zt=function(s){return new Gt(s)};Te.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",c=this._controlContainer=Se("div",a+"control-container",this._container);function f(g,w){var b=a+g+" "+a+w;s[g+w]=Se("div",b,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Fe(this._controlCorners[s]);Fe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var za=Gt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(s,a,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Gt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Se("div",s),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Xi(a),Yi(a);var f=this._section=Se("section",s+"-list");c&&(this._map.on("click",this.collapse,this),le(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Se("a",s+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),le(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){qe(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Se("div",s+"-base",f),this._separator=Se("div",s+"-separator",f),this._overlaysList=Se("div",s+"-overlays",f),a.appendChild(f)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Jr(this._baseLayersList),Jr(this._overlaysList),this._layerControlInputs=[];var s,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,s=s||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(d(s.target)),c=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(s,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(s){var a=document.createElement("label"),c=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(s.layer),le(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var b=s.overlay?this._overlaysList:this._baseLayersList;return b.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)a=s[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,c,f=this._map.getZoom(),g=s.length-1;g>=0;g--)a=s[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,le(s,"click",qe),this.expand();var a=this;setTimeout(function(){Me(s,"click",qe),a._preventClick=!1})}}),Pd=function(s,a,c){return new za(s,a,c)},yi=Gt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",c=Se("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,c,f,g){var w=Se("a",c,f);return w.innerHTML=s,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),Xi(w),le(w,"click",sn),le(w,"click",g,this),le(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";$e(this._zoomInButton,a),$e(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ve(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ve(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new yi,this.addControl(this.zoomControl))});var Hu=function(s){return new yi(s)},eo=Gt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",c=Se("div",a),f=this.options;return this._addScales(f,a+"-line",c),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,c){s.metric&&(this._mScale=Se("div",a,c)),s.imperial&&(this._iScale=Se("div",a,c))},_update:function(){var s=this._map,a=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/s)},_updateImperial:function(s){var a=s*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(s,a,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),c=s/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),to=function(s){return new eo(s)},qu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ji=Gt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?qu+" ":"")+"Leaflet</a>"},initialize:function(s){V(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Se("div","leaflet-control-attribution"),Xi(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new Ji().addTo(this)});var Sd=function(s){return new Ji(s)};Gt.Layers=za,Gt.Zoom=yi,Gt.Scale=eo,Gt.Attribution=Ji,zt.layers=Pd,zt.zoom=Hu,zt.scale=to,zt.attribution=Sd;var on=Xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});on.addTo=function(s,a){return s.addHandler(a,this),this};var es={Events:dt},Ua=se.touch?"touchstart mousedown":"mousedown",Dn=jt.extend({options:{clickTolerance:3},initialize:function(s,a,c,f){V(this,f),this._element=s,this._dragStartTarget=a||s,this._preventOutline=c},enable:function(){this._enabled||(le(this._dragStartTarget,Ua,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dn._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,Ua,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!xa(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Dn._dragging===this&&this.finishDrag();return}if(!(Dn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Dn._dragging=this,this._preventOutline&&vi(this._element),La(),Nn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,c=Oa(this._element);this._startPoint=new G(a.clientX,a.clientY),this._startPos=_n(this._element),this._parentScale=Ys(c);var f=s.type==="mousedown";le(document,f?"mousemove":"touchmove",this._onMove,this),le(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,c=new G(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,qe(s),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),fe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),ba(),On();var a=this._moved&&this._moving;this._moving=!1,Dn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function no(s,a,c){var f,g=[1,4,2,8],w,b,z,B,Z,te,ue,Ee;for(w=0,te=s.length;w<te;w++)s[w]._code=Yn(s[w],a);for(z=0;z<4;z++){for(ue=g[z],f=[],w=0,te=s.length,b=te-1;w<te;b=w++)B=s[w],Z=s[b],B._code&ue?Z._code&ue||(Ee=vt(Z,B,ue,a,c),Ee._code=Yn(Ee,a),f.push(Ee)):(Z._code&ue&&(Ee=vt(Z,B,ue,a,c),Ee._code=Yn(Ee,a),f.push(Ee)),f.push(B));s=f}return s}function io(s,a){var c,f,g,w,b,z,B,Z,te;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ue=me([0,0]),Ee=be(s),Ut=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Ut<1700&&(ue=ro(s));var yt=s.length,Tn=[];for(c=0;c<yt;c++){var Kt=me(s[c]);Tn.push(a.project(me([Kt.lat-ue.lat,Kt.lng-ue.lng])))}for(z=B=Z=0,c=0,f=yt-1;c<yt;f=c++)g=Tn[c],w=Tn[f],b=g.y*w.x-w.y*g.x,B+=(g.x+w.x)*b,Z+=(g.y+w.y)*b,z+=b*3;z===0?te=Tn[0]:te=[B/z,Z/z];var ho=a.unproject(J(te));return me([ho.lat+ue.lat,ho.lng+ue.lng])}function ro(s){for(var a=0,c=0,f=0,g=0;g<s.length;g++){var w=me(s[g]);a+=w.lat,c+=w.lng,f++}return me([a/f,c/f])}var so={__proto__:null,clipPolygon:no,polygonCenter:io,centroid:ro};function Ba(s,a){if(!a||!s.length)return s.slice();var c=a*a;return s=Ku(s,c),s=Gu(s,c),s}function $a(s,a,c){return Math.sqrt(En(s,a,c,!0))}function wi(s,a,c){return En(s,a,c)}function Gu(s,a){var c=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,oo(s,g,a,0,c-1);var w,b=[];for(w=0;w<c;w++)g[w]&&b.push(s[w]);return b}function oo(s,a,c,f,g){var w=0,b,z,B;for(z=f+1;z<=g-1;z++)B=En(s[z],s[f],s[g],!0),B>w&&(b=z,w=B);w>c&&(a[b]=1,oo(s,a,c,f,b),oo(s,a,c,b,g))}function Ku(s,a){for(var c=[s[0]],f=1,g=0,w=s.length;f<w;f++)Zu(s[f],s[g])>a&&(c.push(s[f]),g=f);return g<w-1&&c.push(s[w-1]),c}var Wa;function ts(s,a,c,f,g){var w=f?Wa:Yn(s,c),b=Yn(a,c),z,B,Z;for(Wa=b;;){if(!(w|b))return[s,a];if(w&b)return!1;z=w||b,B=vt(s,a,z,c,g),Z=Yn(B,c),z===w?(s=B,w=Z):(a=B,b=Z)}}function vt(s,a,c,f,g){var w=a.x-s.x,b=a.y-s.y,z=f.min,B=f.max,Z,te;return c&8?(Z=s.x+w*(B.y-s.y)/b,te=B.y):c&4?(Z=s.x+w*(z.y-s.y)/b,te=z.y):c&2?(Z=B.x,te=s.y+b*(B.x-s.x)/w):c&1&&(Z=z.x,te=s.y+b*(z.x-s.x)/w),new G(Z,te,g)}function Yn(s,a){var c=0;return s.x<a.min.x?c|=1:s.x>a.max.x&&(c|=2),s.y<a.min.y?c|=4:s.y>a.max.y&&(c|=8),c}function Zu(s,a){var c=a.x-s.x,f=a.y-s.y;return c*c+f*f}function En(s,a,c,f){var g=a.x,w=a.y,b=c.x-g,z=c.y-w,B=b*b+z*z,Z;return B>0&&(Z=((s.x-g)*b+(s.y-w)*z)/B,Z>1?(g=c.x,w=c.y):Z>0&&(g+=b*Z,w+=z*Z)),b=s.x-g,z=s.y-w,f?b*b+z*z:new G(g,w)}function u(s){return!N(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function v(s,a){var c,f,g,w,b,z,B,Z;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=me([0,0]),ue=be(s),Ee=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());Ee<1700&&(te=ro(s));var Ut=s.length,yt=[];for(c=0;c<Ut;c++){var Tn=me(s[c]);yt.push(a.project(me([Tn.lat-te.lat,Tn.lng-te.lng])))}for(c=0,f=0;c<Ut-1;c++)f+=yt[c].distanceTo(yt[c+1])/2;if(f===0)Z=yt[0];else for(c=0,w=0;c<Ut-1;c++)if(b=yt[c],z=yt[c+1],g=b.distanceTo(z),w+=g,w>f){B=(w-f)/g,Z=[z.x-B*(z.x-b.x),z.y-B*(z.y-b.y)];break}var Kt=a.unproject(J(Z));return me([Kt.lat+te.lat,Kt.lng+te.lng])}var I={__proto__:null,simplify:Ba,pointToSegmentDistance:$a,closestPointOnSegment:wi,clipSegment:ts,_getEdgeIntersection:vt,_getBitCode:Yn,_sqClosestPointOnSegment:En,isFlat:u,_flat:m,polylineCenter:v},j={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new de([-180,-90],[180,90])},W={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,c=this.R,f=s.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),b=w*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-b)/(1+b),w/2);return f=-c*Math.log(Math.max(z,1e-10)),new G(s.lng*a*c,f)},unproject:function(s){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-s.y/c),b=Math.PI/2-2*Math.atan(w),z=0,B=.1,Z;z<15&&Math.abs(B)>1e-7;z++)Z=g*Math.sin(b),Z=Math.pow((1-Z)/(1+Z),g/2),B=Math.PI/2-2*Math.atan(w*Z)-b,b+=B;return new we(b*a,s.x*a/c)}},ee={__proto__:null,LonLat:j,Mercator:W,SphericalMercator:Hi},Ne=r({},Zn,{code:"EPSG:3395",projection:W,transformation:function(){var s=.5/(Math.PI*W.R);return di(s,.5,-s,.5)}()}),at=r({},Zn,{code:"EPSG:4326",projection:j,transformation:di(1/180,1,-1/180,.5)}),xe=r({},ft,{projection:j,transformation:di(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var c=a.lng-s.lng,f=a.lat-s.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ft.Earth=Zn,ft.EPSG3395=Ne,ft.EPSG3857=Br,ft.EPSG900913=fa,ft.EPSG4326=at,ft.Simple=xe;var Ve=jt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=d(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},_addLayers:function(s){s=s?N(s)?s:[s]:[];for(var a=0,c=s.length;a<c;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=d(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ge=Ve.extend({initialize:function(s,a){V(this,a),this._layers={};var c,f;if(s)for(c=0,f=s.length;c<f;c++)this.addLayer(s[c])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[s]&&f[s].apply(f,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),er=function(s,a){return new Ge(s,a)},tt=Ge.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ge.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ge.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var a in this._layers){var c=this._layers[a];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),ao=function(s,a){return new tt(s,a)},Xn=Xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){V(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=J(f),w=J(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(c.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function PP(s){return new Xn(s)}var Ha=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ha.imagePath!="string"&&(Ha.imagePath=this._detectIconPath()),(this.options.imagePath||Ha.imagePath)+Xn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Se("div","leaflet-default-icon-path",document.body),a=Ki(s,"background-image")||Ki(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Zg=on.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Dn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=_n(a._icon),b=c.getPixelBounds(),z=c.getPixelOrigin(),B=ye(b.min._subtract(z).add(g),b.max._subtract(z).subtract(g));if(!B.contains(w)){var Z=J((Math.max(B.max.x,w.x)-B.max.x)/(b.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(b.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(b.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(b.min.y-B.min.y)).multiplyBy(f);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),fe(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=M(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,c=a._shadow,f=_n(a._icon),g=a._map.layerPointToLatLng(f);c&&fe(c,f),a._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Qu=Ve.extend({options:{icon:new Ha,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){V(this,a),this._latlng=me(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),ve(c,a),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(c,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(ve(g,a),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),Fe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Fe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&fe(this._icon,s),this._shadow&&fe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Je(this._icon,s),this._shadow&&Je(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,c=a.iconSize?J(a.iconSize):J(0,0),f=a.iconAnchor?J(a.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function SP(s,a){return new Qu(s,a)}var tr=Ve.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return V(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Yu=tr.extend({options:{fill:!0,radius:10},initialize:function(s,a){V(this,a),this._latlng=me(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=me(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return tr.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,c=this._clickTolerance(),f=[s+c,a+c];this._pxBounds=new de(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function CP(s,a){return new Yu(s,a)}var Cd=Yu.extend({initialize:function(s,a,c){if(typeof a=="number"&&(a=r({},c,{radius:a})),V(this,a),this._latlng=me(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:tr.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Zn.distance){var g=Math.PI/180,w=this._mRadius/Zn.R/g,b=c.project([a+w,s]),z=c.project([a-w,s]),B=b.add(z).divideBy(2),Z=c.unproject(B).lat,te=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(Z*g))/(Math.cos(a*g)*Math.cos(Z*g)))/g;(isNaN(te)||te===0)&&(te=w/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:B.x-c.project([Z,s-te]).x,this._radiusY=B.y-b.y}else{var ue=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ue).x}this._updateBounds()}});function AP(s,a,c){return new Cd(s,a,c)}var Ei=tr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){V(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,c=null,f=En,g,w,b=0,z=this._parts.length;b<z;b++)for(var B=this._parts[b],Z=1,te=B.length;Z<te;Z++){g=B[Z-1],w=B[Z];var ue=f(s,g,w,!0);ue<a&&(a=ue,c=f(s,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return v(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=me(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],c=u(s),f=0,g=s.length;f<g;f++)c?(a[f]=me(s[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(s[f]);return a},_project:function(){var s=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new G(s,s);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,c){var f=s[0]instanceof we,g=s.length,w,b;if(f){for(b=[],w=0;w<g;w++)b[w]=this._map.latLngToLayerPoint(s[w]),c.extend(b[w]);a.push(b)}else for(w=0;w<g;w++)this._projectLatlngs(s[w],a,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,b,z,B;for(c=0,g=0,w=this._rings.length;c<w;c++)for(B=this._rings[c],f=0,b=B.length;f<b-1;f++)z=ts(B[f],B[f+1],s,f,!0),z&&(a[g]=a[g]||[],a[g].push(z[0]),(z[1]!==B[f+1]||f===b-2)&&(a[g].push(z[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,c=0,f=s.length;c<f;c++)s[c]=Ba(s[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var c,f,g,w,b,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,w=this._parts.length;c<w;c++)for(z=this._parts[c],f=0,b=z.length,g=b-1;f<b;g=f++)if(!(!a&&f===0)&&$a(s,z[g],z[f])<=B)return!0;return!1}});function xP(s,a){return new Ei(s,a)}Ei._flat=m;var lo=Ei.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return io(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Ei.prototype._convertLatLngs.call(this,s),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(s){Ei.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,c=new G(a,a);if(s=new de(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=no(this._rings[f],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,c,f,g,w,b,z,B,Z;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,B=this._parts.length;w<B;w++)for(c=this._parts[w],b=0,Z=c.length,z=Z-1;b<Z;z=b++)f=c[b],g=c[z],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Ei.prototype._containsPoint.call(this,s,!0)}});function kP(s,a){return new lo(s,a)}var Ti=tt.extend({initialize:function(s,a){V(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=N(s)?s:s.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var b=Xu(s,w);return b?(b.feature=tc(s),b.defaultOptions=b.options,this.resetStyle(b),w.onEachFeature&&w.onEachFeature(s,b),this.addLayer(b)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function Xu(s,a){var c=s.type==="Feature"?s.geometry:s,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,b=a&&a.coordsToLatLng||Ad,z,B,Z,te;if(!f&&!c)return null;switch(c.type){case"Point":return z=b(f),Qg(w,s,z,a);case"MultiPoint":for(Z=0,te=f.length;Z<te;Z++)z=b(f[Z]),g.push(Qg(w,s,z,a));return new tt(g);case"LineString":case"MultiLineString":return B=Ju(f,c.type==="LineString"?0:1,b),new Ei(B,a);case"Polygon":case"MultiPolygon":return B=Ju(f,c.type==="Polygon"?1:2,b),new lo(B,a);case"GeometryCollection":for(Z=0,te=c.geometries.length;Z<te;Z++){var ue=Xu({geometry:c.geometries[Z],type:"Feature",properties:s.properties},a);ue&&g.push(ue)}return new tt(g);case"FeatureCollection":for(Z=0,te=c.features.length;Z<te;Z++){var Ee=Xu(c.features[Z],a);Ee&&g.push(Ee)}return new tt(g);default:throw new Error("Invalid GeoJSON object.")}}function Qg(s,a,c,f){return s?s(a,c):new Qu(c,f&&f.markersInheritOptions&&f)}function Ad(s){return new we(s[1],s[0],s[2])}function Ju(s,a,c){for(var f=[],g=0,w=s.length,b;g<w;g++)b=a?Ju(s[g],a-1,c):(c||Ad)(s[g]),f.push(b);return f}function xd(s,a){return s=me(s),s.alt!==void 0?[T(s.lng,a),T(s.lat,a),T(s.alt,a)]:[T(s.lng,a),T(s.lat,a)]}function ec(s,a,c,f){for(var g=[],w=0,b=s.length;w<b;w++)g.push(a?ec(s[w],u(s[w])?0:a-1,c,f):xd(s[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function uo(s,a){return s.feature?r({},s.feature,{geometry:a}):tc(a)}function tc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var kd={toGeoJSON:function(s){return uo(this,{type:"Point",coordinates:xd(this.getLatLng(),s)})}};Qu.include(kd),Cd.include(kd),Yu.include(kd),Ei.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=ec(this._latlngs,a?1:0,!1,s);return uo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),lo.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=ec(this._latlngs,c?2:a?1:0,!0,s);return a||(f=[f]),uo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Ge.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(s).geometry.coordinates)}),uo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(s);if(c)f.push(w.geometry);else{var b=tc(w);b.type==="FeatureCollection"?f.push.apply(f,b.features):f.push(b)}}}),c?uo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Yg(s,a){return new Ti(s,a)}var RP=Yg,nc=Ve.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,c){this._url=s,this._bounds=be(a),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Fe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&gi(this._image),this},bringToBack:function(){return this._map&&Zi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=be(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Se("img");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Qn(this._image,c,a)},_reset:function(){var s=this._image,a=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();fe(s,a.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){Je(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),LP=function(s,a,c){return new nc(s,a,c)},Xg=nc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Se("video");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),s){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var b=Se("source");b.src=this._url[w],a.appendChild(b)}}});function bP(s,a,c){return new Xg(s,a,c)}var Jg=nc.extend({_initImage:function(){var s=this._image=this._url;ve(s,"leaflet-image-layer"),this._zoomAnimated&&ve(s,"leaflet-zoom-animated"),this.options.className&&ve(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function NP(s,a,c){return new Jg(s,a,c)}var Jn=Ve.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof we||N(s))?(this._latlng=me(s),V(this,a)):(V(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Je(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Je(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Je(this._container,0),this._removeTimeout=setTimeout(l(Fe,void 0,this._container),200)):Fe(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=me(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gi(this._container),this},bringToBack:function(){return this._map&&Zi(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof tt){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=J(this.options.offset),c=this._getAnchor();this._zoomAnimated?fe(this._container,s.add(c)):a=a.add(s).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(s,a,c,f){var g=a;return g instanceof s||(g=new s(f).setContent(a)),c&&g.setLatLng(c),g}}),Ve.include({_initOverlay:function(s,a,c,f){var g=c;return g instanceof s?(V(g,f),g._source=this):(g=a&&!f?a:new s(f,this),g.setContent(c)),g}});var ic=Jn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Jn.prototype.openOn.call(this,s)},onAdd:function(s){Jn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof tr||this._source.on("preclick",wn))},onRemove:function(s){Jn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof tr||this._source.off("preclick",wn))},getEvents:function(){var s=Jn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Se("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Se("div",s+"-content-wrapper",a);if(this._contentNode=Se("div",s+"-content",c),Xi(a),Yi(this._contentNode),le(a,"contextmenu",wn),this._tipContainer=Se("div",s+"-tip-container",a),this._tip=Se("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Se("a",s+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',le(f,"click",function(g){qe(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=s.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ve(s,w)):$e(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();fe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(Ki(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new G(this._containerLeft,-c-this._containerBottom);g._add(_n(this._container));var w=s.layerPointToContainerPoint(g),b=J(this.options.autoPanPadding),z=J(this.options.autoPanPaddingTopLeft||b),B=J(this.options.autoPanPaddingBottomRight||b),Z=s.getSize(),te=0,ue=0;w.x+f+B.x>Z.x&&(te=w.x+f-Z.x+B.x),w.x-te-z.x<0&&(te=w.x-z.x),w.y+c+B.y>Z.y&&(ue=w.y+c-Z.y+B.y),w.y-ue-z.y<0&&(ue=w.y-z.y),(te||ue)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,ue]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),OP=function(s,a){return new ic(s,a)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(s,a,c){return this._initOverlay(ic,s,a,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ve.include({bindPopup:function(s,a){return this._popup=this._initOverlay(ic,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof tt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){sn(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof tr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var rc=Jn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Jn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Jn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Jn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Se("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),b=f.layerPointToContainerPoint(s),z=this.options.direction,B=g.offsetWidth,Z=g.offsetHeight,te=J(this.options.offset),ue=this._getAnchor();z==="top"?(a=B/2,c=Z):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=Z/2):z==="right"?(a=0,c=Z/2):z==="left"?(a=B,c=Z/2):b.x<w.x?(z="right",a=0,c=Z/2):(z="left",a=B+(te.x+ue.x)*2,c=Z/2),s=s.subtract(J(a,c,!0)).add(te).add(ue),$e(g,"leaflet-tooltip-right"),$e(g,"leaflet-tooltip-left"),$e(g,"leaflet-tooltip-top"),$e(g,"leaflet-tooltip-bottom"),ve(g,"leaflet-tooltip-"+z),fe(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Je(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),DP=function(s,a){return new rc(s,a)};Te.include({openTooltip:function(s,a,c){return this._initOverlay(rc,s,a,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ve.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rc,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof tt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(le(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),le(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,c,f;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var e_=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Jr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=J(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function MP(s){return new e_(s)}Xn.Default=Ha;var qa=Ve.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){V(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Fe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Zi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,c=-s(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=s(c,+w));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Je(this._container,this.options.opacity);var s=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(s-g.loaded)/200);Je(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=a-Math.abs(s-c),this._onUpdateLevel(c)):(Fe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[s],g=this._map;return f||(f=this._levels[s]={},f.el=Se("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,g.getCenter(),g.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Fe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,c,f){var g=Math.floor(s/2),w=Math.floor(a/2),b=c-1,z=new G(+g,+w);z.z=+b;var B=this._tileCoordsToKey(z),Z=this._tiles[B];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),b>f?this._retainParent(g,w,b,f):!1)},_retainChildren:function(s,a,c,f){for(var g=2*s;g<2*s+2;g++)for(var w=2*a;w<2*a+2;w++){var b=new G(g,w);b.z=c+1;var z=this._tileCoordsToKey(b),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,a)},_setZoomTransform:function(s,a,c){var f=this._map.getZoomScale(c,s.zoom),g=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?Qn(s.el,g,f):fe(s.el,g)},_resetGrid:function(){var s=this._map,a=s.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(s.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(s.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(s,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new de(g.subtract(w),g.add(w))},_update:function(s){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(f),w=g.getCenter(),b=[],z=this.options.keepBuffer,B=new de(g.getBottomLeft().subtract([z,-z]),g.getTopRight().add([z,-z]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var te=this._tiles[Z].coords;(te.z!==this._tileZoom||!B.contains(new G(te.x,te.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var ue=g.min.y;ue<=g.max.y;ue++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var Ut=new G(Ee,ue);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var yt=this._tiles[this._tileCoordsToKey(Ut)];yt?yt.current=!0:b.push(Ut)}}if(b.sort(function(Kt,ho){return Kt.distanceTo(w)-ho.distanceTo(w)}),b.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(Ee=0;Ee<b.length;Ee++)this._addTile(b[Ee],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!a.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return be(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,c=this.getTileSize(),f=s.scaleBy(c),g=f.add(c),w=a.unproject(f,s.z),b=a.unproject(g,s.z);return[w,b]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),c=new Pe(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),c=new G(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(s){var a=this._tiles[s];a&&(Fe(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ve(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=y,s.onmousemove=y,se.ielt9&&this.options.opacity<1&&Je(s,this.options.opacity)},_addTile:function(s,a){var c=this._getTilePos(s),f=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&M(l(this._tileReady,this,s,null,g)),fe(g,c),this._tiles[f]={el:g,coords:s,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:s});var f=this._tileCoordsToKey(s);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Je(c.el,0),F(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ve(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new G(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new de(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function VP(s){return new qa(s)}var co=qa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=V(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var c=document.createElement("img");return le(c,"load",l(this._tileOnLoad,this,a,c)),le(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var a={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=c),a["-y"]=c}return A(this._url,r(a,this.options))},_tileOnLoad:function(s,a){se.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),s(c,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(s=a-s),s+f},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=y,a.onerror=y,!a.complete)){a.src=X;var c=this._tiles[s].coords;Fe(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",X),qa.prototype._removeTile.call(this,s)},_tileReady:function(s,a,c){if(!(!this._map||c&&c.getAttribute("src")===X))return qa.prototype._tileReady.call(this,s,a,c)}});function t_(s,a){return new co(s,a)}var n_=co.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var c=r({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=V(this,a);var g=a.detectRetina&&se.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,co.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),c=this._crs,f=ye(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,b=(this._wmsVersion>=1.3&&this._crs===at?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),z=co.prototype.getTileUrl.call(this,s);return z+U(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+b},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function FP(s,a){return new n_(s,a)}co.WMS=n_,t_.wms=FP;var Ii=Ve.extend({options:{padding:.1},initialize:function(s){V(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(s,a));se.any3d?Qn(this._container,w,c):fe(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new de(c,c.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),i_=Ii.extend({options:{tolerance:0},getEvents:function(){var s=Ii.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ii.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");le(s,"mousemove",this._onMouseMove,this),le(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,Fe(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ii.prototype._update.call(this);var s=this._bounds,a=this._container,c=s.getSize(),f=se.retina?2:1;fe(a,s.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ii.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var c,f,g,w,b=s._parts,z=b.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(f=0,g=b[c].length;f<g;f++)w=b[c][f],B[f?"lineTo":"moveTo"](w.x,w.y);a&&B.closePath()}this._fillStroke(B,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,c=this._ctx,f=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,a){var c=a.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&($e(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(ve(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,c){this._map._fireDOMEvent(a,c||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function r_(s){return se.canvas?new i_(s):null}var Ga=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jP={_initContainer:function(){this._container=Se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ii.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Ga("shape");ve(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Ga("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Fe(a),s.removeInteractiveTarget(a),delete this._layers[d(s)]},_updateStyle:function(s){var a=s._stroke,c=s._fill,f=s.options,g=s._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=s._stroke=Ga("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),s._stroke=null),f.fill?(c||(c=s._fill=Ga("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),c=Math.round(s._radius),f=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){gi(s._container)},_bringToBack:function(s){Zi(s._container)}},sc=se.vml?Ga:Ds,Ka=Ii.extend({_initContainer:function(){this._container=sc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Fe(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ii.prototype._update.call(this);var s=this._bounds,a=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),fe(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=sc("path");s.options.className&&ve(a,s.options.className),s.options.interactive&&ve(a,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Fe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,c=s.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,pa(s._parts,a))},_updateCircle:function(s){var a=s._point,c=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(s,w)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){gi(s._path)},_bringToBack:function(s){Zi(s._path)}});se.vml&&Ka.include(jP);function s_(s){return se.svg||se.vml?new Ka(s):null}Te.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&r_(s)||s_(s)}});var o_=lo.extend({initialize:function(s,a){lo.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=be(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function zP(s,a){return new o_(s,a)}Ka.create=sc,Ka.pointsToPath=pa,Ti.geometryToLayer=Xu,Ti.coordsToLatLng=Ad,Ti.coordsToLatLngs=Ju,Ti.latLngToCoords=xd,Ti.latLngsToCoords=ec,Ti.getFeature=uo,Ti.asFeature=tc,Te.mergeOptions({boxZoom:!0});var a_=on.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Fe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Nn(),La(),this._startPoint=this._map.mouseEventToContainerPoint(s),le(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Se("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new de(this._point,this._startPoint),c=a.getSize();fe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Fe(this._box),$e(this._container,"leaflet-crosshair")),On(),ba(),Me(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",a_),Te.mergeOptions({doubleClickZoom:!0});var l_=on.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=s.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(s.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",l_),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var u_=on.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Dn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=be(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%s+a-c,w=(f+a+c)%s-a-c,b=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=b},_onDragEnd:function(s){var a=this._map,c=a.options,f=!c.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,b=c.easeLinearity,z=g.multiplyBy(b/w),B=z.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,B),te=z.multiplyBy(Z/B),ue=Z/(c.inertiaDeceleration*b),Ee=te.multiplyBy(-ue/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),M(function(){a.panBy(Ee,{duration:ue,easeLinearity:b,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",u_),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var c_=on.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),le(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,c=s.scrollTop||a.scrollTop,f=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*s,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[s,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,s];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=s;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-s},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],s.shiftKey&&(f=J(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(J(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;sn(s)}}});Te.addInitHook("addHandler","keyboard",c_),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var h_=on.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=$u(s),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),sn(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,b=s._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,b&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+b):s.setZoomAround(this._lastMousePos,a+b))}});Te.addInitHook("addHandler","scrollWheelZoom",h_);var UP=600;Te.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var d_=on.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new G(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",qe),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),UP),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Me(document,"touchend",qe),Me(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new G(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Te.addInitHook("addHandler","tapHold",d_),Te.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var f_=on.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),qe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var b=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(b,this,!0),qe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",f_),Te.BoxZoom=a_,Te.DoubleClickZoom=l_,Te.Drag=u_,Te.Keyboard=c_,Te.ScrollWheelZoom=h_,Te.TapHold=d_,Te.TouchZoom=f_,n.Bounds=de,n.Browser=se,n.CRS=ft,n.Canvas=i_,n.Circle=Cd,n.CircleMarker=Yu,n.Class=Xe,n.Control=Gt,n.DivIcon=e_,n.DivOverlay=Jn,n.DomEvent=Wu,n.DomUtil=Uu,n.Draggable=Dn,n.Evented=jt,n.FeatureGroup=tt,n.GeoJSON=Ti,n.GridLayer=qa,n.Handler=on,n.Icon=Xn,n.ImageOverlay=nc,n.LatLng=we,n.LatLngBounds=Pe,n.Layer=Ve,n.LayerGroup=Ge,n.LineUtil=I,n.Map=Te,n.Marker=Qu,n.Mixin=es,n.Path=tr,n.Point=G,n.PolyUtil=so,n.Polygon=lo,n.Polyline=Ei,n.Popup=ic,n.PosAnimation=ja,n.Projection=ee,n.Rectangle=o_,n.Renderer=Ii,n.SVG=Ka,n.SVGOverlay=Jg,n.TileLayer=co,n.Tooltip=rc,n.Transformation=qi,n.Util=O,n.VideoOverlay=Xg,n.bind=l,n.bounds=ye,n.canvas=r_,n.circle=AP,n.circleMarker=CP,n.control=zt,n.divIcon=MP,n.extend=r,n.featureGroup=ao,n.geoJSON=Yg,n.geoJson=RP,n.gridLayer=VP,n.icon=PP,n.imageOverlay=LP,n.latLng=me,n.latLngBounds=be,n.layerGroup=er,n.map=Js,n.marker=SP,n.point=J,n.polygon=kP,n.polyline=xP,n.popup=OP,n.rectangle=zP,n.setOptions=V,n.stamp=d,n.svg=s_,n.svgOverlay=NP,n.tileLayer=t_,n.tooltip=DP,n.transformation=di,n.version=i,n.videoOverlay=bP;var BP=window.L;n.noConflict=function(){return window.L=BP,this},window.L=n})})(Bp,Bp.exports);var Pu=Bp.exports;const EP=sw(Pu);function Gg(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Kg(t,e){return e==null?function(i,r){const o=q.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=q.useRef();o.current||(o.current=t(i,r));const l=q.useRef(i),{instance:h}=o.current;return q.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,r]),o}}function cD(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function TP(t){return function(n){const i=Hg(),r=t(qg(n,i),i);return _P(i.map,n.attribution),wP(r.current,n.eventHandlers),cD(r.current,i),r}}function hD(t,e){const n=Kg(t,e),i=TP(n);return oD(i)}function dD(t,e){const n=Kg(t),i=uD(n,e);return aD(i)}function fD(t,e){const n=Kg(t,e),i=TP(n);return lD(i)}function pD(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function mD(){return Hg().map}function gD(t){const e=mD();return q.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function $p(){return $p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$p.apply(this,arguments)}function _D({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:h,whenReady:d,zoom:p,..._},y){const[T]=q.useState({className:r,id:o,style:h}),[C,D]=q.useState(null);q.useImperativeHandle(y,()=>(C==null?void 0:C.map)??null,[C]);const V=q.useCallback(R=>{if(R!==null&&C===null){const A=new Pu.Map(R,_);n!=null&&p!=null?A.setView(n,p):t!=null&&A.fitBounds(t,e),d!=null&&A.whenReady(d),D(rD(A))}},[]);q.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const U=C?kl.createElement(yP,{value:C},i):l??null;return kl.createElement("div",$p({},T,{ref:V}),U)}const vD=q.forwardRef(_D),yD=hD(function({position:e,...n},i){const r=new Pu.Marker(e,n);return Gg(r,sD(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),wD=dD(function(e,n){const i=new Pu.Popup(e,n.overlayContainer);return Gg(i,n)},function(e,n,{position:i},r){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),r(!0))}function d(p){p.popup===l&&r(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var _;n.map.off({popupopen:h,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,i])}),ED=fD(function({url:e,...n},i){const r=new Pu.TileLayer(e,qg(n,i));return Gg(r,i)},function(e,n,i){pD(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete EP.Icon.Default.prototype._getIconUrl;EP.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function TD({allPlaces:t=[],allPlacesSetter:e=()=>{}}){return gD({click(n){const i=n.latlng.lat,r=n.latlng.lng,o=prompt("Add spot name (short):");if(o){const h={id:"u"+Date.now(),name:o,category:"Food",desc:"User-submitted spot",lat:i,lng:r,votes:0,source:"user"},d=[...Array.isArray(t)?t:[],h];e(d),alert("Yo! Your pin is added locally. Go to Contribute page to add details & pics.")}}}),null}function ID({places:t,onMarkerClick:e,allPlaces:n,allPlacesSetter:i}){const r=[28.3581,75.601];return E.jsxs("div",{className:"map-container",style:{height:"100%",width:"100%"},children:[E.jsxs(vD,{center:r,zoom:15,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[E.jsx(ED,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),E.jsx(TD,{allPlaces:n,allPlacesSetter:i}),(Array.isArray(t)?t:[]).map(o=>E.jsx(yD,{position:[o.lat,o.lng],eventHandlers:{click:()=>{e&&e(o)}},children:E.jsxs(wD,{children:[E.jsx("strong",{children:o.name}),E.jsx("br",{}),o.category&&E.jsxs("span",{children:["Category: ",o.category]}),E.jsx("br",{}),o.desc&&E.jsx("span",{children:o.desc})]})},o.id))]}),E.jsx("div",{className:"map-hint",style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"10px 20px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1e3,fontSize:"14px",textAlign:"center"},children:"Click anywhere on the map to add a quick pin (you can edit later on Contribute page)"})]})}function PD({places:t=[],categories:e=["All"],onFilter:n=()=>{},onSelect:i=()=>{},filter:r={q:"",category:"All"}}){const o=Array.isArray(e)?e:["All"];return E.jsxs("aside",{className:"sidebar",children:[E.jsxs("div",{className:"side-top",children:[E.jsx("h2",{children:"Pilani Trails"}),E.jsx("p",{className:"muted",children:"Explore the town — filter, search & bookmark your faves."}),E.jsx("div",{className:"search-row",children:E.jsx("input",{placeholder:"Search spots, e.g., 'printing' or 'momo'",value:r.q||"",onChange:l=>n(h=>({...h,q:l.target.value}))})}),E.jsx("div",{className:"chips",children:o.map(l=>E.jsx("button",{className:"chip",onClick:()=>n(h=>({...h,category:l})),children:l},l))})]}),E.jsx("div",{className:"side-list",children:!Array.isArray(t)||t.length===0?E.jsx("div",{className:"empty",children:"No matches — try fresh filters"}):t.map(l=>E.jsxs("div",{className:"place-card",onClick:()=>i(l),children:[E.jsxs("div",{className:"place-header",children:[E.jsx("strong",{children:l.name}),E.jsx("span",{className:"cat",children:l.category})]}),E.jsx("div",{className:"desc",children:l.desc}),E.jsxs("div",{className:"meta",children:[E.jsxs("span",{children:["🔥 ",l.votes??0]}),E.jsx("span",{children:l.source==="seed"?"OG":"User"})]})]},l.id))}),E.jsx("div",{className:"side-bottom",children:E.jsx("a",{className:"btn",href:"/contribute",children:"Drop a pin"})})]})}const rw=[{id:"p1",name:"The Sardar Dhaba",category:"Food",desc:"Legendary dhaba vibes — butter chicken that hits different after a long lab sesh.",lat:28.3578,lng:75.6005,img:"",votes:32,bookmarked:!1,source:"seed"},{id:"p2",name:"Neelam Books & Stationery",category:"Stationery",desc:"OG spot for project printing, thick bond paper, and mad exam-specific notes.",lat:28.3589,lng:75.6002,img:"",votes:21,bookmarked:!1,source:"seed"},{id:"p3",name:"Payal Cafe",category:"Cafe",desc:"Chill cafe, good for group meetups and chai. Great momo on rainy days.",lat:28.3584,lng:75.602,img:"",votes:44,bookmarked:!0,source:"seed"},{id:"p4",name:"Campus Printing Hub",category:"Services",desc:"Fast printing, lamination & binding — usually crowded at midnight before submissions.",lat:28.3593,lng:75.6016,img:"",votes:12,bookmarked:!1,source:"seed"},{id:"p5",name:"Baker's Corner",category:"Food",desc:"Fresh bread & quirky cakes. Perfect for midnight cravings.",lat:28.3572,lng:75.6027,img:"",votes:9,bookmarked:!1,source:"seed"},{id:"p6",name:"BITS Medical Store",category:"Services",desc:"Medical & first-aid essentials. Helpful during chaotic project weeks.",lat:28.3579,lng:75.6009,img:"",votes:6,bookmarked:!1,source:"seed"},{id:"p7",name:"Neha's Samosa Stall",category:"Food",desc:"Cheap samosas, extra spicy chutney — campus fave for breakfast.",lat:28.3586,lng:75.5998,img:"",votes:15,bookmarked:!1,source:"seed"},{id:"p8",name:"Pilani Park",category:"Outdoors",desc:"Relax under trees, group picnic spot. Insta-friendly sunsets.",lat:28.3598,lng:75.6031,img:"",votes:26,bookmarked:!0,source:"seed"},{id:"p9",name:"SIM Printing (24x7)",category:"Services",desc:"24-hour print joint. Lifesaver during midnight panic.",lat:28.3569,lng:75.6011,img:"",votes:18,bookmarked:!1,source:"seed"},{id:"p10",name:"Gurdwara Lane",category:"Spiritual",desc:"Peaceful spot, langar on weekends sometimes.",lat:28.358,lng:75.6038,img:"",votes:8,bookmarked:!1,source:"seed"},{id:"p11",name:"The Chill Zone (Gaming)",category:"Entertainment",desc:"Console gaming, cheap snacks — perfect to unwind.",lat:28.3587,lng:75.6024,img:"",votes:11,bookmarked:!1,source:"seed"},{id:"p12",name:"Mom's Dosa",category:"Food",desc:"South-Indian breakfast stall that slaps. Dosa + filter coffee = peak energy.",lat:28.3576,lng:75.6018,img:"",votes:29,bookmarked:!0,source:"seed"}];function SD(){const t="pilani_trails_places_v1",[e,n]=q.useState(()=>{try{const i=localStorage.getItem(t);if(i){const r=JSON.parse(i);if(Array.isArray(r)&&r.length>=0)return r}return localStorage.setItem(t,JSON.stringify(rw)),rw}catch(i){return console.warn("usePlaces: failed to read places from localStorage",i),[]}});return q.useEffect(()=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(i){console.warn("usePlaces: failed to save places to localStorage",i)}},[e]),[e,n]}function CD(){const[t,e]=SD(),[n,i]=q.useState({q:"",category:"All"}),[r,o]=q.useState(null),l=t.filter(d=>{const p=n.q.toLowerCase(),_=!p||d.name.toLowerCase().includes(p)||(d.desc||"").toLowerCase().includes(p),y=n.category==="All"||d.category===n.category;return _&&y}),h=["All",...Array.from(new Set((Array.isArray(t)?t:[]).map(d=>d.category||"Other")))];return E.jsxs("div",{className:"home-grid",children:[E.jsx(PD,{filter:n,setFilter:i,places:t,setPlaces:e,selected:r,setSelected:o,categories:h,onFilter:i,onSelect:o}),E.jsx(ID,{places:l,selected:r,setSelected:o,allPlaces:t,allPlacesSetter:e})]})}const AD=()=>{const[t,e]=q.useState(""),[n,i]=q.useState(""),[r,o]=q.useState(""),[l,h]=q.useState(!1),{login:d,signInWithGoogle:p}=Os(),_=sa(),y=async C=>{C.preventDefault();try{o(""),h(!0),await d(t,n),_("/")}catch(D){o("Failed to sign in: "+D.message)}h(!1)},T=async()=>{try{o(""),h(!0),await p(),_("/")}catch(C){o("Failed to sign in with Google: "+C.message)}h(!1)};return E.jsx("div",{className:"auth-container",children:E.jsxs("div",{className:"auth-card",children:[E.jsx("h2",{children:"Login to Pilani Trails"}),r&&E.jsx("div",{className:"error-message",children:r}),E.jsxs("form",{onSubmit:y,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"email",children:"Email"}),E.jsx("input",{id:"email",type:"email",value:t,onChange:C=>e(C.target.value),required:!0,placeholder:"your.email@example.com"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"password",children:"Password"}),E.jsx("input",{id:"password",type:"password",value:n,onChange:C=>i(C.target.value),required:!0,placeholder:"••••••••"})]}),E.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Signing in...":"Sign In"})]}),E.jsx("div",{className:"divider",children:E.jsx("span",{children:"OR"})}),E.jsxs("button",{onClick:T,disabled:l,className:"btn-google",children:[E.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[E.jsx("path",{fill:"#4285F4",d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z"}),E.jsx("path",{fill:"#34A853",d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z"}),E.jsx("path",{fill:"#FBBC05",d:"M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z"}),E.jsx("path",{fill:"#EA4335",d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z"})]}),"Sign in with Google"]}),E.jsxs("p",{className:"auth-switch",children:["Don't have an account? ",E.jsx($t,{to:"/signup",children:"Sign up"})]})]})})},xD=()=>{const[t,e]=q.useState(""),[n,i]=q.useState(""),[r,o]=q.useState(""),[l,h]=q.useState(""),[d,p]=q.useState(!1),{currentUser:_}=Os(),y=sa();if(_)return y("/"),null;const T=async D=>{if(D.preventDefault(),n!==r){h("Passwords do not match");return}if(n.length<6){h("Password must be at least 6 characters");return}h(""),p(!0);try{await fT(dr,t,n),y("/")}catch(V){h(V.message)}finally{p(!1)}},C=async()=>{h(""),p(!0);try{const D=new ii;await ST(dr,D),y("/")}catch(D){h(D.message)}finally{p(!1)}};return E.jsx("div",{className:"auth-container",children:E.jsxs("div",{className:"auth-card",children:[E.jsx("h2",{children:"Create Account"}),E.jsx("p",{children:"Sign up for Pilani Trails"}),l&&E.jsx("div",{className:"error-message",children:l}),E.jsxs("form",{onSubmit:T,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"email",children:"Email"}),E.jsx("input",{type:"email",id:"email",value:t,onChange:D=>e(D.target.value),placeholder:"Enter your email",required:!0,disabled:d})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"password",children:"Password"}),E.jsx("input",{type:"password",id:"password",value:n,onChange:D=>i(D.target.value),placeholder:"Create a password (min 6 characters)",required:!0,disabled:d})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),E.jsx("input",{type:"password",id:"confirmPassword",value:r,onChange:D=>o(D.target.value),placeholder:"Confirm your password",required:!0,disabled:d})]}),E.jsx("button",{type:"submit",className:"btn-primary",disabled:d,children:d?"Creating Account...":"Sign Up"})]}),E.jsx("div",{className:"divider",children:"OR"}),E.jsxs("button",{onClick:C,className:"btn-google",disabled:d,children:[E.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[E.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),E.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),E.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),E.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign up with Google"]}),E.jsxs("div",{className:"auth-switch",children:["Already have an account? ",E.jsx($t,{to:"/login",children:"Sign In"})]})]})})};function kD(){var T;const{currentUser:t,logout:e}=Os(),n=sa(),[i,r]=q.useState([]),[o,l]=q.useState(!0),[h,d]=q.useState({totalProposals:0,pendingProposals:0,approvedProposals:0,rejectedProposals:0});q.useEffect(()=>{p()},[t]);const p=async()=>{l(!0);try{const D=JSON.parse(localStorage.getItem("proposals")||"[]").filter(V=>V.userId===(t==null?void 0:t.uid));r(D),d({totalProposals:D.length,pendingProposals:D.filter(V=>V.status==="pending").length,approvedProposals:D.filter(V=>V.status==="approved").length,rejectedProposals:D.filter(V=>V.status==="rejected").length})}catch(C){console.error("Error loading user data:",C)}finally{l(!1)}},_=async()=>{try{await e(),n("/login")}catch(C){console.error("Logout error:",C)}},y=C=>{switch(C){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}};return o?E.jsx("div",{className:"dashboard-container",style:ae.container,children:E.jsx("div",{style:ae.loading,children:"Loading your dashboard..."})}):E.jsxs("div",{className:"dashboard-container",style:ae.container,children:[E.jsxs("div",{style:ae.header,children:[E.jsx("h1",{style:ae.title,children:"My Dashboard"}),E.jsxs("p",{style:ae.subtitle,children:["Welcome back, ",(t==null?void 0:t.email)||"User","!"]})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"Account Information"}),E.jsxs("div",{style:ae.infoGrid,children:[E.jsxs("div",{style:ae.infoItem,children:[E.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]}),E.jsxs("div",{style:ae.infoItem,children:[E.jsx("strong",{children:"User ID:"})," ",t==null?void 0:t.uid]}),E.jsxs("div",{style:ae.infoItem,children:[E.jsx("strong",{children:"Member Since:"})," ",new Date(((T=t==null?void 0:t.metadata)==null?void 0:T.creationTime)||Date.now()).toLocaleDateString()]})]})]}),E.jsxs("div",{style:ae.statsGrid,children:[E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#007bff"},children:[E.jsx("div",{style:ae.statNumber,children:h.totalProposals}),E.jsx("div",{style:ae.statLabel,children:"Total Proposals"})]}),E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#ffc107"},children:[E.jsx("div",{style:ae.statNumber,children:h.pendingProposals}),E.jsx("div",{style:ae.statLabel,children:"Pending Review"})]}),E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#28a745"},children:[E.jsx("div",{style:ae.statNumber,children:h.approvedProposals}),E.jsx("div",{style:ae.statLabel,children:"Approved"})]}),E.jsxs("div",{style:{...ae.statCard,borderLeftColor:"#dc3545"},children:[E.jsx("div",{style:ae.statNumber,children:h.rejectedProposals}),E.jsx("div",{style:ae.statLabel,children:"Rejected"})]})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"Quick Actions"}),E.jsxs("div",{style:ae.actionsGrid,children:[E.jsxs($t,{to:"/propose",style:ae.actionButton,children:[E.jsx("span",{style:ae.actionIcon,children:"➕"}),E.jsx("span",{children:"Propose New Location"})]}),E.jsxs($t,{to:"/",style:ae.actionButton,children:[E.jsx("span",{style:ae.actionIcon,children:"🗺️"}),E.jsx("span",{children:"View Map"})]}),E.jsxs($t,{to:"/contribute",style:ae.actionButton,children:[E.jsx("span",{style:ae.actionIcon,children:"✍️"}),E.jsx("span",{children:"Contribute"})]}),E.jsxs("button",{onClick:_,style:{...ae.actionButton,cursor:"pointer",border:"none"},children:[E.jsx("span",{style:ae.actionIcon,children:"🚪"}),E.jsx("span",{children:"Logout"})]})]})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"My Proposals"}),i.length===0?E.jsxs("div",{style:ae.emptyState,children:[E.jsx("p",{children:"You haven't submitted any proposals yet."}),E.jsx($t,{to:"/propose",style:ae.primaryButton,children:"Submit Your First Proposal"})]}):E.jsx("div",{style:ae.proposalsList,children:i.map(C=>{var D,V,U;return E.jsxs("div",{style:ae.proposalCard,children:[E.jsxs("div",{style:ae.proposalHeader,children:[E.jsx("h3",{style:ae.proposalTitle,children:C.name}),E.jsx("span",{style:{...ae.statusBadge,backgroundColor:y(C.status)},children:((D=C.status)==null?void 0:D.toUpperCase())||"PENDING"})]}),E.jsxs("div",{style:ae.proposalDetails,children:[E.jsxs("div",{children:[E.jsx("strong",{children:"Category:"})," ",C.category]}),E.jsxs("div",{children:[E.jsx("strong",{children:"Location:"})," [",(V=C.lat)==null?void 0:V.toFixed(4),", ",(U=C.lng)==null?void 0:U.toFixed(4),"]"]}),E.jsxs("div",{children:[E.jsx("strong",{children:"Submitted:"})," ",new Date(C.timestamp).toLocaleDateString()]})]}),C.description&&E.jsx("p",{style:ae.proposalDescription,children:C.description}),C.adminFeedback&&E.jsxs("div",{style:ae.feedback,children:[E.jsx("strong",{children:"Admin Feedback:"})," ",C.adminFeedback]})]},C.id)})})]}),E.jsxs("div",{style:ae.card,children:[E.jsx("h2",{style:ae.cardTitle,children:"Need Help?"}),E.jsxs("p",{children:["Check out our ",E.jsx($t,{to:"/about",style:ae.link,children:"About page"})," for more information about Pilani Trails."]}),E.jsxs("p",{children:["Questions? Contact us or visit the ",E.jsx($t,{to:"/contribute",style:ae.link,children:"Contribute page"})," to learn more."]})]})]})}const ae={container:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},subtitle:{fontSize:"1.1rem",color:"#666"},loading:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#666"},card:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#333"},infoGrid:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},infoItem:{padding:"0.5rem",fontSize:"1rem"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},statCard:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid",textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},statLabel:{fontSize:"0.9rem",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},actionsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},actionButton:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f8f9fa",borderRadius:"8px",textDecoration:"none",color:"#333",transition:"all 0.2s",fontWeight:"500"},actionIcon:{fontSize:"2rem",marginBottom:"0.5rem"},emptyState:{textAlign:"center",padding:"2rem",color:"#666"},primaryButton:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"#fff",textDecoration:"none",borderRadius:"4px",marginTop:"1rem",fontWeight:"500"},proposalsList:{display:"flex",flexDirection:"column",gap:"1rem"},proposalCard:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},proposalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},proposalTitle:{fontSize:"1.2rem",fontWeight:"bold",margin:0},statusBadge:{padding:"0.25rem 0.75rem",borderRadius:"12px",color:"#fff",fontSize:"0.8rem",fontWeight:"bold"},proposalDetails:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},proposalDescription:{marginTop:"0.5rem",color:"#555",lineHeight:"1.5"},feedback:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",borderLeft:"3px solid #007bff"},link:{color:"#007bff",textDecoration:"none",fontWeight:"500"}},RD=()=>{const{currentUser:t}=q.useContext(Wg),[e,n]=q.useState({name:"",description:"",latitude:"",longitude:"",category:""}),[i,r]=q.useState(!1),[o,l]=q.useState({type:"",text:""}),h=p=>{const{name:_,value:y}=p.target;n(T=>({...T,[_]:y}))},d=async p=>{if(p.preventDefault(),!t){l({type:"error",text:"You must be logged in to propose a location."});return}if(!e.name||!e.description||!e.latitude||!e.longitude||!e.category){l({type:"error",text:"Please fill in all fields."});return}const _=parseFloat(e.latitude),y=parseFloat(e.longitude);if(isNaN(_)||isNaN(y)||_<-90||_>90||y<-180||y>180){l({type:"error",text:"Please enter valid coordinates."});return}r(!0),l({type:"",text:""});try{await xO(jI(ss,"proposals"),{name:e.name,description:e.description,latitude:_,longitude:y,category:e.category,status:"pending",userId:t.uid,userEmail:t.email,createdAt:RO()}),l({type:"success",text:"Location proposal submitted successfully!"}),n({name:"",description:"",latitude:"",longitude:"",category:""})}catch(T){console.error("Error submitting proposal:",T),l({type:"error",text:"Failed to submit proposal. Please try again."})}finally{r(!1)}};return t?E.jsx("div",{className:"propose-location-container",children:E.jsxs("div",{className:"propose-location-card",children:[E.jsx("h2",{children:"Propose a New Location"}),E.jsx("p",{className:"subtitle",children:"Share a new trail or location with the community"}),o.text&&E.jsx("div",{className:`message ${o.type}`,children:o.text}),E.jsxs("form",{onSubmit:d,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"name",children:"Location Name *"}),E.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:h,placeholder:"Enter location name",required:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"description",children:"Description *"}),E.jsx("textarea",{id:"description",name:"description",value:e.description,onChange:h,placeholder:"Describe the location, its features, and why it should be added",rows:"4",required:!0})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"latitude",children:"Latitude *"}),E.jsx("input",{type:"text",id:"latitude",name:"latitude",value:e.latitude,onChange:h,placeholder:"e.g., 28.3636",required:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"longitude",children:"Longitude *"}),E.jsx("input",{type:"text",id:"longitude",name:"longitude",value:e.longitude,onChange:h,placeholder:"e.g., 75.5868",required:!0})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"category",children:"Category *"}),E.jsxs("select",{id:"category",name:"category",value:e.category,onChange:h,required:!0,children:[E.jsx("option",{value:"",children:"Select a category"}),E.jsx("option",{value:"trail",children:"Trail"}),E.jsx("option",{value:"viewpoint",children:"Viewpoint"}),E.jsx("option",{value:"landmark",children:"Landmark"}),E.jsx("option",{value:"park",children:"Park"}),E.jsx("option",{value:"other",children:"Other"})]})]}),E.jsx("button",{type:"submit",className:"submit-button",disabled:i,children:i?"Submitting...":"Submit Proposal"})]})]})}):E.jsx("div",{className:"propose-location-container",children:E.jsxs("div",{className:"login-required",children:[E.jsx("h2",{children:"Login Required"}),E.jsx("p",{children:"You must be logged in to propose a new location."}),E.jsx("p",{children:"Please log in or sign up to continue."})]})})};function LD(t){return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true":!1}function bD(t){if(!t)return"—";if(t.seconds)return new Date(t.seconds*1e3).toLocaleString();try{return new Date(t).toLocaleString()}catch{return String(t)}}const ND=()=>{const{currentUser:t,loading:e}=Os(),[n,i]=q.useState([]),[r,o]=q.useState(!0),[l,h]=q.useState("all"),[d,p]=q.useState(null),[_,y]=q.useState({}),[T,C]=q.useState(null),D=LD(t);q.useEffect(()=>{if(!e){if(!D){o(!1);return}V()}},[l,e,t]);const V=async()=>{C(null);try{o(!0);const $=jI(ss,"locationProposals");let S;l==="all"?S=$:S=yO($,wO("status","==",l));const x=(await CO(S)).docs.map(k=>({id:k.id,...k.data()}));i(x)}catch($){console.error("[AdminReview] fetchProposals error:",$),C(($==null?void 0:$.message)||String($)),i([])}finally{o(!1)}},U=async $=>{if(!D)return alert("Admin only");try{await gf(ko(ss,"locationProposals",$),{status:"approved",reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||"admin",reviewedAt:new Date().toISOString()}),alert("Proposal approved!"),V()}catch(S){console.error("Approve error:",S),alert("Approve failed: "+S.message)}},R=async $=>{if(!D)return alert("Admin only");const S=prompt("Reason for rejection?");if(S)try{await gf(ko(ss,"locationProposals",$),{status:"rejected",rejectionReason:S,reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||"admin",reviewedAt:new Date().toISOString()}),alert("Proposal rejected!"),V()}catch(P){console.error("Reject error:",P),alert("Reject failed: "+P.message)}},A=async $=>{if(!D)return alert("Admin only");if(window.confirm("Delete this location permanently?"))try{await AO(ko(ss,"locationProposals",$)),alert("Location deleted!"),V()}catch(S){console.error("Delete error:",S),alert("Delete failed: "+S.message)}},N=$=>{p($.id),y({name:$.name||"",description:$.description||"",category:$.category||"",tags:$.tags||"",latitude:$.latitude??$.lat??"",longitude:$.longitude??$.lng??"",imageUrl:$.imageUrl||""})},H=($,S)=>{y(P=>({...P,[$]:S}))},X=async $=>{if(!D)return alert("Admin only");try{const S={..._,editedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||"admin",editedAt:new Date().toISOString()};S.latitude!==""&&(S.latitude=parseFloat(S.latitude)),S.longitude!==""&&(S.longitude=parseFloat(S.longitude)),await gf(ko(ss,"locationProposals",$),S),alert("Changes saved successfully!"),p(null),V()}catch(S){console.error("Update error:",S),alert("Update failed: "+S.message)}};return e?E.jsx("div",{className:"admin-review-loading",children:"Checking authentication..."}):D?r?E.jsx("div",{className:"admin-review-loading",children:"Loading proposals..."}):E.jsxs("div",{className:"admin-review-container",children:[E.jsxs("div",{className:"admin-review-header",children:[E.jsx("h1",{children:"Admin Control Panel"}),E.jsx("p",{children:"Approve, edit, or delete any proposed location"})]}),E.jsxs("div",{className:"filter-section",style:{marginBottom:12},children:[E.jsx("label",{style:{marginRight:8},children:"Filter:"}),E.jsxs("select",{value:l,onChange:$=>h($.target.value),children:[E.jsx("option",{value:"all",children:"All"}),E.jsx("option",{value:"pending",children:"Pending"}),E.jsx("option",{value:"approved",children:"Approved"}),E.jsx("option",{value:"rejected",children:"Rejected"})]})]}),T&&E.jsxs("div",{style:{color:"crimson",marginBottom:12},children:["Error fetching proposals: ",T]}),n.length===0?E.jsx("div",{className:"no-proposals",children:"No proposals found."}):E.jsx("div",{className:"proposals-grid",children:n.map($=>E.jsxs("div",{className:"proposal-card",children:[E.jsxs("div",{className:"proposal-header",children:[d===$.id?E.jsx("input",{value:_.name,onChange:S=>H("name",S.target.value),className:"edit-input",placeholder:"Name"}):E.jsx("h3",{style:{margin:0},children:$.name}),E.jsx("span",{className:`status-badge ${$.status}`,children:$.status})]}),E.jsx("div",{className:"proposal-details",style:{marginTop:8},children:d===$.id?E.jsxs(E.Fragment,{children:[E.jsx("label",{children:"Description:"}),E.jsx("textarea",{value:_.description,onChange:S=>H("description",S.target.value)}),E.jsx("label",{children:"Category:"}),E.jsx("input",{value:_.category,onChange:S=>H("category",S.target.value)}),E.jsx("label",{children:"Tags:"}),E.jsx("input",{value:_.tags,onChange:S=>H("tags",S.target.value)}),E.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[E.jsx("input",{style:{flex:1},placeholder:"Latitude",value:_.latitude,onChange:S=>H("latitude",S.target.value)}),E.jsx("input",{style:{flex:1},placeholder:"Longitude",value:_.longitude,onChange:S=>H("longitude",S.target.value)})]}),E.jsx("label",{children:"Image URL:"}),E.jsx("input",{value:_.imageUrl,onChange:S=>H("imageUrl",S.target.value)})]}):E.jsxs(E.Fragment,{children:[E.jsxs("p",{children:[E.jsx("strong",{children:"Description:"})," ",$.description||"—"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Category:"})," ",$.category||"—"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Tags:"})," ",$.tags||"—"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Lat:"})," ",$.latitude??$.lat??"—",", ",E.jsx("strong",{children:"Lng:"})," ",$.longitude??$.lng??"—"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"By:"})," ",$.proposedBy||$.userEmail||"—"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Submitted:"})," ",bD($.createdAt)]}),$.imageUrl&&E.jsx("img",{src:$.imageUrl,alt:$.name,style:{width:"100%",borderRadius:8,marginTop:8}})]})}),E.jsx("div",{className:"proposal-actions",style:{marginTop:10},children:d===$.id?E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>X($.id),className:"btn btn-save",children:"Save"}),E.jsx("button",{onClick:()=>p(null),className:"btn btn-cancel",children:"Cancel"})]}):E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>U($.id),className:"btn btn-approve",children:"Approve"}),E.jsx("button",{onClick:()=>R($.id),className:"btn btn-reject",children:"Reject"}),E.jsx("button",{onClick:()=>N($),className:"btn btn-edit",children:"Edit"}),E.jsx("button",{onClick:()=>A($.id),className:"btn btn-delete",children:"Delete"})]})})]},$.id))})]}):E.jsx("div",{className:"admin-review-container",children:E.jsxs("div",{className:"admin-review-header",children:[E.jsx("h1",{children:"Admin Control Panel"}),E.jsx("p",{children:"Only admins can view this page."})]})})};function OD(){const t="pilani_trails_places_v1",[e,n]=q.useState(""),[i,r]=q.useState(!1),[o,l]=q.useState([]);q.useEffect(()=>{const p=localStorage.getItem(t)||"[]";l(JSON.parse(p))},[]);function h(p){p.preventDefault();const _=e==="pilaniadmin123";r(_),_||alert("Nah fam, wrong pass.")}function d(p){if(!confirm("Delete for real?"))return;const _=o.filter(y=>y.id!==p);l(_),localStorage.setItem(t,JSON.stringify(_))}return i?E.jsxs("div",{className:"admin-page",children:[E.jsx("h2",{children:"Admin Panel"}),E.jsxs("p",{children:[o.length," place(s) in local DB"]}),E.jsx("p",{className:"muted",children:"Delete any place. For mass edits, export localStorage key manually."}),E.jsxs("div",{className:"admin-list",children:[o.length===0&&E.jsx("p",{children:"No places yet."}),o.map(p=>E.jsxs("div",{className:"place-card",children:[E.jsx("h3",{children:p.name}),E.jsx("div",{className:"desc",children:p.desc||"(no desc)"}),E.jsxs("div",{className:"meta",children:["Category: ",p.category]}),E.jsxs("div",{className:"meta",children:["ID: ",p.id]}),E.jsx("button",{className:"btn ghost",onClick:()=>d(p.id),children:"Delete"})]},p.id))]})]}):E.jsxs("div",{className:"admin-page",children:[E.jsx("h2",{children:"Admin"}),E.jsxs("p",{children:["Enter the admin pass (set in ",E.jsx("code",{children:".env.local"}),")"]}),E.jsxs("form",{onSubmit:h,children:[E.jsx("input",{value:e,onChange:p=>n(p.target.value),placeholder:"admin pass"}),E.jsx("button",{className:"btn",type:"submit",children:"Unlock"})]})]})}function DD(){return E.jsxs(E.Fragment,{children:[E.jsx(nD,{}),E.jsxs(mx,{children:[E.jsx(rr,{path:"/",element:E.jsx(CD,{})}),E.jsx(rr,{path:"/login",element:E.jsx(AD,{})}),E.jsx(rr,{path:"/signup",element:E.jsx(xD,{})}),E.jsx(rr,{path:"/dashboard",element:E.jsx(wf,{children:E.jsx(kD,{})})}),E.jsx(rr,{path:"/propose",element:E.jsx(wf,{children:E.jsx(RD,{})})}),E.jsx(rr,{path:"/admin-review",element:E.jsx(eD,{children:E.jsx(ND,{})})}),E.jsx(rr,{path:"/admin",element:E.jsx(wf,{children:E.jsx(OD,{})})})]})]})}const IP=document.getElementById("root");if(!IP){const t=document.createElement("div");t.id="root",document.body.appendChild(t),console.error("Root element was missing - created new one")}window.addEventListener("error",t=>{console.error("Global error caught:",t.error)});window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)});try{yE(IP||document.getElementById("root")).render(E.jsx(kl.StrictMode,{children:E.jsx(Tx,{children:E.jsx(X2,{children:E.jsx(DD,{})})})}))}catch(t){console.error("Error rendering app:",t),document.body.innerHTML=`<div style="padding: 20px; color: red;">Error loading app: ${t.message}</div>`}
