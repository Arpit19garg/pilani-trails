function G1(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var K1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OE={exports:{}},Jd={},VE={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),Z1=Symbol.for("react.portal"),Q1=Symbol.for("react.fragment"),Y1=Symbol.for("react.strict_mode"),X1=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),eR=Symbol.for("react.context"),tR=Symbol.for("react.forward_ref"),nR=Symbol.for("react.suspense"),iR=Symbol.for("react.memo"),rR=Symbol.for("react.lazy"),Wv=Symbol.iterator;function sR(t){return t===null||typeof t!="object"?null:(t=Wv&&t[Wv]||t["@@iterator"],typeof t=="function"?t:null)}var FE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jE=Object.assign,BE={};function $a(t,e,n){this.props=t,this.context=e,this.refs=BE,this.updater=n||FE}$a.prototype.isReactComponent={};$a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function UE(){}UE.prototype=$a.prototype;function Wg(t,e,n){this.props=t,this.context=e,this.refs=BE,this.updater=n||FE}var Hg=Wg.prototype=new UE;Hg.constructor=Wg;jE(Hg,$a.prototype);Hg.isPureReactComponent=!0;var Hv=Array.isArray,zE=Object.prototype.hasOwnProperty,qg={current:null},$E={key:!0,ref:!0,__self:!0,__source:!0};function WE(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)zE.call(e,i)&&!$E.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:ic,type:t,key:o,ref:a,props:r,_owner:qg.current}}function oR(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gg(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function aR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qv=/\/+/g;function sp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aR(""+t.key):e.toString(36)}function Dh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ic:case Z1:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+sp(a,0):i,Hv(r)?(n="",t!=null&&(n=t.replace(qv,"$&/")+"/"),Dh(r,e,n,"",function(f){return f})):r!=null&&(Gg(r)&&(r=oR(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(qv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Hv(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+sp(o,u);a+=Dh(o,e,n,c,r)}else if(c=sR(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+sp(o,u++),a+=Dh(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ah(t,e,n){if(t==null)return t;var i=[],r=0;return Dh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function lR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Mh={transition:null},uR={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Mh,ReactCurrentOwner:qg};function HE(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:ah,forEach:function(t,e,n){ah(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ah(t,function(){e++}),e},toArray:function(t){return ah(t,function(e){return e})||[]},only:function(t){if(!Gg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=$a;Ce.Fragment=Q1;Ce.Profiler=X1;Ce.PureComponent=Wg;Ce.StrictMode=Y1;Ce.Suspense=nR;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uR;Ce.act=HE;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=jE({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=qg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)zE.call(e,c)&&!$E.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:ic,type:t.type,key:r,ref:o,props:i,_owner:a}};Ce.createContext=function(t){return t={$$typeof:eR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:J1,_context:t},t.Consumer=t};Ce.createElement=WE;Ce.createFactory=function(t){var e=WE.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:tR,render:t}};Ce.isValidElement=Gg;Ce.lazy=function(t){return{$$typeof:rR,_payload:{_status:-1,_result:t},_init:lR}};Ce.memo=function(t,e){return{$$typeof:iR,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Mh.transition;Mh.transition={};try{t()}finally{Mh.transition=e}};Ce.unstable_act=HE;Ce.useCallback=function(t,e){return tn.current.useCallback(t,e)};Ce.useContext=function(t){return tn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return tn.current.useEffect(t,e)};Ce.useId=function(){return tn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return tn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};Ce.useRef=function(t){return tn.current.useRef(t)};Ce.useState=function(t){return tn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return tn.current.useTransition()};Ce.version="18.3.1";VE.exports=Ce;var j=VE.exports;const qs=NE(j),cR=G1({__proto__:null,default:qs},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hR=j,dR=Symbol.for("react.element"),fR=Symbol.for("react.fragment"),pR=Object.prototype.hasOwnProperty,mR=hR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gR={key:!0,ref:!0,__self:!0,__source:!0};function qE(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)pR.call(e,i)&&!gR.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:dR,type:t,key:o,ref:a,props:r,_owner:mR.current}}Jd.Fragment=fR;Jd.jsx=qE;Jd.jsxs=qE;OE.exports=Jd;var P=OE.exports,GE={exports:{}},Sn={},KE={exports:{}},ZE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ae){var J=K.length;K.push(ae);e:for(;0<J;){var te=J-1>>>1,pe=K[te];if(0<r(pe,ae))K[te]=ae,K[J]=pe,J=te;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ae=K[0],J=K.pop();if(J!==ae){K[0]=J;e:for(var te=0,pe=K.length,Pe=pe>>>1;te<Pe;){var De=2*(te+1)-1,Ee=K[De],ce=De+1,st=K[ce];if(0>r(Ee,J))ce<pe&&0>r(st,Ee)?(K[te]=st,K[ce]=J,te=ce):(K[te]=Ee,K[De]=J,te=De);else if(ce<pe&&0>r(st,J))K[te]=st,K[ce]=J,te=ce;else break e}}return ae}function r(K,ae){var J=K.sortIndex-ae.sortIndex;return J!==0?J:K.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],f=[],p=1,g=null,v=3,T=!1,C=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(K){for(var ae=n(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=K)i(f),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=n(f)}}function B(K){if(k=!1,A(K),!C)if(n(c)!==null)C=!0,Se(G);else{var ae=n(f);ae!==null&&Ke(B,ae.startTime-K)}}function G(K,ae){C=!1,k&&(k=!1,b(I),I=-1),T=!0;var J=v;try{for(A(ae),g=n(c);g!==null&&(!(g.expirationTime>ae)||K&&!F());){var te=g.callback;if(typeof te=="function"){g.callback=null,v=g.priorityLevel;var pe=te(g.expirationTime<=ae);ae=t.unstable_now(),typeof pe=="function"?g.callback=pe:g===n(c)&&i(c),A(ae)}else i(c);g=n(c)}if(g!==null)var Pe=!0;else{var De=n(f);De!==null&&Ke(B,De.startTime-ae),Pe=!1}return Pe}finally{g=null,v=J,T=!1}}var $=!1,R=null,I=-1,D=5,M=-1;function F(){return!(t.unstable_now()-M<D)}function U(){if(R!==null){var K=t.unstable_now();M=K;var ae=!0;try{ae=R(!0,K)}finally{ae?N():($=!1,R=null)}}else $=!1}var N;if(typeof S=="function")N=function(){S(U)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,ze=Te.port2;Te.port1.onmessage=U,N=function(){ze.postMessage(null)}}else N=function(){V(U,0)};function Se(K){R=K,$||($=!0,N())}function Ke(K,ae){I=V(function(){K(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){C||T||(C=!0,Se(G))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(K){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var J=v;v=ae;try{return K()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=v;v=K;try{return ae()}finally{v=J}},t.unstable_scheduleCallback=function(K,ae,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,K){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=J+pe,K={id:p++,callback:ae,priorityLevel:K,startTime:J,expirationTime:pe,sortIndex:-1},J>te?(K.sortIndex=J,e(f,K),n(c)===null&&K===n(f)&&(k?(b(I),I=-1):k=!0,Ke(B,J-te))):(K.sortIndex=pe,e(c,K),C||T||(C=!0,Se(G))),K},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(K){var ae=v;return function(){var J=v;v=ae;try{return K.apply(this,arguments)}finally{v=J}}}})(ZE);KE.exports=ZE;var _R=KE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yR=j,Pn=_R;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QE=new Set,Iu={};function so(t,e){xa(t,e),xa(t+"Capture",e)}function xa(t,e){for(Iu[t]=e,t=0;t<e.length;t++)QE.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lm=Object.prototype.hasOwnProperty,vR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gv={},Kv={};function wR(t){return lm.call(Kv,t)?!0:lm.call(Gv,t)?!1:vR.test(t)?Kv[t]=!0:(Gv[t]=!0,!1)}function TR(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ER(t,e,n,i){if(e===null||typeof e>"u"||TR(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kg=/[\-:]([a-z])/g;function Zg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kg,Zg);Ot[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kg,Zg);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kg,Zg);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qg(t,e,n,i){var r=Ot.hasOwnProperty(e)?Ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ER(e,n,r,i)&&(n=null),i||r===null?wR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ur=yR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lh=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),Yg=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),YE=Symbol.for("react.provider"),XE=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),hm=Symbol.for("react.suspense_list"),Jg=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),JE=Symbol.for("react.offscreen"),Zv=Symbol.iterator;function Ol(t){return t===null||typeof t!="object"?null:(t=Zv&&t[Zv]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,op;function Gl(t){if(op===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);op=e&&e[1]||""}return`
`+op+t}var ap=!1;function lp(t,e){if(!t||ap)return"";ap=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{ap=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gl(t):""}function PR(t){switch(t.tag){case 5:return Gl(t.type);case 16:return Gl("Lazy");case 13:return Gl("Suspense");case 19:return Gl("SuspenseList");case 0:case 2:case 15:return t=lp(t.type,!1),t;case 11:return t=lp(t.type.render,!1),t;case 1:return t=lp(t.type,!0),t;default:return""}}function dm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ea:return"Fragment";case Jo:return"Portal";case um:return"Profiler";case Yg:return"StrictMode";case cm:return"Suspense";case hm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XE:return(t.displayName||"Context")+".Consumer";case YE:return(t._context.displayName||"Context")+".Provider";case Xg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jg:return e=t.displayName||null,e!==null?e:dm(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return dm(t(e))}catch{}}return null}function IR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dm(e);case 8:return e===Yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SR(t){var e=eP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uh(t){t._valueTracker||(t._valueTracker=SR(t))}function tP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=eP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fm(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nP(t,e){e=e.checked,e!=null&&Qg(t,"checked",e,!1)}function pm(t,e){nP(t,e);var n=Yr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mm(t,e.type,n):e.hasOwnProperty("defaultValue")&&mm(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mm(t,e,n){(e!=="number"||nd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kl=Array.isArray;function ga(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Kl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function iP(t,e){var n=Yr(e.value),i=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Jv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _m(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ch,sP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ch=ch||document.createElement("div"),ch.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ch.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Su(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xR=["Webkit","ms","Moz","O"];Object.keys(su).forEach(function(t){xR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),su[e]=su[t]})});function oP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||su.hasOwnProperty(t)&&su[t]?(""+e).trim():e+"px"}function aP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=oP(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var CR=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(t,e){if(e){if(CR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function vm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wm=null;function e_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tm=null,_a=null,ya=null;function ew(t){if(t=oc(t)){if(typeof Tm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=sf(e),Tm(t.stateNode,t.type,e))}}function lP(t){_a?ya?ya.push(t):ya=[t]:_a=t}function uP(){if(_a){var t=_a,e=ya;if(ya=_a=null,ew(t),e)for(t=0;t<e.length;t++)ew(e[t])}}function cP(t,e){return t(e)}function hP(){}var up=!1;function dP(t,e,n){if(up)return t(e,n);up=!0;try{return cP(t,e,n)}finally{up=!1,(_a!==null||ya!==null)&&(hP(),uP())}}function xu(t,e){var n=t.stateNode;if(n===null)return null;var i=sf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Em=!1;if(er)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){Em=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{Em=!1}function AR(t,e,n,i,r,o,a,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(p){this.onError(p)}}var ou=!1,id=null,rd=!1,Pm=null,RR={onError:function(t){ou=!0,id=t}};function kR(t,e,n,i,r,o,a,u,c){ou=!1,id=null,AR.apply(RR,arguments)}function LR(t,e,n,i,r,o,a,u,c){if(kR.apply(this,arguments),ou){if(ou){var f=id;ou=!1,id=null}else throw Error(X(198));rd||(rd=!0,Pm=f)}}function oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tw(t){if(oo(t)!==t)throw Error(X(188))}function bR(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return tw(r),t;if(o===i)return tw(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function pP(t){return t=bR(t),t!==null?mP(t):null}function mP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mP(t);if(e!==null)return e;t=t.sibling}return null}var gP=Pn.unstable_scheduleCallback,nw=Pn.unstable_cancelCallback,DR=Pn.unstable_shouldYield,MR=Pn.unstable_requestPaint,ht=Pn.unstable_now,NR=Pn.unstable_getCurrentPriorityLevel,t_=Pn.unstable_ImmediatePriority,_P=Pn.unstable_UserBlockingPriority,sd=Pn.unstable_NormalPriority,OR=Pn.unstable_LowPriority,yP=Pn.unstable_IdlePriority,ef=null,Ei=null;function VR(t){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(ef,t,void 0,(t.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:BR,FR=Math.log,jR=Math.LN2;function BR(t){return t>>>=0,t===0?32:31-(FR(t)/jR|0)|0}var hh=64,dh=4194304;function Zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function od(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Zl(u):(o&=a,o!==0&&(i=Zl(o)))}else a=n&~r,a!==0?i=Zl(a):o!==0&&(i=Zl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ii(e),r=1<<n,i|=t[n],e&=~r;return i}function UR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zR(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ii(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=UR(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function Im(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vP(){var t=hh;return hh<<=1,!(hh&4194240)&&(hh=64),t}function cp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ii(e),t[e]=n}function $R(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ii(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function n_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ii(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ve=0;function wP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TP,i_,EP,PP,IP,Sm=!1,fh=[],Fr=null,jr=null,Br=null,Cu=new Map,Au=new Map,Ar=[],WR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iw(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(e.pointerId)}}function Fl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=oc(e),e!==null&&i_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function HR(t,e,n,i,r){switch(e){case"focusin":return Fr=Fl(Fr,t,e,n,i,r),!0;case"dragenter":return jr=Fl(jr,t,e,n,i,r),!0;case"mouseover":return Br=Fl(Br,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Cu.set(o,Fl(Cu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Au.set(o,Fl(Au.get(o)||null,t,e,n,i,r)),!0}return!1}function SP(t){var e=Ns(t.target);if(e!==null){var n=oo(e);if(n!==null){if(e=n.tag,e===13){if(e=fP(n),e!==null){t.blockedOn=e,IP(t.priority,function(){EP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);wm=i,n.target.dispatchEvent(i),wm=null}else return e=oc(n),e!==null&&i_(e),t.blockedOn=n,!1;e.shift()}return!0}function rw(t,e,n){Nh(t)&&n.delete(e)}function qR(){Sm=!1,Fr!==null&&Nh(Fr)&&(Fr=null),jr!==null&&Nh(jr)&&(jr=null),Br!==null&&Nh(Br)&&(Br=null),Cu.forEach(rw),Au.forEach(rw)}function jl(t,e){t.blockedOn===e&&(t.blockedOn=null,Sm||(Sm=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,qR)))}function Ru(t){function e(r){return jl(r,t)}if(0<fh.length){jl(fh[0],t);for(var n=1;n<fh.length;n++){var i=fh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fr!==null&&jl(Fr,t),jr!==null&&jl(jr,t),Br!==null&&jl(Br,t),Cu.forEach(e),Au.forEach(e),n=0;n<Ar.length;n++)i=Ar[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ar.length&&(n=Ar[0],n.blockedOn===null);)SP(n),n.blockedOn===null&&Ar.shift()}var va=ur.ReactCurrentBatchConfig,ad=!0;function GR(t,e,n,i){var r=Ve,o=va.transition;va.transition=null;try{Ve=1,r_(t,e,n,i)}finally{Ve=r,va.transition=o}}function KR(t,e,n,i){var r=Ve,o=va.transition;va.transition=null;try{Ve=4,r_(t,e,n,i)}finally{Ve=r,va.transition=o}}function r_(t,e,n,i){if(ad){var r=xm(t,e,n,i);if(r===null)wp(t,e,i,ld,n),iw(t,i);else if(HR(r,t,e,n,i))i.stopPropagation();else if(iw(t,i),e&4&&-1<WR.indexOf(t)){for(;r!==null;){var o=oc(r);if(o!==null&&TP(o),o=xm(t,e,n,i),o===null&&wp(t,e,i,ld,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else wp(t,e,i,null,n)}}var ld=null;function xm(t,e,n,i){if(ld=null,t=e_(i),t=Ns(t),t!==null)if(e=oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ld=t,null}function xP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NR()){case t_:return 1;case _P:return 4;case sd:case OR:return 16;case yP:return 536870912;default:return 16}default:return 16}}var Mr=null,s_=null,Oh=null;function CP(){if(Oh)return Oh;var t,e=s_,n=e.length,i,r="value"in Mr?Mr.value:Mr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Oh=r.slice(t,1<i?1-i:void 0)}function Vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ph(){return!0}function sw(){return!1}function xn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ph:sw,this.isPropagationStopped=sw,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ph)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ph)},persist:function(){},isPersistent:ph}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o_=xn(Wa),sc=it({},Wa,{view:0,detail:0}),ZR=xn(sc),hp,dp,Bl,tf=it({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bl&&(Bl&&t.type==="mousemove"?(hp=t.screenX-Bl.screenX,dp=t.screenY-Bl.screenY):dp=hp=0,Bl=t),hp)},movementY:function(t){return"movementY"in t?t.movementY:dp}}),ow=xn(tf),QR=it({},tf,{dataTransfer:0}),YR=xn(QR),XR=it({},sc,{relatedTarget:0}),fp=xn(XR),JR=it({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),ek=xn(JR),tk=it({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nk=xn(tk),ik=it({},Wa,{data:0}),aw=xn(ik),rk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ok={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ak(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ok[t])?!!e[t]:!1}function a_(){return ak}var lk=it({},sc,{key:function(t){if(t.key){var e=rk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a_,charCode:function(t){return t.type==="keypress"?Vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uk=xn(lk),ck=it({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lw=xn(ck),hk=it({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a_}),dk=xn(hk),fk=it({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),pk=xn(fk),mk=it({},tf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gk=xn(mk),_k=[9,13,27,32],l_=er&&"CompositionEvent"in window,au=null;er&&"documentMode"in document&&(au=document.documentMode);var yk=er&&"TextEvent"in window&&!au,AP=er&&(!l_||au&&8<au&&11>=au),uw=" ",cw=!1;function RP(t,e){switch(t){case"keyup":return _k.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ta=!1;function vk(t,e){switch(t){case"compositionend":return kP(e);case"keypress":return e.which!==32?null:(cw=!0,uw);case"textInput":return t=e.data,t===uw&&cw?null:t;default:return null}}function wk(t,e){if(ta)return t==="compositionend"||!l_&&RP(t,e)?(t=CP(),Oh=s_=Mr=null,ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AP&&e.locale!=="ko"?null:e.data;default:return null}}var Tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tk[t.type]:e==="textarea"}function LP(t,e,n,i){lP(i),e=ud(e,"onChange"),0<e.length&&(n=new o_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var lu=null,ku=null;function Ek(t){zP(t,0)}function nf(t){var e=ra(t);if(tP(e))return t}function Pk(t,e){if(t==="change")return e}var bP=!1;if(er){var pp;if(er){var mp="oninput"in document;if(!mp){var dw=document.createElement("div");dw.setAttribute("oninput","return;"),mp=typeof dw.oninput=="function"}pp=mp}else pp=!1;bP=pp&&(!document.documentMode||9<document.documentMode)}function fw(){lu&&(lu.detachEvent("onpropertychange",DP),ku=lu=null)}function DP(t){if(t.propertyName==="value"&&nf(ku)){var e=[];LP(e,ku,t,e_(t)),dP(Ek,e)}}function Ik(t,e,n){t==="focusin"?(fw(),lu=e,ku=n,lu.attachEvent("onpropertychange",DP)):t==="focusout"&&fw()}function Sk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nf(ku)}function xk(t,e){if(t==="click")return nf(e)}function Ck(t,e){if(t==="input"||t==="change")return nf(e)}function Ak(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:Ak;function Lu(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!lm.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function pw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mw(t,e){var n=pw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pw(n)}}function MP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NP(){for(var t=window,e=nd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nd(t.document)}return e}function u_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rk(t){var e=NP(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MP(n.ownerDocument.documentElement,n)){if(i!==null&&u_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=mw(n,o);var a=mw(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kk=er&&"documentMode"in document&&11>=document.documentMode,na=null,Cm=null,uu=null,Am=!1;function gw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Am||na==null||na!==nd(i)||(i=na,"selectionStart"in i&&u_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),uu&&Lu(uu,i)||(uu=i,i=ud(Cm,"onSelect"),0<i.length&&(e=new o_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=na)))}function mh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ia={animationend:mh("Animation","AnimationEnd"),animationiteration:mh("Animation","AnimationIteration"),animationstart:mh("Animation","AnimationStart"),transitionend:mh("Transition","TransitionEnd")},gp={},OP={};er&&(OP=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function rf(t){if(gp[t])return gp[t];if(!ia[t])return t;var e=ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OP)return gp[t]=e[n];return t}var VP=rf("animationend"),FP=rf("animationiteration"),jP=rf("animationstart"),BP=rf("transitionend"),UP=new Map,_w="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){UP.set(t,e),so(e,[t])}for(var _p=0;_p<_w.length;_p++){var yp=_w[_p],Lk=yp.toLowerCase(),bk=yp[0].toUpperCase()+yp.slice(1);ss(Lk,"on"+bk)}ss(VP,"onAnimationEnd");ss(FP,"onAnimationIteration");ss(jP,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(BP,"onTransitionEnd");xa("onMouseEnter",["mouseout","mouseover"]);xa("onMouseLeave",["mouseout","mouseover"]);xa("onPointerEnter",["pointerout","pointerover"]);xa("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function yw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,LR(i,e,void 0,t),t.currentTarget=null}function zP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;yw(r,u,f),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;yw(r,u,f),o=c}}}if(rd)throw t=Pm,rd=!1,Pm=null,t}function He(t,e){var n=e[Dm];n===void 0&&(n=e[Dm]=new Set);var i=t+"__bubble";n.has(i)||($P(e,t,2,!1),n.add(i))}function vp(t,e,n){var i=0;e&&(i|=4),$P(n,t,i,e)}var gh="_reactListening"+Math.random().toString(36).slice(2);function bu(t){if(!t[gh]){t[gh]=!0,QE.forEach(function(n){n!=="selectionchange"&&(Dk.has(n)||vp(n,!1,t),vp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gh]||(e[gh]=!0,vp("selectionchange",!1,e))}}function $P(t,e,n,i){switch(xP(e)){case 1:var r=GR;break;case 4:r=KR;break;default:r=r_}n=r.bind(null,e,n,t),r=void 0,!Em||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function wp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Ns(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}dP(function(){var f=o,p=e_(n),g=[];e:{var v=UP.get(t);if(v!==void 0){var T=o_,C=t;switch(t){case"keypress":if(Vh(n)===0)break e;case"keydown":case"keyup":T=uk;break;case"focusin":C="focus",T=fp;break;case"focusout":C="blur",T=fp;break;case"beforeblur":case"afterblur":T=fp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=ow;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=YR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=dk;break;case VP:case FP:case jP:T=ek;break;case BP:T=pk;break;case"scroll":T=ZR;break;case"wheel":T=gk;break;case"copy":case"cut":case"paste":T=nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=lw}var k=(e&4)!==0,V=!k&&t==="scroll",b=k?v!==null?v+"Capture":null:v;k=[];for(var S=f,A;S!==null;){A=S;var B=A.stateNode;if(A.tag===5&&B!==null&&(A=B,b!==null&&(B=xu(S,b),B!=null&&k.push(Du(S,B,A)))),V)break;S=S.return}0<k.length&&(v=new T(v,C,null,n,p),g.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==wm&&(C=n.relatedTarget||n.fromElement)&&(Ns(C)||C[tr]))break e;if((T||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,T?(C=n.relatedTarget||n.toElement,T=f,C=C?Ns(C):null,C!==null&&(V=oo(C),C!==V||C.tag!==5&&C.tag!==6)&&(C=null)):(T=null,C=f),T!==C)){if(k=ow,B="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(k=lw,B="onPointerLeave",b="onPointerEnter",S="pointer"),V=T==null?v:ra(T),A=C==null?v:ra(C),v=new k(B,S+"leave",T,n,p),v.target=V,v.relatedTarget=A,B=null,Ns(p)===f&&(k=new k(b,S+"enter",C,n,p),k.target=A,k.relatedTarget=V,B=k),V=B,T&&C)t:{for(k=T,b=C,S=0,A=k;A;A=Ko(A))S++;for(A=0,B=b;B;B=Ko(B))A++;for(;0<S-A;)k=Ko(k),S--;for(;0<A-S;)b=Ko(b),A--;for(;S--;){if(k===b||b!==null&&k===b.alternate)break t;k=Ko(k),b=Ko(b)}k=null}else k=null;T!==null&&vw(g,v,T,k,!1),C!==null&&V!==null&&vw(g,V,C,k,!0)}}e:{if(v=f?ra(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var G=Pk;else if(hw(v))if(bP)G=Ck;else{G=Sk;var $=Ik}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(G=xk);if(G&&(G=G(t,f))){LP(g,G,n,p);break e}$&&$(t,v,f),t==="focusout"&&($=v._wrapperState)&&$.controlled&&v.type==="number"&&mm(v,"number",v.value)}switch($=f?ra(f):window,t){case"focusin":(hw($)||$.contentEditable==="true")&&(na=$,Cm=f,uu=null);break;case"focusout":uu=Cm=na=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,gw(g,n,p);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":gw(g,n,p)}var R;if(l_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ta?RP(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(AP&&n.locale!=="ko"&&(ta||I!=="onCompositionStart"?I==="onCompositionEnd"&&ta&&(R=CP()):(Mr=p,s_="value"in Mr?Mr.value:Mr.textContent,ta=!0)),$=ud(f,I),0<$.length&&(I=new aw(I,t,null,n,p),g.push({event:I,listeners:$}),R?I.data=R:(R=kP(n),R!==null&&(I.data=R)))),(R=yk?vk(t,n):wk(t,n))&&(f=ud(f,"onBeforeInput"),0<f.length&&(p=new aw("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:f}),p.data=R))}zP(g,e)})}function Du(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ud(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=xu(t,n),o!=null&&i.unshift(Du(t,o,r)),o=xu(t,e),o!=null&&i.push(Du(t,o,r))),t=t.return}return i}function Ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vw(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&f!==null&&(u=f,r?(c=xu(n,o),c!=null&&a.unshift(Du(n,c,u))):r||(c=xu(n,o),c!=null&&a.push(Du(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Mk=/\r\n?/g,Nk=/\u0000|\uFFFD/g;function ww(t){return(typeof t=="string"?t:""+t).replace(Mk,`
`).replace(Nk,"")}function _h(t,e,n){if(e=ww(e),ww(t)!==e&&n)throw Error(X(425))}function cd(){}var Rm=null,km=null;function Lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,Ok=typeof clearTimeout=="function"?clearTimeout:void 0,Tw=typeof Promise=="function"?Promise:void 0,Vk=typeof queueMicrotask=="function"?queueMicrotask:typeof Tw<"u"?function(t){return Tw.resolve(null).then(t).catch(Fk)}:bm;function Fk(t){setTimeout(function(){throw t})}function Tp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ru(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ru(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ew(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),wi="__reactFiber$"+Ha,Mu="__reactProps$"+Ha,tr="__reactContainer$"+Ha,Dm="__reactEvents$"+Ha,jk="__reactListeners$"+Ha,Bk="__reactHandles$"+Ha;function Ns(t){var e=t[wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ew(t);t!==null;){if(n=t[wi])return n;t=Ew(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[wi]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ra(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function sf(t){return t[Mu]||null}var Mm=[],sa=-1;function os(t){return{current:t}}function Ge(t){0>sa||(t.current=Mm[sa],Mm[sa]=null,sa--)}function $e(t,e){sa++,Mm[sa]=t.current,t.current=e}var Xr={},qt=os(Xr),un=os(!1),Gs=Xr;function Ca(t,e){var n=t.type.contextTypes;if(!n)return Xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function cn(t){return t=t.childContextTypes,t!=null}function hd(){Ge(un),Ge(qt)}function Pw(t,e,n){if(qt.current!==Xr)throw Error(X(168));$e(qt,e),$e(un,n)}function WP(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,IR(t)||"Unknown",r));return it({},n,i)}function dd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,Gs=qt.current,$e(qt,t),$e(un,un.current),!0}function Iw(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=WP(t,e,Gs),i.__reactInternalMemoizedMergedChildContext=t,Ge(un),Ge(qt),$e(qt,t)):Ge(un),$e(un,n)}var zi=null,of=!1,Ep=!1;function HP(t){zi===null?zi=[t]:zi.push(t)}function Uk(t){of=!0,HP(t)}function as(){if(!Ep&&zi!==null){Ep=!0;var t=0,e=Ve;try{var n=zi;for(Ve=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}zi=null,of=!1}catch(r){throw zi!==null&&(zi=zi.slice(t+1)),gP(t_,as),r}finally{Ve=e,Ep=!1}}return null}var oa=[],aa=0,fd=null,pd=0,Fn=[],jn=0,Ks=null,$i=1,Wi="";function Rs(t,e){oa[aa++]=pd,oa[aa++]=fd,fd=t,pd=e}function qP(t,e,n){Fn[jn++]=$i,Fn[jn++]=Wi,Fn[jn++]=Ks,Ks=t;var i=$i;t=Wi;var r=32-ii(i)-1;i&=~(1<<r),n+=1;var o=32-ii(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,$i=1<<32-ii(e)+r|n<<r|i,Wi=o+t}else $i=1<<o|n<<r|i,Wi=t}function c_(t){t.return!==null&&(Rs(t,1),qP(t,1,0))}function h_(t){for(;t===fd;)fd=oa[--aa],oa[aa]=null,pd=oa[--aa],oa[aa]=null;for(;t===Ks;)Ks=Fn[--jn],Fn[jn]=null,Wi=Fn[--jn],Fn[jn]=null,$i=Fn[--jn],Fn[jn]=null}var Tn=null,vn=null,Ye=!1,ti=null;function GP(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,vn=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ks!==null?{id:$i,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,vn=null,!0):!1;default:return!1}}function Nm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(Ye){var e=vn;if(e){var n=e;if(!Sw(t,e)){if(Nm(t))throw Error(X(418));e=Ur(n.nextSibling);var i=Tn;e&&Sw(t,e)?GP(i,n):(t.flags=t.flags&-4097|2,Ye=!1,Tn=t)}}else{if(Nm(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ye=!1,Tn=t}}}function xw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function yh(t){if(t!==Tn)return!1;if(!Ye)return xw(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lm(t.type,t.memoizedProps)),e&&(e=vn)){if(Nm(t))throw KP(),Error(X(418));for(;e;)GP(t,e),e=Ur(e.nextSibling)}if(xw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=Tn?Ur(t.stateNode.nextSibling):null;return!0}function KP(){for(var t=vn;t;)t=Ur(t.nextSibling)}function Aa(){vn=Tn=null,Ye=!1}function d_(t){ti===null?ti=[t]:ti.push(t)}var zk=ur.ReactCurrentBatchConfig;function Ul(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function vh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cw(t){var e=t._init;return e(t._payload)}function ZP(t){function e(b,S){if(t){var A=b.deletions;A===null?(b.deletions=[S],b.flags|=16):A.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function i(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function r(b,S){return b=Hr(b,S),b.index=0,b.sibling=null,b}function o(b,S,A){return b.index=A,t?(A=b.alternate,A!==null?(A=A.index,A<S?(b.flags|=2,S):A):(b.flags|=2,S)):(b.flags|=1048576,S)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,S,A,B){return S===null||S.tag!==6?(S=Rp(A,b.mode,B),S.return=b,S):(S=r(S,A),S.return=b,S)}function c(b,S,A,B){var G=A.type;return G===ea?p(b,S,A.props.children,B,A.key):S!==null&&(S.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Sr&&Cw(G)===S.type)?(B=r(S,A.props),B.ref=Ul(b,S,A),B.return=b,B):(B=Wh(A.type,A.key,A.props,null,b.mode,B),B.ref=Ul(b,S,A),B.return=b,B)}function f(b,S,A,B){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=kp(A,b.mode,B),S.return=b,S):(S=r(S,A.children||[]),S.return=b,S)}function p(b,S,A,B,G){return S===null||S.tag!==7?(S=$s(A,b.mode,B,G),S.return=b,S):(S=r(S,A),S.return=b,S)}function g(b,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Rp(""+S,b.mode,A),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lh:return A=Wh(S.type,S.key,S.props,null,b.mode,A),A.ref=Ul(b,null,S),A.return=b,A;case Jo:return S=kp(S,b.mode,A),S.return=b,S;case Sr:var B=S._init;return g(b,B(S._payload),A)}if(Kl(S)||Ol(S))return S=$s(S,b.mode,A,null),S.return=b,S;vh(b,S)}return null}function v(b,S,A,B){var G=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return G!==null?null:u(b,S,""+A,B);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case lh:return A.key===G?c(b,S,A,B):null;case Jo:return A.key===G?f(b,S,A,B):null;case Sr:return G=A._init,v(b,S,G(A._payload),B)}if(Kl(A)||Ol(A))return G!==null?null:p(b,S,A,B,null);vh(b,A)}return null}function T(b,S,A,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return b=b.get(A)||null,u(S,b,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case lh:return b=b.get(B.key===null?A:B.key)||null,c(S,b,B,G);case Jo:return b=b.get(B.key===null?A:B.key)||null,f(S,b,B,G);case Sr:var $=B._init;return T(b,S,A,$(B._payload),G)}if(Kl(B)||Ol(B))return b=b.get(A)||null,p(S,b,B,G,null);vh(S,B)}return null}function C(b,S,A,B){for(var G=null,$=null,R=S,I=S=0,D=null;R!==null&&I<A.length;I++){R.index>I?(D=R,R=null):D=R.sibling;var M=v(b,R,A[I],B);if(M===null){R===null&&(R=D);break}t&&R&&M.alternate===null&&e(b,R),S=o(M,S,I),$===null?G=M:$.sibling=M,$=M,R=D}if(I===A.length)return n(b,R),Ye&&Rs(b,I),G;if(R===null){for(;I<A.length;I++)R=g(b,A[I],B),R!==null&&(S=o(R,S,I),$===null?G=R:$.sibling=R,$=R);return Ye&&Rs(b,I),G}for(R=i(b,R);I<A.length;I++)D=T(R,b,I,A[I],B),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?I:D.key),S=o(D,S,I),$===null?G=D:$.sibling=D,$=D);return t&&R.forEach(function(F){return e(b,F)}),Ye&&Rs(b,I),G}function k(b,S,A,B){var G=Ol(A);if(typeof G!="function")throw Error(X(150));if(A=G.call(A),A==null)throw Error(X(151));for(var $=G=null,R=S,I=S=0,D=null,M=A.next();R!==null&&!M.done;I++,M=A.next()){R.index>I?(D=R,R=null):D=R.sibling;var F=v(b,R,M.value,B);if(F===null){R===null&&(R=D);break}t&&R&&F.alternate===null&&e(b,R),S=o(F,S,I),$===null?G=F:$.sibling=F,$=F,R=D}if(M.done)return n(b,R),Ye&&Rs(b,I),G;if(R===null){for(;!M.done;I++,M=A.next())M=g(b,M.value,B),M!==null&&(S=o(M,S,I),$===null?G=M:$.sibling=M,$=M);return Ye&&Rs(b,I),G}for(R=i(b,R);!M.done;I++,M=A.next())M=T(R,b,I,M.value,B),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?I:M.key),S=o(M,S,I),$===null?G=M:$.sibling=M,$=M);return t&&R.forEach(function(U){return e(b,U)}),Ye&&Rs(b,I),G}function V(b,S,A,B){if(typeof A=="object"&&A!==null&&A.type===ea&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case lh:e:{for(var G=A.key,$=S;$!==null;){if($.key===G){if(G=A.type,G===ea){if($.tag===7){n(b,$.sibling),S=r($,A.props.children),S.return=b,b=S;break e}}else if($.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Sr&&Cw(G)===$.type){n(b,$.sibling),S=r($,A.props),S.ref=Ul(b,$,A),S.return=b,b=S;break e}n(b,$);break}else e(b,$);$=$.sibling}A.type===ea?(S=$s(A.props.children,b.mode,B,A.key),S.return=b,b=S):(B=Wh(A.type,A.key,A.props,null,b.mode,B),B.ref=Ul(b,S,A),B.return=b,b=B)}return a(b);case Jo:e:{for($=A.key;S!==null;){if(S.key===$)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){n(b,S.sibling),S=r(S,A.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else e(b,S);S=S.sibling}S=kp(A,b.mode,B),S.return=b,b=S}return a(b);case Sr:return $=A._init,V(b,S,$(A._payload),B)}if(Kl(A))return C(b,S,A,B);if(Ol(A))return k(b,S,A,B);vh(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(n(b,S.sibling),S=r(S,A),S.return=b,b=S):(n(b,S),S=Rp(A,b.mode,B),S.return=b,b=S),a(b)):n(b,S)}return V}var Ra=ZP(!0),QP=ZP(!1),md=os(null),gd=null,la=null,f_=null;function p_(){f_=la=gd=null}function m_(t){var e=md.current;Ge(md),t._currentValue=e}function Vm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function wa(t,e){gd=t,f_=la=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Wn(t){var e=t._currentValue;if(f_!==t)if(t={context:t,memoizedValue:e,next:null},la===null){if(gd===null)throw Error(X(308));la=t,gd.dependencies={lanes:0,firstContext:t}}else la=la.next=t;return e}var Os=null;function g_(t){Os===null?Os=[t]:Os.push(t)}function YP(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,g_(e)):(n.next=r.next,r.next=n),e.interleaved=n,nr(t,i)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function __(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,nr(t,n)}return r=i.interleaved,r===null?(e.next=e,g_(i)):(e.next=r.next,r.next=e),i.interleaved=e,nr(t,n)}function Fh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,n_(t,n)}}function Aw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _d(t,e,n,i){var r=t.updateQueue;xr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,f=c.next;c.next=null,a===null?o=f:a.next=f,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==a&&(u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=c))}if(o!==null){var g=r.baseState;a=0,p=f=c=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){p!==null&&(p=p.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=t,k=u;switch(v=e,T=n,k.tag){case 1:if(C=k.payload,typeof C=="function"){g=C.call(T,g,v);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,v=typeof C=="function"?C.call(T,g,v):C,v==null)break e;g=it({},g,v);break e;case 2:xr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(f=p=T,c=g):p=p.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(p===null&&(c=g),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Qs|=a,t.lanes=a,t.memoizedState=g}}function Rw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var ac={},Pi=os(ac),Nu=os(ac),Ou=os(ac);function Vs(t){if(t===ac)throw Error(X(174));return t}function y_(t,e){switch($e(Ou,e),$e(Nu,t),$e(Pi,ac),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_m(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_m(e,t)}Ge(Pi),$e(Pi,e)}function ka(){Ge(Pi),Ge(Nu),Ge(Ou)}function JP(t){Vs(Ou.current);var e=Vs(Pi.current),n=_m(e,t.type);e!==n&&($e(Nu,t),$e(Pi,n))}function v_(t){Nu.current===t&&(Ge(Pi),Ge(Nu))}var et=os(0);function yd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pp=[];function w_(){for(var t=0;t<Pp.length;t++)Pp[t]._workInProgressVersionPrimary=null;Pp.length=0}var jh=ur.ReactCurrentDispatcher,Ip=ur.ReactCurrentBatchConfig,Zs=0,nt=null,Tt=null,At=null,vd=!1,cu=!1,Vu=0,$k=0;function jt(){throw Error(X(321))}function T_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function E_(t,e,n,i,r,o){if(Zs=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jh.current=t===null||t.memoizedState===null?Gk:Kk,t=n(i,r),cu){o=0;do{if(cu=!1,Vu=0,25<=o)throw Error(X(301));o+=1,At=Tt=null,e.updateQueue=null,jh.current=Zk,t=n(i,r)}while(cu)}if(jh.current=wd,e=Tt!==null&&Tt.next!==null,Zs=0,At=Tt=nt=null,vd=!1,e)throw Error(X(300));return t}function P_(){var t=Vu!==0;return Vu=0,t}function yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?nt.memoizedState=At=t:At=At.next=t,At}function Hn(){if(Tt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=At===null?nt.memoizedState:At.next;if(e!==null)At=e,Tt=t;else{if(t===null)throw Error(X(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},At===null?nt.memoizedState=At=t:At=At.next=t}return At}function Fu(t,e){return typeof e=="function"?e(t):e}function Sp(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=Tt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,f=o;do{var p=f.lane;if((Zs&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,nt.lanes|=p,Qs|=p}f=f.next}while(f!==null&&f!==o);c===null?a=i:c.next=u,ai(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,nt.lanes|=o,Qs|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xp(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ai(o,e.memoizedState)||(ln=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function eI(){}function tI(t,e){var n=nt,i=Hn(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,ln=!0),i=i.queue,I_(rI.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,ju(9,iI.bind(null,n,i,r,e),void 0,null),Rt===null)throw Error(X(349));Zs&30||nI(n,e,r)}return r}function nI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iI(t,e,n,i){e.value=n,e.getSnapshot=i,sI(e)&&oI(t)}function rI(t,e,n){return n(function(){sI(e)&&oI(t)})}function sI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch{return!0}}function oI(t){var e=nr(t,1);e!==null&&ri(e,t,1,-1)}function kw(t){var e=yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:t},e.queue=t,t=t.dispatch=qk.bind(null,nt,t),[e.memoizedState,t]}function ju(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function aI(){return Hn().memoizedState}function Bh(t,e,n,i){var r=yi();nt.flags|=t,r.memoizedState=ju(1|e,n,void 0,i===void 0?null:i)}function af(t,e,n,i){var r=Hn();i=i===void 0?null:i;var o=void 0;if(Tt!==null){var a=Tt.memoizedState;if(o=a.destroy,i!==null&&T_(i,a.deps)){r.memoizedState=ju(e,n,o,i);return}}nt.flags|=t,r.memoizedState=ju(1|e,n,o,i)}function Lw(t,e){return Bh(8390656,8,t,e)}function I_(t,e){return af(2048,8,t,e)}function lI(t,e){return af(4,2,t,e)}function uI(t,e){return af(4,4,t,e)}function cI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hI(t,e,n){return n=n!=null?n.concat([t]):null,af(4,4,cI.bind(null,e,t),n)}function S_(){}function dI(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&T_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function fI(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&T_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function pI(t,e,n){return Zs&21?(ai(n,e)||(n=vP(),nt.lanes|=n,Qs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function Wk(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var i=Ip.transition;Ip.transition={};try{t(!1),e()}finally{Ve=n,Ip.transition=i}}function mI(){return Hn().memoizedState}function Hk(t,e,n){var i=Wr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gI(t))_I(e,n);else if(n=YP(t,e,n,i),n!==null){var r=Jt();ri(n,t,i,r),yI(n,e,i)}}function qk(t,e,n){var i=Wr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gI(t))_I(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ai(u,a)){var c=e.interleaved;c===null?(r.next=r,g_(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=YP(t,e,r,i),n!==null&&(r=Jt(),ri(n,t,i,r),yI(n,e,i))}}function gI(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function _I(t,e){cu=vd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yI(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,n_(t,n)}}var wd={readContext:Wn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},Gk={readContext:Wn,useCallback:function(t,e){return yi().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:Lw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4194308,4,cI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var n=yi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=yi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Hk.bind(null,nt,t),[i.memoizedState,t]},useRef:function(t){var e=yi();return t={current:t},e.memoizedState=t},useState:kw,useDebugValue:S_,useDeferredValue:function(t){return yi().memoizedState=t},useTransition:function(){var t=kw(!1),e=t[0];return t=Wk.bind(null,t[1]),yi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nt,r=yi();if(Ye){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Rt===null)throw Error(X(349));Zs&30||nI(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Lw(rI.bind(null,i,o,t),[t]),i.flags|=2048,ju(9,iI.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=yi(),e=Rt.identifierPrefix;if(Ye){var n=Wi,i=$i;n=(i&~(1<<32-ii(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$k++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kk={readContext:Wn,useCallback:dI,useContext:Wn,useEffect:I_,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:fI,useReducer:Sp,useRef:aI,useState:function(){return Sp(Fu)},useDebugValue:S_,useDeferredValue:function(t){var e=Hn();return pI(e,Tt.memoizedState,t)},useTransition:function(){var t=Sp(Fu)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1},Zk={readContext:Wn,useCallback:dI,useContext:Wn,useEffect:I_,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:fI,useReducer:xp,useRef:aI,useState:function(){return xp(Fu)},useDebugValue:S_,useDeferredValue:function(t){var e=Hn();return Tt===null?e.memoizedState=t:pI(e,Tt.memoizedState,t)},useTransition:function(){var t=xp(Fu)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lf={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Wr(t),o=Zi(i,r);o.payload=e,n!=null&&(o.callback=n),e=zr(t,o,r),e!==null&&(ri(e,t,r,i),Fh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Wr(t),o=Zi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=zr(t,o,r),e!==null&&(ri(e,t,r,i),Fh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=Wr(t),r=Zi(n,i);r.tag=2,e!=null&&(r.callback=e),e=zr(t,r,i),e!==null&&(ri(e,t,i,n),Fh(e,t,i))}};function bw(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Lu(n,i)||!Lu(r,o):!0}function vI(t,e,n){var i=!1,r=Xr,o=e.contextType;return typeof o=="object"&&o!==null?o=Wn(o):(r=cn(e)?Gs:qt.current,i=e.contextTypes,o=(i=i!=null)?Ca(t,r):Xr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Dw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lf.enqueueReplaceState(e,e.state,null)}function jm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},__(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Wn(o):(o=cn(e)?Gs:qt.current,r.context=Ca(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Fm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&lf.enqueueReplaceState(r,r.state,null),_d(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function La(t,e){try{var n="",i=e;do n+=PR(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Cp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qk=typeof WeakMap=="function"?WeakMap:Map;function wI(t,e,n){n=Zi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ed||(Ed=!0,Qm=i),Bm(t,e)},n}function TI(t,e,n){n=Zi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Bm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bm(t,e),typeof i!="function"&&($r===null?$r=new Set([this]):$r.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Mw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Qk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=cL.bind(null,t,e,n),e.then(t,t))}function Nw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ow(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zi(-1,1),e.tag=2,zr(n,e,1))),n.lanes|=1),t)}var Yk=ur.ReactCurrentOwner,ln=!1;function Yt(t,e,n,i){e.child=t===null?QP(e,null,n,i):Ra(e,t.child,n,i)}function Vw(t,e,n,i,r){n=n.render;var o=e.ref;return wa(e,r),i=E_(t,e,n,i,o,r),n=P_(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ir(t,e,r)):(Ye&&n&&c_(e),e.flags|=1,Yt(t,e,i,r),e.child)}function Fw(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!D_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,EI(t,e,o,i,r)):(t=Wh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Lu,n(a,i)&&t.ref===e.ref)return ir(t,e,r)}return e.flags|=1,t=Hr(o,i),t.ref=e.ref,t.return=e,e.child=t}function EI(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Lu(o,i)&&t.ref===e.ref)if(ln=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,ir(t,e,r)}return Um(t,e,n,i,r)}function PI(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ca,yn),yn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(ca,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(ca,yn),yn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(ca,yn),yn|=i;return Yt(t,e,r,n),e.child}function II(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Um(t,e,n,i,r){var o=cn(n)?Gs:qt.current;return o=Ca(e,o),wa(e,r),n=E_(t,e,n,i,o,r),i=P_(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ir(t,e,r)):(Ye&&i&&c_(e),e.flags|=1,Yt(t,e,n,r),e.child)}function jw(t,e,n,i,r){if(cn(n)){var o=!0;dd(e)}else o=!1;if(wa(e,r),e.stateNode===null)Uh(t,e),vI(e,n,i),jm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Wn(f):(f=cn(n)?Gs:qt.current,f=Ca(e,f));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==f)&&Dw(e,a,i,f),xr=!1;var v=e.memoizedState;a.state=v,_d(e,i,a,r),c=e.memoizedState,u!==i||v!==c||un.current||xr?(typeof p=="function"&&(Fm(e,n,p,i),c=e.memoizedState),(u=xr||bw(e,n,u,i,v,c,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,XP(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Jn(e.type,u),a.props=f,g=e.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wn(c):(c=cn(n)?Gs:qt.current,c=Ca(e,c));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||v!==c)&&Dw(e,a,i,c),xr=!1,v=e.memoizedState,a.state=v,_d(e,i,a,r);var C=e.memoizedState;u!==g||v!==C||un.current||xr?(typeof T=="function"&&(Fm(e,n,T,i),C=e.memoizedState),(f=xr||bw(e,n,f,i,v,C,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,C,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,C,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=C),a.props=i,a.state=C,a.context=c,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return zm(t,e,n,i,o,r)}function zm(t,e,n,i,r,o){II(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Iw(e,n,!1),ir(t,e,o);i=e.stateNode,Yk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ra(e,t.child,null,o),e.child=Ra(e,null,u,o)):Yt(t,e,u,o),e.memoizedState=i.state,r&&Iw(e,n,!0),e.child}function SI(t){var e=t.stateNode;e.pendingContext?Pw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pw(t,e.context,!1),y_(t,e.containerInfo)}function Bw(t,e,n,i,r){return Aa(),d_(r),e.flags|=256,Yt(t,e,n,i),e.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function xI(t,e,n){var i=e.pendingProps,r=et.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(et,r&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=hf(a,i,0,null),t=$s(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Wm(n),e.memoizedState=$m,t):x_(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Xk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Hr(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Hr(u,o):(o=$s(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Wm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=$m,i}return o=t.child,t=o.sibling,i=Hr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function x_(t,e){return e=hf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wh(t,e,n,i){return i!==null&&d_(i),Ra(e,t.child,null,n),t=x_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Cp(Error(X(422))),wh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=hf({mode:"visible",children:i.children},r,0,null),o=$s(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ra(e,t.child,null,a),e.child.memoizedState=Wm(a),e.memoizedState=$m,o);if(!(e.mode&1))return wh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=Cp(o,i,void 0),wh(t,e,a,i)}if(u=(a&t.childLanes)!==0,ln||u){if(i=Rt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,nr(t,r),ri(i,t,r,-1))}return b_(),i=Cp(Error(X(421))),wh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=hL.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,vn=Ur(r.nextSibling),Tn=e,Ye=!0,ti=null,t!==null&&(Fn[jn++]=$i,Fn[jn++]=Wi,Fn[jn++]=Ks,$i=t.id,Wi=t.overflow,Ks=e),e=x_(e,i.children),e.flags|=4096,e)}function Uw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Vm(t.return,e,n)}function Ap(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function CI(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Yt(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uw(t,n,e);else if(t.tag===19)Uw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&yd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ap(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&yd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ap(e,!0,n,null,o);break;case"together":Ap(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jk(t,e,n){switch(e.tag){case 3:SI(e),Aa();break;case 5:JP(e);break;case 1:cn(e.type)&&dd(e);break;case 4:y_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(md,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?xI(t,e,n):($e(et,et.current&1),t=ir(t,e,n),t!==null?t.sibling:null);$e(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return CI(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,PI(t,e,n)}return ir(t,e,n)}var AI,Hm,RI,kI;AI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hm=function(){};RI=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Vs(Pi.current);var o=null;switch(n){case"input":r=fm(t,r),i=fm(t,i),o=[];break;case"select":r=it({},r,{value:void 0}),i=it({},i,{value:void 0}),o=[];break;case"textarea":r=gm(t,r),i=gm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cd)}ym(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Iu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var c=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Iu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&He("scroll",t),o||u===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};kI=function(t,e,n,i){n!==i&&(e.flags|=4)};function zl(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function eL(t,e,n){var i=e.pendingProps;switch(h_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(e),null;case 1:return cn(e.type)&&hd(),Bt(e),null;case 3:return i=e.stateNode,ka(),Ge(un),Ge(qt),w_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(Jm(ti),ti=null))),Hm(t,e),Bt(e),null;case 5:v_(e);var r=Vs(Ou.current);if(n=e.type,t!==null&&e.stateNode!=null)RI(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Bt(e),null}if(t=Vs(Pi.current),yh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[wi]=e,i[Mu]=o,t=(e.mode&1)!==0,n){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(r=0;r<Ql.length;r++)He(Ql[r],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":Qv(i,o),He("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},He("invalid",i);break;case"textarea":Xv(i,o),He("invalid",i)}ym(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&_h(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&_h(i.textContent,u,t),r=["children",""+u]):Iu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&He("scroll",i)}switch(n){case"input":uh(i),Yv(i,o,!0);break;case"textarea":uh(i),Jv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=cd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[wi]=e,t[Mu]=i,AI(t,e,!1,!1),e.stateNode=t;e:{switch(a=vm(n,i),n){case"dialog":He("cancel",t),He("close",t),r=i;break;case"iframe":case"object":case"embed":He("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ql.length;r++)He(Ql[r],t);r=i;break;case"source":He("error",t),r=i;break;case"img":case"image":case"link":He("error",t),He("load",t),r=i;break;case"details":He("toggle",t),r=i;break;case"input":Qv(t,i),r=fm(t,i),He("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=it({},i,{value:void 0}),He("invalid",t);break;case"textarea":Xv(t,i),r=gm(t,i),He("invalid",t);break;default:r=i}ym(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?aP(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sP(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Su(t,c):typeof c=="number"&&Su(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Iu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&He("scroll",t):c!=null&&Qg(t,o,c,a))}switch(n){case"input":uh(t),Yv(t,i,!1);break;case"textarea":uh(t),Jv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Yr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ga(t,!!i.multiple,o,!1):i.defaultValue!=null&&ga(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bt(e),null;case 6:if(t&&e.stateNode!=null)kI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=Vs(Ou.current),Vs(Pi.current),yh(e)){if(i=e.stateNode,n=e.memoizedProps,i[wi]=e,(o=i.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:_h(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_h(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wi]=e,e.stateNode=i}return Bt(e),null;case 13:if(Ge(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&vn!==null&&e.mode&1&&!(e.flags&128))KP(),Aa(),e.flags|=98560,o=!1;else if(o=yh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[wi]=e}else Aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bt(e),o=!1}else ti!==null&&(Jm(ti),ti=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?Et===0&&(Et=3):b_())),e.updateQueue!==null&&(e.flags|=4),Bt(e),null);case 4:return ka(),Hm(t,e),t===null&&bu(e.stateNode.containerInfo),Bt(e),null;case 10:return m_(e.type._context),Bt(e),null;case 17:return cn(e.type)&&hd(),Bt(e),null;case 19:if(Ge(et),o=e.memoizedState,o===null)return Bt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)zl(o,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=yd(t),a!==null){for(e.flags|=128,zl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&ht()>ba&&(e.flags|=128,i=!0,zl(o,!1),e.lanes=4194304)}else{if(!i)if(t=yd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ye)return Bt(e),null}else 2*ht()-o.renderingStartTime>ba&&n!==1073741824&&(e.flags|=128,i=!0,zl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,n=et.current,$e(et,i?n&1|2:n&1),e):(Bt(e),null);case 22:case 23:return L_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yn&1073741824&&(Bt(e),e.subtreeFlags&6&&(e.flags|=8192)):Bt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function tL(t,e){switch(h_(e),e.tag){case 1:return cn(e.type)&&hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),Ge(un),Ge(qt),w_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return v_(e),null;case 13:if(Ge(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(et),null;case 4:return ka(),null;case 10:return m_(e.type._context),null;case 22:case 23:return L_(),null;case 24:return null;default:return null}}var Th=!1,Wt=!1,nL=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function qm(t,e,n){try{n()}catch(i){at(t,e,i)}}var zw=!1;function iL(t,e){if(Rm=ad,t=NP(),u_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,f=0,p=0,g=t,v=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)v=g,g=T;for(;;){if(g===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++p===i&&(c=a),(T=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=T}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:t,selectionRange:n},ad=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,V=C.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:Jn(e.type,k),V);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(B){at(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return C=zw,zw=!1,C}function hu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&qm(e,n,o)}r=r.next}while(r!==i)}}function uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Gm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LI(t){var e=t.alternate;e!==null&&(t.alternate=null,LI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wi],delete e[Mu],delete e[Dm],delete e[jk],delete e[Bk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bI(t){return t.tag===5||t.tag===3||t.tag===4}function $w(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Km(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cd));else if(i!==4&&(t=t.child,t!==null))for(Km(t,e,n),t=t.sibling;t!==null;)Km(t,e,n),t=t.sibling}function Zm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}var Lt=null,ei=!1;function Tr(t,e,n){for(n=n.child;n!==null;)DI(t,e,n),n=n.sibling}function DI(t,e,n){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(ef,n)}catch{}switch(n.tag){case 5:Wt||ua(n,e);case 6:var i=Lt,r=ei;Lt=null,Tr(t,e,n),Lt=i,ei=r,Lt!==null&&(ei?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(ei?(t=Lt,n=n.stateNode,t.nodeType===8?Tp(t.parentNode,n):t.nodeType===1&&Tp(t,n),Ru(t)):Tp(Lt,n.stateNode));break;case 4:i=Lt,r=ei,Lt=n.stateNode.containerInfo,ei=!0,Tr(t,e,n),Lt=i,ei=r;break;case 0:case 11:case 14:case 15:if(!Wt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&qm(n,e,a),r=r.next}while(r!==i)}Tr(t,e,n);break;case 1:if(!Wt&&(ua(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}Tr(t,e,n);break;case 21:Tr(t,e,n);break;case 22:n.mode&1?(Wt=(i=Wt)||n.memoizedState!==null,Tr(t,e,n),Wt=i):Tr(t,e,n);break;default:Tr(t,e,n)}}function Ww(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nL),e.forEach(function(i){var r=dL.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Lt=u.stateNode,ei=!1;break e;case 3:Lt=u.stateNode.containerInfo,ei=!0;break e;case 4:Lt=u.stateNode.containerInfo,ei=!0;break e}u=u.return}if(Lt===null)throw Error(X(160));DI(o,a,r),Lt=null,ei=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){at(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MI(e,t),e=e.sibling}function MI(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),gi(t),i&4){try{hu(3,t,t.return),uf(3,t)}catch(k){at(t,t.return,k)}try{hu(5,t,t.return)}catch(k){at(t,t.return,k)}}break;case 1:Xn(e,t),gi(t),i&512&&n!==null&&ua(n,n.return);break;case 5:if(Xn(e,t),gi(t),i&512&&n!==null&&ua(n,n.return),t.flags&32){var r=t.stateNode;try{Su(r,"")}catch(k){at(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&nP(r,o),vm(u,a);var f=vm(u,o);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?aP(r,g):p==="dangerouslySetInnerHTML"?sP(r,g):p==="children"?Su(r,g):Qg(r,p,g,f)}switch(u){case"input":pm(r,o);break;case"textarea":iP(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?ga(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?ga(r,!!o.multiple,o.defaultValue,!0):ga(r,!!o.multiple,o.multiple?[]:"",!1))}r[Mu]=o}catch(k){at(t,t.return,k)}}break;case 6:if(Xn(e,t),gi(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){at(t,t.return,k)}}break;case 3:if(Xn(e,t),gi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ru(e.containerInfo)}catch(k){at(t,t.return,k)}break;case 4:Xn(e,t),gi(t);break;case 13:Xn(e,t),gi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(R_=ht())),i&4&&Ww(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(f=Wt)||p,Xn(e,t),Wt=f):Xn(e,t),gi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!p&&t.mode&1)for(ie=t,p=t.child;p!==null;){for(g=ie=p;ie!==null;){switch(v=ie,T=v.child,v.tag){case 0:case 11:case 14:case 15:hu(4,v,v.return);break;case 1:ua(v,v.return);var C=v.stateNode;if(typeof C.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(k){at(i,n,k)}}break;case 5:ua(v,v.return);break;case 22:if(v.memoizedState!==null){qw(g);continue}}T!==null?(T.return=v,ie=T):qw(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=oP("display",a))}catch(k){at(t,t.return,k)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){at(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Xn(e,t),gi(t),i&4&&Ww(t);break;case 21:break;default:Xn(e,t),gi(t)}}function gi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bI(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Su(r,""),i.flags&=-33);var o=$w(t);Zm(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=$w(t);Km(t,u,a);break;default:throw Error(X(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rL(t,e,n){ie=t,NI(t)}function NI(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var r=ie,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Th;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Wt;u=Th;var f=Wt;if(Th=a,(Wt=c)&&!f)for(ie=r;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?Gw(r):c!==null?(c.return=a,ie=c):Gw(r);for(;o!==null;)ie=o,NI(o),o=o.sibling;ie=r,Th=u,Wt=f}Hw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ie=o):Hw(t)}}function Hw(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||uf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Rw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Ru(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Wt||e.flags&512&&Gm(e)}catch(v){at(e,e.return,v)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function qw(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Gw(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uf(4,e)}catch(c){at(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){at(e,r,c)}}var o=e.return;try{Gm(e)}catch(c){at(e,o,c)}break;case 5:var a=e.return;try{Gm(e)}catch(c){at(e,a,c)}}}catch(c){at(e,e.return,c)}if(e===t){ie=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ie=u;break}ie=e.return}}var sL=Math.ceil,Td=ur.ReactCurrentDispatcher,C_=ur.ReactCurrentOwner,Un=ur.ReactCurrentBatchConfig,Me=0,Rt=null,vt=null,Mt=0,yn=0,ca=os(0),Et=0,Bu=null,Qs=0,cf=0,A_=0,du=null,on=null,R_=0,ba=1/0,Ui=null,Ed=!1,Qm=null,$r=null,Eh=!1,Nr=null,Pd=0,fu=0,Ym=null,zh=-1,$h=0;function Jt(){return Me&6?ht():zh!==-1?zh:zh=ht()}function Wr(t){return t.mode&1?Me&2&&Mt!==0?Mt&-Mt:zk.transition!==null?($h===0&&($h=vP()),$h):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:xP(t.type)),t):1}function ri(t,e,n,i){if(50<fu)throw fu=0,Ym=null,Error(X(185));rc(t,n,i),(!(Me&2)||t!==Rt)&&(t===Rt&&(!(Me&2)&&(cf|=n),Et===4&&Rr(t,Mt)),hn(t,i),n===1&&Me===0&&!(e.mode&1)&&(ba=ht()+500,of&&as()))}function hn(t,e){var n=t.callbackNode;zR(t,e);var i=od(t,t===Rt?Mt:0);if(i===0)n!==null&&nw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&nw(n),e===1)t.tag===0?Uk(Kw.bind(null,t)):HP(Kw.bind(null,t)),Vk(function(){!(Me&6)&&as()}),n=null;else{switch(wP(i)){case 1:n=t_;break;case 4:n=_P;break;case 16:n=sd;break;case 536870912:n=yP;break;default:n=sd}n=$I(n,OI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function OI(t,e){if(zh=-1,$h=0,Me&6)throw Error(X(327));var n=t.callbackNode;if(Ta()&&t.callbackNode!==n)return null;var i=od(t,t===Rt?Mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Id(t,i);else{e=i;var r=Me;Me|=2;var o=FI();(Rt!==t||Mt!==e)&&(Ui=null,ba=ht()+500,zs(t,e));do try{lL();break}catch(u){VI(t,u)}while(!0);p_(),Td.current=o,Me=r,vt!==null?e=0:(Rt=null,Mt=0,e=Et)}if(e!==0){if(e===2&&(r=Im(t),r!==0&&(i=r,e=Xm(t,r))),e===1)throw n=Bu,zs(t,0),Rr(t,i),hn(t,ht()),n;if(e===6)Rr(t,i);else{if(r=t.current.alternate,!(i&30)&&!oL(r)&&(e=Id(t,i),e===2&&(o=Im(t),o!==0&&(i=o,e=Xm(t,o))),e===1))throw n=Bu,zs(t,0),Rr(t,i),hn(t,ht()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:ks(t,on,Ui);break;case 3:if(Rr(t,i),(i&130023424)===i&&(e=R_+500-ht(),10<e)){if(od(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=bm(ks.bind(null,t,on,Ui),e);break}ks(t,on,Ui);break;case 4:if(Rr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ii(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*sL(i/1960))-i,10<i){t.timeoutHandle=bm(ks.bind(null,t,on,Ui),i);break}ks(t,on,Ui);break;case 5:ks(t,on,Ui);break;default:throw Error(X(329))}}}return hn(t,ht()),t.callbackNode===n?OI.bind(null,t):null}function Xm(t,e){var n=du;return t.current.memoizedState.isDehydrated&&(zs(t,e).flags|=256),t=Id(t,e),t!==2&&(e=on,on=n,e!==null&&Jm(e)),t}function Jm(t){on===null?on=t:on.push.apply(on,t)}function oL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~A_,e&=~cf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ii(e),i=1<<n;t[n]=-1,e&=~i}}function Kw(t){if(Me&6)throw Error(X(327));Ta();var e=od(t,0);if(!(e&1))return hn(t,ht()),null;var n=Id(t,e);if(t.tag!==0&&n===2){var i=Im(t);i!==0&&(e=i,n=Xm(t,i))}if(n===1)throw n=Bu,zs(t,0),Rr(t,e),hn(t,ht()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ks(t,on,Ui),hn(t,ht()),null}function k_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(ba=ht()+500,of&&as())}}function Ys(t){Nr!==null&&Nr.tag===0&&!(Me&6)&&Ta();var e=Me;Me|=1;var n=Un.transition,i=Ve;try{if(Un.transition=null,Ve=1,t)return t()}finally{Ve=i,Un.transition=n,Me=e,!(Me&6)&&as()}}function L_(){yn=ca.current,Ge(ca)}function zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ok(n)),vt!==null)for(n=vt.return;n!==null;){var i=n;switch(h_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hd();break;case 3:ka(),Ge(un),Ge(qt),w_();break;case 5:v_(i);break;case 4:ka();break;case 13:Ge(et);break;case 19:Ge(et);break;case 10:m_(i.type._context);break;case 22:case 23:L_()}n=n.return}if(Rt=t,vt=t=Hr(t.current,null),Mt=yn=e,Et=0,Bu=null,A_=cf=Qs=0,on=du=null,Os!==null){for(e=0;e<Os.length;e++)if(n=Os[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Os=null}return t}function VI(t,e){do{var n=vt;try{if(p_(),jh.current=wd,vd){for(var i=nt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}vd=!1}if(Zs=0,At=Tt=nt=null,cu=!1,Vu=0,C_.current=null,n===null||n.return===null){Et=1,Bu=e,vt=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Mt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=u,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=Nw(a);if(T!==null){T.flags&=-257,Ow(T,a,u,o,e),T.mode&1&&Mw(o,f,e),e=T,c=f;var C=e.updateQueue;if(C===null){var k=new Set;k.add(c),e.updateQueue=k}else C.add(c);break e}else{if(!(e&1)){Mw(o,f,e),b_();break e}c=Error(X(426))}}else if(Ye&&u.mode&1){var V=Nw(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Ow(V,a,u,o,e),d_(La(c,u));break e}}o=c=La(c,u),Et!==4&&(Et=2),du===null?du=[o]:du.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=wI(o,c,e);Aw(o,b);break e;case 1:u=c;var S=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&($r===null||!$r.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=TI(o,u,e);Aw(o,B);break e}}o=o.return}while(o!==null)}BI(n)}catch(G){e=G,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function FI(){var t=Td.current;return Td.current=wd,t===null?wd:t}function b_(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||!(Qs&268435455)&&!(cf&268435455)||Rr(Rt,Mt)}function Id(t,e){var n=Me;Me|=2;var i=FI();(Rt!==t||Mt!==e)&&(Ui=null,zs(t,e));do try{aL();break}catch(r){VI(t,r)}while(!0);if(p_(),Me=n,Td.current=i,vt!==null)throw Error(X(261));return Rt=null,Mt=0,Et}function aL(){for(;vt!==null;)jI(vt)}function lL(){for(;vt!==null&&!DR();)jI(vt)}function jI(t){var e=zI(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?BI(t):vt=e,C_.current=null}function BI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tL(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,vt=null;return}}else if(n=eL(n,e,yn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Et===0&&(Et=5)}function ks(t,e,n){var i=Ve,r=Un.transition;try{Un.transition=null,Ve=1,uL(t,e,n,i)}finally{Un.transition=r,Ve=i}return null}function uL(t,e,n,i){do Ta();while(Nr!==null);if(Me&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if($R(t,o),t===Rt&&(vt=Rt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eh||(Eh=!0,$I(sd,function(){return Ta(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Un.transition,Un.transition=null;var a=Ve;Ve=1;var u=Me;Me|=4,C_.current=null,iL(t,n),MI(n,t),Rk(km),ad=!!Rm,km=Rm=null,t.current=n,rL(n),MR(),Me=u,Ve=a,Un.transition=o}else t.current=n;if(Eh&&(Eh=!1,Nr=t,Pd=r),o=t.pendingLanes,o===0&&($r=null),VR(n.stateNode),hn(t,ht()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Ed)throw Ed=!1,t=Qm,Qm=null,t;return Pd&1&&t.tag!==0&&Ta(),o=t.pendingLanes,o&1?t===Ym?fu++:(fu=0,Ym=t):fu=0,as(),null}function Ta(){if(Nr!==null){var t=wP(Pd),e=Un.transition,n=Ve;try{if(Un.transition=null,Ve=16>t?16:t,Nr===null)var i=!1;else{if(t=Nr,Nr=null,Pd=0,Me&6)throw Error(X(331));var r=Me;for(Me|=4,ie=t.current;ie!==null;){var o=ie,a=o.child;if(ie.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(ie=f;ie!==null;){var p=ie;switch(p.tag){case 0:case 11:case 15:hu(8,p,o)}var g=p.child;if(g!==null)g.return=p,ie=g;else for(;ie!==null;){p=ie;var v=p.sibling,T=p.return;if(LI(p),p===f){ie=null;break}if(v!==null){v.return=T,ie=v;break}ie=T}}}var C=o.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var V=k.sibling;k.sibling=null,k=V}while(k!==null)}}ie=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ie=a;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hu(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ie=b;break e}ie=o.return}}var S=t.current;for(ie=S;ie!==null;){a=ie;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,ie=A;else e:for(a=S;ie!==null;){if(u=ie,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:uf(9,u)}}catch(G){at(u,u.return,G)}if(u===a){ie=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,ie=B;break e}ie=u.return}}if(Me=r,as(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(ef,t)}catch{}i=!0}return i}finally{Ve=n,Un.transition=e}}return!1}function Zw(t,e,n){e=La(n,e),e=wI(t,e,1),t=zr(t,e,1),e=Jt(),t!==null&&(rc(t,1,e),hn(t,e))}function at(t,e,n){if(t.tag===3)Zw(t,t,n);else for(;e!==null;){if(e.tag===3){Zw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($r===null||!$r.has(i))){t=La(n,t),t=TI(e,t,1),e=zr(e,t,1),t=Jt(),e!==null&&(rc(e,1,t),hn(e,t));break}}e=e.return}}function cL(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Mt&n)===n&&(Et===4||Et===3&&(Mt&130023424)===Mt&&500>ht()-R_?zs(t,0):A_|=n),hn(t,e)}function UI(t,e){e===0&&(t.mode&1?(e=dh,dh<<=1,!(dh&130023424)&&(dh=4194304)):e=1);var n=Jt();t=nr(t,e),t!==null&&(rc(t,e,n),hn(t,n))}function hL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),UI(t,n)}function dL(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),UI(t,n)}var zI;zI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,Jk(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Ye&&e.flags&1048576&&qP(e,pd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Uh(t,e),t=e.pendingProps;var r=Ca(e,qt.current);wa(e,n),r=E_(null,e,i,t,r,n);var o=P_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(i)?(o=!0,dd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,__(e),r.updater=lf,e.stateNode=r,r._reactInternals=e,jm(e,i,t,n),e=zm(null,e,i,!0,o,n)):(e.tag=0,Ye&&o&&c_(e),Yt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Uh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=pL(i),t=Jn(i,t),r){case 0:e=Um(null,e,i,t,n);break e;case 1:e=jw(null,e,i,t,n);break e;case 11:e=Vw(null,e,i,t,n);break e;case 14:e=Fw(null,e,i,Jn(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),Um(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),jw(t,e,i,r,n);case 3:e:{if(SI(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,XP(t,e),_d(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=La(Error(X(423)),e),e=Bw(t,e,i,n,r);break e}else if(i!==r){r=La(Error(X(424)),e),e=Bw(t,e,i,n,r);break e}else for(vn=Ur(e.stateNode.containerInfo.firstChild),Tn=e,Ye=!0,ti=null,n=QP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),i===r){e=ir(t,e,n);break e}Yt(t,e,i,n)}e=e.child}return e;case 5:return JP(e),t===null&&Om(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Lm(i,r)?a=null:o!==null&&Lm(i,o)&&(e.flags|=32),II(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&Om(e),null;case 13:return xI(t,e,n);case 4:return y_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ra(e,null,i,n):Yt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),Vw(t,e,i,r,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,$e(md,i._currentValue),i._currentValue=a,o!==null)if(ai(o.value,a)){if(o.children===r.children&&!un.current){e=ir(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=Zi(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Vm(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Vm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Yt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,wa(e,n),r=Wn(r),i=i(r),e.flags|=1,Yt(t,e,i,n),e.child;case 14:return i=e.type,r=Jn(i,e.pendingProps),r=Jn(i.type,r),Fw(t,e,i,r,n);case 15:return EI(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),Uh(t,e),e.tag=1,cn(i)?(t=!0,dd(e)):t=!1,wa(e,n),vI(e,i,r),jm(e,i,r,n),zm(null,e,i,!0,t,n);case 19:return CI(t,e,n);case 22:return PI(t,e,n)}throw Error(X(156,e.tag))};function $I(t,e){return gP(t,e)}function fL(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,i){return new fL(t,e,n,i)}function D_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pL(t){if(typeof t=="function")return D_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xg)return 11;if(t===Jg)return 14}return 2}function Hr(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")D_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ea:return $s(n.children,r,o,e);case Yg:a=8,r|=8;break;case um:return t=Bn(12,n,e,r|2),t.elementType=um,t.lanes=o,t;case cm:return t=Bn(13,n,e,r),t.elementType=cm,t.lanes=o,t;case hm:return t=Bn(19,n,e,r),t.elementType=hm,t.lanes=o,t;case JE:return hf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YE:a=10;break e;case XE:a=9;break e;case Xg:a=11;break e;case Jg:a=14;break e;case Sr:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Bn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function $s(t,e,n,i){return t=Bn(7,t,i,e),t.lanes=n,t}function hf(t,e,n,i){return t=Bn(22,t,i,e),t.elementType=JE,t.lanes=n,t.stateNode={isHidden:!1},t}function Rp(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function kp(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mL(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cp(0),this.expirationTimes=cp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function M_(t,e,n,i,r,o,a,u,c){return t=new mL(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Bn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},__(o),t}function gL(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function WI(t){if(!t)return Xr;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(cn(n))return WP(t,n,e)}return e}function HI(t,e,n,i,r,o,a,u,c){return t=M_(n,i,!0,t,r,o,a,u,c),t.context=WI(null),n=t.current,i=Jt(),r=Wr(n),o=Zi(i,r),o.callback=e??null,zr(n,o,r),t.current.lanes=r,rc(t,r,i),hn(t,i),t}function df(t,e,n,i){var r=e.current,o=Jt(),a=Wr(r);return n=WI(n),e.context===null?e.context=n:e.pendingContext=n,e=Zi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=zr(r,e,a),t!==null&&(ri(t,r,a,o),Fh(t,r,a)),a}function Sd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function N_(t,e){Qw(t,e),(t=t.alternate)&&Qw(t,e)}function _L(){return null}var qI=typeof reportError=="function"?reportError:function(t){console.error(t)};function O_(t){this._internalRoot=t}ff.prototype.render=O_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));df(t,e,null,null)};ff.prototype.unmount=O_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ys(function(){df(null,t,null,null)}),e[tr]=null}};function ff(t){this._internalRoot=t}ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=PP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ar.length&&e!==0&&e<Ar[n].priority;n++);Ar.splice(n,0,t),n===0&&SP(t)}};function V_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yw(){}function yL(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Sd(a);o.call(f)}}var a=HI(e,i,t,0,null,!1,!1,"",Yw);return t._reactRootContainer=a,t[tr]=a.current,bu(t.nodeType===8?t.parentNode:t),Ys(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Sd(c);u.call(f)}}var c=M_(t,0,!1,null,null,!1,!1,"",Yw);return t._reactRootContainer=c,t[tr]=c.current,bu(t.nodeType===8?t.parentNode:t),Ys(function(){df(e,c,n,i)}),c}function mf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=Sd(a);u.call(c)}}df(e,a,t,r)}else a=yL(n,e,t,r,i);return Sd(a)}TP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zl(e.pendingLanes);n!==0&&(n_(e,n|1),hn(e,ht()),!(Me&6)&&(ba=ht()+500,as()))}break;case 13:Ys(function(){var i=nr(t,1);if(i!==null){var r=Jt();ri(i,t,1,r)}}),N_(t,1)}};i_=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=Jt();ri(e,t,134217728,n)}N_(t,134217728)}};EP=function(t){if(t.tag===13){var e=Wr(t),n=nr(t,e);if(n!==null){var i=Jt();ri(n,t,e,i)}N_(t,e)}};PP=function(){return Ve};IP=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Tm=function(t,e,n){switch(e){case"input":if(pm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=sf(i);if(!r)throw Error(X(90));tP(i),pm(i,r)}}}break;case"textarea":iP(t,n);break;case"select":e=n.value,e!=null&&ga(t,!!n.multiple,e,!1)}};cP=k_;hP=Ys;var vL={usingClientEntryPoint:!1,Events:[oc,ra,sf,lP,uP,k_]},$l={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wL={bundleType:$l.bundleType,version:$l.version,rendererPackageName:$l.rendererPackageName,rendererConfig:$l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pP(t),t===null?null:t.stateNode},findFiberByHostInstance:$l.findFiberByHostInstance||_L,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ef=Ph.inject(wL),Ei=Ph}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vL;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V_(e))throw Error(X(200));return gL(t,e,null,n)};Sn.createRoot=function(t,e){if(!V_(t))throw Error(X(299));var n=!1,i="",r=qI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=M_(t,1,!1,null,null,n,!1,i,r),t[tr]=e.current,bu(t.nodeType===8?t.parentNode:t),new O_(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=pP(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Ys(t)};Sn.hydrate=function(t,e,n){if(!pf(e))throw Error(X(200));return mf(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!V_(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=qI;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=HI(e,null,t,1,n??null,r,!1,o,a),t[tr]=e.current,bu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new ff(e)};Sn.render=function(t,e,n){if(!pf(e))throw Error(X(200));return mf(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!pf(t))throw Error(X(40));return t._reactRootContainer?(Ys(function(){mf(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};Sn.unstable_batchedUpdates=k_;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!pf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return mf(t,e,n,!1,i)};Sn.version="18.3.1-next-f1338f8080-20240426";function GI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GI)}catch(t){console.error(t)}}GI(),GE.exports=Sn;var KI=GE.exports,ZI,Xw=KI;ZI=Xw.createRoot,Xw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uu.apply(this,arguments)}var Or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Or||(Or={}));const Jw="popstate";function TL(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:c=""}=ao(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),eg("",{pathname:a,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=r.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:xd(o))}function i(r,o){F_(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return PL(e,n,i,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function F_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EL(){return Math.random().toString(36).substr(2,8)}function e0(t,e){return{usr:t.state,key:t.key,idx:e}}function eg(t,e,n,i){return n===void 0&&(n=null),Uu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:n,key:e&&e.key||i||EL()})}function xd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function PL(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Or.Pop,c=null,f=p();f==null&&(f=0,a.replaceState(Uu({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function g(){u=Or.Pop;let V=p(),b=V==null?null:V-f;f=V,c&&c({action:u,location:k.location,delta:b})}function v(V,b){u=Or.Push;let S=eg(k.location,V,b);n&&n(S,V),f=p()+1;let A=e0(S,f),B=k.createHref(S);try{a.pushState(A,"",B)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(B)}o&&c&&c({action:u,location:k.location,delta:1})}function T(V,b){u=Or.Replace;let S=eg(k.location,V,b);n&&n(S,V),f=p();let A=e0(S,f),B=k.createHref(S);a.replaceState(A,"",B),o&&c&&c({action:u,location:k.location,delta:0})}function C(V){let b=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof V=="string"?V:xd(V);return S=S.replace(/ $/,"%20"),ft(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let k={get action(){return u},get location(){return t(r,a)},listen(V){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Jw,g),c=V,()=>{r.removeEventListener(Jw,g),c=null}},createHref(V){return e(r,V)},createURL:C,encodeLocation(V){let b=C(V);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:T,go(V){return a.go(V)}};return k}var t0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(t0||(t0={}));function IL(t,e,n){return n===void 0&&(n="/"),SL(t,e,n)}function SL(t,e,n,i){let r=typeof e=="string"?ao(e):e,o=j_(r.pathname||"/",n);if(o==null)return null;let a=QI(t);xL(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=FL(o);u=NL(a[c],f)}return u}function QI(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let f=qr([i,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(ft(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),QI(o.children,e,p,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:DL(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let c of YI(o.path))r(o,a,c)}),e}function YI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=YI(i.join("/")),u=[];return u.push(...a.map(c=>c===""?o:[o,c].join("/"))),r&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function xL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ML(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const CL=/^:[\w-]+$/,AL=3,RL=2,kL=1,LL=10,bL=-2,n0=t=>t==="*";function DL(t,e){let n=t.split("/"),i=n.length;return n.some(n0)&&(i+=bL),e&&(i+=RL),n.filter(r=>!n0(r)).reduce((r,o)=>r+(CL.test(o)?AL:o===""?kL:LL),i)}function ML(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function NL(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let c=i[u],f=u===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",g=OL({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),v=c.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:qr([o,g.pathname]),pathnameBase:zL(qr([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=qr([o,g.pathnameBase]))}return a}function OL(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=VL(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,p,g)=>{let{paramName:v,isOptional:T}=p;if(v==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const C=u[g];return T&&!C?f[v]=void 0:f[v]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function VL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),F_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(i.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function FL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return F_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function j_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function jL(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ao(t):t;return{pathname:n?n.startsWith("/")?n:BL(n,e):e,search:$L(i),hash:WL(r)}}function BL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Lp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function B_(t,e){let n=UL(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function U_(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ao(t):(r=Uu({},t),ft(!r.pathname||!r.pathname.includes("?"),Lp("?","pathname","search",r)),ft(!r.pathname||!r.pathname.includes("#"),Lp("#","pathname","hash",r)),ft(!r.search||!r.search.includes("#"),Lp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?e[g]:"/"}let c=jL(r,u),f=a&&a!=="/"&&a.endsWith("/"),p=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const qr=t=>t.join("/").replace(/\/\/+/g,"/"),zL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$L=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const XI=["post","put","patch","delete"];new Set(XI);const qL=["get",...XI];new Set(qL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zu.apply(this,arguments)}const z_=j.createContext(null),GL=j.createContext(null),ls=j.createContext(null),gf=j.createContext(null),us=j.createContext({outlet:null,matches:[],isDataRoute:!1}),JI=j.createContext(null);function KL(t,e){let{relative:n}=e===void 0?{}:e;qa()||ft(!1);let{basename:i,navigator:r}=j.useContext(ls),{hash:o,pathname:a,search:u}=tS(t,{relative:n}),c=a;return i!=="/"&&(c=a==="/"?i:qr([i,a])),r.createHref({pathname:c,search:u,hash:o})}function qa(){return j.useContext(gf)!=null}function lc(){return qa()||ft(!1),j.useContext(gf).location}function eS(t){j.useContext(ls).static||j.useLayoutEffect(t)}function Ga(){let{isDataRoute:t}=j.useContext(us);return t?ab():ZL()}function ZL(){qa()||ft(!1);let t=j.useContext(z_),{basename:e,future:n,navigator:i}=j.useContext(ls),{matches:r}=j.useContext(us),{pathname:o}=lc(),a=JSON.stringify(B_(r,n.v7_relativeSplatPath)),u=j.useRef(!1);return eS(()=>{u.current=!0}),j.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=U_(f,JSON.parse(a),o,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:qr([e,g.pathname])),(p.replace?i.replace:i.push)(g,p.state,p)},[e,i,a,o,t])}function tS(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=j.useContext(ls),{matches:r}=j.useContext(us),{pathname:o}=lc(),a=JSON.stringify(B_(r,i.v7_relativeSplatPath));return j.useMemo(()=>U_(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function QL(t,e){return YL(t,e)}function YL(t,e,n,i){qa()||ft(!1);let{navigator:r}=j.useContext(ls),{matches:o}=j.useContext(us),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=lc(),p;if(e){var g;let V=typeof e=="string"?ao(e):e;c==="/"||(g=V.pathname)!=null&&g.startsWith(c)||ft(!1),p=V}else p=f;let v=p.pathname||"/",T=v;if(c!=="/"){let V=c.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(V.length).join("/")}let C=IL(t,{pathname:T}),k=nb(C&&C.map(V=>Object.assign({},V,{params:Object.assign({},u,V.params),pathname:qr([c,r.encodeLocation?r.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?c:qr([c,r.encodeLocation?r.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,i);return e&&k?j.createElement(gf.Provider,{value:{location:zu({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Or.Pop}},k):k}function XL(){let t=ob(),e=HL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:r},n):null,null)}const JL=j.createElement(XL,null);class eb extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(us.Provider,{value:this.props.routeContext},j.createElement(JI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tb(t){let{routeContext:e,match:n,children:i}=t,r=j.useContext(z_);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(us.Provider,{value:e},i)}function nb(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let p=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);p>=0||ft(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:v,errors:T}=n,C=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||C){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,g,v)=>{let T,C=!1,k=null,V=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||JL,c&&(f<0&&v===0?(lb("route-fallback"),C=!0,V=null):f===v&&(C=!0,V=g.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,v+1)),S=()=>{let A;return T?A=k:C?A=V:g.route.Component?A=j.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=p,j.createElement(tb,{match:g,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:A})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?j.createElement(eb,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var nS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nS||{}),iS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iS||{});function ib(t){let e=j.useContext(z_);return e||ft(!1),e}function rb(t){let e=j.useContext(GL);return e||ft(!1),e}function sb(t){let e=j.useContext(us);return e||ft(!1),e}function rS(t){let e=sb(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function ob(){var t;let e=j.useContext(JI),n=rb(),i=rS();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function ab(){let{router:t}=ib(nS.UseNavigateStable),e=rS(iS.UseNavigateStable),n=j.useRef(!1);return eS(()=>{n.current=!0}),j.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,zu({fromRouteId:e},o)))},[t,e])}const i0={};function lb(t,e,n){i0[t]||(i0[t]=!0)}function ub(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sS(t){let{to:e,replace:n,state:i,relative:r}=t;qa()||ft(!1);let{future:o,static:a}=j.useContext(ls),{matches:u}=j.useContext(us),{pathname:c}=lc(),f=Ga(),p=U_(e,B_(u,o.v7_relativeSplatPath),c,r==="path"),g=JSON.stringify(p);return j.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function Pr(t){ft(!1)}function cb(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Or.Pop,navigator:o,static:a=!1,future:u}=t;qa()&&ft(!1);let c=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:c,navigator:o,static:a,future:zu({v7_relativeSplatPath:!1},u)}),[c,u,o,a]);typeof i=="string"&&(i=ao(i));let{pathname:p="/",search:g="",hash:v="",state:T=null,key:C="default"}=i,k=j.useMemo(()=>{let V=j_(p,c);return V==null?null:{location:{pathname:V,search:g,hash:v,state:T,key:C},navigationType:r}},[c,p,g,v,T,C,r]);return k==null?null:j.createElement(ls.Provider,{value:f},j.createElement(gf.Provider,{children:n,value:k}))}function hb(t){let{children:e,location:n}=t;return QL(tg(e),n)}new Promise(()=>{});function tg(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(i,r)=>{if(!j.isValidElement(i))return;let o=[...e,r];if(i.type===j.Fragment){n.push.apply(n,tg(i.props.children,o));return}i.type!==Pr&&ft(!1),!i.props.index||!i.props.children||ft(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=tg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ng(){return ng=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ng.apply(this,arguments)}function db(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function fb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pb(t,e){return t.button===0&&(!e||e==="_self")&&!fb(t)}const mb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gb="6";try{window.__reactRouterVersion=gb}catch{}const _b="startTransition",r0=cR[_b];function yb(t){let{basename:e,children:n,future:i,window:r}=t,o=j.useRef();o.current==null&&(o.current=TL({window:r,v5Compat:!0}));let a=o.current,[u,c]=j.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},p=j.useCallback(g=>{f&&r0?r0(()=>c(g)):c(g)},[c,f]);return j.useLayoutEffect(()=>a.listen(p),[a,p]),j.useEffect(()=>ub(i),[i]),j.createElement(cb,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xt=j.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:c,to:f,preventScrollReset:p,viewTransition:g}=e,v=db(e,mb),{basename:T}=j.useContext(ls),C,k=!1;if(typeof f=="string"&&wb.test(f)&&(C=f,vb))try{let A=new URL(window.location.href),B=f.startsWith("//")?new URL(A.protocol+f):new URL(f),G=j_(B.pathname,T);B.origin===A.origin&&G!=null?f=G+B.search+B.hash:k=!0}catch{}let V=KL(f,{relative:r}),b=Tb(f,{replace:a,state:u,target:c,preventScrollReset:p,relative:r,viewTransition:g});function S(A){i&&i(A),A.defaultPrevented||b(A)}return j.createElement("a",ng({},v,{href:C||V,onClick:k||o?i:S,ref:n,target:c}))});var s0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(s0||(s0={}));var o0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(o0||(o0={}));function Tb(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,c=Ga(),f=lc(),p=tS(t,{relative:a});return j.useCallback(g=>{if(pb(g,n)){g.preventDefault();let v=i!==void 0?i:xd(f)===xd(p);c(t,{replace:v,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,c,p,i,r,n,t,o,a,u])}var a0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Eb=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},aS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,f=c?t[r+2]:0,p=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;c||(T=64,a||(v=64)),i.push(n[p],n[g],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Eb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new Pb;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const C=f<<6&192|g;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Pb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ib=function(t){const e=oS(t);return aS.encodeByteArray(e,!0)},Cd=function(t){return Ib(t).replace(/\./g,"")},lS=function(t){try{return aS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=()=>Sb().__FIREBASE_DEFAULTS__,Cb=()=>{if(typeof process>"u"||typeof a0>"u")return;const t=a0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ab=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lS(t[1]);return e&&JSON.parse(e)},_f=()=>{try{return xb()||Cb()||Ab()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uS=t=>{var e,n;return(n=(e=_f())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rb=t=>{const e=uS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},cS=()=>{var t;return(t=_f())===null||t===void 0?void 0:t.config},hS=t=>{var e;return(e=_f())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Cd(JSON.stringify(n)),Cd(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function Db(){var t;const e=(t=_f())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ob(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Vb(){return!Db()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fS(){try{return typeof indexedDB=="object"}catch{return!1}}function pS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function Fb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="FirebaseError";class ci extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=jb,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lo.prototype.create)}}class lo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Bb(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ci(r,u,i)}}function Bb(t,e){return t.replace(Ub,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Ub=/\{\$([^}]+)}/g;function zb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $u(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(l0(o)&&l0(a)){if(!$u(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function l0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Xl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $b(t,e){const n=new Wb(t,e);return n.subscribe.bind(n)}class Wb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Hb(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=bp),r.error===void 0&&(r.error=bp),r.complete===void 0&&(r.complete=bp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=1e3,Gb=2,Kb=4*60*60*1e3,Zb=.5;function u0(t,e=qb,n=Gb){const i=e*Math.pow(n,t),r=Math.round(Zb*i*(Math.random()-.5)*2);return Math.min(Kb,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new kb;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xb(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Yb(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yb(t){return t===Ls?void 0:t}function Xb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const eD={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},tD=ke.INFO,nD={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},iD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=nD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=tD,this._logHandler=iD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const rD=(t,e)=>e.some(n=>t instanceof n);let c0,h0;function sD(){return c0||(c0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oD(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mS=new WeakMap,ig=new WeakMap,gS=new WeakMap,Dp=new WeakMap,$_=new WeakMap;function aD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Gr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&mS.set(n,t)}).catch(()=>{}),$_.set(e,t),e}function lD(t){if(ig.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});ig.set(t,e)}let rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ig.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uD(t){rg=t(rg)}function cD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Mp(this),e,...n);return gS.set(i,e.sort?e.sort():[e]),Gr(i)}:oD().includes(t)?function(...e){return t.apply(Mp(this),e),Gr(mS.get(this))}:function(...e){return Gr(t.apply(Mp(this),e))}}function hD(t){return typeof t=="function"?cD(t):(t instanceof IDBTransaction&&lD(t),rD(t,sD())?new Proxy(t,rg):t)}function Gr(t){if(t instanceof IDBRequest)return aD(t);if(Dp.has(t))return Dp.get(t);const e=hD(t);return e!==t&&(Dp.set(t,e),$_.set(e,t)),e}const Mp=t=>$_.get(t);function _S(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Gr(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Gr(a.result),c.oldVersion,c.newVersion,Gr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const dD=["get","getKey","getAll","getAllKeys","count"],fD=["put","add","delete","clear"],Np=new Map;function d0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=fD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||dD.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&c.done]))[0]};return Np.set(e,o),o}uD(t=>({...t,get:(e,n,i)=>d0(e,n)||t.get(e,n,i),has:(e,n)=>!!d0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function mD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sg="@firebase/app",f0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new yf("@firebase/app"),gD="@firebase/app-compat",_D="@firebase/analytics-compat",yD="@firebase/analytics",vD="@firebase/app-check-compat",wD="@firebase/app-check",TD="@firebase/auth",ED="@firebase/auth-compat",PD="@firebase/database",ID="@firebase/data-connect",SD="@firebase/database-compat",xD="@firebase/functions",CD="@firebase/functions-compat",AD="@firebase/installations",RD="@firebase/installations-compat",kD="@firebase/messaging",LD="@firebase/messaging-compat",bD="@firebase/performance",DD="@firebase/performance-compat",MD="@firebase/remote-config",ND="@firebase/remote-config-compat",OD="@firebase/storage",VD="@firebase/storage-compat",FD="@firebase/firestore",jD="@firebase/vertexai-preview",BD="@firebase/firestore-compat",UD="firebase",zD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="[DEFAULT]",$D={[sg]:"fire-core",[gD]:"fire-core-compat",[yD]:"fire-analytics",[_D]:"fire-analytics-compat",[wD]:"fire-app-check",[vD]:"fire-app-check-compat",[TD]:"fire-auth",[ED]:"fire-auth-compat",[PD]:"fire-rtdb",[ID]:"fire-data-connect",[SD]:"fire-rtdb-compat",[xD]:"fire-fn",[CD]:"fire-fn-compat",[AD]:"fire-iid",[RD]:"fire-iid-compat",[kD]:"fire-fcm",[LD]:"fire-fcm-compat",[bD]:"fire-perf",[DD]:"fire-perf-compat",[MD]:"fire-rc",[ND]:"fire-rc-compat",[OD]:"fire-gcs",[VD]:"fire-gcs-compat",[FD]:"fire-fst",[BD]:"fire-fst-compat",[jD]:"fire-vertex","fire-js":"fire-js",[UD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Map,WD=new Map,ag=new Map;function p0(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ai(t){const e=t.name;if(ag.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;ag.set(e,t);for(const n of Ad.values())p0(n,t);for(const n of WD.values())p0(n,t);return!0}function uo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ni(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new lo("app","Firebase",HD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=zD;function yS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:og,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Kr.create("bad-app-name",{appName:String(r)});if(n||(n=cS()),!n)throw Kr.create("no-options");const o=Ad.get(r);if(o){if($u(n,o.options)&&$u(i,o.config))return o;throw Kr.create("duplicate-app",{appName:r})}const a=new Jb(r);for(const c of ag.values())a.addComponent(c);const u=new qD(n,i,a);return Ad.set(r,u),u}function W_(t=og){const e=Ad.get(t);if(!e&&t===og&&cS())return yS();if(!e)throw Kr.create("no-app",{appName:t});return e}function zn(t,e,n){var i;let r=(i=$D[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(u.join(" "));return}Ai(new li(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="firebase-heartbeat-database",KD=1,Wu="firebase-heartbeat-store";let Op=null;function vS(){return Op||(Op=_S(GD,KD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),Op}async function ZD(t){try{const n=(await vS()).transaction(Wu),i=await n.objectStore(Wu).get(wS(t));return await n.done,i}catch(e){if(e instanceof ci)rr.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function m0(t,e){try{const i=(await vS()).transaction(Wu,"readwrite");await i.objectStore(Wu).put(e,wS(t)),await i.done}catch(n){if(n instanceof ci)rr.warn(n.message);else{const i=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(i.message)}}}function wS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=1024,YD=30*24*60*60*1e3;class XD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=g0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=YD}),this._storage.overwrite(this._heartbeatsCache))}catch(i){rr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=g0(),{heartbeatsToSend:i,unsentEntries:r}=JD(this._heartbeatsCache.heartbeats),o=Cd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return rr.warn(n),""}}}function g0(){return new Date().toISOString().substring(0,10)}function JD(t,e=QD){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),_0(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class eM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fS()?pS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _0(t){return Cd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){Ai(new li("platform-logger",e=>new pD(e),"PRIVATE")),Ai(new li("heartbeat",e=>new XD(e),"PRIVATE")),zn(sg,f0,t),zn(sg,f0,"esm2017"),zn("fire-js","")}tM("");function H_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function TS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nM=TS,ES=new lo("auth","Firebase",TS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new yf("@firebase/auth");function iM(t,...e){Rd.logLevel<=ke.WARN&&Rd.warn(`Auth (${Ka}): ${t}`,...e)}function Hh(t,...e){Rd.logLevel<=ke.ERROR&&Rd.error(`Auth (${Ka}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw G_(t,...e)}function si(t,...e){return G_(t,...e)}function q_(t,e,n){const i=Object.assign(Object.assign({},nM()),{[e]:n});return new lo("auth","Firebase",i).create(e,{appName:t.name})}function Qi(t){return q_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rM(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&qn(t,"argument-error"),q_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function G_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return ES.create(t,...e)}function me(t,e,...n){if(!t)throw G_(e,...n)}function Hi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hh(e),new Error(e)}function sr(t,e){t||Hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sM(){return y0()==="http:"||y0()==="https:"}function y0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sM()||dS()||"connection"in navigator)?navigator.onLine:!0}function aM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=bb()||Nb()}get(){return oM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new cc(3e4,6e4);function cs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cr(t,e,n,i,r={}){return IS(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=uc(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:c},o);return Mb()||(f.referrerPolicy="no-referrer"),PS.fetch()(SS(t,t.config.apiHost,n,u),f)})}async function IS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},lM),e);try{const r=new hM(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Ih(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Ih(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Ih(t,"user-disabled",a);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw q_(t,p,f);qn(t,p)}}catch(r){if(r instanceof ci)throw r;qn(t,"network-request-failed",{message:String(r)})}}async function hc(t,e,n,i,r={}){const o=await cr(t,e,n,i,r);return"mfaPendingCredential"in o&&qn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function SS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?K_(t.config,r):`${t.config.apiScheme}://${r}`}function cM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(si(this.auth,"network-request-failed")),uM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ih(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=si(t,e,i);return r.customData._tokenResponse=n,r}function v0(t){return t!==void 0&&t.enterprise!==void 0}class dM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function fM(t,e){return cr(t,"GET","/v2/recaptchaConfig",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(t,e){return cr(t,"POST","/v1/accounts:delete",e)}async function xS(t,e){return cr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mM(t,e=!1){const n=lt(t),i=await n.getIdToken(e),r=Z_(i);me(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:pu(Vp(r.auth_time)),issuedAtTime:pu(Vp(r.iat)),expirationTime:pu(Vp(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vp(t){return Number(t)*1e3}function Z_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const r=lS(n);return r?JSON.parse(r):(Hh("Failed to decode base64 JWT payload"),null)}catch(r){return Hh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function w0(t){const e=Z_(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ci&&gM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function gM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Da(t,xS(n,{idToken:i}));me(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?CS(o.providerUserInfo):[],u=vM(t.providerData,a),c=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),p=c?f:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ug(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function yM(t){const e=lt(t);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vM(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function CS(t){return t.map(e=>{var{providerId:n}=e,i=H_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t,e){const n=await IS(t,{},async()=>{const i=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=SS(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",PS.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TM(t,e){return cr(t,"POST","/v2/accounts:revokeToken",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=w0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await wM(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ea;return i&&(me(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(me(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(me(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ea,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qi{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=H_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _M(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ug(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Da(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mM(this,e)}reload(){return yM(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(Qi(this.auth));const e=await this.getIdToken();return await Da(this,pM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,u,c,f,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,v=(r=n.email)!==null&&r!==void 0?r:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(u=n.tenantId)!==null&&u!==void 0?u:void 0,V=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(f=n.createdAt)!==null&&f!==void 0?f:void 0,S=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:A,emailVerified:B,isAnonymous:G,providerData:$,stsTokenManager:R}=n;me(A&&R,e,"internal-error");const I=Ea.fromJSON(this.name,R);me(typeof A=="string",e,"internal-error"),Er(g,e.name),Er(v,e.name),me(typeof B=="boolean",e,"internal-error"),me(typeof G=="boolean",e,"internal-error"),Er(T,e.name),Er(C,e.name),Er(k,e.name),Er(V,e.name),Er(b,e.name),Er(S,e.name);const D=new qi({uid:A,auth:e,email:v,emailVerified:B,displayName:g,isAnonymous:G,photoURL:C,phoneNumber:T,tenantId:k,stsTokenManager:I,createdAt:b,lastLoginAt:S});return $&&Array.isArray($)&&(D.providerData=$.map(M=>Object.assign({},M))),V&&(D._redirectEventId=V),D}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ea;r.updateFromServerResponse(n);const o=new qi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await kd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];me(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?CS(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ea;u.updateFromIdToken(i);const c=new qi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ug(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;function Gi(t){sr(t instanceof Function,"Expected a class definition");let e=T0.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}AS.type="NONE";const E0=AS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e,n){return`firebase:${t}:${e}:${n}`}class Pa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=qh(this.userKey,r.apiKey,o),this.fullPersistenceKey=qh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Pa(Gi(E0),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Gi(E0);const a=qh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(a);if(p){const g=qi._fromJSON(e,p);f!==o&&(u=g),o=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Pa(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Pa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MS(e))return"Blackberry";if(NS(e))return"Webos";if(kS(e))return"Safari";if((e.includes("chrome/")||LS(e))&&!e.includes("edge/"))return"Chrome";if(DS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function RS(t=Gt()){return/firefox\//i.test(t)}function kS(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LS(t=Gt()){return/crios\//i.test(t)}function bS(t=Gt()){return/iemobile/i.test(t)}function DS(t=Gt()){return/android/i.test(t)}function MS(t=Gt()){return/blackberry/i.test(t)}function NS(t=Gt()){return/webos/i.test(t)}function Q_(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EM(t=Gt()){var e;return Q_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PM(){return Ob()&&document.documentMode===10}function OS(t=Gt()){return Q_(t)||DS(t)||NS(t)||MS(t)||/windows phone/i.test(t)||bS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e=[]){let n;switch(t){case"Browser":n=P0(Gt());break;case"Worker":n=`${P0(Gt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ka}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t,e={}){return cr(t,"GET","/v2/passwordPolicy",cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=6;class CM{constructor(e){var n,i,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:xM,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I0(this),this.idTokenSubscription=new I0(this),this.beforeStateQueue=new IM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ES,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xS(this,{idToken:e}),i=await qi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ni(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(r=c.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(Qi(this));const n=e?lt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SM(this),n=new CM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await TM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gi(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hs(t){return lt(t)}class I0{constructor(e){this.auth=e,this.observer=null,this.addObserver=$b(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RM(t){vf=t}function FS(t){return vf.loadJS(t)}function kM(){return vf.recaptchaEnterpriseScript}function LM(){return vf.gapiScript}function bM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const DM="recaptcha-enterprise",MM="NO_RECAPTCHA";class NM{constructor(e){this.type=DM,this.auth=hs(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{fM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new dM(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(c=>{u(c)})})}function r(o,a,u){const c=window.grecaptcha;v0(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(MM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&v0(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=kM();c.length!==0&&(c+=u),FS(c).then(()=>{r(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function S0(t,e,n,i=!1){const r=new NM(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function cg(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await S0(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await S0(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t,e){const n=uo(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if($u(o,e??{}))return r;qn(r,"already-initialized")}return n.initialize({options:e})}function VM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function FM(t,e,n){const i=hs(t);me(i._canInitEmulator,i,"emulator-config-failed"),me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=jS(e),{host:a,port:u}=jM(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),BM()}function jS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jM(t){const e=jS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:x0(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:x0(a)}}}function x0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(e){return Hi("not implemented")}_linkToIdToken(e,n){return Hi("not implemented")}_getReauthenticationResolver(e){return Hi("not implemented")}}async function UM(t,e){return cr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){return hc(t,"POST","/v1/accounts:signInWithPassword",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}async function WM(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends Y_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Hu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Hu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,n,"signInWithPassword",zM);case"emailLink":return $M(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,i,"signUpPassword",UM);case"emailLink":return WM(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t,e){return hc(t,"POST","/v1/accounts:signInWithIdp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="http://localhost";class Xs extends Y_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=H_(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Xs(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ia(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ia(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ia(e,n)}buildRequest(){const e={requestUri:HM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GM(t){const e=Yl(Xl(t)).link,n=e?Yl(Xl(e)).deep_link_id:null,i=Yl(Xl(t)).deep_link_id;return(i?Yl(Xl(i)).link:null)||i||n||e||t}class X_{constructor(e){var n,i,r,o,a,u;const c=Yl(Xl(e)),f=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(i=c.oobCode)!==null&&i!==void 0?i:null,g=qM((r=c.mode)!==null&&r!==void 0?r:null);me(f&&p&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=p,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=GM(e);try{return new X_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.providerId=Za.PROVIDER_ID}static credential(e,n){return Hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=X_.parseLink(n);return me(i,"argument-error"),Hu._fromEmailAndCode(e,i.code,i.tenantId)}}Za.PROVIDER_ID="password";Za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends J_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends dc{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends dc{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends dc{constructor(){super("twitter.com")}static credential(e,n){return Xs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return br.credential(n,i)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return hc(t,"POST","/v1/accounts:signUp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await qi._fromIdTokenResponse(e,i,r),a=C0(i);return new Js({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=C0(i);return new Js({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function C0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends ci{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Ld(e,n,i,r)}}function BS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(t,o,e,i):o})}async function ZM(t,e,n=!1){const i=await Da(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Js._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(t,e,n=!1){const{auth:i}=t;if(ni(i.app))return Promise.reject(Qi(i));const r="reauthenticate";try{const o=await Da(t,BS(i,r,e,t),n);me(o.idToken,i,"internal-error");const a=Z_(o.idToken);me(a,i,"internal-error");const{sub:u}=a;return me(t.uid===u,i,"user-mismatch"),Js._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&qn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t,e,n=!1){if(ni(t.app))return Promise.reject(Qi(t));const i="signIn",r=await BS(t,i,e),o=await Js._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function YM(t,e){return US(hs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(t){const e=hs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $S(t,e,n){if(ni(t.app))return Promise.reject(Qi(t));const i=hs(t),a=await cg(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KM).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&zS(t),c}),u=await Js._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function XM(t,e,n){return ni(t.app)?Promise.reject(Qi(t)):YM(lt(t),Za.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&zS(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){return cr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=lt(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Da(i,JM(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const u=i.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function tN(t,e,n,i){return lt(t).onIdTokenChanged(e,n,i)}function nN(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function iN(t,e,n,i){return lt(t).onAuthStateChanged(e,n,i)}function WS(t){return lt(t).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=1e3,sN=10;class qS extends HS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);PM()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,sN):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},rN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qS.type="LOCAL";const oN=qS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS extends HS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GS.type="SESSION";const KS=GS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new wf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),c=await aN(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const f=ey("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(p),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function uN(t){Ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function cN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dN(){return ZS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebaseLocalStorageDb",fN=1,Dd="firebaseLocalStorage",YS="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tf(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function pN(){const t=indexedDB.deleteDatabase(QS);return new fc(t).toPromise()}function hg(){const t=indexedDB.open(QS,fN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Dd,{keyPath:YS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Dd)?e(i):(i.close(),await pN(),e(await hg()))})})}async function A0(t,e,n){const i=Tf(t,!0).put({[YS]:e,value:n});return new fc(i).toPromise()}async function mN(t,e){const n=Tf(t,!1).get(e),i=await new fc(n).toPromise();return i===void 0?null:i.value}function R0(t,e){const n=Tf(t,!0).delete(e);return new fc(n).toPromise()}const gN=800,_N=3;class XS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>_N)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance(dN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cN(),!this.activeServiceWorker)return;this.sender=new lN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await A0(e,bd,"1"),await R0(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>A0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>mN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Tf(r,!1).getAll();return new fc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XS.type="LOCAL";const yN=XS;new cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e){return e?Gi(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Y_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ia(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ia(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ia(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vN(t){return US(t.auth,new ty(t),t.bypassAuthState)}function wN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),QM(n,new ty(t),t.bypassAuthState)}async function TN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),ZM(n,new ty(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vN;case"linkViaPopup":case"linkViaRedirect":return TN;case"reauthViaPopup":case"reauthViaRedirect":return wN;default:qn(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new cc(2e3,1e4);async function tx(t,e,n){if(ni(t.app))return Promise.reject(si(t,"operation-not-supported-in-this-environment"));const i=hs(t);rM(t,e,J_);const r=JS(i,n);return new Fs(i,"signInViaPopup",e,r).executeNotNull()}class Fs extends ex{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EN.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="pendingRedirect",Gh=new Map;class IN extends ex{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Gh.get(this.auth._key());if(!e){try{const i=await SN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SN(t,e){const n=AN(e),i=CN(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function xN(t,e){Gh.set(t._key(),e)}function CN(t){return Gi(t._redirectPersistence)}function AN(t){return qh(PN,t.config.apiKey,t.name)}async function RN(t,e,n=!1){if(ni(t.app))return Promise.reject(Qi(t));const i=hs(t),r=JS(i,e),a=await new IN(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=10*60*1e3;class LN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!nx(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(si(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kN&&this.cachedEventUids.clear(),this.cachedEventUids.has(k0(e))}saveEventToCache(e){this.cachedEventUids.add(k0(e)),this.lastProcessedEventTime=Date.now()}}function k0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e={}){return cr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NN=/^https?/;async function ON(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DN(t);for(const n of e)try{if(VN(n))return}catch{}qn(t,"unauthorized-domain")}function VN(t){const e=lg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!NN.test(n))return!1;if(MN.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new cc(3e4,6e4);function L0(){const t=Ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jN(t){return new Promise((e,n)=>{var i,r,o;function a(){L0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L0(),n(si(t,"network-request-failed"))},timeout:FN.get()})}if(!((r=(i=Ii().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Ii().gapi)===null||o===void 0)&&o.load)a();else{const u=bM("iframefcb");return Ii()[u]=()=>{gapi.load?a():n(si(t,"network-request-failed"))},FS(`${LM()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Kh=null,e})}let Kh=null;function BN(t){return Kh=Kh||jN(t),Kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new cc(5e3,15e3),zN="__/auth/iframe",$N="emulator/auth/iframe",WN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qN(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?K_(e,$N):`https://${t.config.authDomain}/${zN}`,i={apiKey:e.apiKey,appName:t.name,v:Ka},r=HN.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${uc(i).slice(1)}`}async function GN(t){const e=await BN(t),n=Ii().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:qN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WN,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=si(t,"network-request-failed"),u=Ii().setTimeout(()=>{o(a)},UN.get());function c(){Ii().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZN=500,QN=600,YN="_blank",XN="http://localhost";class b0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JN(t,e,n,i=ZN,r=QN){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},KN),{width:i.toString(),height:r.toString(),top:o,left:a}),f=Gt().toLowerCase();n&&(u=LS(f)?YN:n),RS(f)&&(e=e||XN,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[T,C])=>`${v}${T}=${C},`,"");if(EM(f)&&u!=="_self")return eO(e||"",u),new b0(null);const g=window.open(e||"",u,p);me(g,t,"popup-blocked");try{g.focus()}catch{}return new b0(g)}function eO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="__/auth/handler",nO="emulator/auth/handler",iO=encodeURIComponent("fac");async function D0(t,e,n,i,r,o){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ka,eventId:r};if(e instanceof J_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",zb(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))a[p]=g}if(e instanceof dc){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),f=c?`#${iO}=${encodeURIComponent(c)}`:"";return`${rO(t)}?${uc(u).slice(1)}${f}`}function rO({config:t}){return t.emulator?K_(t,nO):`https://${t.authDomain}/${tO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="webStorageSupport";class sO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KS,this._completeRedirectFn=RN,this._overrideRedirectResult=xN}async _openPopup(e,n,i,r){var o;sr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await D0(e,n,i,lg(),r);return JN(e,a,ey())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await D0(e,n,i,lg(),r);return uN(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(sr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await GN(e),i=new LN(e);return n.register("authEvent",r=>(me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fp,{type:Fp},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Fp];a!==void 0&&n(!!a),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ON(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OS()||kS()||Q_()}}const oO=sO;var M0="@firebase/auth",N0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uO(t){Ai(new li("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;me(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VS(t)},f=new AM(i,r,o,c);return VM(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ai(new li("auth-internal",e=>{const n=hs(e.getProvider("auth").getImmediate());return(i=>new aO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(M0,N0,lO(t)),zn(M0,N0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=5*60,hO=hS("authIdTokenMaxAge")||cO;let O0=null;const dO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>hO)return;const r=n==null?void 0:n.token;O0!==r&&(O0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function fO(t=W_()){const e=uo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=OM(t,{popupRedirectResolver:oO,persistence:[yN,oN,KS]}),i=hS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=dO(o.toString());nN(n,a,()=>a(n.currentUser)),tN(n,u=>a(u))}}const r=uS("auth");return r&&FM(n,`http://${r}`),n}function pO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=si("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",pO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uO("Browser");var mO="firebase",gO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(mO,gO,"app");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,ix;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function D(){}D.prototype=I.prototype,R.D=I.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(M,F,U){for(var N=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)N[Te-2]=arguments[Te];return I.prototype[F].apply(M,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,D){D||(D=0);var M=Array(16);if(typeof I=="string")for(var F=0;16>F;++F)M[F]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(F=0;16>F;++F)M[F]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=R.g[0],D=R.g[1],F=R.g[2];var U=R.g[3],N=I+(U^D&(F^U))+M[0]+3614090360&4294967295;I=D+(N<<7&4294967295|N>>>25),N=U+(F^I&(D^F))+M[1]+3905402710&4294967295,U=I+(N<<12&4294967295|N>>>20),N=F+(D^U&(I^D))+M[2]+606105819&4294967295,F=U+(N<<17&4294967295|N>>>15),N=D+(I^F&(U^I))+M[3]+3250441966&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(U^D&(F^U))+M[4]+4118548399&4294967295,I=D+(N<<7&4294967295|N>>>25),N=U+(F^I&(D^F))+M[5]+1200080426&4294967295,U=I+(N<<12&4294967295|N>>>20),N=F+(D^U&(I^D))+M[6]+2821735955&4294967295,F=U+(N<<17&4294967295|N>>>15),N=D+(I^F&(U^I))+M[7]+4249261313&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(U^D&(F^U))+M[8]+1770035416&4294967295,I=D+(N<<7&4294967295|N>>>25),N=U+(F^I&(D^F))+M[9]+2336552879&4294967295,U=I+(N<<12&4294967295|N>>>20),N=F+(D^U&(I^D))+M[10]+4294925233&4294967295,F=U+(N<<17&4294967295|N>>>15),N=D+(I^F&(U^I))+M[11]+2304563134&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(U^D&(F^U))+M[12]+1804603682&4294967295,I=D+(N<<7&4294967295|N>>>25),N=U+(F^I&(D^F))+M[13]+4254626195&4294967295,U=I+(N<<12&4294967295|N>>>20),N=F+(D^U&(I^D))+M[14]+2792965006&4294967295,F=U+(N<<17&4294967295|N>>>15),N=D+(I^F&(U^I))+M[15]+1236535329&4294967295,D=F+(N<<22&4294967295|N>>>10),N=I+(F^U&(D^F))+M[1]+4129170786&4294967295,I=D+(N<<5&4294967295|N>>>27),N=U+(D^F&(I^D))+M[6]+3225465664&4294967295,U=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(U^I))+M[11]+643717713&4294967295,F=U+(N<<14&4294967295|N>>>18),N=D+(U^I&(F^U))+M[0]+3921069994&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(F^U&(D^F))+M[5]+3593408605&4294967295,I=D+(N<<5&4294967295|N>>>27),N=U+(D^F&(I^D))+M[10]+38016083&4294967295,U=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(U^I))+M[15]+3634488961&4294967295,F=U+(N<<14&4294967295|N>>>18),N=D+(U^I&(F^U))+M[4]+3889429448&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(F^U&(D^F))+M[9]+568446438&4294967295,I=D+(N<<5&4294967295|N>>>27),N=U+(D^F&(I^D))+M[14]+3275163606&4294967295,U=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(U^I))+M[3]+4107603335&4294967295,F=U+(N<<14&4294967295|N>>>18),N=D+(U^I&(F^U))+M[8]+1163531501&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(F^U&(D^F))+M[13]+2850285829&4294967295,I=D+(N<<5&4294967295|N>>>27),N=U+(D^F&(I^D))+M[2]+4243563512&4294967295,U=I+(N<<9&4294967295|N>>>23),N=F+(I^D&(U^I))+M[7]+1735328473&4294967295,F=U+(N<<14&4294967295|N>>>18),N=D+(U^I&(F^U))+M[12]+2368359562&4294967295,D=F+(N<<20&4294967295|N>>>12),N=I+(D^F^U)+M[5]+4294588738&4294967295,I=D+(N<<4&4294967295|N>>>28),N=U+(I^D^F)+M[8]+2272392833&4294967295,U=I+(N<<11&4294967295|N>>>21),N=F+(U^I^D)+M[11]+1839030562&4294967295,F=U+(N<<16&4294967295|N>>>16),N=D+(F^U^I)+M[14]+4259657740&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(D^F^U)+M[1]+2763975236&4294967295,I=D+(N<<4&4294967295|N>>>28),N=U+(I^D^F)+M[4]+1272893353&4294967295,U=I+(N<<11&4294967295|N>>>21),N=F+(U^I^D)+M[7]+4139469664&4294967295,F=U+(N<<16&4294967295|N>>>16),N=D+(F^U^I)+M[10]+3200236656&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(D^F^U)+M[13]+681279174&4294967295,I=D+(N<<4&4294967295|N>>>28),N=U+(I^D^F)+M[0]+3936430074&4294967295,U=I+(N<<11&4294967295|N>>>21),N=F+(U^I^D)+M[3]+3572445317&4294967295,F=U+(N<<16&4294967295|N>>>16),N=D+(F^U^I)+M[6]+76029189&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(D^F^U)+M[9]+3654602809&4294967295,I=D+(N<<4&4294967295|N>>>28),N=U+(I^D^F)+M[12]+3873151461&4294967295,U=I+(N<<11&4294967295|N>>>21),N=F+(U^I^D)+M[15]+530742520&4294967295,F=U+(N<<16&4294967295|N>>>16),N=D+(F^U^I)+M[2]+3299628645&4294967295,D=F+(N<<23&4294967295|N>>>9),N=I+(F^(D|~U))+M[0]+4096336452&4294967295,I=D+(N<<6&4294967295|N>>>26),N=U+(D^(I|~F))+M[7]+1126891415&4294967295,U=I+(N<<10&4294967295|N>>>22),N=F+(I^(U|~D))+M[14]+2878612391&4294967295,F=U+(N<<15&4294967295|N>>>17),N=D+(U^(F|~I))+M[5]+4237533241&4294967295,D=F+(N<<21&4294967295|N>>>11),N=I+(F^(D|~U))+M[12]+1700485571&4294967295,I=D+(N<<6&4294967295|N>>>26),N=U+(D^(I|~F))+M[3]+2399980690&4294967295,U=I+(N<<10&4294967295|N>>>22),N=F+(I^(U|~D))+M[10]+4293915773&4294967295,F=U+(N<<15&4294967295|N>>>17),N=D+(U^(F|~I))+M[1]+2240044497&4294967295,D=F+(N<<21&4294967295|N>>>11),N=I+(F^(D|~U))+M[8]+1873313359&4294967295,I=D+(N<<6&4294967295|N>>>26),N=U+(D^(I|~F))+M[15]+4264355552&4294967295,U=I+(N<<10&4294967295|N>>>22),N=F+(I^(U|~D))+M[6]+2734768916&4294967295,F=U+(N<<15&4294967295|N>>>17),N=D+(U^(F|~I))+M[13]+1309151649&4294967295,D=F+(N<<21&4294967295|N>>>11),N=I+(F^(D|~U))+M[4]+4149444226&4294967295,I=D+(N<<6&4294967295|N>>>26),N=U+(D^(I|~F))+M[11]+3174756917&4294967295,U=I+(N<<10&4294967295|N>>>22),N=F+(I^(U|~D))+M[2]+718787259&4294967295,F=U+(N<<15&4294967295|N>>>17),N=D+(U^(F|~I))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(F+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+U&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var D=I-this.blockSize,M=this.B,F=this.h,U=0;U<I;){if(F==0)for(;U<=D;)r(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<I;)if(M[F++]=R.charCodeAt(U++),F==this.blockSize){r(this,M),F=0;break}}else for(;U<I;)if(M[F++]=R[U++],F==this.blockSize){r(this,M),F=0;break}}this.h=F,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var D=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=D&255,D/=256;for(this.u(R),R=Array(16),I=D=0;4>I;++I)for(var M=0;32>M;M+=8)R[D++]=this.g[I]>>>M&255;return R};function o(R,I){var D=u;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=I(R)}function a(R,I){this.h=I;for(var D=[],M=!0,F=R.length-1;0<=F;F--){var U=R[F]|0;M&&U==I||(D[F]=U,M=!1)}this.g=D}var u={};function c(R){return-128<=R&&128>R?o(R,function(I){return new a([I|0],0>I?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(0>R)return V(f(-R));for(var I=[],D=1,M=0;R>=D;M++)I[M]=R/D|0,D*=4294967296;return new a(I,0)}function p(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return V(p(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(I,8)),M=g,F=0;F<R.length;F+=8){var U=Math.min(8,R.length-F),N=parseInt(R.substring(F,F+U),I);8>U?(U=f(Math.pow(I,U)),M=M.j(U).add(f(N))):(M=M.j(D),M=M.add(f(N)))}return M}var g=c(0),v=c(1),T=c(16777216);t=a.prototype,t.m=function(){if(k(this))return-V(this).m();for(var R=0,I=1,D=0;D<this.g.length;D++){var M=this.i(D);R+=(0<=M?M:4294967296+M)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(k(this))return"-"+V(this).toString(R);for(var I=f(Math.pow(R,6)),D=this,M="";;){var F=B(D,I).g;D=b(D,F.j(I));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=F,C(D))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=b(this,R),k(R)?-1:C(R)?0:1};function V(R){for(var I=R.g.length,D=[],M=0;M<I;M++)D[M]=~R.g[M];return new a(D,~R.h).add(v)}t.abs=function(){return k(this)?V(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0,F=0;F<=I;F++){var U=M+(this.i(F)&65535)+(R.i(F)&65535),N=(U>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);M=N>>>16,U&=65535,N&=65535,D[F]=N<<16|U}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(R,I){return R.add(V(I))}t.j=function(R){if(C(this)||C(R))return g;if(k(this))return k(R)?V(this).j(V(R)):V(V(this).j(R));if(k(R))return V(this.j(V(R)));if(0>this.l(T)&&0>R.l(T))return f(this.m()*R.m());for(var I=this.g.length+R.g.length,D=[],M=0;M<2*I;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(var F=0;F<R.g.length;F++){var U=this.i(M)>>>16,N=this.i(M)&65535,Te=R.i(F)>>>16,ze=R.i(F)&65535;D[2*M+2*F]+=N*ze,S(D,2*M+2*F),D[2*M+2*F+1]+=U*ze,S(D,2*M+2*F+1),D[2*M+2*F+1]+=N*Te,S(D,2*M+2*F+1),D[2*M+2*F+2]+=U*Te,S(D,2*M+2*F+2)}for(M=0;M<I;M++)D[M]=D[2*M+1]<<16|D[2*M];for(M=I;M<2*I;M++)D[M]=0;return new a(D,0)};function S(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function A(R,I){this.g=R,this.h=I}function B(R,I){if(C(I))throw Error("division by zero");if(C(R))return new A(g,g);if(k(R))return I=B(V(R),I),new A(V(I.g),V(I.h));if(k(I))return I=B(R,V(I)),new A(V(I.g),I.h);if(30<R.g.length){if(k(R)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var D=v,M=I;0>=M.l(R);)D=G(D),M=G(M);var F=$(D,1),U=$(M,1);for(M=$(M,2),D=$(D,2);!C(M);){var N=U.add(M);0>=N.l(R)&&(F=F.add(D),U=N),M=$(M,1),D=$(D,1)}return I=b(R,F.j(I)),new A(F,I)}for(F=g;0<=R.l(I);){for(D=Math.max(1,Math.floor(R.m()/I.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=f(D),N=U.j(I);k(N)||0<N.l(R);)D-=M,U=f(D),N=U.j(I);C(U)&&(U=v),F=F.add(U),R=b(R,N)}return new A(F,R)}t.A=function(R){return B(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)&R.i(M);return new a(D,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)|R.i(M);return new a(D,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)^R.i(M);return new a(D,this.h^R.h)};function G(R){for(var I=R.g.length+1,D=[],M=0;M<I;M++)D[M]=R.i(M)<<1|R.i(M-1)>>>31;return new a(D,R.h)}function $(R,I){var D=I>>5;I%=32;for(var M=R.g.length-D,F=[],U=0;U<M;U++)F[U]=0<I?R.i(U+D)>>>I|R.i(U+D+1)<<32-I:R.i(U+D);return new a(F,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ix=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,Ws=a}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rx,Jl,sx,Zh,dg,ox,ax,lx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,w){return h==Array.prototype||h==Object.prototype||(h[_]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(h,_){if(_)e:{var w=i;h=h.split(".");for(var x=0;x<h.length-1;x++){var z=h[x];if(!(z in w))break e;w=w[z]}h=h[h.length-1],x=w[h],_=_(x),_!=x&&_!=null&&e(w,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var w=0,x=!1,z={next:function(){if(!x&&w<h.length){var q=w++;return{value:_(q,h[q]),done:!1}}return x=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(h){return h||function(){return o(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function p(h,_,w){return h.call.apply(h.bind,arguments)}function g(h,_,w){if(!h)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,x),h.apply(_,z)}}return function(){return h.apply(_,arguments)}}function v(h,_,w){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function T(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var x=w.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function C(h,_){function w(){}w.prototype=_.prototype,h.aa=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(x,z,q){for(var ee=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ee[Oe-2]=arguments[Oe];return _.prototype[z].apply(x,ee)}}function k(h){const _=h.length;if(0<_){const w=Array(_);for(let x=0;x<_;x++)w[x]=h[x];return w}return[]}function V(h,_){for(let w=1;w<arguments.length;w++){const x=arguments[w];if(c(x)){const z=h.length||0,q=x.length||0;h.length=z+q;for(let ee=0;ee<q;ee++)h[z+ee]=x[ee]}else h.push(x)}}class b{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function S(h){return/^[\s\xa0]*$/.test(h)}function A(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function B(h){return B[" "](h),h}B[" "]=function(){};var G=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function $(h,_,w){for(const x in h)_.call(w,h[x],x,h)}function R(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function I(h){const _={};for(const w in h)_[w]=h[w];return _}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,_){let w,x;for(let z=1;z<arguments.length;z++){x=arguments[z];for(w in x)h[w]=x[w];for(let q=0;q<D.length;q++)w=D[q],Object.prototype.hasOwnProperty.call(x,w)&&(h[w]=x[w])}}function F(h){var _=1;h=h.split(":");const w=[];for(;0<_&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function U(h){u.setTimeout(()=>{throw h},0)}function N(){var h=ae;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Te{constructor(){this.h=this.g=null}add(_,w){const x=ze.get();x.set(_,w),this.h?this.h.next=x:this.g=x,this.h=x}}var ze=new b(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,K=!1,ae=new Te,J=()=>{const h=u.Promise.resolve(void 0);Ke=()=>{h.then(te)}};var te=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(w){U(w)}var _=ze;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}K=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};u.addEventListener("test",w,_),u.removeEventListener("test",w,_)}catch{}return h}();function Ee(h,_){if(Pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(G){e:{try{B(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement);this.relatedTarget=_,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ee.aa.h.call(this)}}C(Ee,Pe);var ce={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),Cn=0;function hr(h,_,w,x,z){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!x,this.ha=z,this.key=++Cn,this.da=this.fa=!1}function pn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ft(h){this.src=h,this.g={},this.h=0}Ft.prototype.add=function(h,_,w,x,z){var q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);var ee=ps(h,_,x,z);return-1<ee?(_=h[ee],w||(_.fa=!1)):(_=new hr(_,this.src,q,!!x,z),_.fa=w,h.push(_)),_};function hi(h,_){var w=_.type;if(w in h.g){var x=h.g[w],z=Array.prototype.indexOf.call(x,_,void 0),q;(q=0<=z)&&Array.prototype.splice.call(x,z,1),q&&(pn(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function ps(h,_,w,x){for(var z=0;z<h.length;++z){var q=h[z];if(!q.da&&q.listener==_&&q.capture==!!w&&q.ha==x)return z}return-1}var el="closure_lm_"+(1e6*Math.random()|0),_o={};function tl(h,_,w,x,z){if(Array.isArray(_)){for(var q=0;q<_.length;q++)tl(h,_[q],w,x,z);return null}return w=Ac(w),h&&h[st]?h.K(_,w,f(x)?!!x.capture:!1,z):nl(h,_,w,!1,x,z)}function nl(h,_,w,x,z,q){if(!_)throw Error("Invalid event type");var ee=f(z)?!!z.capture:!!z,Oe=To(h);if(Oe||(h[el]=Oe=new Ft(h)),w=Oe.add(_,w,x,ee,q),w.proxy)return w;if(x=yo(),w.proxy=x,x.src=h,x.listener=w,h.addEventListener)De||(z=ee),z===void 0&&(z=!1),h.addEventListener(_.toString(),x,z);else if(h.attachEvent)h.attachEvent(wo(_.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return w}function yo(){function h(w){return _.call(h.src,h.listener,w)}const _=Cc;return h}function xc(h,_,w,x,z){if(Array.isArray(_))for(var q=0;q<_.length;q++)xc(h,_[q],w,x,z);else x=f(x)?!!x.capture:!!x,w=Ac(w),h&&h[st]?(h=h.i,_=String(_).toString(),_ in h.g&&(q=h.g[_],w=ps(q,w,x,z),-1<w&&(pn(q[w]),Array.prototype.splice.call(q,w,1),q.length==0&&(delete h.g[_],h.h--)))):h&&(h=To(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ps(_,w,x,z)),(w=-1<h?_[h]:null)&&vo(w))}function vo(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[st])hi(_.i,h);else{var w=h.type,x=h.proxy;_.removeEventListener?_.removeEventListener(w,x,h.capture):_.detachEvent?_.detachEvent(wo(w),x):_.addListener&&_.removeListener&&_.removeListener(x),(w=To(_))?(hi(w,h),w.h==0&&(w.src=null,_[el]=null)):pn(h)}}}function wo(h){return h in _o?_o[h]:_o[h]="on"+h}function Cc(h,_){if(h.da)h=!0;else{_=new Ee(_,this);var w=h.listener,x=h.ha||h.src;h.fa&&vo(h),h=w.call(x,_)}return h}function To(h){return h=h[el],h instanceof Ft?h:null}var il="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ac(h){return typeof h=="function"?h:(h[il]||(h[il]=function(_){return h.handleEvent(_)}),h[il])}function pt(){pe.call(this),this.i=new Ft(this),this.M=this,this.F=null}C(pt,pe),pt.prototype[st]=!0,pt.prototype.removeEventListener=function(h,_,w,x){xc(this,h,_,w,x)};function It(h,_){var w,x=h.F;if(x)for(w=[];x;x=x.F)w.push(x);if(h=h.M,x=_.type||_,typeof _=="string")_=new Pe(_,h);else if(_ instanceof Pe)_.target=_.target||h;else{var z=_;_=new Pe(x,h),M(_,z)}if(z=!0,w)for(var q=w.length-1;0<=q;q--){var ee=_.g=w[q];z=ms(ee,x,!0,_)&&z}if(ee=_.g=h,z=ms(ee,x,!0,_)&&z,z=ms(ee,x,!1,_)&&z,w)for(q=0;q<w.length;q++)ee=_.g=w[q],z=ms(ee,x,!1,_)&&z}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var w=h.g[_],x=0;x<w.length;x++)pn(w[x]);delete h.g[_],h.h--}}this.F=null},pt.prototype.K=function(h,_,w,x){return this.i.add(String(h),_,!1,w,x)},pt.prototype.L=function(h,_,w,x){return this.i.add(String(h),_,!0,w,x)};function ms(h,_,w,x){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var z=!0,q=0;q<_.length;++q){var ee=_[q];if(ee&&!ee.da&&ee.capture==w){var Oe=ee.listener,mt=ee.ha||ee.src;ee.fa&&hi(h.i,ee),z=Oe.call(mt,x)!==!1&&z}}return z&&!x.defaultPrevented}function Rc(h,_,w){if(typeof h=="function")w&&(h=v(h,w));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(h,_||0)}function rl(h){h.g=Rc(()=>{h.g=null,h.i&&(h.i=!1,rl(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class kc extends pe{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:rl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(h){pe.call(this),this.h=h,this.g={}}C(gs,pe);var sl=[];function Eo(h){$(h.g,function(_,w){this.g.hasOwnProperty(w)&&vo(_)},h),h.g={}}gs.prototype.N=function(){gs.aa.N.call(this),Eo(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Po=u.JSON.stringify,Yf=u.JSON.parse,_s=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function ol(){}ol.prototype.h=null;function Lc(h){return h.h||(h.h=h.i())}function al(){}var dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Io(){Pe.call(this,"d")}C(Io,Pe);function ll(){Pe.call(this,"c")}C(ll,Pe);var ki={},bc=null;function So(){return bc=bc||new pt}ki.La="serverreachability";function Dc(h){Pe.call(this,ki.La,h)}C(Dc,Pe);function ys(h){const _=So();It(_,new Dc(_))}ki.STAT_EVENT="statevent";function xo(h,_){Pe.call(this,ki.STAT_EVENT,h),this.stat=_}C(xo,Pe);function kt(h){const _=So();It(_,new xo(_,h))}ki.Ma="timingevent";function Mc(h,_){Pe.call(this,ki.Ma,h),this.size=_}C(Mc,Pe);function vs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function An(h,_,w,x,z,q){h.info(function(){if(h.g)if(q)for(var ee="",Oe=q.split("&"),mt=0;mt<Oe.length;mt++){var Le=Oe[mt].split("=");if(1<Le.length){var Be=Le[0];Le=Le[1];var Je=Be.split("_");ee=2<=Je.length&&Je[1]=="type"?ee+(Be+"="+Le+"&"):ee+(Be+"=redacted&")}}else ee=null;else ee=q;return"XMLHTTP REQ ("+x+") [attempt "+z+"]: "+_+`
`+w+`
`+ee})}function oe(h,_,w,x,z,q,ee){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+z+"]: "+_+`
`+w+`
`+q+" "+ee})}function Li(h,_,w,x){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Oc(h,w)+(x?" "+x:"")})}function Nc(h,_){h.info(function(){return"TIMEOUT: "+_})}ws.prototype.info=function(){};function Oc(h,_){if(!h.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var x=w[h];if(!(2>x.length)){var z=x[1];if(Array.isArray(z)&&!(1>z.length)){var q=z[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ee=1;ee<z.length;ee++)z[ee]=""}}}}return Po(w)}catch{return _}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Co={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ao;function Gn(){}C(Gn,ol),Gn.prototype.g=function(){return new XMLHttpRequest},Gn.prototype.i=function(){return{}},Ao=new Gn;function Kn(h,_,w,x){this.j=h,this.i=_,this.l=w,this.R=x||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vc}function Vc(){this.i=null,this.g="",this.h=!1}var Fc={},ul={};function cl(h,_,w){h.L=1,h.v=kn(ot(_)),h.m=w,h.P=!0,hl(h,null)}function hl(h,_){h.F=Date.now(),ko(h),h.A=ot(h.v);var w=h.A,x=h.R;Array.isArray(x)||(x=[String(x)]),Uc(w.i,"t",x),h.C=0,w=h.j.J,h.h=new Vc,h.g=Kc(h.j,w?_:null,!h.m),0<h.O&&(h.M=new kc(v(h.Y,h,h.g),h.O)),_=h.U,w=h.g,x=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(sl[0]=z.toString()),z=sl);for(var q=0;q<z.length;q++){var ee=tl(w,z[q],x||_.handleEvent,!1,_.h||_);if(!ee)break;_.g[ee.key]=ee}_=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),ys(),An(h.i,h.u,h.A,h.l,h.R,h.m)}Kn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Kt(h)==3?_.j():this.Y(h)},Kn.prototype.Y=function(h){try{if(h==this.g)e:{const Je=Kt(this.g);var _=this.g.Ba();const vr=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Cl(this.g)))){this.J||Je!=4||_==7||(_==8||0>=vr?ys(3):ys(2)),dl(this);var w=this.g.Z();this.X=w;t:if(jc(this)){var x=Cl(this.g);h="";var z=x.length,q=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bi(this),Es(this);var ee="";break t}this.h.i=new u.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,h+=this.h.i.decode(x[_],{stream:!(q&&_==z-1)});x.length=0,this.h.g+=h,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=w==200,oe(this.i,this.u,this.A,this.l,this.R,Je,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,mt=this.g;if((Oe=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Oe)){var Le=Oe;break t}}Le=null}if(w=Le)Li(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ps(this,w);else{this.o=!1,this.s=3,kt(12),bi(this),Es(this);break e}}if(this.P){w=!0;let ut;for(;!this.J&&this.C<ee.length;)if(ut=Ro(this,ee),ut==ul){Je==4&&(this.s=4,kt(14),w=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==Fc){this.s=4,kt(15),Li(this.i,this.l,ee,"[Invalid Chunk]"),w=!1;break}else Li(this.i,this.l,ut,null),Ps(this,ut);if(jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||ee.length!=0||this.h.h||(this.s=1,kt(16),w=!1),this.o=this.o&&w,!w)Li(this.i,this.l,ee,"[Invalid Chunked Response]"),bi(this),Es(this);else if(0<ee.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),jo(Be),Be.M=!0,kt(11))}}else Li(this.i,this.l,ee,null),Ps(this,ee);Je==4&&bi(this),this.o&&!this.J&&(Je==4?Rl(this.j,this):(this.o=!1,ko(this)))}else Xf(this.g),w==400&&0<ee.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),bi(this),Es(this)}}}catch{}finally{}};function jc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ro(h,_){var w=h.C,x=_.indexOf(`
`,w);return x==-1?ul:(w=Number(_.substring(w,x)),isNaN(w)?Fc:(x+=1,x+w>_.length?ul:(_=_.slice(x,x+w),h.C=x+w,_)))}Kn.prototype.cancel=function(){this.J=!0,bi(this)};function ko(h){h.S=Date.now()+h.I,Bc(h,h.I)}function Bc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=vs(v(h.ba,h),_)}function dl(h){h.B&&(u.clearTimeout(h.B),h.B=null)}Kn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Nc(this.i,this.A),this.L!=2&&(ys(),kt(17)),bi(this),this.s=2,Es(this)):Bc(this,this.S-h)};function Es(h){h.j.G==0||h.J||Rl(h.j,h)}function bi(h){dl(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Eo(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Ps(h,_){try{var w=h.j;if(w.G!=0&&(w.g==h||Ae(w.h,h))){if(!h.K&&Ae(w.h,h)&&w.G==3){try{var x=w.Da.g.parse(_)}catch{x=null}if(Array.isArray(x)&&x.length==3){var z=x;if(z[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Uo(w),Vo(w);else break e;Fo(w),kt(18)}}else w.za=z[1],0<w.za-w.T&&37500>z[2]&&w.F&&w.v==0&&!w.C&&(w.C=vs(v(w.Za,w),6e3));if(1>=fr(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Vi(w,11)}else if((h.K||w.g==h)&&Uo(w),!S(_))for(z=w.Da.g.parse(_),_=0;_<z.length;_++){let Le=z[_];if(w.T=Le[0],Le=Le[1],w.G==2)if(Le[0]=="c"){w.K=Le[1],w.ia=Le[2];const Be=Le[3];Be!=null&&(w.la=Be,w.j.info("VER="+w.la));const Je=Le[4];Je!=null&&(w.Aa=Je,w.j.info("SVER="+w.Aa));const vr=Le[5];vr!=null&&typeof vr=="number"&&0<vr&&(x=1.5*vr,w.L=x,w.j.info("backChannelRequestTimeoutMs_="+x)),x=w;const ut=h.g;if(ut){const $o=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var q=x.h;q.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ue(q,q.h),q.h=null))}if(x.D){const pi=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;pi&&(x.ya=pi,ge(x.I,x.D,pi))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),x=w;var ee=h;if(x.qa=zo(x,x.J?x.ia:null,x.W),ee.K){Ss(x.h,ee);var Oe=ee,mt=x.L;mt&&(Oe.I=mt),Oe.B&&(dl(Oe),ko(Oe)),x.g=ee}else Yn(x);0<w.i.length&&yr(w)}else Le[0]!="stop"&&Le[0]!="close"||Vi(w,7);else w.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Vi(w,7):Oo(w):Le[0]!="noop"&&w.l&&w.l.ta(Le),w.v=0)}}ys(4)}catch{}}var Is=class{constructor(h,_){this.g=h,this.map=_}};function fl(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fr(h){return h.h?1:h.g?h.g.size:0}function Ae(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ue(h,_){h.g?h.g.add(_):h.h=_}function Ss(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}fl.prototype.cancel=function(){if(this.i=Di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Di(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.D);return _}return k(h.i)}function pr(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var _=[],w=h.length,x=0;x<w;x++)_.push(h[x]);return _}_=[],w=0;for(x in h)_[w++]=h[x];return _}function ml(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var _=[];h=h.length;for(var w=0;w<h;w++)_.push(w);return _}_=[],w=0;for(const x in h)_[w++]=x;return _}}}function we(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var w=ml(h),x=pr(h),z=x.length,q=0;q<z;q++)_.call(void 0,x[q],w&&w[q],h)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gl(h,_){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var x=h[w].indexOf("="),z=null;if(0<=x){var q=h[w].substring(0,x);z=h[w].substring(x+1)}else q=h[w];_(q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Rn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Rn){this.h=h.h,Lo(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.s),this.l=h.l;var _=h.i,w=new Ni;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),di(this,w),this.m=h.m}else h&&(_=String(h).match(Ze))?(this.h=!1,Lo(this,_[1]||"",!0),this.o=Zn(_[2]||""),this.g=Zn(_[3]||"",!0),Mi(this,_[4]),this.l=Zn(_[5]||"",!0),di(this,_[6]||"",!0),this.m=Zn(_[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Rn.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Qn(_,mr,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Qn(_,mr,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Qn(w,w.charAt(0)=="/"?vl:yl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Qn(w,wl)),h.join("")};function ot(h){return new Rn(h)}function Lo(h,_,w){h.j=w?Zn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function di(h,_,w){_ instanceof Ni?(h.i=_,Ln(h.i,h.h)):(w||(_=Qn(_,bo)),h.i=new Ni(_,h.h))}function ge(h,_,w){h.i.set(_,w)}function kn(h){return ge(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Zn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qn(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,_l),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _l(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var mr=/[#\/\?@]/g,yl=/[#\?:]/g,vl=/[#\?]/g,bo=/[#\?@]/g,wl=/#/g;function Ni(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&gl(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}t=Ni.prototype,t.add=function(h,_){mn(this),this.i=null,h=he(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function Tl(h,_){mn(h),_=he(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Do(h,_){return mn(h),_=he(h,_),h.g.has(_)}t.forEach=function(h,_){mn(this),this.g.forEach(function(w,x){w.forEach(function(z){h.call(_,z,x,this)},this)},this)},t.na=function(){mn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let x=0;x<_.length;x++){const z=h[x];for(let q=0;q<z.length;q++)w.push(_[x])}return w},t.V=function(h){mn(this);let _=[];if(typeof h=="string")Do(this,h)&&(_=_.concat(this.g.get(he(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)_=_.concat(h[w])}return _},t.set=function(h,_){return mn(this),this.i=null,h=he(this,h),Do(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Uc(h,_,w){Tl(h,_),0<w.length&&(h.i=null,h.g.set(he(h,_),k(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var x=_[w];const q=encodeURIComponent(String(x)),ee=this.V(x);for(x=0;x<ee.length;x++){var z=q;ee[x]!==""&&(z+="="+encodeURIComponent(String(ee[x]))),h.push(z)}}return this.i=h.join("&")};function he(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ln(h,_){_&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(w,x){var z=x.toLowerCase();x!=z&&(Tl(this,x),Uc(this,z,w))},h)),h.j=_}function je(h,_){const w=new ws;if(u.Image){const x=new Image;x.onload=T(bn,w,"TestLoadImage: loaded",!0,_,x),x.onerror=T(bn,w,"TestLoadImage: error",!1,_,x),x.onabort=T(bn,w,"TestLoadImage: abort",!1,_,x),x.ontimeout=T(bn,w,"TestLoadImage: timeout",!1,_,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else _(!1)}function zc(h,_){const w=new ws,x=new AbortController,z=setTimeout(()=>{x.abort(),bn(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:x.signal}).then(q=>{clearTimeout(z),q.ok?bn(w,"TestPingServer: ok",!0,_):bn(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),bn(w,"TestPingServer: error",!1,_)})}function bn(h,_,w,x,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),x(w)}catch{}}function El(){this.g=new _s}function Pl(h,_,w){const x=w||"";try{we(h,function(z,q){let ee=z;f(z)&&(ee=Po(z)),_.push(x+q+"="+encodeURIComponent(ee))})}catch(z){throw _.push(x+"type="+encodeURIComponent("_badmap")),z}}function Dn(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Dn,ol),Dn.prototype.g=function(){return new gr(this.l,this.j)},Dn.prototype.i=function(h){return function(){return h}}({});function gr(h,_){pt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(gr,pt),t=gr.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,gn(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xe(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_r(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function _r(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Xe(this):gn(this),this.readyState==3&&_r(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Xe(this))},t.Qa=function(h){this.g&&(this.response=h,Xe(this))},t.ga=function(){this.g&&Xe(this)};function Xe(h){h.readyState=4,h.l=null,h.j=null,h.v=null,gn(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function gn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Il(h){let _="";return $(h,function(w,x){_+=x,_+=":",_+=w,_+=`\r
`}),_}function Mo(h,_,w){e:{for(x in w){var x=!1;break e}x=!0}x||(w=Il(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):ge(h,_,w))}function Qe(h){pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Qe,pt);var $c=/^https?$/i,Sl=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,w,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ao.g(),this.v=this.o?Lc(this.o):Lc(Ao),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(q){Wc(this,q);return}if(h=w||"",w=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var z in x)w.set(z,x[z]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const q of x.keys())w.set(q,x.get(q));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(w.keys()).find(q=>q.toLowerCase()=="content-type"),z=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Sl,_,void 0))||x||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ee]of w)this.g.setRequestHeader(q,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rn(this),this.u=!0,this.g.send(h),this.u=!1}catch(q){Wc(this,q)}};function Wc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,xl(h),No(h)}function xl(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,It(this,"complete"),It(this,"abort"),No(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),No(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xe(this):this.bb())},t.bb=function(){xe(this)};function xe(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Kt(h)!=4||h.Z()!=2)){if(h.u&&Kt(h)==4)Rc(h.Ea,0,h);else if(It(h,"readystatechange"),Kt(h)==4){h.h=!1;try{const ee=h.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var x;if(x=ee===0){var z=String(h.D).match(Ze)[1]||null;!z&&u.self&&u.self.location&&(z=u.self.location.protocol.slice(0,-1)),x=!$c.test(z?z.toLowerCase():"")}w=x}if(w)It(h,"complete"),It(h,"success");else{h.m=6;try{var q=2<Kt(h)?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.Z()+"]",xl(h)}}finally{No(h)}}}}function No(h,_){if(h.g){rn(h);const w=h.g,x=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||It(h,"ready");try{w.onreadystatechange=x}catch{}}}function rn(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Kt(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Yf(_)}};function Cl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Xf(h){const _={};h=(h.g&&2<=Kt(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(S(h[x]))continue;var w=F(h[x]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const q=_[z]||[];_[z]=q,q.push(w)}R(_,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function Hc(h){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oi("baseRetryDelayMs",5e3,h),this.cb=Oi("retryDelaySeedMs",1e4,h),this.Wa=Oi("forwardChannelMaxRetries",2,h),this.wa=Oi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new fl(h&&h.concurrentRequestLimit),this.Da=new El,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hc.prototype,t.la=8,t.G=1,t.connect=function(h,_,w,x){kt(0),this.W=h,this.H=_||{},w&&x!==void 0&&(this.H.OSID=w,this.H.OAID=x),this.F=this.X,this.I=zo(this,null,this.W),yr(this)};function Oo(h){if(qc(h),h.G==3){var _=h.U++,w=ot(h.I);if(ge(w,"SID",h.K),ge(w,"RID",_),ge(w,"TYPE","terminate"),xs(h,w),_=new Kn(h,h.j,_),_.L=2,_.v=kn(ot(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=_.v,w=!0),w||(_.g=Kc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ko(_)}Gc(h)}function Vo(h){h.g&&(jo(h),h.g.cancel(),h.g=null)}function qc(h){Vo(h),h.u&&(u.clearTimeout(h.u),h.u=null),Uo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function yr(h){if(!pl(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ke||J(),K||(Ke(),K=!0),ae.add(_,h),h.B=0}}function Jf(h,_){return fr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=vs(v(h.Ga,h,_),kl(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new Kn(this,this.j,h);let q=this.o;if(this.S&&(q?(q=I(q),M(q,this.S)):q=this.S),this.m!==null||this.O||(z.H=q,q=null),this.P)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var x=this.i[w];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(_+=x,4096<_){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=Al(this,z,_),w=ot(this.I),ge(w,"RID",h),ge(w,"CVER",22),this.D&&ge(w,"X-HTTP-Session-Id",this.D),xs(this,w),q&&(this.O?_="headers="+encodeURIComponent(String(Il(q)))+"&"+_:this.m&&Mo(w,this.m,q)),Ue(this.h,z),this.Ua&&ge(w,"TYPE","init"),this.P?(ge(w,"$req",_),ge(w,"SID","null"),z.T=!0,cl(z,w,null)):cl(z,w,_),this.G=2}}else this.G==3&&(h?_n(this,h):this.i.length==0||pl(this.h)||_n(this))};function _n(h,_){var w;_?w=_.l:w=h.U++;const x=ot(h.I);ge(x,"SID",h.K),ge(x,"RID",w),ge(x,"AID",h.T),xs(h,x),h.m&&h.o&&Mo(x,h.m,h.o),w=new Kn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Al(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ue(h.h,w),cl(w,x,_)}function xs(h,_){h.H&&$(h.H,function(w,x){ge(_,x,w)}),h.l&&we({},function(w,x){ge(_,x,w)})}function Al(h,_,w){w=Math.min(h.i.length,w);var x=h.l?v(h.l.Na,h.l,h):null;e:{var z=h.i;let q=-1;for(;;){const ee=["count="+w];q==-1?0<w?(q=z[0].g,ee.push("ofs="+q)):q=0:ee.push("ofs="+q);let Oe=!0;for(let mt=0;mt<w;mt++){let Le=z[mt].g;const Be=z[mt].map;if(Le-=q,0>Le)q=Math.max(0,z[mt].g-100),Oe=!1;else try{Pl(Be,ee,"req"+Le+"_")}catch{x&&x(Be)}}if(Oe){x=ee.join("&");break e}}}return h=h.i.splice(0,w),_.D=h,x}function Yn(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ke||J(),K||(Ke(),K=!0),ae.add(_,h),h.v=0}}function Fo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=vs(v(h.Fa,h),kl(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Bo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=vs(v(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Vo(this),Bo(this))};function jo(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Bo(h){h.g=new Kn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=ot(h.qa);ge(_,"RID","rpc"),ge(_,"SID",h.K),ge(_,"AID",h.T),ge(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&ge(_,"TO",h.ja),ge(_,"TYPE","xmlhttp"),xs(h,_),h.m&&h.o&&Mo(_,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=kn(ot(_)),w.m=null,w.P=!0,hl(w,h)}t.Za=function(){this.C!=null&&(this.C=null,Vo(this),Fo(this),kt(19))};function Uo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Rl(h,_){var w=null;if(h.g==_){Uo(h),jo(h),h.g=null;var x=2}else if(Ae(h.h,_))w=_.D,Ss(h.h,_),x=1;else return;if(h.G!=0){if(_.o)if(x==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var z=h.B;x=So(),It(x,new Mc(x,w)),yr(h)}else Yn(h);else if(z=_.s,z==3||z==0&&0<_.X||!(x==1&&Jf(h,_)||x==2&&Fo(h)))switch(w&&0<w.length&&(_=h.h,_.i=_.i.concat(w)),z){case 1:Vi(h,5);break;case 4:Vi(h,10);break;case 3:Vi(h,6);break;default:Vi(h,2)}}}function kl(h,_){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*_}function Vi(h,_){if(h.j.info("Error code "+_),_==2){var w=v(h.fb,h),x=h.Xa;const z=!x;x=new Rn(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Lo(x,"https"),kn(x),z?je(x.toString(),w):zc(x.toString(),w)}else kt(2);h.G=0,h.l&&h.l.sa(_),Gc(h),qc(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Gc(h){if(h.G=0,h.ka=[],h.l){const _=Di(h.h);(_.length!=0||h.i.length!=0)&&(V(h.ka,_),V(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function zo(h,_,w){var x=w instanceof Rn?ot(w):new Rn(w);if(x.g!="")_&&(x.g=_+"."+x.g),Mi(x,x.s);else{var z=u.location;x=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var q=new Rn(null);x&&Lo(q,x),_&&(q.g=_),z&&Mi(q,z),w&&(q.l=w),x=q}return w=h.D,_=h.ya,w&&_&&ge(x,w,_),ge(x,"VER",h.la),xs(h,x),x}function Kc(h,_,w){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Qe(new Dn({eb:w})):new Qe(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ll(){}t=Ll.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cs(){}Cs.prototype.g=function(h,_){return new St(h,_)};function St(h,_){pt.call(this),this.g=new Hc(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!S(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!S(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Mn(this)}C(St,pt),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){Oo(this.g)},St.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Po(h),h=w);_.i.push(new Is(_.Ya++,h)),_.G==3&&yr(_)},St.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,St.aa.N.call(this)};function fi(h){Io.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const w in _){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}C(fi,Io);function Zc(){ll.call(this),this.status=1}C(Zc,ll);function Mn(h){this.g=h}C(Mn,Ll),Mn.prototype.ua=function(){It(this.g,"a")},Mn.prototype.ta=function(h){It(this.g,new fi(h))},Mn.prototype.sa=function(h){It(this.g,new Zc)},Mn.prototype.ra=function(){It(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,lx=function(){return new Cs},ax=function(){return So()},ox=ki,dg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,Zh=Ts,Co.COMPLETE="complete",sx=Co,al.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Jl=al,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,rx=Qe}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});const F0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new yf("@firebase/firestore");function Wl(){return eo.logLevel}function se(t,...e){if(eo.logLevel<=ke.DEBUG){const n=e.map(ny);eo.debug(`Firestore (${Qa}): ${t}`,...n)}}function or(t,...e){if(eo.logLevel<=ke.ERROR){const n=e.map(ny);eo.error(`Firestore (${Qa}): ${t}`,...n)}}function Ma(t,...e){if(eo.logLevel<=ke.WARN){const n=e.map(ny);eo.warn(`Firestore (${Qa}): ${t}`,...n)}}function ny(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: `+t;throw or(e),new Error(e)}function Fe(t,e){t||_e()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class yO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vO{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yi,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string"),new ux(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new $t(e)}}class wO{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class TO{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new wO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new EO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=IO(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Ne(t,e){return t<e?-1:t>e?1:0}function Na(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Pt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Pt(0,0))}static max(){return new ye(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,i){n===void 0?n=0:n>e.length&&_e(),i===void 0?i=e.length-n:i>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return qu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends qu{construct(e,n,i){return new qe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new re(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const SO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends qu{construct(e,n,i){return new Dt(e,n,i)}static isValidIdentifier(e){return SO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new re(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new re(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new re(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(qe.fromString(e))}static fromName(e){return new le(qe.fromString(e).popFirst(5))}static empty(){return new le(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new qe(e.slice()))}}function xO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ye.fromTimestamp(i===1e9?new Pt(n+1,0):new Pt(n,i));return new Jr(r,le.empty(),e)}function CO(t){return new Jr(t.readTime,t.key,-1)}class Jr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Jr(ye.min(),le.empty(),-1)}static max(){return new Jr(ye.max(),le.empty(),-1)}}function AO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==RO)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,i)=>{n(e)})}static reject(e){return new Y((n,i)=>{i(e)})}static waitFor(e){return new Y((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=Y.resolve(!1);for(const i of e)n=n.next(r=>r?Y.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Y((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(p=>{a[f]=p,++u,u===o&&i(a)},p=>r(p))}})}static doWhile(e,n){return new Y((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function LO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}iy.oe=-1;function Ef(t){return t==null}function Md(t){return t===0&&1/t==-1/0}function bO(t){return typeof t=="number"&&Number.isInteger(t)&&!Md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??bt.RED,this.left=r??bt.EMPTY,this.right=o??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new bt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,i,r,o){return this}insert(e,n,i){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new Nt(Dt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dx("Invalid base64 string: "+o):o}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const DO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(Fe(!!t),typeof t=="string"){let e=0;const n=DO.exec(t);if(Fe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function to(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sy(t){const e=t.mapValue.fields.__previous_value__;return ry(e)?sy(e):e}function Gu(t){const e=es(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,n,i,r,o,a,u,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f}}class Ku{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ku("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ku&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch={mapValue:{}};function no(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ry(t)?4:OO(t)?9007199254740991:NO(t)?10:11:_e()}function Ri(t,e){if(t===e)return!0;const n=no(t);if(n!==no(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gu(t).isEqual(Gu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=es(r.timestampValue),u=es(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return to(r.bytesValue).isEqual(to(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ct(r.geoPointValue.latitude)===ct(o.geoPointValue.latitude)&&ct(r.geoPointValue.longitude)===ct(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ct(r.integerValue)===ct(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ct(r.doubleValue),u=ct(o.doubleValue);return a===u?Md(a)===Md(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(j0(a)!==j0(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Ri(a[c],u[c])))return!1;return!0}(t,e);default:return _e()}}function Zu(t,e){return(t.values||[]).find(n=>Ri(n,e))!==void 0}function Oa(t,e){if(t===e)return 0;const n=no(t),i=no(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ct(o.integerValue||o.doubleValue),c=ct(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return U0(t.timestampValue,e.timestampValue);case 4:return U0(Gu(t),Gu(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(o,a){const u=to(o),c=to(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const p=Ne(u[f],c[f]);if(p!==0)return p}return Ne(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ne(ct(o.latitude),ct(a.latitude));return u!==0?u:Ne(ct(o.longitude),ct(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return z0(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,c,f,p;const g=o.fields||{},v=a.fields||{},T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=(c=v.value)===null||c===void 0?void 0:c.arrayValue,k=Ne(((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:z0(T,C)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ch.mapValue&&a===Ch.mapValue)return 0;if(o===Ch.mapValue)return 1;if(a===Ch.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=a.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const v=Ne(c[g],p[g]);if(v!==0)return v;const T=Oa(u[c[g]],f[p[g]]);if(T!==0)return T}return Ne(c.length,p.length)}(t.mapValue,e.mapValue);default:throw _e()}}function U0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=es(t),i=es(e),r=Ne(n.seconds,i.seconds);return r!==0?r:Ne(n.nanos,i.nanos)}function z0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Oa(n[r],i[r]);if(o)return o}return Ne(n.length,i.length)}function Va(t){return fg(t)}function fg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=es(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return to(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=fg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${fg(n.fields[a])}`;return r+"}"}(t.mapValue):_e()}function $0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pg(t){return!!t&&"integerValue"in t}function oy(t){return!!t&&"arrayValue"in t}function W0(t){return!!t&&"nullValue"in t}function H0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qh(t){return!!t&&"mapValue"in t}function NO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function mu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=mu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(n)}setAll(e){let n=Dt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=mu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Qh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){co(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new an(mu(this.value))}}function fx(t){const e=[];return co(t.fields,(n,i)=>{const r=new Dt([n]);if(Qh(i)){const o=fx(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Ht(e,0,ye.min(),ye.min(),ye.min(),an.empty(),0)}static newFoundDocument(e,n,i,r){return new Ht(e,1,n,ye.min(),i,r,0)}static newNoDocument(e,n){return new Ht(e,2,n,ye.min(),ye.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,ye.min(),ye.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function q0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=le.comparator(le.fromName(a.referenceValue),n.key):i=Oa(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function G0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function VO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{}class wt extends px{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new jO(e,n,i):n==="array-contains"?new zO(e,i):n==="in"?new $O(e,i):n==="not-in"?new WO(e,i):n==="array-contains-any"?new HO(e,i):new wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new BO(e,i):new UO(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oa(n,this.value)):n!==null&&no(this.value)===no(n)&&this.matchesComparison(Oa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends px{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ui(e,n)}matches(e){return mx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mx(t){return t.op==="and"}function gx(t){return FO(t)&&mx(t)}function FO(t){for(const e of t.filters)if(e instanceof ui)return!1;return!0}function mg(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Va(t.value);if(gx(t))return t.filters.map(e=>mg(e)).join(",");{const e=t.filters.map(n=>mg(n)).join(",");return`${t.op}(${e})`}}function _x(t,e){return t instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.field.isEqual(r.field)&&Ri(i.value,r.value)}(t,e):t instanceof ui?function(i,r){return r instanceof ui&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&_x(a,r.filters[u]),!0):!1}(t,e):void _e()}function yx(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Va(n.value)}`}(t):t instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(yx).join(" ,")+"}"}(t):"Filter"}class jO extends wt{constructor(e,n,i){super(e,n,i),this.key=le.fromName(i.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class BO extends wt{constructor(e,n){super(e,"in",n),this.keys=vx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UO extends wt{constructor(e,n){super(e,"not-in",n),this.keys=vx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>le.fromName(i.referenceValue))}class zO extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oy(n)&&Zu(n.arrayValue,this.value)}}class $O extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zu(this.value.arrayValue,n)}}class WO extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zu(this.value.arrayValue,n)}}class HO extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Zu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function K0(t,e=null,n=[],i=[],r=null,o=null,a=null){return new qO(t,e,n,i,r,o,a)}function ay(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Ef(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Va(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Va(i)).join(",")),e.ue=n}return e.ue}function ly(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_x(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!G0(t.startAt,e.startAt)&&G0(t.endAt,e.endAt)}function gg(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GO(t,e,n,i,r,o,a,u){return new gc(t,e,n,i,r,o,a,u)}function Pf(t){return new gc(t)}function Z0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wx(t){return t.collectionGroup!==null}function gu(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Nt(Dt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Od(o,i))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new Od(Dt.keyField(),i))}return e.ce}function Si(t){const e=ve(t);return e.le||(e.le=KO(e,gu(t))),e.le}function KO(t,e){if(t.limitType==="F")return K0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Od(r.field,o)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return K0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function _g(t,e){const n=t.filters.concat([e]);return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yg(t,e,n){return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function If(t,e){return ly(Si(t),Si(e))&&t.limitType===e.limitType}function Tx(t){return`${ay(Si(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>yx(r)).join(", ")}]`),Ef(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Va(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Va(r)).join(",")),`Target(${i})`}(Si(t))}; limitType=${t.limitType})`}function Sf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):le.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of gu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const f=q0(a,u,c);return a.inclusive?f<=0:f<0}(i.startAt,gu(i),r)||i.endAt&&!function(a,u,c){const f=q0(a,u,c);return a.inclusive?f>=0:f>0}(i.endAt,gu(i),r))}(t,e)}function ZO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ex(t){return(e,n)=>{let i=!1;for(const r of gu(t)){const o=QO(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function QO(t,e,n){const i=t.field.isKeyField()?le.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),f=u.data.field(o);return c!==null&&f!==null?Oa(c,f):_e()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return hx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new rt(le.comparator);function ar(){return YO}const Px=new rt(le.comparator);function eu(...t){let e=Px;for(const n of t)e=e.insert(n.key,n);return e}function Ix(t){let e=Px;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function js(){return _u()}function Sx(){return _u()}function _u(){return new Ya(t=>t.toString(),(t,e)=>t.isEqual(e))}const XO=new rt(le.comparator),JO=new Nt(le.comparator);function Re(...t){let e=JO;for(const n of t)e=e.add(n);return e}const eV=new Nt(Ne);function tV(){return eV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function xx(t){return{integerValue:""+t}}function nV(t,e){return bO(e)?xx(e):uy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function iV(t,e,n){return t instanceof Qu?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ry(o)&&(o=sy(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Yu?Ax(t,e):t instanceof Xu?Rx(t,e):function(r,o){const a=Cx(r,o),u=Q0(a)+Q0(r.Pe);return pg(a)&&pg(r.Pe)?xx(u):uy(r.serializer,u)}(t,e)}function rV(t,e,n){return t instanceof Yu?Ax(t,e):t instanceof Xu?Rx(t,e):n}function Cx(t,e){return t instanceof Vd?function(i){return pg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Qu extends xf{}class Yu extends xf{constructor(e){super(),this.elements=e}}function Ax(t,e){const n=kx(e);for(const i of t.elements)n.some(r=>Ri(r,i))||n.push(i);return{arrayValue:{values:n}}}class Xu extends xf{constructor(e){super(),this.elements=e}}function Rx(t,e){let n=kx(e);for(const i of t.elements)n=n.filter(r=>!Ri(r,i));return{arrayValue:{values:n}}}class Vd extends xf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Q0(t){return ct(t.integerValue||t.doubleValue)}function kx(t){return oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.field=e,this.transform=n}}function oV(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Yu&&r instanceof Yu||i instanceof Xu&&r instanceof Xu?Na(i.elements,r.elements,Ri):i instanceof Vd&&r instanceof Vd?Ri(i.Pe,r.Pe):i instanceof Qu&&r instanceof Qu}(t.transform,e.transform)}class aV{constructor(e,n){this.version=e,this.transformResults=n}}class oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cf{}function Lx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cy(t.key,oi.none()):new _c(t.key,t.data,oi.none());{const n=t.data,i=an.empty();let r=new Nt(Dt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ds(t.key,i,new wn(r.toArray()),oi.none())}}function lV(t,e,n){t instanceof _c?function(r,o,a){const u=r.value.clone(),c=X0(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(r,o,a){if(!Yh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=X0(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(bx(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function yu(t,e,n,i){return t instanceof _c?function(o,a,u,c){if(!Yh(o.precondition,a))return u;const f=o.value.clone(),p=J0(o.fieldTransforms,c,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof ds?function(o,a,u,c){if(!Yh(o.precondition,a))return u;const f=J0(o.fieldTransforms,c,a),p=a.data;return p.setAll(bx(o)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Yh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function uV(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=Cx(i.transform,r||null);o!=null&&(n===null&&(n=an.empty()),n.set(i.field,o))}return n||null}function Y0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Na(i,r,(o,a)=>oV(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _c extends Cf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ds extends Cf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function X0(t,e,n){const i=new Map;Fe(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,rV(a,u,n[r]))}return i}function J0(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,iV(o,a,e))}return i}class cy extends Cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cV extends Cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&lV(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=yu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=yu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Sx();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=Lx(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ye.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(n,i)=>Y0(n,i))&&Na(this.baseMutations,e.baseMutations,(n,i)=>Y0(n,i))}}class hy{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Fe(e.mutations.length===i.length);let r=function(){return XO}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new hy(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,be;function pV(t){switch(t){default:return _e();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Dx(t){if(t===void 0)return or("GRPC error has no .code"),Z.UNKNOWN;switch(t){case _t.OK:return Z.OK;case _t.CANCELLED:return Z.CANCELLED;case _t.UNKNOWN:return Z.UNKNOWN;case _t.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case _t.INTERNAL:return Z.INTERNAL;case _t.UNAVAILABLE:return Z.UNAVAILABLE;case _t.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case _t.NOT_FOUND:return Z.NOT_FOUND;case _t.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case _t.ABORTED:return Z.ABORTED;case _t.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case _t.DATA_LOSS:return Z.DATA_LOSS;default:return _e()}}(be=_t||(_t={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new Ws([4294967295,4294967295],0);function eT(t){const e=mV().encode(t),n=new ix;return n.update(e),new Uint8Array(n.digest())}function tT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ws([n,i],0),new Ws([r,o],0)]}class dy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(i<0)throw new tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ws.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Ws.fromNumber(i)));return r.compare(gV)===1&&(r=new Ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=eT(e),[i,r]=tT(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new dy(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=eT(e),[i,r]=tT(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Af(ye.min(),r,new rt(Ne),ar(),Re())}}class yc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new yc(i,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class Mx{constructor(e,n){this.targetId=e,this.me=n}}class Nx{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class nT{constructor(){this.fe=0,this.ge=rT(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),i=Re();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:_e()}}),new yc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=rT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _V{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=iT(),this.Qe=new rt(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(gg(o))if(i===0){const a=new le(o.path);this.Ue(n,a,Ht.newNoDocument(a,ye.min()))}else Fe(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=to(i).toUint8Array()}catch(c){if(c instanceof dx)return Ma("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new dy(a,r,o)}catch(c){return Ma(c instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&gg(u.target)){const c=new le(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,Ht.newNoDocument(c,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let i=Re();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const f=this.Je(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Af(e,n,this.Qe,this.ke,i);return this.ke=ar(),this.qe=iT(),this.Qe=new rt(Ne),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new nT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function iT(){return new rt(le.comparator)}function rT(){return new rt(le.comparator)}const yV={asc:"ASCENDING",desc:"DESCENDING"},vV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wV={and:"AND",or:"OR"};class TV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vg(t,e){return t.useProto3Json||Ef(e)?e:{value:e}}function Fd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ox(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EV(t,e){return Fd(t,e.toTimestamp())}function xi(t){return Fe(!!t),ye.fromTimestamp(function(n){const i=es(n);return new Pt(i.seconds,i.nanos)}(t))}function fy(t,e){return wg(t,e).canonicalString()}function wg(t,e){const n=function(r){return new qe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Vx(t){const e=qe.fromString(t);return Fe(zx(e)),e}function Tg(t,e){return fy(t.databaseId,e.path)}function jp(t,e){const n=Vx(e);if(n.get(1)!==t.databaseId.projectId)throw new re(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(jx(n))}function Fx(t,e){return fy(t.databaseId,e)}function PV(t){const e=Vx(t);return e.length===4?qe.emptyPath():jx(e)}function Eg(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jx(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sT(t,e,n){return{name:Tg(t,e),fields:n.value.mapValue.fields}}function IV(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(Fe(p===void 0||typeof p=="string"),Vt.fromBase64String(p||"")):(Fe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Vt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const p=f.code===void 0?Z.UNKNOWN:Dx(f.code);return new re(p,f.message||"")}(a);n=new Nx(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=jp(t,i.document.name),o=xi(i.document.updateTime),a=i.document.createTime?xi(i.document.createTime):ye.min(),u=new an({mapValue:{fields:i.document.fields}}),c=Ht.newFoundDocument(r,o,a,u),f=i.targetIds||[],p=i.removedTargetIds||[];n=new Xh(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=jp(t,i.document),o=i.readTime?xi(i.readTime):ye.min(),a=Ht.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Xh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=jp(t,i.document),o=i.removedTargetIds||[];n=new Xh([],o,r,null)}else{if(!("filter"in e))return _e();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new fV(r,o),u=i.targetId;n=new Mx(u,a)}}return n}function SV(t,e){let n;if(e instanceof _c)n={update:sT(t,e.key,e.value)};else if(e instanceof cy)n={delete:Tg(t,e.key)};else if(e instanceof ds)n={update:sT(t,e.key,e.data),updateMask:MV(e.fieldMask)};else{if(!(e instanceof cV))return _e();n={verify:Tg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Qu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Xu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Vd)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw _e()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:EV(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e()}(t,e.precondition)),n}function xV(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?xi(r.updateTime):xi(o);return a.isEqual(ye.min())&&(a=xi(o)),new aV(a,r.transformResults||[])}(n,e))):[]}function CV(t,e){return{documents:[Fx(t,e.path)]}}function AV(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Fx(t,r);const o=function(f){if(f.length!==0)return Ux(ui.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(p=>function(v){return{field:Yo(v.field),direction:LV(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=vg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function RV(t){let e=PV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Fe(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(g){const v=Bx(g);return v instanceof ui&&gx(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(C){return new Od(Xo(C.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,Ef(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(g){const v=!!g.before,T=g.values||[];return new Nd(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,T=g.values||[];return new Nd(T,v)}(n.endAt)),GO(e,r,a,o,u,"F",c,f)}function kV(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Xo(n.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Xo(n.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xo(n.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xo(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Xo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(i=>Bx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e()}function LV(t){return yV[t]}function bV(t){return vV[t]}function DV(t){return wV[t]}function Yo(t){return{fieldPath:t.canonicalString()}}function Xo(t){return Dt.fromServerFormat(t.fieldPath)}function Ux(t){return t instanceof wt?function(n){if(n.op==="=="){if(H0(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NAN"}};if(W0(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H0(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NAN"}};if(W0(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(n.field),op:bV(n.op),value:n.value}}}(t):t instanceof ui?function(n){const i=n.getFilters().map(r=>Ux(r));return i.length===1?i[0]:{compositeFilter:{op:DV(n.op),filters:i}}}(t):_e()}function MV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,i,r,o=ye.min(),a=ye.min(),u=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.ct=e}}function OV(t){const e=RV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.un=new FV}addToCollectionParentIndex(e,n){return this.un.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Jr.min())}updateCollectionGroup(e,n,i){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class FV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Nt(qe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Nt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fa(0)}static kn(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.changes=new Ya(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Y.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&yu(i.mutation,r,wn.empty(),Pt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Re()){const r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=eu();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Re()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=ar();const a=_u(),u=function(){return _u()}();return n.forEach((c,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof ds)?o=o.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),yu(p.mutation,f,p.mutation.getFieldMask(),Pt.now())):a.set(f.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,p)=>a.set(f,p)),n.forEach((f,p)=>{var g;return u.set(f,new BV(p,(g=a.get(f))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=_u();let r=new rt((a,u)=>a-u),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let p=i.get(c)||wn.empty();p=u.applyToLocalView(f,p),i.set(c,p);const g=(r.get(u.batchId)||Re()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,p=c.value,g=Sx();p.forEach(v=>{if(!o.has(v)){const T=Lx(n.get(v),i.get(v));T!==null&&g.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Y.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Y.resolve(js());let u=-1,c=o;return a.next(f=>Y.forEach(f,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(p)?Y.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{c=c.insert(p,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,Re())).next(p=>({batchId:u,changes:Ix(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(i=>{let r=eu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=eu();return this.indexManager.getCollectionParents(e,o).next(u=>Y.forEach(u,c=>{const f=function(g,v){return new gc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(p=>{p.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,Ht.newInvalidDocument(p)))});let u=eu();return a.forEach((c,f)=>{const p=o.get(c);p!==void 0&&yu(p.mutation,f,wn.empty(),Pt.now()),Sf(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Y.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xi(r.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:OV(r.bundledQuery),readTime:xi(r.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.overlays=new rt(le.comparator),this.Ir=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const i=js();return Y.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Y.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Y.resolve()}getOverlaysForCollection(e,n,i){const r=js(),o=n.length+1,a=new le(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Y.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new rt((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=js(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=js(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=r)););return Y.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new dV(n,i));let o=this.Ir.get(n);o===void 0&&(o=Re(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.Tr=new Nt(Ct.Er),this.dr=new Nt(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ct(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ct(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new le(new qe([])),i=new Ct(n,e),r=new Ct(n,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new qe([])),i=new Ct(n,e),r=new Ct(n,e+1);let o=Re();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Ct(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Nt(Ct.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hV(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new Ct(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,n){return Y.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ct(n,0),r=new Ct(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{const u=this.Dr(a.wr);o.push(u)}),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Nt(Ne);return n.forEach(r=>{const o=new Ct(r,0),a=new Ct(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{i=i.add(u.wr)})}),Y.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;le.isDocumentKey(o)||(o=o.child(""));const a=new Ct(new le(o),0);let u=new Nt(Ne);return this.br.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(c.wr)),!0)},a),Y.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Y.forEach(n.mutations,r=>{const o=new Ct(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ct(n,0),r=this.br.firstAfterOrEqual(i);return Y.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.Mr=e,this.docs=function(){return new rt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Y.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let i=ar();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Ht.newInvalidDocument(r))}),Y.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=ar();const a=n.path,u=new le(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||AO(CO(p),i)<=0||(r.has(p.key)||Sf(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,n,i,r){_e()}Or(e,n){return Y.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new GV(this)}getSize(e){return Y.resolve(this.size)}}class GV extends jV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Y.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.persistence=e,this.Nr=new Ya(n=>ay(n),ly),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new py,this.targetCount=0,this.kr=Fa.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Fa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Kn(n),Y.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Y.waitFor(o).next(()=>r)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Y.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Y.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Y.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Y.resolve(i)}containsKey(e,n){return Y.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new iy(0),this.Kr=!1,this.Kr=!0,this.$r=new WV,this.referenceDelegate=e(this),this.Ur=new KV(this),this.indexManager=new VV,this.remoteDocumentCache=function(r){return new qV(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new NV(n),this.Gr=new zV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $V,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new HV(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new QV(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Y.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class QV extends kO{constructor(e){super(),this.currentSequenceNumber=e}}class my{constructor(e){this.persistence=e,this.Jr=new py,this.Yr=null}static Zr(e){return new my(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Y.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,i=>{const r=le.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,ye.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Y.or([()=>Y.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Re(),r=Re();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new gy(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Vb()?8:LO(Gt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new YV;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Wl()<=ke.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(Wl()<=ke.DEBUG&&se("QueryEngine","Query:",Qo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Wl()<=ke.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(n))):Y.resolve())}Yi(e,n){if(Z0(n))return Y.resolve(null);let i=Si(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=yg(n,null,"F"),i=Si(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Re(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const f=this.ts(n,u);return this.ns(n,f,a,c.readTime)?this.Yi(e,yg(n,null,"F")):this.rs(e,f,n,c)}))})))}Zi(e,n,i,r){return Z0(n)||r.isEqual(ye.min())?Y.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const a=this.ts(n,o);return this.ns(n,a,i,r)?Y.resolve(null):(Wl()<=ke.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qo(n)),this.rs(e,a,n,xO(r,-1)).next(u=>u))})}ts(e,n){let i=new Nt(Ex(e));return n.forEach((r,o)=>{Sf(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return Wl()<=ke.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Qo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Jr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new rt(Ne),this._s=new Ya(o=>ay(o),ly),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function e2(t,e,n,i){return new JV(t,e,n,i)}async function $x(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=Re();for(const f of r){a.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:u}))})})}function t2(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,f,p){const g=f.batch,v=g.keys();let T=Y.resolve();return v.forEach(C=>{T=T.next(()=>p.getEntry(c,C)).next(k=>{const V=f.docVersions.get(C);Fe(V!==null),k.version.compareTo(V)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),p.addEntry(k)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=Re();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Wx(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function n2(t,e){const n=ve(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const u=[];e.targetChanges.forEach((p,g)=>{const v=r.get(g);if(!v)return;u.push(n.Ur.removeMatchingKeys(o,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(o,p.addedDocuments,g)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Vt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,i)),r=r.insert(g,T),function(k,V,b){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(v,T,p)&&u.push(n.Ur.updateTargetData(o,T))});let c=ar(),f=Re();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),u.push(i2(o,a,e.documentUpdates).next(p=>{c=p.Ps,f=p.Is})),!i.isEqual(ye.min())){const p=n.Ur.getLastRemoteSnapshotVersion(o).next(g=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(p)}return Y.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.os=r,o))}function i2(t,e,n){let i=Re(),r=Re();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=ar();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):se("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{Ps:a,Is:r}})}function r2(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function s2(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Y.resolve(r)):n.Ur.allocateTargetId(i).next(a=>(r=new Vr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Pg(t,e,n){const i=ve(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!mc(a))throw a;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function oT(t,e,n){const i=ve(t);let r=ye.min(),o=Re();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,p){const g=ve(c),v=g._s.get(p);return v!==void 0?Y.resolve(g.os.get(v)):g.Ur.getTargetData(f,p)}(i,a,Si(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?r:ye.min(),n?o:Re())).next(u=>(o2(i,ZO(e),u),{documents:u,Ts:o})))}function o2(t,e,n){let i=t.us.get(e)||ye.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class aT{constructor(){this.activeTargetIds=tV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a2{constructor(){this.so=new aT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new aT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=null;function Bp(){return Ah===null?Ah=function(){return 268435456+Math.round(2147483648*Math.random())}():Ah++,"0x"+Ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class h2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,a){const u=Bp(),c=this.xo(n,i.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${u}:`,c,r);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(n,c,f,r).then(p=>(se("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw Ma("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",r),p})}Lo(n,i,r,o,a,u){return this.Mo(n,i,r,o,a)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}xo(n,i){const r=u2[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=Bp();return new Promise((a,u)=>{const c=new rx;c.setWithCredentials(!0),c.listenOnce(sx.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Zh.NO_ERROR:const p=c.getResponseJson();se(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Zh.TIMEOUT:se(Ut,`RPC '${e}' ${o} timed out`),u(new re(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const g=c.getStatus();if(se(Ut,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const C=function(V){const b=V.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(b)>=0?b:Z.UNKNOWN}(T.status);u(new re(C,T.message))}else u(new re(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new re(Z.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{se(Ut,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);se(Ut,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",f,i,15)})}Bo(e,n,i){const r=Bp(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=lx(),u=ax(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const p=o.join("");se(Ut,`Creating RPC '${e}' stream ${r}: ${p}`,c);const g=a.createWebChannel(p,c);let v=!1,T=!1;const C=new c2({Io:V=>{T?se(Ut,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(v||(se(Ut,`Opening RPC '${e}' stream ${r} transport.`),g.open(),v=!0),se(Ut,`RPC '${e}' stream ${r} sending:`,V),g.send(V))},To:()=>g.close()}),k=(V,b,S)=>{V.listen(b,A=>{try{S(A)}catch(B){setTimeout(()=>{throw B},0)}})};return k(g,Jl.EventType.OPEN,()=>{T||(se(Ut,`RPC '${e}' stream ${r} transport opened.`),C.yo())}),k(g,Jl.EventType.CLOSE,()=>{T||(T=!0,se(Ut,`RPC '${e}' stream ${r} transport closed`),C.So())}),k(g,Jl.EventType.ERROR,V=>{T||(T=!0,Ma(Ut,`RPC '${e}' stream ${r} transport errored:`,V),C.So(new re(Z.UNAVAILABLE,"The operation could not be completed")))}),k(g,Jl.EventType.MESSAGE,V=>{var b;if(!T){const S=V.data[0];Fe(!!S);const A=S,B=A.error||((b=A[0])===null||b===void 0?void 0:b.error);if(B){se(Ut,`RPC '${e}' stream ${r} received error:`,B);const G=B.status;let $=function(D){const M=_t[D];if(M!==void 0)return Dx(M)}(G),R=B.message;$===void 0&&($=Z.INTERNAL,R="Unknown error status: "+G+" with message "+B.message),T=!0,C.So(new re($,R)),g.close()}else se(Ut,`RPC '${e}' stream ${r} received:`,S),C.bo(S)}}),k(u,ox.STAT_EVENT,V=>{V.stat===dg.PROXY?se(Ut,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===dg.NOPROXY&&se(Ut,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return new TV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,i,r,o,a,u,c){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new re(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d2 extends qx{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=IV(this.serializer,e),i=function(o){if(!("targetChange"in o))return ye.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ye.min():a.readTime?xi(a.readTime):ye.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Eg(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=gg(c)?{documents:CV(o,c)}:{query:AV(o,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Ox(o,a.resumeToken);const f=vg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(ye.min())>0){u.readTime=Fd(o,a.snapshotVersion.toTimestamp());const f=vg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=kV(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Eg(this.serializer),n.removeTarget=e,this.a_(n)}}class f2 extends qx{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xV(e.writeResults,e.commitTime),i=xi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Eg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>SV(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new re(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,wg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(Z.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,wg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re(Z.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class m2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(async()=>{ho(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(c){const f=ve(c);f.L_.add(4),await vc(f),f.q_.set("Unknown"),f.L_.delete(4),await kf(f)}(this))})}),this.q_=new m2(i,r)}}async function kf(t){if(ho(t))for(const e of t.B_)await e(!0)}async function vc(t){for(const e of t.B_)await e(!1)}function Gx(t,e){const n=ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wy(n)?vy(n):Xa(n).r_()&&yy(n,e))}function _y(t,e){const n=ve(t),i=Xa(n);n.N_.delete(e),i.r_()&&Kx(n,e),n.N_.size===0&&(i.r_()?i.o_():ho(n)&&n.q_.set("Unknown"))}function yy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xa(t).A_(e)}function Kx(t,e){t.Q_.xe(e),Xa(t).R_(e)}function vy(t){t.Q_=new _V({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xa(t).start(),t.q_.v_()}function wy(t){return ho(t)&&!Xa(t).n_()&&t.N_.size>0}function ho(t){return ve(t).L_.size===0}function Zx(t){t.Q_=void 0}async function _2(t){t.q_.set("Online")}async function y2(t){t.N_.forEach((e,n)=>{yy(t,e)})}async function v2(t,e){Zx(t),wy(t)?(t.q_.M_(e),vy(t)):t.q_.set("Unknown")}async function w2(t,e,n){if(t.q_.set("Online"),e instanceof Nx&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await jd(t,i)}else if(e instanceof Xh?t.Q_.Ke(e):e instanceof Mx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ye.min()))try{const i=await Wx(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=o.N_.get(f);p&&o.N_.set(f,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const p=o.N_.get(c);if(!p)return;o.N_.set(c,p.withResumeToken(Vt.EMPTY_BYTE_STRING,p.snapshotVersion)),Kx(o,c);const g=new Vr(p.target,c,f,p.sequenceNumber);yy(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await jd(t,i)}}async function jd(t,e,n){if(!mc(e))throw e;t.L_.add(1),await vc(t),t.q_.set("Offline"),n||(n=()=>Wx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await kf(t)})}function Qx(t,e){return e().catch(n=>jd(t,n,e))}async function Lf(t){const e=ve(t),n=ts(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;T2(e);)try{const r=await r2(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,E2(e,r)}catch(r){await jd(e,r)}Yx(e)&&Xx(e)}function T2(t){return ho(t)&&t.O_.length<10}function E2(t,e){t.O_.push(e);const n=ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Yx(t){return ho(t)&&!ts(t).n_()&&t.O_.length>0}function Xx(t){ts(t).start()}async function P2(t){ts(t).p_()}async function I2(t){const e=ts(t);for(const n of t.O_)e.m_(n.mutations)}async function S2(t,e,n){const i=t.O_.shift(),r=hy.from(i,e,n);await Qx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Lf(t)}async function x2(t,e){e&&ts(t).V_&&await async function(i,r){if(function(a){return pV(a)&&a!==Z.ABORTED}(r.code)){const o=i.O_.shift();ts(i).s_(),await Qx(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Lf(i)}}(t,e),Yx(t)&&Xx(t)}async function uT(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=ho(n);n.L_.add(3),await vc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await kf(n)}async function C2(t,e){const n=ve(t);e?(n.L_.delete(2),await kf(n)):e||(n.L_.add(2),await vc(n),n.q_.set("Unknown"))}function Xa(t){return t.K_||(t.K_=function(n,i,r){const o=ve(n);return o.w_(),new d2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:_2.bind(null,t),Ro:y2.bind(null,t),mo:v2.bind(null,t),d_:w2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wy(t)?vy(t):t.q_.set("Unknown")):(await t.K_.stop(),Zx(t))})),t.K_}function ts(t){return t.U_||(t.U_=function(n,i,r){const o=ve(n);return o.w_(),new f2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:P2.bind(null,t),mo:x2.bind(null,t),f_:I2.bind(null,t),g_:S2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Lf(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Ty(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(t,e){if(or("AsyncQueue",`${e}: ${t}`),mc(t))return new re(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.comparator=e?(n,i)=>e(n,i)||le.comparator(n.key,i.key):(n,i)=>le.comparator(n.key,i.key),this.keyedMap=eu(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new Sa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Sa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.W_=new rt(le.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ja{constructor(e,n,i,r,o,a,u,c,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new ja(e,n,Sa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class R2{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ve(n),o=r.queries;r.queries=hT(),o.forEach((a,u)=>{for(const c of u.j_)c.onError(i)})})(this,new re(Z.ABORTED,"Firestore shutting down"))}}function hT(){return new Ya(t=>Tx(t),If)}async function Py(t,e){const n=ve(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new A2,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Ey(a,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Sy(n)}async function Iy(t,e){const n=ve(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function k2(t,e){const n=ve(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(r)&&(i=!0);a.z_=r}}i&&Sy(n)}function L2(t,e,n){const i=ve(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Sy(t){t.Y_.forEach(e=>{e.next()})}var Ig,dT;(dT=Ig||(Ig={})).ea="default",dT.Cache="cache";class xy{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ja(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.key=e}}class eC{constructor(e){this.key=e}}class b2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=Ex(e),this.Ra=new Sa(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new cT,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,g)=>{const v=r.get(p),T=Sf(this.query,g)?g:null,C=!!v&&this.mutatedKeys.has(v.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let V=!1;v&&T?v.data.isEqual(T.data)?C!==k&&(i.track({type:3,doc:T}),V=!0):this.ga(v,T)||(i.track({type:2,doc:T}),V=!0,(c&&this.Aa(T,c)>0||f&&this.Aa(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),V=!0):v&&!T&&(i.track({type:1,doc:v}),V=!0,(c||f)&&(u=!0)),V&&(T?(a=a.add(T),o=k?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{Ra:a,fa:i,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,g)=>function(T,C){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return k(T)-k(C)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(i),r=r!=null&&r;const u=n&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,f=c!==this.Ea;return this.Ea=c,a.length!==0||f?{snapshot:new ja(this.query,e.Ra,o,a,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new eC(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Jx(i))}),n}ba(e){this.Ta=e.Ts,this.da=Re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ja.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class D2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class M2{constructor(e){this.key=e,this.va=!1}}class N2{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ya(u=>Tx(u),If),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(le.comparator),this.Na=new Map,this.La=new py,this.Ba={},this.ka=new Map,this.qa=Fa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function O2(t,e,n=!0){const i=oC(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await tC(i,e,n,!0),r}async function V2(t,e){const n=oC(t);await tC(n,e,!0,!1)}async function tC(t,e,n,i){const r=await s2(t.localStore,Si(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await F2(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Gx(t.remoteStore,r),u}async function F2(t,e,n,i,r){t.Ka=(g,v,T)=>async function(k,V,b,S){let A=V.view.ma(b);A.ns&&(A=await oT(k.localStore,V.query,!1).then(({documents:R})=>V.view.ma(R,A)));const B=S&&S.targetChanges.get(V.targetId),G=S&&S.targetMismatches.get(V.targetId)!=null,$=V.view.applyChanges(A,k.isPrimaryClient,B,G);return pT(k,V.targetId,$.wa),$.snapshot}(t,g,v,T);const o=await oT(t.localStore,e,!0),a=new b2(e,o.Ts),u=a.ma(o.documents),c=yc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,c);pT(t,n,f.wa);const p=new D2(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function j2(t,e,n){const i=ve(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!If(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Pg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&_y(i.remoteStore,r.targetId),Sg(i,r.targetId)}).catch(pc)):(Sg(i,r.targetId),await Pg(i.localStore,r.targetId,!0))}async function B2(t,e){const n=ve(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),_y(n.remoteStore,i.targetId))}async function U2(t,e,n){const i=K2(t);try{const r=await function(a,u){const c=ve(a),f=Pt.now(),p=u.reduce((T,C)=>T.add(C.key),Re());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=ar(),k=Re();return c.cs.getEntries(T,p).next(V=>{C=V,C.forEach((b,S)=>{S.isValidDocument()||(k=k.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,C)).next(V=>{g=V;const b=[];for(const S of u){const A=uV(S,g.get(S.key).overlayedDocument);A!=null&&b.push(new ds(S.key,A,fx(A.value.mapValue),oi.exists(!0)))}return c.mutationQueue.addMutationBatch(T,f,b,u)}).next(V=>{v=V;const b=V.applyToLocalDocumentSet(g,k);return c.documentOverlayCache.saveOverlays(T,V.batchId,b)})}).then(()=>({batchId:v.batchId,changes:Ix(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let f=a.Ba[a.currentUser.toKey()];f||(f=new rt(Ne)),f=f.insert(u,c),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,n),await wc(i,r.changes),await Lf(i.remoteStore)}catch(r){const o=Ey(r,"Failed to persist write");n.reject(o)}}async function nC(t,e){const n=ve(t);try{const i=await n2(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Na.get(o);a&&(Fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Fe(a.va):r.removedDocuments.size>0&&(Fe(a.va),a.va=!1))}),await wc(n,i,e)}catch(i){await pc(i)}}function fT(t,e,n){const i=ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=ve(a);c.onlineState=u;let f=!1;c.queries.forEach((p,g)=>{for(const v of g.j_)v.Z_(u)&&(f=!0)}),f&&Sy(c)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function z2(t,e,n){const i=ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let a=new rt(le.comparator);a=a.insert(o,Ht.newNoDocument(o,ye.min()));const u=Re().add(o),c=new Af(ye.min(),new Map,new rt(Ne),a,u);await nC(i,c),i.Oa=i.Oa.remove(o),i.Na.delete(e),Cy(i)}else await Pg(i.localStore,e,!1).then(()=>Sg(i,e,n)).catch(pc)}async function $2(t,e){const n=ve(t),i=e.batch.batchId;try{const r=await t2(n.localStore,e);rC(n,i,null),iC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await wc(n,r)}catch(r){await pc(r)}}async function W2(t,e,n){const i=ve(t);try{const r=await function(a,u){const c=ve(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(Fe(g!==null),p=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>c.localDocuments.getDocuments(f,p))})}(i.localStore,e);rC(i,e,n),iC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await wc(i,r)}catch(r){await pc(r)}}function iC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function rC(t,e,n){const i=ve(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Sg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||sC(t,i)})}function sC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_y(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Cy(t))}function pT(t,e,n){for(const i of n)i instanceof Jx?(t.La.addReference(i.key,e),H2(t,i)):i instanceof eC?(se("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||sC(t,i.key)):_e()}function H2(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(i),Cy(t))}function Cy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(qe.fromString(e)),i=t.qa.next();t.Na.set(i,new M2(n)),t.Oa=t.Oa.insert(n,i),Gx(t.remoteStore,new Vr(Si(Pf(n.path)),i,"TargetPurposeLimboResolution",iy.oe))}}async function wc(t,e,n){const i=ve(t),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((u,c)=>{a.push(i.Ka(c,e,n).then(f=>{var p;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=gy.Wi(c.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(c,f){const p=ve(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Y.forEach(f,v=>Y.forEach(v.$i,T=>p.persistence.referenceDelegate.addReference(g,v.targetId,T)).next(()=>Y.forEach(v.Ui,T=>p.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))}catch(g){if(!mc(g))throw g;se("LocalStore","Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const T=p.os.get(v),C=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(C);p.os=p.os.insert(v,k)}}}(i.localStore,o))}async function q2(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await $x(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(c=>{c.reject(new re(Z.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wc(n,i.hs)}}function G2(t,e){const n=ve(t),i=n.Na.get(e);if(i&&i.va)return Re().add(i.key);{let r=Re();const o=n.Ma.get(e);if(!o)return r;for(const a of o){const u=n.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function oC(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z2.bind(null,e),e.Ca.d_=k2.bind(null,e.eventManager),e.Ca.$a=L2.bind(null,e.eventManager),e}function K2(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W2.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return e2(this.persistence,new XV,e.initialUser,this.serializer)}Ga(e){return new ZV(my.Zr,this.serializer)}Wa(e){return new a2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class xg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=q2.bind(null,this.syncEngine),await C2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R2}()}createDatastore(e){const n=Rf(e.databaseInfo.databaseId),i=function(o){return new h2(o)}(e.databaseInfo);return function(o,a,u,c){return new p2(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new g2(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>fT(this.syncEngine,n,0),function(){return lT.D()?new lT:new l2}())}createSyncEngine(e,n){return function(r,o,a,u,c,f,p){const g=new N2(r,o,a,u,c,f);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=ve(r);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await vc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xg.provider={build:()=>new xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=$t.UNAUTHENTICATED,this.clientId=cx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ey(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function zp(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await $x(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Q2(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>uT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>uT(e.remoteStore,r)),t._onlineComponents=e}async function Q2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await zp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Z.FAILED_PRECONDITION||r.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ma("Error using user provided cache. Falling back to memory cache: "+n),await zp(t,new Bd)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await zp(t,new Bd);return t._offlineComponents}async function aC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await mT(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await mT(t,new xg))),t._onlineComponents}function Y2(t){return aC(t).then(e=>e.syncEngine)}async function Ud(t){const e=await aC(t),n=e.eventManager;return n.onListen=O2.bind(null,e.syncEngine),n.onUnlisten=j2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=V2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=B2.bind(null,e.syncEngine),n}function X2(t,e,n={}){const i=new Yi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,f){const p=new Ay({next:v=>{p.Za(),a.enqueueAndForget(()=>Iy(o,g));const T=v.docs.has(u);!T&&v.fromCache?f.reject(new re(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&c&&c.source==="server"?f.reject(new re(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new xy(Pf(u.path),p,{includeMetadataChanges:!0,_a:!0});return Py(o,g)}(await Ud(t),t.asyncQueue,e,n,i)),i.promise}function J2(t,e,n={}){const i=new Yi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,f){const p=new Ay({next:v=>{p.Za(),a.enqueueAndForget(()=>Iy(o,g)),v.fromCache&&c.source==="server"?f.reject(new re(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new xy(u,p,{includeMetadataChanges:!0,_a:!0});return Py(o,g)}(await Ud(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e,n){if(!n)throw new re(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eF(t,e,n,i){if(e===!0&&i===!0)throw new re(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _T(t){if(!le.isDocumentKey(t))throw new re(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yT(t){if(le.isDocumentKey(t))throw new re(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bf(t);throw new re(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new re(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vT(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new _O;switch(i.type){case"firstParty":return new TO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=gT.get(n);i&&(se("ComponentProvider","Removing Datastore"),gT.delete(n),i.terminate())}(this),Promise.resolve()}}function tF(t,e,n,i={}){var r;const o=(t=$n(t,Df))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,c;if(typeof i.mockUserToken=="string")u=i.mockUserToken,c=$t.MOCK_USER;else{u=Lb(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new re(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new $t(f)}t._authCredentials=new yO(new ux(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class en{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Zr extends fo{constructor(e,n,i){super(e,n,Pf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new le(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function Ju(t,e,...n){if(t=lt(t),uC("collection","path",e),t instanceof Df){const i=qe.fromString(e,...n);return yT(i),new Zr(t,null,i)}{if(!(t instanceof en||t instanceof Zr))throw new re(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(qe.fromString(e,...n));return yT(i),new Zr(t.firestore,null,i)}}function ha(t,e,...n){if(t=lt(t),arguments.length===1&&(e=cx.newId()),uC("doc","path",e),t instanceof Df){const i=qe.fromString(e,...n);return _T(i),new en(t,null,new le(i))}{if(!(t instanceof en||t instanceof Zr))throw new re(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(qe.fromString(e,...n));return _T(i),new en(t.firestore,t instanceof Zr?t.converter:null,new le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Hx(this,"async_queue_retry"),this.Vu=()=>{const i=Up();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Up();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Up();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!mc(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw or("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Ty.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&_e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function TT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ns extends Df{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new wT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wT(e),this._firestoreClient=void 0,await e}}}function nF(t,e){const n=typeof t=="object"?t:W_(),i=typeof t=="string"?t:"(default)",r=uo(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Rb("firestore");o&&tF(r,...o)}return r}function Mf(t){if(t._terminated)throw new re(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iF(t),t._firestoreClient}function iF(t){var e,n,i;const r=t._freezeSettings(),o=function(u,c,f,p){return new MO(u,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,lC(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Z2(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(Vt.fromBase64String(e))}catch(n){throw new re(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ba(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=/^__.*__$/;class sF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new _c(e,this.data,n,this.fieldTransforms)}}class cC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Ly{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ly(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hC(this.Cu)&&rF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class oF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Rf(e)}Qu(e,n,i,r=!1){return new Ly({Cu:e,methodName:n,qu:i,path:Dt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function by(t){const e=t._freezeSettings(),n=Rf(t._databaseId);return new oF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aF(t,e,n,i,r,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);My("Data must be an object, but it was:",a,i);const u=dC(i,a);let c,f;if(o.merge)c=new wn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const p=[];for(const g of o.mergeFields){const v=Cg(e,g,n);if(!a.contains(v))throw new re(Z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);pC(p,v)||p.push(v)}c=new wn(p),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new sF(new an(u),c,f)}class Vf extends Of{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vf}}class Dy extends Of{_toFieldTransform(e){return new sV(e.path,new Qu)}isEqual(e){return e instanceof Dy}}function lF(t,e,n,i){const r=t.Qu(1,e,n);My("Data must be an object, but it was:",r,i);const o=[],a=an.empty();co(i,(c,f)=>{const p=Ny(e,c,n);f=lt(f);const g=r.Nu(p);if(f instanceof Vf)o.push(p);else{const v=Tc(f,g);v!=null&&(o.push(p),a.set(p,v))}});const u=new wn(o);return new cC(a,u,r.fieldTransforms)}function uF(t,e,n,i,r,o){const a=t.Qu(1,e,n),u=[Cg(e,i,n)],c=[r];if(o.length%2!=0)throw new re(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(Cg(e,o[v])),c.push(o[v+1]);const f=[],p=an.empty();for(let v=u.length-1;v>=0;--v)if(!pC(f,u[v])){const T=u[v];let C=c[v];C=lt(C);const k=a.Nu(T);if(C instanceof Vf)f.push(T);else{const V=Tc(C,k);V!=null&&(f.push(T),p.set(T,V))}}const g=new wn(f);return new cC(p,g,a.fieldTransforms)}function cF(t,e,n,i=!1){return Tc(n,t.Qu(i?4:3,e))}function Tc(t,e){if(fC(t=lt(t)))return My("Unsupported field value:",e,t),dC(t,e);if(t instanceof Of)return function(i,r){if(!hC(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=Tc(u,r.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return nV(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Pt.fromDate(i);return{timestampValue:Fd(r.serializer,o)}}if(i instanceof Pt){const o=new Pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fd(r.serializer,o)}}if(i instanceof Ry)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ba)return{bytesValue:Ox(r.serializer,i._byteString)};if(i instanceof en){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ky)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return uy(u.serializer,c)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${bf(i)}`)}(t,e)}function dC(t,e){const n={};return hx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(i,r)=>{const o=Tc(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function fC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof Ry||t instanceof Ba||t instanceof en||t instanceof Of||t instanceof ky)}function My(t,e,n){if(!fC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=bf(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Cg(t,e,n){if((e=lt(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return Ny(t,e);throw zd("Field path arguments must be of type string or ",t,!1,void 0,n)}const hF=new RegExp("[~\\*/\\[\\]]");function Ny(t,e,n){if(e.search(hF)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nf(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new re(Z.INVALID_ARGUMENT,u+t+c)}function pC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Oy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dF extends mC{data(){return super.data()}}function Oy(t,e){return typeof e=="string"?Ny(t,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class fF extends Vy{}function pF(t,e,...n){let i=[];e instanceof Vy&&i.push(e),i=i.concat(n),function(o){const a=o.filter(c=>c instanceof Fy).length,u=o.filter(c=>c instanceof Ff).length;if(a>1||a>0&&u>0)throw new re(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Ff extends fF{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ff(e,n,i)}_apply(e){const n=this._parse(e);return _C(e._query,n),new fo(e.firestore,e.converter,_g(e._query,n))}_parse(e){const n=by(e.firestore);return function(o,a,u,c,f,p,g){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new re(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){PT(g,p);const T=[];for(const C of g)T.push(ET(c,o,C));v={arrayValue:{values:T}}}else v=ET(c,o,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||PT(g,p),v=cF(u,a,g,p==="in"||p==="not-in");return wt.create(f,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mF(t,e,n){const i=e,r=Oy("where",t);return Ff._create(r,i,n)}class Fy extends Vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const c of u)_C(a,c),a=_g(a,c)}(e._query,n),new fo(e.firestore,e.converter,_g(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ET(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new re(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wx(e)&&n.indexOf("/")!==-1)throw new re(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(qe.fromString(n));if(!le.isDocumentKey(i))throw new re(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $0(t,new le(i))}if(n instanceof en)return $0(t,n._key);throw new re(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bf(n)}.`)}function PT(t,e){if(!Array.isArray(t)||t.length===0)throw new re(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _C(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gF{convertValue(e,n="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return co(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>ct(a.doubleValue));return new ky(o)}convertGeoPoint(e){return new Ry(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const n=es(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=qe.fromString(e);Fe(zx(i));const r=new Ku(i.get(1),i.get(3)),o=new le(i.popFirst(5));return r.isEqual(n)||or(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yC extends mC{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Oy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Jh extends yC{data(e={}){return super.data(e)}}class vC{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new nu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Jh(this._firestore,this._userDataWriter,i.key,i,new nu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new Jh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new nu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Jh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new nu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:yF(u.type),doc:c,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){t=$n(t,en);const e=$n(t.firestore,ns);return X2(Mf(e),t._key).then(n=>PC(e,t,n))}class jy extends gF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function vF(t){t=$n(t,fo);const e=$n(t.firestore,ns),n=Mf(e),i=new jy(e);return gC(t._query),J2(n,t._query).then(r=>new vC(e,i,t,r))}function $p(t,e,n,...i){t=$n(t,en);const r=$n(t.firestore,ns),o=by(r);let a;return a=typeof(e=lt(e))=="string"||e instanceof Nf?uF(o,"updateDoc",t._key,e,n,i):lF(o,"updateDoc",t._key,e),By(r,[a.toMutation(t._key,oi.exists(!0))])}function wF(t){return By($n(t.firestore,ns),[new cy(t._key,oi.none())])}function TC(t,e){const n=$n(t.firestore,ns),i=ha(t),r=_F(t.converter,e);return By(n,[aF(by(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,oi.exists(!1))]).then(()=>i)}function EC(t,...e){var n,i,r;t=lt(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||TT(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(TT(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let c,f,p;if(t instanceof en)f=$n(t.firestore,ns),p=Pf(t._key.path),c={next:g=>{e[a]&&e[a](PC(f,t,g))},error:e[a+1],complete:e[a+2]};else{const g=$n(t,fo);f=$n(g.firestore,ns),p=g._query;const v=new jy(f);c={next:T=>{e[a]&&e[a](new vC(f,v,g,T))},error:e[a+1],complete:e[a+2]},gC(t._query)}return function(v,T,C,k){const V=new Ay(k),b=new xy(T,V,C);return v.asyncQueue.enqueueAndForget(async()=>Py(await Ud(v),b)),()=>{V.Za(),v.asyncQueue.enqueueAndForget(async()=>Iy(await Ud(v),b))}}(Mf(f),p,u,c)}function By(t,e){return function(i,r){const o=new Yi;return i.asyncQueue.enqueueAndForget(async()=>U2(await Y2(i),r,o)),o.promise}(Mf(t),e)}function PC(t,e,n){const i=n.docs.get(e._key),r=new jy(t);return new yC(t,r,e._key,i,new nu(n.hasPendingWrites,n.fromCache),e.converter)}function TF(){return new Dy("serverTimestamp")}(function(e,n=!0){(function(r){Qa=r})(Ka),Ai(new li("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new ns(new vO(i.getProvider("auth-internal")),new PO(i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new re(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(f.options.projectId,p)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),zn(F0,"4.7.3",e),zn(F0,"4.7.3","esm2017")})();const IC="@firebase/installations",Uy="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=1e4,xC=`w:${Uy}`,CC="FIS_v2",EF="https://firebaseinstallations.googleapis.com/v1",PF=60*60*1e3,IF="installations",SF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},io=new lo(IF,SF,xF);function AC(t){return t instanceof ci&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC({projectId:t}){return`${EF}/projects/${t}/installations`}function kC(t){return{token:t.token,requestStatus:2,expiresIn:AF(t.expiresIn),creationTime:Date.now()}}async function LC(t,e){const i=(await e.json()).error;return io.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function bC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function CF(t,{refreshToken:e}){const n=bC(t);return n.append("Authorization",RF(e)),n}async function DC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function AF(t){return Number(t.replace("s","000"))}function RF(t){return`${CC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=RC(t),r=bC(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={fid:n,authVersion:CC,appId:t.appId,sdkVersion:xC},u={method:"POST",headers:r,body:JSON.stringify(a)},c=await DC(()=>fetch(i,u));if(c.ok){const f=await c.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:kC(f.authToken)}}else throw await LC("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=/^[cdef][\w-]{21}$/,Ag="";function DF(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=MF(t);return bF.test(n)?n:Ag}catch{return Ag}}function MF(t){return LF(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Map;function OC(t,e){const n=jf(t);VC(n,e),NF(n,e)}function VC(t,e){const n=NC.get(t);if(n)for(const i of n)i(e)}function NF(t,e){const n=OF();n&&n.postMessage({key:t,fid:e}),VF()}let Bs=null;function OF(){return!Bs&&"BroadcastChannel"in self&&(Bs=new BroadcastChannel("[Firebase] FID Change"),Bs.onmessage=t=>{VC(t.data.key,t.data.fid)}),Bs}function VF(){NC.size===0&&Bs&&(Bs.close(),Bs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="firebase-installations-database",jF=1,ro="firebase-installations-store";let Wp=null;function zy(){return Wp||(Wp=_S(FF,jF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ro)}}})),Wp}async function $d(t,e){const n=jf(t),r=(await zy()).transaction(ro,"readwrite"),o=r.objectStore(ro),a=await o.get(n);return await o.put(e,n),await r.done,(!a||a.fid!==e.fid)&&OC(t,e.fid),e}async function FC(t){const e=jf(t),i=(await zy()).transaction(ro,"readwrite");await i.objectStore(ro).delete(e),await i.done}async function Bf(t,e){const n=jf(t),r=(await zy()).transaction(ro,"readwrite"),o=r.objectStore(ro),a=await o.get(n),u=e(a);return u===void 0?await o.delete(n):await o.put(u,n),await r.done,u&&(!a||a.fid!==u.fid)&&OC(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $y(t){let e;const n=await Bf(t.appConfig,i=>{const r=BF(i),o=UF(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Ag?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function BF(t){const e=t||{fid:DF(),registrationStatus:0};return jC(e)}function UF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(io.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=zF(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$F(t)}:{installationEntry:e}}async function zF(t,e){try{const n=await kF(t,e);return $d(t.appConfig,n)}catch(n){throw AC(n)&&n.customData.serverCode===409?await FC(t.appConfig):await $d(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function $F(t){let e=await IT(t.appConfig);for(;e.registrationStatus===1;)await MC(100),e=await IT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await $y(t);return i||n}return e}function IT(t){return Bf(t,e=>{if(!e)throw io.create("installation-not-found");return jC(e)})}function jC(t){return WF(t)?{fid:t.fid,registrationStatus:0}:t}function WF(t){return t.registrationStatus===1&&t.registrationTime+SC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF({appConfig:t,heartbeatServiceProvider:e},n){const i=qF(t,n),r=CF(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={installation:{sdkVersion:xC,appId:t.appId}},u={method:"POST",headers:r,body:JSON.stringify(a)},c=await DC(()=>fetch(i,u));if(c.ok){const f=await c.json();return kC(f)}else throw await LC("Generate Auth Token",c)}function qF(t,{fid:e}){return`${RC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wy(t,e=!1){let n;const i=await Bf(t.appConfig,o=>{if(!BC(o))throw io.create("not-registered");const a=o.authToken;if(!e&&ZF(a))return o;if(a.requestStatus===1)return n=GF(t,e),o;{if(!navigator.onLine)throw io.create("app-offline");const u=YF(o);return n=KF(t,u),u}});return n?await n:i.authToken}async function GF(t,e){let n=await ST(t.appConfig);for(;n.authToken.requestStatus===1;)await MC(100),n=await ST(t.appConfig);const i=n.authToken;return i.requestStatus===0?Wy(t,e):i}function ST(t){return Bf(t,e=>{if(!BC(e))throw io.create("not-registered");const n=e.authToken;return XF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function KF(t,e){try{const n=await HF(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await $d(t.appConfig,i),n}catch(n){if(AC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await FC(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await $d(t.appConfig,i)}throw n}}function BC(t){return t!==void 0&&t.registrationStatus===2}function ZF(t){return t.requestStatus===2&&!QF(t)}function QF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+PF}function YF(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function XF(t){return t.requestStatus===1&&t.requestTime+SC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(t){const e=t,{installationEntry:n,registrationPromise:i}=await $y(e);return i?i.catch(console.error):Wy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(t,e=!1){const n=t;return await tj(n),(await Wy(n,e)).token}async function tj(t){const{registrationPromise:e}=await $y(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){if(!t||!t.options)throw Hp("App Configuration");if(!t.name)throw Hp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Hp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Hp(t){return io.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="installations",ij="installations-internal",rj=t=>{const e=t.getProvider("app").getImmediate(),n=nj(e),i=uo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},sj=t=>{const e=t.getProvider("app").getImmediate(),n=uo(e,UC).getImmediate();return{getId:()=>JF(n),getToken:r=>ej(n,r)}};function oj(){Ai(new li(UC,rj,"PUBLIC")),Ai(new li(ij,sj,"PRIVATE"))}oj();zn(IC,Uy);zn(IC,Uy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="analytics",aj="firebase_id",lj="origin",uj=60*1e3,cj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new yf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new lo("analytics","Analytics",hj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){if(!t.startsWith(Hy)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return dn.warn(e.message),""}return t}function zC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function fj(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function pj(t,e){const n=fj("firebase-js-sdk-policy",{createScriptURL:dj}),i=document.createElement("script"),r=`${Hy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function mj(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function gj(t,e,n,i,r,o){const a=i[r];try{if(a)await e[a];else{const c=(await zC(n)).find(f=>f.measurementId===r);c&&await e[c.appId]}}catch(u){dn.error(u)}t("config",r,o)}async function _j(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);const u=await zC(n);for(const c of a){const f=u.find(g=>g.measurementId===c),p=f&&e[f.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){dn.error(o)}}function yj(t,e,n,i){async function r(o,...a){try{if(o==="event"){const[u,c]=a;await _j(t,e,n,u,c)}else if(o==="config"){const[u,c]=a;await gj(t,e,n,i,u,c)}else if(o==="consent"){const[u,c]=a;t("consent",u,c)}else if(o==="get"){const[u,c,f]=a;t("get",u,c,f)}else if(o==="set"){const[u]=a;t("set",u)}else t(o,...a)}catch(u){dn.error(u)}}return r}function vj(t,e,n,i,r){let o=function(...a){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=yj(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function wj(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Hy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=30,Ej=1e3;class Pj{constructor(e={},n=Ej){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const $C=new Pj;function Ij(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Sj(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:Ij(i)},o=cj.replace("{app-id}",n),a=await fetch(o,r);if(a.status!==200&&a.status!==304){let u="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u})}return a.json()}async function xj(t,e=$C,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw En.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw En.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Rj;return setTimeout(async()=>{u.abort()},uj),WC({appId:i,apiKey:r,measurementId:o},a,u,e)}async function WC(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=$C){var o;const{appId:a,measurementId:u}=t;try{await Cj(i,e)}catch(c){if(u)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:u};throw c}try{const c=await Sj(t);return r.deleteThrottleMetadata(a),c}catch(c){const f=c;if(!Aj(f)){if(r.deleteThrottleMetadata(a),u)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:u};throw c}const p=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?u0(n,r.intervalMillis,Tj):u0(n,r.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return r.setThrottleMetadata(a,g),dn.debug(`Calling attemptFetch again in ${p} millis`),WC(t,g,i,r)}}function Cj(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Aj(t){if(!(t instanceof ci)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Rj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kj(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,a=Object.assign(Object.assign({},i),{send_to:o});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(){if(fS())try{await pS()}catch(t){return dn.warn(En.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bj(t,e,n,i,r,o,a){var u;const c=xj(t);c.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>dn.error(T)),e.push(c);const f=Lj().then(T=>{if(T)return i.getId()}),[p,g]=await Promise.all([c,f]);wj(o)||pj(o,p.measurementId),r("js",new Date);const v=(u=a==null?void 0:a.config)!==null&&u!==void 0?u:{};return v[lj]="firebase",v.update=!0,g!=null&&(v[aj]=g),r("config",p.measurementId,v),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.app=e}_delete(){return delete vu[this.app.options.appId],Promise.resolve()}}let vu={},xT=[];const CT={};let qp="dataLayer",Mj="gtag",AT,HC,RT=!1;function Nj(){const t=[];if(dS()&&t.push("This is a browser extension environment."),Fb()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});dn.warn(n.message)}}function Oj(t,e,n){Nj();const i=t.options.appId;if(!i)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(vu[i]!=null)throw En.create("already-exists",{id:i});if(!RT){mj(qp);const{wrappedGtag:o,gtagCore:a}=vj(vu,xT,CT,qp,Mj);HC=o,AT=a,RT=!0}return vu[i]=bj(t,xT,CT,e,AT,qp,n),new Dj(t)}function Vj(t=W_()){t=lt(t);const e=uo(t,Wd);return e.isInitialized()?e.getImmediate():Fj(t)}function Fj(t,e={}){const n=uo(t,Wd);if(n.isInitialized()){const r=n.getImmediate();if($u(e,n.getOptions()))return r;throw En.create("already-initialized")}return n.initialize({options:e})}function jj(t,e,n,i){t=lt(t),kj(HC,vu[t.app.options.appId],e,n,i).catch(r=>dn.error(r))}const kT="@firebase/analytics",LT="0.10.8";function Bj(){Ai(new li(Wd,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Oj(i,r,n)},"PUBLIC")),Ai(new li("analytics-internal",t,"PRIVATE")),zn(kT,LT),zn(kT,LT,"esm2017");function t(e){try{const n=e.getProvider(Wd).getImmediate();return{logEvent:(i,r,o)=>jj(n,i,r,o)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}Bj();const Uj={apiKey:"AIzaSyA-ZR_VWGeaRLHT-NX-ly4L95GiGrIMCqY",authDomain:"pilani-trails-84cef.firebaseapp.com",projectId:"pilani-trails-84cef",storageBucket:"pilani-trails-84cef.firebasestorage.app",messagingSenderId:"110096860877",appId:"1:110096860877:web:b23c4b91a6f05cf0ac0b84",measurementId:"G-CG49XPR3LQ"},qy=yS(Uj),Dr=fO(qy),vi=nF(qy);let zj=null;try{zj=Vj(qy)}catch(t){console.warn("Firebase Analytics initialization failed:",t)}const Gy=j.createContext({}),po=()=>j.useContext(Gy),$j=({children:t})=>{const[e,n]=j.useState(null),[i,r]=j.useState(!0),o=async(p,g,v)=>{const T=await $S(Dr,p,g);return v&&await eN(T.user,{displayName:v}),T},a=(p,g)=>XM(Dr,p,g),u=()=>{const p=new Ti;return tx(Dr,p)},c=()=>WS(Dr);j.useEffect(()=>iN(Dr,async g=>{if(g)try{console.log("[AuthContext] user signed in:",g.email,"uid:",g.uid);const v=ha(vi,"users",g.uid),T=await wC(v),C=T&&T.exists()?T.data():{};typeof C.isAdmin=="string"&&(C.isAdmin=C.isAdmin.toLowerCase()==="true"),n({...g,...C}),console.log("[AuthContext] userData from Firestore:",C)}catch(v){console.error("[AuthContext] Error loading user data from Firestore:",v),n(g)}else console.log("[AuthContext] no user logged in"),n(null);r(!1)}),[]);const f={currentUser:e,signup:o,login:a,signInWithGoogle:u,logout:c,loading:i};return P.jsx(Gy.Provider,{value:f,children:!i&&t})},qC=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Uf=j.createContext({}),zf=j.createContext(null),$f=typeof document<"u",Ky=$f?j.useLayoutEffect:j.useEffect,GC=j.createContext({strict:!1}),Zy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Wj="framerAppearId",KC="data-"+Zy(Wj);function Hj(t,e,n,i){const{visualElement:r}=j.useContext(Uf),o=j.useContext(GC),a=j.useContext(zf),u=j.useContext(qC).reducedMotion,c=j.useRef();i=i||o.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=c.current;j.useInsertionEffect(()=>{f&&f.update(n,a)});const p=j.useRef(!!(n[KC]&&!window.HandoffComplete));return Ky(()=>{f&&(f.render(),p.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(f.updateFeatures(),!p.current&&f.animationState&&f.animationState.animateChanges(),p.current&&(p.current=!1,window.HandoffComplete=!0))}),f}function da(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qj(t,e,n){return j.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):da(n)&&(n.current=i))},[e])}function ec(t){return typeof t=="string"||Array.isArray(t)}function Wf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yy=["initial",...Qy];function Hf(t){return Wf(t.animate)||Yy.some(e=>ec(t[e]))}function ZC(t){return!!(Hf(t)||t.variants)}function Gj(t,e){if(Hf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||ec(n)?n:void 0,animate:ec(i)?i:void 0}}return t.inherit!==!1?e:{}}function Kj(t){const{initial:e,animate:n}=Gj(t,j.useContext(Uf));return j.useMemo(()=>({initial:e,animate:n}),[bT(e),bT(n)])}function bT(t){return Array.isArray(t)?t.join(" "):t}const DT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tc={};for(const t in DT)tc[t]={isEnabled:e=>DT[t].some(n=>!!e[n])};function Zj(t){for(const e in t)tc[e]={...tc[e],...t[e]}}const Xy=j.createContext({}),QC=j.createContext({}),Qj=Symbol.for("motionComponentSymbol");function Yj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&Zj(t);function o(u,c){let f;const p={...j.useContext(qC),...u,layoutId:Xj(u)},{isStatic:g}=p,v=Kj(u),T=i(u,g);if(!g&&$f){v.visualElement=Hj(r,T,p,e);const C=j.useContext(QC),k=j.useContext(GC).strict;v.visualElement&&(f=v.visualElement.loadFeatures(p,k,t,C))}return j.createElement(Uf.Provider,{value:v},f&&v.visualElement?j.createElement(f,{visualElement:v.visualElement,...p}):null,n(r,u,qj(T,v.visualElement,c),T,g,v.visualElement))}const a=j.forwardRef(o);return a[Qj]=r,a}function Xj({layoutId:t}){const e=j.useContext(Xy).id;return e&&t!==void 0?e+"-"+t:t}function Jj(t){function e(i,r={}){return Yj(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const eB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jy(t){return typeof t!="string"||t.includes("-")?!1:!!(eB.indexOf(t)>-1||/[A-Z]/.test(t))}const Hd={};function tB(t){Object.assign(Hd,t)}const Ec=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mo=new Set(Ec);function YC(t,{layout:e,layoutId:n}){return mo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hd[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),nB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iB=Ec.length;function rB(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<iB;a++){const u=Ec[a];if(t[u]!==void 0){const c=nB[u]||u;o+=`${c}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const XC=t=>e=>typeof e=="string"&&e.startsWith(t),JC=XC("--"),Rg=XC("var(--"),sB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,oB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,is=(t,e,n)=>Math.min(Math.max(n,t),e),go={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wu={...go,transform:t=>is(0,1,t)},Rh={...go,default:1},Tu=t=>Math.round(t*1e5)/1e5,qf=/(-)?([\d]*\.?[\d])+/g,eA=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,aB=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Pc(t){return typeof t=="string"}const Ic=t=>({test:e=>Pc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ir=Ic("deg"),Ci=Ic("%"),fe=Ic("px"),lB=Ic("vh"),uB=Ic("vw"),MT={...Ci,parse:t=>Ci.parse(t)/100,transform:t=>Ci.transform(t*100)},NT={...go,transform:Math.round},tA={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,size:fe,top:fe,right:fe,bottom:fe,left:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,rotate:Ir,rotateX:Ir,rotateY:Ir,rotateZ:Ir,scale:Rh,scaleX:Rh,scaleY:Rh,scaleZ:Rh,skew:Ir,skewX:Ir,skewY:Ir,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:wu,originX:MT,originY:MT,originZ:fe,zIndex:NT,fillOpacity:wu,strokeOpacity:wu,numOctaves:NT};function ev(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let c=!1,f=!1,p=!0;for(const g in e){const v=e[g];if(JC(g)){o[g]=v;continue}const T=tA[g],C=oB(v,T);if(mo.has(g)){if(c=!0,a[g]=C,!p)continue;v!==(T.default||0)&&(p=!1)}else g.startsWith("origin")?(f=!0,u[g]=C):r[g]=C}if(e.transform||(c||i?r.transform=rB(t.transform,n,p,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${v} ${T}`}}const tv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nA(t,e,n){for(const i in e)!fn(e[i])&&!YC(i,n)&&(t[i]=e[i])}function cB({transformTemplate:t},e,n){return j.useMemo(()=>{const i=tv();return ev(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function hB(t,e,n){const i=t.style||{},r={};return nA(r,i,t),Object.assign(r,cB(t,e,n)),t.transformValues?t.transformValues(r):r}function dB(t,e,n){const i={},r=hB(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const fB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fB.has(t)}let iA=t=>!qd(t);function pB(t){t&&(iA=e=>e.startsWith("on")?!qd(e):t(e))}try{pB(require("@emotion/is-prop-valid").default)}catch{}function mB(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(iA(r)||n===!0&&qd(r)||!e&&!qd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function OT(t,e,n){return typeof t=="string"?t:fe.transform(e+n*t)}function gB(t,e,n){const i=OT(e,t.x,t.width),r=OT(n,t.y,t.height);return`${i} ${r}`}const _B={offset:"stroke-dashoffset",array:"stroke-dasharray"},yB={offset:"strokeDashoffset",array:"strokeDasharray"};function vB(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?_B:yB;t[o.offset]=fe.transform(-i);const a=fe.transform(e),u=fe.transform(n);t[o.array]=`${a} ${u}`}function nv(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...f},p,g,v){if(ev(t,f,p,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:C,dimensions:k}=t;T.transform&&(k&&(C.transform=T.transform),delete T.transform),k&&(r!==void 0||o!==void 0||C.transform)&&(C.transformOrigin=gB(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&vB(T,a,u,c,!1)}const rA=()=>({...tv(),attrs:{}}),iv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wB(t,e,n,i){const r=j.useMemo(()=>{const o=rA();return nv(o,e,{enableHardwareAcceleration:!1},iv(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};nA(o,t.style,t),r.style={...o,...r.style}}return r}function TB(t=!1){return(n,i,r,{latestValues:o},a)=>{const c=(Jy(n)?wB:dB)(i,o,a,n),p={...mB(i,typeof n=="string",t),...c,ref:r},{children:g}=i,v=j.useMemo(()=>fn(g)?g.get():g,[g]);return j.createElement(n,{...p,children:v})}}function sA(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const oA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aA(t,e,n,i){sA(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(oA.has(r)?r:Zy(r),e.attrs[r])}function rv(t,e){const{style:n}=t,i={};for(const r in n)(fn(n[r])||e.style&&fn(e.style[r])||YC(r,t))&&(i[r]=n[r]);return i}function lA(t,e){const n=rv(t,e);for(const i in t)if(fn(t[i])||fn(e[i])){const r=Ec.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function sv(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function uA(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gd=t=>Array.isArray(t),EB=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),PB=t=>Gd(t)?t[t.length-1]||0:t;function ed(t){const e=fn(t)?t.get():t;return EB(e)?e.toValue():e}function IB({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:SB(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const cA=t=>(e,n)=>{const i=j.useContext(Uf),r=j.useContext(zf),o=()=>IB(t,e,i,r);return n?o():uA(o)};function SB(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=ed(o[v]);let{initial:a,animate:u}=t;const c=Hf(t),f=ZC(t);e&&f&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let p=n?n.initial===!1:!1;p=p||a===!1;const g=p?u:a;return g&&typeof g!="boolean"&&!Wf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const C=sv(t,T);if(!C)return;const{transitionEnd:k,transition:V,...b}=C;for(const S in b){let A=b[S];if(Array.isArray(A)){const B=p?A.length-1:0;A=A[B]}A!==null&&(r[S]=A)}for(const S in k)r[S]=k[S]}),r}const dt=t=>t;class VT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function xB(t){let e=new VT,n=new VT,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(c,f=!1,p=!1)=>{const g=p&&r,v=g?e:n;return f&&a.add(c),v.add(c)&&g&&r&&(i=e.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const p=e.order[f];p(c),a.has(p)&&(u.schedule(p),t())}r=!1,o&&(o=!1,u.process(c))}};return u}const kh=["prepare","read","update","preRender","render","postRender"],CB=40;function AB(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=kh.reduce((g,v)=>(g[v]=xB(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,CB),1),r.timestamp=g,r.isProcessing=!0,kh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},c=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:kh.reduce((g,v)=>{const T=o[v];return g[v]=(C,k=!1,V=!1)=>(n||c(),T.schedule(C,k,V)),g},{}),cancel:g=>kh.forEach(v=>o[v].cancel(g)),state:r,steps:o}}const{schedule:We,cancel:lr,state:zt,steps:Gp}=AB(typeof requestAnimationFrame<"u"?requestAnimationFrame:dt,!0),RB={useVisualState:cA({scrapeMotionValuesFromProps:lA,createRenderState:rA,onMount:(t,e,{renderState:n,latestValues:i})=>{We.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),We.render(()=>{nv(n,i,{enableHardwareAcceleration:!1},iv(e.tagName),t.transformTemplate),aA(e,n)})}})},kB={useVisualState:cA({scrapeMotionValuesFromProps:rv,createRenderState:tv})};function LB(t,{forwardMotionProps:e=!1},n,i){return{...Jy(t)?RB:kB,preloadedFeatures:n,useRender:TB(e),createVisualElement:i,Component:t}}function Ki(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const hA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Gf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const bB=t=>e=>hA(e)&&t(e,Gf(e));function Xi(t,e,n,i){return Ki(t,e,bB(n),i)}const DB=(t,e)=>n=>e(t(n)),Qr=(...t)=>t.reduce(DB);function dA(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const FT=dA("dragHorizontal"),jT=dA("dragVertical");function fA(t){let e=!1;if(t==="y")e=jT();else if(t==="x")e=FT();else{const n=FT(),i=jT();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function pA(){const t=fA(!0);return t?(t(),!1):!0}class fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function BT(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||pA())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&We.update(()=>u[i](o,a))};return Xi(t.current,n,r,{passive:!t.getProps()[i]})}class MB extends fs{mount(){this.unmount=Qr(BT(this.node,!0),BT(this.node,!1))}unmount(){}}class NB extends fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qr(Ki(this.node.current,"focus",()=>this.onFocus()),Ki(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mA=(t,e)=>e?t===e?!0:mA(t,e.parentElement):!1;function Kp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Gf(n))}class OB extends fs{constructor(){super(...arguments),this.removeStartListeners=dt,this.removeEndListeners=dt,this.removeAccessibleListeners=dt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=Xi(window,"pointerup",(u,c)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:p,globalTapTarget:g}=this.node.getProps();We.update(()=>{!g&&!mA(this.node.current,u.target)?p&&p(u,c):f&&f(u,c)})},{passive:!(i.onTap||i.onPointerUp)}),a=Xi(window,"pointercancel",(u,c)=>this.cancelPress(u,c),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Qr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Kp("up",(c,f)=>{const{onTap:p}=this.node.getProps();p&&We.update(()=>p(c,f))})};this.removeEndListeners(),this.removeEndListeners=Ki(this.node.current,"keyup",a),Kp("down",(u,c)=>{this.startPress(u,c)})},n=Ki(this.node.current,"keydown",e),i=()=>{this.isPressing&&Kp("cancel",(o,a)=>this.cancelPress(o,a))},r=Ki(this.node.current,"blur",i);this.removeAccessibleListeners=Qr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&We.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!pA()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&We.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Xi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Ki(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Qr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const kg=new WeakMap,Zp=new WeakMap,VB=t=>{const e=kg.get(t.target);e&&e(t)},FB=t=>{t.forEach(VB)};function jB({root:t,...e}){const n=t||document;Zp.has(n)||Zp.set(n,{});const i=Zp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(FB,{root:t,...e})),i[r]}function BB(t,e,n){const i=jB(e);return kg.set(t,n),i.observe(t),()=>{kg.delete(t),i.unobserve(t)}}const UB={some:0,all:1};class zB extends fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:UB[r]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=f?p:g;v&&v(c)};return BB(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some($B(e,n))&&this.startObserver()}unmount(){}}function $B({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const WB={inView:{Feature:zB},tap:{Feature:OB},focus:{Feature:NB},hover:{Feature:MB}};function gA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function HB(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function qB(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Kf(t,e,n){const i=t.getProps();return sv(i,e,n!==void 0?n:i.custom,HB(t),qB(t))}let ov=dt;const Hs=t=>t*1e3,Ji=t=>t/1e3,GB={current:!1},_A=t=>Array.isArray(t)&&typeof t[0]=="number";function yA(t){return!!(!t||typeof t=="string"&&vA[t]||_A(t)||Array.isArray(t)&&t.every(yA))}const iu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,vA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iu([0,.65,.55,1]),circOut:iu([.55,0,1,.45]),backIn:iu([.31,.01,.66,-.59]),backOut:iu([.33,1.53,.69,.99])};function wA(t){if(t)return _A(t)?iu(t):Array.isArray(t)?t.map(wA):vA[t]}function KB(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:c}={}){const f={[e]:n};c&&(f.offset=c);const p=wA(u);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function ZB(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const TA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,QB=1e-7,YB=12;function XB(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=TA(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>QB&&++u<YB);return a}function Sc(t,e,n,i){if(t===e&&n===i)return dt;const r=o=>XB(o,0,1,t,n);return o=>o===0||o===1?o:TA(r(o),e,i)}const JB=Sc(.42,0,1,1),eU=Sc(0,0,.58,1),EA=Sc(.42,0,.58,1),tU=t=>Array.isArray(t)&&typeof t[0]!="number",PA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IA=t=>e=>1-t(1-e),av=t=>1-Math.sin(Math.acos(t)),SA=IA(av),nU=PA(av),xA=Sc(.33,1.53,.69,.99),lv=IA(xA),iU=PA(lv),rU=t=>(t*=2)<1?.5*lv(t):.5*(2-Math.pow(2,-10*(t-1))),sU={linear:dt,easeIn:JB,easeInOut:EA,easeOut:eU,circIn:av,circInOut:nU,circOut:SA,backIn:lv,backInOut:iU,backOut:xA,anticipate:rU},UT=t=>{if(Array.isArray(t)){ov(t.length===4);const[e,n,i,r]=t;return Sc(e,n,i,r)}else if(typeof t=="string")return sU[t];return t},uv=(t,e)=>n=>!!(Pc(n)&&aB.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),CA=(t,e,n)=>i=>{if(!Pc(i))return i;const[r,o,a,u]=i.match(qf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},oU=t=>is(0,255,t),Qp={...go,transform:t=>Math.round(oU(t))},Us={test:uv("rgb","red"),parse:CA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Qp.transform(t)+", "+Qp.transform(e)+", "+Qp.transform(n)+", "+Tu(wu.transform(i))+")"};function aU(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Lg={test:uv("#"),parse:aU,transform:Us.transform},fa={test:uv("hsl","hue"),parse:CA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ci.transform(Tu(e))+", "+Ci.transform(Tu(n))+", "+Tu(wu.transform(i))+")"},Qt={test:t=>Us.test(t)||Lg.test(t)||fa.test(t),parse:t=>Us.test(t)?Us.parse(t):fa.test(t)?fa.parse(t):Lg.parse(t),transform:t=>Pc(t)?t:t.hasOwnProperty("red")?Us.transform(t):fa.transform(t)},tt=(t,e,n)=>-n*t+n*e+t;function Yp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lU({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;r=Yp(c,u,t+1/3),o=Yp(c,u,t),a=Yp(c,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Xp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},uU=[Lg,Us,fa],cU=t=>uU.find(e=>e.test(t));function zT(t){const e=cU(t);let n=e.parse(t);return e===fa&&(n=lU(n)),n}const AA=(t,e)=>{const n=zT(t),i=zT(e),r={...n};return o=>(r.red=Xp(n.red,i.red,o),r.green=Xp(n.green,i.green,o),r.blue=Xp(n.blue,i.blue,o),r.alpha=tt(n.alpha,i.alpha,o),Us.transform(r))};function hU(t){var e,n;return isNaN(t)&&Pc(t)&&(((e=t.match(qf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(eA))===null||n===void 0?void 0:n.length)||0)>0}const RA={regex:sB,countKey:"Vars",token:"${v}",parse:dt},kA={regex:eA,countKey:"Colors",token:"${c}",parse:Qt.parse},LA={regex:qf,countKey:"Numbers",token:"${n}",parse:go.parse};function Jp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Kd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Jp(n,RA),Jp(n,kA),Jp(n,LA),n}function bA(t){return Kd(t).values}function DA(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Kd(t),o=e.length;return a=>{let u=r;for(let c=0;c<o;c++)c<i?u=u.replace(RA.token,a[c]):c<i+n?u=u.replace(kA.token,Qt.transform(a[c])):u=u.replace(LA.token,Tu(a[c]));return u}}const dU=t=>typeof t=="number"?0:t;function fU(t){const e=bA(t);return DA(t)(e.map(dU))}const rs={test:hU,parse:bA,createTransformer:DA,getAnimatableNone:fU},MA=(t,e)=>n=>`${n>0?e:t}`;function NA(t,e){return typeof t=="number"?n=>tt(t,e,n):Qt.test(t)?AA(t,e):t.startsWith("var(")?MA(t,e):VA(t,e)}const OA=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>NA(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},pU=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=NA(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},VA=(t,e)=>{const n=rs.createTransformer(e),i=Kd(t),r=Kd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Qr(OA(i.values,r.values),n):MA(t,e)},nc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},$T=(t,e)=>n=>tt(t,e,n);function mU(t){return typeof t=="number"?$T:typeof t=="string"?Qt.test(t)?AA:VA:Array.isArray(t)?OA:typeof t=="object"?pU:$T}function gU(t,e,n){const i=[],r=n||mU(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||dt:e;u=Qr(c,u)}i.push(u)}return i}function FA(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(ov(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=gU(e,i,r),u=a.length,c=f=>{let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const g=nc(t[p],t[p+1],f);return a[p](g)};return n?f=>c(is(t[0],t[o-1],f)):c}function _U(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=nc(0,e,i);t.push(tt(n,1,r))}}function yU(t){const e=[0];return _U(e,t.length-1),e}function vU(t,e){return t.map(n=>n*e)}function wU(t,e){return t.map(()=>e||EA).splice(0,t.length-1)}function Zd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=tU(i)?i.map(UT):UT(i),o={done:!1,value:e[0]},a=vU(n&&n.length===e.length?n:yU(e),t),u=FA(a,e,{ease:Array.isArray(r)?r:wU(e,r)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}function jA(t,e){return e?t*(1e3/e):0}const TU=5;function BA(t,e,n){const i=Math.max(e-TU,0);return jA(n-t(i),e-i)}const em=.001,EU=.01,PU=10,IU=.05,SU=1;function xU({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=is(IU,SU,a),t=is(EU,PU,Ji(t)),a<1?(r=f=>{const p=f*a,g=p*t,v=p-n,T=bg(f,a),C=Math.exp(-g);return em-v/T*C},o=f=>{const g=f*a*t,v=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,C=Math.exp(-g),k=bg(Math.pow(f,2),a);return(-r(f)+em>0?-1:1)*((v-T)*C)/k}):(r=f=>{const p=Math.exp(-f*t),g=(f-n)*t+1;return-em+p*g},o=f=>{const p=Math.exp(-f*t),g=(n-f)*(t*t);return p*g});const u=5/t,c=AU(r,o,u);if(t=Hs(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const CU=12;function AU(t,e,n){let i=n;for(let r=1;r<CU;r++)i=i-t(i)/e(i);return i}function bg(t,e){return t*Math.sqrt(1-e*e)}const RU=["duration","bounce"],kU=["stiffness","damping","mass"];function WT(t,e){return e.some(n=>t[n]!==void 0)}function LU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!WT(t,kU)&&WT(t,RU)){const n=xU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function UA({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:c,mass:f,duration:p,velocity:g,isResolvedFromDuration:v}=LU({...i,velocity:-Ji(i.velocity||0)}),T=g||0,C=c/(2*Math.sqrt(u*f)),k=o-r,V=Ji(Math.sqrt(u/f)),b=Math.abs(k)<5;n||(n=b?.01:2),e||(e=b?.005:.5);let S;if(C<1){const A=bg(V,C);S=B=>{const G=Math.exp(-C*V*B);return o-G*((T+C*V*k)/A*Math.sin(A*B)+k*Math.cos(A*B))}}else if(C===1)S=A=>o-Math.exp(-V*A)*(k+(T+V*k)*A);else{const A=V*Math.sqrt(C*C-1);S=B=>{const G=Math.exp(-C*V*B),$=Math.min(A*B,300);return o-G*((T+C*V*k)*Math.sinh($)+A*k*Math.cosh($))/A}}return{calculatedDuration:v&&p||null,next:A=>{const B=S(A);if(v)a.done=A>=p;else{let G=T;A!==0&&(C<1?G=BA(S,A,B):G=0);const $=Math.abs(G)<=n,R=Math.abs(o-B)<=e;a.done=$&&R}return a.value=a.done?o:B,a}}}function HT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:c,restDelta:f=.5,restSpeed:p}){const g=t[0],v={done:!1,value:g},T=I=>u!==void 0&&I<u||c!==void 0&&I>c,C=I=>u===void 0?c:c===void 0||Math.abs(u-I)<Math.abs(c-I)?u:c;let k=n*e;const V=g+k,b=a===void 0?V:a(V);b!==V&&(k=b-g);const S=I=>-k*Math.exp(-I/i),A=I=>b+S(I),B=I=>{const D=S(I),M=A(I);v.done=Math.abs(D)<=f,v.value=v.done?b:M};let G,$;const R=I=>{T(v.value)&&(G=I,$=UA({keyframes:[v.value,C(v.value)],velocity:BA(A,I,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return R(0),{calculatedDuration:null,next:I=>{let D=!1;return!$&&G===void 0&&(D=!0,B(I),R(I)),G!==void 0&&I>G?$.next(I-G):(!D&&B(I),v)}}}const bU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>We.update(e,!0),stop:()=>lr(e),now:()=>zt.isProcessing?zt.timestamp:performance.now()}},qT=2e4;function GT(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<qT;)e+=n,i=t.next(e);return e>=qT?1/0:e}const DU={decay:HT,inertia:HT,tween:Zd,keyframes:Zd,spring:UA};function Qd({autoplay:t=!0,delay:e=0,driver:n=bU,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:c,onStop:f,onComplete:p,onUpdate:g,...v}){let T=1,C=!1,k,V;const b=()=>{V=new Promise(te=>{k=te})};b();let S;const A=DU[r]||Zd;let B;A!==Zd&&typeof i[0]!="number"&&(B=FA([0,100],i,{clamp:!1}),i=[0,100]);const G=A({...v,keyframes:i});let $;u==="mirror"&&($=A({...v,keyframes:[...i].reverse(),velocity:-(v.velocity||0)}));let R="idle",I=null,D=null,M=null;G.calculatedDuration===null&&o&&(G.calculatedDuration=GT(G));const{calculatedDuration:F}=G;let U=1/0,N=1/0;F!==null&&(U=F+a,N=U*(o+1)-a);let Te=0;const ze=te=>{if(D===null)return;T>0&&(D=Math.min(D,te)),T<0&&(D=Math.min(te-N/T,D)),I!==null?Te=I:Te=Math.round(te-D)*T;const pe=Te-e*(T>=0?1:-1),Pe=T>=0?pe<0:pe>N;Te=Math.max(pe,0),R==="finished"&&I===null&&(Te=N);let De=Te,Ee=G;if(o){const hr=Math.min(Te,N)/U;let pn=Math.floor(hr),Ft=hr%1;!Ft&&hr>=1&&(Ft=1),Ft===1&&pn--,pn=Math.min(pn,o+1),!!(pn%2)&&(u==="reverse"?(Ft=1-Ft,a&&(Ft-=a/U)):u==="mirror"&&(Ee=$)),De=is(0,1,Ft)*U}const ce=Pe?{done:!1,value:i[0]}:Ee.next(De);B&&(ce.value=B(ce.value));let{done:st}=ce;!Pe&&F!==null&&(st=T>=0?Te>=N:Te<=0);const Cn=I===null&&(R==="finished"||R==="running"&&st);return g&&g(ce.value),Cn&&K(),ce},Se=()=>{S&&S.stop(),S=void 0},Ke=()=>{R="idle",Se(),k(),b(),D=M=null},K=()=>{R="finished",p&&p(),Se(),k()},ae=()=>{if(C)return;S||(S=n(ze));const te=S.now();c&&c(),I!==null?D=te-I:(!D||R==="finished")&&(D=te),R==="finished"&&b(),M=D,I=null,R="running",S.start()};t&&ae();const J={then(te,pe){return V.then(te,pe)},get time(){return Ji(Te)},set time(te){te=Hs(te),Te=te,I!==null||!S||T===0?I=te:D=S.now()-te/T},get duration(){const te=G.calculatedDuration===null?GT(G):G.calculatedDuration;return Ji(te)},get speed(){return T},set speed(te){te===T||!S||(T=te,J.time=Ji(Te))},get state(){return R},play:ae,pause:()=>{R="paused",I=Te},stop:()=>{C=!0,R!=="idle"&&(R="idle",f&&f(),Ke())},cancel:()=>{M!==null&&ze(M),Ke()},complete:()=>{R="finished"},sample:te=>(D=0,ze(te))};return J}function MU(t){let e;return()=>(e===void 0&&(e=t()),e)}const NU=MU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),OU=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Lh=10,VU=2e4,FU=(t,e)=>e.type==="spring"||t==="backgroundColor"||!yA(e.ease);function jU(t,e,{onUpdate:n,onComplete:i,...r}){if(!(NU()&&OU.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,c,f=!1;const p=()=>{c=new Promise(A=>{u=A})};p();let{keyframes:g,duration:v=300,ease:T,times:C}=r;if(FU(e,r)){const A=Qd({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const G=[];let $=0;for(;!B.done&&$<VU;)B=A.sample($),G.push(B.value),$+=Lh;C=void 0,g=G,v=$-Lh,T="linear"}const k=KB(t.owner.current,e,g,{...r,duration:v,ease:T,times:C}),V=()=>{f=!1,k.cancel()},b=()=>{f=!0,We.update(V),u(),p()};return k.onfinish=()=>{f||(t.set(ZB(g,r)),i&&i(),b())},{then(A,B){return c.then(A,B)},attachTimeline(A){return k.timeline=A,k.onfinish=null,dt},get time(){return Ji(k.currentTime||0)},set time(A){k.currentTime=Hs(A)},get speed(){return k.playbackRate},set speed(A){k.playbackRate=A},get duration(){return Ji(v)},play:()=>{a||(k.play(),lr(V))},pause:()=>k.pause(),stop:()=>{if(a=!0,k.playState==="idle")return;const{currentTime:A}=k;if(A){const B=Qd({...r,autoplay:!1});t.setWithVelocity(B.sample(A-Lh).value,B.sample(A).value,Lh)}b()},complete:()=>{f||k.finish()},cancel:b}}function BU({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:dt,pause:dt,stop:dt,then:o=>(o(),Promise.resolve()),cancel:dt,complete:dt});return e?Qd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const UU={type:"spring",stiffness:500,damping:25,restSpeed:10},zU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$U={type:"keyframes",duration:.8},WU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HU=(t,{keyframes:e})=>e.length>2?$U:mo.has(t)?t.startsWith("scale")?zU(e[1]):UU:WU,Dg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(rs.test(e)||e==="0")&&!e.startsWith("url(")),qU=new Set(["brightness","contrast","saturate","opacity"]);function GU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(qf)||[];if(!i)return t;const r=n.replace(i,"");let o=qU.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const KU=/([a-z-]*)\(.*?\)/g,Mg={...rs,getAnimatableNone:t=>{const e=t.match(KU);return e?e.map(GU).join(" "):t}},ZU={...tA,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:Mg,WebkitFilter:Mg},cv=t=>ZU[t];function zA(t,e){let n=cv(t);return n!==Mg&&(n=rs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $A=t=>/^0[^.\s]+$/.test(t);function QU(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||$A(t)}function YU(t,e,n,i){const r=Dg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const c=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),QU(o[f])&&c.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&c.length&&u)for(let f=0;f<c.length;f++){const p=c[f];o[p]=zA(e,u)}return o}function XU({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:c,elapsed:f,...p}){return!!Object.keys(p).length}function hv(t,e){return t[e]||t.default||t}const JU={skipAnimations:!1},dv=(t,e,n,i={})=>r=>{const o=hv(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Hs(a);const c=YU(e,t,n,o),f=c[0],p=c[c.length-1],g=Dg(t,f),v=Dg(t,p);let T={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:C=>{e.set(C),o.onUpdate&&o.onUpdate(C)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(XU(o)||(T={...T,...HU(t,T)}),T.duration&&(T.duration=Hs(T.duration)),T.repeatDelay&&(T.repeatDelay=Hs(T.repeatDelay)),!g||!v||GB.current||o.type===!1||JU.skipAnimations)return BU(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const C=jU(e,t,T);if(C)return C}return Qd(T)};function Yd(t){return!!(fn(t)&&t.add)}const WA=t=>/^\-?\d*\.?\d+$/.test(t);function fv(t,e){t.indexOf(e)===-1&&t.push(e)}function pv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class mv{constructor(){this.subscriptions=[]}add(e){return fv(this.subscriptions,e),()=>pv(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ez=t=>!isNaN(parseFloat(t));class tz{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=zt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,We.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>We.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=ez(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new mv);const i=this.events[e].add(n);return e==="change"?()=>{i(),We.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jA(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ua(t,e){return new tz(t,e)}const HA=t=>e=>e.test(t),nz={test:t=>t==="auto",parse:t=>t},qA=[go,fe,Ci,Ir,uB,lB,nz],Hl=t=>qA.find(HA(t)),iz=[...qA,Qt,rs],rz=t=>iz.find(HA(t));function sz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ua(n))}function oz(t,e){const n=Kf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=PB(o[a]);sz(t,a,u)}}function az(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const c=o[u],f=e[c];let p=null;Array.isArray(f)&&(p=f[0]),p===null&&(p=(r=(i=n[c])!==null&&i!==void 0?i:t.readValue(c))!==null&&r!==void 0?r:e[c]),p!=null&&(typeof p=="string"&&(WA(p)||$A(p))?p=parseFloat(p):!rz(p)&&rs.test(f)&&(p=zA(c,f)),t.addValue(c,Ua(p,{owner:t})),n[c]===void 0&&(n[c]=p),p!==null&&t.setBaseTarget(c,p))}}function lz(t,e){return e?(e[t]||e.default||e).from:void 0}function uz(t,e,n){const i={};for(const r in t){const o=lz(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function cz({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function hz(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function GA(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");i&&(o=i);const f=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const v=t.getValue(g),T=u[g];if(!v||T===void 0||p&&cz(p,g))continue;const C={delay:n,elapsed:0,...hv(o||{},g)};if(window.HandoffAppearAnimations){const b=t.getProps()[KC];if(b){const S=window.HandoffAppearAnimations(b,g,v,We);S!==null&&(C.elapsed=S,C.isHandoff=!0)}}let k=!C.isHandoff&&!hz(v,T);if(C.type==="spring"&&(v.getVelocity()||C.velocity)&&(k=!1),v.animation&&(k=!1),k)continue;v.start(dv(g,v,T,t.shouldReduceMotion&&mo.has(g)?{type:!1}:C));const V=v.animation;Yd(c)&&(c.add(g),V.then(()=>c.remove(g))),f.push(V)}return a&&Promise.all(f).then(()=>{a&&oz(t,a)}),f}function Ng(t,e,n={}){const i=Kf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(GA(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:g}=r;return dz(t,e,f+c,p,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[c,f]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function dz(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,c=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(fz).forEach((f,p)=>{f.notify("AnimationStart",e),a.push(Ng(f,e,{...o,delay:n+c(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function fz(t,e){return t.sortNodePosition(e)}function pz(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Ng(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Ng(t,e,n);else{const r=typeof e=="function"?Kf(t,e,n.custom):e;i=Promise.all(GA(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const mz=[...Qy].reverse(),gz=Qy.length;function _z(t){return e=>Promise.all(e.map(({animation:n,options:i})=>pz(t,n,i)))}function yz(t){let e=_z(t);const n=wz();let i=!0;const r=(c,f)=>{const p=Kf(t,f);if(p){const{transition:g,transitionEnd:v,...T}=p;c={...c,...T,...v}}return c};function o(c){e=c(t)}function a(c,f){const p=t.getProps(),g=t.getVariantContext(!0)||{},v=[],T=new Set;let C={},k=1/0;for(let b=0;b<gz;b++){const S=mz[b],A=n[S],B=p[S]!==void 0?p[S]:g[S],G=ec(B),$=S===f?A.isActive:null;$===!1&&(k=b);let R=B===g[S]&&B!==p[S]&&G;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),A.protectedKeys={...C},!A.isActive&&$===null||!B&&!A.prevProp||Wf(B)||typeof B=="boolean")continue;let D=vz(A.prevProp,B)||S===f&&A.isActive&&!R&&G||b>k&&G,M=!1;const F=Array.isArray(B)?B:[B];let U=F.reduce(r,{});$===!1&&(U={});const{prevResolvedValues:N={}}=A,Te={...N,...U},ze=Se=>{D=!0,T.has(Se)&&(M=!0,T.delete(Se)),A.needsAnimating[Se]=!0};for(const Se in Te){const Ke=U[Se],K=N[Se];if(C.hasOwnProperty(Se))continue;let ae=!1;Gd(Ke)&&Gd(K)?ae=!gA(Ke,K):ae=Ke!==K,ae?Ke!==void 0?ze(Se):T.add(Se):Ke!==void 0&&T.has(Se)?ze(Se):A.protectedKeys[Se]=!0}A.prevProp=B,A.prevResolvedValues=U,A.isActive&&(C={...C,...U}),i&&t.blockInitialAnimation&&(D=!1),D&&(!R||M)&&v.push(...F.map(Se=>({animation:Se,options:{type:S,...c}})))}if(T.size){const b={};T.forEach(S=>{const A=t.getBaseTarget(S);A!==void 0&&(b[S]=A)}),v.push({animation:b})}let V=!!v.length;return i&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(V=!1),i=!1,V?e(v):Promise.resolve()}function u(c,f,p){var g;if(n[c].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var C;return(C=T.animationState)===null||C===void 0?void 0:C.setActive(c,f)}),n[c].isActive=f;const v=a(p,c);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function vz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!gA(e,t):!1}function As(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wz(){return{animate:As(!0),whileInView:As(),whileHover:As(),whileTap:As(),whileDrag:As(),whileFocus:As(),exit:As()}}class Tz extends fs{constructor(e){super(e),e.animationState||(e.animationState=yz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Wf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Ez=0;class Pz extends fs{constructor(){super(...arguments),this.id=Ez++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Iz={animation:{Feature:Tz},exit:{Feature:Pz}},KT=(t,e)=>Math.abs(t-e);function Sz(t,e){const n=KT(t.x,e.x),i=KT(t.y,e.y);return Math.sqrt(n**2+i**2)}class KA{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=nm(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=Sz(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:C}=g,{timestamp:k}=zt;this.history.push({...C,timestamp:k});const{onStart:V,onMove:b}=this.handlers;v||(V&&V(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=tm(v,this.transformPagePoint),We.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:C,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=nm(g.type==="pointercancel"?this.lastMoveEventInfo:tm(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,V),C&&C(g,V)},!hA(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Gf(e),u=tm(a,this.transformPagePoint),{point:c}=u,{timestamp:f}=zt;this.history=[{...c,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,nm(u,this.history)),this.removeListeners=Qr(Xi(this.contextWindow,"pointermove",this.handlePointerMove),Xi(this.contextWindow,"pointerup",this.handlePointerUp),Xi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function tm(t,e){return e?{point:e(t.point)}:t}function ZT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nm({point:t},e){return{point:t,delta:ZT(t,ZA(e)),offset:ZT(t,xz(e)),velocity:Cz(e,.1)}}function xz(t){return t[0]}function ZA(t){return t[t.length-1]}function Cz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=ZA(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Hs(e)));)n--;if(!i)return{x:0,y:0};const o=Ji(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function In(t){return t.max-t.min}function Og(t,e=0,n=.01){return Math.abs(t-e)<=n}function QT(t,e,n,i=.5){t.origin=i,t.originPoint=tt(e.min,e.max,t.origin),t.scale=In(n)/In(e),(Og(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(Og(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Eu(t,e,n,i){QT(t.x,e.x,n.x,i?i.originX:void 0),QT(t.y,e.y,n.y,i?i.originY:void 0)}function YT(t,e,n){t.min=n.min+e.min,t.max=t.min+In(e)}function Az(t,e,n){YT(t.x,e.x,n.x),YT(t.y,e.y,n.y)}function XT(t,e,n){t.min=e.min-n.min,t.max=t.min+In(e)}function Pu(t,e,n){XT(t.x,e.x,n.x),XT(t.y,e.y,n.y)}function Rz(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tt(n,t,i.max):Math.min(t,n)),t}function JT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kz(t,{top:e,left:n,bottom:i,right:r}){return{x:JT(t.x,n,r),y:JT(t.y,e,i)}}function eE(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Lz(t,e){return{x:eE(t.x,e.x),y:eE(t.y,e.y)}}function bz(t,e){let n=.5;const i=In(t),r=In(e);return r>i?n=nc(e.min,e.max-i,t.min):i>r&&(n=nc(t.min,t.max-r,e.min)),is(0,1,n)}function Dz(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Vg=.35;function Mz(t=Vg){return t===!1?t=0:t===!0&&(t=Vg),{x:tE(t,"left","right"),y:tE(t,"top","bottom")}}function tE(t,e,n){return{min:nE(t,e),max:nE(t,n)}}function nE(t,e){return typeof t=="number"?t:t[e]||0}const iE=()=>({translate:0,scale:1,origin:0,originPoint:0}),pa=()=>({x:iE(),y:iE()}),rE=()=>({min:0,max:0}),yt=()=>({x:rE(),y:rE()});function Vn(t){return[t("x"),t("y")]}function QA({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Nz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Oz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function im(t){return t===void 0||t===1}function Fg({scale:t,scaleX:e,scaleY:n}){return!im(t)||!im(e)||!im(n)}function bs(t){return Fg(t)||YA(t)||t.z||t.rotate||t.rotateX||t.rotateY}function YA(t){return sE(t.x)||sE(t.y)}function sE(t){return t&&t!=="0%"}function Xd(t,e,n){const i=t-n,r=e*i;return n+r}function oE(t,e,n,i,r){return r!==void 0&&(t=Xd(t,r,i)),Xd(t,n,i)+e}function jg(t,e=0,n=1,i,r){t.min=oE(t.min,e,n,i,r),t.max=oE(t.max,e,n,i,r)}function XA(t,{x:e,y:n}){jg(t.x,e.translate,e.scale,e.originPoint),jg(t.y,n.translate,n.scale,n.originPoint)}function Vz(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ma(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,XA(t,a)),i&&bs(o.latestValues)&&ma(t,o.latestValues))}e.x=aE(e.x),e.y=aE(e.y)}function aE(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Cr(t,e){t.min=t.min+e,t.max=t.max+e}function lE(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=tt(t.min,t.max,o);jg(t,e[n],e[i],a,e.scale)}const Fz=["x","scaleX","originX"],jz=["y","scaleY","originY"];function ma(t,e){lE(t.x,e,Fz),lE(t.y,e,jz)}function JA(t,e){return QA(Oz(t.getBoundingClientRect(),e))}function Bz(t,e,n){const i=JA(t,n),{scroll:r}=e;return r&&(Cr(i.x,r.offset.x),Cr(i.y,r.offset.y)),i}const e1=({current:t})=>t?t.ownerDocument.defaultView:null,Uz=new WeakMap;class zz{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gf(p,"page").point)},o=(p,g)=>{const{drag:v,dragPropagation:T,onDragStart:C}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=fA(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vn(V=>{let b=this.getAxisMotionValue(V).get()||0;if(Ci.test(b)){const{projection:S}=this.visualElement;if(S&&S.layout){const A=S.layout.layoutBox[V];A&&(b=In(A)*(parseFloat(b)/100))}}this.originPoint[V]=b}),C&&We.update(()=>C(p,g),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(p,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:C,onDrag:k}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:V}=g;if(T&&this.currentDirection===null){this.currentDirection=$z(V),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",g.point,V),this.updateAxis("y",g.point,V),this.visualElement.render(),k&&k(p,g)},u=(p,g)=>this.stop(p,g),c=()=>Vn(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new KA(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:e1(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&We.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!bh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=Rz(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&da(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=kz(r.layoutBox,n):this.constraints=!1,this.elastic=Mz(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Dz(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!da(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=Bz(i,r.root,this.visualElement.getTransformPagePoint());let a=Lz(r.layout.layoutBox,o);if(n){const u=n(Nz(a));this.hasMutatedConstraints=!!u,u&&(a=QA(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=Vn(p=>{if(!bh(p,n,this.currentDirection))return;let g=c&&c[p]||{};a&&(g={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,C={type:"inertia",velocity:i?e[p]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(p,C)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(dv(e,i,0,n))}stopAnimation(){Vn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Vn(n=>{const{drag:i}=this.getProps();if(!bh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-tt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!da(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Vn(a=>{const u=this.getAxisMotionValue(a);if(u){const c=u.get();r[a]=bz({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Vn(a=>{if(!bh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];u.set(tt(c,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;Uz.set(this.visualElement,this);const e=this.visualElement.current,n=Xi(e,"pointerdown",c=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();da(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=Ki(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Vn(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=c[p].translate,g.set(g.get()+c[p].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Vg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function bh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $z(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Wz extends fs{constructor(e){super(e),this.removeGroupControls=dt,this.removeListeners=dt,this.controls=new zz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const uE=t=>(e,n)=>{t&&We.update(()=>t(e,n))};class Hz extends fs{constructor(){super(...arguments),this.removePointerDownListener=dt}onPointerDown(e){this.session=new KA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:e1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:uE(e),onStart:uE(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&We.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=Xi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function qz(){const t=j.useContext(zf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=j.useId();return j.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const td={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ql={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(fe.test(t))t=parseFloat(t);else return t;const n=cE(t,e.target.x),i=cE(t,e.target.y);return`${n}% ${i}%`}},Gz={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=rs.parse(t);if(r.length>5)return i;const o=rs.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=c;const f=tt(u,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class Kz extends qs.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;tB(Zz),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),td.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||We.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function t1(t){const[e,n]=qz(),i=j.useContext(Xy);return qs.createElement(Kz,{...t,layoutGroup:i,switchLayoutGroup:j.useContext(QC),isPresent:e,safeToRemove:n})}const Zz={borderRadius:{...ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ql,borderTopRightRadius:ql,borderBottomLeftRadius:ql,borderBottomRightRadius:ql,boxShadow:Gz},n1=["TopLeft","TopRight","BottomLeft","BottomRight"],Qz=n1.length,hE=t=>typeof t=="string"?parseFloat(t):t,dE=t=>typeof t=="number"||fe.test(t);function Yz(t,e,n,i,r,o){r?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,Xz(i)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,Jz(i))):o&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<Qz;a++){const u=`border${n1[a]}Radius`;let c=fE(e,u),f=fE(n,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||dE(c)===dE(f)?(t[u]=Math.max(tt(hE(c),hE(f),i),0),(Ci.test(f)||Ci.test(c))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,i))}function fE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Xz=i1(0,.5,SA),Jz=i1(.5,.95,dt);function i1(t,e,n){return i=>i<t?0:i>e?1:n(nc(t,e,i))}function pE(t,e){t.min=e.min,t.max=e.max}function On(t,e){pE(t.x,e.x),pE(t.y,e.y)}function mE(t,e,n,i,r){return t-=e,t=Xd(t,1/n,i),r!==void 0&&(t=Xd(t,1/r,i)),t}function e4(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ci.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=tt(o.min,o.max,i);t===o&&(u-=e),t.min=mE(t.min,e,n,u,r),t.max=mE(t.max,e,n,u,r)}function gE(t,e,[n,i,r],o,a){e4(t,e[n],e[i],e[r],e.scale,o,a)}const t4=["x","scaleX","originX"],n4=["y","scaleY","originY"];function _E(t,e,n,i){gE(t.x,e,t4,n?n.x:void 0,i?i.x:void 0),gE(t.y,e,n4,n?n.y:void 0,i?i.y:void 0)}function yE(t){return t.translate===0&&t.scale===1}function r1(t){return yE(t.x)&&yE(t.y)}function i4(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function s1(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function vE(t){return In(t.x)/In(t.y)}class r4{constructor(){this.members=[]}add(e){fv(this.members,e),e.scheduleRender()}remove(e){if(pv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wE(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:f,rotateY:p}=n;c&&(i+=`rotate(${c}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const s4=(t,e)=>t.depth-e.depth;class o4{constructor(){this.children=[],this.isDirty=!1}add(e){fv(this.children,e),this.isDirty=!0}remove(e){pv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(s4),this.isDirty=!1,this.children.forEach(e)}}function a4(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(lr(i),t(o-e))};return We.read(i,!0),()=>lr(i)}function l4(t){window.MotionDebug&&window.MotionDebug.record(t)}function u4(t){return t instanceof SVGElement&&t.tagName!=="svg"}function c4(t,e,n){const i=fn(t)?t:Ua(t);return i.start(dv("",i,e,n)),i.animation}const TE=["","X","Y","Z"],h4={visibility:"hidden"},EE=1e3;let d4=0;const Ds={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function o1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=d4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ds.totalNodes=Ds.resolvedTargetDeltas=Ds.recalculatedProjection=0,this.nodes.forEach(m4),this.nodes.forEach(w4),this.nodes.forEach(T4),this.nodes.forEach(g4),l4(Ds)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new o4)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new mv),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=u4(a),this.instance=a;const{layoutId:c,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||c)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=a4(v,250),td.hasAnimatedSinceResize&&(td.hasAnimatedSinceResize=!1,this.nodes.forEach(IE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||p.getDefaultTransition()||x4,{onLayoutAnimationStart:V,onLayoutAnimationComplete:b}=p.getProps(),S=!this.targetLayout||!s1(this.targetLayout,C)||T,A=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||v&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,A);const B={...hv(k,"layout"),onPlay:V,onComplete:b};(p.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||IE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(E4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(PE);return}this.isUpdating||this.nodes.forEach(y4),this.isUpdating=!1,this.nodes.forEach(v4),this.nodes.forEach(f4),this.nodes.forEach(p4),this.clearAllSnapshots();const u=performance.now();zt.delta=is(0,1e3/60,u-zt.timestamp),zt.timestamp=u,zt.isProcessing=!0,Gp.update.process(zt),Gp.preRender.process(zt),Gp.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(_4),this.sharedNodes.forEach(P4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,We.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){We.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!r1(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&(u||bs(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),C4(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return yt();const u=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Cr(u.x,c.offset.x),Cr(u.y,c.offset.y)),u}removeElementScroll(a){const u=yt();On(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:p,options:g}=f;if(f!==this.root&&p&&g.layoutScroll){if(p.isRoot){On(u,a);const{scroll:v}=this.root;v&&(Cr(u.x,-v.offset.x),Cr(u.y,-v.offset.y))}Cr(u.x,p.offset.x),Cr(u.y,p.offset.y)}}return u}applyTransform(a,u=!1){const c=yt();On(c,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ma(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),bs(p.latestValues)&&ma(c,p.latestValues)}return bs(this.latestValues)&&ma(c,this.latestValues),c}removeTransform(a){const u=yt();On(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!bs(f.latestValues))continue;Fg(f.latestValues)&&f.updateSnapshot();const p=yt(),g=f.measurePageBox();On(p,g),_E(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return bs(this.latestValues)&&_E(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=zt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Pu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Az(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):On(this.target,this.layout.layoutBox),XA(this.target,this.targetDelta)):On(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Pu(this.relativeTargetOrigin,this.target,T.target),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ds.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Fg(this.parent.latestValues)||YA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(f=!1),f)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;On(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;Vz(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:C}=u;if(!C){this.projectionTransform&&(this.projectionDelta=pa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=pa(),this.projectionDeltaWithTransform=pa());const k=this.projectionTransform;Eu(this.projectionDelta,this.layoutCorrected,C,this.latestValues),this.projectionTransform=wE(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),Ds.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const c=this.snapshot,f=c?c.latestValues:{},p={...this.latestValues},g=pa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=yt(),T=c?c.source:void 0,C=this.layout?this.layout.source:void 0,k=T!==C,V=this.getStack(),b=!V||V.members.length<=1,S=!!(k&&!b&&this.options.crossfade===!0&&!this.path.some(S4));this.animationProgress=0;let A;this.mixTargetDelta=B=>{const G=B/1e3;SE(g.x,a.x,G),SE(g.y,a.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),I4(this.relativeTarget,this.relativeTargetOrigin,v,G),A&&i4(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=yt()),On(A,this.relativeTarget)),k&&(this.animationValues=p,Yz(p,f,this.latestValues,G,S,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=We.update(()=>{td.hasAnimatedSinceResize=!0,this.currentAnimation=c4(0,EE,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(EE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:p}=a;if(!(!u||!c||!f)){if(this!==a&&this.layout&&f&&a1(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||yt();const g=In(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const v=In(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+v}On(u,c),ma(u,p),Eu(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new r4),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(u=!0),!u)return;const f={};for(let p=0;p<TE.length;p++){const g="rotate"+TE[p];c[g]&&(f[g]=c[g],a.setStaticValue(g,0))}a.render();for(const p in f)a.setStaticValue(p,f[p]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return h4;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=ed(a==null?void 0:a.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=ed(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!bs(this.latestValues)&&(k.transform=p?p({},""):"none",this.hasProjected=!1),k}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=wE(this.projectionDeltaWithTransform,this.treeScale,v),p&&(f.transform=p(v,f.transform));const{x:T,y:C}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${C.origin*100}% 0`,g.animationValues?f.opacity=g===this?(c=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const k in Hd){if(v[k]===void 0)continue;const{correct:V,applyTo:b}=Hd[k],S=f.transform==="none"?v[k]:V(v[k],g);if(b){const A=b.length;for(let B=0;B<A;B++)f[b[B]]=S}else f[k]=S}return this.options.layoutId&&(f.pointerEvents=g===this?ed(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(PE),this.root.sharedNodes.clear()}}}function f4(t){t.updateLayout()}function p4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Vn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=In(v);v.min=i[g].min,v.max=v.min+T}):a1(o,n.layoutBox,i)&&Vn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=In(i[g]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=pa();Eu(u,i,n.layoutBox);const c=pa();a?Eu(c,t.applyTransform(r,!0),n.measuredBox):Eu(c,i,n.layoutBox);const f=!r1(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const C=yt();Pu(C,n.layoutBox,v.layoutBox);const k=yt();Pu(k,i,T.layoutBox),s1(C,k)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=C,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function m4(t){Ds.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function g4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _4(t){t.clearSnapshot()}function PE(t){t.clearMeasurements()}function y4(t){t.isLayoutDirty=!1}function v4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function IE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function w4(t){t.resolveTargetDelta()}function T4(t){t.calcProjection()}function E4(t){t.resetRotation()}function P4(t){t.removeLeadSnapshot()}function SE(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function xE(t,e,n,i){t.min=tt(e.min,n.min,i),t.max=tt(e.max,n.max,i)}function I4(t,e,n,i){xE(t.x,e.x,n.x,i),xE(t.y,e.y,n.y,i)}function S4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const x4={duration:.45,ease:[.4,0,.1,1]},CE=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),AE=CE("applewebkit/")&&!CE("chrome/")?Math.round:dt;function RE(t){t.min=AE(t.min),t.max=AE(t.max)}function C4(t){RE(t.x),RE(t.y)}function a1(t,e,n){return t==="position"||t==="preserve-aspect"&&!Og(vE(e),vE(n),.2)}const A4=o1({attachResizeListener:(t,e)=>Ki(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rm={current:void 0},l1=o1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rm.current){const t=new A4({});t.mount(window),t.setOptions({layoutScroll:!0}),rm.current=t}return rm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),R4={pan:{Feature:Hz},drag:{Feature:Wz,ProjectionNode:l1,MeasureLayout:t1}},k4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function L4(t){const e=k4.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Bg(t,e,n=1){const[i,r]=L4(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return WA(a)?parseFloat(a):a}else return Rg(r)?Bg(r,e,n+1):r}function b4(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!Rg(o))return;const a=Bg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!Rg(o))continue;const a=Bg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const D4=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),u1=t=>D4.has(t),M4=t=>Object.keys(t).some(u1),kE=t=>t===go||t===fe,LE=(t,e)=>parseFloat(t.split(", ")[e]),bE=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return LE(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?LE(o[1],t):0}},N4=new Set(["x","y","z"]),O4=Ec.filter(t=>!N4.has(t));function V4(t){const e=[];return O4.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const za={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:bE(4,13),y:bE(5,14)};za.translateX=za.x;za.translateY=za.y;const F4=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=za[f](i,o)}),e.render();const c=e.measureViewportBox();return n.forEach(f=>{const p=e.getValue(f);p&&p.jump(u[f]),t[f]=za[f](c,o)}),t},j4=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(u1);let o=[],a=!1;const u=[];if(r.forEach(c=>{const f=t.getValue(c);if(!t.hasValue(c))return;let p=n[c],g=Hl(p);const v=e[c];let T;if(Gd(v)){const C=v.length,k=v[0]===null?1:0;p=v[k],g=Hl(p);for(let V=k;V<C&&v[V]!==null;V++)T?ov(Hl(v[V])===T):T=Hl(v[V])}else T=Hl(v);if(g!==T)if(kE(g)&&kE(T)){const C=f.get();typeof C=="string"&&f.set(parseFloat(C)),typeof v=="string"?e[c]=parseFloat(v):Array.isArray(v)&&T===fe&&(e[c]=v.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(p===0||v===0)?p===0?f.set(T.transform(p)):e[c]=g.transform(v):(a||(o=V4(t),a=!0),u.push(c),i[c]=i[c]!==void 0?i[c]:e[c],f.jump(v))}),u.length){const c=u.indexOf("height")>=0?window.pageYOffset:null,f=F4(e,t,u);return o.length&&o.forEach(([p,g])=>{t.getValue(p).set(g)}),t.render(),$f&&c!==null&&window.scrollTo({top:c}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function B4(t,e,n,i){return M4(e)?j4(t,e,n,i):{target:e,transitionEnd:i}}const U4=(t,e,n,i)=>{const r=b4(t,e,i);return e=r.target,i=r.transitionEnd,B4(t,e,n,i)},Ug={current:null},c1={current:!1};function z4(){if(c1.current=!0,!!$f)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ug.current=t.matches;t.addListener(e),e()}else Ug.current=!1}function $4(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(fn(o))t.addValue(r,o),Yd(i)&&i.add(r);else if(fn(a))t.addValue(r,Ua(o,{owner:t})),Yd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Ua(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const DE=new WeakMap,h1=Object.keys(tc),W4=h1.length,ME=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],H4=Yy.length;class q4{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>We.render(this.render,!1,!0);const{latestValues:u,renderState:c}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Hf(n),this.isVariantNode=ZC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{});for(const g in p){const v=p[g];u[g]!==void 0&&fn(v)&&(v.set(u[g],!1),Yd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,DE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),c1.current||z4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ug.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){DE.delete(this.current),this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=mo.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&We.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let c=0;c<W4;c++){const f=h1[c],{isEnabled:p,Feature:g,ProjectionNode:v,MeasureLayout:T}=tc[f];v&&(a=v),p(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:f,drag:p,dragConstraints:g,layoutScroll:v,layoutRoot:T}=n;this.projection.setOptions({layoutId:c,layout:f,alwaysMeasureLayout:!!p||g&&da(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<ME.length;i++){const r=ME[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=$4(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<H4;i++){const r=Yy[i],o=this.props[r];(ec(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ua(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=sv(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new mv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class d1 extends q4{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=uz(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){az(this,i,a);const u=U4(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function G4(t){return window.getComputedStyle(t)}class K4 extends d1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(mo.has(n)){const i=cv(n);return i&&i.default||0}else{const i=G4(e),r=(JC(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return JA(e,n)}build(e,n,i,r){ev(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return rv(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){sA(e,n,i,r)}}class Z4 extends d1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(mo.has(n)){const i=cv(n);return i&&i.default||0}return n=oA.has(n)?n:Zy(n),e.getAttribute(n)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(e,n){return lA(e,n)}build(e,n,i,r){nv(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){aA(e,n,i,r)}mount(e){this.isSVGTag=iv(e.tagName),super.mount(e)}}const Q4=(t,e)=>Jy(t)?new Z4(e,{enableHardwareAcceleration:!1}):new K4(e,{enableHardwareAcceleration:!0}),Y4={layout:{ProjectionNode:l1,MeasureLayout:t1}},X4={...Iz,...WB,...R4,...Y4},sm=Jj((t,e)=>LB(t,e,X4,Q4));function f1(){const t=j.useRef(!1);return Ky(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function J4(){const t=f1(),[e,n]=j.useState(0),i=j.useCallback(()=>{t.current&&n(e+1)},[e]);return[j.useCallback(()=>We.postRender(i),[i]),e]}class e3 extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function t3({children:t,isPresent:e}){const n=j.useId(),i=j.useRef(null),r=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),j.createElement(e3,{isPresent:e,childRef:i,sizeRef:r},j.cloneElement(t,{ref:i}))}const om=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=uA(n3),c=j.useId(),f=j.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;i&&i()},register:p=>(u.set(p,!1),()=>u.delete(p))}),o?void 0:[n]);return j.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),j.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=j.createElement(t3,{isPresent:n},t)),j.createElement(zf.Provider,{value:f},t)};function n3(){return new Map}function i3(t){return j.useEffect(()=>()=>t(),[])}const Ms=t=>t.key||"";function r3(t,e){t.forEach(n=>{const i=Ms(n);e.set(i,n)})}function s3(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const o3=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=j.useContext(Xy).forceRender||J4()[0],c=f1(),f=s3(t);let p=f;const g=j.useRef(new Map).current,v=j.useRef(p),T=j.useRef(new Map).current,C=j.useRef(!0);if(Ky(()=>{C.current=!1,r3(f,T),v.current=p}),i3(()=>{C.current=!0,T.clear(),g.clear()}),C.current)return j.createElement(j.Fragment,null,p.map(S=>j.createElement(om,{key:Ms(S),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},S)));p=[...p];const k=v.current.map(Ms),V=f.map(Ms),b=k.length;for(let S=0;S<b;S++){const A=k[S];V.indexOf(A)===-1&&!g.has(A)&&g.set(A,void 0)}return a==="wait"&&g.size&&(p=[]),g.forEach((S,A)=>{if(V.indexOf(A)!==-1)return;const B=T.get(A);if(!B)return;const G=k.indexOf(A);let $=S;if(!$){const R=()=>{g.delete(A);const I=Array.from(T.keys()).filter(D=>!V.includes(D));if(I.forEach(D=>T.delete(D)),v.current=f.filter(D=>{const M=Ms(D);return M===A||I.includes(M)}),!g.size){if(c.current===!1)return;u(),i&&i()}};$=j.createElement(om,{key:Ms(B),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:o,mode:a},B),g.set(A,$)}p.splice(G,0,$)}),p=p.map(S=>{const A=S.key;return g.has(A)?S:j.createElement(om,{key:Ms(S),isPresent:!0,presenceAffectsLayout:o,mode:a},S)}),j.createElement(j.Fragment,null,g.size?p:p.map(S=>j.cloneElement(S)))},am=({children:t})=>{const{currentUser:e,loading:n}=po();return n?P.jsx("div",{children:"Loading..."}):e?t:P.jsx(sS,{to:"/login",replace:!0})};function a3(t){return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true":!1}const l3=({children:t})=>{const{currentUser:e,loading:n}=po();return n?P.jsx("div",{style:{padding:20},children:"Checking admin permissions..."}):e?a3(e)?t:P.jsxs("div",{style:{padding:24,textAlign:"center"},children:[P.jsx("h2",{children:"Access Denied"}),P.jsx("p",{children:"You must be an admin to access this page."})]}):P.jsx(sS,{to:"/login",replace:!0})},u3="/pilani-trails/assets/logo-ByW2n5sB.jpg",c3=()=>{const{currentUser:t}=po(),e=Ga(),[n,i]=j.useState(!1);console.log("[Header] currentUser:",t);const r=async()=>{try{await WS(Dr),e("/login")}catch(u){console.error("Logout failed:",u)}},o=()=>i(u=>!u),a=t&&(t.role==="admin"||t.isAdmin===!0||t.email==="admin@pilanitrails.com");return P.jsx("header",{className:"app-header",children:P.jsx("nav",{className:"header-nav",children:P.jsxs("div",{className:"header-inner",children:[P.jsx("div",{className:"nav-brand",children:P.jsx(Xt,{to:"/",className:"brand-link",onClick:()=>i(!1),children:P.jsx("img",{src:u3,alt:"Pilani Trails Logo",className:"brand-logo"})})}),P.jsx("button",{className:"menu-toggle",onClick:o,"aria-label":"Toggle menu",children:n?P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[P.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",stroke:"currentColor",fill:"none",strokeWidth:"2",children:[P.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),P.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),P.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),P.jsxs("ul",{className:`nav-links ${n?"open":""}`,children:[P.jsx("li",{children:P.jsx(Xt,{to:"/",onClick:()=>i(!1),children:"Home"})}),t?P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(Xt,{to:"/dashboard",onClick:()=>i(!1),children:"Dashboard"})}),P.jsx("li",{children:P.jsx(Xt,{to:"/propose",onClick:()=>i(!1),children:"Propose Location"})}),a&&P.jsx("li",{children:P.jsx(Xt,{to:"/admin-review",onClick:()=>i(!1),children:"Admin Review"})}),P.jsx("li",{children:P.jsx("button",{onClick:r,className:"logout-btn",children:"Logout"})})]}):P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(Xt,{to:"/login",onClick:()=>i(!1),children:"Login"})}),P.jsx("li",{children:P.jsx(Xt,{to:"/signup",onClick:()=>i(!1),children:"Signup"})})]})]})]})})})};function p1(t,e){const n=j.useRef(e);j.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const h3=1;function d3(t){return Object.freeze({__version:h3,map:t})}function f3(t,e){return Object.freeze({...t,...e})}const m1=j.createContext(null),g1=m1.Provider;function gv(){const t=j.useContext(m1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function p3(t){function e(n,i){const{instance:r,context:o}=t(n).current;return j.useImperativeHandle(i,()=>r),n.children==null?null:qs.createElement(g1,{value:o},n.children)}return j.forwardRef(e)}function m3(t){function e(n,i){const[r,o]=j.useState(!1),{instance:a}=t(n,o).current;j.useImperativeHandle(i,()=>a),j.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?KI.createPortal(n.children,u):null}return j.forwardRef(e)}function g3(t){function e(n,i){const{instance:r}=t(n).current;return j.useImperativeHandle(i,()=>r),null}return j.forwardRef(e)}function _1(t,e){const n=j.useRef();j.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function _v(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function _3(t,e){return function(i,r){const o=gv(),a=t(_v(i,o),o);return p1(o.map,i.attribution),_1(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var zg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(K1,function(n){var i="1.9.4";function r(s){var l,d,m,y;for(d=1,m=arguments.length;d<m;d++){y=arguments[d];for(l in y)s[l]=y[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var m=d.call(arguments,2);return function(){return s.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var u=0;function c(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var m,y,E,O;return O=function(){m=!1,y&&(E.apply(d,y),y=!1)},E=function(){m?y=arguments:(s.apply(d,arguments),setTimeout(O,l),m=!0)},E}function p(s,l,d){var m=l[1],y=l[0],E=m-y;return s===m&&d?s:((s-y)%E+E)%E+y}function g(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function C(s){return T(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function V(s,l,d){var m=[];for(var y in s)m.push(encodeURIComponent(d?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function S(s,l){return s.replace(b,function(d,m){var y=l[m];if(y===void 0)throw new Error("No value provided for variable "+d);return typeof y=="function"&&(y=y(l)),y})}var A=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var D=window.requestAnimationFrame||$("RequestAnimationFrame")||I,M=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function F(s,l,d){if(d&&D===I)s.call(l);else return D.call(window,a(s,l))}function U(s){s&&M.call(window,s)}var N={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:c,throttle:f,wrapNum:p,falseFn:g,formatNum:v,trim:T,splitWords:C,setOptions:k,getParamString:V,template:S,isArray:A,indexOf:B,emptyImageUrl:G,requestFn:D,cancelFn:M,requestAnimFrame:F,cancelAnimFrame:U};function Te(){}Te.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=o(d);m.constructor=l,l.prototype=m;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return s.statics&&r(l,s.statics),s.includes&&(ze(s.includes),r.apply(null,[m].concat(s.includes))),r(m,s),delete m.statics,delete m.includes,m.options&&(m.options=d.options?o(d.options):{},r(m.options,s.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,O=m._initHooks.length;E<O;E++)m._initHooks[E].call(this)}},l},Te.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Te.mergeOptions=function(s){return r(this.prototype.options,s),this},Te.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ze(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=A(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Se={on:function(s,l,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],l);else{s=C(s);for(var y=0,E=s.length;y<E;y++)this._on(s[y],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var m in s)this._off(m,s[m],l);else{s=C(s);for(var y=arguments.length===1,E=0,O=s.length;E<O;E++)y?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var y={fn:l,ctx:d};m&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,l,d){var m,y,E;if(this._events&&(m=this._events[s],!!m)){if(arguments.length===1){if(this._firingCount)for(y=0,E=m.length;y<E;y++)m[y].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var O=this._listens(s,l,d);if(O!==!1){var W=m[O];this._firingCount&&(W.fn=g,this._events[s]=m=m.slice()),m.splice(O,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var m=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var E=0,O=y.length;E<O;E++){var W=y[E],H=W.fn;W.once&&this.off(s,H,W.ctx),H.call(W.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(s,l,d,m){typeof s!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(m=!!l,y=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,y,d)!==!1)return!0;if(m){for(var O in this._eventParents)if(this._eventParents[O].listens(s,l,d,m))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var m=this._events[s]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var y=0,E=m.length;y<E;y++)if(m[y].fn===l&&m[y].ctx===d)return y;return!1},once:function(s,l,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],l,!0);else{s=C(s);for(var y=0,E=s.length;y<E;y++)this._on(s[y],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[c(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[c(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Se.addEventListener=Se.on,Se.removeEventListener=Se.clearAllEventListeners=Se.off,Se.addOneTimeEventListener=Se.once,Se.fireEvent=Se.fire,Se.hasEventListeners=Se.listens;var Ke=Te.extend(Se);function K(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ae=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new K(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new K(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof K?s:A(s)?new K(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new K(s.x,s.y):new K(s,l,d)}function te(s,l){if(s)for(var d=l?[s,l]:s,m=0,y=d.length;m<y;m++)this.extend(d[m])}te.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof K||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=pe(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof K?s=J(s):s=pe(s),s instanceof te?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=pe(s);var l=this.min,d=this.max,m=s.min,y=s.max,E=y.x>=l.x&&m.x<=d.x,O=y.y>=l.y&&m.y<=d.y;return E&&O},overlaps:function(s){s=pe(s);var l=this.min,d=this.max,m=s.min,y=s.max,E=y.x>l.x&&m.x<d.x,O=y.y>l.y&&m.y<d.y;return E&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*s,y=Math.abs(l.y-d.y)*s;return pe(J(l.x-m,l.y-y),J(d.x+m,d.y+y))},equals:function(s){return s?(s=pe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function pe(s,l){return!s||s instanceof te?s:new te(s,l)}function Pe(s,l){if(s)for(var d=l?[s,l]:s,m=0,y=d.length;m<y;m++)this.extend(d[m])}Pe.prototype={extend:function(s){var l=this._southWest,d=this._northEast,m,y;if(s instanceof Ee)m=s,y=s;else if(s instanceof Pe){if(m=s._southWest,y=s._northEast,!m||!y)return this}else return s?this.extend(ce(s)||De(s)):this;return!l&&!d?(this._southWest=new Ee(m.lat,m.lng),this._northEast=new Ee(y.lat,y.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(y.lat,d.lat),d.lng=Math.max(y.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*s,y=Math.abs(l.lng-d.lng)*s;return new Pe(new Ee(l.lat-m,l.lng-y),new Ee(d.lat+m,d.lng+y))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=ce(s):s=De(s);var l=this._southWest,d=this._northEast,m,y;return s instanceof Pe?(m=s.getSouthWest(),y=s.getNorthEast()):m=y=s,m.lat>=l.lat&&y.lat<=d.lat&&m.lng>=l.lng&&y.lng<=d.lng},intersects:function(s){s=De(s);var l=this._southWest,d=this._northEast,m=s.getSouthWest(),y=s.getNorthEast(),E=y.lat>=l.lat&&m.lat<=d.lat,O=y.lng>=l.lng&&m.lng<=d.lng;return E&&O},overlaps:function(s){s=De(s);var l=this._southWest,d=this._northEast,m=s.getSouthWest(),y=s.getNorthEast(),E=y.lat>l.lat&&m.lat<d.lat,O=y.lng>l.lng&&m.lng<d.lng;return E&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=De(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(s,l){return s instanceof Pe?s:new Pe(s,l)}function Ee(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(s,l){if(!s)return!1;s=ce(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Cn.distance(this,ce(s))},wrap:function(){return Cn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return De([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function ce(s,l,d){return s instanceof Ee?s:A(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ee(s,l,d)}var st={latLngToPoint:function(s,l){var d=this.projection.project(s),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(s,l){var d=this.scale(l),m=this.transformation.untransform(s,d);return this.projection.unproject(m)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),m=this.transformation.transform(l.min,d),y=this.transformation.transform(l.max,d);return new te(m,y)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?p(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?p(s.lat,this.wrapLat,!0):s.lat,m=s.alt;return new Ee(d,l,m)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,y=l.lng-d.lng;if(m===0&&y===0)return s;var E=s.getSouthWest(),O=s.getNorthEast(),W=new Ee(E.lat-m,E.lng-y),H=new Ee(O.lat-m,O.lng-y);return new Pe(W,H)}},Cn=r({},st,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,m=s.lat*d,y=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),O=Math.sin((l.lng-s.lng)*d/2),W=E*E+Math.cos(m)*Math.cos(y)*O*O,H=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*H}}),hr=6378137,pn={R:hr,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,s.lat),-d),y=Math.sin(m*l);return new K(this.R*s.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=hr*Math.PI;return new te([-s,-s],[s,s])}()};function Ft(s,l,d,m){if(A(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=m}Ft.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new K((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function hi(s,l,d,m){return new Ft(s,l,d,m)}var ps=r({},Cn,{code:"EPSG:3857",projection:pn,transformation:function(){var s=.5/(Math.PI*pn.R);return hi(s,.5,-s,.5)}()}),el=r({},ps,{code:"EPSG:900913"});function _o(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function tl(s,l){var d="",m,y,E,O,W,H;for(m=0,E=s.length;m<E;m++){for(W=s[m],y=0,O=W.length;y<O;y++)H=W[y],d+=(y?"L":"M")+H.x+" "+H.y;d+=l?oe.svg?"z":"x":""}return d||"M0 0"}var nl=document.documentElement.style,yo="ActiveXObject"in window,xc=yo&&!document.addEventListener,vo="msLaunchUri"in navigator&&!("documentMode"in document),wo=An("webkit"),Cc=An("android"),To=An("android 2")||An("android 3"),il=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ac=Cc&&An("Google")&&il<537&&!("AudioNode"in window),pt=!!window.opera,It=!vo&&An("chrome"),ms=An("gecko")&&!wo&&!pt&&!yo,Rc=!It&&An("safari"),rl=An("phantom"),kc="OTransition"in nl,gs=navigator.platform.indexOf("Win")===0,sl=yo&&"transition"in nl,Eo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!To,Po="MozPerspective"in nl,Yf=!window.L_DISABLE_3D&&(sl||Eo||Po)&&!kc&&!rl,_s=typeof orientation<"u"||An("mobile"),ol=_s&&wo,Lc=_s&&Eo,al=!window.PointerEvent&&window.MSPointerEvent,dr=!!(window.PointerEvent||al),Io="ontouchstart"in window||!!window.TouchEvent,ll=!window.L_NO_TOUCH&&(Io||dr),ki=_s&&pt,bc=_s&&ms,So=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Dc=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),ys=function(){return!!document.createElement("canvas").getContext}(),xo=!!(document.createElementNS&&_o("svg").createSVGRect),kt=!!xo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Mc=!xo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),vs=navigator.platform.indexOf("Mac")===0,ws=navigator.platform.indexOf("Linux")===0;function An(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var oe={ie:yo,ielt9:xc,edge:vo,webkit:wo,android:Cc,android23:To,androidStock:Ac,opera:pt,chrome:It,gecko:ms,safari:Rc,phantom:rl,opera12:kc,win:gs,ie3d:sl,webkit3d:Eo,gecko3d:Po,any3d:Yf,mobile:_s,mobileWebkit:ol,mobileWebkit3d:Lc,msPointer:al,pointer:dr,touch:ll,touchNative:Io,mobileOpera:ki,mobileGecko:bc,retina:So,passiveEvents:Dc,canvas:ys,svg:xo,vml:Mc,inlineSvg:kt,mac:vs,linux:ws},Li=oe.msPointer?"MSPointerDown":"pointerdown",Nc=oe.msPointer?"MSPointerMove":"pointermove",Oc=oe.msPointer?"MSPointerUp":"pointerup",Ts=oe.msPointer?"MSPointerCancel":"pointercancel",Co={touchstart:Li,touchmove:Nc,touchend:Oc,touchcancel:Ts},Ao={touchstart:ko,touchmove:Ro,touchend:Ro,touchcancel:Ro},Gn={},Kn=!1;function Vc(s,l,d){return l==="touchstart"&&jc(),Ao[l]?(d=Ao[l].bind(this,d),s.addEventListener(Co[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Fc(s,l,d){if(!Co[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Co[l],d,!1)}function ul(s){Gn[s.pointerId]=s}function cl(s){Gn[s.pointerId]&&(Gn[s.pointerId]=s)}function hl(s){delete Gn[s.pointerId]}function jc(){Kn||(document.addEventListener(Li,ul,!0),document.addEventListener(Nc,cl,!0),document.addEventListener(Oc,hl,!0),document.addEventListener(Ts,hl,!0),Kn=!0)}function Ro(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Gn)l.touches.push(Gn[d]);l.changedTouches=[l],s(l)}}function ko(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Xe(l),Ro(s,l)}function Bc(s){var l={},d,m;for(m in s)d=s[m],l[m]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var dl=200;function Es(s,l){s.addEventListener("dblclick",l);var d=0,m;function y(E){if(E.detail!==1){m=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var O=Il(E);if(!(O.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!O.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var W=Date.now();W-d<=dl?(m++,m===2&&l(Bc(E))):m=1,d=W}}}return s.addEventListener("click",y),{dblclick:l,simDblclick:y}}function bi(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ps=Mi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Is=Mi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fl=Is==="webkitTransition"||Is==="OTransition"?Is+"End":"transitionend";function pl(s){return typeof s=="string"?document.getElementById(s):s}function fr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(s,null);d=m?m[l]:null}return d==="auto"?null:d}function Ae(s,l,d){var m=document.createElement(s);return m.className=l||"",d&&d.appendChild(m),m}function Ue(s){var l=s.parentNode;l&&l.removeChild(s)}function Ss(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Di(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function pr(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function ml(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=Rn(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function we(s,l){if(s.classList!==void 0)for(var d=C(l),m=0,y=d.length;m<y;m++)s.classList.add(d[m]);else if(!ml(s,l)){var E=Rn(s);gl(s,(E?E+" ":"")+l)}}function Ze(s,l){s.classList!==void 0?s.classList.remove(l):gl(s,T((" "+Rn(s)+" ").replace(" "+l+" "," ")))}function gl(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Rn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function ot(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Lo(s,l)}function Lo(s,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+m+"(opacity="+l+")"}function Mi(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function di(s,l,d){var m=l||new K(0,0);s.style[Ps]=(oe.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function ge(s,l){s._leaflet_pos=l,oe.any3d?di(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function kn(s){return s._leaflet_pos||new K(0,0)}var Zn,Qn,_l;if("onselectstart"in document)Zn=function(){he(window,"selectstart",Xe)},Qn=function(){je(window,"selectstart",Xe)};else{var mr=Mi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zn=function(){if(mr){var s=document.documentElement.style;_l=s[mr],s[mr]="none"}},Qn=function(){mr&&(document.documentElement.style[mr]=_l,_l=void 0)}}function yl(){he(window,"dragstart",Xe)}function vl(){je(window,"dragstart",Xe)}var bo,wl;function Ni(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(mn(),bo=s,wl=s.style.outlineStyle,s.style.outlineStyle="none",he(window,"keydown",mn))}function mn(){bo&&(bo.style.outlineStyle=wl,bo=void 0,wl=void 0,je(window,"keydown",mn))}function Tl(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Do(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Uc={__proto__:null,TRANSFORM:Ps,TRANSITION:Is,TRANSITION_END:fl,get:pl,getStyle:fr,create:Ae,remove:Ue,empty:Ss,toFront:Di,toBack:pr,hasClass:ml,addClass:we,removeClass:Ze,setClass:gl,getClass:Rn,setOpacity:ot,testProp:Mi,setTransform:di,setPosition:ge,getPosition:kn,get disableTextSelection(){return Zn},get enableTextSelection(){return Qn},disableImageDrag:yl,enableImageDrag:vl,preventOutline:Ni,restoreOutline:mn,getSizedParentNode:Tl,getScale:Do};function he(s,l,d,m){if(l&&typeof l=="object")for(var y in l)El(s,y,l[y],d);else{l=C(l);for(var E=0,O=l.length;E<O;E++)El(s,l[E],d,m)}return this}var Ln="_leaflet_events";function je(s,l,d,m){if(arguments.length===1)zc(s),delete s[Ln];else if(l&&typeof l=="object")for(var y in l)Pl(s,y,l[y],d);else if(l=C(l),arguments.length===2)zc(s,function(W){return B(l,W)!==-1});else for(var E=0,O=l.length;E<O;E++)Pl(s,l[E],d,m);return this}function zc(s,l){for(var d in s[Ln]){var m=d.split(/\d/)[0];(!l||l(m))&&Pl(s,m,null,null,d)}}var bn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function El(s,l,d,m){var y=l+c(d)+(m?"_"+c(m):"");if(s[Ln]&&s[Ln][y])return this;var E=function(W){return d.call(m||s,W||window.event)},O=E;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?E=Vc(s,l,E):oe.touch&&l==="dblclick"?E=Es(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(bn[l]||l,E,oe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(W){W=W||window.event,Sl(s,W)&&O(W)},s.addEventListener(bn[l],E,!1)):s.addEventListener(l,O,!1):s.attachEvent("on"+l,E),s[Ln]=s[Ln]||{},s[Ln][y]=E}function Pl(s,l,d,m,y){y=y||l+c(d)+(m?"_"+c(m):"");var E=s[Ln]&&s[Ln][y];if(!E)return this;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?Fc(s,l,E):oe.touch&&l==="dblclick"?bi(s,E):"removeEventListener"in s?s.removeEventListener(bn[l]||l,E,!1):s.detachEvent("on"+l,E),s[Ln][y]=null}function Dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function gr(s){return El(s,"wheel",Dn),this}function _r(s){return he(s,"mousedown touchstart dblclick contextmenu",Dn),s._leaflet_disable_click=!0,this}function Xe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function gn(s){return Xe(s),Dn(s),this}function Il(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Mo(s,l){if(!l)return new K(s.clientX,s.clientY);var d=Do(l),m=d.boundingClientRect;return new K((s.clientX-m.left)/d.x-l.clientLeft,(s.clientY-m.top)/d.y-l.clientTop)}var Qe=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $c(s){return oe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Qe:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Sl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Wc={__proto__:null,on:he,off:je,stopPropagation:Dn,disableScrollPropagation:gr,disableClickPropagation:_r,preventDefault:Xe,stop:gn,getPropagationPath:Il,getMousePosition:Mo,getWheelDelta:$c,isExternalTarget:Sl,addListener:he,removeListener:je},xl=Ke.extend({run:function(s,l,d,m){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=kn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),ge(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),xe=Ke.extend({options:{crs:ps,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Is&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,fl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ce(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var m=this.getZoomScale(l),y=this.getSize().divideBy(2),E=s instanceof K?s:this.latLngToContainerPoint(s),O=E.subtract(y).multiplyBy(1-1/m),W=this.containerPointToLatLng(y.add(O));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():De(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),m=J(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(s,!1,d.add(m));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var E=m.subtract(d).divideBy(2),O=this.project(s.getSouthWest(),y),W=this.project(s.getNorthEast(),y),H=this.unproject(O.add(W).divideBy(2).add(E),y);return{center:H,zoom:y}},fitBounds:function(s,l){if(s=De(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!oe.any3d)return this.setView(s,l,d);this._stop();var m=this.project(this.getCenter()),y=this.project(s),E=this.getSize(),O=this._zoom;s=ce(s),l=l===void 0?O:l;var W=Math.max(E.x,E.y),H=W*this.getZoomScale(O,l),Q=y.distanceTo(m)||1,ne=1.42,de=ne*ne;function Ie(gt){var oh=gt?-1:1,$1=gt?H:W,W1=H*H-W*W+oh*de*de*Q*Q,H1=2*$1*de*Q,rp=W1/H1,$v=Math.sqrt(rp*rp+1)-rp,q1=$v<1e-9?-18:Math.log($v);return q1}function Zt(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function xt(gt){return(Math.exp(gt)+Math.exp(-gt))/2}function Nn(gt){return Zt(gt)/xt(gt)}var sn=Ie(0);function Go(gt){return W*(xt(sn)/xt(sn+ne*gt))}function j1(gt){return W*(xt(sn)*Nn(sn+ne*gt)-Zt(sn))/de}function B1(gt){return 1-Math.pow(1-gt,1.5)}var U1=Date.now(),Uv=(Ie(1)-sn)/ne,z1=d.duration?1e3*d.duration:1e3*Uv*.8;function zv(){var gt=(Date.now()-U1)/z1,oh=B1(gt)*Uv;gt<=1?(this._flyToFrame=F(zv,this),this._move(this.unproject(m.add(y.subtract(m).multiplyBy(j1(oh)/Q)),O),this.getScaleZoom(W/Go(oh),O),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),zv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=De(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,De(s));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),m=J(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),E=this.project(s),O=this.getPixelBounds(),W=pe([O.min.add(d),O.max.subtract(m)]),H=W.getSize();if(!W.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(W.getCenter()),ne=W.extend(E).getSize().subtract(H);y.x+=Q.x<0?-ne.x:ne.x,y.y+=Q.y<0?-ne.y:ne.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),y=d.divideBy(2).round(),E=m.subtract(y);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,m=new Ee(l,d),y=m.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var O=this.getBoundsZoom(y);this.setView(m,E.maxZoom?Math.min(O,E.maxZoom):O)}var W={latlng:m,bounds:y,timestamp:s.timestamp};for(var H in s.coords)typeof s.coords[H]=="number"&&(W[H]=s.coords[H]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ue(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),m=Ae("div",d,l||this._mapPane);return s&&(this._panes[s]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Pe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=De(s),d=J(d||[0,0]);var m=this.getZoom()||0,y=this.getMinZoom(),E=this.getMaxZoom(),O=s.getNorthWest(),W=s.getSouthEast(),H=this.getSize().subtract(d),Q=pe(this.project(W,m),this.project(O,m)).getSize(),ne=oe.any3d?this.options.zoomSnap:1,de=H.x/Q.x,Ie=H.y/Q.y,Zt=l?Math.max(de,Ie):Math.min(de,Ie);return m=this.getScaleZoom(Zt,m),ne&&(m=Math.round(m/(ne/100))*(ne/100),m=l?Math.ceil(m/ne)*ne:Math.floor(m/ne)*ne),Math.max(y,Math.min(E,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(s*d.scale(l));return isNaN(m)?1/0:m},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ce(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(De(s))},distance:function(s,l){return this.options.crs.distance(ce(s),ce(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return Mo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=pl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");he(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,we(s,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=fr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ge(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(s.markerPane,"leaflet-zoom-hide"),we(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){ge(this._mapPane,new K(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,d)._move(s,l)._moveEnd(y),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,m){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),m?d&&d.pinch&&this.fire("zoom",d):((y||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ge(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[c(this._container)]=this;var l=s?je:he;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],m,y=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,O=!1;E;){if(m=this._targets[c(E)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){O=!0;break}if(m&&m.listens(l,!0)&&(y&&!Sl(E,s)||(d.push(m),y))||E===this._container)break;E=E.parentNode}return!d.length&&!O&&!y&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Ni(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var m=r({},s);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var y=this._findEventTargets(s,l);if(d){for(var E=[],O=0;O<d.length;O++)d[O].listens(l,!0)&&E.push(d[O]);y=E.concat(y)}if(y.length){l==="contextmenu"&&Xe(s);var W=y[0],H={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);H.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=Q?W.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(O=0;O<y.length;O++)if(y[O].fire(l,H,!0),H.originalEvent._stopped||y[O].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return kn(this._mapPane)||new K(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(s,l,d){var m=this._getNewPixelOrigin(d,l);return pe([this.project(s.getSouthWest(),l)._subtract(m),this.project(s.getNorthWest(),l)._subtract(m),this.project(s.getSouthEast(),l)._subtract(m),this.project(s.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var m=this.project(s,l),y=this.getSize().divideBy(2),E=new te(m.subtract(y),m.add(y)),O=this._getBoundsOffset(E,d,l);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?s:this.unproject(m.add(O),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),m=new te(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(s,l,d){var m=pe(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),y=m.min.subtract(s.min),E=m.max.subtract(s.max),O=this._rebound(y.x,-E.x),W=this._rebound(y.y,-E.y);return new K(O,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),m=oe.any3d?this.options.zoomSnap:1;return m&&(s=Math.round(s/m)*m),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Ps,m=this._proxy.style[d];di(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();di(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),y=this._getCenterOffset(s)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(y)?!1:(F(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function No(s,l){return new xe(s,l)}var rn=Te.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),m=s._controlCorners[d];return we(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Kt=function(s){return new rn(s)};xe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ae("div",l+"control-container",this._container);function m(y,E){var O=l+y+" "+l+E;s[y+E]=Ae("div",O,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ue(this._controlCorners[s]);Ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Cl=rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(s,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in s)this._addLayer(s[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return rn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ae("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),_r(l),gr(l);var m=this._section=Ae("section",s+"-list");d&&(this._map.on("click",this.collapse,this),he(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Ae("a",s+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),he(y,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Xe(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ae("div",s+"-base",m),this._separator=Ae("div",s+"-separator",m),this._overlaysList=Ae("div",s+"-overlays",m),l.appendChild(m)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(m,y){return this.options.sortFunction(m.layer,y.layer,m.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ss(this._baseLayersList),Ss(this._overlaysList),this._layerControlInputs=[];var s,l,d,m,y=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,s=s||!m.overlay,y+=m.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(c(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),m;s.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(m),m.layerId=c(s.layer),he(m,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(m),E.appendChild(y);var O=s.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,m=[],y=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||y.push(d);for(E=0;E<y.length;E++)this._map.hasLayer(y[E])&&this._map.removeLayer(y[E]);for(E=0;E<m.length;E++)this._map.hasLayer(m[E])||this._map.addLayer(m[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,m=this._map.getZoom(),y=s.length-1;y>=0;y--)l=s[y],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,he(s,"click",Xe),this.expand();var l=this;setTimeout(function(){je(s,"click",Xe),l._preventClick=!1})}}),Xf=function(s,l,d){return new Cl(s,l,d)},Oi=rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ae("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,m,y){var E=Ae("a",d,m);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),_r(E),he(E,"click",gn),he(E,"click",y,this),he(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ze(this._zoomInButton,l),Ze(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(we(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(we(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});xe.mergeOptions({zoomControl:!0}),xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var Hc=function(s){return new Oi(s)},Oo=rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ae("div",l),m=this.options;return this._addScales(m,l+"-line",d),s.on(m.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ae("div",l,d)),s.imperial&&(this._iScale=Ae("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,m,y;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Vo=function(s){return new Oo(s)},qc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',yr=rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?qc+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),_r(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});xe.mergeOptions({attributionControl:!0}),xe.addInitHook(function(){this.options.attributionControl&&new yr().addTo(this)});var Jf=function(s){return new yr(s)};rn.Layers=Cl,rn.Zoom=Oi,rn.Scale=Oo,rn.Attribution=yr,Kt.layers=Xf,Kt.zoom=Hc,Kt.scale=Vo,Kt.attribution=Jf;var _n=Te.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(s,l){return s.addHandler(l,this),this};var xs={Events:Se},Al=oe.touch?"touchstart mousedown":"mousedown",Yn=Ke.extend({options:{clickTolerance:3},initialize:function(s,l,d,m){k(this,m),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(he(this._dragStartTarget,Al,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yn._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,Al,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ml(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Yn._dragging===this&&this.finishDrag();return}if(!(Yn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Yn._dragging=this,this._preventOutline&&Ni(this._element),yl(),Zn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Tl(this._element);this._startPoint=new K(l.clientX,l.clientY),this._startPos=kn(this._element),this._parentScale=Do(d);var m=s.type==="mousedown";he(document,m?"mousemove":"touchmove",this._onMove,this),he(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new K(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Xe(s),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ge(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),vl(),Qn();var l=this._moved&&this._moving;this._moving=!1,Yn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Fo(s,l,d){var m,y=[1,4,2,8],E,O,W,H,Q,ne,de,Ie;for(E=0,ne=s.length;E<ne;E++)s[E]._code=fi(s[E],l);for(W=0;W<4;W++){for(de=y[W],m=[],E=0,ne=s.length,O=ne-1;E<ne;O=E++)H=s[E],Q=s[O],H._code&de?Q._code&de||(Ie=St(Q,H,de,l,d),Ie._code=fi(Ie,l),m.push(Ie)):(Q._code&de&&(Ie=St(Q,H,de,l,d),Ie._code=fi(Ie,l),m.push(Ie)),m.push(H));s=m}return s}function jo(s,l){var d,m,y,E,O,W,H,Q,ne;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var de=ce([0,0]),Ie=De(s),Zt=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Zt<1700&&(de=Bo(s));var xt=s.length,Nn=[];for(d=0;d<xt;d++){var sn=ce(s[d]);Nn.push(l.project(ce([sn.lat-de.lat,sn.lng-de.lng])))}for(W=H=Q=0,d=0,m=xt-1;d<xt;m=d++)y=Nn[d],E=Nn[m],O=y.y*E.x-E.y*y.x,H+=(y.x+E.x)*O,Q+=(y.y+E.y)*O,W+=O*3;W===0?ne=Nn[0]:ne=[H/W,Q/W];var Go=l.unproject(J(ne));return ce([Go.lat+de.lat,Go.lng+de.lng])}function Bo(s){for(var l=0,d=0,m=0,y=0;y<s.length;y++){var E=ce(s[y]);l+=E.lat,d+=E.lng,m++}return ce([l/m,d/m])}var Uo={__proto__:null,clipPolygon:Fo,polygonCenter:jo,centroid:Bo};function Rl(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=Kc(s,d),s=Gc(s,d),s}function kl(s,l,d){return Math.sqrt(Mn(s,l,d,!0))}function Vi(s,l,d){return Mn(s,l,d)}function Gc(s,l){var d=s.length,m=typeof Uint8Array<"u"?Uint8Array:Array,y=new m(d);y[0]=y[d-1]=1,zo(s,y,l,0,d-1);var E,O=[];for(E=0;E<d;E++)y[E]&&O.push(s[E]);return O}function zo(s,l,d,m,y){var E=0,O,W,H;for(W=m+1;W<=y-1;W++)H=Mn(s[W],s[m],s[y],!0),H>E&&(O=W,E=H);E>d&&(l[O]=1,zo(s,l,d,m,O),zo(s,l,d,O,y))}function Kc(s,l){for(var d=[s[0]],m=1,y=0,E=s.length;m<E;m++)Zc(s[m],s[y])>l&&(d.push(s[m]),y=m);return y<E-1&&d.push(s[E-1]),d}var Ll;function Cs(s,l,d,m,y){var E=m?Ll:fi(s,d),O=fi(l,d),W,H,Q;for(Ll=O;;){if(!(E|O))return[s,l];if(E&O)return!1;W=E||O,H=St(s,l,W,d,y),Q=fi(H,d),W===E?(s=H,E=Q):(l=H,O=Q)}}function St(s,l,d,m,y){var E=l.x-s.x,O=l.y-s.y,W=m.min,H=m.max,Q,ne;return d&8?(Q=s.x+E*(H.y-s.y)/O,ne=H.y):d&4?(Q=s.x+E*(W.y-s.y)/O,ne=W.y):d&2?(Q=H.x,ne=s.y+O*(H.x-s.x)/E):d&1&&(Q=W.x,ne=s.y+O*(W.x-s.x)/E),new K(Q,ne,y)}function fi(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function Zc(s,l){var d=l.x-s.x,m=l.y-s.y;return d*d+m*m}function Mn(s,l,d,m){var y=l.x,E=l.y,O=d.x-y,W=d.y-E,H=O*O+W*W,Q;return H>0&&(Q=((s.x-y)*O+(s.y-E)*W)/H,Q>1?(y=d.x,E=d.y):Q>0&&(y+=O*Q,E+=W*Q)),O=s.x-y,W=s.y-E,m?O*O+W*W:new K(y,E)}function h(s){return!A(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function _(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(s)}function w(s,l){var d,m,y,E,O,W,H,Q;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ce([0,0]),de=De(s),Ie=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Ie<1700&&(ne=Bo(s));var Zt=s.length,xt=[];for(d=0;d<Zt;d++){var Nn=ce(s[d]);xt.push(l.project(ce([Nn.lat-ne.lat,Nn.lng-ne.lng])))}for(d=0,m=0;d<Zt-1;d++)m+=xt[d].distanceTo(xt[d+1])/2;if(m===0)Q=xt[0];else for(d=0,E=0;d<Zt-1;d++)if(O=xt[d],W=xt[d+1],y=O.distanceTo(W),E+=y,E>m){H=(E-m)/y,Q=[W.x-H*(W.x-O.x),W.y-H*(W.y-O.y)];break}var sn=l.unproject(J(Q));return ce([sn.lat+ne.lat,sn.lng+ne.lng])}var x={__proto__:null,simplify:Rl,pointToSegmentDistance:kl,closestPointOnSegment:Vi,clipSegment:Cs,_getEdgeIntersection:St,_getBitCode:fi,_sqClosestPointOnSegment:Mn,isFlat:h,_flat:_,polylineCenter:w},z={project:function(s){return new K(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new te([-180,-90],[180,90])},q={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,m=s.lat*l,y=this.R_MINOR/d,E=Math.sqrt(1-y*y),O=E*Math.sin(m),W=Math.tan(Math.PI/4-m/2)/Math.pow((1-O)/(1+O),E/2);return m=-d*Math.log(Math.max(W,1e-10)),new K(s.lng*l*d,m)},unproject:function(s){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,y=Math.sqrt(1-m*m),E=Math.exp(-s.y/d),O=Math.PI/2-2*Math.atan(E),W=0,H=.1,Q;W<15&&Math.abs(H)>1e-7;W++)Q=y*Math.sin(O),Q=Math.pow((1-Q)/(1+Q),y/2),H=Math.PI/2-2*Math.atan(E*Q)-O,O+=H;return new Ee(O*l,s.x*l/d)}},ee={__proto__:null,LonLat:z,Mercator:q,SphericalMercator:pn},Oe=r({},Cn,{code:"EPSG:3395",projection:q,transformation:function(){var s=.5/(Math.PI*q.R);return hi(s,.5,-s,.5)}()}),mt=r({},Cn,{code:"EPSG:4326",projection:z,transformation:hi(1/180,1,-1/180,.5)}),Le=r({},st,{projection:z,transformation:hi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,m=l.lat-s.lat;return Math.sqrt(d*d+m*m)},infinite:!0});st.Earth=Cn,st.EPSG3395=Oe,st.EPSG3857=ps,st.EPSG900913=el,st.EPSG4326=mt,st.Simple=Le;var Be=Ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[c(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[c(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});xe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=c(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return c(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?A(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[c(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=c(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var y=this._zoomBoundLayers[m].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Je=Be.extend({initialize:function(s,l){k(this,l),this._layers={};var d,m;if(s)for(d=0,m=s.length;d<m;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[s]&&m[s].apply(m,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return c(s)}}),vr=function(s,l){return new Je(s,l)},ut=Je.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Je.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Je.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),$o=function(s,l){return new ut(s,l)},pi=Te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(s,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var y=J(m),E=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return oe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function w1(s){return new pi(s)}var bl=pi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof bl.imagePath!="string"&&(bl.imagePath=this._detectIconPath()),(this.options.imagePath||bl.imagePath)+pi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,m,y){var E=m.exec(d);return E&&E[y]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ae("div","leaflet-default-icon-path",document.body),l=fr(s,"background-image")||fr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Ev=_n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Yn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,E=kn(l._icon),O=d.getPixelBounds(),W=d.getPixelOrigin(),H=pe(O.min._subtract(W).add(y),O.max._subtract(W).subtract(y));if(!H.contains(E)){var Q=J((Math.max(H.max.x,E.x)-H.max.x)/(O.max.x-H.max.x)-(Math.min(H.min.x,E.x)-H.min.x)/(O.min.x-H.min.x),(Math.max(H.max.y,E.y)-H.max.y)/(O.max.y-H.max.y)-(Math.min(H.min.y,E.y)-H.min.y)/(O.min.y-H.min.y)).multiplyBy(m);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),ge(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=F(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,m=kn(l._icon),y=l._map.layerPointToLatLng(m);d&&ge(d,m),l._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Qc=Be.extend({options:{icon:new bl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),we(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(d,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),E=!1;y!==this._shadow&&(this._removeShadow(),E=!0),y&&(we(y,l),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),Ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ue(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ge(this._icon,s),this._shadow&&ge(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ev)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ev(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&ot(this._icon,s),this._shadow&&ot(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),m=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function T1(s,l){return new Qc(s,l)}var wr=Be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Yc=wr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return wr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),m=[s+d,l+d];this._pxBounds=new te(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function E1(s,l){return new Yc(s,l)}var ep=Yc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:wr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===Cn.distance){var y=Math.PI/180,E=this._mRadius/Cn.R/y,O=d.project([l+E,s]),W=d.project([l-E,s]),H=O.add(W).divideBy(2),Q=d.unproject(H).lat,ne=Math.acos((Math.cos(E*y)-Math.sin(l*y)*Math.sin(Q*y))/(Math.cos(l*y)*Math.cos(Q*y)))/y;(isNaN(ne)||ne===0)&&(ne=E/Math.cos(Math.PI/180*l)),this._point=H.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:H.x-d.project([Q,s-ne]).x,this._radiusY=H.y-O.y}else{var de=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(de).x}this._updateBounds()}});function P1(s,l,d){return new ep(s,l,d)}var Fi=wr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,m=Mn,y,E,O=0,W=this._parts.length;O<W;O++)for(var H=this._parts[O],Q=1,ne=H.length;Q<ne;Q++){y=H[Q-1],E=H[Q];var de=m(s,y,E,!0);de<l&&(l=de,d=m(s,y,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ce(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=h(s),m=0,y=s.length;m<y;m++)d?(l[m]=ce(s[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(s[m]);return l},_project:function(){var s=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new K(s,s);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var m=s[0]instanceof Ee,y=s.length,E,O;if(m){for(O=[],E=0;E<y;E++)O[E]=this._map.latLngToLayerPoint(s[E]),d.extend(O[E]);l.push(O)}else for(E=0;E<y;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,y,E,O,W,H;for(d=0,y=0,E=this._rings.length;d<E;d++)for(H=this._rings[d],m=0,O=H.length;m<O-1;m++)W=Cs(H[m],H[m+1],s,m,!0),W&&(l[y]=l[y]||[],l[y].push(W[0]),(W[1]!==H[m+1]||m===O-2)&&(l[y].push(W[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,m=s.length;d<m;d++)s[d]=Rl(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,m,y,E,O,W,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(W=this._parts[d],m=0,O=W.length,y=O-1;m<O;y=m++)if(!(!l&&m===0)&&kl(s,W[y],W[m])<=H)return!0;return!1}});function I1(s,l){return new Fi(s,l)}Fi._flat=_;var Wo=Fi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Fi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Fi.prototype._setLatLngs.call(this,s),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new K(l,l);if(s=new te(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,y=this._rings.length,E;m<y;m++)E=Fo(this._rings[m],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,m,y,E,O,W,H,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,H=this._parts.length;E<H;E++)for(d=this._parts[E],O=0,Q=d.length,W=Q-1;O<Q;W=O++)m=d[O],y=d[W],m.y>s.y!=y.y>s.y&&s.x<(y.x-m.x)*(s.y-m.y)/(y.y-m.y)+m.x&&(l=!l);return l||Fi.prototype._containsPoint.call(this,s,!0)}});function S1(s,l){return new Wo(s,l)}var ji=ut.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=A(s)?s:s.features,d,m,y;if(l){for(d=0,m=l.length;d<m;d++)y=l[d],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var O=Xc(s,E);return O?(O.feature=th(s),O.defaultOptions=O.options,this.resetStyle(O),E.onEachFeature&&E.onEachFeature(s,O),this.addLayer(O)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Xc(s,l){var d=s.type==="Feature"?s.geometry:s,m=d?d.coordinates:null,y=[],E=l&&l.pointToLayer,O=l&&l.coordsToLatLng||tp,W,H,Q,ne;if(!m&&!d)return null;switch(d.type){case"Point":return W=O(m),Pv(E,s,W,l);case"MultiPoint":for(Q=0,ne=m.length;Q<ne;Q++)W=O(m[Q]),y.push(Pv(E,s,W,l));return new ut(y);case"LineString":case"MultiLineString":return H=Jc(m,d.type==="LineString"?0:1,O),new Fi(H,l);case"Polygon":case"MultiPolygon":return H=Jc(m,d.type==="Polygon"?1:2,O),new Wo(H,l);case"GeometryCollection":for(Q=0,ne=d.geometries.length;Q<ne;Q++){var de=Xc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);de&&y.push(de)}return new ut(y);case"FeatureCollection":for(Q=0,ne=d.features.length;Q<ne;Q++){var Ie=Xc(d.features[Q],l);Ie&&y.push(Ie)}return new ut(y);default:throw new Error("Invalid GeoJSON object.")}}function Pv(s,l,d,m){return s?s(l,d):new Qc(d,m&&m.markersInheritOptions&&m)}function tp(s){return new Ee(s[1],s[0],s[2])}function Jc(s,l,d){for(var m=[],y=0,E=s.length,O;y<E;y++)O=l?Jc(s[y],l-1,d):(d||tp)(s[y]),m.push(O);return m}function np(s,l){return s=ce(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function eh(s,l,d,m){for(var y=[],E=0,O=s.length;E<O;E++)y.push(l?eh(s[E],h(s[E])?0:l-1,d,m):np(s[E],m));return!l&&d&&y.length>0&&y.push(y[0].slice()),y}function Ho(s,l){return s.feature?r({},s.feature,{geometry:l}):th(l)}function th(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var ip={toGeoJSON:function(s){return Ho(this,{type:"Point",coordinates:np(this.getLatLng(),s)})}};Qc.include(ip),ep.include(ip),Yc.include(ip),Fi.include({toGeoJSON:function(s){var l=!h(this._latlngs),d=eh(this._latlngs,l?1:0,!1,s);return Ho(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Wo.include({toGeoJSON:function(s){var l=!h(this._latlngs),d=l&&!h(this._latlngs[0]),m=eh(this._latlngs,d?2:l?1:0,!0,s);return l||(m=[m]),Ho(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Je.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Ho(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(y){if(y.toGeoJSON){var E=y.toGeoJSON(s);if(d)m.push(E.geometry);else{var O=th(E);O.type==="FeatureCollection"?m.push.apply(m,O.features):m.push(O)}}}),d?Ho(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Iv(s,l){return new ji(s,l)}var x1=Iv,nh=Be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=De(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Di(this._image),this},bringToBack:function(){return this._map&&pr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=De(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ae("img");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;di(this._image,d,l)},_reset:function(){var s=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ge(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),C1=function(s,l,d){return new nh(s,l,d)},Sv=nh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ae("video");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),m=[],y=0;y<d.length;y++)m.push(d[y].src);this._url=d.length>0?m:[l.src];return}A(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var O=Ae("source");O.src=this._url[E],l.appendChild(O)}}});function A1(s,l,d){return new Sv(s,l,d)}var xv=nh.extend({_initImage:function(){var s=this._image=this._url;we(s,"leaflet-image-layer"),this._zoomAnimated&&we(s,"leaflet-zoom-animated"),this.options.className&&we(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function R1(s,l,d){return new xv(s,l,d)}var mi=Be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ee||A(s))?(this._latlng=ce(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&ot(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(ot(this._container,0),this._removeTimeout=setTimeout(a(Ue,void 0,this._container),200)):Ue(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Di(this._container),this},bringToBack:function(){return this._map&&pr(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof ut){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?ge(this._container,s.add(d)):l=l.add(s).add(d);var m=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});xe.include({_initOverlay:function(s,l,d,m){var y=l;return y instanceof s||(y=new s(m).setContent(l)),d&&y.setLatLng(d),y}}),Be.include({_initOverlay:function(s,l,d,m){var y=d;return y instanceof s?(k(y,m),y._source=this):(y=l&&!m?l:new s(m,this),y.setContent(d)),y}});var ih=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mi.prototype.openOn.call(this,s)},onAdd:function(s){mi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof wr||this._source.on("preclick",Dn))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof wr||this._source.off("preclick",Dn))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ae("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ae("div",s+"-content-wrapper",l);if(this._contentNode=Ae("div",s+"-content",d),_r(l),gr(this._contentNode),he(l,"contextmenu",Dn),this._tipContainer=Ae("div",s+"-tip-container",l),this._tip=Ae("div",s+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Ae("a",s+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',he(m,"click",function(y){Xe(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=s.offsetHeight,y=this.options.maxHeight,E="leaflet-popup-scrolled";y&&m>y?(l.height=y+"px",we(s,E)):Ze(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ge(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(fr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,y=new K(this._containerLeft,-d-this._containerBottom);y._add(kn(this._container));var E=s.layerPointToContainerPoint(y),O=J(this.options.autoPanPadding),W=J(this.options.autoPanPaddingTopLeft||O),H=J(this.options.autoPanPaddingBottomRight||O),Q=s.getSize(),ne=0,de=0;E.x+m+H.x>Q.x&&(ne=E.x+m-Q.x+H.x),E.x-ne-W.x<0&&(ne=E.x-W.x),E.y+d+H.y>Q.y&&(de=E.y+d-Q.y+H.y),E.y-de-W.y<0&&(de=E.y-W.y),(ne||de)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,de]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),k1=function(s,l){return new ih(s,l)};xe.mergeOptions({closePopupOnClick:!0}),xe.include({openPopup:function(s,l,d){return this._initOverlay(ih,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Be.include({bindPopup:function(s,l){return this._popup=this._initOverlay(ih,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof ut||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){gn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof wr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var rh=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,m=this._map,y=this._container,E=m.latLngToContainerPoint(m.getCenter()),O=m.layerPointToContainerPoint(s),W=this.options.direction,H=y.offsetWidth,Q=y.offsetHeight,ne=J(this.options.offset),de=this._getAnchor();W==="top"?(l=H/2,d=Q):W==="bottom"?(l=H/2,d=0):W==="center"?(l=H/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=H,d=Q/2):O.x<E.x?(W="right",l=0,d=Q/2):(W="left",l=H+(ne.x+de.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ne).add(de),Ze(y,"leaflet-tooltip-right"),Ze(y,"leaflet-tooltip-left"),Ze(y,"leaflet-tooltip-top"),Ze(y,"leaflet-tooltip-bottom"),we(y,"leaflet-tooltip-"+W),ge(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&ot(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),L1=function(s,l){return new rh(s,l)};xe.include({openTooltip:function(s,l,d){return this._initOverlay(rh,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Be.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rh,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof ut||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(he(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),he(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,m;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var Cv=pi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Ss(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=J(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function b1(s){return new Cv(s)}pi.Default=bl;var Dl=Be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ue(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Di(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof K?s:new K(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),m=0,y=l.length,E;m<y;m++)E=l[m].style.zIndex,l[m]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){ot(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var m in this._tiles){var y=this._tiles[m];if(!(!y.current||!y.loaded)){var E=Math.min(1,(s-y.loaded)/200);ot(y.el,E),E<1?l=!0:(y.active?d=!0:this._onOpaqueTile(y),y.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Ue(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[s],y=this._map;return m||(m=this._levels[s]={},m.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),m.zoom=s,this._setZoomTransform(m,y.getCenter(),y.getZoom()),g(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ue(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,m){var y=Math.floor(s/2),E=Math.floor(l/2),O=d-1,W=new K(+y,+E);W.z=+O;var H=this._tileCoordsToKey(W),Q=this._tiles[H];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),O>m?this._retainParent(y,E,O,m):!1)},_retainChildren:function(s,l,d,m){for(var y=2*s;y<2*s+2;y++)for(var E=2*l;E<2*l+2;E++){var O=new K(y,E);O.z=d+1;var W=this._tileCoordsToKey(O),H=this._tiles[W];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);d+1<m&&this._retainChildren(y,E,d+1,m)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,m){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var E=this.options.updateWhenZooming&&y!==this._tileZoom;(!m||E)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var m=this._map.getZoomScale(d,s.zoom),y=s.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();oe.any3d?di(s.el,y,m):ge(s.el,y)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),y=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(m*2);return new te(y.subtract(E),y.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(m),E=y.getCenter(),O=[],W=this.options.keepBuffer,H=new te(y.getBottomLeft().subtract([W,-W]),y.getTopRight().add([W,-W]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ne=this._tiles[Q].coords;(ne.z!==this._tileZoom||!H.contains(new K(ne.x,ne.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var de=y.min.y;de<=y.max.y;de++)for(var Ie=y.min.x;Ie<=y.max.x;Ie++){var Zt=new K(Ie,de);if(Zt.z=this._tileZoom,!!this._isValidTile(Zt)){var xt=this._tiles[this._tileCoordsToKey(Zt)];xt?xt.current=!0:O.push(Zt)}}if(O.sort(function(sn,Go){return sn.distanceTo(E)-Go.distanceTo(E)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nn=document.createDocumentFragment();for(Ie=0;Ie<O.length;Ie++)this._addTile(O[Ie],Nn);this._level.el.appendChild(Nn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(s);return De(this.options.bounds).overlaps(m)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),m=s.scaleBy(d),y=m.add(d),E=l.unproject(m,s.z),O=l.unproject(y,s.z);return[E,O]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Pe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new K(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Ue(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){we(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,oe.ielt9&&this.options.opacity<1&&ot(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),m=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&F(a(this._tileReady,this,s,null,y)),ge(y,d),this._tiles[m]={el:y,coords:s,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var m=this._tileCoordsToKey(s);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(ot(d.el,0),U(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(we(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new K(this._wrapX?p(s.x,this._wrapX):s.x,this._wrapY?p(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new te(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function D1(s){return new Dl(s)}var qo=Dl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&oe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return he(d,"load",a(this._tileOnLoad,this,l,d)),he(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:oe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return S(this._url,r(l,this.options))},_tileOnLoad:function(s,l){oe.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(s=l-s),s+m},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=G;var d=this._tiles[s].coords;Ue(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),Dl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return Dl.prototype._tileReady.call(this,s,l,d)}});function Av(s,l){return new qo(s,l)}var Rv=qo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=k(this,l);var y=l.detectRetina&&oe.retina?2:1,E=this.getTileSize();d.width=E.x*y,d.height=E.y*y,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,qo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,m=pe(d.project(l[0]),d.project(l[1])),y=m.min,E=m.max,O=(this._wmsVersion>=1.3&&this._crs===mt?[y.y,y.x,E.y,E.x]:[y.x,y.y,E.x,E.y]).join(","),W=qo.prototype.getTileUrl.call(this,s);return W+V(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function M1(s,l){return new Rv(s,l)}qo.WMS=Rv,Av.wms=M1;var Bi=Be.extend({options:{padding:.1},initialize:function(s){k(this,s),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),E=m.multiplyBy(-d).add(y).subtract(this._map._getNewPixelOrigin(s,l));oe.any3d?di(this._container,E,d):ge(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new te(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),kv=Bi.extend({options:{tolerance:0},getEvents:function(){var s=Bi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");he(s,"mousemove",this._onMouseMove,this),he(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Ue(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),m=oe.retina?2:1;ge(l,s.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[c(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete s._order,delete this._layers[c(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],m,y;for(y=0;y<l.length;y++){if(m=Number(l[y]),isNaN(m))return;d.push(m)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)s=m.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,m,y,E,O=s._parts,W=O.length,H=this._ctx;if(W){for(H.beginPath(),d=0;d<W;d++){for(m=0,y=O[d].length;m<y;m++)E=O[d][m],H[m?"lineTo":"moveTo"](E.x,E.y);l&&H.closePath()}this._fillStroke(H,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,m=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||m)/m;y!==1&&(d.save(),d.scale(1,y)),d.beginPath(),d.arc(l.x,l.y/y,m,0,Math.PI*2,!1),y!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,m,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,m,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(s),m&&(we(this._container,"leaflet-interactive"),this._fireEvent([m],s,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Lv(s){return oe.canvas?new kv(s):null}var Ml=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),N1={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ml("shape");we(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ml("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ue(l),s.removeInteractiveTarget(l),delete this._layers[c(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,m=s.options,y=s._container;y.stroked=!!m.stroke,y.filled=!!m.fill,m.stroke?(l||(l=s._stroke=Ml("stroke")),y.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=A(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(y.removeChild(l),s._stroke=null),m.fill?(d||(d=s._fill=Ml("fill")),y.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(y.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),m=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Di(s._container)},_bringToBack:function(s){pr(s._container)}},sh=oe.vml?Ml:_o,Nl=Bi.extend({_initContainer:function(){this._container=sh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ue(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ge(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=sh("path");s.options.className&&we(l,s.options.className),s.options.interactive&&we(l,"leaflet-interactive"),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ue(s._path),s.removeInteractiveTarget(s._path),delete this._layers[c(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,tl(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),m=Math.max(Math.round(s._radiusY),1)||d,y="a"+d+","+m+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+y+d*2+",0 "+y+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Di(s._path)},_bringToBack:function(s){pr(s._path)}});oe.vml&&Nl.include(N1);function bv(s){return oe.svg||oe.vml?new Nl(s):null}xe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Lv(s)||bv(s)}});var Dv=Wo.extend({initialize:function(s,l){Wo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=De(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function O1(s,l){return new Dv(s,l)}Nl.create=sh,Nl.pointsToPath=tl,ji.geometryToLayer=Xc,ji.coordsToLatLng=tp,ji.coordsToLatLngs=Jc,ji.latLngToCoords=np,ji.latLngsToCoords=eh,ji.getFeature=Ho,ji.asFeature=th,xe.mergeOptions({boxZoom:!0});var Mv=_n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zn(),yl(),this._startPoint=this._map.mouseEventToContainerPoint(s),he(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new te(this._point,this._startPoint),d=l.getSize();ge(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Ue(this._box),Ze(this._container,"leaflet-crosshair")),Qn(),vl(),je(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xe.addInitHook("addHandler","boxZoom",Mv),xe.mergeOptions({doubleClickZoom:!0});var Nv=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,y=s.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(s.containerPoint,y)}});xe.addInitHook("addHandler","doubleClickZoom",Nv),xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ov=_n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Yn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=De(this._map.options.maxBounds);this._offsetLimit=pe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,y=(m-l+d)%s+l-d,E=(m+l+d)%s-l-d,O=Math.abs(y+d)<Math.abs(E+d)?y:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(s){var l=this._map,d=l.options,m=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),m)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,O=d.easeLinearity,W=y.multiplyBy(O/E),H=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,H),ne=W.multiplyBy(Q/H),de=Q/(d.inertiaDeceleration*O),Ie=ne.multiplyBy(-de/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),F(function(){l.panBy(Ie,{duration:de,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});xe.addInitHook("addHandler","dragging",Ov),xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vv=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),he(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,m=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,m,y;for(m=0,y=d.left.length;m<y;m++)l[d.left[m]]=[-1*s,0];for(m=0,y=d.right.length;m<y;m++)l[d.right[m]]=[s,0];for(m=0,y=d.down.length;m<y;m++)l[d.down[m]]=[0,s];for(m=0,y=d.up.length;m<y;m++)l[d.up[m]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,m,y;for(m=0,y=d.zoomIn.length;m<y;m++)l[d.zoomIn[m]]=s;for(m=0,y=d.zoomOut.length;m<y;m++)l[d.zoomOut[m]]=-s},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],s.shiftKey&&(m=J(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(J(m),d.options.maxBounds)),d.options.worldCopyJump){var y=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(y)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;gn(s)}}});xe.addInitHook("addHandler","keyboard",Vv),xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fv=_n.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=$c(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),m),gn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,E=d?Math.ceil(y/d)*d:y,O=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,O&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+O):s.setZoomAround(this._lastMousePos,l+O))}});xe.addInitHook("addHandler","scrollWheelZoom",Fv);var V1=600;xe.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var jv=_n.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new K(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(he(document,"touchend",Xe),he(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),V1),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){je(document,"touchend",Xe),je(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new K(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});xe.addInitHook("addHandler","tapHold",jv),xe.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var Bv=_n.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),Xe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]),y=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var E=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(y===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var O=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(O,this,!0),Xe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xe.addInitHook("addHandler","touchZoom",Bv),xe.BoxZoom=Mv,xe.DoubleClickZoom=Nv,xe.Drag=Ov,xe.Keyboard=Vv,xe.ScrollWheelZoom=Fv,xe.TapHold=jv,xe.TouchZoom=Bv,n.Bounds=te,n.Browser=oe,n.CRS=st,n.Canvas=kv,n.Circle=ep,n.CircleMarker=Yc,n.Class=Te,n.Control=rn,n.DivIcon=Cv,n.DivOverlay=mi,n.DomEvent=Wc,n.DomUtil=Uc,n.Draggable=Yn,n.Evented=Ke,n.FeatureGroup=ut,n.GeoJSON=ji,n.GridLayer=Dl,n.Handler=_n,n.Icon=pi,n.ImageOverlay=nh,n.LatLng=Ee,n.LatLngBounds=Pe,n.Layer=Be,n.LayerGroup=Je,n.LineUtil=x,n.Map=xe,n.Marker=Qc,n.Mixin=xs,n.Path=wr,n.Point=K,n.PolyUtil=Uo,n.Polygon=Wo,n.Polyline=Fi,n.Popup=ih,n.PosAnimation=xl,n.Projection=ee,n.Rectangle=Dv,n.Renderer=Bi,n.SVG=Nl,n.SVGOverlay=xv,n.TileLayer=qo,n.Tooltip=rh,n.Transformation=Ft,n.Util=N,n.VideoOverlay=Sv,n.bind=a,n.bounds=pe,n.canvas=Lv,n.circle=P1,n.circleMarker=E1,n.control=Kt,n.divIcon=b1,n.extend=r,n.featureGroup=$o,n.geoJSON=Iv,n.geoJson=x1,n.gridLayer=D1,n.icon=w1,n.imageOverlay=C1,n.latLng=ce,n.latLngBounds=De,n.layerGroup=vr,n.map=No,n.marker=T1,n.point=J,n.polygon=S1,n.polyline=I1,n.popup=k1,n.rectangle=O1,n.setOptions=k,n.stamp=c,n.svg=bv,n.svgOverlay=R1,n.tileLayer=Av,n.tooltip=L1,n.transformation=hi,n.version=i,n.videoOverlay=A1;var F1=window.L;n.noConflict=function(){return window.L=F1,this},window.L=n})})(zg,zg.exports);var Ja=zg.exports;const Zf=NE(Ja);function Qf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function yv(t,e){return e==null?function(i,r){const o=j.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=j.useRef();o.current||(o.current=t(i,r));const a=j.useRef(i),{instance:u}=o.current;return j.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function y3(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function y1(t){return function(n){const i=gv(),r=t(_v(n,i),i);return p1(i.map,n.attribution),_1(r.current,n.eventHandlers),y3(r.current,i),r}}function v3(t,e){const n=yv(t,e),i=y1(n);return p3(i)}function v1(t,e){const n=yv(t),i=_3(n,e);return m3(i)}function w3(t,e){const n=yv(t,e),i=y1(n);return g3(i)}function T3(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function E3(){return gv().map}function P3(t){const e=E3();return j.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function $g(){return $g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$g.apply(this,arguments)}function I3({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:c,zoom:f,...p},g){const[v]=j.useState({className:r,id:o,style:u}),[T,C]=j.useState(null);j.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const k=j.useCallback(b=>{if(b!==null&&T===null){const S=new Ja.Map(b,p);n!=null&&f!=null?S.setView(n,f):t!=null&&S.fitBounds(t,e),c!=null&&S.whenReady(c),C(d3(S))}},[]);j.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const V=T?qs.createElement(g1,{value:T},i):a??null;return qs.createElement("div",$g({},v,{ref:k}),V)}const vv=j.forwardRef(I3),wv=v3(function({position:e,...n},i){const r=new Ja.Marker(e,n);return Qf(r,f3(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),S3=v1(function(e,n){const i=new Ja.Popup(e,n.overlayContainer);return Qf(i,n)},function(e,n,{position:i},r){j.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function c(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var p;n.map.off({popupopen:u,popupclose:c}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),Tv=w3(function({url:e,...n},i){const r=new Ja.TileLayer(e,_v(n,i));return Qf(r,i)},function(e,n,i){T3(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),x3=v1(function(e,n){const i=new Ja.Tooltip(e,n.overlayContainer);return Qf(i,n)},function(e,n,{position:i},r){j.useEffect(function(){const a=n.overlayContainer;if(a==null)return;const{instance:u}=e,c=p=>{p.tooltip===u&&(i!=null&&u.setLatLng(i),u.update(),r(!0))},f=p=>{p.tooltip===u&&r(!1)};return a.on({tooltipopen:c,tooltipclose:f}),a.bindTooltip(u),function(){a.off({tooltipopen:c,tooltipclose:f}),a._map!=null&&a.unbindTooltip()}},[e,n,r,i])});delete Zf.Icon.Default.prototype._getIconUrl;Zf.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function C3({places:t,selected:e,setSelected:n,allPlaces:i,allPlacesSetter:r}){const[o,a]=j.useState([]);j.useEffect(()=>{const c=EC(Ju(vi,"approvedLocations"),f=>{const p=f.docs.map(g=>{const v=g.data();return{id:g.id,...v,location:v.location||null}});a(p)});return()=>c()},[]);const u=o.filter(c=>c.location&&typeof c.location.lat=="number"&&typeof c.location.lng=="number");return P.jsx("div",{style:{height:"calc(100vh - 70px)",width:"100%"},children:P.jsxs(vv,{center:[28.36,75.59],zoom:15,style:{height:"100%",width:"100%"},children:[P.jsx(Tv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/">OpenStreetMap</a>'}),u.map(c=>P.jsxs(wv,{position:[c.location.lat,c.location.lng],children:[P.jsx(x3,{direction:"top",offset:[0,-8],children:P.jsxs("div",{children:[P.jsx("strong",{children:c.name}),P.jsx("div",{children:c.category||"—"})]})}),P.jsx(S3,{children:P.jsxs("div",{className:"popup-card-inner",children:[P.jsx("h4",{children:c.name}),P.jsx("p",{children:c.description}),c.imageUrl&&P.jsx("img",{src:c.imageUrl,alt:c.name,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}}),P.jsx("p",{style:{marginTop:8},children:P.jsx("small",{children:c.category})})]})})]},c.id))]})})}function A3({places:t=[],categories:e=["All"],onFilter:n=()=>{},onSelect:i=()=>{},filter:r={q:"",category:"All"}}){const o=Array.isArray(e)?e:["All"];return P.jsxs("aside",{className:"sidebar",children:[P.jsxs("div",{className:"side-top",children:[P.jsx("h2",{children:"Pilani Trails"}),P.jsx("p",{className:"muted",children:"Explore the town — filter, search & bookmark your faves."}),P.jsx("div",{className:"search-row",children:P.jsx("input",{placeholder:"Search spots, e.g., 'printing' or 'momo'",value:r.q||"",onChange:a=>n(u=>({...u,q:a.target.value}))})}),P.jsx("div",{className:"chips",children:o.map(a=>P.jsx("button",{className:"chip",onClick:()=>n(u=>({...u,category:a})),children:a},a))})]}),P.jsx("div",{className:"side-list",children:!Array.isArray(t)||t.length===0?P.jsx("div",{className:"empty",children:"No matches — try fresh filters"}):t.map(a=>P.jsxs("div",{className:"place-card",onClick:()=>i(a),children:[P.jsxs("div",{className:"place-header",children:[P.jsx("strong",{children:a.name}),P.jsx("span",{className:"cat",children:a.category})]}),P.jsx("div",{className:"desc",children:a.desc}),P.jsxs("div",{className:"meta",children:[P.jsxs("span",{children:["🔥 ",a.votes??0]}),P.jsx("span",{children:a.source==="seed"?"OG":"User"})]})]},a.id))}),P.jsx("div",{className:"side-bottom",children:P.jsx("a",{className:"btn",href:"/contribute",children:"Drop a pin"})})]})}const R3="/pilani-trails/assets/bg-DLqqgHgj.jpg";function k3(){const[t,e]=j.useState([]),[n,i]=j.useState({q:"",category:"All"}),[r,o]=j.useState(null),[a,u]=j.useState(!0);j.useEffect(()=>{const p=EC(Ju(vi,"approvedLocations"),g=>{const v=g.docs.map(T=>({id:T.id,...T.data()}));e(v),u(!1)});return()=>p()},[]);const c=t.filter(p=>{const g=n.q.toLowerCase(),v=!g||p.name&&p.name.toLowerCase().includes(g)||p.description&&p.description.toLowerCase().includes(g),T=n.category==="All"||p.category&&p.category===n.category;return v&&T}),f=["All",...Array.from(new Set((Array.isArray(t)?t:[]).map(p=>p.category||"Other")))];return a?P.jsx("div",{className:"loading-screen",children:P.jsx(sm.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6},children:"Loading trails..."})}):P.jsxs("div",{className:"home-grid",style:{backgroundImage:`url(${R3})`,backgroundSize:"cover",backgroundPosition:"center"},children:[P.jsx(sm.div,{className:"sidebar-container",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7},children:P.jsx(A3,{filter:n,setFilter:i,places:t,setPlaces:e,selected:r,setSelected:o,categories:f,onFilter:i,onSelect:o})}),P.jsx(sm.div,{className:"map-container",initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},children:P.jsx(C3,{places:c,selected:r,setSelected:o,allPlaces:t,allPlacesSetter:e})})]})}const L3=()=>{const[t,e]=j.useState(""),[n,i]=j.useState(""),[r,o]=j.useState(""),[a,u]=j.useState(!1),{login:c,signInWithGoogle:f}=po(),p=Ga(),g=async T=>{T.preventDefault();try{o(""),u(!0),await c(t,n),p("/")}catch(C){o("Failed to sign in: "+C.message)}u(!1)},v=async()=>{try{o(""),u(!0),await f(),p("/")}catch(T){o("Failed to sign in with Google: "+T.message)}u(!1)};return P.jsx("div",{className:"auth-container",children:P.jsxs("div",{className:"auth-card",children:[P.jsx("h2",{children:"Login to Pilani Trails"}),r&&P.jsx("div",{className:"error-message",children:r}),P.jsxs("form",{onSubmit:g,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"email",children:"Email"}),P.jsx("input",{id:"email",type:"email",value:t,onChange:T=>e(T.target.value),required:!0,placeholder:"your.email@example.com"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"password",children:"Password"}),P.jsx("input",{id:"password",type:"password",value:n,onChange:T=>i(T.target.value),required:!0,placeholder:"••••••••"})]}),P.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Signing in...":"Sign In"})]}),P.jsx("div",{className:"divider",children:P.jsx("span",{children:"OR"})}),P.jsxs("button",{onClick:v,disabled:a,className:"btn-google",children:[P.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[P.jsx("path",{fill:"#4285F4",d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z"}),P.jsx("path",{fill:"#34A853",d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z"}),P.jsx("path",{fill:"#FBBC05",d:"M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z"}),P.jsx("path",{fill:"#EA4335",d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z"})]}),"Sign in with Google"]}),P.jsxs("p",{className:"auth-switch",children:["Don't have an account? ",P.jsx(Xt,{to:"/signup",children:"Sign up"})]})]})})},b3=()=>{const[t,e]=j.useState(""),[n,i]=j.useState(""),[r,o]=j.useState(""),[a,u]=j.useState(""),[c,f]=j.useState(!1),{currentUser:p}=po(),g=Ga();if(p)return g("/"),null;const v=async C=>{if(C.preventDefault(),n!==r){u("Passwords do not match");return}if(n.length<6){u("Password must be at least 6 characters");return}u(""),f(!0);try{await $S(Dr,t,n),g("/")}catch(k){u(k.message)}finally{f(!1)}},T=async()=>{u(""),f(!0);try{const C=new Ti;await tx(Dr,C),g("/")}catch(C){u(C.message)}finally{f(!1)}};return P.jsx("div",{className:"auth-container",children:P.jsxs("div",{className:"auth-card",children:[P.jsx("h2",{children:"Create Account"}),P.jsx("p",{children:"Sign up for Pilani Trails"}),a&&P.jsx("div",{className:"error-message",children:a}),P.jsxs("form",{onSubmit:v,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"email",children:"Email"}),P.jsx("input",{type:"email",id:"email",value:t,onChange:C=>e(C.target.value),placeholder:"Enter your email",required:!0,disabled:c})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"password",children:"Password"}),P.jsx("input",{type:"password",id:"password",value:n,onChange:C=>i(C.target.value),placeholder:"Create a password (min 6 characters)",required:!0,disabled:c})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),P.jsx("input",{type:"password",id:"confirmPassword",value:r,onChange:C=>o(C.target.value),placeholder:"Confirm your password",required:!0,disabled:c})]}),P.jsx("button",{type:"submit",className:"btn-primary",disabled:c,children:c?"Creating Account...":"Sign Up"})]}),P.jsx("div",{className:"divider",children:"OR"}),P.jsxs("button",{onClick:T,className:"btn-google",disabled:c,children:[P.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[P.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),P.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),P.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),P.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign up with Google"]}),P.jsxs("div",{className:"auth-switch",children:["Already have an account? ",P.jsx(Xt,{to:"/login",children:"Sign In"})]})]})})};function D3(){var v;const{currentUser:t,logout:e}=po(),n=Ga(),[i,r]=j.useState([]),[o,a]=j.useState(!0),[u,c]=j.useState({totalProposals:0,pendingProposals:0,approvedProposals:0,rejectedProposals:0});j.useEffect(()=>{f()},[t]);const f=async()=>{a(!0);try{const C=JSON.parse(localStorage.getItem("proposals")||"[]").filter(k=>k.userId===(t==null?void 0:t.uid));r(C),c({totalProposals:C.length,pendingProposals:C.filter(k=>k.status==="pending").length,approvedProposals:C.filter(k=>k.status==="approved").length,rejectedProposals:C.filter(k=>k.status==="rejected").length})}catch(T){console.error("Error loading user data:",T)}finally{a(!1)}},p=async()=>{try{await e(),n("/login")}catch(T){console.error("Logout error:",T)}},g=T=>{switch(T){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}};return o?P.jsx("div",{className:"dashboard-container",style:ue.container,children:P.jsx("div",{style:ue.loading,children:"Loading your dashboard..."})}):P.jsxs("div",{className:"dashboard-container",style:ue.container,children:[P.jsxs("div",{style:ue.header,children:[P.jsx("h1",{style:ue.title,children:"My Dashboard"}),P.jsxs("p",{style:ue.subtitle,children:["Welcome back, ",(t==null?void 0:t.email)||"User","!"]})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"Account Information"}),P.jsxs("div",{style:ue.infoGrid,children:[P.jsxs("div",{style:ue.infoItem,children:[P.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]}),P.jsxs("div",{style:ue.infoItem,children:[P.jsx("strong",{children:"User ID:"})," ",t==null?void 0:t.uid]}),P.jsxs("div",{style:ue.infoItem,children:[P.jsx("strong",{children:"Member Since:"})," ",new Date(((v=t==null?void 0:t.metadata)==null?void 0:v.creationTime)||Date.now()).toLocaleDateString()]})]})]}),P.jsxs("div",{style:ue.statsGrid,children:[P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#007bff"},children:[P.jsx("div",{style:ue.statNumber,children:u.totalProposals}),P.jsx("div",{style:ue.statLabel,children:"Total Proposals"})]}),P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#ffc107"},children:[P.jsx("div",{style:ue.statNumber,children:u.pendingProposals}),P.jsx("div",{style:ue.statLabel,children:"Pending Review"})]}),P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#28a745"},children:[P.jsx("div",{style:ue.statNumber,children:u.approvedProposals}),P.jsx("div",{style:ue.statLabel,children:"Approved"})]}),P.jsxs("div",{style:{...ue.statCard,borderLeftColor:"#dc3545"},children:[P.jsx("div",{style:ue.statNumber,children:u.rejectedProposals}),P.jsx("div",{style:ue.statLabel,children:"Rejected"})]})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"Quick Actions"}),P.jsxs("div",{style:ue.actionsGrid,children:[P.jsxs(Xt,{to:"/propose",style:ue.actionButton,children:[P.jsx("span",{style:ue.actionIcon,children:"➕"}),P.jsx("span",{children:"Propose New Location"})]}),P.jsxs(Xt,{to:"/",style:ue.actionButton,children:[P.jsx("span",{style:ue.actionIcon,children:"🗺️"}),P.jsx("span",{children:"View Map"})]}),P.jsxs(Xt,{to:"/contribute",style:ue.actionButton,children:[P.jsx("span",{style:ue.actionIcon,children:"✍️"}),P.jsx("span",{children:"Contribute"})]}),P.jsxs("button",{onClick:p,style:{...ue.actionButton,cursor:"pointer",border:"none"},children:[P.jsx("span",{style:ue.actionIcon,children:"🚪"}),P.jsx("span",{children:"Logout"})]})]})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"My Proposals"}),i.length===0?P.jsxs("div",{style:ue.emptyState,children:[P.jsx("p",{children:"You haven't submitted any proposals yet."}),P.jsx(Xt,{to:"/propose",style:ue.primaryButton,children:"Submit Your First Proposal"})]}):P.jsx("div",{style:ue.proposalsList,children:i.map(T=>{var C,k,V;return P.jsxs("div",{style:ue.proposalCard,children:[P.jsxs("div",{style:ue.proposalHeader,children:[P.jsx("h3",{style:ue.proposalTitle,children:T.name}),P.jsx("span",{style:{...ue.statusBadge,backgroundColor:g(T.status)},children:((C=T.status)==null?void 0:C.toUpperCase())||"PENDING"})]}),P.jsxs("div",{style:ue.proposalDetails,children:[P.jsxs("div",{children:[P.jsx("strong",{children:"Category:"})," ",T.category]}),P.jsxs("div",{children:[P.jsx("strong",{children:"Location:"})," [",(k=T.lat)==null?void 0:k.toFixed(4),", ",(V=T.lng)==null?void 0:V.toFixed(4),"]"]}),P.jsxs("div",{children:[P.jsx("strong",{children:"Submitted:"})," ",new Date(T.timestamp).toLocaleDateString()]})]}),T.description&&P.jsx("p",{style:ue.proposalDescription,children:T.description}),T.adminFeedback&&P.jsxs("div",{style:ue.feedback,children:[P.jsx("strong",{children:"Admin Feedback:"})," ",T.adminFeedback]})]},T.id)})})]}),P.jsxs("div",{style:ue.card,children:[P.jsx("h2",{style:ue.cardTitle,children:"Need Help?"}),P.jsxs("p",{children:["Check out our ",P.jsx(Xt,{to:"/about",style:ue.link,children:"About page"})," for more information about Pilani Trails."]}),P.jsxs("p",{children:["Questions? Contact us or visit the ",P.jsx(Xt,{to:"/contribute",style:ue.link,children:"Contribute page"})," to learn more."]})]})]})}const ue={container:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},subtitle:{fontSize:"1.1rem",color:"#666"},loading:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#666"},card:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#333"},infoGrid:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},infoItem:{padding:"0.5rem",fontSize:"1rem"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},statCard:{backgroundColor:"#fff",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid",textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},statLabel:{fontSize:"0.9rem",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},actionsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},actionButton:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f8f9fa",borderRadius:"8px",textDecoration:"none",color:"#333",transition:"all 0.2s",fontWeight:"500"},actionIcon:{fontSize:"2rem",marginBottom:"0.5rem"},emptyState:{textAlign:"center",padding:"2rem",color:"#666"},primaryButton:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"#fff",textDecoration:"none",borderRadius:"4px",marginTop:"1rem",fontWeight:"500"},proposalsList:{display:"flex",flexDirection:"column",gap:"1rem"},proposalCard:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},proposalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},proposalTitle:{fontSize:"1.2rem",fontWeight:"bold",margin:0},statusBadge:{padding:"0.25rem 0.75rem",borderRadius:"12px",color:"#fff",fontSize:"0.8rem",fontWeight:"bold"},proposalDetails:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},proposalDescription:{marginTop:"0.5rem",color:"#555",lineHeight:"1.5"},feedback:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",borderLeft:"3px solid #007bff"},link:{color:"#007bff",textDecoration:"none",fontWeight:"500"}};delete Zf.Icon.Default.prototype._getIconUrl;Zf.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function M3({onSelect:t}){return P3({click(e){t(e.latlng)}}),null}function N3({value:t,onChange:e}){const[n,i]=j.useState(t||null),r=o=>{i(o),e&&e(o)};return P.jsxs("div",{style:{height:"300px",width:"100%",marginBottom:"1rem"},children:[P.jsxs(vv,{center:n?[n.lat,n.lng]:[28.36,75.59],zoom:15,style:{height:"100%",width:"100%"},children:[P.jsx(Tv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),P.jsx(M3,{onSelect:r}),n&&P.jsx(wv,{position:[n.lat,n.lng]})]}),P.jsx("p",{style:{marginTop:"6px",fontSize:"0.9rem",color:"#333"},children:n?`Selected: ${n.lat.toFixed(5)}, ${n.lng.toFixed(5)}`:"Click on the map to drop a pin for this location"})]})}const O3=()=>{const{currentUser:t}=j.useContext(Gy),[e,n]=j.useState({name:"",description:"",category:"",tags:"",imageUrl:"",location:null}),[i,r]=j.useState(!1),[o,a]=j.useState({type:"",text:""}),u=f=>{const{name:p,value:g}=f.target;n(v=>({...v,[p]:g}))},c=async f=>{if(f.preventDefault(),!t)return a({type:"error",text:"You must be logged in to propose a location."});if(!e.name||!e.description||!e.category)return a({type:"error",text:"Please provide name, description, and category."});if(!e.location)return a({type:"error",text:"Please drop a pin on the map to select location."});r(!0),a({type:"",text:""});try{await TC(Ju(vi,"locationProposals"),{name:e.name,description:e.description,category:e.category,tags:e.tags||"",imageUrl:e.imageUrl||"",location:{lat:e.location.lat,lng:e.location.lng},status:"pending",proposedBy:t.email||t.uid,userId:t.uid,userEmail:t.email||"",createdAt:TF()}),a({type:"success",text:"✅ Location proposal submitted successfully! Awaiting admin review."}),n({name:"",description:"",category:"",tags:"",imageUrl:"",location:null})}catch(p){console.error("Error submitting proposal:",p),a({type:"error",text:`❌ Failed to submit proposal: ${p.message}`})}finally{r(!1)}};return P.jsx("div",{className:"propose-location-container",children:P.jsxs("div",{className:"propose-location-card",children:[P.jsx("h2",{children:"Propose a New Location"}),P.jsx("p",{className:"subtitle",children:"Share a new trail or point of interest with the community"}),o.text&&P.jsx("div",{className:`message ${o.type}`,children:o.text}),P.jsxs("form",{onSubmit:c,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Location Name *"}),P.jsx("input",{type:"text",name:"name",value:e.name,onChange:u,placeholder:"Enter location name"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Description *"}),P.jsx("textarea",{name:"description",value:e.description,onChange:u,placeholder:"Describe the location briefly"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Category *"}),P.jsxs("select",{name:"category",value:e.category,onChange:u,children:[P.jsx("option",{value:"",children:"Select a category"}),P.jsx("option",{value:"trail",children:"Trail"}),P.jsx("option",{value:"viewpoint",children:"Viewpoint"}),P.jsx("option",{value:"landmark",children:"Landmark"}),P.jsx("option",{value:"park",children:"Park"}),P.jsx("option",{value:"food",children:"Food"}),P.jsx("option",{value:"stationery",children:"Stationery"}),P.jsx("option",{value:"other",children:"Other"})]})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Pin Location *"}),P.jsx(N3,{value:e.location,onChange:f=>n(p=>({...p,location:f}))})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Tags (comma separated)"}),P.jsx("input",{type:"text",name:"tags",value:e.tags,onChange:u,placeholder:"e.g. hiking, sunset, peaceful"})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Image URL"}),P.jsx("input",{type:"text",name:"imageUrl",value:e.imageUrl,onChange:u,placeholder:"https://example.com/photo.jpg"})]}),P.jsx("button",{type:"submit",className:"submit-button",disabled:i,children:i?"Submitting...":"Submit Proposal"})]})]})})};function V3(t){var n;return t?t.isAdmin===!0||t.admin===!0||t.role==="admin"||typeof t.isAdmin=="string"&&t.isAdmin.toLowerCase()==="true"||((n=t.email)==null?void 0:n.toLowerCase())==="admin@pilanitrails.com":!1}function F3(t){if(!t)return"—";if(t.seconds)return new Date(t.seconds*1e3).toLocaleString();try{return new Date(t).toLocaleString()}catch{return String(t)}}function _i(t={},e=[]){const n=Object.keys(t).reduce((i,r)=>(i[r.toLowerCase().replace(/\s+/g,"")]=r,i),{});for(const i of e){const r=i.toLowerCase().replace(/\s+/g,"");if(n[r])return t[n[r]]}}const Zo="Admin (admin@pilanitrails.com)",j3=()=>{const{currentUser:t,loading:e}=po(),[n,i]=j.useState([]),[r,o]=j.useState(!0),[a,u]=j.useState("all"),[c,f]=j.useState(null),[p,g]=j.useState({}),[v,T]=j.useState(null),C=V3(t);j.useEffect(()=>{if(!e){if(!C){o(!1);return}k()}},[a,e,t]);const k=async()=>{T(null);try{o(!0);const $=Ju(vi,"locationProposals"),R=a==="all"?$:pF($,mF("status","==",a)),D=(await vF(R)).docs.map(M=>({id:M.id,...M.data()}));i(D)}catch($){console.error("[AdminReview] fetchProposals error:",$),T(($==null?void 0:$.message)||String($)),i([])}finally{o(!1)}},V=async $=>{if(!C)return alert("Admin only");try{const R=ha(vi,"locationProposals",$),I=await wC(R);if(!I.exists()){alert("Proposal not found!");return}const D=I.data();if(!D.location||typeof D.location.lat!="number"||typeof D.location.lng!="number"){alert("Cannot approve — no pin location provided!");return}await $p(R,{status:"approved",reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||Zo,reviewedAt:new Date().toISOString()}),await TC(Ju(vi,"approvedLocations"),{...D,approvedBy:(t==null?void 0:t.email)||Zo,approvedAt:new Date().toISOString()}),alert("✅ Proposal approved and moved to approved locations!"),k()}catch(R){console.error("Approve error:",R),alert("Approve failed: "+((R==null?void 0:R.message)||R))}},b=async $=>{if(!C)return alert("Admin only");const R=prompt("Reason for rejection?");if(R)try{await $p(ha(vi,"locationProposals",$),{status:"rejected",rejectionReason:R,reviewedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||Zo,reviewedAt:new Date().toISOString()}),alert("Proposal rejected!"),k()}catch(I){console.error("Reject error:",I),alert("Reject failed: "+((I==null?void 0:I.message)||I))}},S=async $=>{if(!C)return alert("Admin only");if(window.confirm("Delete this location permanently?"))try{await wF(ha(vi,"locationProposals",$)),alert("Location deleted!"),k()}catch(R){console.error("Delete error:",R),alert("Delete failed: "+((R==null?void 0:R.message)||R))}},A=$=>{f($.id),g({name:_i($,["name","Name"])||"",description:_i($,["description","Description"])||"",category:_i($,["category","Category"])||"",tags:_i($,["tags","Tags"])||"",imageUrl:_i($,["imageUrl","image","Image URL"])||""})},B=($,R)=>{g(I=>({...I,[$]:R}))},G=async $=>{if(!C)return alert("Admin only");try{const R={...p,editedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||Zo,editedAt:new Date().toISOString()};await $p(ha(vi,"locationProposals",$),R),alert("Changes saved successfully!"),f(null),k()}catch(R){console.error("Update error:",R),alert("Update failed: "+((R==null?void 0:R.message)||R))}};return e?P.jsx("div",{className:"admin-review-loading",children:"Checking authentication..."}):C?r?P.jsx("div",{className:"admin-review-loading",children:"Loading proposals..."}):P.jsxs("div",{className:"admin-review-container",children:[P.jsxs("div",{className:"admin-review-header",children:[P.jsx("h1",{children:"Admin Control Panel"}),P.jsx("p",{children:"Approve, edit, or delete any proposed location"})]}),P.jsxs("div",{className:"filter-section",style:{marginBottom:12},children:[P.jsx("label",{style:{marginRight:8},children:"Filter:"}),P.jsxs("select",{value:a,onChange:$=>u($.target.value),children:[P.jsx("option",{value:"all",children:"All"}),P.jsx("option",{value:"pending",children:"Pending"}),P.jsx("option",{value:"approved",children:"Approved"}),P.jsx("option",{value:"rejected",children:"Rejected"})]})]}),v&&P.jsxs("div",{style:{color:"crimson",marginBottom:12},children:["Error fetching proposals: ",v]}),n.length===0?P.jsx("div",{className:"no-proposals",children:"No proposals found."}):P.jsx("div",{className:"proposals-grid",children:n.map($=>{const R=_i($,["name"])||"—",I=_i($,["description"])||"—",D=_i($,["category"])||"—",M=_i($,["tags"])||"—",F=_i($,["proposedBy","userEmail"])||$.userEmail||$.userId||"—",U=$.createdAt?F3($.createdAt):"—",N=$.status||"pending",Te=$.rejectionReason||"";return P.jsxs("div",{className:"proposal-card",children:[P.jsxs("div",{className:"proposal-header",children:[c===$.id?P.jsx("input",{value:p.name,onChange:ze=>B("name",ze.target.value),className:"edit-input",placeholder:"Name"}):P.jsx("h3",{style:{margin:0},children:R}),P.jsx("span",{className:`status-badge ${N}`,children:N})]}),P.jsx("div",{className:"proposal-details",style:{marginTop:8},children:c===$.id?P.jsxs(P.Fragment,{children:[P.jsx("label",{children:"Description:"}),P.jsx("textarea",{value:p.description,onChange:ze=>B("description",ze.target.value)}),P.jsx("label",{children:"Category:"}),P.jsx("input",{value:p.category,onChange:ze=>B("category",ze.target.value)}),P.jsx("label",{children:"Tags:"}),P.jsx("input",{value:p.tags,onChange:ze=>B("tags",ze.target.value)}),P.jsx("label",{children:"Image URL:"}),P.jsx("input",{value:p.imageUrl,onChange:ze=>B("imageUrl",ze.target.value)})]}):P.jsxs(P.Fragment,{children:[P.jsxs("p",{children:[P.jsx("strong",{children:"Description:"})," ",I]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Category:"})," ",D]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Tags:"})," ",M]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Proposed by:"})," ",F]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Created At:"})," ",U]}),$.location&&typeof $.location.lat=="number"&&typeof $.location.lng=="number"&&P.jsx("div",{className:"mini-map",style:{marginTop:10,borderRadius:8,overflow:"hidden"},children:P.jsxs(vv,{center:[$.location.lat,$.location.lng],zoom:15,style:{height:"160px",width:"100%"},scrollWheelZoom:!1,children:[P.jsx(Tv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),P.jsx(wv,{position:[$.location.lat,$.location.lng]})]})}),N==="approved"&&P.jsxs("p",{children:[P.jsx("strong",{children:"Approved by:"})," ",(t==null?void 0:t.email)||Zo]}),N==="rejected"&&P.jsxs(P.Fragment,{children:[P.jsxs("p",{children:[P.jsx("strong",{children:"Rejected by:"})," ",(t==null?void 0:t.email)||Zo]}),Te&&P.jsxs("p",{children:[P.jsx("strong",{children:"Reason:"})," ",Te]})]}),$.imageUrl&&P.jsx("img",{src:$.imageUrl,alt:R,style:{width:"100%",borderRadius:8,marginTop:8}})]})}),P.jsx("div",{className:"proposal-actions",style:{marginTop:10},children:c===$.id?P.jsxs(P.Fragment,{children:[P.jsx("button",{onClick:()=>G($.id),className:"btn btn-save",children:"Save"}),P.jsx("button",{onClick:()=>f(null),className:"btn btn-cancel",children:"Cancel"})]}):P.jsxs(P.Fragment,{children:[P.jsx("button",{onClick:()=>V($.id),className:"btn btn-approve",children:"Approve"}),P.jsx("button",{onClick:()=>b($.id),className:"btn btn-reject",children:"Reject"}),P.jsx("button",{onClick:()=>A($),className:"btn btn-edit",children:"Edit"}),P.jsx("button",{onClick:()=>S($.id),className:"btn btn-delete",children:"Delete"})]})})]},$.id)})})]}):P.jsx("div",{className:"admin-review-container",children:P.jsxs("div",{className:"admin-review-header",children:[P.jsx("h1",{children:"Admin Control Panel"}),P.jsx("p",{children:"Only admins can view this page."})]})})};function B3(){const t="pilani_trails_places_v1",[e,n]=j.useState(""),[i,r]=j.useState(!1),[o,a]=j.useState([]);j.useEffect(()=>{const f=localStorage.getItem(t)||"[]";a(JSON.parse(f))},[]);function u(f){f.preventDefault();const p=e==="pilaniadmin123";r(p),p||alert("Nah fam, wrong pass.")}function c(f){if(!confirm("Delete for real?"))return;const p=o.filter(g=>g.id!==f);a(p),localStorage.setItem(t,JSON.stringify(p))}return i?P.jsxs("div",{className:"admin-page",children:[P.jsx("h2",{children:"Admin Panel"}),P.jsxs("p",{children:[o.length," place(s) in local DB"]}),P.jsx("p",{className:"muted",children:"Delete any place. For mass edits, export localStorage key manually."}),P.jsxs("div",{className:"admin-list",children:[o.length===0&&P.jsx("p",{children:"No places yet."}),o.map(f=>P.jsxs("div",{className:"place-card",children:[P.jsx("h3",{children:f.name}),P.jsx("div",{className:"desc",children:f.desc||"(no desc)"}),P.jsxs("div",{className:"meta",children:["Category: ",f.category]}),P.jsxs("div",{className:"meta",children:["ID: ",f.id]}),P.jsx("button",{className:"btn ghost",onClick:()=>c(f.id),children:"Delete"})]},f.id))]})]}):P.jsxs("div",{className:"admin-page",children:[P.jsx("h2",{children:"Admin"}),P.jsxs("p",{children:["Enter the admin pass (set in ",P.jsx("code",{children:".env.local"}),")"]}),P.jsxs("form",{onSubmit:u,children:[P.jsx("input",{value:e,onChange:f=>n(f.target.value),placeholder:"admin pass"}),P.jsx("button",{className:"btn",type:"submit",children:"Unlock"})]})]})}function U3(){return P.jsxs(P.Fragment,{children:[P.jsx(c3,{}),P.jsxs(hb,{children:[P.jsx(Pr,{path:"/",element:P.jsx(k3,{})}),P.jsx(Pr,{path:"/login",element:P.jsx(L3,{})}),P.jsx(Pr,{path:"/signup",element:P.jsx(b3,{})}),P.jsx(Pr,{path:"/dashboard",element:P.jsx(am,{children:P.jsx(D3,{})})}),P.jsx(Pr,{path:"/propose",element:P.jsx(am,{children:P.jsx(O3,{})})}),P.jsx(Pr,{path:"/admin-review",element:P.jsx(l3,{children:P.jsx(j3,{})})}),P.jsx(Pr,{path:"/admin",element:P.jsx(am,{children:P.jsx(B3,{})})})]})]})}let ru=document.getElementById("root");ru||(ru=document.createElement("div"),ru.id="root",document.body.appendChild(ru),console.error("Root element was missing — created new one automatically."));window.addEventListener("error",t=>{console.error("Global error caught:",t.error)});window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)});try{ZI(ru).render(P.jsx(qs.StrictMode,{children:P.jsx(yb,{children:P.jsx($j,{children:P.jsx(o3,{mode:"wait",initial:!1,children:P.jsx(U3,{})})})})}))}catch(t){console.error("Error rendering app:",t),document.body.innerHTML=`
    <div style="padding: 20px; color: red; font-family: monospace;">
      <h2>Error loading app:</h2>
      <pre>${t.message}</pre>
    </div>`}
